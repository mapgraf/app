/*! For license information please see module.js.LICENSE.txt */
/* [create-plugin] version: 5.3.2 */
define(["@emotion/css","@emotion/react","@grafana/data","@grafana/runtime","@grafana/ui","lodash","react","react-dom","rxjs"],((t,e,n,i,r,o,s,a,A)=>(()=>{var l,c,u={5223:(t,e,n)=>{var i=n(4224);function r(t){return{type:"Feature",geometry:i.tileToGeoJSON(t),properties:{}}}function o(t,e){var n,r,o=t.coordinates,a=e.max_zoom,u={},h=[];if("Point"===t.type)return[i.pointToTile(o[0],o[1],a)];if("MultiPoint"===t.type)for(0;n<o.length;n++)u[c(i.pointToTile(o[n][0],o[n][1],a)[0],r[1],r[2])]=!0;else if("LineString"===t.type)A(u,o,a);else if("MultiLineString"===t.type)for(0;n<o.length;n++)A(u,o[n],a);else if("Polygon"===t.type)s(u,h,o,a);else{if("MultiPolygon"!==t.type)throw new Error("Geometry type not implemented");for(0;n<o.length;n++)s(u,h,o[n],a)}if(e.min_zoom!==a){var g=h.length;for(l(u,h),0;n<g;n++){var d=h[n];u[c(d[0],d[1],d[2])]=!0}return function(t,e,n){for(var i=[],r=n.max_zoom;r>n.min_zoom;r--){for(var o={},s=[],a=0;a<e.length;a++){var A=e[a];if(A[0]%2==0&&A[1]%2==0){var l=c(A[0]+1,A[1],r),u=c(A[0],A[1]+1,r),h=c(A[0]+1,A[1]+1,r);if(t[l]&&t[u]&&t[h]){t[c(A[0],A[1],A[2])]=!1,t[l]=!1,t[u]=!1,t[h]=!1;var g=[A[0]/2,A[1]/2,r-1];r-1===n.min_zoom?i.push(g):(o[c(A[0]/2,A[1]/2,r-1)]=!0,s.push(g))}}}for(0;a<e.length;a++)t[c(e[a][0],A[1],A[2])]&&i.push(A);s}return i}(u,h,e)}return l(u,h),h}function s(t,e,n,i){for(var r=[],o=0;o<n.length;o++){var s=[];A(t,n[o],i,s);for(var l=0,u=s.length,h=u-1;l<u;l++){var g=(l+1)%u,d=s[l][1];(d>s[h][1]||d>s[g][1])&&(d<s[h][1]||d<s[g][1])&&d!==s[g][1]&&r.push(s[l])}}for(r.sort(a),0;o<r.length;o+=2){r[o][1];for(var p=r[o][0]+1;p<r[o+1][0];p++){t[c(p,d,i)]||e.push([p,d,i])}}}function a(t,e){return t[1]-e[1]||t[0]-e[0]}function A(t,e,n,r){for(var o,s,a=0;a<e.length-1;a++){var A=i.pointToTileFraction(e[a][0],e[a][1],n),l=i.pointToTileFraction(e[a+1][0],e[a+1][1],n),u=A[0],h=A[1],g=l[0]-u,d=l[1]-h;if(0!==d||0!==g){var p=g>0?1:-1,f=d>0?1:-1,m=Math.floor(u),I=Math.floor(h),y=0===g?1/0:Math.abs(((g>0?1:0)+m-u)/g),C=0===d?1/0:Math.abs(((d>0?1:0)+I-h)/d),E=Math.abs(p/g),_=Math.abs(f/d);for(m===o&&I===s||(t[c(m,I,n)]=!0,r&&I!==s&&r.push([m,I]),I);y<1||C<1;)y<C?p:f,t[c(m,I,n)]=!0,r&&I!==s&&r.push([m,I]),I}}r&&I===r[0][1]&&r.pop()}function l(t,e){for(var n,i,r,o,s,a=Object.keys(t),A=0;A<a.length;A++)e.push((+a[A],[(n-n%32)/32%(2*(1<<i)),(o-s)/r%r,i]))}function c(t,e,n){return 32*(2*(1<<n)*e+t)+n}},6056:t=>{"use strict";var e=Math.PI/180,n=180/Math.PI;function i(t){var e=r(t[0]+1,t[2]);return[r(t[0],t[2]),o(t[1]+1,t[2]),e,o(t[1],t[2])]}function r(t,e){return t/Math.pow(2,e)*360-180}function o(t,e){var i=Math.PI-2*Math.PI*t/Math.pow(2,e);return n*Math.atan(.5*(Math.exp(i)-Math.exp(-i)))}function s(t,e,n){var i=h(t,e,n);return i[0]=Math.floor(i[0]),i[1]=Math.floor(i[1]),i}function a(t){return[[2*t[0],2*t[1],t[2]+1],[2*t[0]+1,2*t[1],t[2]+1],[2*t[0]+1,2*t[1]+1,t[2]+1],[2*t[0],2*t[1]+1,t[2]+1]]}function A(t){return[t[0]>>1,t[1]>>1,t[2]-1]}function l(t){return a(A(t))}function c(t,e){for(var n=0;n<t.length;n++)if(u(t[n],e))return!0;return!1}function u(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function h(t,n,i){var r=Math.sin(n*e),o=Math.pow(2,i),s=o*(t/360+.5);return(s%=o)<0&&(s+=o),[s,o*(.5-.25*Math.log((1+r)/(1-r))/Math.PI),i]}t.exports={tileToGeoJSON:function(t){var e=i(t);return{type:"Polygon",coordinates:[[[e[0],e[3]],[e[0],e[1]],[e[2],e[1]],[e[2],e[3]],[e[0],e[3]]]]}},tileToBBOX:i,getChildren:a,getParent:A,getSiblings:l,hasTile:c,hasSiblings:function(t,e){for(var n=l(t),i=0;i<n.length;i++)if(!c(e,n[i]))return!1;return!0},tilesEqual:u,tileToQuadkey:function(t){for(var e="",n=t[2];n>0;n--){var i=0,r=1<<n-1;t[0]&r&&i++,t[1]&r&&(i+=2),e+=i.toString()}return e},quadkeyToTile:function(t){for(var e=0,n=0,i=t.length,r=i;r>0;r--){var o=1<<r-1,s=+t[i-r];1===s&&(e|=o),2===s&&(n|=o),3===s&&(e|=o,n|=o)}return[e,n,i]},pointToTile:s,bboxToTile:function(t){var e=s(t[0],t[1],32),n=s(t[2],t[3],32),i=[e[0],e[1],n[0],n[1]],r=function(t){for(var e=28,n=0;n<e;n++){var i=1<<32-(n+1);if((t[0]&i)!=(t[2]&i)||(t[1]&i)!=(t[3]&i))return n}return e}(i);return 0===r?[0,0,0]:[i[0]>>>32-r,i[1]>>>32-r,r]},pointToTileFraction:h}},4398:(t,e,n)=>{"use strict";var i=n(6784);e.A=void 0;var r=i(n(7044)),o=n(2540);e.A=(0,r.default)((0,o.jsx)("path",{d:"M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),"ArrowBackIos")},6450:(t,e,n)=>{"use strict";var i=n(6784);e.A=void 0;var r=i(n(7044)),o=n(2540);e.A=(0,r.default)((0,o.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos")},7044:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return i.createSvgIcon}});var i=n(1422)},7372:(t,e,n)=>{"use strict";n.d(e,{b:()=>A});var i=n(5959),r=n(8102);function o(t,e){const n=(0,r.A)({},e);return Object.keys(t).forEach((i=>{if(i.toString().match(/^(components|slots)$/))n[i]=(0,r.A)({},t[i],n[i]);else if(i.toString().match(/^(componentsProps|slotProps)$/)){const s=t[i]||{},a=e[i];n[i]={},a&&Object.keys(a)?s&&Object.keys(s)?(n[i]=(0,r.A)({},a),Object.keys(s).forEach((t=>{n[i][t]=o(s[t],a[t])}))):n[i]=a:n[i]=s}else void 0===n[i]&&(n[i]=t[i])})),n}n(2540);const s=i.createContext(void 0);function a({props:t,name:e}){return function(t){const{theme:e,name:n,props:i}=t;if(!e||!e.components||!e.components[n])return i;const r=e.components[n];return r.defaultProps?o(r.defaultProps,i):r.styleOverrides||r.variants?i:o(r,i)}({props:t,name:e,theme:{components:i.useContext(s)}})}function A(t){return a(t)}},3403:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const i=function(t){return"ownerState"!==t&&"theme"!==t&&"sx"!==t&&"as"!==t},r=t=>i(t)&&"classes"!==t},5213:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>j});var i=n(7593),r=n(8102),o=n(9257),s=n(7425),a=n(6121),A=n(8624),l=n(2927),c=n(8953);var u=n(495);const h={black:"#000",white:"#fff"},g={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},d={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},p={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},f={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},m={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},I={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},y={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},C=["mode","contrastThreshold","tonalOffset"],E={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:h.white,default:h.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},_={text:{primary:h.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:h.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function v(t,e,n,i){const r=i.light||i,o=i.dark||1.5*i;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:"light"===e?t.light=(0,u.a)(t.main,r):"dark"===e&&(t.dark=(0,u.e$)(t.main,o)))}function B(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:i=.2}=t,A=(0,o.A)(t,C),l=t.primary||function(t="light"){return"dark"===t?{main:m[200],light:m[50],dark:m[400]}:{main:m[700],light:m[400],dark:m[800]}}(e),c=t.secondary||function(t="light"){return"dark"===t?{main:d[200],light:d[50],dark:d[400]}:{main:d[500],light:d[300],dark:d[700]}}(e),B=t.error||function(t="light"){return"dark"===t?{main:p[500],light:p[300],dark:p[700]}:{main:p[700],light:p[400],dark:p[800]}}(e),w=t.info||function(t="light"){return"dark"===t?{main:I[400],light:I[300],dark:I[700]}:{main:I[700],light:I[500],dark:I[900]}}(e),b=t.success||function(t="light"){return"dark"===t?{main:y[400],light:y[300],dark:y[700]}:{main:y[800],light:y[500],dark:y[900]}}(e),Q=t.warning||function(t="light"){return"dark"===t?{main:f[400],light:f[300],dark:f[700]}:{main:"#ed6c02",light:f[500],dark:f[900]}}(e);function x(t){return(0,u.eM)(t,_.text.primary)>=n?_.text.primary:E.text.primary}const D=({color:t,name:e,mainShade:n=500,lightShade:o=300,darkShade:a=700})=>{if(!(t=(0,r.A)({},t)).main&&t[n]&&(t.main=t[n]),!t.hasOwnProperty("main"))throw new Error((0,s.A)(11,e?` (${e})`:"",n));if("string"!=typeof t.main)throw new Error((0,s.A)(12,e?` (${e})`:"",JSON.stringify(t.main)));return v(t,"light",o,i),v(t,"dark",a,i),t.contrastText||(t.contrastText=x(t.main)),t},S={dark:_,light:E};return(0,a.A)((0,r.A)({common:(0,r.A)({},h),mode:e,primary:D({color:l,name:"primary"}),secondary:D({color:c,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:D({color:B,name:"error"}),warning:D({color:Q,name:"warning"}),info:D({color:w,name:"info"}),success:D({color:b,name:"success"}),grey:g,contrastThreshold:n,getContrastText:x,augmentColor:D,tonalOffset:i},S[e]),A)}const w=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const b={textTransform:"uppercase"},Q='"Roboto", "Helvetica", "Arial", sans-serif';function x(t,e){const n="function"==typeof e?e(t):e,{fontFamily:i=Q,fontSize:s=14,fontWeightLight:A=300,fontWeightRegular:l=400,fontWeightMedium:c=500,fontWeightBold:u=700,htmlFontSize:h=16,allVariants:g,pxToRem:d}=n,p=(0,o.A)(n,w);const f=s/14,m=d||(t=>t/h*f+"rem"),I=(t,e,n,o,s)=>{return(0,r.A)({fontFamily:i,fontWeight:t,fontSize:m(e),lineHeight:n},i===Q?{letterSpacing:(a=o/e,Math.round(1e5*a)/1e5)+"em"}:{},s,g);var a},y={h1:I(A,96,1.167,-1.5),h2:I(A,60,1.2,-.5),h3:I(l,48,1.167,0),h4:I(l,34,1.235,.25),h5:I(l,24,1.334,0),h6:I(c,20,1.6,.15),subtitle1:I(l,16,1.75,.15),subtitle2:I(c,14,1.57,.1),body1:I(l,16,1.5,.15),body2:I(l,14,1.43,.15),button:I(c,14,1.75,.4,b),caption:I(l,12,1.66,.4),overline:I(l,12,2.66,1,b),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return(0,a.A)((0,r.A)({htmlFontSize:h,pxToRem:m,fontFamily:i,fontSize:s,fontWeightLight:A,fontWeightRegular:l,fontWeightMedium:c,fontWeightBold:u},y),p,{clone:!1})}function D(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,0.2)`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,0.14)`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,0.12)`].join(",")}const S=["none",D(0,2,1,-1,0,1,1,0,0,1,3,0),D(0,3,1,-2,0,2,2,0,0,1,5,0),D(0,3,3,-2,0,3,4,0,0,1,8,0),D(0,2,4,-1,0,4,5,0,0,1,10,0),D(0,3,5,-1,0,5,8,0,0,1,14,0),D(0,3,5,-1,0,6,10,0,0,1,18,0),D(0,4,5,-2,0,7,10,1,0,2,16,1),D(0,5,5,-3,0,8,10,1,0,3,14,2),D(0,5,6,-3,0,9,12,1,0,3,16,2),D(0,6,6,-3,0,10,14,1,0,4,18,3),D(0,6,7,-4,0,11,15,1,0,4,20,3),D(0,7,8,-4,0,12,17,2,0,5,22,4),D(0,7,8,-4,0,13,19,2,0,5,24,4),D(0,7,9,-4,0,14,21,2,0,5,26,4),D(0,8,9,-5,0,15,22,2,0,6,28,5),D(0,8,10,-5,0,16,24,2,0,6,30,5),D(0,8,11,-5,0,17,26,2,0,6,32,5),D(0,9,11,-5,0,18,28,2,0,7,34,6),D(0,9,12,-6,0,19,29,2,0,7,36,6),D(0,10,13,-6,0,20,31,3,0,8,38,7),D(0,10,13,-6,0,21,33,3,0,8,40,7),D(0,10,14,-6,0,22,35,3,0,8,42,7),D(0,11,14,-7,0,23,36,3,0,9,44,8),D(0,11,15,-7,0,24,38,3,0,9,46,8)],M=["duration","easing","delay"],k={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},R={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function N(t){return`${Math.round(t)}ms`}function P(t){if(!t)return 0;const e=t/36;return Math.round(10*(4+15*e**.25+e/5))}function T(t){const e=(0,r.A)({},k,t.easing),n=(0,r.A)({},R,t.duration);return(0,r.A)({getAutoHeightDuration:P,create:(t=["all"],i={})=>{const{duration:r=n.standard,easing:s=e.easeInOut,delay:a=0}=i;(0,o.A)(i,M);return(Array.isArray(t)?t:[t]).map((t=>`${t} ${"string"==typeof r?r:N(r)} ${s} ${"string"==typeof a?a:N(a)}`)).join(",")}},t,{easing:e,duration:n})}const L={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},F=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function O(t={},...e){const{mixins:n={},palette:i={},transitions:u={},typography:h={}}=t,g=(0,o.A)(t,F);if(t.vars)throw new Error((0,s.A)(18));const d=B(i),p=(0,c.A)(t);let f=(0,a.A)(p,{mixins:(m=p.breakpoints,I=n,(0,r.A)({toolbar:{minHeight:56,[m.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[m.up("sm")]:{minHeight:64}}},I)),palette:d,shadows:S.slice(),typography:x(d,h),transitions:T(u),zIndex:(0,r.A)({},L)});var m,I;return f=(0,a.A)(f,g),f=e.reduce(((t,e)=>(0,a.A)(t,e)),f),f.unstable_sxConfig=(0,r.A)({},A.A,null==g?void 0:g.unstable_sxConfig),f.unstable_sx=function(t){return(0,l.A)({sx:t,theme:this})},f}const G=O();var U=n(3403);const j=(0,i.Ay)({themeId:"$$material",defaultTheme:G,rootShouldForwardProp:U.A})},4726:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});const i=n(5235).A},1422:(t,e,n)=>{"use strict";n.r(e),n.d(e,{capitalize:()=>r.A,createChainedFunction:()=>o,createSvgIcon:()=>E,debounce:()=>_,deprecatedPropType:()=>v,isMuiElement:()=>B.A,ownerDocument:()=>b,ownerWindow:()=>Q,requirePropFactory:()=>x,setRef:()=>D,unstable_ClassNameGenerator:()=>O,unstable_useEnhancedEffect:()=>S.A,unstable_useId:()=>R,unsupportedProp:()=>N,useControlled:()=>P,useEventCallback:()=>T.A,useForkRef:()=>L.A,useIsFocusVisible:()=>F.A});var i=n(1027),r=n(4726);const o=function(...t){return t.reduce(((t,e)=>null==e?t:function(...n){t.apply(this,n),e.apply(this,n)}),(()=>{}))};var s=n(8102),a=n(5959),A=n(9257),l=n(1750),c=n(1023),u=n(7372),h=n(5213),g=n(9009),d=n(6733);function p(t){return(0,d.Ay)("MuiSvgIcon",t)}(0,g.A)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var f=n(2540);const m=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],I=(0,h.Ay)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,"inherit"!==n.color&&e[`color${(0,r.A)(n.color)}`],e[`fontSize${(0,r.A)(n.fontSize)}`]]}})((({theme:t,ownerState:e})=>{var n,i,r,o,s,a,A,l,c,u,h,g,d;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:e.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(n=t.transitions)||null==(i=n.create)?void 0:i.call(n,"fill",{duration:null==(r=t.transitions)||null==(r=r.duration)?void 0:r.shorter}),fontSize:{inherit:"inherit",small:(null==(o=t.typography)||null==(s=o.pxToRem)?void 0:s.call(o,20))||"1.25rem",medium:(null==(a=t.typography)||null==(A=a.pxToRem)?void 0:A.call(a,24))||"1.5rem",large:(null==(l=t.typography)||null==(c=l.pxToRem)?void 0:c.call(l,35))||"2.1875rem"}[e.fontSize],color:null!=(u=null==(h=(t.vars||t).palette)||null==(h=h[e.color])?void 0:h.main)?u:{action:null==(g=(t.vars||t).palette)||null==(g=g.action)?void 0:g.active,disabled:null==(d=(t.vars||t).palette)||null==(d=d.action)?void 0:d.disabled,inherit:void 0}[e.color]}})),y=a.forwardRef((function(t,e){const n=(0,u.b)({props:t,name:"MuiSvgIcon"}),{children:i,className:o,color:h="inherit",component:g="svg",fontSize:d="medium",htmlColor:y,inheritViewBox:C=!1,titleAccess:E,viewBox:_="0 0 24 24"}=n,v=(0,A.A)(n,m),B=a.isValidElement(i)&&"svg"===i.type,w=(0,s.A)({},n,{color:h,component:g,fontSize:d,instanceFontSize:t.fontSize,inheritViewBox:C,viewBox:_,hasSvgAsChild:B}),b={};C||(b.viewBox=_);const Q=(t=>{const{color:e,fontSize:n,classes:i}=t,o={root:["root","inherit"!==e&&`color${(0,r.A)(e)}`,`fontSize${(0,r.A)(n)}`]};return(0,c.A)(o,p,i)})(w);return(0,f.jsxs)(I,(0,s.A)({as:g,className:(0,l.A)(Q.root,o),focusable:"false",color:y,"aria-hidden":!E||void 0,role:E?"img":void 0,ref:e},b,v,B&&i.props,{ownerState:w,children:[B?i.props.children:i,E?(0,f.jsx)("title",{children:E}):null]}))}));y.muiName="SvgIcon";const C=y;function E(t,e){function n(n,i){return(0,f.jsx)(C,(0,s.A)({"data-testid":`${e}Icon`,ref:i},n,{children:t}))}return n.muiName=C.muiName,a.memo(a.forwardRef(n))}const _=function(t,e=166){let n;function i(...i){clearTimeout(n),n=setTimeout((()=>{t.apply(this,i)}),e)}return i.clear=()=>{clearTimeout(n)},i};const v=function(t,e){return()=>null};var B=n(6421);function w(t){return t&&t.ownerDocument||document}const b=w;const Q=function(t){return w(t).defaultView||window};const x=function(t,e){return()=>null};const D=n(1849).A;var S=n(4382);let M=0;const k=a["useId".toString()];const R=function(t){if(void 0!==k){const e=k();return null!=t?t:e}return function(t){const[e,n]=a.useState(t),i=t||e;return a.useEffect((()=>{null==e&&(M+=1,n(`mui-${M}`))}),[e]),i}(t)};const N=function(t,e,n,i,r){return null};const P=function({controlled:t,default:e,name:n,state:i="value"}){const{current:r}=a.useRef(void 0!==t),[o,s]=a.useState(e);return[r?t:o,a.useCallback((t=>{r||s(t)}),[])]};var T=n(4317),L=n(6504),F=n(5519);const O={configure:t=>{i.A.configure(t)}}},6421:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(5959);const r=function(t,e){var n,r;return i.isValidElement(t)&&-1!==e.indexOf(null!=(n=t.type.muiName)?n:null==(r=t.type)||null==(r=r._payload)||null==(r=r.value)?void 0:r.muiName)}},4382:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});const i=n(1789).A},4317:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var i=n(5959),r=n(1789);const o=function(t){const e=i.useRef(t);return(0,r.A)((()=>{e.current=t})),i.useRef(((...t)=>(0,e.current)(...t))).current}},6504:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var i=n(5959),r=n(1849);const o=function(...t){return i.useMemo((()=>t.every((t=>null==t))?null:e=>{t.forEach((t=>{(0,r.A)(t,e)}))}),t)}},5519:(t,e,n)=>{"use strict";n.d(e,{A:()=>g});var i=n(5959),r=n(8016);let o=!0,s=!1;const a=new r.E,A={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function l(t){t.metaKey||t.altKey||t.ctrlKey||(o=!0)}function c(){o=!1}function u(){"hidden"===this.visibilityState&&s&&(o=!0)}function h(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch(t){}return o||function(t){const{type:e,tagName:n}=t;return!("INPUT"!==n||!A[e]||t.readOnly)||"TEXTAREA"===n&&!t.readOnly||!!t.isContentEditable}(e)}const g=function(){const t=i.useCallback((t=>{var e;null!=t&&((e=t.ownerDocument).addEventListener("keydown",l,!0),e.addEventListener("mousedown",c,!0),e.addEventListener("pointerdown",c,!0),e.addEventListener("touchstart",c,!0),e.addEventListener("visibilitychange",u,!0))}),[]),e=i.useRef(!1);return{isFocusVisibleRef:e,onFocus:function(t){return!!h(t)&&(e.current=!0,!0)},onBlur:function(){return!!e.current&&(s=!0,a.start(100,(()=>{s=!1})),e.current=!1,!0)},ref:t}}},4326:(t,e,n)=>{"use strict";n.r(e),n.d(e,{GlobalStyles:()=>Nt,StyledEngineProvider:()=>Rt,ThemeContext:()=>A.ThemeContext,css:()=>A.css,default:()=>Pt,internal_processStyles:()=>Tt,keyframes:()=>A.keyframes});var i=n(8102),r=n(5959);function o(t){var e=Object.create(null);return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}var s=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,a=o((function(t){return s.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91})),A=n(9089);var l=function(t,e,n){var i=t.key+"-"+e.name;!1===n&&void 0===t.registered[i]&&(t.registered[i]=e.styles)};var c={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},u=!1,h=/[A-Z]|^ms/g,g=/_EMO_([^_]+?)_([^]*?)_EMO_/g,d=function(t){return 45===t.charCodeAt(1)},p=function(t){return null!=t&&"boolean"!=typeof t},f=o((function(t){return d(t)?t:t.replace(h,"-$&").toLowerCase()})),m=function(t,e){switch(t){case"animation":case"animationName":if("string"==typeof e)return e.replace(g,(function(t,e,n){return C={name:e,styles:n,next:C},e}))}return 1===c[t]||d(t)||"number"!=typeof e||0===e?e:e+"px"},I="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function y(t,e,n){if(null==n)return"";var i=n;if(void 0!==i.__emotion_styles)return i;switch(typeof n){case"boolean":return"";case"object":var r=n;if(1===r.anim)return C={name:r.name,styles:r.styles,next:C},r.name;var o=n;if(void 0!==o.styles){var s=o.next;if(void 0!==s)for(;void 0!==s;)C={name:s.name,styles:s.styles,next:C},s=s.next;return o.styles+";"}return function(t,e,n){var i="";if(Array.isArray(n))for(var r=0;r<n.length;r++)i+=y(t,e,n[r])+";";else for(var o in n){var s=n[o];if("object"!=typeof s){var a=s;null!=e&&void 0!==e[a]?i+=o+"{"+e[a]+"}":p(a)&&(i+=f(o)+":"+m(o,a)+";")}else{if("NO_COMPONENT_SELECTOR"===o&&u)throw new Error(I);if(!Array.isArray(s)||"string"!=typeof s[0]||null!=e&&void 0!==e[s[0]]){var A=y(t,e,s);switch(o){case"animation":case"animationName":i+=f(o)+":"+A+";";break;default:i+=o+"{"+A+"}"}}else for(var l=0;l<s.length;l++)p(s[l])&&(i+=f(o)+":"+m(o,s[l])+";")}}return i}(t,e,n);case"function":if(void 0!==t){var a=C,A=n(t);return C=a,y(t,e,A)}}var l=n;if(null==e)return l;var c=e[l];return void 0!==c?c:l}var C,E=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var _=!!r.useInsertionEffect&&r.useInsertionEffect,v=_||function(t){return t()},B=(_||r.useLayoutEffect,a),w=function(t){return"theme"!==t},b=function(t){return"string"==typeof t&&t.charCodeAt(0)>96?B:w},Q=function(t,e,n){var i;if(e){var r=e.shouldForwardProp;i=t.__emotion_forwardProp&&r?function(e){return t.__emotion_forwardProp(e)&&r(e)}:r}return"function"!=typeof i&&n&&(i=t.__emotion_forwardProp),i},x=function(t){var e=t.cache,n=t.serialized,i=t.isStringTag;return l(e,n,i),v((function(){return function(t,e,n){l(t,e,n);var i=t.key+"-"+e.name;if(void 0===t.inserted[e.name]){var r=e;do{t.insert(e===r?"."+i:"",r,t.sheet,!0),r=r.next}while(void 0!==r)}}(e,n,i)})),null},D=function t(e,n){var o,s,a=e.__emotion_real===e,l=a&&e.__emotion_base||e;void 0!==n&&(o=n.label,s=n.target);var c=Q(e,n,a),u=c||b(l),h=!u("as");return function(){var g=arguments,d=a&&void 0!==e.__emotion_styles?e.__emotion_styles.slice(0):[];if(void 0!==o&&d.push("label:"+o+";"),null==g[0]||void 0===g[0].raw)d.push.apply(d,g);else{d.push(g[0][0]);for(var p=g.length,f=1;f<p;f++)d.push(g[f],g[0][f])}var m=(0,A.withEmotionCache)((function(t,e,n){var i,o,a,g,p=h&&t.as||l,f="",m=[],I=t;if(null==t.theme){for(var _ in I={},t)I[_]=t[_];I.theme=r.useContext(A.ThemeContext)}"string"==typeof t.className?(i=e.registered,o=m,a=t.className,g="",a.split(" ").forEach((function(t){void 0!==i[t]?o.push(i[t]+";"):g+=t+" "})),f=g):null!=t.className&&(f=t.className+" ");var v=function(t,e,n){if(1===t.length&&"object"==typeof t[0]&&null!==t[0]&&void 0!==t[0].styles)return t[0];var i=!0,r="";C=void 0;var o=t[0];null==o||void 0===o.raw?(i=!1,r+=y(n,e,o)):r+=o[0];for(var s=1;s<t.length;s++)r+=y(n,e,t[s]),i&&(r+=o[s]);E.lastIndex=0;for(var a,A="";null!==(a=E.exec(r));)A+="-"+a[1];var l=function(t){for(var e,n=0,i=0,r=t.length;r>=4;++i,r-=4)e=1540483477*(65535&(e=255&t.charCodeAt(i)|(255&t.charCodeAt(++i))<<8|(255&t.charCodeAt(++i))<<16|(255&t.charCodeAt(++i))<<24))+(59797*(e>>>16)<<16),n=1540483477*(65535&(e^=e>>>24))+(59797*(e>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(r){case 3:n^=(255&t.charCodeAt(i+2))<<16;case 2:n^=(255&t.charCodeAt(i+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(i)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(r)+A;return{name:l,styles:r,next:C}}(d.concat(m),e.registered,I);f+=e.key+"-"+v.name,void 0!==s&&(f+=" "+s);var B=h&&void 0===c?b(p):u,w={};for(var Q in t)h&&"as"===Q||B(Q)&&(w[Q]=t[Q]);return w.className=f,n&&(w.ref=n),r.createElement(r.Fragment,null,r.createElement(x,{cache:e,serialized:v,isStringTag:"string"==typeof p}),r.createElement(p,w))}));return m.displayName=void 0!==o?o:"Styled("+("string"==typeof l?l:l.displayName||l.name||"Component")+")",m.defaultProps=e.defaultProps,m.__emotion_real=m,m.__emotion_base=l,m.__emotion_styles=d,m.__emotion_forwardProp=c,Object.defineProperty(m,"toString",{value:function(){return"."+s}}),m.withComponent=function(e,r){return t(e,(0,i.A)({},n,r,{shouldForwardProp:Q(m,r,!0)})).apply(void 0,d)},m}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(t){D[t]=D(t)}));var S=function(){function t(t){var e=this;this._insertTag=function(t){var n;n=0===e.tags.length?e.insertionPoint?e.insertionPoint.nextSibling:e.prepend?e.container.firstChild:e.before:e.tags[e.tags.length-1].nextSibling,e.container.insertBefore(t,n),e.tags.push(t)},this.isSpeedy=void 0===t.speedy||t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(t){t.forEach(this._insertTag)},e.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),void 0!==t.nonce&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}(this));var e=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}(e);try{n.insertRule(t,n.cssRules.length)}catch(t){}}else e.appendChild(document.createTextNode(t));this.ctr++},e.flush=function(){this.tags.forEach((function(t){var e;return null==(e=t.parentNode)?void 0:e.removeChild(t)})),this.tags=[],this.ctr=0},t}(),M=Math.abs,k=String.fromCharCode,R=Object.assign;function N(t){return t.trim()}function P(t,e,n){return t.replace(e,n)}function T(t,e){return t.indexOf(e)}function L(t,e){return 0|t.charCodeAt(e)}function F(t,e,n){return t.slice(e,n)}function O(t){return t.length}function G(t){return t.length}function U(t,e){return e.push(t),t}var j=1,Y=1,K=0,z=0,J=0,q="";function H(t,e,n,i,r,o,s){return{value:t,root:e,parent:n,type:i,props:r,children:o,line:j,column:Y,length:s,return:""}}function V(t,e){return R(H("",null,null,"",null,null,0),t,{length:-t.length},e)}function W(){return J=z>0?L(q,--z):0,Y--,10===J&&(Y=1,j--),J}function Z(){return J=z<K?L(q,z++):0,Y++,10===J&&(Y=1,j++),J}function X(){return L(q,z)}function $(){return z}function tt(t,e){return F(q,t,e)}function et(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function nt(t){return j=Y=1,K=O(q=t),z=0,[]}function it(t){return q="",t}function rt(t){return N(tt(z-1,at(91===t?t+2:40===t?t+1:t)))}function ot(t){for(;(J=X())&&J<33;)Z();return et(t)>2||et(J)>3?"":" "}function st(t,e){for(;--e&&Z()&&!(J<48||J>102||J>57&&J<65||J>70&&J<97););return tt(t,$()+(e<6&&32==X()&&32==Z()))}function at(t){for(;Z();)switch(J){case t:return z;case 34:case 39:34!==t&&39!==t&&at(J);break;case 40:41===t&&at(t);break;case 92:Z()}return z}function At(t,e){for(;Z()&&t+J!==57&&(t+J!==84||47!==X()););return"/*"+tt(e,z-1)+"*"+k(47===t?t:Z())}function lt(t){for(;!et(X());)Z();return tt(t,z)}var ct="-ms-",ut="-moz-",ht="-webkit-",gt="comm",dt="rule",pt="decl",ft="@keyframes";function mt(t,e){for(var n="",i=G(t),r=0;r<i;r++)n+=e(t[r],r,t,e)||"";return n}function It(t,e,n,i){switch(t.type){case"@layer":if(t.children.length)break;case"@import":case pt:return t.return=t.return||t.value;case gt:return"";case ft:return t.return=t.value+"{"+mt(t.children,i)+"}";case dt:t.value=t.props.join(",")}return O(n=mt(t.children,i))?t.return=t.value+"{"+n+"}":""}function yt(t){return it(Ct("",null,null,null,[""],t=nt(t),0,[0],t))}function Ct(t,e,n,i,r,o,s,a,A){for(var l=0,c=0,u=s,h=0,g=0,d=0,p=1,f=1,m=1,I=0,y="",C=r,E=o,_=i,v=y;f;)switch(d=I,I=Z()){case 40:if(108!=d&&58==L(v,u-1)){-1!=T(v+=P(rt(I),"&","&\f"),"&\f")&&(m=-1);break}case 34:case 39:case 91:v+=rt(I);break;case 9:case 10:case 13:case 32:v+=ot(d);break;case 92:v+=st($()-1,7);continue;case 47:switch(X()){case 42:case 47:U(_t(At(Z(),$()),e,n),A);break;default:v+="/"}break;case 123*p:a[l++]=O(v)*m;case 125*p:case 59:case 0:switch(I){case 0:case 125:f=0;case 59+c:-1==m&&(v=P(v,/\f/g,"")),g>0&&O(v)-u&&U(g>32?vt(v+";",i,n,u-1):vt(P(v," ","")+";",i,n,u-2),A);break;case 59:v+=";";default:if(U(_=Et(v,e,n,l,c,r,a,y,C=[],E=[],u),o),123===I)if(0===c)Ct(v,e,_,_,C,o,u,a,E);else switch(99===h&&110===L(v,3)?100:h){case 100:case 108:case 109:case 115:Ct(t,_,_,i&&U(Et(t,_,_,0,0,r,a,y,r,C=[],u),E),r,E,u,a,i?C:E);break;default:Ct(v,_,_,_,[""],E,0,a,E)}}l=c=g=0,p=m=1,y=v="",u=s;break;case 58:u=1+O(v),g=d;default:if(p<1)if(123==I)--p;else if(125==I&&0==p++&&125==W())continue;switch(v+=k(I),I*p){case 38:m=c>0?1:(v+="\f",-1);break;case 44:a[l++]=(O(v)-1)*m,m=1;break;case 64:45===X()&&(v+=rt(Z())),h=X(),c=u=O(y=v+=lt($())),I++;break;case 45:45===d&&2==O(v)&&(p=0)}}return o}function Et(t,e,n,i,r,o,s,a,A,l,c){for(var u=r-1,h=0===r?o:[""],g=G(h),d=0,p=0,f=0;d<i;++d)for(var m=0,I=F(t,u+1,u=M(p=s[d])),y=t;m<g;++m)(y=N(p>0?h[m]+" "+I:P(I,/&\f/g,h[m])))&&(A[f++]=y);return H(t,e,n,0===r?dt:a,A,l,c)}function _t(t,e,n){return H(t,e,n,gt,k(J),F(t,2,-2),0)}function vt(t,e,n,i){return H(t,e,n,pt,F(t,0,i),F(t,i+1,-1),i)}var Bt=function(t,e,n){for(var i=0,r=0;i=r,r=X(),38===i&&12===r&&(e[n]=1),!et(r);)Z();return tt(t,z)},wt=function(t,e){return it(function(t,e){var n=-1,i=44;do{switch(et(i)){case 0:38===i&&12===X()&&(e[n]=1),t[n]+=Bt(z-1,e,n);break;case 2:t[n]+=rt(i);break;case 4:if(44===i){t[++n]=58===X()?"&\f":"",e[n]=t[n].length;break}default:t[n]+=k(i)}}while(i=Z());return t}(nt(t),e))},bt=new WeakMap,Qt=function(t){if("rule"===t.type&&t.parent&&!(t.length<1)){for(var e=t.value,n=t.parent,i=t.column===n.column&&t.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==t.props.length||58===e.charCodeAt(0)||bt.get(n))&&!i){bt.set(t,!0);for(var r=[],o=wt(e,r),s=n.props,a=0,A=0;a<o.length;a++)for(var l=0;l<s.length;l++,A++)t.props[A]=r[a]?o[a].replace(/&\f/g,s[l]):s[l]+" "+o[a]}}},xt=function(t){if("decl"===t.type){var e=t.value;108===e.charCodeAt(0)&&98===e.charCodeAt(2)&&(t.return="",t.value="")}};function Dt(t,e){switch(function(t,e){return 45^L(t,0)?(((e<<2^L(t,0))<<2^L(t,1))<<2^L(t,2))<<2^L(t,3):0}(t,e)){case 5103:return ht+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ht+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return ht+t+ut+t+ct+t+t;case 6828:case 4268:return ht+t+ct+t+t;case 6165:return ht+t+ct+"flex-"+t+t;case 5187:return ht+t+P(t,/(\w+).+(:[^]+)/,ht+"box-$1$2"+ct+"flex-$1$2")+t;case 5443:return ht+t+ct+"flex-item-"+P(t,/flex-|-self/,"")+t;case 4675:return ht+t+ct+"flex-line-pack"+P(t,/align-content|flex-|-self/,"")+t;case 5548:return ht+t+ct+P(t,"shrink","negative")+t;case 5292:return ht+t+ct+P(t,"basis","preferred-size")+t;case 6060:return ht+"box-"+P(t,"-grow","")+ht+t+ct+P(t,"grow","positive")+t;case 4554:return ht+P(t,/([^-])(transform)/g,"$1"+ht+"$2")+t;case 6187:return P(P(P(t,/(zoom-|grab)/,ht+"$1"),/(image-set)/,ht+"$1"),t,"")+t;case 5495:case 3959:return P(t,/(image-set\([^]*)/,ht+"$1$`$1");case 4968:return P(P(t,/(.+:)(flex-)?(.*)/,ht+"box-pack:$3"+ct+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ht+t+t;case 4095:case 3583:case 4068:case 2532:return P(t,/(.+)-inline(.+)/,ht+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(O(t)-1-e>6)switch(L(t,e+1)){case 109:if(45!==L(t,e+4))break;case 102:return P(t,/(.+:)(.+)-([^]+)/,"$1"+ht+"$2-$3$1"+ut+(108==L(t,e+3)?"$3":"$2-$3"))+t;case 115:return~T(t,"stretch")?Dt(P(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(115!==L(t,e+1))break;case 6444:switch(L(t,O(t)-3-(~T(t,"!important")&&10))){case 107:return P(t,":",":"+ht)+t;case 101:return P(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ht+(45===L(t,14)?"inline-":"")+"box$3$1"+ht+"$2$3$1"+ct+"$2box$3")+t}break;case 5936:switch(L(t,e+11)){case 114:return ht+t+ct+P(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return ht+t+ct+P(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return ht+t+ct+P(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return ht+t+ct+t+t}return t}var St=[function(t,e,n,i){if(t.length>-1&&!t.return)switch(t.type){case pt:t.return=Dt(t.value,t.length);break;case ft:return mt([V(t,{value:P(t.value,"@","@"+ht)})],i);case dt:if(t.length)return function(t,e){return t.map(e).join("")}(t.props,(function(e){switch(function(t,e){return(t=e.exec(t))?t[0]:t}(e,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return mt([V(t,{props:[P(e,/:(read-\w+)/,":-moz-$1")]})],i);case"::placeholder":return mt([V(t,{props:[P(e,/:(plac\w+)/,":"+ht+"input-$1")]}),V(t,{props:[P(e,/:(plac\w+)/,":-moz-$1")]}),V(t,{props:[P(e,/:(plac\w+)/,ct+"input-$1")]})],i)}return""}))}}],Mt=n(2540);let kt;function Rt(t){const{injectFirst:e,children:n}=t;return e&&kt?(0,Mt.jsx)(A.CacheProvider,{value:kt,children:n}):n}function Nt(t){const{styles:e,defaultTheme:n={}}=t,i="function"==typeof e?t=>{return e(null==(i=t)||0===Object.keys(i).length?n:t);var i}:e;return(0,Mt.jsx)(A.Global,{styles:i})}function Pt(t,e){return D(t,e)}"object"==typeof document&&(kt=function(t){var e=t.key;if("css"===e){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(t){-1!==t.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(t),t.setAttribute("data-s",""))}))}var i,r,o=t.stylisPlugins||St,s={},a=[];i=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),(function(t){for(var e=t.getAttribute("data-emotion").split(" "),n=1;n<e.length;n++)s[e[n]]=!0;a.push(t)}));var A,l,c,u,h=[It,(u=function(t){A.insert(t)},function(t){t.root||(t=t.return)&&u(t)})],g=(l=[Qt,xt].concat(o,h),c=G(l),function(t,e,n,i){for(var r="",o=0;o<c;o++)r+=l[o](t,e,n,i)||"";return r});r=function(t,e,n,i){A=n,mt(yt(t?t+"{"+e.styles+"}":e.styles),g),i&&(d.inserted[e.name]=!0)};var d={key:e,sheet:new S({key:e,container:i,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:r};return d.sheet.hydrate(a),d}({key:"css",prepend:!0}));const Tt=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}},495:(t,e,n)=>{"use strict";var i=n(6784);e.X4=g,e.e$=d,e.eM=function(t,e){const n=h(t),i=h(e);return(Math.max(n,i)+.05)/(Math.min(n,i)+.05)},e.a=p;var r=i(n(6284)),o=i(n(8859));function s(t,e=0,n=1){return(0,o.default)(t,e,n)}function a(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&1===n[0].length&&(n=n.map((t=>t+t))),n?`rgb${4===n.length?"a":""}(${n.map(((t,e)=>e<3?parseInt(t,16):Math.round(parseInt(t,16)/255*1e3)/1e3)).join(", ")})`:""}function A(t){if(t.type)return t;if("#"===t.charAt(0))return A(a(t));const e=t.indexOf("("),n=t.substring(0,e);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,r.default)(9,t));let i,o=t.substring(e+1,t.length-1);if("color"===n){if(o=o.split(" "),i=o.shift(),4===o.length&&"/"===o[3].charAt(0)&&(o[3]=o[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i))throw new Error((0,r.default)(10,i))}else o=o.split(",");return o=o.map((t=>parseFloat(t))),{type:n,values:o,colorSpace:i}}const l=t=>{const e=A(t);return e.values.slice(0,3).map(((t,n)=>-1!==e.type.indexOf("hsl")&&0!==n?`${t}%`:t)).join(" ")};function c(t){const{type:e,colorSpace:n}=t;let{values:i}=t;return-1!==e.indexOf("rgb")?i=i.map(((t,e)=>e<3?parseInt(t,10):t)):-1!==e.indexOf("hsl")&&(i[1]=`${i[1]}%`,i[2]=`${i[2]}%`),i=-1!==e.indexOf("color")?`${n} ${i.join(" ")}`:`${i.join(", ")}`,`${e}(${i})`}function u(t){t=A(t);const{values:e}=t,n=e[0],i=e[1]/100,r=e[2]/100,o=i*Math.min(r,1-r),s=(t,e=(t+n/30)%12)=>r-o*Math.max(Math.min(e-3,9-e,1),-1);let a="rgb";const l=[Math.round(255*s(0)),Math.round(255*s(8)),Math.round(255*s(4))];return"hsla"===t.type&&(a+="a",l.push(e[3])),c({type:a,values:l})}function h(t){let e="hsl"===(t=A(t)).type||"hsla"===t.type?A(u(t)).values:t.values;return e=e.map((e=>("color"!==t.type&&(e/=255),e<=.03928?e/12.92:((e+.055)/1.055)**2.4))),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function g(t,e){return t=A(t),e=s(e),"rgb"!==t.type&&"hsl"!==t.type||(t.type+="a"),"color"===t.type?t.values[3]=`/${e}`:t.values[3]=e,c(t)}function d(t,e){if(t=A(t),e=s(e),-1!==t.type.indexOf("hsl"))t.values[2]*=1-e;else if(-1!==t.type.indexOf("rgb")||-1!==t.type.indexOf("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return c(t)}function p(t,e){if(t=A(t),e=s(e),-1!==t.type.indexOf("hsl"))t.values[2]+=(100-t.values[2])*e;else if(-1!==t.type.indexOf("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(-1!==t.type.indexOf("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return c(t)}function f(t,e=.15){return h(t)>.5?d(t,e):p(t,e)}},7593:(t,e,n)=>{"use strict";var i=n(6784);e.Ay=function(t={}){const{themeId:e,defaultTheme:n=p,rootShouldForwardProp:i=d,slotShouldForwardProp:A=d}=t,c=t=>(0,l.default)((0,r.default)({},t,{theme:m((0,r.default)({},t,{defaultTheme:n,themeId:e}))}));return c.__mui_systemSx=!0,(t,l={})=>{(0,s.internal_processStyles)(t,(t=>t.filter((t=>!(null!=t&&t.__mui_systemSx)))));const{name:u,slot:g,skipVariantsResolver:p,skipSx:C,overridesResolver:E=I(f(g))}=l,_=(0,o.default)(l,h),v=void 0!==p?p:g&&"Root"!==g&&"root"!==g||!1,B=C||!1;let w=d;"Root"===g||"root"===g?w=i:g?w=A:function(t){return"string"==typeof t&&t.charCodeAt(0)>96}(t)&&(w=void 0);const b=(0,s.default)(t,(0,r.default)({shouldForwardProp:w,label:undefined},_)),Q=t=>"function"==typeof t&&t.__emotion_real!==t||(0,a.isPlainObject)(t)?i=>y(t,(0,r.default)({},i,{theme:m({theme:i.theme,defaultTheme:n,themeId:e})})):t,x=(i,...o)=>{let s=Q(i);const a=o?o.map(Q):[];u&&E&&a.push((t=>{const i=m((0,r.default)({},t,{defaultTheme:n,themeId:e}));if(!i.components||!i.components[u]||!i.components[u].styleOverrides)return null;const o=i.components[u].styleOverrides,s={};return Object.entries(o).forEach((([e,n])=>{s[e]=y(n,(0,r.default)({},t,{theme:i}))})),E(t,s)})),u&&!v&&a.push((t=>{var i;const o=m((0,r.default)({},t,{defaultTheme:n,themeId:e}));return y({variants:null==o||null==(i=o.components)||null==(i=i[u])?void 0:i.variants},(0,r.default)({},t,{theme:o}))})),B||a.push(c);const A=a.length-o.length;if(Array.isArray(i)&&A>0){const t=new Array(A).fill("");s=[...i,...t],s.raw=[...i.raw,...t]}const l=b(s,...a);return t.muiName&&(l.muiName=t.muiName),l};return b.withConfig&&(x.withConfig=b.withConfig),x}};var r=i(n(8304)),o=i(n(739)),s=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=g(e);if(n&&n.has(t))return n.get(t);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var s=r?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=t[o]}return i.default=t,n&&n.set(t,i),i}(n(4326)),a=n(5267),A=(i(n(8153)),i(n(1172)),i(n(82))),l=i(n(3581));const c=["ownerState"],u=["variants"],h=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function g(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(g=function(t){return t?n:e})(t)}function d(t){return"ownerState"!==t&&"theme"!==t&&"sx"!==t&&"as"!==t}const p=(0,A.default)(),f=t=>t?t.charAt(0).toLowerCase()+t.slice(1):t;function m({defaultTheme:t,theme:e,themeId:n}){return i=e,0===Object.keys(i).length?t:e[n]||e;var i}function I(t){return t?(e,n)=>n[t]:null}function y(t,e){let{ownerState:n}=e,i=(0,o.default)(e,c);const s="function"==typeof t?t((0,r.default)({ownerState:n},i)):t;if(Array.isArray(s))return s.flatMap((t=>y(t,(0,r.default)({ownerState:n},i))));if(s&&"object"==typeof s&&Array.isArray(s.variants)){const{variants:t=[]}=s;let e=(0,o.default)(s,u);return t.forEach((t=>{let o=!0;"function"==typeof t.props?o=t.props((0,r.default)({ownerState:n},i,n)):Object.keys(t.props).forEach((e=>{(null==n?void 0:n[e])!==t.props[e]&&i[e]!==t.props[e]&&(o=!1)})),o&&(Array.isArray(e)||(e=[e]),e.push("function"==typeof t.style?t.style((0,r.default)({ownerState:n},i,n)):t.style))})),e}return s}},2736:(t,e,n)=>{"use strict";n.d(e,{EU:()=>s,NI:()=>o,vf:()=>a,zu:()=>i});const i={xs:0,sm:600,md:900,lg:1200,xl:1536},r={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${i[t]}px)`};function o(t,e,n){const o=t.theme||{};if(Array.isArray(e)){const t=o.breakpoints||r;return e.reduce(((i,r,o)=>(i[t.up(t.keys[o])]=n(e[o]),i)),{})}if("object"==typeof e){const t=o.breakpoints||r;return Object.keys(e).reduce(((r,o)=>{if(-1!==Object.keys(t.values||i).indexOf(o)){r[t.up(o)]=n(e[o],o)}else{const t=o;r[t]=e[t]}return r}),{})}return n(e)}function s(t={}){var e;return(null==(e=t.keys)?void 0:e.reduce(((e,n)=>(e[t.up(n)]={},e)),{}))||{}}function a(t,e){return t.reduce(((t,e)=>{const n=t[e];return(!n||0===Object.keys(n).length)&&delete t[e],t}),e)}},6196:(t,e,n)=>{"use strict";function i(t,e){const n=this;if(n.vars&&"function"==typeof n.getColorSchemeSelector){const i=n.getColorSchemeSelector(t).replace(/(\[[^\]]+\])/,"*:where($1)");return{[i]:e}}return n.palette.mode===t?e:{}}n.d(e,{A:()=>i})},9898:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var i=n(9257),r=n(8102);const o=["values","unit","step"],s=t=>{const e=Object.keys(t).map((e=>({key:e,val:t[e]})))||[];return e.sort(((t,e)=>t.val-e.val)),e.reduce(((t,e)=>(0,r.A)({},t,{[e.key]:e.val})),{})};function a(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:a=5}=t,A=(0,i.A)(t,o),l=s(e),c=Object.keys(l);function u(t){return`@media (min-width:${"number"==typeof e[t]?e[t]:t}${n})`}function h(t){return`@media (max-width:${("number"==typeof e[t]?e[t]:t)-a/100}${n})`}function g(t,i){const r=c.indexOf(i);return`@media (min-width:${"number"==typeof e[t]?e[t]:t}${n}) and (max-width:${(-1!==r&&"number"==typeof e[c[r]]?e[c[r]]:i)-a/100}${n})`}return(0,r.A)({keys:c,values:l,up:u,down:h,between:g,only:function(t){return c.indexOf(t)+1<c.length?g(t,c[c.indexOf(t)+1]):u(t)},not:function(t){const e=c.indexOf(t);return 0===e?u(c[1]):e===c.length-1?h(c[e]):g(t,c[c.indexOf(t)+1]).replace("@media","@media not all and")},unit:n},A)}},8953:(t,e,n)=>{"use strict";n.d(e,{A:()=>g});var i=n(8102),r=n(9257),o=n(6121),s=n(9898);const a={borderRadius:4};var A=n(4612);var l=n(2927),c=n(8624),u=n(6196);const h=["breakpoints","palette","spacing","shape"];const g=function(t={},...e){const{breakpoints:n={},palette:g={},spacing:d,shape:p={}}=t,f=(0,r.A)(t,h),m=(0,s.A)(n),I=function(t=8){if(t.mui)return t;const e=(0,A.LX)({spacing:t}),n=(...t)=>(0===t.length?[1]:t).map((t=>{const n=e(t);return"number"==typeof n?`${n}px`:n})).join(" ");return n.mui=!0,n}(d);let y=(0,o.A)({breakpoints:m,direction:"ltr",components:{},palette:(0,i.A)({mode:"light"},g),spacing:I,shape:(0,i.A)({},a,p)},f);return y.applyStyles=u.A,y=e.reduce(((t,e)=>(0,o.A)(t,e)),y),y.unstable_sxConfig=(0,i.A)({},c.A,null==f?void 0:f.unstable_sxConfig),y.unstable_sx=function(t){return(0,l.A)({sx:t,theme:this})},y}},82:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i.A,private_createBreakpoints:()=>r.A,unstable_applyStyles:()=>o.A});var i=n(8953),r=n(9898),o=n(6196)},3632:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(6121);const r=function(t,e){return e?(0,i.A)(t,e,{clone:!1}):t}},4612:(t,e,n)=>{"use strict";n.d(e,{LX:()=>d,MA:()=>g,_W:()=>p,Lc:()=>I,Ms:()=>y});var i=n(2736),r=n(1421),o=n(3632);const s={m:"margin",p:"padding"},a={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},A={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},l=function(t){const e={};return n=>(void 0===e[n]&&(e[n]=t(n)),e[n])}((t=>{if(t.length>2){if(!A[t])return[t];t=A[t]}const[e,n]=t.split(""),i=s[e],r=a[n]||"";return Array.isArray(r)?r.map((t=>i+t)):[i+r]})),c=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],u=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],h=[...c,...u];function g(t,e,n,i){var o;const s=null!=(o=(0,r.Yn)(t,e,!1))?o:n;return"number"==typeof s?t=>"string"==typeof t?t:s*t:Array.isArray(s)?t=>"string"==typeof t?t:s[t]:"function"==typeof s?s:()=>{}}function d(t){return g(t,"spacing",8)}function p(t,e){if("string"==typeof e||null==e)return e;const n=t(Math.abs(e));return e>=0?n:"number"==typeof n?-n:`-${n}`}function f(t,e,n,r){if(-1===e.indexOf(n))return null;const o=function(t,e){return n=>t.reduce(((t,i)=>(t[i]=p(e,n),t)),{})}(l(n),r),s=t[n];return(0,i.NI)(t,s,o)}function m(t,e){const n=d(t.theme);return Object.keys(t).map((i=>f(t,e,i,n))).reduce(o.A,{})}function I(t){return m(t,c)}function y(t){return m(t,u)}function C(t){return m(t,h)}I.propTypes={},I.filterProps=c,y.propTypes={},y.filterProps=u,C.propTypes={},C.filterProps=h},1421:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>a,BO:()=>s,Yn:()=>o});var i=n(5235),r=n(2736);function o(t,e,n=!0){if(!e||"string"!=typeof e)return null;if(t&&t.vars&&n){const n=`vars.${e}`.split(".").reduce(((t,e)=>t&&t[e]?t[e]:null),t);if(null!=n)return n}return e.split(".").reduce(((t,e)=>t&&null!=t[e]?t[e]:null),t)}function s(t,e,n,i=n){let r;return r="function"==typeof t?t(n):Array.isArray(t)?t[n]||i:o(t,n)||i,e&&(r=e(r,i,t)),r}const a=function(t){const{prop:e,cssProperty:n=t.prop,themeKey:a,transform:A}=t,l=t=>{if(null==t[e])return null;const l=t[e],c=o(t.theme,a)||{};return(0,r.NI)(t,l,(t=>{let r=s(c,A,t);return t===r&&"string"==typeof t&&(r=s(c,A,`${e}${"default"===t?"":(0,i.A)(t)}`,t)),!1===n?r:{[n]:r}}))};return l.propTypes={},l.filterProps=[e],l}},8624:(t,e,n)=>{"use strict";n.d(e,{A:()=>N});var i=n(4612),r=n(1421),o=n(3632);const s=function(...t){const e=t.reduce(((t,e)=>(e.filterProps.forEach((n=>{t[n]=e})),t)),{}),n=t=>Object.keys(t).reduce(((n,i)=>e[i]?(0,o.A)(n,e[i](t)):n),{});return n.propTypes={},n.filterProps=t.reduce(((t,e)=>t.concat(e.filterProps)),[]),n};var a=n(2736);function A(t){return"number"!=typeof t?t:`${t}px solid`}function l(t,e){return(0,r.Ay)({prop:t,themeKey:"borders",transform:e})}const c=l("border",A),u=l("borderTop",A),h=l("borderRight",A),g=l("borderBottom",A),d=l("borderLeft",A),p=l("borderColor"),f=l("borderTopColor"),m=l("borderRightColor"),I=l("borderBottomColor"),y=l("borderLeftColor"),C=l("outline",A),E=l("outlineColor"),_=t=>{if(void 0!==t.borderRadius&&null!==t.borderRadius){const e=(0,i.MA)(t.theme,"shape.borderRadius",4,"borderRadius"),n=t=>({borderRadius:(0,i._W)(e,t)});return(0,a.NI)(t,t.borderRadius,n)}return null};_.propTypes={},_.filterProps=["borderRadius"];s(c,u,h,g,d,p,f,m,I,y,_,C,E);const v=t=>{if(void 0!==t.gap&&null!==t.gap){const e=(0,i.MA)(t.theme,"spacing",8,"gap"),n=t=>({gap:(0,i._W)(e,t)});return(0,a.NI)(t,t.gap,n)}return null};v.propTypes={},v.filterProps=["gap"];const B=t=>{if(void 0!==t.columnGap&&null!==t.columnGap){const e=(0,i.MA)(t.theme,"spacing",8,"columnGap"),n=t=>({columnGap:(0,i._W)(e,t)});return(0,a.NI)(t,t.columnGap,n)}return null};B.propTypes={},B.filterProps=["columnGap"];const w=t=>{if(void 0!==t.rowGap&&null!==t.rowGap){const e=(0,i.MA)(t.theme,"spacing",8,"rowGap"),n=t=>({rowGap:(0,i._W)(e,t)});return(0,a.NI)(t,t.rowGap,n)}return null};w.propTypes={},w.filterProps=["rowGap"];s(v,B,w,(0,r.Ay)({prop:"gridColumn"}),(0,r.Ay)({prop:"gridRow"}),(0,r.Ay)({prop:"gridAutoFlow"}),(0,r.Ay)({prop:"gridAutoColumns"}),(0,r.Ay)({prop:"gridAutoRows"}),(0,r.Ay)({prop:"gridTemplateColumns"}),(0,r.Ay)({prop:"gridTemplateRows"}),(0,r.Ay)({prop:"gridTemplateAreas"}),(0,r.Ay)({prop:"gridArea"}));function b(t,e){return"grey"===e?e:t}s((0,r.Ay)({prop:"color",themeKey:"palette",transform:b}),(0,r.Ay)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:b}),(0,r.Ay)({prop:"backgroundColor",themeKey:"palette",transform:b}));function Q(t){return t<=1&&0!==t?100*t+"%":t}const x=(0,r.Ay)({prop:"width",transform:Q}),D=t=>{if(void 0!==t.maxWidth&&null!==t.maxWidth){const e=e=>{var n,i;const r=(null==(n=t.theme)||null==(n=n.breakpoints)||null==(n=n.values)?void 0:n[e])||a.zu[e];return r?"px"!==(null==(i=t.theme)||null==(i=i.breakpoints)?void 0:i.unit)?{maxWidth:`${r}${t.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:Q(e)}};return(0,a.NI)(t,t.maxWidth,e)}return null};D.filterProps=["maxWidth"];const S=(0,r.Ay)({prop:"minWidth",transform:Q}),M=(0,r.Ay)({prop:"height",transform:Q}),k=(0,r.Ay)({prop:"maxHeight",transform:Q}),R=(0,r.Ay)({prop:"minHeight",transform:Q}),N=((0,r.Ay)({prop:"size",cssProperty:"width",transform:Q}),(0,r.Ay)({prop:"size",cssProperty:"height",transform:Q}),s(x,D,S,M,k,R,(0,r.Ay)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:A},borderTop:{themeKey:"borders",transform:A},borderRight:{themeKey:"borders",transform:A},borderBottom:{themeKey:"borders",transform:A},borderLeft:{themeKey:"borders",transform:A},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:A},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:_},color:{themeKey:"palette",transform:b},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:b},backgroundColor:{themeKey:"palette",transform:b},p:{style:i.Ms},pt:{style:i.Ms},pr:{style:i.Ms},pb:{style:i.Ms},pl:{style:i.Ms},px:{style:i.Ms},py:{style:i.Ms},padding:{style:i.Ms},paddingTop:{style:i.Ms},paddingRight:{style:i.Ms},paddingBottom:{style:i.Ms},paddingLeft:{style:i.Ms},paddingX:{style:i.Ms},paddingY:{style:i.Ms},paddingInline:{style:i.Ms},paddingInlineStart:{style:i.Ms},paddingInlineEnd:{style:i.Ms},paddingBlock:{style:i.Ms},paddingBlockStart:{style:i.Ms},paddingBlockEnd:{style:i.Ms},m:{style:i.Lc},mt:{style:i.Lc},mr:{style:i.Lc},mb:{style:i.Lc},ml:{style:i.Lc},mx:{style:i.Lc},my:{style:i.Lc},margin:{style:i.Lc},marginTop:{style:i.Lc},marginRight:{style:i.Lc},marginBottom:{style:i.Lc},marginLeft:{style:i.Lc},marginX:{style:i.Lc},marginY:{style:i.Lc},marginInline:{style:i.Lc},marginInlineStart:{style:i.Lc},marginInlineEnd:{style:i.Lc},marginBlock:{style:i.Lc},marginBlockStart:{style:i.Lc},marginBlockEnd:{style:i.Lc},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:v},rowGap:{style:w},columnGap:{style:B},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Q},maxWidth:{style:D},minWidth:{transform:Q},height:{transform:Q},maxHeight:{transform:Q},minHeight:{transform:Q},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},523:(t,e,n)=>{"use strict";n.d(e,{A:()=>l});var i=n(8102),r=n(9257),o=n(6121),s=n(8624);const a=["sx"],A=t=>{var e,n;const i={systemProps:{},otherProps:{}},r=null!=(e=null==t||null==(n=t.theme)?void 0:n.unstable_sxConfig)?e:s.A;return Object.keys(t).forEach((e=>{r[e]?i.systemProps[e]=t[e]:i.otherProps[e]=t[e]})),i};function l(t){const{sx:e}=t,n=(0,r.A)(t,a),{systemProps:s,otherProps:l}=A(n);let c;return c=Array.isArray(e)?[s,...e]:"function"==typeof e?(...t)=>{const n=e(...t);return(0,o.Q)(n)?(0,i.A)({},s,n):s}:(0,i.A)({},s,e),(0,i.A)({},l,{sx:c})}},3581:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i.A,extendSxProp:()=>r.A,unstable_createStyleFunctionSx:()=>i.k,unstable_defaultSxConfig:()=>o.A});var i=n(2927),r=n(523),o=n(8624)},2927:(t,e,n)=>{"use strict";n.d(e,{A:()=>c,k:()=>A});var i=n(5235),r=n(3632),o=n(1421),s=n(2736),a=n(8624);function A(){function t(t,e,n,r){const a={[t]:e,theme:n},A=r[t];if(!A)return{[t]:e};const{cssProperty:l=t,themeKey:c,transform:u,style:h}=A;if(null==e)return null;if("typography"===c&&"inherit"===e)return{[t]:e};const g=(0,o.Yn)(n,c)||{};if(h)return h(a);return(0,s.NI)(a,e,(e=>{let n=(0,o.BO)(g,u,e);return e===n&&"string"==typeof e&&(n=(0,o.BO)(g,u,`${t}${"default"===e?"":(0,i.A)(e)}`,e)),!1===l?n:{[l]:n}}))}return function e(n){var i;const{sx:o,theme:A={}}=n||{};if(!o)return null;const l=null!=(i=A.unstable_sxConfig)?i:a.A;function c(n){let i=n;if("function"==typeof n)i=n(A);else if("object"!=typeof n)return n;if(!i)return null;const o=(0,s.EU)(A.breakpoints),a=Object.keys(o);let c=o;return Object.keys(i).forEach((n=>{const o=(a=i[n],u=A,"function"==typeof a?a(u):a);var a,u;if(null!=o)if("object"==typeof o)if(l[n])c=(0,r.A)(c,t(n,o,A,l));else{const t=(0,s.NI)({theme:A},o,(t=>({[n]:t})));!function(...t){const e=t.reduce(((t,e)=>t.concat(Object.keys(e))),[]),n=new Set(e);return t.every((t=>n.size===Object.keys(t).length))}(t,o)?c=(0,r.A)(c,t):c[n]=e({sx:o,theme:A})}else c=(0,r.A)(c,t(n,o,A,l))})),(0,s.vf)(a,c)}return Array.isArray(o)?o.map(c):c(o)}}const l=A();l.filterProps=["sx"];const c=l},1027:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const i=t=>t,r=(()=>{let t=i;return{configure(e){t=e},generate:e=>t(e),reset(){t=i}}})()},5235:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(7425);function r(t){if("string"!=typeof t)throw new Error((0,i.A)(7));return t.charAt(0).toUpperCase()+t.slice(1)}},8153:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i.A});var i=n(5235)},8859:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});const i=function(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}},1023:(t,e,n)=>{"use strict";function i(t,e,n=void 0){const i={};return Object.keys(t).forEach((r=>{i[r]=t[r].reduce(((t,i)=>{if(i){const r=e(i);""!==r&&t.push(r),n&&n[i]&&t.push(n[i])}return t}),[]).join(" ")})),i}n.d(e,{A:()=>i})},6121:(t,e,n)=>{"use strict";n.d(e,{A:()=>s,Q:()=>r});var i=n(8102);function r(t){if("object"!=typeof t||null===t)return!1;const e=Object.getPrototypeOf(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in t||Symbol.iterator in t)}function o(t){if(!r(t))return t;const e={};return Object.keys(t).forEach((n=>{e[n]=o(t[n])})),e}function s(t,e,n={clone:!0}){const a=n.clone?(0,i.A)({},t):t;return r(t)&&r(e)&&Object.keys(e).forEach((i=>{r(e[i])&&Object.prototype.hasOwnProperty.call(t,i)&&r(t[i])?a[i]=s(t[i],e[i],n):n.clone?a[i]=r(e[i])?o(e[i]):e[i]:a[i]=e[i]})),a}},5267:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i.A,isPlainObject:()=>i.Q});var i=n(6121)},7425:(t,e,n)=>{"use strict";function i(t){let e="https://mui.com/production-error/?code="+t;for(let t=1;t<arguments.length;t+=1)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}n.d(e,{A:()=>i})},6284:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i.A});var i=n(7425)},6733:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>o});var i=n(1027);const r={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function o(t,e,n="Mui"){const o=r[e];return o?`${n}-${o}`:`${i.A.generate(t)}-${e}`}},9009:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(6733);function r(t,e,n="Mui"){const r={};return e.forEach((e=>{r[e]=(0,i.Ay)(t,e,n)})),r}},1172:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>A,getFunctionName:()=>o});var i=n(4271);const r=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function o(t){const e=`${t}`.match(r);return e&&e[1]||""}function s(t,e=""){return t.displayName||t.name||o(t)||e}function a(t,e,n){const i=s(e);return t.displayName||(""!==i?`${n}(${i})`:n)}function A(t){if(null!=t){if("string"==typeof t)return t;if("function"==typeof t)return s(t,"Component");if("object"==typeof t)switch(t.$$typeof){case i.ForwardRef:return a(t,t.render,"ForwardRef");case i.Memo:return a(t,t.type,"memo");default:return}}}},1849:(t,e,n)=>{"use strict";function i(t,e){"function"==typeof t?t(e):t&&(t.current=e)}n.d(e,{A:()=>i})},1789:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(5959);const r="undefined"!=typeof window?i.useLayoutEffect:i.useEffect},8016:(t,e,n)=>{"use strict";n.d(e,{E:()=>s,A:()=>a});var i=n(5959);const r={};const o=[];class s{constructor(){this.currentId=null,this.clear=()=>{null!==this.currentId&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new s}start(t,e){this.clear(),this.currentId=setTimeout((()=>{this.currentId=null,e()}),t)}}function a(){const t=function(t,e){const n=i.useRef(r);return n.current===r&&(n.current=t(e)),n}(s.create).current;var e;return e=t.disposeEffect,i.useEffect(e,o),t}},8611:(t,e)=>{"use strict";function n(t,e,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function i(t,e,i){if(void 0===i&&(i={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!g(t[0])||!g(t[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:t},e,i)}function r(t,e,i){void 0===i&&(i={});for(var r=0,o=t;r<o.length;r++){var s=o[r];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,i)}function o(t,e,i){if(void 0===i&&(i={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,i)}function s(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function a(t,e,i){return void 0===i&&(i={}),n({type:"MultiLineString",coordinates:t},e,i)}function A(t,e,i){return void 0===i&&(i={}),n({type:"MultiPoint",coordinates:t},e,i)}function l(t,e,i){return void 0===i&&(i={}),n({type:"MultiPolygon",coordinates:t},e,i)}function c(t,n){void 0===n&&(n="kilometers");var i=e.factors[n];if(!i)throw new Error(n+" units is invalid");return t*i}function u(t,n){void 0===n&&(n="kilometers");var i=e.factors[n];if(!i)throw new Error(n+" units is invalid");return t/i}function h(t){return 180*(t%(2*Math.PI))/Math.PI}function g(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,n){switch(void 0===n&&(n={}),t){case"Point":return i(e).geometry;case"LineString":return o(e).geometry;case"Polygon":return r(e).geometry;case"MultiPoint":return A(e).geometry;case"MultiLineString":return a(e).geometry;case"MultiPolygon":return l(e).geometry;default:throw new Error(t+" is invalid")}},e.point=i,e.points=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return i(t,e)})),n)},e.polygon=r,e.polygons=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return r(t,e)})),n)},e.lineString=o,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return o(t,e)})),n)},e.featureCollection=s,e.multiLineString=a,e.multiPoint=A,e.multiPolygon=l,e.geometryCollection=function(t,e,i){return void 0===i&&(i={}),n({type:"GeometryCollection",geometries:t},e,i)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=c,e.lengthToRadians=u,e.lengthToDegrees=function(t,e){return h(u(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=h,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return c(u(t,e),n)},e.convertArea=function(t,n,i){if(void 0===n&&(n="meters"),void 0===i&&(i="kilometers"),!(t>=0))throw new Error("area must be a positive number");var r=e.areaFactors[n];if(!r)throw new Error("invalid original units");var o=e.areaFactors[i];if(!o)throw new Error("invalid final units");return t/r*o},e.isNumber=g,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!g(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}},2697:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(8611);function r(t,e,n){if(null!==t)for(var i,o,s,a,A,l,c,u,h=0,g=0,d=t.type,p="FeatureCollection"===d,f="Feature"===d,m=p?t.features.length:1,I=0;I<m;I++){A=(u=!!(c=p?t.features[I].geometry:f?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var y=0;y<A;y++){var C=0,E=0;if(null!==(a=u?c.geometries[y]:c)){l=a.coordinates;var _=a.type;switch(h=!n||"Polygon"!==_&&"MultiPolygon"!==_?0:1,_){case null:break;case"Point":if(!1===e(l,g,I,C,E))return!1;g++,C++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===e(l[i],g,I,C,E))return!1;g++,"MultiPoint"===_&&C++}"LineString"===_&&C++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(o=0;o<l[i].length-h;o++){if(!1===e(l[i][o],g,I,C,E))return!1;g++}"MultiLineString"===_&&C++,"Polygon"===_&&E++}"Polygon"===_&&C++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(E=0,o=0;o<l[i].length;o++){for(s=0;s<l[i][o].length-h;s++){if(!1===e(l[i][o][s],g,I,C,E))return!1;g++}E++}C++}break;case"GeometryCollection":for(i=0;i<a.geometries.length;i++)if(!1===r(a.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function s(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function a(t,e){var n,i,r,o,s,a,A,l,c,u,h=0,g="FeatureCollection"===t.type,d="Feature"===t.type,p=g?t.features.length:1;for(n=0;n<p;n++){for(a=g?t.features[n].geometry:d?t.geometry:t,l=g?t.features[n].properties:d?t.properties:{},c=g?t.features[n].bbox:d?t.bbox:void 0,u=g?t.features[n].id:d?t.id:void 0,s=(A=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<s;r++)if(null!==(o=A?a.geometries[r]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,h,l,c,u))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===e(o.geometries[i],h,l,c,u))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,h,l,c,u))return!1;h++}}function A(t,e){a(t,(function(t,n,r,o,s){var a,A=null===t?null:t.type;switch(A){case null:case"Point":case"LineString":case"Polygon":return!1!==e(i.feature(t,r,{bbox:o,id:s}),n,0)&&void 0}switch(A){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<t.coordinates.length;l++){var c={type:a,coordinates:t.coordinates[l]};if(!1===e(i.feature(c,r),n,l))return!1}}))}function l(t,e){A(t,(function(t,n,o){var s=0;if(t.geometry){var a=t.geometry.type;if("Point"!==a&&"MultiPoint"!==a){var A,l=0,c=0,u=0;return!1!==r(t,(function(r,a,h,g,d){if(void 0===A||n>l||g>c||d>u)return A=r,l=n,c=g,u=d,void(s=0);var p=i.lineString([A,r],t.properties);if(!1===e(p,n,o,d,s))return!1;s++,A=r}))&&void 0}}}))}function c(t,e){if(!t)throw new Error("geojson is required");A(t,(function(t,n,r){if(null!==t.geometry){var o=t.geometry.type,s=t.geometry.coordinates;switch(o){case"LineString":if(!1===e(t,n,r,0,0))return!1;break;case"Polygon":for(var a=0;a<s.length;a++)if(!1===e(i.lineString(s[a],t.properties),n,r,a))return!1}}}))}e.coordAll=function(t){var e=[];return r(t,(function(t){e.push(t)})),e},e.coordEach=r,e.coordReduce=function(t,e,n,i){var o=n;return r(t,(function(t,i,r,s,a){o=0===i&&void 0===n?t:e(o,t,i,r,s,a)}),i),o},e.featureEach=s,e.featureReduce=function(t,e,n){var i=n;return s(t,(function(t,r){i=0===r&&void 0===n?t:e(i,t,r)})),i},e.findPoint=function(t,e){if(e=e||{},!i.isObject(e))throw new Error("options is invalid");var n,r=e.featureIndex||0,o=e.multiFeatureIndex||0,s=e.geometryIndex||0,a=e.coordIndex||0,A=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),A=A||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":A=A||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":return i.point(l,A,e);case"MultiPoint":return o<0&&(o=l.length+o),i.point(l[o],A,e);case"LineString":return a<0&&(a=l.length+a),i.point(l[a],A,e);case"Polygon":return s<0&&(s=l.length+s),a<0&&(a=l[s].length+a),i.point(l[s][a],A,e);case"MultiLineString":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a),i.point(l[o][a],A,e);case"MultiPolygon":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s),a<0&&(a=l[o][s].length-a),i.point(l[o][s][a],A,e)}throw new Error("geojson is invalid")},e.findSegment=function(t,e){if(e=e||{},!i.isObject(e))throw new Error("options is invalid");var n,r=e.featureIndex||0,o=e.multiFeatureIndex||0,s=e.geometryIndex||0,a=e.segmentIndex||0,A=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),A=A||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":A=A||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=l.length+a-1),i.lineString([l[a],l[a+1]],A,e);case"Polygon":return s<0&&(s=l.length+s),a<0&&(a=l[s].length+a-1),i.lineString([l[s][a],l[s][a+1]],A,e);case"MultiLineString":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a-1),i.lineString([l[o][a],l[o][a+1]],A,e);case"MultiPolygon":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s),a<0&&(a=l[o][s].length-a-1),i.lineString([l[o][s][a],l[o][s][a+1]],A,e)}throw new Error("geojson is invalid")},e.flattenEach=A,e.flattenReduce=function(t,e,n){var i=n;return A(t,(function(t,r,o){i=0===r&&0===o&&void 0===n?t:e(i,t,r,o)})),i},e.geomEach=a,e.geomReduce=function(t,e,n){var i=n;return a(t,(function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)})),i},e.lineEach=c,e.lineReduce=function(t,e,n){var i=n;return c(t,(function(t,r,o,s){i=0===r&&void 0===n?t:e(i,t,r,o,s)})),i},e.propEach=o,e.propReduce=function(t,e,n){var i=n;return o(t,(function(t,r){i=0===r&&void 0===n?t:e(i,t,r)})),i},e.segmentEach=l,e.segmentReduce=function(t,e,n){var i=n,r=!1;return l(t,(function(t,o,s,a,A){i=!1===r&&void 0===n?t:e(i,t,o,s,a,A),r=!0})),i}},5114:(t,e,n)=>{"use strict";var i=n(6481),r=n(922),o=n(4440),s=n(1247).orient2d;function a(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;var r=function(t){for(var e=t[0],n=t[0],i=t[0],r=t[0],s=0;s<t.length;s++){var a=t[s];a[0]<e[0]&&(e=a),a[0]>i[0]&&(i=a),a[1]<n[1]&&(n=a),a[1]>r[1]&&(r=a)}var A=[e,n,i,r],l=A.slice();for(s=0;s<t.length;s++)o(t[s],A)||l.push(t[s]);return function(t){t.sort(y);for(var e=[],n=0;n<t.length;n++){for(;e.length>=2&&g(e[e.length-2],e[e.length-1],t[n])<=0;)e.pop();e.push(t[n])}for(var i=[],r=t.length-1;r>=0;r--){for(;i.length>=2&&g(i[i.length-2],i[i.length-1],t[r])<=0;)i.pop();i.push(t[r])}return i.pop(),e.pop(),e.concat(i)}(l)}(t),s=new i(16);s.toBBox=function(t){return{minX:t[0],minY:t[1],maxX:t[0],maxY:t[1]}},s.compareMinX=function(t,e){return t[0]-e[0]},s.compareMinY=function(t,e){return t[1]-e[1]},s.load(t);for(var a,l=[],c=0;c<r.length;c++){var u=r[c];s.remove(u),a=p(u,a),l.push(a)}var h=new i(16);for(c=0;c<l.length;c++)h.insert(d(l[c]));for(var m=e*e,I=n*n;l.length;){var C=l.shift(),E=C.p,_=C.next.p,v=f(E,_);if(!(v<I)){var B=v/m;(u=A(s,C.prev.p,E,_,C.next.next.p,B,h))&&Math.min(f(u,E),f(u,_))<=B&&(l.push(C),l.push(p(u,C)),s.remove(u),h.remove(C),h.insert(d(C)),h.insert(d(C.next)))}}C=a;var w=[];do{w.push(C.p),C=C.next}while(C!==a);return w.push(C.p),w}function A(t,e,n,i,o,s,a){for(var A=new r([],l),u=t.data;u;){for(var g=0;g<u.children.length;g++){var d=u.children[g],p=u.leaf?m(d,n,i):c(n,i,d);p>s||A.push({node:d,dist:p})}for(;A.length&&!A.peek().node.children;){var f=A.pop(),I=f.node,y=m(I,e,n),C=m(I,i,o);if(f.dist<y&&f.dist<C&&h(n,I,a)&&h(i,I,a))return I}(u=A.pop())&&(u=u.node)}return null}function l(t,e){return t.dist-e.dist}function c(t,e,n){if(u(t,n)||u(e,n))return 0;var i=I(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===i)return 0;var r=I(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===r)return 0;var o=I(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var s=I(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===s?0:Math.min(i,r,o,s)}function u(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function h(t,e,n){for(var i,r,o,s,a=Math.min(t[0],e[0]),A=Math.min(t[1],e[1]),l=Math.max(t[0],e[0]),c=Math.max(t[1],e[1]),u=n.search({minX:a,minY:A,maxX:l,maxY:c}),h=0;h<u.length;h++)if(i=u[h].p,r=u[h].next.p,o=t,i!==(s=e)&&r!==o&&g(i,r,o)>0!=g(i,r,s)>0&&g(o,s,i)>0!=g(o,s,r)>0)return!1;return!0}function g(t,e,n){return s(t[0],t[1],e[0],e[1],n[0],n[1])}function d(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function p(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function f(t,e){var n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}function m(t,e,n){var i=e[0],r=e[1],o=n[0]-i,s=n[1]-r;if(0!==o||0!==s){var a=((t[0]-i)*o+(t[1]-r)*s)/(o*o+s*s);a>1?(i=n[0],r=n[1]):a>0&&(i+=o*a,r+=s*a)}return(o=t[0]-i)*o+(s=t[1]-r)*s}function I(t,e,n,i,r,o,s,a){var A,l,c,u,h=n-t,g=i-e,d=s-r,p=a-o,f=t-r,m=e-o,I=h*h+g*g,y=h*d+g*p,C=d*d+p*p,E=h*f+g*m,_=d*f+p*m,v=I*C-y*y,B=v,w=v;0===v?(l=0,B=1,u=_,w=C):(u=I*_-y*E,(l=y*_-C*E)<0?(l=0,u=_,w=C):l>B&&(l=B,u=_+y,w=C)),u<0?(u=0,-E<0?l=0:-E>I?l=B:(l=-E,B=I)):u>w&&(u=w,-E+y<0?l=0:-E+y>I?l=B:(l=-E+y,B=I));var b=(1-(c=0===u?0:u/w))*r+c*s-((1-(A=0===l?0:l/B))*t+A*n),Q=(1-c)*o+c*a-((1-A)*e+A*i);return b*b+Q*Q}function y(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}r.default&&(r=r.default),t.exports=a,t.exports.default=a},5489:(t,e,n)=>{"use strict";var i=n(62),r={"text/plain":"Text","text/html":"Url",default:"Text"};t.exports=function(t,e){var n,o,s,a,A,l,c=!1;e||(e={}),n=e.debug||!1;try{if(s=i(),a=document.createRange(),A=document.getSelection(),(l=document.createElement("span")).textContent=t,l.ariaHidden="true",l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",(function(i){if(i.stopPropagation(),e.format)if(i.preventDefault(),void 0===i.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var o=r[e.format]||r.default;window.clipboardData.setData(o,t)}else i.clipboardData.clearData(),i.clipboardData.setData(e.format,t);e.onCopy&&(i.preventDefault(),e.onCopy(i.clipboardData))})),document.body.appendChild(l),a.selectNodeContents(l),A.addRange(a),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");c=!0}catch(i){n&&console.error("unable to copy using execCommand: ",i),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",t),e.onCopy&&e.onCopy(window.clipboardData),c=!0}catch(i){n&&console.error("unable to copy using clipboardData: ",i),n&&console.error("falling back to prompt"),o=function(t){var e=(/mac os x/i.test(navigator.userAgent)?"":"Ctrl")+"+C";return t.replace(/#{\s*key\s*}/g,e)}("message"in e?e.message:"Copy to clipboard: #{key}, Enter"),window.prompt(o,t)}}finally{A&&("function"==typeof A.removeRange?A.removeRange(a):A.removeAllRanges()),l&&document.body.removeChild(l),s()}return c}},1835:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var i=n(8645),r=n.n(i),o=n(278),s=n.n(o)()(r());s.push([t.id,"",""]);const a=s},5706:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var i=n(8645),r=n.n(i),o=n(278),s=n.n(o)()(r());s.push([t.id,'/* Basics */\n.maplibregl-ctrl-geocoder,\n.maplibregl-ctrl-geocoder *,\n.maplibregl-ctrl-geocoder *:after,\n.maplibregl-ctrl-geocoder *:before {\n    box-sizing: border-box;\n}\n\n.maplibregl-ctrl-geocoder {\n    font-size: 15px;\n    line-height: 20px;\n    font-family: "Open Sans", "Helvetica Neue", Arial, Helvetica, sans-serif;\n    position: relative;\n    background-color: #fff;\n    width: 100%;\n    min-width: 240px;\n    max-width: 360px;\n    z-index: 1;\n    border-radius: 4px;\n    transition: width 0.25s, min-width 0.25s;\n}\n\n.maplibregl-ctrl-geocoder--input {\n    font: inherit;\n    width: 100%;\n    border: 0;\n    background-color: transparent;\n    margin: 0;\n    height: 29px;\n    color: #404040; /* fallback */\n    color: rgba(0, 0, 0, 0.75);\n    padding: 6px 30px;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    overflow: hidden;\n}\n\n.maplibregl-ctrl-geocoder--input:focus {\n    color: #404040; /* fallback */\n    color: rgba(0, 0, 0, 0.75);\n    outline: 0;\n    box-shadow: none;\n    outline: thin dotted;\n}\n\n.maplibregl-ctrl-geocoder .maplibregl-ctrl-geocoder--pin-right > * {\n    z-index: 2;\n    position: absolute;\n    right: 5px;\n    top: 5px;\n    display: none;\n}\n\n.maplibregl-ctrl-geocoder,\n.maplibregl-ctrl-geocoder .suggestions {\n    box-shadow: 0 0 0 2px rgb(0 0 0 / 10%);\n}\n\n/* Collapsed */\n.maplibregl-ctrl-geocoder.maplibregl-ctrl-geocoder--collapsed {\n    width: 26px;\n    min-width: 26px;\n    height: 26px;\n    min-height: 26px;\n    transition: width 0.25s, min-width 0.25s;\n}\n\n/* Suggestions */\n.maplibregl-ctrl-geocoder .suggestions {\n    background-color: #fff;\n    border-radius: 4px;\n    left: 0;\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    position: absolute;\n    width: 100%;\n    top: 110%; /* fallback */\n    top: calc(100% + 6px);\n    z-index: 1000;\n    overflow: hidden;\n    font-size: 13px;\n}\n\n.maplibregl-ctrl-bottom-left .suggestions,\n.maplibregl-ctrl-bottom-right .suggestions {\n    top: auto;\n    bottom: 100%;\n}\n\n.maplibregl-ctrl-geocoder .suggestions > li > a {\n    cursor: default;\n    display: block;\n    padding: 6px 12px;\n    color: #404040;\n}\n\n.maplibregl-ctrl-geocoder .suggestions > .active > a,\n.maplibregl-ctrl-geocoder .suggestions > li > a:hover {\n    color: #404040;\n    background-color: #f3f3f3;\n    text-decoration: none;\n    cursor: pointer;\n}\n\n.maplibregl-ctrl-geocoder--suggestion {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n}\n\n.maplibre-ctrl-geocoder--suggestion-icon {\n    min-width: 30px;\n    min-height: 24px;\n    max-width: 30px;\n    max-height: 24px;\n    padding-right: 12px;\n}\n\n.maplibregl-ctrl-geocoder--suggestion-info {\n    display: flex;\n    flex-direction: column;\n}\n\n.maplibregl-ctrl-geocoder--suggestion-match {\n    font-weight: bold;\n}\n\n.maplibregl-ctrl-geocoder--suggestion-title,\n.maplibregl-ctrl-geocoder--suggestion-address {\n    text-overflow: ellipsis;\n    overflow: hidden;\n    white-space: nowrap;\n}\n\n.maplibregl-ctrl-geocoder--result {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n}\n\n.maplibre-ctrl-geocoder--result-icon {\n    min-width: 30px;\n    min-height: 24px;\n    max-width: 30px;\n    max-height: 24px;\n    padding-right: 12px;\n}\n\n.maplibregl-ctrl-geocoder--result-title {\n    font-weight: bold;\n}\n\n.maplibregl-ctrl-geocoder--result-title,\n.maplibregl-ctrl-geocoder--result-address {\n    text-overflow: ellipsis;\n    overflow: hidden;\n    white-space: nowrap;\n}\n\n/* Icons */\n.maplibregl-ctrl-geocoder--icon {\n    display: inline-block;\n    vertical-align: middle;\n}\n\n.maplibregl-ctrl-geocoder--icon-search {\n    position: absolute;\n    top: 3px;\n    left: 3px;\n    width: 23px;\n    height: 23px;\n}\n\n.maplibregl-ctrl-geocoder--button {\n    padding: 0;\n    margin: 0;\n    border: none;\n    cursor: pointer;\n    background: #fff;\n    line-height: 1;\n}\n\n.maplibregl-ctrl-geocoder--icon-close {\n    width: 20px;\n    height: 20px;\n}\n\n.maplibregl-ctrl-geocoder--icon-loading {\n    width: 20px;\n    height: 20px;\n    -moz-animation: rotate 0.8s infinite cubic-bezier(0.45, 0.05, 0.55, 0.95);\n    -webkit-animation: rotate 0.8s infinite cubic-bezier(0.45, 0.05, 0.55, 0.95);\n    animation: rotate 0.8s infinite cubic-bezier(0.45, 0.05, 0.55, 0.95);\n}\n\n/* Animation */\n@-webkit-keyframes rotate {\n    from {\n        -webkit-transform: rotate(0);\n        transform: rotate(0);\n    }\n    to {\n        -webkit-transform: rotate(360deg);\n        transform: rotate(360deg);\n    }\n}\n\n@keyframes rotate {\n    from {\n        -webkit-transform: rotate(0);\n        transform: rotate(0);\n    }\n    to {\n        -webkit-transform: rotate(360deg);\n        transform: rotate(360deg);\n    }\n}\n\n.maplibre-gl-geocoder--error {\n    color: #909090;\n    padding: 6px 12px;\n    font-size: 16px;\n    text-align: center;\n}\n',""]);const a=s},8659:(t,e,n)=>{"use strict";n.d(e,{A:()=>d});var i=n(8645),r=n.n(i),o=n(278),s=n.n(o),a=n(3021),A=n.n(a),l=new URL(n(9029),n.b),c=new URL(n(5276),n.b),u=s()(r()),h=A()(l),g=A()(c);u.push([t.id,`\n\n.layer-switcher {\n  z-index: 3;\n  position: absolute;\n  top: 100px;\n  left: 10px;\n\n  overflow: hidden;\n  pointer-events: all;\n\n\n}\n.layer-switcher .panel {\n  margin: 0;\n  border: 4px solid #eee;\n  border-radius: 4px;\n  background-color: white;\n  display: none;\n  pointer-events: all;\n  max-height: inherit;\n  height: 100%;\n  box-sizing: border-box;\n  overflow-y: auto;\n}\n\n.layer-switcher button {\n  float: right;\n  z-index: 1;\n  width: 38px;\n  height: 38px;\n  background-image: url(${h})\n  /*logo.png*/;\n  background-repeat: no-repeat;\n  background-position: 2px;\n  background-color: white;\n  color: black;\n  border: none;\n}\n\n.layer-switcher button:focus,\n.layer-switcher button:hover {\n  background-color: white;\n}\n\n/*.layer-switcher.shown {*/\n/*  overflow-y: hidden;*/\n/*  display: flex;*/\n/*  flex-direction: column;*/\n/*  max-height: calc(100% - 5.5em);*/\n/*}*/\n\n.layer-switcher.shown.ol-control {\n  display: flex;\n  background-color: transparent;\n}\n\n.layer-switcher.shown.ol-control:hover {\n  background-color: transparent;\n}\n.layer-switcher.shown .panel {\n  display: block;\n}\n\n.layer-switcher.shown button {\n  display: none;\n}\n\n/*.layer-switcher-activation-mode-click*/\n.layer-switcher.shown > div > button {\n  display: block;\n  background-image: unset;\n  /*right: 2px;*/\n  /*position: absolute;*/\n  background-color: #eee;\n  /*margin: 1px;*/\n}\n\n.layer-switcher.shown button:focus,\n.layer-switcher.shown button:hover {\n  background-color: #fafafa;\n}\n\n.layer-switcher ul {\n  list-style: none;\n  margin: 1.6em 0.4em;\n  padding-left: 0;\n}\n.layer-switcher ul ul {\n  padding-left: 1.2em;\n  margin: 0.1em 0 0 0;\n}\n.layer-switcher li.group + li.group {\n  margin-top: 0.4em;\n}\n\n.layer-switcher li.group > label {\n  font-weight: bold;\n}\n\n.layer-switcher.layer-switcher-group-select-style-none li.group > label {\n  padding-left: 1.2em;\n}\n\n.layer-switcher li {\n  position: relative;\n  margin-top: 0.3em;\n}\n\n.layer-switcher li input {\n  position: absolute;\n  left: 1.2em;\n  height: 1em;\n  width: 1em;\n  font-size: 1em;\n}\n.layer-switcher li label {\n  padding-left: 2.7em;\n  padding-right: 1.2em;\n  display: inline-block;\n  margin-top: 1px;\n}\n\n.layer-switcher label.disabled {\n  opacity: 0.4;\n}\n\n.layer-switcher input {\n  margin: 0px;\n}\n\n.layer-switcher.touch ::-webkit-scrollbar {\n  width: 4px;\n}\n\n.layer-switcher.touch ::-webkit-scrollbar-track {\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n  border-radius: 10px;\n}\n\n.layer-switcher.touch ::-webkit-scrollbar-thumb {\n  border-radius: 10px;\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.5);\n}\n\nli.layer-switcher-base-group > label {\n  padding-left: 1.2em;\n}\n\n.layer-switcher .group button {\n  position: absolute;\n  left: 0;\n  display: inline-block;\n  vertical-align: top;\n  float: none;\n  font-size: 1em;\n  width: 1em;\n  height: 1em;\n  margin: 0;\n  background-position: center 2px;\n  background-image: url(${g});\n  -webkit-transition: -webkit-transform 0.2s ease-in-out;\n  -ms-transition: -ms-transform 0.2s ease-in-out;\n  transition: transform 0.2s ease-in-out;\n}\n\n.layer-switcher .group.layer-switcher-close button {\n  transform: rotate(-90deg);\n  -webkit-transform: rotate(-90deg);\n}\n\n.layer-switcher .group.layer-switcher-fold.layer-switcher-close > ul {\n  overflow: hidden;\n  height: 0;\n}\n\n/*layerswitcher on the right*/\n/*.layer-switcher.shown.layer-switcher-activation-mode-click {*/\n/*  padding-left: 34px;*/\n/*}*/\n/*.layer-switcher.shown.layer-switcher-activation-mode-click > button {*/\n/*  left: 0;*/\n/*  border-right: 0;*/\n/*}*/\n\n/*layerswitcher on the left*/\n/*!**/\n/*.layer-switcher.shown.layer-switcher-activation-mode-click {*/\n/*  padding-right: 34px;*/\n/*}*/\n/*.layer-switcher.shown.layer-switcher-activation-mode-click > button {*/\n/*  right: 0;*/\n/*  border-left: 0;*/\n/*}*/\n/**!*/\n`,""]);const d=u},6924:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var i=n(8645),r=n.n(i),o=n(278),s=n.n(o)()(r());s.push([t.id,'.deck-widget {\n  margin: var(--widget-margin, 12px);\n}\n\n/* Common button container styles */\n.deck-widget-button,\n.deck-widget-button-group {\n  background: var(--button-stroke, rgba(255, 255, 255, 0.3));\n  border-radius: var(--button-corner-radius, 8px);\n  box-shadow: var(--button-shadow, 0px 0px 8px 0px rgba(0, 0, 0, 0.25));\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n/* Single button */\n.deck-widget-button {\n  width: var(--button-size, 28px);\n  height: var(--button-size, 28px);\n}\n\n.deck-widget-button.switcher {\n  width: var(--button-size, 38px);\n  height: var(--button-size, 38px);\n}\n\n/* Button group */\n.deck-widget-button-group {\n  width: calc(var(--button-size, 28px) - 2);\n  height: calc((var(--button-size, 28px) * 2) - 1);\n\n  flex-direction: row;\n  padding: 1px;\n  gap: 1px;\n}\n\n.deck-widget-button-group.vertical {\n  display: inline-flex;\n  flex-direction: column;\n}\n\n/* Common button styles */\n.deck-widget-button-group button,\n.deck-widget-button button {\n  width: calc(var(--button-size, 28px) - 2px);\n  height: calc(var(--button-size, 28px) - 2px);\n\n  box-sizing: border-box;\n  background: var(--button-background, #fff);\n  backdrop-filter: var(--button-backdrop-filter, unset);\n  border: var(--button-inner-stroke, unset);\n  border-radius: calc(var(--button-corner-radius, 8px) - 1px);\n\n  pointer-events: auto;\n  cursor: pointer;\n  outline: none;\n  padding: 0;\n}\n\n/* Border radius adjustments for grouped buttons */\n.deck-widget-button-group.vertical > *:not(:last-child),\n.deck-widget-button-group.vertical > *:not(:last-child) > button {\n  border-bottom-left-radius: 0;\n  border-bottom-right-radius: 0;\n}\n\n.deck-widget-button-group.vertical > *:not(:first-child),\n.deck-widget-button-group.vertical > *:not(:first-child) > button {\n  border-top-left-radius: 0;\n  border-top-right-radius: 0;\n}\n\n\n.deck-widget-button-group.horizontal > *:not(:last-child),\n.deck-widget-button-group.horizontal > *:not(:last-child) > button {\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n}\n\n.deck-widget-button-group.horizontal > *:not(:first-child),\n.deck-widget-button-group.horizontal > *:not(:first-child) > button {\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n\n/* Icon button styles */\n.deck-widget button .deck-widget-icon {\n  background-color: var(--button-icon-idle, #616166);\n  background-position: 50%;\n  background-repeat: no-repeat;\n  display: block;\n  height: 100%;\n  width: 100%;\n}\n\n.deck-widget button .deck-widget-icon:hover {\n  background-color: var(--button-icon-hover, rgb(24, 24, 26));\n}\n\n/* Fullscreen styles */\n.deck-widget.deck-widget-fullscreen button.deck-widget-fullscreen-enter .deck-widget-icon {\n  mask-image: var(\n    --icon-fullscreen-enter,\n    url(\'data:image/svg+xml,<svg fill="black" height="100%" viewBox="0 0 28 28" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="M7.90474 20.0953H10.6286C10.8984 20.0953 11.1246 20.1868 11.3071 20.37C11.4897 20.5532 11.5809 20.7802 11.5809 21.051C11.5809 21.3218 11.4897 21.5476 11.3071 21.7286C11.1246 21.9095 10.8984 22 10.6286 22H6.95237C6.68254 22 6.45635 21.9087 6.2738 21.7262C6.09127 21.5436 6 21.3175 6 21.0476V17.3714C6 17.1016 6.09159 16.8754 6.27477 16.6929C6.45795 16.5103 6.68493 16.4191 6.95571 16.4191C7.2265 16.4191 7.45236 16.5103 7.63331 16.6929C7.81427 16.8754 7.90474 17.1016 7.90474 17.3714V20.0953ZM7.90474 7.90474V10.6286C7.90474 10.8984 7.81315 11.1246 7.62997 11.3071C7.44679 11.4897 7.21981 11.5809 6.94903 11.5809C6.67825 11.5809 6.45238 11.4897 6.27143 11.3071C6.09048 11.1246 6 10.8984 6 10.6286V6.95237C6 6.68254 6.09127 6.45635 6.2738 6.2738C6.45635 6.09127 6.68254 6 6.95237 6H10.6286C10.8984 6 11.1246 6.09159 11.3071 6.27477C11.4897 6.45795 11.5809 6.68493 11.5809 6.95571C11.5809 7.2265 11.4897 7.45236 11.3071 7.63331C11.1246 7.81427 10.8984 7.90474 10.6286 7.90474H7.90474ZM20.0953 20.0953V17.3714C20.0953 17.1016 20.1868 16.8754 20.37 16.6929C20.5532 16.5103 20.7802 16.4191 21.051 16.4191C21.3218 16.4191 21.5476 16.5103 21.7286 16.6929C21.9095 16.8754 22 17.1016 22 17.3714V21.0476C22 21.3175 21.9087 21.5436 21.7262 21.7262C21.5436 21.9087 21.3175 22 21.0476 22H17.3714C17.1016 22 16.8754 21.9084 16.6929 21.7252C16.5103 21.542 16.4191 21.3151 16.4191 21.0443C16.4191 20.7735 16.5103 20.5476 16.6929 20.3667C16.8754 20.1857 17.1016 20.0953 17.3714 20.0953H20.0953ZM20.0953 7.90474H17.3714C17.1016 7.90474 16.8754 7.81315 16.6929 7.62997C16.5103 7.44679 16.4191 7.21981 16.4191 6.94903C16.4191 6.67825 16.5103 6.45238 16.6929 6.27143C16.8754 6.09048 17.1016 6 17.3714 6H21.0476C21.3175 6 21.5436 6.09127 21.7262 6.2738C21.9087 6.45635 22 6.68254 22 6.95237V10.6286C22 10.8984 21.9084 11.1246 21.7252 11.3071C21.542 11.4897 21.3151 11.5809 21.0443 11.5809C20.7735 11.5809 20.5476 11.4897 20.3667 11.3071C20.1857 11.1246 20.0953 10.8984 20.0953 10.6286V7.90474Z" /></svg>\')\n  );\n  -webkit-mask-image: var(\n    --icon-fullscreen-enter,\n    url(\'data:image/svg+xml,<svg fill="black" height="100%" viewBox="0 0 28 28" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="M7.90474 20.0953H10.6286C10.8984 20.0953 11.1246 20.1868 11.3071 20.37C11.4897 20.5532 11.5809 20.7802 11.5809 21.051C11.5809 21.3218 11.4897 21.5476 11.3071 21.7286C11.1246 21.9095 10.8984 22 10.6286 22H6.95237C6.68254 22 6.45635 21.9087 6.2738 21.7262C6.09127 21.5436 6 21.3175 6 21.0476V17.3714C6 17.1016 6.09159 16.8754 6.27477 16.6929C6.45795 16.5103 6.68493 16.4191 6.95571 16.4191C7.2265 16.4191 7.45236 16.5103 7.63331 16.6929C7.81427 16.8754 7.90474 17.1016 7.90474 17.3714V20.0953ZM7.90474 7.90474V10.6286C7.90474 10.8984 7.81315 11.1246 7.62997 11.3071C7.44679 11.4897 7.21981 11.5809 6.94903 11.5809C6.67825 11.5809 6.45238 11.4897 6.27143 11.3071C6.09048 11.1246 6 10.8984 6 10.6286V6.95237C6 6.68254 6.09127 6.45635 6.2738 6.2738C6.45635 6.09127 6.68254 6 6.95237 6H10.6286C10.8984 6 11.1246 6.09159 11.3071 6.27477C11.4897 6.45795 11.5809 6.68493 11.5809 6.95571C11.5809 7.2265 11.4897 7.45236 11.3071 7.63331C11.1246 7.81427 10.8984 7.90474 10.6286 7.90474H7.90474ZM20.0953 20.0953V17.3714C20.0953 17.1016 20.1868 16.8754 20.37 16.6929C20.5532 16.5103 20.7802 16.4191 21.051 16.4191C21.3218 16.4191 21.5476 16.5103 21.7286 16.6929C21.9095 16.8754 22 17.1016 22 17.3714V21.0476C22 21.3175 21.9087 21.5436 21.7262 21.7262C21.5436 21.9087 21.3175 22 21.0476 22H17.3714C17.1016 22 16.8754 21.9084 16.6929 21.7252C16.5103 21.542 16.4191 21.3151 16.4191 21.0443C16.4191 20.7735 16.5103 20.5476 16.6929 20.3667C16.8754 20.1857 17.1016 20.0953 17.3714 20.0953H20.0953ZM20.0953 7.90474H17.3714C17.1016 7.90474 16.8754 7.81315 16.6929 7.62997C16.5103 7.44679 16.4191 7.21981 16.4191 6.94903C16.4191 6.67825 16.5103 6.45238 16.6929 6.27143C16.8754 6.09048 17.1016 6 17.3714 6H21.0476C21.3175 6 21.5436 6.09127 21.7262 6.2738C21.9087 6.45635 22 6.68254 22 6.95237V10.6286C22 10.8984 21.9084 11.1246 21.7252 11.3071C21.542 11.4897 21.3151 11.5809 21.0443 11.5809C20.7735 11.5809 20.5476 11.4897 20.3667 11.3071C20.1857 11.1246 20.0953 10.8984 20.0953 10.6286V7.90474Z" /></svg>\')\n  );\n}\n\n.deck-widget.deck-widget-fullscreen button.deck-widget-fullscreen-exit .deck-widget-icon {\n  mask-image: var(\n    --icon-fullscreen-exit,\n    url(\'data:image/svg+xml,<svg fill="black" height="100%" viewBox="0 0 28 28" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="M9.6762 18.3238H6.95237C6.68254 18.3238 6.45635 18.2322 6.2738 18.049C6.09127 17.8658 6 17.6389 6 17.3681C6 17.0973 6.09127 16.8714 6.2738 16.6905C6.45635 16.5095 6.68254 16.4191 6.95237 16.4191H10.6286C10.8984 16.4191 11.1246 16.5103 11.3071 16.6929C11.4897 16.8754 11.5809 17.1016 11.5809 17.3714V21.0476C11.5809 21.3175 11.4894 21.5436 11.3062 21.7262C11.123 21.9087 10.896 22 10.6252 22C10.3544 22 10.1286 21.9087 9.94763 21.7262C9.76668 21.5436 9.6762 21.3175 9.6762 21.0476V18.3238ZM18.3238 18.3238V21.0476C18.3238 21.3175 18.2322 21.5436 18.049 21.7262C17.8658 21.9087 17.6389 22 17.3681 22C17.0973 22 16.8714 21.9087 16.6905 21.7262C16.5095 21.5436 16.4191 21.3175 16.4191 21.0476V17.3714C16.4191 17.1016 16.5103 16.8754 16.6929 16.6929C16.8754 16.5103 17.1016 16.4191 17.3714 16.4191H21.0476C21.3175 16.4191 21.5436 16.5106 21.7262 16.6938C21.9087 16.877 22 17.104 22 17.3748C22 17.6456 21.9087 17.8714 21.7262 18.0524C21.5436 18.2333 21.3175 18.3238 21.0476 18.3238H18.3238ZM9.6762 9.6762V6.95237C9.6762 6.68254 9.76779 6.45635 9.95097 6.2738C10.1342 6.09127 10.3611 6 10.6319 6C10.9027 6 11.1286 6.09127 11.3095 6.2738C11.4905 6.45635 11.5809 6.68254 11.5809 6.95237V10.6286C11.5809 10.8984 11.4897 11.1246 11.3071 11.3071C11.1246 11.4897 10.8984 11.5809 10.6286 11.5809H6.95237C6.68254 11.5809 6.45635 11.4894 6.2738 11.3062C6.09127 11.123 6 10.896 6 10.6252C6 10.3544 6.09127 10.1286 6.2738 9.94763C6.45635 9.76668 6.68254 9.6762 6.95237 9.6762H9.6762ZM18.3238 9.6762H21.0476C21.3175 9.6762 21.5436 9.76779 21.7262 9.95097C21.9087 10.1342 22 10.3611 22 10.6319C22 10.9027 21.9087 11.1286 21.7262 11.3095C21.5436 11.4905 21.3175 11.5809 21.0476 11.5809H17.3714C17.1016 11.5809 16.8754 11.4897 16.6929 11.3071C16.5103 11.1246 16.4191 10.8984 16.4191 10.6286V6.95237C16.4191 6.68254 16.5106 6.45635 16.6938 6.2738C16.877 6.09127 17.104 6 17.3748 6C17.6456 6 17.8714 6.09127 18.0524 6.2738C18.2333 6.45635 18.3238 6.68254 18.3238 6.95237V9.6762Z" /></svg>\')\n  );\n  -webkit-mask-image: var(\n    --icon-fullscreen-exit,\n    url(\'data:image/svg+xml,<svg fill="black" height="100%" viewBox="0 0 28 28" width="100%" xmlns="http://www.w3.org/2000/svg"><path d="M9.6762 18.3238H6.95237C6.68254 18.3238 6.45635 18.2322 6.2738 18.049C6.09127 17.8658 6 17.6389 6 17.3681C6 17.0973 6.09127 16.8714 6.2738 16.6905C6.45635 16.5095 6.68254 16.4191 6.95237 16.4191H10.6286C10.8984 16.4191 11.1246 16.5103 11.3071 16.6929C11.4897 16.8754 11.5809 17.1016 11.5809 17.3714V21.0476C11.5809 21.3175 11.4894 21.5436 11.3062 21.7262C11.123 21.9087 10.896 22 10.6252 22C10.3544 22 10.1286 21.9087 9.94763 21.7262C9.76668 21.5436 9.6762 21.3175 9.6762 21.0476V18.3238ZM18.3238 18.3238V21.0476C18.3238 21.3175 18.2322 21.5436 18.049 21.7262C17.8658 21.9087 17.6389 22 17.3681 22C17.0973 22 16.8714 21.9087 16.6905 21.7262C16.5095 21.5436 16.4191 21.3175 16.4191 21.0476V17.3714C16.4191 17.1016 16.5103 16.8754 16.6929 16.6929C16.8754 16.5103 17.1016 16.4191 17.3714 16.4191H21.0476C21.3175 16.4191 21.5436 16.5106 21.7262 16.6938C21.9087 16.877 22 17.104 22 17.3748C22 17.6456 21.9087 17.8714 21.7262 18.0524C21.5436 18.2333 21.3175 18.3238 21.0476 18.3238H18.3238ZM9.6762 9.6762V6.95237C9.6762 6.68254 9.76779 6.45635 9.95097 6.2738C10.1342 6.09127 10.3611 6 10.6319 6C10.9027 6 11.1286 6.09127 11.3095 6.2738C11.4905 6.45635 11.5809 6.68254 11.5809 6.95237V10.6286C11.5809 10.8984 11.4897 11.1246 11.3071 11.3071C11.1246 11.4897 10.8984 11.5809 10.6286 11.5809H6.95237C6.68254 11.5809 6.45635 11.4894 6.2738 11.3062C6.09127 11.123 6 10.896 6 10.6252C6 10.3544 6.09127 10.1286 6.2738 9.94763C6.45635 9.76668 6.68254 9.6762 6.95237 9.6762H9.6762ZM18.3238 9.6762H21.0476C21.3175 9.6762 21.5436 9.76779 21.7262 9.95097C21.9087 10.1342 22 10.3611 22 10.6319C22 10.9027 21.9087 11.1286 21.7262 11.3095C21.5436 11.4905 21.3175 11.5809 21.0476 11.5809H17.3714C17.1016 11.5809 16.8754 11.4897 16.6929 11.3071C16.5103 11.1246 16.4191 10.8984 16.4191 10.6286V6.95237C16.4191 6.68254 16.5106 6.45635 16.6938 6.2738C16.877 6.09127 17.104 6 17.3748 6C17.6456 6 17.8714 6.09127 18.0524 6.2738C18.2333 6.45635 18.3238 6.68254 18.3238 6.95237V9.6762Z" /></svg>\')\n  );\n}\n\n.deck-pseudo-fullscreen {\n  height: 50% !important;\n  left: 0 !important;\n  position: fixed !important;\n  top: 0 !important;\n  width: 100% !important;\n  z-index: -1;\n}\n\n/* Zoom styles */\n.deck-widget.deck-widget-zoom button.deck-widget-zoom-in .deck-widget-icon {\n  mask-image: var(\n    --icon-zoom-in,\n    url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 26 26" fill="black"><path d="M12.1029 13.8971H7.89332C7.64334 13.8971 7.43196 13.8105 7.25918 13.6373C7.08639 13.4641 7 13.2521 7 13.0014C7 12.7508 7.08639 12.5396 7.25918 12.368C7.43196 12.1963 7.64334 12.1105 7.89332 12.1105H12.1029V7.90097C12.1029 7.65161 12.1895 7.43912 12.3627 7.26348C12.5359 7.08783 12.7479 7 12.9986 7C13.2492 7 13.4604 7.08783 13.632 7.26348C13.8037 7.43912 13.8895 7.65161 13.8895 7.90097V12.1105H18.099C18.3484 12.1105 18.5609 12.1971 18.7365 12.3703C18.9122 12.5436 19 12.7555 19 13.0062C19 13.2569 18.9122 13.468 18.7365 13.6397C18.5609 13.8113 18.3484 13.8971 18.099 13.8971H13.8895V18.1067C13.8895 18.3567 13.8029 18.568 13.6297 18.7408C13.4564 18.9136 13.2445 19 12.9938 19C12.7431 19 12.532 18.9136 12.3603 18.7408C12.1887 18.568 12.1029 18.3567 12.1029 18.1067V13.8971Z"/></svg>\')\n  );\n  -webkit-mask-image: var(\n    --icon-zoom-in,\n    url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 26 26" fill="black"><path d="M12.1029 13.8971H7.89332C7.64334 13.8971 7.43196 13.8105 7.25918 13.6373C7.08639 13.4641 7 13.2521 7 13.0014C7 12.7508 7.08639 12.5396 7.25918 12.368C7.43196 12.1963 7.64334 12.1105 7.89332 12.1105H12.1029V7.90097C12.1029 7.65161 12.1895 7.43912 12.3627 7.26348C12.5359 7.08783 12.7479 7 12.9986 7C13.2492 7 13.4604 7.08783 13.632 7.26348C13.8037 7.43912 13.8895 7.65161 13.8895 7.90097V12.1105H18.099C18.3484 12.1105 18.5609 12.1971 18.7365 12.3703C18.9122 12.5436 19 12.7555 19 13.0062C19 13.2569 18.9122 13.468 18.7365 13.6397C18.5609 13.8113 18.3484 13.8971 18.099 13.8971H13.8895V18.1067C13.8895 18.3567 13.8029 18.568 13.6297 18.7408C13.4564 18.9136 13.2445 19 12.9938 19C12.7431 19 12.532 18.9136 12.3603 18.7408C12.1887 18.568 12.1029 18.3567 12.1029 18.1067V13.8971Z"/></svg>\')\n  );\n}\n\n.deck-widget.deck-widget-zoom button.deck-widget-zoom-out .deck-widget-icon {\n  mask-image: var(\n    --icon-zoom-out,\n    url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 26 26" fill="black"> wBox="0 0 26 26" fill="none"><path d="M7.89332 13.8866C7.64334 13.8866 7.43196 13.8 7.25918 13.6268C7.08639 13.4535 7 13.2416 7 12.9909C7 12.7403 7.08639 12.5291 7.25918 12.3575C7.43196 12.1858 7.64334 12.1 7.89332 12.1H18.099C18.349 12.1 18.5617 12.1866 18.737 12.3598C18.9123 12.5331 19 12.745 19 12.9957C19 13.2463 18.9123 13.4575 18.737 13.6291C18.5617 13.8008 18.349 13.8866 18.099 13.8866H7.89332Z"/></svg>\')\n  );\n  -webkit-mask-image: var(\n    --icon-zoom-out,\n    url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 26 26" fill="black"> wBox="0 0 26 26" fill="none"><path d="M7.89332 13.8866C7.64334 13.8866 7.43196 13.8 7.25918 13.6268C7.08639 13.4535 7 13.2416 7 12.9909C7 12.7403 7.08639 12.5291 7.25918 12.3575C7.43196 12.1858 7.64334 12.1 7.89332 12.1H18.099C18.349 12.1 18.5617 12.1866 18.737 12.3598C18.9123 12.5331 19 12.745 19 12.9957C19 13.2463 18.9123 13.4575 18.737 13.6291C18.5617 13.8008 18.349 13.8866 18.099 13.8866H7.89332Z"/></svg>\')\n  );\n}\n',""]);const a=s},278:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,r,o){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(i)for(var a=0;a<this.length;a++){var A=this[a][0];null!=A&&(s[A]=!0)}for(var l=0;l<t.length;l++){var c=[].concat(t[l]);i&&s[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),r&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=r):c[4]="".concat(r)),e.push(c))}},e}},3021:t=>{"use strict";t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},8645:t=>{"use strict";t.exports=function(t){return t[1]}},8900:function(t,e,n){t.exports=function(){"use strict";var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)},e=function(){return(e=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function i(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||((i=i||Array.prototype.slice.call(e,0,r))[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:n.g,o=Object.keys,s=Array.isArray;function a(t,e){return"object"!=typeof e||o(e).forEach((function(n){t[n]=e[n]})),t}"undefined"==typeof Promise||r.Promise||(r.Promise=Promise);var A=Object.getPrototypeOf,l={}.hasOwnProperty;function c(t,e){return l.call(t,e)}function u(t,e){"function"==typeof e&&(e=e(A(t))),("undefined"==typeof Reflect?o:Reflect.ownKeys)(e).forEach((function(n){g(t,n,e[n])}))}var h=Object.defineProperty;function g(t,e,n,i){h(t,e,a(n&&c(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},i))}function d(t){return{from:function(e){return t.prototype=Object.create(e.prototype),g(t.prototype,"constructor",t),{extend:u.bind(null,t.prototype)}}}}var p=Object.getOwnPropertyDescriptor,f=[].slice;function m(t,e,n){return f.call(t,e,n)}function I(t,e){return e(t)}function y(t){if(!t)throw new Error("Assertion Failed")}function C(t){r.setImmediate?setImmediate(t):setTimeout(t,0)}function E(t,e){if("string"==typeof e&&c(t,e))return t[e];if(!e)return t;if("string"!=typeof e){for(var n=[],i=0,r=e.length;i<r;++i){var o=E(t,e[i]);n.push(o)}return n}var s=e.indexOf(".");if(-1!==s){var a=t[e.substr(0,s)];return null==a?void 0:E(a,e.substr(s+1))}}function _(t,e,n){if(t&&void 0!==e&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if("string"!=typeof e&&"length"in e){y("string"!=typeof n&&"length"in n);for(var i=0,r=e.length;i<r;++i)_(t,e[i],n[i])}else{var o,a,A=e.indexOf(".");-1!==A?(o=e.substr(0,A),""===(a=e.substr(A+1))?void 0===n?s(t)&&!isNaN(parseInt(o))?t.splice(o,1):delete t[o]:t[o]=n:_(A=(A=t[o])&&c(t,o)?A:t[o]={},a,n)):void 0===n?s(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function v(t){var e,n={};for(e in t)c(t,e)&&(n[e]=t[e]);return n}var B=[].concat;function w(t){return B.apply([],t)}var b="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(w([8,16,32,64].map((function(t){return["Int","Uint","Float"].map((function(e){return e+t+"Array"}))})))).filter((function(t){return r[t]})),Q=new Set(b.map((function(t){return r[t]}))),x=null;function D(t){return x=new WeakMap,t=function t(e){if(!e||"object"!=typeof e)return e;var n=x.get(e);if(n)return n;if(s(e)){n=[],x.set(e,n);for(var i=0,r=e.length;i<r;++i)n.push(t(e[i]))}else if(Q.has(e.constructor))n=e;else{var o,a=A(e);for(o in n=a===Object.prototype?{}:Object.create(a),x.set(e,n),e)c(e,o)&&(n[o]=t(e[o]))}return n}(t),x=null,t}var S={}.toString;function M(t){return S.call(t).slice(8,-1)}var k="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",R="symbol"==typeof k?function(t){var e;return null!=t&&(e=t[k])&&e.apply(t)}:function(){return null};function N(t,e){return 0<=(e=t.indexOf(e))&&t.splice(e,1),0<=e}var P={};function T(t){var e,n,i,r;if(1===arguments.length){if(s(t))return t.slice();if(this===P&&"string"==typeof t)return[t];if(r=R(t)){for(n=[];!(i=r.next()).done;)n.push(i.value);return n}if(null==t)return[t];if("number"!=typeof(e=t.length))return[t];for(n=new Array(e);e--;)n[e]=t[e];return n}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}var L="undefined"!=typeof Symbol?function(t){return"AsyncFunction"===t[Symbol.toStringTag]}:function(){return!1},F=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(At=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"]),O={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function G(t,e){this.name=t,this.message=e}function U(t,e){return t+". Errors: "+Object.keys(e).map((function(t){return e[t].toString()})).filter((function(t,e,n){return n.indexOf(t)===e})).join("\n")}function j(t,e,n,i){this.failures=e,this.failedKeys=i,this.successCount=n,this.message=U(t,e)}function Y(t,e){this.name="BulkError",this.failures=Object.keys(e).map((function(t){return e[t]})),this.failuresByPos=e,this.message=U(t,this.failures)}d(G).from(Error).extend({toString:function(){return this.name+": "+this.message}}),d(j).from(G),d(Y).from(G);var K=F.reduce((function(t,e){return t[e]=e+"Error",t}),{}),z=G,J=F.reduce((function(t,e){var n=e+"Error";function i(t,i){this.name=n,t?"string"==typeof t?(this.message="".concat(t).concat(i?"\n "+i:""),this.inner=i||null):"object"==typeof t&&(this.message="".concat(t.name," ").concat(t.message),this.inner=t):(this.message=O[e]||n,this.inner=null)}return d(i).from(z),t[e]=i,t}),{});J.Syntax=SyntaxError,J.Type=TypeError,J.Range=RangeError;var q=At.reduce((function(t,e){return t[e+"Error"]=J[e],t}),{}),H=F.reduce((function(t,e){return-1===["Syntax","Type","Range"].indexOf(e)&&(t[e+"Error"]=J[e]),t}),{});function V(){}function W(t){return t}function Z(t,e){return null==t||t===W?e:function(n){return e(t(n))}}function X(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function $(t,e){return t===V?e:function(){var n=t.apply(this,arguments);void 0!==n&&(arguments[0]=n);var i=this.onsuccess,r=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?X(i,this.onsuccess):i),r&&(this.onerror=this.onerror?X(r,this.onerror):r),void 0!==o?o:n}}function tt(t,e){return t===V?e:function(){t.apply(this,arguments);var n=this.onsuccess,i=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?X(n,this.onsuccess):n),i&&(this.onerror=this.onerror?X(i,this.onerror):i)}}function et(t,e){return t===V?e:function(n){var i=t.apply(this,arguments);a(n,i);var r=this.onsuccess,o=this.onerror;return this.onsuccess=null,this.onerror=null,n=e.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?X(r,this.onsuccess):r),o&&(this.onerror=this.onerror?X(o,this.onerror):o),void 0===i?void 0===n?void 0:n:a(i,n)}}function nt(t,e){return t===V?e:function(){return!1!==e.apply(this,arguments)&&t.apply(this,arguments)}}function it(t,e){return t===V?e:function(){var n=t.apply(this,arguments);if(n&&"function"==typeof n.then){for(var i=this,r=arguments.length,o=new Array(r);r--;)o[r]=arguments[r];return n.then((function(){return e.apply(i,o)}))}return e.apply(this,arguments)}}H.ModifyError=j,H.DexieError=G,H.BulkError=Y;var rt="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ot(t){rt=t}var st={},at=100,At=(b="undefined"==typeof Promise?[]:function(){var t=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[t,A(t),t];var e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,A(e),t]}(),b[0]),lt=(F=b[1],b=b[2],F=F&&F.then,At&&At.constructor),ct=!!b,ut=function(t,e){yt.push([t,e]),gt&&(queueMicrotask(Dt),gt=!1)},ht=!0,gt=!0,dt=[],pt=[],ft=W,mt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:V,pgp:!1,env:{},finalize:V},It=mt,yt=[],Ct=0,Et=[];function _t(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var e=this._PSD=It;if("function"!=typeof t){if(t!==st)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&wt(this,this._value))}this._state=null,this._value=null,++e.ref,function t(e,n){try{n((function(n){if(null===e._state){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var i=e._lib&&St();n&&"function"==typeof n.then?t(e,(function(t,e){n instanceof _t?n._then(t,e):n.then(t,e)})):(e._state=!0,e._value=n,bt(e)),i&&Mt()}}),wt.bind(null,e))}catch(n){wt(e,n)}}(this,t)}var vt={get:function(){var t=It,e=Ot;function n(n,i){var r=this,o=!t.global&&(t!==It||e!==Ot),s=o&&!Yt(),a=new _t((function(e,a){Qt(r,new Bt(Vt(n,t,o,s),Vt(i,t,o,s),e,a,t))}));return this._consoleTask&&(a._consoleTask=this._consoleTask),a}return n.prototype=st,n},set:function(t){g(this,"then",t&&t.prototype===st?vt:{get:function(){return t},set:vt.set})}};function Bt(t,e,n,i,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=i,this.psd=r}function wt(t,e){var n,i;pt.push(e),null===t._state&&(n=t._lib&&St(),e=ft(e),t._state=!1,t._value=e,i=t,dt.some((function(t){return t._value===i._value}))||dt.push(i),bt(t),n&&Mt())}function bt(t){var e=t._listeners;t._listeners=[];for(var n=0,i=e.length;n<i;++n)Qt(t,e[n]);var r=t._PSD;--r.ref||r.finalize(),0===Ct&&(++Ct,ut((function(){0==--Ct&&kt()}),[]))}function Qt(t,e){if(null!==t._state){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Ct,ut(xt,[n,t,e])}else t._listeners.push(e)}function xt(t,e,n){try{var i,r=e._value;!e._state&&pt.length&&(pt=[]),i=rt&&e._consoleTask?e._consoleTask.run((function(){return t(r)})):t(r),e._state||-1!==pt.indexOf(r)||function(t){for(var e=dt.length;e;)if(dt[--e]._value===t._value)return dt.splice(e,1)}(e),n.resolve(i)}catch(t){n.reject(t)}finally{0==--Ct&&kt(),--n.psd.ref||n.psd.finalize()}}function Dt(){Ht(mt,(function(){St()&&Mt()}))}function St(){var t=ht;return gt=ht=!1,t}function Mt(){var t,e,n;do{for(;0<yt.length;)for(t=yt,yt=[],n=t.length,e=0;e<n;++e){var i=t[e];i[0].apply(null,i[1])}}while(0<yt.length);gt=ht=!0}function kt(){var t=dt;dt=[],t.forEach((function(t){t._PSD.onunhandled.call(null,t._value,t)}));for(var e=Et.slice(0),n=e.length;n;)e[--n]()}function Rt(t){return new _t(st,!1,t)}function Nt(t,e){var n=It;return function(){var i=St(),r=It;try{return Jt(n,!0),t.apply(this,arguments)}catch(i){e&&e(i)}finally{Jt(r,!1),i&&Mt()}}}u(_t.prototype,{then:vt,_then:function(t,e){Qt(this,new Bt(null,null,t,e,It))},catch:function(t){if(1===arguments.length)return this.then(null,t);var e=t,n=arguments[1];return"function"==typeof e?this.then(null,(function(t){return(t instanceof e?n:Rt)(t)})):this.then(null,(function(t){return(t&&t.name===e?n:Rt)(t)}))},finally:function(t){return this.then((function(e){return _t.resolve(t()).then((function(){return e}))}),(function(e){return _t.resolve(t()).then((function(){return Rt(e)}))}))},timeout:function(t,e){var n=this;return t<1/0?new _t((function(i,r){var o=setTimeout((function(){return r(new J.Timeout(e))}),t);n.then(i,r).finally(clearTimeout.bind(null,o))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&g(_t.prototype,Symbol.toStringTag,"Dexie.Promise"),mt.env=qt(),u(_t,{all:function(){var t=T.apply(null,arguments).map(Kt);return new _t((function(e,n){0===t.length&&e([]);var i=t.length;t.forEach((function(r,o){return _t.resolve(r).then((function(n){t[o]=n,--i||e(t)}),n)}))}))},resolve:function(t){return t instanceof _t?t:t&&"function"==typeof t.then?new _t((function(e,n){t.then(e,n)})):new _t(st,!0,t)},reject:Rt,race:function(){var t=T.apply(null,arguments).map(Kt);return new _t((function(e,n){t.map((function(t){return _t.resolve(t).then(e,n)}))}))},PSD:{get:function(){return It},set:function(t){return It=t}},totalEchoes:{get:function(){return Ot}},newPSD:Ut,usePSD:Ht,scheduler:{get:function(){return ut},set:function(t){ut=t}},rejectionMapper:{get:function(){return ft},set:function(t){ft=t}},follow:function(t,e){return new _t((function(n,i){return Ut((function(e,n){var i=It;i.unhandleds=[],i.onunhandled=n,i.finalize=X((function(){var t,i=this;t=function(){0===i.unhandleds.length?e():n(i.unhandleds[0])},Et.push((function e(){t(),Et.splice(Et.indexOf(e),1)})),++Ct,ut((function(){0==--Ct&&kt()}),[])}),i.finalize),t()}),e,n,i)}))}}),lt&&(lt.allSettled&&g(_t,"allSettled",(function(){var t=T.apply(null,arguments).map(Kt);return new _t((function(e){0===t.length&&e([]);var n=t.length,i=new Array(n);t.forEach((function(t,r){return _t.resolve(t).then((function(t){return i[r]={status:"fulfilled",value:t}}),(function(t){return i[r]={status:"rejected",reason:t}})).then((function(){return--n||e(i)}))}))}))})),lt.any&&"undefined"!=typeof AggregateError&&g(_t,"any",(function(){var t=T.apply(null,arguments).map(Kt);return new _t((function(e,n){0===t.length&&n(new AggregateError([]));var i=t.length,r=new Array(i);t.forEach((function(t,o){return _t.resolve(t).then((function(t){return e(t)}),(function(t){r[o]=t,--i||n(new AggregateError(r))}))}))}))})));var Pt={awaits:0,echoes:0,id:0},Tt=0,Lt=[],Ft=0,Ot=0,Gt=0;function Ut(t,e,n,i){var r=It,o=Object.create(r);return o.parent=r,o.ref=0,o.global=!1,o.id=++Gt,mt.env,o.env=ct?{Promise:_t,PromiseProp:{value:_t,configurable:!0,writable:!0},all:_t.all,race:_t.race,allSettled:_t.allSettled,any:_t.any,resolve:_t.resolve,reject:_t.reject}:{},e&&a(o,e),++r.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()},i=Ht(o,t,n,i),0===o.ref&&o.finalize(),i}function jt(){return Pt.id||(Pt.id=++Tt),++Pt.awaits,Pt.echoes+=at,Pt.id}function Yt(){return!!Pt.awaits&&(0==--Pt.awaits&&(Pt.id=0),Pt.echoes=Pt.awaits*at,!0)}function Kt(t){return Pt.echoes&&t&&t.constructor===lt?(jt(),t.then((function(t){return Yt(),t}),(function(t){return Yt(),Zt(t)}))):t}function zt(){var t=Lt[Lt.length-1];Lt.pop(),Jt(t,!1)}function Jt(t,e){var n,i=It;(e?!Pt.echoes||Ft++&&t===It:!Ft||--Ft&&t===It)||queueMicrotask(e?function(t){++Ot,Pt.echoes&&0!=--Pt.echoes||(Pt.echoes=Pt.awaits=Pt.id=0),Lt.push(It),Jt(t,!0)}.bind(null,t):zt),t!==It&&(It=t,i===mt&&(mt.env=qt()),ct&&(n=mt.env.Promise,e=t.env,(i.global||t.global)&&(Object.defineProperty(r,"Promise",e.PromiseProp),n.all=e.all,n.race=e.race,n.resolve=e.resolve,n.reject=e.reject,e.allSettled&&(n.allSettled=e.allSettled),e.any&&(n.any=e.any))))}function qt(){var t=r.Promise;return ct?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(r,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function Ht(t,e,n,i,r){var o=It;try{return Jt(t,!0),e(n,i,r)}finally{Jt(o,!1)}}function Vt(t,e,n,i){return"function"!=typeof t?t:function(){var r=It;n&&jt(),Jt(e,!0);try{return t.apply(this,arguments)}finally{Jt(r,!1),i&&queueMicrotask(Yt)}}}function Wt(t){Promise===lt&&0===Pt.echoes?0===Ft?t():enqueueNativeMicroTask(t):setTimeout(t,0)}-1===(""+F).indexOf("[native code]")&&(jt=Yt=V);var Zt=_t.reject,Xt=String.fromCharCode(65535),$t="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",te="String expected.",ee=[],ne="__dbnames",ie="readonly",re="readwrite";function oe(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}var se={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ae(t){return"string"!=typeof t||/\./.test(t)?function(t){return t}:function(e){return void 0===e[t]&&t in e&&delete(e=D(e))[t],e}}function Ae(){throw J.Type()}function le(t,e){try{var n=ce(t),i=ce(e);if(n!==i)return"Array"===n?1:"Array"===i?-1:"binary"===n?1:"binary"===i?-1:"string"===n?1:"string"===i?-1:"Date"===n?1:"Date"!==i?NaN:-1;switch(n){case"number":case"Date":case"string":return e<t?1:t<e?-1:0;case"binary":return function(t,e){for(var n=t.length,i=e.length,r=n<i?n:i,o=0;o<r;++o)if(t[o]!==e[o])return t[o]<e[o]?-1:1;return n===i?0:n<i?-1:1}(ue(t),ue(e));case"Array":return function(t,e){for(var n=t.length,i=e.length,r=n<i?n:i,o=0;o<r;++o){var s=le(t[o],e[o]);if(0!==s)return s}return n===i?0:n<i?-1:1}(t,e)}}catch(t){}return NaN}function ce(t){var e=typeof t;return"object"!=e?e:ArrayBuffer.isView(t)||"ArrayBuffer"===(t=M(t))?"binary":t}function ue(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}var he=(ge.prototype._trans=function(t,e,n){var i=this._tx||It.trans,r=this.name,o=rt&&"undefined"!=typeof console&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===t?"read":"write"," ").concat(this.name));function s(t,n,i){if(!i.schema[r])throw new J.NotFound("Table "+r+" not part of transaction");return e(i.idbtrans,i)}var a=St();try{var A=i&&i.db._novip===this.db._novip?i===It.trans?i._promise(t,s,n):Ut((function(){return i._promise(t,s,n)}),{trans:i,transless:It.transless||It}):function t(e,n,i,r){if(e.idbdb&&(e._state.openComplete||It.letThrough||e._vip)){var o=e._createTransaction(n,i,e._dbSchema);try{o.create(),e._state.PR1398_maxLoop=3}catch(o){return o.name===K.InvalidState&&e.isOpen()&&0<--e._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then((function(){return t(e,n,i,r)}))):Zt(o)}return o._promise(n,(function(t,e){return Ut((function(){return It.trans=o,r(t,e,o)}))})).then((function(t){if("readwrite"===n)try{o.idbtrans.commit()}catch(t){}return"readonly"===n?t:o._completion.then((function(){return t}))}))}if(e._state.openComplete)return Zt(new J.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return Zt(new J.DatabaseClosed);e.open().catch(V)}return e._state.dbReadyPromise.then((function(){return t(e,n,i,r)}))}(this.db,t,[this.name],s);return o&&(A._consoleTask=o,A=A.catch((function(t){return console.trace(t),Zt(t)}))),A}finally{a&&Mt()}},ge.prototype.get=function(t,e){var n=this;return t&&t.constructor===Object?this.where(t).first(e):null==t?Zt(new J.Type("Invalid argument to Table.get()")):this._trans("readonly",(function(e){return n.core.get({trans:e,key:t}).then((function(t){return n.hook.reading.fire(t)}))})).then(e)},ge.prototype.where=function(t){if("string"==typeof t)return new this.db.WhereClause(this,t);if(s(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var e=o(t);if(1===e.length)return this.where(e[0]).equals(t[e[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(t){if(t.compound&&e.every((function(e){return 0<=t.keyPath.indexOf(e)}))){for(var n=0;n<e.length;++n)if(-1===e.indexOf(t.keyPath[n]))return!1;return!0}return!1})).sort((function(t,e){return t.keyPath.length-e.keyPath.length}))[0];if(n&&this.db._maxKey!==Xt){var i=n.keyPath.slice(0,e.length);return this.where(i).equals(i.map((function(e){return t[e]})))}!n&&rt&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(e.join("+"),"]"));var r=this.schema.idxByName,a=this.db._deps.indexedDB;function A(t,e){return 0===a.cmp(t,e)}var l=e.reduce((function(e,n){var i=e[0],o=e[1],a=(e=r[n],t[n]);return[i||e,i||!e?oe(o,e&&e.multi?function(t){return t=E(t,n),s(t)&&t.some((function(t){return A(a,t)}))}:function(t){return A(a,E(t,n))}):o]}),[null,null]);return i=l[0],l=l[1],i?this.where(i.name).equals(t[i.keyPath]).filter(l):n?this.filter(l):this.where(e).equals("")},ge.prototype.filter=function(t){return this.toCollection().and(t)},ge.prototype.count=function(t){return this.toCollection().count(t)},ge.prototype.offset=function(t){return this.toCollection().offset(t)},ge.prototype.limit=function(t){return this.toCollection().limit(t)},ge.prototype.each=function(t){return this.toCollection().each(t)},ge.prototype.toArray=function(t){return this.toCollection().toArray(t)},ge.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ge.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,s(t)?"[".concat(t.join("+"),"]"):t))},ge.prototype.reverse=function(){return this.toCollection().reverse()},ge.prototype.mapToClass=function(e){var n,i=this.db,r=this.name;function o(){return null!==n&&n.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof Ae&&(function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}(o,n=e),Object.defineProperty(o.prototype,"db",{get:function(){return i},enumerable:!1,configurable:!0}),o.prototype.table=function(){return r},e=o);for(var s=new Set,a=e.prototype;a;a=A(a))Object.getOwnPropertyNames(a).forEach((function(t){return s.add(t)}));function l(t){if(!t)return t;var n,i=Object.create(e.prototype);for(n in t)if(!s.has(n))try{i[n]=t[n]}catch(t){}return i}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=l,this.hook("reading",l),e},ge.prototype.defineClass=function(){return this.mapToClass((function(t){a(this,t)}))},ge.prototype.add=function(t,e){var n=this,i=this.schema.primKey,r=i.auto,o=i.keyPath,s=t;return o&&r&&(s=ae(o)(t)),this._trans("readwrite",(function(t){return n.core.mutate({trans:t,type:"add",keys:null!=e?[e]:null,values:[s]})})).then((function(t){return t.numFailures?_t.reject(t.failures[0]):t.lastResult})).then((function(e){if(o)try{_(t,o,e)}catch(e){}return e}))},ge.prototype.update=function(t,e){return"object"!=typeof t||s(t)?this.where(":id").equals(t).modify(e):void 0===(t=E(t,this.schema.primKey.keyPath))?Zt(new J.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(t).modify(e)},ge.prototype.put=function(t,e){var n=this,i=this.schema.primKey,r=i.auto,o=i.keyPath,s=t;return o&&r&&(s=ae(o)(t)),this._trans("readwrite",(function(t){return n.core.mutate({trans:t,type:"put",values:[s],keys:null!=e?[e]:null})})).then((function(t){return t.numFailures?_t.reject(t.failures[0]):t.lastResult})).then((function(e){if(o)try{_(t,o,e)}catch(e){}return e}))},ge.prototype.delete=function(t){var e=this;return this._trans("readwrite",(function(n){return e.core.mutate({trans:n,type:"delete",keys:[t]})})).then((function(t){return t.numFailures?_t.reject(t.failures[0]):void 0}))},ge.prototype.clear=function(){var t=this;return this._trans("readwrite",(function(e){return t.core.mutate({trans:e,type:"deleteRange",range:se})})).then((function(t){return t.numFailures?_t.reject(t.failures[0]):void 0}))},ge.prototype.bulkGet=function(t){var e=this;return this._trans("readonly",(function(n){return e.core.getMany({keys:t,trans:n}).then((function(t){return t.map((function(t){return e.hook.reading.fire(t)}))}))}))},ge.prototype.bulkAdd=function(t,e,n){var i=this,r=Array.isArray(e)?e:void 0,o=(n=n||(r?void 0:e))?n.allKeys:void 0;return this._trans("readwrite",(function(e){var n=(a=i.schema.primKey).auto;if((a=a.keyPath)&&r)throw new J.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(r&&r.length!==t.length)throw new J.InvalidArgument("Arguments objects and keys must have the same length");var s=t.length,a=a&&n?t.map(ae(a)):t;return i.core.mutate({trans:e,type:"add",keys:r,values:a,wantResults:o}).then((function(t){var e=t.numFailures,n=t.results,r=t.lastResult;if(t=t.failures,0===e)return o?n:r;throw new Y("".concat(i.name,".bulkAdd(): ").concat(e," of ").concat(s," operations failed"),t)}))}))},ge.prototype.bulkPut=function(t,e,n){var i=this,r=Array.isArray(e)?e:void 0,o=(n=n||(r?void 0:e))?n.allKeys:void 0;return this._trans("readwrite",(function(e){var n=(a=i.schema.primKey).auto;if((a=a.keyPath)&&r)throw new J.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(r&&r.length!==t.length)throw new J.InvalidArgument("Arguments objects and keys must have the same length");var s=t.length,a=a&&n?t.map(ae(a)):t;return i.core.mutate({trans:e,type:"put",keys:r,values:a,wantResults:o}).then((function(t){var e=t.numFailures,n=t.results,r=t.lastResult;if(t=t.failures,0===e)return o?n:r;throw new Y("".concat(i.name,".bulkPut(): ").concat(e," of ").concat(s," operations failed"),t)}))}))},ge.prototype.bulkUpdate=function(t){var e=this,n=this.core,i=t.map((function(t){return t.key})),r=t.map((function(t){return t.changes})),o=[];return this._trans("readwrite",(function(s){return n.getMany({trans:s,keys:i,cache:"clone"}).then((function(a){var A=[],l=[];t.forEach((function(t,n){var i=t.key,r=t.changes,s=a[n];if(s){for(var c=0,u=Object.keys(r);c<u.length;c++){var h=u[c],g=r[h];if(h===e.schema.primKey.keyPath){if(0!==le(g,i))throw new J.Constraint("Cannot update primary key in bulkUpdate()")}else _(s,h,g)}o.push(n),A.push(i),l.push(s)}}));var c=A.length;return n.mutate({trans:s,type:"put",keys:A,values:l,updates:{keys:i,changeSpecs:r}}).then((function(t){var n=t.numFailures,i=t.failures;if(0===n)return c;for(var r=0,s=Object.keys(i);r<s.length;r++){var a,A=s[r],l=o[Number(A)];null!=l&&(a=i[A],delete i[A],i[l]=a)}throw new Y("".concat(e.name,".bulkUpdate(): ").concat(n," of ").concat(c," operations failed"),i)}))}))}))},ge.prototype.bulkDelete=function(t){var e=this,n=t.length;return this._trans("readwrite",(function(n){return e.core.mutate({trans:n,type:"delete",keys:t})})).then((function(t){var i=t.numFailures,r=t.lastResult;if(t=t.failures,0===i)return r;throw new Y("".concat(e.name,".bulkDelete(): ").concat(i," of ").concat(n," operations failed"),t)}))},ge);function ge(){}function de(t){function e(e,i){if(i){for(var r=arguments.length,o=new Array(r-1);--r;)o[r-1]=arguments[r];return n[e].subscribe.apply(null,o),t}if("string"==typeof e)return n[e]}var n={};e.addEventType=a;for(var i=1,r=arguments.length;i<r;++i)a(arguments[i]);return e;function a(t,i,r){if("object"!=typeof t){var A;i=i||nt;var l={subscribers:[],fire:r=r||V,subscribe:function(t){-1===l.subscribers.indexOf(t)&&(l.subscribers.push(t),l.fire=i(l.fire,t))},unsubscribe:function(t){l.subscribers=l.subscribers.filter((function(e){return e!==t})),l.fire=l.subscribers.reduce(i,r)}};return n[t]=e[t]=l}o(A=t).forEach((function(t){var e=A[t];if(s(e))a(t,A[t][0],A[t][1]);else{if("asap"!==e)throw new J.InvalidArgument("Invalid event config");var n=a(t,W,(function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];n.subscribers.forEach((function(t){C((function(){t.apply(null,e)}))}))}))}}))}}function pe(t,e){return d(e).from({prototype:t}),e}function fe(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function me(t,e){t.filter=oe(t.filter,e)}function Ie(t,e,n){var i=t.replayFilter;t.replayFilter=i?function(){return oe(i(),e())}:e,t.justLimit=n&&!i}function ye(t,e){if(t.isPrimKey)return e.primaryKey;var n=e.getIndexByKeyPath(t.index);if(!n)throw new J.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function Ce(t,e,n){var i=ye(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:"prev"===t.dir,unique:!!t.unique,query:{index:i,range:t.range}})}function Ee(t,e,n,i){var r=t.replayFilter?oe(t.filter,t.replayFilter()):t.filter;if(t.or){var o={},s=function(t,n,i){var s,a;r&&!r(n,i,(function(t){return n.stop(t)}),(function(t){return n.fail(t)}))||("[object ArrayBuffer]"==(a=""+(s=n.primaryKey))&&(a=""+new Uint8Array(s)),c(o,a)||(o[a]=!0,e(t,n,i)))};return Promise.all([t.or._iterate(s,n),_e(Ce(t,i,n),t.algorithm,s,!t.keysOnly&&t.valueMapper)])}return _e(Ce(t,i,n),oe(t.algorithm,r),e,!t.keysOnly&&t.valueMapper)}function _e(t,e,n,i){var r=Nt(i?function(t,e,r){return n(i(t),e,r)}:n);return t.then((function(t){if(t)return t.start((function(){var n=function(){return t.continue()};e&&!e(t,(function(t){return n=t}),(function(e){t.stop(e),n=V}),(function(e){t.fail(e),n=V}))||r(t.value,t,(function(t){return n=t})),n()}))}))}b=Symbol();var ve=(Be.prototype.execute=function(t){if(void 0!==this.add){var e=this.add;if(s(e))return i(i([],s(t)?t:[],!0),e,!0).sort();if("number"==typeof e)return(Number(t)||0)+e;if("bigint"==typeof e)try{return BigInt(t)+e}catch(t){return BigInt(0)+e}throw new TypeError("Invalid term ".concat(e))}if(void 0!==this.remove){var n=this.remove;if(s(n))return s(t)?t.filter((function(t){return!n.includes(t)})).sort():[];if("number"==typeof n)return Number(t)-n;if("bigint"==typeof n)try{return BigInt(t)-n}catch(t){return BigInt(0)-n}throw new TypeError("Invalid subtrahend ".concat(n))}return(e=null===(e=this.replacePrefix)||void 0===e?void 0:e[0])&&"string"==typeof t&&t.startsWith(e)?this.replacePrefix[1]+t.substring(e.length):t},Be);function Be(t){Object.assign(this,t)}var we=(be.prototype._read=function(t,e){var n=this._ctx;return n.error?n.table._trans(null,Zt.bind(null,n.error)):n.table._trans("readonly",t).then(e)},be.prototype._write=function(t){var e=this._ctx;return e.error?e.table._trans(null,Zt.bind(null,e.error)):e.table._trans("readwrite",t,"locked")},be.prototype._addAlgorithm=function(t){var e=this._ctx;e.algorithm=oe(e.algorithm,t)},be.prototype._iterate=function(t,e){return Ee(this._ctx,t,e,this._ctx.table.core)},be.prototype.clone=function(t){var e=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return t&&a(n,t),e._ctx=n,e},be.prototype.raw=function(){return this._ctx.valueMapper=null,this},be.prototype.each=function(t){var e=this._ctx;return this._read((function(n){return Ee(e,t,n,e.table.core)}))},be.prototype.count=function(t){var e=this;return this._read((function(t){var n=e._ctx,i=n.table.core;if(fe(n,!0))return i.count({trans:t,query:{index:ye(n,i.schema),range:n.range}}).then((function(t){return Math.min(t,n.limit)}));var r=0;return Ee(n,(function(){return++r,!1}),t,i).then((function(){return r}))})).then(t)},be.prototype.sortBy=function(t,e){var n=t.split(".").reverse(),i=n[0],r=n.length-1;function o(t,e){return e?o(t[n[e]],e-1):t[i]}var s="next"===this._ctx.dir?1:-1;function a(t,e){return(t=o(t,r))<(e=o(e,r))?-s:e<t?s:0}return this.toArray((function(t){return t.sort(a)})).then(e)},be.prototype.toArray=function(t){var e=this;return this._read((function(t){var n=e._ctx;if("next"===n.dir&&fe(n,!0)&&0<n.limit){var i=n.valueMapper,r=ye(n,n.table.core.schema);return n.table.core.query({trans:t,limit:n.limit,values:!0,query:{index:r,range:n.range}}).then((function(t){return t=t.result,i?t.map(i):t}))}var o=[];return Ee(n,(function(t){return o.push(t)}),t,n.table.core).then((function(){return o}))}),t)},be.prototype.offset=function(t){var e=this._ctx;return t<=0||(e.offset+=t,fe(e)?Ie(e,(function(){var e=t;return function(t,n){return 0===e||(1===e?--e:n((function(){t.advance(e),e=0})),!1)}})):Ie(e,(function(){var e=t;return function(){return--e<0}}))),this},be.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),Ie(this._ctx,(function(){var e=t;return function(t,n,i){return--e<=0&&n(i),0<=e}}),!0),this},be.prototype.until=function(t,e){return me(this._ctx,(function(n,i,r){return!t(n.value)||(i(r),e)})),this},be.prototype.first=function(t){return this.limit(1).toArray((function(t){return t[0]})).then(t)},be.prototype.last=function(t){return this.reverse().first(t)},be.prototype.filter=function(t){var e;return me(this._ctx,(function(e){return t(e.value)})),(e=this._ctx).isMatch=oe(e.isMatch,t),this},be.prototype.and=function(t){return this.filter(t)},be.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},be.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},be.prototype.desc=function(){return this.reverse()},be.prototype.eachKey=function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each((function(e,n){t(n.key,n)}))},be.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},be.prototype.eachPrimaryKey=function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each((function(e,n){t(n.primaryKey,n)}))},be.prototype.keys=function(t){var e=this._ctx;e.keysOnly=!e.isMatch;var n=[];return this.each((function(t,e){n.push(e.key)})).then((function(){return n})).then(t)},be.prototype.primaryKeys=function(t){var e=this._ctx;if("next"===e.dir&&fe(e,!0)&&0<e.limit)return this._read((function(t){var n=ye(e,e.table.core.schema);return e.table.core.query({trans:t,values:!1,limit:e.limit,query:{index:n,range:e.range}})})).then((function(t){return t.result})).then(t);e.keysOnly=!e.isMatch;var n=[];return this.each((function(t,e){n.push(e.primaryKey)})).then((function(){return n})).then(t)},be.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},be.prototype.firstKey=function(t){return this.limit(1).keys((function(t){return t[0]})).then(t)},be.prototype.lastKey=function(t){return this.reverse().firstKey(t)},be.prototype.distinct=function(){var t;if(!(t=(t=this._ctx).index&&t.table.schema.idxByName[t.index])||!t.multi)return this;var e={};return me(this._ctx,(function(t){var n=t.primaryKey.toString();return t=c(e,n),e[n]=!0,!t})),this},be.prototype.modify=function(t){var e=this,n=this._ctx;return this._write((function(i){var r,s,a;function A(t,e){var n=e.failures;e=e.numFailures,p+=t-e;for(var i=0,r=o(n);i<r.length;i++){var s=r[i];d.push(n[s])}}a="function"==typeof t?t:(r=o(t),s=r.length,function(e){for(var n=!1,i=0;i<s;++i){var o=r[i],a=t[o],A=E(e,o);a instanceof ve?(_(e,o,a.execute(A)),n=!0):A!==a&&(_(e,o,a),n=!0)}return n});var l=n.table.core,c=l.schema.primaryKey,u=c.outbound,h=c.extractKey,g=e.db._options.modifyChunkSize||200,d=[],p=0,f=[];return e.clone().primaryKeys().then((function(e){function r(n){var s=Math.min(g,e.length-n);return l.getMany({trans:i,keys:e.slice(n,n+s),cache:"immutable"}).then((function(c){for(var d=[],p=[],f=u?[]:null,m=[],I=0;I<s;++I){var y=c[I],C={value:D(y),primKey:e[n+I]};!1!==a.call(C,C.value,C)&&(null==C.value?m.push(e[n+I]):u||0===le(h(y),h(C.value))?(p.push(C.value),u&&f.push(e[n+I])):(m.push(e[n+I]),d.push(C.value)))}return Promise.resolve(0<d.length&&l.mutate({trans:i,type:"add",values:d}).then((function(t){for(var e in t.failures)m.splice(parseInt(e),1);A(d.length,t)}))).then((function(){return(0<p.length||o&&"object"==typeof t)&&l.mutate({trans:i,type:"put",keys:f,values:p,criteria:o,changeSpec:"function"!=typeof t&&t,isAdditionalChunk:0<n}).then((function(t){return A(p.length,t)}))})).then((function(){return(0<m.length||o&&t===Qe)&&l.mutate({trans:i,type:"delete",keys:m,criteria:o,isAdditionalChunk:0<n}).then((function(t){return A(m.length,t)}))})).then((function(){return e.length>n+s&&r(n+g)}))}))}var o=fe(n)&&n.limit===1/0&&("function"!=typeof t||t===Qe)&&{index:n.index,range:n.range};return r(0).then((function(){if(0<d.length)throw new j("Error modifying one or more objects",d,p,f);return e.length}))}))}))},be.prototype.delete=function(){var t=this._ctx,e=t.range;return fe(t)&&(t.isPrimKey||3===e.type)?this._write((function(n){var i=t.table.core.schema.primaryKey,r=e;return t.table.core.count({trans:n,query:{index:i,range:r}}).then((function(e){return t.table.core.mutate({trans:n,type:"deleteRange",range:r}).then((function(t){var n=t.failures;if(t.lastResult,t.results,t=t.numFailures)throw new j("Could not delete some values",Object.keys(n).map((function(t){return n[t]})),e-t);return e-t}))}))})):this.modify(Qe)},be);function be(){}var Qe=function(t,e){return e.value=null};function xe(t,e){return t<e?-1:t===e?0:1}function De(t,e){return e<t?-1:t===e?0:1}function Se(t,e,n){return(t=t instanceof Pe?new t.Collection(t):t)._ctx.error=new(n||TypeError)(e),t}function Me(t){return new t.Collection(t,(function(){return Ne("")})).limit(0)}function ke(t,e,n,i){var r,o,s,a,A,l,c,u=n.length;if(!n.every((function(t){return"string"==typeof t})))return Se(t,te);function h(t){r="next"===t?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()},o="next"===t?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()},s="next"===t?xe:De;var e=n.map((function(t){return{lower:o(t),upper:r(t)}})).sort((function(t,e){return s(t.lower,e.lower)}));a=e.map((function(t){return t.upper})),A=e.map((function(t){return t.lower})),c="next"===(l=t)?"":i}h("next"),(t=new t.Collection(t,(function(){return Re(a[0],A[u-1]+i)})))._ondirectionchange=function(t){h(t)};var g=0;return t._addAlgorithm((function(t,n,i){var r=t.key;if("string"!=typeof r)return!1;var h=o(r);if(e(h,A,g))return!0;for(var d=null,p=g;p<u;++p){var f=function(t,e,n,i,r,o){for(var s=Math.min(t.length,i.length),a=-1,A=0;A<s;++A){var l=e[A];if(l!==i[A])return r(t[A],n[A])<0?t.substr(0,A)+n[A]+n.substr(A+1):r(t[A],i[A])<0?t.substr(0,A)+i[A]+n.substr(A+1):0<=a?t.substr(0,a)+e[a]+n.substr(a+1):null;r(t[A],l)<0&&(a=A)}return s<i.length&&"next"===o?t+n.substr(t.length):s<t.length&&"prev"===o?t.substr(0,n.length):a<0?null:t.substr(0,a)+i[a]+n.substr(a+1)}(r,h,a[p],A[p],s,l);null===f&&null===d?g=p+1:(null===d||0<s(d,f))&&(d=f)}return n(null!==d?function(){t.continue(d+c)}:i),!1})),t}function Re(t,e,n,i){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:i}}function Ne(t){return{type:1,lower:t,upper:t}}var Pe=(Object.defineProperty(Te.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Te.prototype.between=function(t,e,n,i){n=!1!==n,i=!0===i;try{return 0<this._cmp(t,e)||0===this._cmp(t,e)&&(n||i)&&(!n||!i)?Me(this):new this.Collection(this,(function(){return Re(t,e,!n,!i)}))}catch(t){return Se(this,$t)}},Te.prototype.equals=function(t){return null==t?Se(this,$t):new this.Collection(this,(function(){return Ne(t)}))},Te.prototype.above=function(t){return null==t?Se(this,$t):new this.Collection(this,(function(){return Re(t,void 0,!0)}))},Te.prototype.aboveOrEqual=function(t){return null==t?Se(this,$t):new this.Collection(this,(function(){return Re(t,void 0,!1)}))},Te.prototype.below=function(t){return null==t?Se(this,$t):new this.Collection(this,(function(){return Re(void 0,t,!1,!0)}))},Te.prototype.belowOrEqual=function(t){return null==t?Se(this,$t):new this.Collection(this,(function(){return Re(void 0,t)}))},Te.prototype.startsWith=function(t){return"string"!=typeof t?Se(this,te):this.between(t,t+Xt,!0,!0)},Te.prototype.startsWithIgnoreCase=function(t){return""===t?this.startsWith(t):ke(this,(function(t,e){return 0===t.indexOf(e[0])}),[t],Xt)},Te.prototype.equalsIgnoreCase=function(t){return ke(this,(function(t,e){return t===e[0]}),[t],"")},Te.prototype.anyOfIgnoreCase=function(){var t=T.apply(P,arguments);return 0===t.length?Me(this):ke(this,(function(t,e){return-1!==e.indexOf(t)}),t,"")},Te.prototype.startsWithAnyOfIgnoreCase=function(){var t=T.apply(P,arguments);return 0===t.length?Me(this):ke(this,(function(t,e){return e.some((function(e){return 0===t.indexOf(e)}))}),t,Xt)},Te.prototype.anyOf=function(){var t=this,e=T.apply(P,arguments),n=this._cmp;try{e.sort(n)}catch(i){return Se(this,$t)}if(0===e.length)return Me(this);var i=new this.Collection(this,(function(){return Re(e[0],e[e.length-1])}));i._ondirectionchange=function(i){n="next"===i?t._ascending:t._descending,e.sort(n)};var r=0;return i._addAlgorithm((function(t,i,o){for(var s=t.key;0<n(s,e[r]);)if(++r===e.length)return i(o),!1;return 0===n(s,e[r])||(i((function(){t.continue(e[r])})),!1)})),i},Te.prototype.notEqual=function(t){return this.inAnyRange([[-1/0,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Te.prototype.noneOf=function(){var t=T.apply(P,arguments);if(0===t.length)return new this.Collection(this);try{t.sort(this._ascending)}catch(t){return Se(this,$t)}var e=t.reduce((function(t,e){return t?t.concat([[t[t.length-1][1],e]]):[[-1/0,e]]}),null);return e.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(e,{includeLowers:!1,includeUppers:!1})},Te.prototype.inAnyRange=function(t,e){var n=this,i=this._cmp,r=this._ascending,o=this._descending,s=this._min,a=this._max;if(0===t.length)return Me(this);if(!t.every((function(t){return void 0!==t[0]&&void 0!==t[1]&&r(t[0],t[1])<=0})))return Se(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",J.InvalidArgument);var A,l=!e||!1!==e.includeLowers,c=e&&!0===e.includeUppers,u=r;function h(t,e){return u(t[0],e[0])}try{(A=t.reduce((function(t,e){for(var n=0,r=t.length;n<r;++n){var o=t[n];if(i(e[0],o[1])<0&&0<i(e[1],o[0])){o[0]=s(o[0],e[0]),o[1]=a(o[1],e[1]);break}}return n===r&&t.push(e),t}),[])).sort(h)}catch(t){return Se(this,$t)}var g=0,d=c?function(t){return 0<r(t,A[g][1])}:function(t){return 0<=r(t,A[g][1])},p=l?function(t){return 0<o(t,A[g][0])}:function(t){return 0<=o(t,A[g][0])},f=d;return(t=new this.Collection(this,(function(){return Re(A[0][0],A[A.length-1][1],!l,!c)})))._ondirectionchange=function(t){u="next"===t?(f=d,r):(f=p,o),A.sort(h)},t._addAlgorithm((function(t,e,i){for(var o,s=t.key;f(s);)if(++g===A.length)return e(i),!1;return!d(o=s)&&!p(o)||(0===n._cmp(s,A[g][1])||0===n._cmp(s,A[g][0])||e((function(){u===r?t.continue(A[g][0]):t.continue(A[g][1])})),!1)})),t},Te.prototype.startsWithAnyOf=function(){var t=T.apply(P,arguments);return t.every((function(t){return"string"==typeof t}))?0===t.length?Me(this):this.inAnyRange(t.map((function(t){return[t,t+Xt]}))):Se(this,"startsWithAnyOf() only works with strings")},Te);function Te(){}function Le(t){return Nt((function(e){return Fe(e),t(e.target.error),!1}))}function Fe(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var Oe="storagemutated",Ge="x-storagemutated-1",Ue=de(null,Oe),je=(Ye.prototype._lock=function(){return y(!It.global),++this._reculock,1!==this._reculock||It.global||(It.lockOwnerFor=this),this},Ye.prototype._unlock=function(){if(y(!It.global),0==--this._reculock)for(It.global||(It.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var t=this._blockedFuncs.shift();try{Ht(t[1],t[0])}catch(t){}}return this},Ye.prototype._locked=function(){return this._reculock&&It.lockOwnerFor!==this},Ye.prototype.create=function(t){var e=this;if(!this.mode)return this;var n=this.db.idbdb,i=this.db._state.dbOpenError;if(y(!this.idbtrans),!t&&!n)switch(i&&i.name){case"DatabaseClosedError":throw new J.DatabaseClosed(i);case"MissingAPIError":throw new J.MissingAPI(i.message,i);default:throw new J.OpenFailed(i)}if(!this.active)throw new J.TransactionInactive;return y(null===this._completion._state),(t=this.idbtrans=t||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Nt((function(n){Fe(n),e._reject(t.error)})),t.onabort=Nt((function(n){Fe(n),e.active&&e._reject(new J.Abort(t.error)),e.active=!1,e.on("abort").fire(n)})),t.oncomplete=Nt((function(){e.active=!1,e._resolve(),"mutatedParts"in t&&Ue.storagemutated.fire(t.mutatedParts)})),this},Ye.prototype._promise=function(t,e,n){var i=this;if("readwrite"===t&&"readwrite"!==this.mode)return Zt(new J.ReadOnly("Transaction is readonly"));if(!this.active)return Zt(new J.TransactionInactive);if(this._locked())return new _t((function(r,o){i._blockedFuncs.push([function(){i._promise(t,e,n).then(r,o)},It])}));if(n)return Ut((function(){var t=new _t((function(t,n){i._lock();var r=e(t,n,i);r&&r.then&&r.then(t,n)}));return t.finally((function(){return i._unlock()})),t._lib=!0,t}));var r=new _t((function(t,n){var r=e(t,n,i);r&&r.then&&r.then(t,n)}));return r._lib=!0,r},Ye.prototype._root=function(){return this.parent?this.parent._root():this},Ye.prototype.waitFor=function(t){var e,n=this._root(),i=_t.resolve(t);n._waitingFor?n._waitingFor=n._waitingFor.then((function(){return i})):(n._waitingFor=i,n._waitingQueue=[],e=n.idbtrans.objectStore(n.storeNames[0]),function t(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(e.get(-1/0).onsuccess=t)}());var r=n._waitingFor;return new _t((function(t,e){i.then((function(e){return n._waitingQueue.push(Nt(t.bind(null,e)))}),(function(t){return n._waitingQueue.push(Nt(e.bind(null,t)))})).finally((function(){n._waitingFor===r&&(n._waitingFor=null)}))}))},Ye.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new J.Abort))},Ye.prototype.table=function(t){var e=this._memoizedTables||(this._memoizedTables={});if(c(e,t))return e[t];var n=this.schema[t];if(!n)throw new J.NotFound("Table "+t+" not part of transaction");return(n=new this.db.Table(t,n,this)).core=this.db.core.table(t),e[t]=n},Ye);function Ye(){}function Ke(t,e,n,i,r,o,s){return{name:t,keyPath:e,unique:n,multi:i,auto:r,compound:o,src:(n&&!s?"&":"")+(i?"*":"")+(r?"++":"")+ze(e)}}function ze(t){return"string"==typeof t?t:t?"["+[].join.call(t,"+")+"]":""}function Je(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:(i=function(t){return[t.name,t]},n.reduce((function(t,e,n){return(n=i(e,n))&&(t[n[0]]=n[1]),t}),{}))};var i}var qe=function(t){try{return t.only([[]]),qe=function(){return[[]]},[[]]}catch(t){return qe=function(){return Xt},Xt}};function He(t){return null==t?function(){}:"string"==typeof t?1===(e=t).split(".").length?function(t){return t[e]}:function(t){return E(t,e)}:function(e){return E(e,t)};var e}function Ve(t){return[].slice.call(t)}var We=0;function Ze(t){return null==t?":id":"string"==typeof t?t:"[".concat(t.join("+"),"]")}function Xe(t,e,n){function i(t){if(3===t.type)return null;if(4===t.type)throw new Error("Cannot convert never type to IDBKeyRange");var n=t.lower,i=t.upper,r=t.lowerOpen;return t=t.upperOpen,void 0===n?void 0===i?null:e.upperBound(i,!!t):void 0===i?e.lowerBound(n,!!r):e.bound(n,i,!!r,!!t)}function r(t){var e,n=t.name;return{name:n,schema:t,mutate:function(t){var e=t.trans,r=t.type,o=t.keys,s=t.values,a=t.range;return new Promise((function(t,A){t=Nt(t);var l=e.objectStore(n),c=null==l.keyPath,u="put"===r||"add"===r;if(!u&&"delete"!==r&&"deleteRange"!==r)throw new Error("Invalid operation type: "+r);var h,g=(o||s||{length:1}).length;if(o&&s&&o.length!==s.length)throw new Error("Given keys array must have same length as given values array.");if(0===g)return t({numFailures:0,failures:{},results:[],lastResult:void 0});function d(t){++m,Fe(t)}var p=[],f=[],m=0;if("deleteRange"===r){if(4===a.type)return t({numFailures:m,failures:f,results:[],lastResult:void 0});3===a.type?p.push(h=l.clear()):p.push(h=l.delete(i(a)))}else{var I=(c=u?c?[s,o]:[s,null]:[o,null])[0],y=c[1];if(u)for(var C=0;C<g;++C)p.push(h=y&&void 0!==y[C]?l[r](I[C],y[C]):l[r](I[C])),h.onerror=d;else for(C=0;C<g;++C)p.push(h=l[r](I[C])),h.onerror=d}function E(e){e=e.target.result,p.forEach((function(t,e){return null!=t.error&&(f[e]=t.error)})),t({numFailures:m,failures:f,results:"delete"===r?o:p.map((function(t){return t.result})),lastResult:e})}h.onerror=function(t){d(t),E(t)},h.onsuccess=E}))},getMany:function(t){var e=t.trans,i=t.keys;return new Promise((function(t,r){t=Nt(t);for(var o,s=e.objectStore(n),a=i.length,A=new Array(a),l=0,c=0,u=function(e){e=e.target,A[e._pos]=e.result,++c===l&&t(A)},h=Le(r),g=0;g<a;++g)null!=i[g]&&((o=s.get(i[g]))._pos=g,o.onsuccess=u,o.onerror=h,++l);0===l&&t(A)}))},get:function(t){var e=t.trans,i=t.key;return new Promise((function(t,r){t=Nt(t);var o=e.objectStore(n).get(i);o.onsuccess=function(e){return t(e.target.result)},o.onerror=Le(r)}))},query:(e=c,function(t){return new Promise((function(r,o){r=Nt(r);var s,a,A,l=t.trans,c=t.values,u=t.limit,h=t.query,g=u===1/0?void 0:u,d=h.index;if(h=h.range,l=l.objectStore(n),d=d.isPrimaryKey?l:l.index(d.name),h=i(h),0===u)return r({result:[]});e?((g=c?d.getAll(h,g):d.getAllKeys(h,g)).onsuccess=function(t){return r({result:t.target.result})},g.onerror=Le(o)):(s=0,a=!c&&"openKeyCursor"in d?d.openKeyCursor(h):d.openCursor(h),A=[],a.onsuccess=function(t){var e=a.result;return e?(A.push(c?e.value:e.primaryKey),++s===u?r({result:A}):void e.continue()):r({result:A})},a.onerror=Le(o))}))}),openCursor:function(t){var e=t.trans,r=t.values,o=t.query,s=t.reverse,a=t.unique;return new Promise((function(t,A){t=Nt(t);var l=o.index,c=o.range,u=e.objectStore(n),h=(u=l.isPrimaryKey?u:u.index(l.name),l=s?a?"prevunique":"prev":a?"nextunique":"next",!r&&"openKeyCursor"in u?u.openKeyCursor(i(c),l):u.openCursor(i(c),l));h.onerror=Le(A),h.onsuccess=Nt((function(n){var i,r,o,s,a=h.result;a?(a.___id=++We,a.done=!1,i=a.continue.bind(a),r=(r=a.continuePrimaryKey)&&r.bind(a),o=a.advance.bind(a),s=function(){throw new Error("Cursor not stopped")},a.trans=e,a.stop=a.continue=a.continuePrimaryKey=a.advance=function(){throw new Error("Cursor not started")},a.fail=Nt(A),a.next=function(){var t=this,e=1;return this.start((function(){return e--?t.continue():t.stop()})).then((function(){return t}))},a.start=function(t){function e(){if(h.result)try{t()}catch(t){a.fail(t)}else a.done=!0,a.start=function(){throw new Error("Cursor behind last entry")},a.stop()}var n=new Promise((function(t,e){t=Nt(t),h.onerror=Le(e),a.fail=e,a.stop=function(e){a.stop=a.continue=a.continuePrimaryKey=a.advance=s,t(e)}}));return h.onsuccess=Nt((function(t){h.onsuccess=e,e()})),a.continue=i,a.continuePrimaryKey=r,a.advance=o,e(),n},t(a)):t(null)}),A)}))},count:function(t){var e=t.query,r=t.trans,o=e.index,s=e.range;return new Promise((function(t,e){var a=r.objectStore(n),A=o.isPrimaryKey?a:a.index(o.name);(A=(a=i(s))?A.count(a):A.count()).onsuccess=Nt((function(e){return t(e.target.result)})),A.onerror=Le(e)}))}}}var o,a,A,l=(a=n,A=Ve((o=t).objectStoreNames),{schema:{name:o.name,tables:A.map((function(t){return a.objectStore(t)})).map((function(t){var e=t.keyPath,n=t.autoIncrement,i=s(e),r={};return n={name:t.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==e,compound:i,keyPath:e,autoIncrement:n,unique:!0,extractKey:He(e)},indexes:Ve(t.indexNames).map((function(e){return t.index(e)})).map((function(t){var e=t.name,n=t.unique,i=t.multiEntry;return t=t.keyPath,i={name:e,compound:s(t),keyPath:t,unique:n,multiEntry:i,extractKey:He(t)},r[Ze(t)]=i})),getIndexByKeyPath:function(t){return r[Ze(t)]}},r[":id"]=n.primaryKey,null!=e&&(r[Ze(e)]=n.primaryKey),n}))},hasGetAll:0<A.length&&"getAll"in a.objectStore(A[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),c=(n=l.schema,l.hasGetAll),u=(l=n.tables.map(r),{});return l.forEach((function(t){return u[t.name]=t})),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(t){if(!u[t])throw new Error("Table '".concat(t,"' not found"));return u[t]},MIN_KEY:-1/0,MAX_KEY:qe(e),schema:n}}function $e(t,n,i,r){var o=i.IDBKeyRange;return i.indexedDB,{dbcore:(r=Xe(n,o,r),t.dbcore.reduce((function(t,n){return n=n.create,e(e({},t),n(t))}),r))}}function tn(t,e){var n=e.db;e=$e(t._middlewares,n,t._deps,e),t.core=e.dbcore,t.tables.forEach((function(e){var n=e.name;t.core.schema.tables.some((function(t){return t.name===n}))&&(e.core=t.core.table(n),t[n]instanceof t.Table&&(t[n].core=e.core))}))}function en(t,e,n,i){n.forEach((function(n){var r=i[n];e.forEach((function(e){var i=function t(e,n){return p(e,n)||(e=A(e))&&t(e,n)}(e,n);(!i||"value"in i&&void 0===i.value)&&(e===t.Transaction.prototype||e instanceof t.Transaction?g(e,n,{get:function(){return this.table(n)},set:function(t){h(this,n,{value:t,writable:!0,configurable:!0,enumerable:!0})}}):e[n]=new t.Table(n,r))}))}))}function nn(t,e){e.forEach((function(e){for(var n in e)e[n]instanceof t.Table&&delete e[n]}))}function rn(t,e){return t._cfg.version-e._cfg.version}function on(t,e,n,i){var r=t._dbSchema;n.objectStoreNames.contains("$meta")&&!r.$meta&&(r.$meta=Je("$meta",gn("")[0],[]),t._storeNames.push("$meta"));var s=t._createTransaction("readwrite",t._storeNames,r);s.create(n),s._completion.catch(i);var a=s._reject.bind(s),A=It.transless||It;Ut((function(){return It.trans=s,It.transless=A,0!==e?(tn(t,n),l=e,((i=s).storeNames.includes("$meta")?i.table("$meta").get("version").then((function(t){return null!=t?t:l})):_t.resolve(l)).then((function(e){return r=e,a=s,A=n,l=[],e=(i=t)._versions,c=i._dbSchema=un(0,i.idbdb,A),0!==(e=e.filter((function(t){return t._cfg.version>=r}))).length?(e.forEach((function(t){l.push((function(){var e=c,n=t._cfg.dbschema;hn(i,e,A),hn(i,n,A),c=i._dbSchema=n;var s=an(e,n);s.add.forEach((function(t){An(A,t[0],t[1].primKey,t[1].indexes)})),s.change.forEach((function(t){if(t.recreate)throw new J.Upgrade("Not yet support for changing primary key");var e=A.objectStore(t.name);t.add.forEach((function(t){return cn(e,t)})),t.change.forEach((function(t){e.deleteIndex(t.name),cn(e,t)})),t.del.forEach((function(t){return e.deleteIndex(t)}))}));var l=t._cfg.contentUpgrade;if(l&&t._cfg.version>r){tn(i,A),a._memoizedTables={};var u=v(n);s.del.forEach((function(t){u[t]=e[t]})),nn(i,[i.Transaction.prototype]),en(i,[i.Transaction.prototype],o(u),u),a.schema=u;var h,g=L(l);return g&&jt(),s=_t.follow((function(){var t;(h=l(a))&&g&&(t=Yt.bind(null,null),h.then(t,t))})),h&&"function"==typeof h.then?_t.resolve(h):s.then((function(){return h}))}})),l.push((function(e){var n,r,o=t._cfg.dbschema;n=o,r=e,[].slice.call(r.db.objectStoreNames).forEach((function(t){return null==n[t]&&r.db.deleteObjectStore(t)})),nn(i,[i.Transaction.prototype]),en(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),a.schema=i._dbSchema})),l.push((function(e){i.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(i.idbdb.version/10)===t._cfg.version?(i.idbdb.deleteObjectStore("$meta"),delete i._dbSchema.$meta,i._storeNames=i._storeNames.filter((function(t){return"$meta"!==t}))):e.objectStore("$meta").put(t._cfg.version,"version"))}))})),function t(){return l.length?_t.resolve(l.shift()(a.idbtrans)).then(t):_t.resolve()}().then((function(){ln(c,A)}))):_t.resolve();var i,r,a,A,l,c})).catch(a)):(o(r).forEach((function(t){An(n,t,r[t].primKey,r[t].indexes)})),tn(t,n),void _t.follow((function(){return t.on.populate.fire(s)})).catch(a));var i,l}))}function sn(t,e){ln(t._dbSchema,e),e.db.version%10!=0||e.objectStoreNames.contains("$meta")||e.db.createObjectStore("$meta").add(Math.ceil(e.db.version/10-1),"version");var n=un(0,t.idbdb,e);hn(t,t._dbSchema,e);for(var i=0,r=an(n,t._dbSchema).change;i<r.length;i++){var o=function(t){if(t.change.length||t.recreate)return console.warn("Unable to patch indexes of table ".concat(t.name," because it has changes on the type of index or primary key.")),{value:void 0};var n=e.objectStore(t.name);t.add.forEach((function(e){rt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(t.name,".").concat(e.src)),cn(n,e)}))}(r[i]);if("object"==typeof o)return o.value}}function an(t,e){var n,i={del:[],add:[],change:[]};for(n in t)e[n]||i.del.push(n);for(n in e){var r=t[n],o=e[n];if(r){var s={name:n,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(r.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||r.primKey.auto!==o.primKey.auto)s.recreate=!0,i.change.push(s);else{var a=r.idxByName,A=o.idxByName,l=void 0;for(l in a)A[l]||s.del.push(l);for(l in A){var c=a[l],u=A[l];c?c.src!==u.src&&s.change.push(u):s.add.push(u)}(0<s.del.length||0<s.add.length||0<s.change.length)&&i.change.push(s)}}else i.add.push([n,o])}return i}function An(t,e,n,i){var r=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return i.forEach((function(t){return cn(r,t)})),r}function ln(t,e){o(t).forEach((function(n){e.db.objectStoreNames.contains(n)||(rt&&console.debug("Dexie: Creating missing table",n),An(e,n,t[n].primKey,t[n].indexes))}))}function cn(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function un(t,e,n){var i={};return m(e.objectStoreNames,0).forEach((function(t){for(var e=n.objectStore(t),r=Ke(ze(a=e.keyPath),a||"",!0,!1,!!e.autoIncrement,a&&"string"!=typeof a,!0),o=[],s=0;s<e.indexNames.length;++s){var a=(A=e.index(e.indexNames[s])).keyPath,A=Ke(A.name,a,!!A.unique,!!A.multiEntry,!1,a&&"string"!=typeof a,!1);o.push(A)}i[t]=Je(t,r,o)})),i}function hn(t,e,n){for(var i=n.db.objectStoreNames,o=0;o<i.length;++o){var s=i[o],a=n.objectStore(s);t._hasGetAll="getAll"in a;for(var A=0;A<a.indexNames.length;++A){var l=a.indexNames[A],c=a.index(l).keyPath,u="string"==typeof c?c:"["+m(c).join("+")+"]";!e[s]||(c=e[s].idxByName[u])&&(c.name=l,delete e[s].idxByName[u],e[s].idxByName[l]=c)}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&r.WorkerGlobalScope&&r instanceof r.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function gn(t){return t.split(",").map((function(t,e){var n=(t=t.trim()).replace(/([&*]|\+\+)/g,""),i=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return Ke(n,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),s(i),0===e)}))}var dn=(pn.prototype._parseStoresSpec=function(t,e){o(t).forEach((function(n){if(null!==t[n]){var i=gn(t[n]),r=i.shift();if(r.unique=!0,r.multi)throw new J.Schema("Primary key cannot be multi-valued");i.forEach((function(t){if(t.auto)throw new J.Schema("Only primary key can be marked as autoIncrement (++)");if(!t.keyPath)throw new J.Schema("Index must have a name and cannot be an empty string")})),e[n]=Je(n,r,i)}}))},pn.prototype.stores=function(t){var e=this.db;this._cfg.storesSource=this._cfg.storesSource?a(this._cfg.storesSource,t):t,t=e._versions;var n={},i={};return t.forEach((function(t){a(n,t._cfg.storesSource),i=t._cfg.dbschema={},t._parseStoresSpec(n,i)})),e._dbSchema=i,nn(e,[e._allTables,e,e.Transaction.prototype]),en(e,[e._allTables,e,e.Transaction.prototype,this._cfg.tables],o(i),i),e._storeNames=o(i),this},pn.prototype.upgrade=function(t){return this._cfg.contentUpgrade=it(this._cfg.contentUpgrade||V,t),this},pn);function pn(){}function fn(t,e){var n=t._dbNamesDB;return n||(n=t._dbNamesDB=new ei(ne,{addons:[],indexedDB:t,IDBKeyRange:e})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function mn(t){return t&&"function"==typeof t.databases}function In(t){return Ut((function(){return It.letThrough=!0,t()}))}function yn(t){return!("from"in t)}var Cn=function(t,e){if(!this){var n=new Cn;return t&&"d"in t&&a(n,t),n}a(this,arguments.length?{d:1,from:t,to:1<arguments.length?e:t}:{d:0})};function En(t,e,n){var i=le(e,n);if(!isNaN(i)){if(0<i)throw RangeError();if(yn(t))return a(t,{from:e,to:n,d:1});var r=t.l;if(i=t.r,le(n,t.from)<0)return r?En(r,e,n):t.l={from:e,to:n,d:1,l:null,r:null},wn(t);if(0<le(e,t.to))return i?En(i,e,n):t.r={from:e,to:n,d:1,l:null,r:null},wn(t);le(e,t.from)<0&&(t.from=e,t.l=null,t.d=i?i.d+1:1),0<le(n,t.to)&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1),n=!t.r,r&&!t.l&&_n(t,r),i&&n&&_n(t,i)}}function _n(t,e){yn(e)||function t(e,n){var i=n.from,r=n.to,o=n.l;n=n.r,En(e,i,r),o&&t(e,o),n&&t(e,n)}(t,e)}function vn(t,e){var n=Bn(e),i=n.next();if(i.done)return!1;for(var r=i.value,o=Bn(t),s=o.next(r.from),a=s.value;!i.done&&!s.done;){if(le(a.from,r.to)<=0&&0<=le(a.to,r.from))return!0;le(r.from,a.from)<0?r=(i=n.next(a.from)).value:a=(s=o.next(r.from)).value}return!1}function Bn(t){var e=yn(t)?null:{s:0,n:t};return{next:function(t){for(var n=0<arguments.length;e;)switch(e.s){case 0:if(e.s=1,n)for(;e.n.l&&le(t,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!n||le(t,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function wn(t){var n,i,r=((null===(n=t.r)||void 0===n?void 0:n.d)||0)-((null===(i=t.l)||void 0===i?void 0:i.d)||0),o=1<r?"r":r<-1?"l":"";o&&(n="r"==o?"l":"r",i=e({},t),r=t[o],t.from=r.from,t.to=r.to,t[o]=r[o],i[o]=r[n],(t[n]=i).d=bn(i)),t.d=bn(t)}function bn(t){var e=t.r;return t=t.l,(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}function Qn(t,e){return o(e).forEach((function(n){t[n]?_n(t[n],e[n]):t[n]=function t(e){var n,i,r={};for(n in e)c(e,n)&&(i=e[n],r[n]=!i||"object"!=typeof i||Q.has(i.constructor)?i:t(i));return r}(e[n])})),t}function xn(t,e){return t.all||e.all||Object.keys(t).some((function(n){return e[n]&&vn(e[n],t[n])}))}u(Cn.prototype,((F={add:function(t){return _n(this,t),this},addKey:function(t){return En(this,t,t),this},addKeys:function(t){var e=this;return t.forEach((function(t){return En(e,t,t)})),this},hasKey:function(t){var e=Bn(this).next(t).value;return e&&le(e.from,t)<=0&&0<=le(e.to,t)}})[k]=function(){return Bn(this)},F));var Dn={},Sn={},Mn=!1;function kn(t){Qn(Sn,t),Mn||(Mn=!0,setTimeout((function(){Mn=!1,Rn(Sn,!(Sn={}))}),0))}function Rn(t,e){void 0===e&&(e=!1);var n=new Set;if(t.all)for(var i=0,r=Object.values(Dn);i<r.length;i++)Nn(s=r[i],t,n,e);else for(var o in t){var s,a=/^idb\:\/\/(.*)\/(.*)\//.exec(o);a&&(o=a[1],a=a[2],(s=Dn["idb://".concat(o,"/").concat(a)])&&Nn(s,t,n,e))}n.forEach((function(t){return t()}))}function Nn(t,e,n,i){for(var r=[],o=0,s=Object.entries(t.queries.query);o<s.length;o++){for(var a=s[o],A=a[0],l=[],c=0,u=a[1];c<u.length;c++){var h=u[c];xn(e,h.obsSet)?h.subscribers.forEach((function(t){return n.add(t)})):i&&l.push(h)}i&&r.push([A,l])}if(i)for(var g=0,d=r;g<d.length;g++){var p=d[g];A=p[0],l=p[1],t.queries.query[A]=l}}function Pn(t){var e=t._state,n=t._deps.indexedDB;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then((function(){return e.dbOpenError?Zt(e.dbOpenError):t}));e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;var i=e.openCanceller,r=Math.round(10*t.verno),s=!1;function a(){if(e.openCanceller!==i)throw new J.DatabaseClosed("db.open() was cancelled")}function A(){return new _t((function(i,l){if(a(),!n)throw new J.MissingAPI;var c=t.name,g=e.autoSchema||!r?n.open(c):n.open(c,r);if(!g)throw new J.MissingAPI;g.onerror=Le(l),g.onblocked=Nt(t._fireOnBlocked),g.onupgradeneeded=Nt((function(i){var r;u=g.transaction,e.autoSchema&&!t._options.allowEmptyDB?(g.onerror=Fe,u.abort(),g.result.close(),(r=n.deleteDatabase(c)).onsuccess=r.onerror=Nt((function(){l(new J.NoSuchDatabase("Database ".concat(c," doesnt exist")))}))):(u.onerror=Le(l),i=i.oldVersion>Math.pow(2,62)?0:i.oldVersion,h=i<1,t.idbdb=g.result,s&&sn(t,u),on(t,i/10,u,l))}),l),g.onsuccess=Nt((function(){u=null;var n,a,l,d,p,f=t.idbdb=g.result,I=m(f.objectStoreNames);if(0<I.length)try{var y=f.transaction(1===(d=I).length?d[0]:d,"readonly");if(e.autoSchema)a=f,l=y,(n=t).verno=a.version/10,l=n._dbSchema=un(0,a,l),n._storeNames=m(a.objectStoreNames,0),en(n,[n._allTables],o(l),l);else if(hn(t,t._dbSchema,y),((p=an(un(0,(p=t).idbdb,y),p._dbSchema)).add.length||p.change.some((function(t){return t.add.length||t.change.length})))&&!s)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),f.close(),r=f.version+1,s=!0,i(A());tn(t,y)}catch(n){}ee.push(t),f.onversionchange=Nt((function(n){e.vcFired=!0,t.on("versionchange").fire(n)})),f.onclose=Nt((function(e){t.on("close").fire(e)})),h&&(p=t._deps,y=c,f=p.indexedDB,p=p.IDBKeyRange,mn(f)||y===ne||fn(f,p).put({name:y}).catch(V)),i()}),l)})).catch((function(t){switch(null==t?void 0:t.name){case"UnknownError":if(0<e.PR1398_maxLoop)return e.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),A();break;case"VersionError":if(0<r)return r=0,A()}return _t.reject(t)}))}var l,c=e.dbReadyResolve,u=null,h=!1;return _t.race([i,("undefined"==typeof navigator?_t.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(t){function e(){return indexedDB.databases().finally(t)}l=setInterval(e,100),e()})).finally((function(){return clearInterval(l)})):Promise.resolve()).then(A)]).then((function(){return a(),e.onReadyBeingFired=[],_t.resolve(In((function(){return t.on.ready.fire(t.vip)}))).then((function n(){if(0<e.onReadyBeingFired.length){var i=e.onReadyBeingFired.reduce(it,V);return e.onReadyBeingFired=[],_t.resolve(In((function(){return i(t.vip)}))).then(n)}}))})).finally((function(){e.openCanceller===i&&(e.onReadyBeingFired=null,e.isBeingOpened=!1)})).catch((function(n){e.dbOpenError=n;try{u&&u.abort()}catch(n){}return i===e.openCanceller&&t._close(),Zt(n)})).finally((function(){e.openComplete=!0,c()})).then((function(){var e;return h&&(e={},t.tables.forEach((function(n){n.schema.indexes.forEach((function(i){i.name&&(e["idb://".concat(t.name,"/").concat(n.name,"/").concat(i.name)]=new Cn(-1/0,[[[]]]))})),e["idb://".concat(t.name,"/").concat(n.name,"/")]=e["idb://".concat(t.name,"/").concat(n.name,"/:dels")]=new Cn(-1/0,[[[]]])})),Ue(Oe).fire(e),Rn(e,!0)),t}))}function Tn(t){function e(e){return t.next(e)}var n=r(e),i=r((function(e){return t.throw(e)}));function r(t){return function(e){var r=t(e);return e=r.value,r.done?e:e&&"function"==typeof e.then?e.then(n,i):s(e)?Promise.all(e).then(n,i):n(e)}}return r(e)()}function Ln(t,e,n){for(var i=s(t)?t.slice():[t],r=0;r<n;++r)i.push(e);return i}var Fn={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return e(e({},t),{table:function(n){var i=t.table(n),r=i.schema,o={},s=[];function a(t,n,i){var r=Ze(t),A=o[r]=o[r]||[],l=null==t?0:"string"==typeof t?1:t.length,c=0<n;return c=e(e({},i),{name:c?"".concat(r,"(virtual-from:").concat(i.name,")"):i.name,lowLevelIndex:i,isVirtual:c,keyTail:n,keyLength:l,extractKey:He(t),unique:!c&&i.unique}),A.push(c),c.isPrimaryKey||s.push(c),1<l&&a(2===l?t[0]:t.slice(0,l-1),n+1,i),A.sort((function(t,e){return t.keyTail-e.keyTail})),c}n=a(r.primaryKey.keyPath,0,r.primaryKey),o[":id"]=[n];for(var A=0,l=r.indexes;A<l.length;A++){var c=l[A];a(c.keyPath,0,c)}function u(n){var i,r=n.query.index;return r.isVirtual?e(e({},n),{query:{index:r.lowLevelIndex,range:(i=n.query.range,r=r.keyTail,{type:1===i.type?2:i.type,lower:Ln(i.lower,i.lowerOpen?t.MAX_KEY:t.MIN_KEY,r),lowerOpen:!0,upper:Ln(i.upper,i.upperOpen?t.MIN_KEY:t.MAX_KEY,r),upperOpen:!0})}}):n}return e(e({},i),{schema:e(e({},r),{primaryKey:n,indexes:s,getIndexByKeyPath:function(t){return(t=o[Ze(t)])&&t[0]}}),count:function(t){return i.count(u(t))},query:function(t){return i.query(u(t))},openCursor:function(e){var n=e.query.index,r=n.keyTail,o=n.isVirtual,s=n.keyLength;return o?i.openCursor(u(e)).then((function(t){return t&&a(t)})):i.openCursor(e);function a(n){return Object.create(n,{continue:{value:function(i){null!=i?n.continue(Ln(i,e.reverse?t.MAX_KEY:t.MIN_KEY,r)):e.unique?n.continue(n.key.slice(0,s).concat(e.reverse?t.MIN_KEY:t.MAX_KEY,r)):n.continue()}},continuePrimaryKey:{value:function(e,i){n.continuePrimaryKey(Ln(e,t.MAX_KEY,r),i)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var t=n.key;return 1===s?t[0]:t.slice(0,s)}},value:{get:function(){return n.value}}})}}})}})}};function On(t,e,n,i){return n=n||{},i=i||"",o(t).forEach((function(r){var o,s,a;c(e,r)?(o=t[r],s=e[r],"object"==typeof o&&"object"==typeof s&&o&&s?(a=M(o))!==M(s)?n[i+r]=e[r]:"Object"===a?On(o,s,n,i+r+"."):o!==s&&(n[i+r]=e[r]):o!==s&&(n[i+r]=e[r])):n[i+r]=void 0})),o(e).forEach((function(r){c(t,r)||(n[i+r]=e[r])})),n}function Gn(t,e){return"delete"===e.type?e.keys:e.keys||e.values.map(t.extractKey)}var Un={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return e(e({},t),{table:function(n){var r=t.table(n),o=r.schema.primaryKey;return e(e({},r),{mutate:function(t){var s=It.trans,a=s.table(n).hook,A=a.deleting,l=a.creating,u=a.updating;switch(t.type){case"add":if(l.fire===V)break;return s._promise("readwrite",(function(){return h(t)}),!0);case"put":if(l.fire===V&&u.fire===V)break;return s._promise("readwrite",(function(){return h(t)}),!0);case"delete":if(A.fire===V)break;return s._promise("readwrite",(function(){return h(t)}),!0);case"deleteRange":if(A.fire===V)break;return s._promise("readwrite",(function(){return function t(n,i,s){return r.query({trans:n,values:!1,query:{index:o,range:i},limit:s}).then((function(r){var o=r.result;return h({type:"delete",keys:o,trans:n}).then((function(r){return 0<r.numFailures?Promise.reject(r.failures[0]):o.length<s?{failures:[],numFailures:0,lastResult:void 0}:t(n,e(e({},i),{lower:o[o.length-1],lowerOpen:!0}),s)}))}))}(t.trans,t.range,1e4)}),!0)}return r.mutate(t);function h(t){var n,s,a,h=It.trans,g=t.keys||Gn(o,t);if(!g)throw new Error("Keys missing");return"delete"!==(t="add"===t.type||"put"===t.type?e(e({},t),{keys:g}):e({},t)).type&&(t.values=i([],t.values,!0)),t.keys&&(t.keys=i([],t.keys,!0)),n=r,a=g,("add"===(s=t).type?Promise.resolve([]):n.getMany({trans:s.trans,keys:a,cache:"immutable"})).then((function(e){var n=g.map((function(n,i){var r,s,a,g=e[i],d={onerror:null,onsuccess:null};return"delete"===t.type?A.fire.call(d,n,g,h):"add"===t.type||void 0===g?(r=l.fire.call(d,n,t.values[i],h),null==n&&null!=r&&(t.keys[i]=n=r,o.outbound||_(t.values[i],o.keyPath,n))):(r=On(g,t.values[i]),(s=u.fire.call(d,r,n,g,h))&&(a=t.values[i],Object.keys(s).forEach((function(t){c(a,t)?a[t]=s[t]:_(a,t,s[t])})))),d}));return r.mutate(t).then((function(i){for(var r=i.failures,o=i.results,s=i.numFailures,a=(i=i.lastResult,0);a<g.length;++a){var A=(o||g)[a],l=n[a];null==A?l.onerror&&l.onerror(r[a]):l.onsuccess&&l.onsuccess("put"===t.type&&e[a]?t.values[a]:A)}return{failures:r,results:o,numFailures:s,lastResult:i}})).catch((function(t){return n.forEach((function(e){return e.onerror&&e.onerror(t)})),Promise.reject(t)}))}))}}})}})}};function jn(t,e,n){try{if(!e)return null;if(e.keys.length<t.length)return null;for(var i=[],r=0,o=0;r<e.keys.length&&o<t.length;++r)0===le(e.keys[r],t[o])&&(i.push(n?D(e.values[r]):e.values[r]),++o);return i.length===t.length?i:null}catch(t){return null}}var Yn={stack:"dbcore",level:-1,create:function(t){return{table:function(n){var i=t.table(n);return e(e({},i),{getMany:function(t){if(!t.cache)return i.getMany(t);var e=jn(t.keys,t.trans._cache,"clone"===t.cache);return e?_t.resolve(e):i.getMany(t).then((function(e){return t.trans._cache={keys:t.keys,values:"clone"===t.cache?D(e):e},e}))},mutate:function(t){return"add"!==t.type&&(t.trans._cache=null),i.mutate(t)}})}}}};function Kn(t,e){return"readonly"===t.trans.mode&&!!t.subscr&&!t.trans.explicit&&"disabled"!==t.trans.db._options.cache&&!e.schema.primaryKey.outbound}function zn(t,e){switch(t){case"query":return e.values&&!e.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Jn={stack:"dbcore",level:0,name:"Observability",create:function(t){var n=t.schema.name,i=new Cn(t.MIN_KEY,t.MAX_KEY);return e(e({},t),{transaction:function(e,n,i){if(It.subscr&&"readonly"!==n)throw new J.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(It.querier));return t.transaction(e,n,i)},table:function(r){var a=t.table(r),A=a.schema,l=A.primaryKey,c=A.indexes,u=l.extractKey,h=l.outbound,g=l.autoIncrement&&c.filter((function(t){return t.compound&&t.keyPath.includes(l.keyPath)})),d=e(e({},a),{mutate:function(t){function e(t){return t="idb://".concat(n,"/").concat(r,"/").concat(t),d[t]||(d[t]=new Cn)}var o,c,u,h=t.trans,d=t.mutatedParts||(t.mutatedParts={}),p=e(""),f=e(":dels"),m=t.type,I="deleteRange"===t.type?[t.range]:"delete"===t.type?[t.keys]:t.values.length<50?[Gn(l,t).filter((function(t){return t})),t.values]:[],y=I[0],C=I[1];return I=t.trans._cache,s(y)?(p.addKeys(y),(I="delete"===m||y.length===C.length?jn(y,I):null)||f.addKeys(y),(I||C)&&(o=e,c=I,u=C,A.indexes.forEach((function(t){var e=o(t.name||"");function n(e){return null!=e?t.extractKey(e):null}function i(n){return t.multiEntry&&s(n)?n.forEach((function(t){return e.addKey(t)})):e.addKey(n)}(c||u).forEach((function(t,e){var r=c&&n(c[e]);0!==le(r,e=u&&n(u[e]))&&(null!=r&&i(r),null!=e&&i(e))}))})))):y?(C={from:y.lower,to:y.upper},f.add(C),p.add(C)):(p.add(i),f.add(i),A.indexes.forEach((function(t){return e(t.name).add(i)}))),a.mutate(t).then((function(n){return!y||"add"!==t.type&&"put"!==t.type||(p.addKeys(n.results),g&&g.forEach((function(i){var r=t.values.map((function(t){return i.extractKey(t)})),o=i.keyPath.findIndex((function(t){return t===l.keyPath}));n.results.forEach((function(t){return r[o]=t})),e(i.name).addKeys(r)}))),h.mutatedParts=Qn(h.mutatedParts||{},d),n}))}}),p=(c=function(e){e=(n=e.query).index;var n=n.range;return[e,new Cn(null!==(e=n.lower)&&void 0!==e?e:t.MIN_KEY,null!==(n=n.upper)&&void 0!==n?n:t.MAX_KEY)]},{get:function(t){return[l,new Cn(t.key)]},getMany:function(t){return[l,(new Cn).addKeys(t.keys)]},count:c,query:c,openCursor:c});return o(p).forEach((function(t){d[t]=function(o){var s=!!(d=It.subscr),A=Kn(It,a)&&zn(t,o)?o.obsSet={}:d;if(s){var l=function(t){return t="idb://".concat(n,"/").concat(r,"/").concat(t),A[t]||(A[t]=new Cn)},c=l(""),g=l(":dels"),d=(s=(d=p[t](o))[0],d[1]);if(("query"===t&&s.isPrimaryKey&&!o.values?g:l(s.name||"")).add(d),!s.isPrimaryKey){if("count"!==t){var f="query"===t&&h&&o.values&&a.query(e(e({},o),{values:!1}));return a[t].apply(this,arguments).then((function(e){if("query"===t){if(h&&o.values)return f.then((function(t){return t=t.result,c.addKeys(t),e}));var n=o.values?e.result.map(u):e.result;(o.values?c:g).addKeys(n)}else if("openCursor"===t){var i=e,r=o.values;return i&&Object.create(i,{key:{get:function(){return g.addKey(i.primaryKey),i.key}},primaryKey:{get:function(){var t=i.primaryKey;return g.addKey(t),t}},value:{get:function(){return r&&c.addKey(i.primaryKey),i.value}}})}return e}))}g.add(i)}}return a[t].apply(this,arguments)}})),d}})}};function qn(t,n,i){if(0===i.numFailures)return n;if("deleteRange"===n.type)return null;var r=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;return i.numFailures===r?null:(n=e({},n),s(n.keys)&&(n.keys=n.keys.filter((function(t,e){return!(e in i.failures)}))),"values"in n&&s(n.values)&&(n.values=n.values.filter((function(t,e){return!(e in i.failures)}))),n)}function Hn(t,e){return n=t,(void 0===(i=e).lower||(i.lowerOpen?0<le(n,i.lower):0<=le(n,i.lower)))&&(void 0===e.upper||(e.upperOpen?le(t,e.upper)<0:le(t,e.upper)<=0));var n,i}function Vn(t,e,n,i,r,o){if(!n||0===n.length)return t;var a=e.query.index,A=a.multiEntry,l=e.query.range,c=i.schema.primaryKey.extractKey,u=a.extractKey,h=(a.lowLevelIndex||a).extractKey;return n=n.reduce((function(t,n){var i=t,r=[];if("add"===n.type||"put"===n.type)for(var o=new Cn,a=n.values.length-1;0<=a;--a){var h,g=n.values[a],d=c(g);o.hasKey(d)||(h=u(g),(A&&s(h)?h.some((function(t){return Hn(t,l)})):Hn(h,l))&&(o.addKey(d),r.push(g)))}switch(n.type){case"add":i=t.concat(e.values?r:r.map((function(t){return c(t)})));break;case"put":var p=(new Cn).addKeys(n.values.map((function(t){return c(t)})));i=t.filter((function(t){return!p.hasKey(e.values?c(t):t)})).concat(e.values?r:r.map((function(t){return c(t)})));break;case"delete":var f=(new Cn).addKeys(n.keys);i=t.filter((function(t){return!f.hasKey(e.values?c(t):t)}));break;case"deleteRange":var m=n.range;i=t.filter((function(t){return!Hn(c(t),m)}))}return i}),t),n===t?t:(n.sort((function(t,e){return le(h(t),h(e))||le(c(t),c(e))})),e.limit&&e.limit<1/0&&(n.length>e.limit?n.length=e.limit:t.length===e.limit&&n.length<e.limit&&(r.dirty=!0)),o?Object.freeze(n):n)}function Wn(t,e){return 0===le(t.lower,e.lower)&&0===le(t.upper,e.upper)&&!!t.lowerOpen==!!e.lowerOpen&&!!t.upperOpen==!!e.upperOpen}function Zn(t,e){return function(t,e,n,i){if(void 0===t)return void 0!==e?-1:0;if(void 0===e)return 1;if(0===(e=le(t,e))){if(n&&i)return 0;if(n)return 1;if(i)return-1}return e}(t.lower,e.lower,t.lowerOpen,e.lowerOpen)<=0&&0<=function(t,e,n,i){if(void 0===t)return void 0!==e?1:0;if(void 0===e)return-1;if(0===(e=le(t,e))){if(n&&i)return 0;if(n)return-1;if(i)return 1}return e}(t.upper,e.upper,t.upperOpen,e.upperOpen)}function Xn(t,e,n,i){t.subscribers.add(n),i.addEventListener("abort",(function(){var i,r;t.subscribers.delete(n),0===t.subscribers.size&&(i=t,r=e,setTimeout((function(){0===i.subscribers.size&&N(r,i)}),3e3))}))}var $n={stack:"dbcore",level:0,name:"Cache",create:function(t){var n=t.schema.name;return e(e({},t),{transaction:function(e,i,r){var o,s,a=t.transaction(e,i,r);return"readwrite"===i&&(s=(o=new AbortController).signal,r=function(r){return function(){if(o.abort(),"readwrite"===i){for(var s=new Set,A=0,l=e;A<l.length;A++){var c=l[A],u=Dn["idb://".concat(n,"/").concat(c)];if(u){var h=t.table(c),g=u.optimisticOps.filter((function(t){return t.trans===a}));if(a._explicit&&r&&a.mutatedParts)for(var d=0,p=Object.values(u.queries.query);d<p.length;d++)for(var f=0,m=(C=p[d]).slice();f<m.length;f++)xn((E=m[f]).obsSet,a.mutatedParts)&&(N(C,E),E.subscribers.forEach((function(t){return s.add(t)})));else if(0<g.length){u.optimisticOps=u.optimisticOps.filter((function(t){return t.trans!==a}));for(var I=0,y=Object.values(u.queries.query);I<y.length;I++)for(var C,E,_,v=0,B=(C=y[I]).slice();v<B.length;v++)null!=(E=B[v]).res&&a.mutatedParts&&(r&&!E.dirty?(_=Object.isFrozen(E.res),_=Vn(E.res,E.req,g,h,E,_),E.dirty?(N(C,E),E.subscribers.forEach((function(t){return s.add(t)}))):_!==E.res&&(E.res=_,E.promise=_t.resolve({result:_}))):(E.dirty&&N(C,E),E.subscribers.forEach((function(t){return s.add(t)}))))}}}s.forEach((function(t){return t()}))}}},a.addEventListener("abort",r(!1),{signal:s}),a.addEventListener("error",r(!1),{signal:s}),a.addEventListener("complete",r(!0),{signal:s})),a},table:function(i){var r=t.table(i),o=r.schema.primaryKey;return e(e({},r),{mutate:function(t){var s=It.trans;if(o.outbound||"disabled"===s.db._options.cache||s.explicit)return r.mutate(t);var a=Dn["idb://".concat(n,"/").concat(i)];return a?(s=r.mutate(t),"add"!==t.type&&"put"!==t.type||!(50<=t.values.length||Gn(o,t).some((function(t){return null==t})))?(a.optimisticOps.push(t),t.mutatedParts&&kn(t.mutatedParts),s.then((function(e){0<e.numFailures&&(N(a.optimisticOps,t),(e=qn(0,t,e))&&a.optimisticOps.push(e),t.mutatedParts&&kn(t.mutatedParts))})),s.catch((function(){N(a.optimisticOps,t),t.mutatedParts&&kn(t.mutatedParts)}))):s.then((function(n){var i=qn(0,e(e({},t),{values:t.values.map((function(t,i){var r;return _(t=null!==(r=o.keyPath)&&void 0!==r&&r.includes(".")?D(t):e({},t),o.keyPath,n.results[i]),t}))}),n);a.optimisticOps.push(i),queueMicrotask((function(){return t.mutatedParts&&kn(t.mutatedParts)}))})),s):r.mutate(t)},query:function(t){if(!Kn(It,r)||!zn("query",t))return r.query(t);var e="immutable"===(null===(a=It.trans)||void 0===a?void 0:a.db._options.cache),o=(l=It).requery,s=l.signal,a=function(t,e,n,i){var r=Dn["idb://".concat(t,"/").concat(e)];if(!r)return[];if(!(e=r.queries[n]))return[null,!1,r,null];var o=e[(i.query?i.query.index.name:null)||""];if(!o)return[null,!1,r,null];switch(n){case"query":var s=o.find((function(t){return t.req.limit===i.limit&&t.req.values===i.values&&Wn(t.req.query.range,i.query.range)}));return s?[s,!0,r,o]:[o.find((function(t){return("limit"in t.req?t.req.limit:1/0)>=i.limit&&(!i.values||t.req.values)&&Zn(t.req.query.range,i.query.range)})),!1,r,o];case"count":return s=o.find((function(t){return Wn(t.req.query.range,i.query.range)})),[s,!!s,r,o]}}(n,i,"query",t),A=a[0],l=a[1],c=a[2],u=a[3];return A&&l?A.obsSet=t.obsSet:(l=r.query(t).then((function(t){var n=t.result;if(A&&(A.res=n),e){for(var i=0,r=n.length;i<r;++i)Object.freeze(n[i]);Object.freeze(n)}else t.result=D(n);return t})).catch((function(t){return u&&A&&N(u,A),Promise.reject(t)})),A={obsSet:t.obsSet,promise:l,subscribers:new Set,type:"query",req:t,dirty:!1},u?u.push(A):(u=[A],(c=c||(Dn["idb://".concat(n,"/").concat(i)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[t.query.index.name||""]=u)),Xn(A,u,o,s),A.promise.then((function(n){return{result:Vn(n.result,t,null==c?void 0:c.optimisticOps,r,A,e)}}))}})}})}};function ti(t,e){return new Proxy(t,{get:function(t,n,i){return"db"===n?e:Reflect.get(t,n,i)}})}var ei=(ni.prototype.version=function(t){if(isNaN(t)||t<.1)throw new J.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new J.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var e=this._versions,n=e.filter((function(e){return e._cfg.version===t}))[0];return n||(n=new this.Version(t),e.push(n),e.sort(rn),n.stores({}),this._state.autoSchema=!1,n)},ni.prototype._whenReady=function(t){var e=this;return this.idbdb&&(this._state.openComplete||It.letThrough||this._vip)?t():new _t((function(t,n){if(e._state.openComplete)return n(new J.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return void n(new J.DatabaseClosed);e.open().catch(V)}e._state.dbReadyPromise.then(t,n)})).then(t)},ni.prototype.use=function(t){var e=t.stack,n=t.create,i=t.level,r=t.name;return r&&this.unuse({stack:e,name:r}),(t=this._middlewares[e]||(this._middlewares[e]=[])).push({stack:e,create:n,level:null==i?10:i,name:r}),t.sort((function(t,e){return t.level-e.level})),this},ni.prototype.unuse=function(t){var e=t.stack,n=t.name,i=t.create;return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter((function(t){return i?t.create!==i:!!n&&t.name!==n}))),this},ni.prototype.open=function(){var t=this;return Ht(mt,(function(){return Pn(t)}))},ni.prototype._close=function(){var t=this._state,e=ee.indexOf(this);if(0<=e&&ee.splice(e,1),this.idbdb){try{this.idbdb.close()}catch(e){}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new _t((function(e){t.dbReadyResolve=e})),t.openCanceller=new _t((function(e,n){t.cancelOpen=n})))},ni.prototype.close=function(t){var e=(void 0===t?{disableAutoOpen:!0}:t).disableAutoOpen;t=this._state,e?(t.isBeingOpened&&t.cancelOpen(new J.DatabaseClosed),this._close(),t.autoOpen=!1,t.dbOpenError=new J.DatabaseClosed):(this._close(),t.autoOpen=this._options.autoOpen||t.isBeingOpened,t.openComplete=!1,t.dbOpenError=null)},ni.prototype.delete=function(t){var e=this;void 0===t&&(t={disableAutoOpen:!0});var n=0<arguments.length&&"object"!=typeof arguments[0],i=this._state;return new _t((function(r,o){function s(){e.close(t);var n=e._deps.indexedDB.deleteDatabase(e.name);n.onsuccess=Nt((function(){var t,n,i;t=e._deps,n=e.name,i=t.indexedDB,t=t.IDBKeyRange,mn(i)||n===ne||fn(i,t).delete(n).catch(V),r()})),n.onerror=Le(o),n.onblocked=e._fireOnBlocked}if(n)throw new J.InvalidArgument("Invalid closeOptions argument to db.delete()");i.isBeingOpened?i.dbReadyPromise.then(s):s()}))},ni.prototype.backendDB=function(){return this.idbdb},ni.prototype.isOpen=function(){return null!==this.idbdb},ni.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&"DatabaseClosed"===t.name},ni.prototype.hasFailed=function(){return null!==this._state.dbOpenError},ni.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(ni.prototype,"tables",{get:function(){var t=this;return o(this._allTables).map((function(e){return t._allTables[e]}))},enumerable:!1,configurable:!0}),ni.prototype.transaction=function(){var t=function(t,e,n){var i=arguments.length;if(i<2)throw new J.InvalidArgument("Too few arguments");for(var r=new Array(i-1);--i;)r[i-1]=arguments[i];return n=r.pop(),[t,w(r),n]}.apply(this,arguments);return this._transaction.apply(this,t)},ni.prototype._transaction=function(t,e,n){var i=this,r=It.trans;r&&r.db===this&&-1===t.indexOf("!")||(r=null);var o,s,a=-1!==t.indexOf("?");t=t.replace("!","").replace("?","");try{if(s=e.map((function(t){if("string"!=typeof(t=t instanceof i.Table?t.name:t))throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==t||t===ie)o=ie;else{if("rw"!=t&&t!=re)throw new J.InvalidArgument("Invalid transaction mode: "+t);o=re}if(r){if(r.mode===ie&&o===re){if(!a)throw new J.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&s.forEach((function(t){if(r&&-1===r.storeNames.indexOf(t)){if(!a)throw new J.SubTransaction("Table "+t+" not included in parent transaction.");r=null}})),a&&r&&!r.active&&(r=null)}}catch(n){return r?r._promise(null,(function(t,e){e(n)})):Zt(n)}var A=function t(e,n,i,r,o){return _t.resolve().then((function(){var s=It.transless||It,a=e._createTransaction(n,i,e._dbSchema,r);if(a.explicit=!0,s={trans:a,transless:s},r)a.idbtrans=r.idbtrans;else try{a.create(),a.idbtrans._explicit=!0,e._state.PR1398_maxLoop=3}catch(s){return s.name===K.InvalidState&&e.isOpen()&&0<--e._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then((function(){return t(e,n,i,null,o)}))):Zt(s)}var A,l=L(o);return l&&jt(),s=_t.follow((function(){var t;(A=o.call(a,a))&&(l?(t=Yt.bind(null,null),A.then(t,t)):"function"==typeof A.next&&"function"==typeof A.throw&&(A=Tn(A)))}),s),(A&&"function"==typeof A.then?_t.resolve(A).then((function(t){return a.active?t:Zt(new J.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):s.then((function(){return A}))).then((function(t){return r&&a._resolve(),a._completion.then((function(){return t}))})).catch((function(t){return a._reject(t),Zt(t)}))}))}.bind(null,this,o,s,r,n);return r?r._promise(o,A,"lock"):It.trans?Ht(It.transless,(function(){return i._whenReady(A)})):this._whenReady(A)},ni.prototype.table=function(t){if(!c(this._allTables,t))throw new J.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},ni);function ni(t,n){var i=this;this._middlewares={},this.verno=0;var r=ni.dependencies;this._options=n=e({addons:ni.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,cache:"cloned"},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange},r=n.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var o,s,a,A,l,c={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:V,dbReadyPromise:null,cancelOpen:V,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};c.dbReadyPromise=new _t((function(t){c.dbReadyResolve=t})),c.openCanceller=new _t((function(t,e){c.cancelOpen=e})),this._state=c,this.name=t,this.on=de(this,"populate","blocked","versionchange","close",{ready:[it,V]}),this.on.ready.subscribe=I(this.on.ready.subscribe,(function(t){return function(e,n){ni.vip((function(){var r,o=i._state;o.openComplete?(o.dbOpenError||_t.resolve().then(e),n&&t(e)):o.onReadyBeingFired?(o.onReadyBeingFired.push(e),n&&t(e)):(t(e),r=i,n||t((function t(){r.on.ready.unsubscribe(e),r.on.ready.unsubscribe(t)})))}))}})),this.Collection=(o=this,pe(we.prototype,(function(t,e){this.db=o;var n=se,i=null;if(e)try{n=e()}catch(t){i=t}var r=t._ctx;t=(e=r.table).hook.reading.fire,this._ctx={table:e,index:r.index,isPrimKey:!r.index||e.schema.primKey.keyPath&&r.index===e.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:i,or:r.or,valueMapper:t!==W?t:null}}))),this.Table=(s=this,pe(he.prototype,(function(t,e,n){this.db=s,this._tx=n,this.name=t,this.schema=e,this.hook=s._allTables[t]?s._allTables[t].hook:de(null,{creating:[$,V],reading:[Z,W],updating:[et,V],deleting:[tt,V]})}))),this.Transaction=(a=this,pe(je.prototype,(function(t,e,n,i,r){var o=this;this.db=a,this.mode=t,this.storeNames=e,this.schema=n,this.chromeTransactionDurability=i,this.idbtrans=null,this.on=de(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new _t((function(t,e){o._resolve=t,o._reject=e})),this._completion.then((function(){o.active=!1,o.on.complete.fire()}),(function(t){var e=o.active;return o.active=!1,o.on.error.fire(t),o.parent?o.parent._reject(t):e&&o.idbtrans&&o.idbtrans.abort(),Zt(t)}))}))),this.Version=(A=this,pe(dn.prototype,(function(t){this.db=A,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))),this.WhereClause=(l=this,pe(Pe.prototype,(function(t,e,n){if(this.db=l,this._ctx={table:t,index:":id"===e?null:e,or:n},this._cmp=this._ascending=le,this._descending=function(t,e){return le(e,t)},this._max=function(t,e){return 0<le(t,e)?t:e},this._min=function(t,e){return le(t,e)<0?t:e},this._IDBKeyRange=l._deps.IDBKeyRange,!this._IDBKeyRange)throw new J.MissingAPI}))),this.on("versionchange",(function(t){0<t.newVersion?console.warn("Another connection wants to upgrade database '".concat(i.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(i.name,"'. Closing db now to resume the delete request.")),i.close({disableAutoOpen:!1})})),this.on("blocked",(function(t){!t.newVersion||t.newVersion<t.oldVersion?console.warn("Dexie.delete('".concat(i.name,"') was blocked")):console.warn("Upgrade '".concat(i.name,"' blocked by other connection holding version ").concat(t.oldVersion/10))})),this._maxKey=qe(n.IDBKeyRange),this._createTransaction=function(t,e,n,r){return new i.Transaction(t,e,n,i._options.chromeTransactionDurability,r)},this._fireOnBlocked=function(t){i.on("blocked").fire(t),ee.filter((function(t){return t.name===i.name&&t!==i&&!t._state.vcFired})).map((function(e){return e.on("versionchange").fire(t)}))},this.use(Yn),this.use($n),this.use(Jn),this.use(Fn),this.use(Un);var u=new Proxy(this,{get:function(t,e,n){if("_vip"===e)return!0;if("table"===e)return function(t){return ti(i.table(t),u)};var r=Reflect.get(t,e,n);return r instanceof he?ti(r,u):"tables"===e?r.map((function(t){return ti(t,u)})):"_createTransaction"===e?function(){return ti(r.apply(this,arguments),u)}:r}});this.vip=u,r.forEach((function(t){return t(i)}))}F="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";var ii,ri=(oi.prototype.subscribe=function(t,e,n){return this._subscribe(t&&"function"!=typeof t?t:{next:t,error:e,complete:n})},oi.prototype[F]=function(){return this},oi);function oi(t){this._subscribe=t}try{ii={indexedDB:r.indexedDB||r.mozIndexedDB||r.webkitIndexedDB||r.msIndexedDB,IDBKeyRange:r.IDBKeyRange||r.webkitIDBKeyRange}}catch(b){ii={indexedDB:null,IDBKeyRange:null}}function si(t){var e,n=!1,i=new ri((function(i){var r,o=L(t),s=!1,a={},A={},l={get closed(){return s},unsubscribe:function(){s||(s=!0,r&&r.abort(),u&&Ue.storagemutated.unsubscribe(g))}};i.start&&i.start(l);var u=!1,h=function(){return Wt(d)},g=function(t){Qn(a,t),xn(A,a)&&h()},d=function(){var l,d,p;!s&&ii.indexedDB&&(a={},l={},r&&r.abort(),r=new AbortController,p=function(e){var n=St();try{o&&jt();var i=Ut(t,e);return i=o?i.finally(Yt):i}finally{n&&Mt()}}(d={subscr:l,signal:r.signal,requery:h,querier:t,trans:null}),Promise.resolve(p).then((function(t){n=!0,e=t,s||d.signal.aborted||(a={},function(t){for(var e in t)if(c(t,e))return;return 1}(A=l)||u||(Ue(Oe,g),u=!0),Wt((function(){return!s&&i.next&&i.next(t)})))}),(function(t){n=!1,["DatabaseClosedError","AbortError"].includes(null==t?void 0:t.name)||s||Wt((function(){s||i.error&&i.error(t)}))})))};return setTimeout(h,0),l}));return i.hasValue=function(){return n},i.getValue=function(){return e},i}var ai=ei;function Ai(t){var e=ci;try{ci=!0,Ue.storagemutated.fire(t),Rn(t,!0)}finally{ci=e}}u(ai,e(e({},H),{delete:function(t){return new ai(t,{addons:[]}).delete()},exists:function(t){return new ai(t,{addons:[]}).open().then((function(t){return t.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(t){try{return n=(e=ai.dependencies).indexedDB,e=e.IDBKeyRange,(mn(n)?Promise.resolve(n.databases()).then((function(t){return t.map((function(t){return t.name})).filter((function(t){return t!==ne}))})):fn(n,e).toCollection().primaryKeys()).then(t)}catch(t){return Zt(new J.MissingAPI)}var e,n},defineClass:function(){return function(t){a(this,t)}},ignoreTransaction:function(t){return It.trans?Ht(It.transless,t):t()},vip:In,async:function(t){return function(){try{var e=Tn(t.apply(this,arguments));return e&&"function"==typeof e.then?e:_t.resolve(e)}catch(e){return Zt(e)}}},spawn:function(t,e,n){try{var i=Tn(t.apply(n,e||[]));return i&&"function"==typeof i.then?i:_t.resolve(i)}catch(t){return Zt(t)}},currentTransaction:{get:function(){return It.trans||null}},waitFor:function(t,e){return e=_t.resolve("function"==typeof t?ai.ignoreTransaction(t):t).timeout(e||6e4),It.trans?It.trans.waitFor(e):e},Promise:_t,debug:{get:function(){return rt},set:function(t){ot(t)}},derive:d,extend:a,props:u,override:I,Events:de,on:Ue,liveQuery:si,extendObservabilitySet:Qn,getByKeyPath:E,setByKeyPath:_,delByKeyPath:function(t,e){"string"==typeof e?_(t,e,void 0):"length"in e&&[].map.call(e,(function(e){_(t,e,void 0)}))},shallowClone:v,deepClone:D,getObjectDiff:On,cmp:le,asap:C,minKey:-1/0,addons:[],connections:ee,errnames:K,dependencies:ii,cache:Dn,semVer:"4.0.8",version:"4.0.8".split(".").map((function(t){return parseInt(t)})).reduce((function(t,e,n){return t+e/Math.pow(10,2*n)}))})),ai.maxKey=qe(ai.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(Ue(Oe,(function(t){ci||(t=new CustomEvent(Ge,{detail:t}),ci=!0,dispatchEvent(t),ci=!1)})),addEventListener(Ge,(function(t){t=t.detail,ci||Ai(t)})));var li,ci=!1,ui=function(){};return"undefined"!=typeof BroadcastChannel&&((ui=function(){(li=new BroadcastChannel(Ge)).onmessage=function(t){return t.data&&Ai(t.data)}})(),"function"==typeof li.unref&&li.unref(),Ue(Oe,(function(t){ci||li.postMessage(t)}))),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",(function(t){if(!ei.disableBfCache&&t.persisted){rt&&console.debug("Dexie: handling persisted pagehide"),null!=li&&li.close();for(var e=0,n=ee;e<n.length;e++)n[e].close({disableAutoOpen:!1})}})),addEventListener("pageshow",(function(t){!ei.disableBfCache&&t.persisted&&(rt&&console.debug("Dexie: handling persisted pageshow"),ui(),Ai({all:new Cn(-1/0,[[]])}))}))),_t.rejectionMapper=function(t,e){return!t||t instanceof G||t instanceof TypeError||t instanceof SyntaxError||!t.name||!q[t.name]?t:(e=new q[t.name](e||t.message,t),"stack"in t&&g(e,"stack",{get:function(){return this.inner.stack}}),e)},ot(rt),e(ei,Object.freeze({__proto__:null,Dexie:ei,liveQuery:si,Entity:Ae,cmp:le,PropModSymbol:b,PropModification:ve,replacePrefix:function(t,e){return new ve({replacePrefix:[t,e]})},add:function(t){return new ve({add:t})},remove:function(t){return new ve({remove:t})},default:ei,RangeSet:Cn,mergeRanges:_n,rangesOverlap:vn}),{default:ei}),ei}()},5230:t=>{"use strict";function e(t,e,i){i=i||2;var o,s,a,A,u,h,d,p=e&&e.length,f=p?e[0]*i:t.length,m=n(t,0,f,i,!0),I=[];if(!m||m.next===m.prev)return I;if(p&&(m=function(t,e,i,r){var o,s,a,A=[];for(o=0,s=e.length;o<s;o++)(a=n(t,e[o]*r,o<s-1?e[o+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),A.push(g(a));for(A.sort(l),o=0;o<A.length;o++)i=c(A[o],i);return i}(t,e,m,i)),t.length>80*i){o=a=t[0],s=A=t[1];for(var y=i;y<f;y+=i)(u=t[y])<o&&(o=u),(h=t[y+1])<s&&(s=h),u>a&&(a=u),h>A&&(A=h);d=0!==(d=Math.max(a-o,A-s))?32767/d:0}return r(m,I,i,o,s,d,0),I}function n(t,e,n,i,r){var o,s;if(r===b(t,e,n,i)>0)for(o=e;o<n;o+=i)s=v(o,t[o],t[o+1],s);else for(o=n-i;o>=e;o-=i)s=v(o,t[o],t[o+1],s);return s&&m(s,s.next)&&(B(s),s=s.next),s}function i(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!m(i,i.next)&&0!==f(i.prev,i,i.next))i=i.next;else{if(B(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function r(t,e,n,l,c,u,g){if(t){!g&&u&&function(t,e,n,i){var r=t;do{0===r.z&&(r.z=h(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,s,a,A,l=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,i=n,a=0,e=0;e<l&&(a++,i=i.nextZ);e++);for(A=l;a>0||A>0&&i;)0!==a&&(0===A||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,A--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,l*=2}while(s>1)}(r)}(t,l,c,u);for(var d,p,f=t;t.prev!==t.next;)if(d=t.prev,p=t.next,u?s(t,l,c,u):o(t))e.push(d.i/n|0),e.push(t.i/n|0),e.push(p.i/n|0),B(t),t=p.next,f=p.next;else if((t=p)===f){g?1===g?r(t=a(i(t),e,n),e,n,l,c,u,2):2===g&&A(t,e,n,l,c,u):r(i(t),e,n,l,c,u,1);break}}}function o(t){var e=t.prev,n=t,i=t.next;if(f(e,n,i)>=0)return!1;for(var r=e.x,o=n.x,s=i.x,a=e.y,A=n.y,l=i.y,c=r<o?r<s?r:s:o<s?o:s,u=a<A?a<l?a:l:A<l?A:l,h=r>o?r>s?r:s:o>s?o:s,g=a>A?a>l?a:l:A>l?A:l,p=i.next;p!==e;){if(p.x>=c&&p.x<=h&&p.y>=u&&p.y<=g&&d(r,a,o,A,s,l,p.x,p.y)&&f(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function s(t,e,n,i){var r=t.prev,o=t,s=t.next;if(f(r,o,s)>=0)return!1;for(var a=r.x,A=o.x,l=s.x,c=r.y,u=o.y,g=s.y,p=a<A?a<l?a:l:A<l?A:l,m=c<u?c<g?c:g:u<g?u:g,I=a>A?a>l?a:l:A>l?A:l,y=c>u?c>g?c:g:u>g?u:g,C=h(p,m,e,n,i),E=h(I,y,e,n,i),_=t.prevZ,v=t.nextZ;_&&_.z>=C&&v&&v.z<=E;){if(_.x>=p&&_.x<=I&&_.y>=m&&_.y<=y&&_!==r&&_!==s&&d(a,c,A,u,l,g,_.x,_.y)&&f(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,v.x>=p&&v.x<=I&&v.y>=m&&v.y<=y&&v!==r&&v!==s&&d(a,c,A,u,l,g,v.x,v.y)&&f(v.prev,v,v.next)>=0)return!1;v=v.nextZ}for(;_&&_.z>=C;){if(_.x>=p&&_.x<=I&&_.y>=m&&_.y<=y&&_!==r&&_!==s&&d(a,c,A,u,l,g,_.x,_.y)&&f(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;v&&v.z<=E;){if(v.x>=p&&v.x<=I&&v.y>=m&&v.y<=y&&v!==r&&v!==s&&d(a,c,A,u,l,g,v.x,v.y)&&f(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function a(t,e,n){var r=t;do{var o=r.prev,s=r.next.next;!m(o,s)&&I(o,r,r.next,s)&&E(o,s)&&E(s,o)&&(e.push(o.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),B(r),B(r.next),r=t=s),r=r.next}while(r!==t);return i(r)}function A(t,e,n,o,s,a){var A=t;do{for(var l=A.next.next;l!==A.prev;){if(A.i!==l.i&&p(A,l)){var c=_(A,l);return A=i(A,A.next),c=i(c,c.next),r(A,e,n,o,s,a,0),void r(c,e,n,o,s,a,0)}l=l.next}A=A.next}while(A!==t)}function l(t,e){return t.x-e.x}function c(t,e){var n=function(t,e){var n,i=e,r=t.x,o=t.y,s=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=r&&a>s&&(s=a,n=i.x<i.next.x?i:i.next,a===r))return n}i=i.next}while(i!==e);if(!n)return null;var A,l=n,c=n.x,h=n.y,g=1/0;i=n;do{r>=i.x&&i.x>=c&&r!==i.x&&d(o<h?r:s,o,c,h,o<h?s:r,o,i.x,i.y)&&(A=Math.abs(o-i.y)/(r-i.x),E(i,t)&&(A<g||A===g&&(i.x>n.x||i.x===n.x&&u(n,i)))&&(n=i,g=A)),i=i.next}while(i!==l);return n}(t,e);if(!n)return e;var r=_(n,t);return i(r,r.next),i(n,n.next)}function u(t,e){return f(t.prev,t,e.prev)<0&&f(e.next,t,t.next)<0}function h(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function d(t,e,n,i,r,o,s,a){return(r-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(i-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(r-s)*(i-a)}function p(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&I(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(E(t,e)&&E(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(f(t.prev,t,e.prev)||f(t,e.prev,e))||m(t,e)&&f(t.prev,t,t.next)>0&&f(e.prev,e,e.next)>0)}function f(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function m(t,e){return t.x===e.x&&t.y===e.y}function I(t,e,n,i){var r=C(f(t,e,n)),o=C(f(t,e,i)),s=C(f(n,i,t)),a=C(f(n,i,e));return r!==o&&s!==a||(!(0!==r||!y(t,n,e))||(!(0!==o||!y(t,i,e))||(!(0!==s||!y(n,t,i))||!(0!==a||!y(n,e,i)))))}function y(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function C(t){return t>0?1:t<0?-1:0}function E(t,e){return f(t.prev,t,t.next)<0?f(t,e,t.next)>=0&&f(t,t.prev,e)>=0:f(t,e,t.prev)<0||f(t,t.next,e)<0}function _(t,e){var n=new w(t.i,t.x,t.y),i=new w(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function v(t,e,n,i){var r=new w(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function B(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function w(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function b(t,e,n,i){for(var r=0,o=e,s=n-i;o<n;o+=i)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}t.exports=e,t.exports.default=e,e.deviation=function(t,e,n,i){var r=e&&e.length,o=r?e[0]*n:t.length,s=Math.abs(b(t,0,o,n));if(r)for(var a=0,A=e.length;a<A;a++){var l=e[a]*n,c=a<A-1?e[a+1]*n:t.length;s-=Math.abs(b(t,l,c,n))}var u=0;for(a=0;a<i.length;a+=3){var h=i[a]*n,g=i[a+1]*n,d=i[a+2]*n;u+=Math.abs((t[h]-t[d])*(t[g+1]-t[h+1])-(t[h]-t[g])*(t[d+1]-t[h+1]))}return 0===s&&0===u?0:Math.abs((u-s)/s)},e.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[r][o][s]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n}},792:t=>{"use strict";var e=Object.prototype.hasOwnProperty,n="~";function i(){}function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,i,o,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new r(i,o||t,s),A=n?n+e:e;return t._events[A]?t._events[A].fn?t._events[A]=[t._events[A],a]:t._events[A].push(a):(t._events[A]=a,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,i,r=[];if(0===this._eventsCount)return r;for(i in t=this._events)e.call(t,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},a.prototype.listeners=function(t){var e=n?n+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,o=i.length,s=new Array(o);r<o;r++)s[r]=i[r].fn;return s},a.prototype.listenerCount=function(t){var e=n?n+t:t,i=this._events[e];return i?i.fn?1:i.length:0},a.prototype.emit=function(t,e,i,r,o,s){var a=n?n+t:t;if(!this._events[a])return!1;var A,l,c=this._events[a],u=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,i),!0;case 4:return c.fn.call(c.context,e,i,r),!0;case 5:return c.fn.call(c.context,e,i,r,o),!0;case 6:return c.fn.call(c.context,e,i,r,o,s),!0}for(l=1,A=new Array(u-1);l<u;l++)A[l-1]=arguments[l];c.fn.apply(c.context,A)}else{var h,g=c.length;for(l=0;l<g;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),u){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,i);break;case 4:c[l].fn.call(c[l].context,e,i,r);break;default:if(!A)for(h=1,A=new Array(u-1);h<u;h++)A[h-1]=arguments[h];c[l].fn.apply(c[l].context,A)}}return!0},a.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,i,r){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||r&&!a.once||i&&a.context!==i||s(this,o);else{for(var A=0,l=[],c=a.length;A<c;A++)(a[A].fn!==e||r&&!a[A].once||i&&a[A].context!==i)&&l.push(a[A]);l.length?this._events[o]=1===l.length?l[0]:l:s(this,o)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&s(this,e)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a},1567:(t,e,n)=>{var i;!function(){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),o={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen};void 0===(i=function(){return o}.call(e,n,e,t))||(t.exports=i)}()},2249:function(t,e,n){var i,r,o;r=[],void 0===(o="function"==typeof(i=function(){"use strict";function e(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}function i(t,e,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){A(i.response,e,n)},i.onerror=function(){console.error("could not download file")},i.send()}function r(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function o(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var s="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,a=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),A=s.saveAs||("object"!=typeof window||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(t,e,n){var a=s.URL||s.webkitURL,A=document.createElement("a");e=e||t.name||"download",A.download=e,A.rel="noopener","string"==typeof t?(A.href=t,A.origin===location.origin?o(A):r(A.href)?i(t,e,n):o(A,A.target="_blank")):(A.href=a.createObjectURL(t),setTimeout((function(){a.revokeObjectURL(A.href)}),4e4),setTimeout((function(){o(A)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,n,s){if(n=n||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(e(t,s),n);else if(r(t))i(t,n,s);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout((function(){o(a)}))}}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof t)return i(t,e,n);var o="application/octet-stream"===t.type,A=/constructor/i.test(s.HTMLElement)||s.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||o&&A||a)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var t=c.result;t=l?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=t:location=t,r=null},c.readAsDataURL(t)}else{var u=s.URL||s.webkitURL,h=u.createObjectURL(t);r?r.location=h:location.href=h,r=null,setTimeout((function(){u.revokeObjectURL(h)}),4e4)}});s.saveAs=A.saveAs=A,t.exports=A})?i.apply(e,r):i)||(t.exports=o)},9565:(t,e,n)=>{var i=n(6481),r=n(8611),o=n(2697),s=n(2014).Ay,a=o.featureEach,A=(o.coordEach,r.polygon,r.featureCollection);function l(t){var e=new i(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:s(t),i.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:s(t),e.push(t)})):a(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:s(t),e.push(t)})),i.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:s(t),i.prototype.remove.call(this,t,e)},e.clear=function(){return i.prototype.clear.call(this)},e.search=function(t){var e=i.prototype.search.call(this,this.toBBox(t));return A(e)},e.collides=function(t){return i.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=i.prototype.all.call(this);return A(t)},e.toJSON=function(){return i.prototype.toJSON.call(this)},e.fromJSON=function(t){return i.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=s(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=s(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}t.exports=l,t.exports.default=l},2332:(t,e,n)=>{var i;!function(r,o,s,a){"use strict";var A,l=["","webkit","Moz","MS","ms","o"],c=o.createElement("div"),u="function",h=Math.round,g=Math.abs,d=Date.now;function p(t,e,n){return setTimeout(_(t,n),e)}function f(t,e,n){return!!Array.isArray(t)&&(m(t,n[e],n),!0)}function m(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==a)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function I(t,e,n){var i="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=r.console&&(r.console.warn||r.console.log);return o&&o.call(r.console,i,n),t.apply(this,arguments)}}A="function"!=typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==a&&null!==i)for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}return e}:Object.assign;var y=I((function(t,e,n){for(var i=Object.keys(e),r=0;r<i.length;)(!n||n&&t[i[r]]===a)&&(t[i[r]]=e[i[r]]),r++;return t}),"extend","Use `assign`."),C=I((function(t,e){return y(t,e,!0)}),"merge","Use `assign`.");function E(t,e,n){var i,r=e.prototype;(i=t.prototype=Object.create(r)).constructor=t,i._super=r,n&&A(i,n)}function _(t,e){return function(){return t.apply(e,arguments)}}function v(t,e){return typeof t==u?t.apply(e&&e[0]||a,e):t}function B(t,e){return t===a?e:t}function w(t,e,n){m(D(e),(function(e){t.addEventListener(e,n,!1)}))}function b(t,e,n){m(D(e),(function(e){t.removeEventListener(e,n,!1)}))}function Q(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function x(t,e){return t.indexOf(e)>-1}function D(t){return t.trim().split(/\s+/g)}function S(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function M(t){return Array.prototype.slice.call(t,0)}function k(t,e,n){for(var i=[],r=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];S(r,s)<0&&i.push(t[o]),r[o]=s,o++}return n&&(i=e?i.sort((function(t,n){return t[e]>n[e]})):i.sort()),i}function R(t,e){for(var n,i,r=e[0].toUpperCase()+e.slice(1),o=0;o<l.length;){if((i=(n=l[o])?n+r:e)in t)return i;o++}return a}var N=1;function P(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||r}var T="ontouchstart"in r,L=R(r,"PointerEvent")!==a,F=T&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),O="touch",G="mouse",U=25,j=1,Y=4,K=8,z=1,J=2,q=4,H=8,V=16,W=J|q,Z=H|V,X=W|Z,$=["x","y"],tt=["clientX","clientY"];function et(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){v(t.options.enable,[t])&&n.handler(e)},this.init()}function nt(t,e,n){var i=n.pointers.length,r=n.changedPointers.length,o=e&j&&i-r==0,s=e&(Y|K)&&i-r==0;n.isFirst=!!o,n.isFinal=!!s,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,i=e.pointers,r=i.length;n.firstInput||(n.firstInput=it(e));r>1&&!n.firstMultiple?n.firstMultiple=it(e):1===r&&(n.firstMultiple=!1);var o=n.firstInput,s=n.firstMultiple,A=s?s.center:o.center,l=e.center=rt(i);e.timeStamp=d(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=At(A,l),e.distance=at(A,l),function(t,e){var n=e.center,i=t.offsetDelta||{},r=t.prevDelta||{},o=t.prevInput||{};e.eventType!==j&&o.eventType!==Y||(r=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y});e.deltaX=r.x+(n.x-i.x),e.deltaY=r.y+(n.y-i.y)}(n,e),e.offsetDirection=st(e.deltaX,e.deltaY);var c=ot(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=g(c.x)>g(c.y)?c.x:c.y,e.scale=s?(u=s.pointers,h=i,at(h[0],h[1],tt)/at(u[0],u[1],tt)):1,e.rotation=s?function(t,e){return At(e[1],e[0],tt)+At(t[1],t[0],tt)}(s.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,i,r,o,s=t.lastInterval||e,A=e.timeStamp-s.timeStamp;if(e.eventType!=K&&(A>U||s.velocity===a)){var l=e.deltaX-s.deltaX,c=e.deltaY-s.deltaY,u=ot(A,l,c);i=u.x,r=u.y,n=g(u.x)>g(u.y)?u.x:u.y,o=st(l,c),t.lastInterval=e}else n=s.velocity,i=s.velocityX,r=s.velocityY,o=s.direction;e.velocity=n,e.velocityX=i,e.velocityY=r,e.direction=o}(n,e);var u,h;var p=t.element;Q(e.srcEvent.target,p)&&(p=e.srcEvent.target);e.target=p}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function it(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:h(t.pointers[n].clientX),clientY:h(t.pointers[n].clientY)},n++;return{timeStamp:d(),pointers:e,center:rt(e),deltaX:t.deltaX,deltaY:t.deltaY}}function rt(t){var e=t.length;if(1===e)return{x:h(t[0].clientX),y:h(t[0].clientY)};for(var n=0,i=0,r=0;r<e;)n+=t[r].clientX,i+=t[r].clientY,r++;return{x:h(n/e),y:h(i/e)}}function ot(t,e,n){return{x:e/t||0,y:n/t||0}}function st(t,e){return t===e?z:g(t)>=g(e)?t<0?J:q:e<0?H:V}function at(t,e,n){n||(n=$);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return Math.sqrt(i*i+r*r)}function At(t,e,n){n||(n=$);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return 180*Math.atan2(r,i)/Math.PI}et.prototype={handler:function(){},init:function(){this.evEl&&w(this.element,this.evEl,this.domHandler),this.evTarget&&w(this.target,this.evTarget,this.domHandler),this.evWin&&w(P(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&b(this.element,this.evEl,this.domHandler),this.evTarget&&b(this.target,this.evTarget,this.domHandler),this.evWin&&b(P(this.element),this.evWin,this.domHandler)}};var lt={mousedown:j,mousemove:2,mouseup:Y},ct="mousedown",ut="mousemove mouseup";function ht(){this.evEl=ct,this.evWin=ut,this.pressed=!1,et.apply(this,arguments)}E(ht,et,{handler:function(t){var e=lt[t.type];e&j&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=Y),this.pressed&&(e&Y&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:G,srcEvent:t}))}});var gt={pointerdown:j,pointermove:2,pointerup:Y,pointercancel:K,pointerout:K},dt={2:O,3:"pen",4:G,5:"kinect"},pt="pointerdown",ft="pointermove pointerup pointercancel";function mt(){this.evEl=pt,this.evWin=ft,et.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}r.MSPointerEvent&&!r.PointerEvent&&(pt="MSPointerDown",ft="MSPointerMove MSPointerUp MSPointerCancel"),E(mt,et,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),r=gt[i],o=dt[t.pointerType]||t.pointerType,s=o==O,a=S(e,t.pointerId,"pointerId");r&j&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):r&(Y|K)&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(a,1))}});var It={touchstart:j,touchmove:2,touchend:Y,touchcancel:K};function yt(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,et.apply(this,arguments)}function Ct(t,e){var n=M(t.touches),i=M(t.changedTouches);return e&(Y|K)&&(n=k(n.concat(i),"identifier",!0)),[n,i]}E(yt,et,{handler:function(t){var e=It[t.type];if(e===j&&(this.started=!0),this.started){var n=Ct.call(this,t,e);e&(Y|K)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:O,srcEvent:t})}}});var Et={touchstart:j,touchmove:2,touchend:Y,touchcancel:K},_t="touchstart touchmove touchend touchcancel";function vt(){this.evTarget=_t,this.targetIds={},et.apply(this,arguments)}function Bt(t,e){var n=M(t.touches),i=this.targetIds;if(e&(2|j)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,o,s=M(t.changedTouches),a=[],A=this.target;if(o=n.filter((function(t){return Q(t.target,A)})),e===j)for(r=0;r<o.length;)i[o[r].identifier]=!0,r++;for(r=0;r<s.length;)i[s[r].identifier]&&a.push(s[r]),e&(Y|K)&&delete i[s[r].identifier],r++;return a.length?[k(o.concat(a),"identifier",!0),a]:void 0}E(vt,et,{handler:function(t){var e=Et[t.type],n=Bt.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:O,srcEvent:t})}});var wt=2500;function bt(){et.apply(this,arguments);var t=_(this.handler,this);this.touch=new vt(this.manager,t),this.mouse=new ht(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Qt(t,e){t&j?(this.primaryTouch=e.changedPointers[0].identifier,xt.call(this,e)):t&(Y|K)&&xt.call(this,e)}function xt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var i=this.lastTouches;setTimeout((function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)}),wt)}}function Dt(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],o=Math.abs(e-r.x),s=Math.abs(n-r.y);if(o<=25&&s<=25)return!0}return!1}E(bt,et,{handler:function(t,e,n){var i=n.pointerType==O,r=n.pointerType==G;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)Qt.call(this,e,n);else if(r&&Dt.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var St=R(c.style,"touchAction"),Mt=St!==a,kt="compute",Rt="auto",Nt="manipulation",Pt="none",Tt="pan-x",Lt="pan-y",Ft=function(){if(!Mt)return!1;var t={},e=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){t[n]=!e||r.CSS.supports("touch-action",n)})),t}();function Ot(t,e){this.manager=t,this.set(e)}Ot.prototype={set:function(t){t==kt&&(t=this.compute()),Mt&&this.manager.element.style&&Ft[t]&&(this.manager.element.style[St]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return m(this.manager.recognizers,(function(e){v(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(x(t,Pt))return Pt;var e=x(t,Tt),n=x(t,Lt);if(e&&n)return Pt;if(e||n)return e?Tt:Lt;if(x(t,Nt))return Nt;return Rt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var i=this.actions,r=x(i,Pt)&&!Ft[Pt],o=x(i,Lt)&&!Ft[Lt],s=x(i,Tt)&&!Ft[Tt];if(r){var a=1===t.pointers.length,A=t.distance<2,l=t.deltaTime<250;if(a&&A&&l)return}if(!s||!o)return r||o&&n&W||s&&n&Z?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Gt=1,Ut=32;function jt(t){this.options=A({},this.defaults,t||{}),this.id=N++,this.manager=null,this.options.enable=B(this.options.enable,!0),this.state=Gt,this.simultaneous={},this.requireFail=[]}function Yt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function Kt(t){return t==V?"down":t==H?"up":t==J?"left":t==q?"right":""}function zt(t,e){var n=e.manager;return n?n.get(t):t}function Jt(){jt.apply(this,arguments)}function qt(){Jt.apply(this,arguments),this.pX=null,this.pY=null}function Ht(){Jt.apply(this,arguments)}function Vt(){jt.apply(this,arguments),this._timer=null,this._input=null}function Wt(){Jt.apply(this,arguments)}function Zt(){Jt.apply(this,arguments)}function Xt(){jt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function $t(t,e){return(e=e||{}).recognizers=B(e.recognizers,$t.defaults.preset),new te(t,e)}jt.prototype={defaults:{},set:function(t){return A(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(f(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=zt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return f(t,"dropRecognizeWith",this)||(t=zt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(f(t,"requireFailure",this))return this;var e=this.requireFail;return-1===S(e,t=zt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(f(t,"dropRequireFailure",this))return this;t=zt(t,this);var e=S(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function i(n){e.manager.emit(n,t)}n<8&&i(e.options.event+Yt(n)),i(e.options.event),t.additionalEvent&&i(t.additionalEvent),n>=8&&i(e.options.event+Yt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=Ut},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(Ut|Gt)))return!1;t++}return!0},recognize:function(t){var e=A({},t);if(!v(this.options.enable,[this,e]))return this.reset(),void(this.state=Ut);56&this.state&&(this.state=Gt),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},E(Jt,jt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=6&e,r=this.attrTest(t);return i&&(n&K||!r)?16|e:i||r?n&Y?8|e:2&e?4|e:2:Ut}}),E(qt,Jt,{defaults:{event:"pan",threshold:10,pointers:1,direction:X},getTouchAction:function(){var t=this.options.direction,e=[];return t&W&&e.push(Lt),t&Z&&e.push(Tt),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,r=t.direction,o=t.deltaX,s=t.deltaY;return r&e.direction||(e.direction&W?(r=0===o?z:o<0?J:q,n=o!=this.pX,i=Math.abs(t.deltaX)):(r=0===s?z:s<0?H:V,n=s!=this.pY,i=Math.abs(t.deltaY))),t.direction=r,n&&i>e.threshold&&r&e.direction},attrTest:function(t){return Jt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Kt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),E(Ht,Jt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Pt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),E(Vt,jt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Rt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!i||!n||t.eventType&(Y|K)&&!r)this.reset();else if(t.eventType&j)this.reset(),this._timer=p((function(){this.state=8,this.tryEmit()}),e.time,this);else if(t.eventType&Y)return 8;return Ut},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&t.eventType&Y?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=d(),this.manager.emit(this.options.event,this._input)))}}),E(Wt,Jt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Pt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),E(Zt,Jt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:W|Z,pointers:1},getTouchAction:function(){return qt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(W|Z)?e=t.overallVelocity:n&W?e=t.overallVelocityX:n&Z&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&g(e)>this.options.velocity&&t.eventType&Y},emit:function(t){var e=Kt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),E(Xt,jt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Nt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&j&&0===this.count)return this.failTimeout();if(i&&r&&n){if(t.eventType!=Y)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||at(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&o?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=p((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return Ut},failTimeout:function(){return this._timer=p((function(){this.state=Ut}),this.options.interval,this),Ut},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),$t.VERSION="2.0.7",$t.defaults={domEvents:!1,touchAction:kt,enable:!0,inputTarget:null,inputClass:null,preset:[[Wt,{enable:!1}],[Ht,{enable:!1},["rotate"]],[Zt,{direction:W}],[qt,{direction:W},["swipe"]],[Xt],[Xt,{event:"doubletap",taps:2},["tap"]],[Vt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function te(t,e){var n;this.options=A({},$t.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(L?mt:F?vt:T?bt:ht))(n,nt),this.touchAction=new Ot(this,this.options.touchAction),ee(this,!0),m(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function ee(t,e){var n,i=t.element;i.style&&(m(t.options.cssProps,(function(r,o){n=R(i.style,o),e?(t.oldCssProps[n]=i.style[n],i.style[n]=r):i.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}te.prototype={set:function(t){return A(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var i=this.recognizers,r=e.curRecognizer;(!r||r&&8&r.state)&&(r=e.curRecognizer=null);for(var o=0;o<i.length;)n=i[o],2===e.stopped||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(t),!r&&14&n.state&&(r=e.curRecognizer=n),o++}},get:function(t){if(t instanceof jt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(f(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(f(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=S(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var n=this.handlers;return m(D(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(t!==a){var n=this.handlers;return m(D(t),(function(t){e?n[t]&&n[t].splice(S(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},destroy:function(){this.element&&ee(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},A($t,{INPUT_START:j,INPUT_MOVE:2,INPUT_END:Y,INPUT_CANCEL:K,STATE_POSSIBLE:Gt,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Ut,DIRECTION_NONE:z,DIRECTION_LEFT:J,DIRECTION_RIGHT:q,DIRECTION_UP:H,DIRECTION_DOWN:V,DIRECTION_HORIZONTAL:W,DIRECTION_VERTICAL:Z,DIRECTION_ALL:X,Manager:te,Input:et,TouchAction:Ot,TouchInput:vt,MouseInput:ht,PointerEventInput:mt,TouchMouseInput:bt,SingleTouchInput:yt,Recognizer:jt,AttrRecognizer:Jt,Tap:Xt,Pan:qt,Swipe:Zt,Pinch:Ht,Rotate:Wt,Press:Vt,on:w,off:b,each:m,merge:C,extend:y,assign:A,inherit:E,bindFn:_,prefixed:R}),(void 0!==r?r:"undefined"!=typeof self?self:{}).Hammer=$t,(i=function(){return $t}.call(e,n,e,t))===a||(t.exports=i)}(window,document)},8550:(t,e,n)=>{var i="Expected a function",r=NaN,o="[object Symbol]",s=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,A=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,u="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,h="object"==typeof self&&self&&self.Object===Object&&self,g=u||h||Function("return this")(),d=Object.prototype.toString,p=Math.max,f=Math.min,m=function(){return g.Date.now()};function I(t,e,n){var r,o,s,a,A,l,c=0,u=!1,h=!1,g=!0;if("function"!=typeof t)throw new TypeError(i);function d(e){var n=r,i=o;return r=o=void 0,c=e,a=t.apply(i,n)}function I(t){var n=t-l;return void 0===l||n>=e||n<0||h&&t-c>=s}function E(){var t=m();if(I(t))return _(t);A=setTimeout(E,function(t){var n=e-(t-l);return h?f(n,s-(t-c)):n}(t))}function _(t){return A=void 0,g&&r?d(t):(r=o=void 0,a)}function v(){var t=m(),n=I(t);if(r=arguments,o=this,l=t,n){if(void 0===A)return function(t){return c=t,A=setTimeout(E,e),u?d(t):a}(l);if(h)return A=setTimeout(E,e),d(l)}return void 0===A&&(A=setTimeout(E,e)),a}return e=C(e)||0,y(n)&&(u=!!n.leading,s=(h="maxWait"in n)?p(C(n.maxWait)||0,e):s,g="trailing"in n?!!n.trailing:g),v.cancel=function(){void 0!==A&&clearTimeout(A),c=0,r=l=o=A=void 0},v.flush=function(){return void 0===A?a:_(m())},v}function y(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function C(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&d.call(t)==o}(t))return r;if(y(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=y(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(s,"");var n=A.test(t);return n||l.test(t)?c(t.slice(2),n?2:8):a.test(t)?r:+t}t.exports=function(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new TypeError(i);return y(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),I(t,e,{leading:r,maxWait:e,trailing:o})}},5021:t=>{t.exports=function(t,e,n,i){var r=t[0],o=t[1],s=!1;void 0===n&&(n=0),void 0===i&&(i=e.length);for(var a=(i-n)/2,A=0,l=a-1;A<a;l=A++){var c=e[n+2*A+0],u=e[n+2*A+1],h=e[n+2*l+0],g=e[n+2*l+1];u>o!=g>o&&r<(h-c)*(o-u)/(g-u)+c&&(s=!s)}return s}},4440:(t,e,n)=>{var i=n(5021),r=n(4141);t.exports=function(t,e,n,o){return e.length>0&&Array.isArray(e[0])?r(t,e,n,o):i(t,e,n,o)},t.exports.nested=r,t.exports.flat=i},4141:t=>{t.exports=function(t,e,n,i){var r=t[0],o=t[1],s=!1;void 0===n&&(n=0),void 0===i&&(i=e.length);for(var a=i-n,A=0,l=a-1;A<a;l=A++){var c=e[A+n][0],u=e[A+n][1],h=e[l+n][0],g=e[l+n][1];u>o!=g>o&&r<(h-c)*(o-u)/(g-u)+c&&(s=!s)}return s}},1640:function(t,e,n){var i=n(8538);t.exports=function(){"use strict";function t(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return A([t,e])}}function A(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}var e=function(){function t(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null}return t}();function n(t,e){return t>e?1:t<e?-1:0}function r(t,n,i){for(var r=new e(null,null),o=r,s=r;;){var a=i(t,n.key);if(a<0){if(null===n.left)break;if(i(t,n.left.key)<0){var A=n.left;if(n.left=A.right,A.right=n,null===(n=A).left)break}s.left=n,s=n,n=n.left}else{if(!(a>0))break;if(null===n.right)break;if(i(t,n.right.key)>0&&(A=n.right,n.right=A.left,A.left=n,null===(n=A).right))break;o.right=n,o=n,n=n.right}}return o.right=n.left,s.left=n.right,n.left=r.right,n.right=r.left,n}function o(t,n,i,o){var s=new e(t,n);if(null===i)return s.left=s.right=null,s;var a=o(t,(i=r(t,i,o)).key);return a<0?(s.left=i.left,s.right=i,i.left=null):a>=0&&(s.right=i.right,s.left=i,i.right=null),s}function s(t,e,n){var i=null,o=null;if(e){var s=n((e=r(t,e,n)).key,t);0===s?(i=e.left,o=e.right):s<0?(o=e.right,e.right=null,i=e):(i=e.left,e.left=null,o=e)}return{left:i,right:o}}function a(t,e,n){return null===e?t:(null===t||((e=r(t.key,e,n)).left=t),e)}function A(t,e,n,i,r){if(t){i(e+(n?" ":" ")+r(t)+"\n");var o=e+(n?"    ":"   ");t.left&&A(t.left,o,!1,i,r),t.right&&A(t.right,o,!0,i,r)}}var l=function(){function i(t){void 0===t&&(t=n),this._root=null,this._size=0,this._comparator=t}return i.prototype.insert=function(t,e){return this._size++,this._root=o(t,e,this._root,this._comparator)},i.prototype.add=function(t,n){var i=new e(t,n);null===this._root&&(i.left=i.right=null,this._size++,this._root=i);var o=this._comparator,s=r(t,this._root,o),a=o(t,s.key);return 0===a?this._root=s:(a<0?(i.left=s.left,i.right=s,s.left=null):a>0&&(i.right=s.right,i.left=s,s.right=null),this._size++,this._root=i),this._root},i.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},i.prototype._remove=function(t,e,n){var i;return null===e?null:0===n(t,(e=r(t,e,n)).key)?(null===e.left?i=e.right:(i=r(t,e.left,n)).right=e.right,this._size--,i):e},i.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=r(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},i.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var i=n(t,e.key);if(0===i)return e;e=i<0?e.left:e.right}return null},i.prototype.find=function(t){return this._root&&(this._root=r(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},i.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var i=n(t,e.key);if(0===i)return!0;e=i<0?e.left:e.right}return!1},i.prototype.forEach=function(t,e){for(var n=this._root,i=[],r=!1;!r;)null!==n?(i.push(n),n=n.left):0!==i.length?(n=i.pop(),t.call(e,n),n=n.right):r=!0;return this},i.prototype.range=function(t,e,n,i){for(var r=[],o=this._comparator,s=this._root;0!==r.length||s;)if(s)r.push(s),s=s.left;else{if(o((s=r.pop()).key,e)>0)break;if(o(s.key,t)>=0&&n.call(i,s))return this;s=s.right}return this},i.prototype.keys=function(){var t=[];return this.forEach((function(e){var n=e.key;return t.push(n)})),t},i.prototype.values=function(){var t=[];return this.forEach((function(e){var n=e.data;return t.push(n)})),t},i.prototype.min=function(){return this._root?this.minNode(this._root).key:null},i.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},i.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},i.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},i.prototype.at=function(t){for(var e=this._root,n=!1,i=0,r=[];!n;)if(e)r.push(e),e=e.left;else if(r.length>0){if(e=r.pop(),i===t)return e;i++,e=e.right}else n=!0;return null},i.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var i=this._comparator;e;){var r=i(t.key,e.key);if(0===r)break;r<0?(n=e,e=e.left):e=e.right}return n},i.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){for(n=t.left;n.right;)n=n.right;return n}for(var i=this._comparator;e;){var r=i(t.key,e.key);if(0===r)break;r<0?e=e.left:(n=e,e=e.right)}return n},i.prototype.clear=function(){return this._root=null,this._size=0,this},i.prototype.toList=function(){return h(this._root)},i.prototype.load=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var i=t.length,r=this._comparator;if(n&&p(t,e,0,i-1,r),null===this._root)this._root=c(t,e,0,i),this._size=i;else{var o=d(this.toList(),u(t,e),r);i=this._size+i,this._root=g({head:o},0,i)}return this},i.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(i.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),i.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return A(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},i.prototype.update=function(t,e,n){var i=this._comparator,r=s(t,this._root,i),A=r.left,l=r.right;i(t,e)<0?l=o(e,n,l,i):A=o(e,n,A,i),this._root=a(A,l,i)},i.prototype.split=function(t){return s(t,this._root,this._comparator)},i.prototype[Symbol.iterator]=function(){var e,n,i;return t(this,(function(t){switch(t.label){case 0:e=this._root,n=[],i=!1,t.label=1;case 1:return i?[3,6]:null===e?[3,2]:(n.push(e),e=e.left,[3,5]);case 2:return 0===n.length?[3,4]:[4,e=n.pop()];case 3:return t.sent(),e=e.right,[3,5];case 4:i=!0,t.label=5;case 5:return[3,1];case 6:return[2]}}))},i}();function c(t,n,i,r){var o=r-i;if(o>0){var s=i+Math.floor(o/2),a=t[s],A=n[s],l=new e(a,A);return l.left=c(t,n,i,s),l.right=c(t,n,s+1,r),l}return null}function u(t,n){for(var i=new e(null,null),r=i,o=0;o<t.length;o++)r=r.next=new e(t[o],n[o]);return r.next=null,i.next}function h(t){for(var n=t,i=[],r=!1,o=new e(null,null),s=o;!r;)n?(i.push(n),n=n.left):i.length>0?n=(n=s=s.next=i.pop()).right:r=!0;return s.next=null,o.next}function g(t,e,n){var i=n-e;if(i>0){var r=e+Math.floor(i/2),o=g(t,e,r),s=t.head;return s.left=o,t.head=t.head.next,s.right=g(t,r+1,n),s}return null}function d(t,n,i){for(var r=new e(null,null),o=r,s=t,a=n;null!==s&&null!==a;)i(s.key,a.key)<0?(o.next=s,s=s.next):(o.next=a,a=a.next),o=o.next;return null!==s?o.next=s:null!==a&&(o.next=a),r.next}function p(t,e,n,i,r){if(!(n>=i)){for(var o=t[n+i>>1],s=n-1,a=i+1;;){do{s++}while(r(t[s],o)<0);do{a--}while(r(t[a],o)>0);if(s>=a)break;var A=t[s];t[s]=t[a],t[a]=A,A=e[s],e[s]=e[a],e[a]=A}p(t,e,n,a,r),p(t,e,a+1,i,r)}}const f=(t,e)=>t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y,m=(t,e)=>{if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;const n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,i=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:i,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}};let I=Number.EPSILON;void 0===I&&(I=Math.pow(2,-52));const y=I*I,C=(t,e)=>{if(-I<t&&t<I&&-I<e&&e<I)return 0;const n=t-e;return n*n<y*t*e?0:t<e?-1:1};class E{constructor(){this.reset()}reset(){this.xRounder=new _,this.yRounder=new _}round(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}class _{constructor(){this.tree=new l,this.round(0)}round(t){const e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===C(e.key,n.key))return this.tree.remove(t),n.key;const i=this.tree.next(e);return null!==i&&0===C(e.key,i.key)?(this.tree.remove(t),i.key):t}}const v=new E,B=11102230246251565e-32,w=134217729,b=(3+8*B)*B;function Q(t,e,n,i,r){let o,s,a,A,l=e[0],c=i[0],u=0,h=0;c>l==c>-l?(o=l,l=e[++u]):(o=c,c=i[++h]);let g=0;if(u<t&&h<n)for(c>l==c>-l?(s=l+o,a=o-(s-l),l=e[++u]):(s=c+o,a=o-(s-c),c=i[++h]),o=s,0!==a&&(r[g++]=a);u<t&&h<n;)c>l==c>-l?(s=o+l,A=s-o,a=o-(s-A)+(l-A),l=e[++u]):(s=o+c,A=s-o,a=o-(s-A)+(c-A),c=i[++h]),o=s,0!==a&&(r[g++]=a);for(;u<t;)s=o+l,A=s-o,a=o-(s-A)+(l-A),l=e[++u],o=s,0!==a&&(r[g++]=a);for(;h<n;)s=o+c,A=s-o,a=o-(s-A)+(c-A),c=i[++h],o=s,0!==a&&(r[g++]=a);return 0===o&&0!==g||(r[g++]=o),g}function x(t,e){let n=e[0];for(let i=1;i<t;i++)n+=e[i];return n}function D(t){return new Float64Array(t)}const S=(3+16*B)*B,M=(2+12*B)*B,k=(9+64*B)*B*B,R=D(4),N=D(8),P=D(12),T=D(16),L=D(4);function F(t,e,n,i,r,o,s){let a,A,l,c,u,h,g,d,p,f,m,I,y,C,E,_,v,B;const D=t-r,S=n-r,F=e-o,O=i-o;C=D*O,h=w*D,g=h-(h-D),d=D-g,h=w*O,p=h-(h-O),f=O-p,E=d*f-(C-g*p-d*p-g*f),_=F*S,h=w*F,g=h-(h-F),d=F-g,h=w*S,p=h-(h-S),f=S-p,v=d*f-(_-g*p-d*p-g*f),m=E-v,u=E-m,R[0]=E-(m+u)+(u-v),I=C+m,u=I-C,y=C-(I-u)+(m-u),m=y-_,u=y-m,R[1]=y-(m+u)+(u-_),B=I+m,u=B-I,R[2]=I-(B-u)+(m-u),R[3]=B;let G=x(4,R),U=M*s;if(G>=U||-G>=U)return G;if(u=t-D,a=t-(D+u)+(u-r),u=n-S,l=n-(S+u)+(u-r),u=e-F,A=e-(F+u)+(u-o),u=i-O,c=i-(O+u)+(u-o),0===a&&0===A&&0===l&&0===c)return G;if(U=k*s+b*Math.abs(G),G+=D*c+O*a-(F*l+S*A),G>=U||-G>=U)return G;C=a*O,h=w*a,g=h-(h-a),d=a-g,h=w*O,p=h-(h-O),f=O-p,E=d*f-(C-g*p-d*p-g*f),_=A*S,h=w*A,g=h-(h-A),d=A-g,h=w*S,p=h-(h-S),f=S-p,v=d*f-(_-g*p-d*p-g*f),m=E-v,u=E-m,L[0]=E-(m+u)+(u-v),I=C+m,u=I-C,y=C-(I-u)+(m-u),m=y-_,u=y-m,L[1]=y-(m+u)+(u-_),B=I+m,u=B-I,L[2]=I-(B-u)+(m-u),L[3]=B;const j=Q(4,R,4,L,N);C=D*c,h=w*D,g=h-(h-D),d=D-g,h=w*c,p=h-(h-c),f=c-p,E=d*f-(C-g*p-d*p-g*f),_=F*l,h=w*F,g=h-(h-F),d=F-g,h=w*l,p=h-(h-l),f=l-p,v=d*f-(_-g*p-d*p-g*f),m=E-v,u=E-m,L[0]=E-(m+u)+(u-v),I=C+m,u=I-C,y=C-(I-u)+(m-u),m=y-_,u=y-m,L[1]=y-(m+u)+(u-_),B=I+m,u=B-I,L[2]=I-(B-u)+(m-u),L[3]=B;const Y=Q(j,N,4,L,P);C=a*c,h=w*a,g=h-(h-a),d=a-g,h=w*c,p=h-(h-c),f=c-p,E=d*f-(C-g*p-d*p-g*f),_=A*l,h=w*A,g=h-(h-A),d=A-g,h=w*l,p=h-(h-l),f=l-p,v=d*f-(_-g*p-d*p-g*f),m=E-v,u=E-m,L[0]=E-(m+u)+(u-v),I=C+m,u=I-C,y=C-(I-u)+(m-u),m=y-_,u=y-m,L[1]=y-(m+u)+(u-_),B=I+m,u=B-I,L[2]=I-(B-u)+(m-u),L[3]=B;const K=Q(Y,P,4,L,T);return T[K-1]}function O(t,e,n,i,r,o){const s=(e-o)*(n-r),a=(t-r)*(i-o),A=s-a,l=Math.abs(s+a);return Math.abs(A)>=S*l?A:-F(t,e,n,i,r,o,l)}const G=(t,e)=>t.x*e.y-t.y*e.x,U=(t,e)=>t.x*e.x+t.y*e.y,j=(t,e,n)=>{const i=O(t.x,t.y,e.x,e.y,n.x,n.y);return i>0?-1:i<0?1:0},Y=t=>Math.sqrt(U(t,t)),K=(t,e,n)=>{const i={x:e.x-t.x,y:e.y-t.y},r={x:n.x-t.x,y:n.y-t.y};return G(r,i)/Y(r)/Y(i)},z=(t,e,n)=>{const i={x:e.x-t.x,y:e.y-t.y},r={x:n.x-t.x,y:n.y-t.y};return U(r,i)/Y(r)/Y(i)},J=(t,e,n)=>0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n},q=(t,e,n)=>0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)},H=(t,e,n,i)=>{if(0===e.x)return q(n,i,t.x);if(0===i.x)return q(t,e,n.x);if(0===e.y)return J(n,i,t.y);if(0===i.y)return J(t,e,n.y);const r=G(e,i);if(0==r)return null;const o={x:n.x-t.x,y:n.y-t.y},s=G(o,e)/r,a=G(o,i)/r;return{x:(t.x+a*e.x+(n.x+s*i.x))/2,y:(t.y+a*e.y+(n.y+s*i.y))/2}};class V{static compare(t,e){const n=V.comparePoints(t.point,e.point);return 0!==n?n:(t.point!==e.point&&t.link(e),t.isLeft!==e.isLeft?t.isLeft?1:-1:Z.compare(t.segment,e.segment))}static comparePoints(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}constructor(t,e){void 0===t.events?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=e}link(t){if(t.point===this.point)throw new Error("Tried to link already linked events");const e=t.point.events;for(let t=0,n=e.length;t<n;t++){const n=e[t];this.point.events.push(n),n.point=this.point}this.checkForConsuming()}checkForConsuming(){const t=this.point.events.length;for(let e=0;e<t;e++){const n=this.point.events[e];if(void 0===n.segment.consumedBy)for(let i=e+1;i<t;i++){const t=this.point.events[i];void 0===t.consumedBy&&n.otherSE.point.events===t.otherSE.point.events&&n.segment.consume(t.segment)}}}getAvailableLinkedEvents(){const t=[];for(let e=0,n=this.point.events.length;e<n;e++){const n=this.point.events[e];n!==this&&!n.segment.ringOut&&n.segment.isInResult()&&t.push(n)}return t}getLeftmostComparator(t){const e=new Map,n=n=>{const i=n.otherSE;e.set(n,{sine:K(this.point,t.point,i.point),cosine:z(this.point,t.point,i.point)})};return(t,i)=>{e.has(t)||n(t),e.has(i)||n(i);const{sine:r,cosine:o}=e.get(t),{sine:s,cosine:a}=e.get(i);return r>=0&&s>=0?o<a?1:o>a?-1:0:r<0&&s<0?o<a?-1:o>a?1:0:s<r?-1:s>r?1:0}}}let W=0;class Z{static compare(t,e){const n=t.leftSE.point.x,i=e.leftSE.point.x,r=t.rightSE.point.x,o=e.rightSE.point.x;if(o<n)return 1;if(r<i)return-1;const s=t.leftSE.point.y,a=e.leftSE.point.y,A=t.rightSE.point.y,l=e.rightSE.point.y;if(n<i){if(a<s&&a<A)return 1;if(a>s&&a>A)return-1;const n=t.comparePoint(e.leftSE.point);if(n<0)return 1;if(n>0)return-1;const i=e.comparePoint(t.rightSE.point);return 0!==i?i:-1}if(n>i){if(s<a&&s<l)return-1;if(s>a&&s>l)return 1;const n=e.comparePoint(t.leftSE.point);if(0!==n)return n;const i=t.comparePoint(e.rightSE.point);return i<0?1:i>0?-1:1}if(s<a)return-1;if(s>a)return 1;if(r<o){const n=e.comparePoint(t.rightSE.point);if(0!==n)return n}if(r>o){const n=t.comparePoint(e.rightSE.point);if(n<0)return 1;if(n>0)return-1}if(r!==o){const t=A-s,e=r-n,c=l-a,u=o-i;if(t>e&&c<u)return 1;if(t<e&&c>u)return-1}return r>o?1:r<o||A<l?-1:A>l?1:t.id<e.id?-1:t.id>e.id?1:0}constructor(t,e,n,i){this.id=++W,this.leftSE=t,t.segment=this,t.otherSE=e,this.rightSE=e,e.segment=this,e.otherSE=t,this.rings=n,this.windings=i}static fromRing(t,e,n){let i,r,o;const s=V.comparePoints(t,e);if(s<0)i=t,r=e,o=1;else{if(!(s>0))throw new Error(`Tried to create degenerate segment at [${t.x}, ${t.y}]`);i=e,r=t,o=-1}const a=new V(i,!0),A=new V(r,!1);return new Z(a,A,[n],[o])}replaceRightSE(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}comparePoint(t){if(this.isAnEndpoint(t))return 0;const e=this.leftSE.point,n=this.rightSE.point,i=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;const r=(t.y-e.y)/i.y,o=e.x+r*i.x;if(t.x===o)return 0;const s=(t.x-e.x)/i.x,a=e.y+s*i.y;return t.y===a?0:t.y<a?-1:1}getIntersection(t){const e=this.bbox(),n=t.bbox(),i=m(e,n);if(null===i)return null;const r=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,a=t.rightSE.point,A=f(e,s)&&0===this.comparePoint(s),l=f(n,r)&&0===t.comparePoint(r),c=f(e,a)&&0===this.comparePoint(a),u=f(n,o)&&0===t.comparePoint(o);if(l&&A)return u&&!c?o:!u&&c?a:null;if(l)return c&&r.x===a.x&&r.y===a.y?null:r;if(A)return u&&o.x===s.x&&o.y===s.y?null:s;if(u&&c)return null;if(u)return o;if(c)return a;const h=H(r,this.vector(),s,t.vector());return null===h?null:f(i,h)?v.round(h.x,h.y):null}split(t){const e=[],n=void 0!==t.events,i=new V(t,!0),r=new V(t,!1),o=this.rightSE;this.replaceRightSE(r),e.push(r),e.push(i);const s=new Z(i,o,this.rings.slice(),this.windings.slice());return V.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),V.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),n&&(i.checkForConsuming(),r.checkForConsuming()),e}swapEvents(){const t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let t=0,e=this.windings.length;t<e;t++)this.windings[t]*=-1}consume(t){let e=this,n=t;for(;e.consumedBy;)e=e.consumedBy;for(;n.consumedBy;)n=n.consumedBy;const i=Z.compare(e,n);if(0!==i){if(i>0){const t=e;e=n,n=t}if(e.prev===n){const t=e;e=n,n=t}for(let t=0,i=n.rings.length;t<i;t++){const i=n.rings[t],r=n.windings[t],o=e.rings.indexOf(i);-1===o?(e.rings.push(i),e.windings.push(r)):e.windings[o]+=r}n.rings=null,n.windings=null,n.consumedBy=e,n.leftSE.consumedBy=e.leftSE,n.rightSE.consumedBy=e.rightSE}}prevInResult(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}beforeState(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){const t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}afterState(){if(void 0!==this._afterState)return this._afterState;const t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};const e=this._afterState.rings,n=this._afterState.windings,i=this._afterState.multiPolys;for(let t=0,i=this.rings.length;t<i;t++){const i=this.rings[t],r=this.windings[t],o=e.indexOf(i);-1===o?(e.push(i),n.push(r)):n[o]+=r}const r=[],o=[];for(let t=0,i=e.length;t<i;t++){if(0===n[t])continue;const i=e[t],s=i.poly;if(-1===o.indexOf(s))if(i.isExterior)r.push(s);else{-1===o.indexOf(s)&&o.push(s);const t=r.indexOf(i.poly);-1!==t&&r.splice(t,1)}}for(let t=0,e=r.length;t<e;t++){const e=r[t].multiPoly;-1===i.indexOf(e)&&i.push(e)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;const t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(At.type){case"union":{const n=0===t.length,i=0===e.length;this._isInResult=n!==i;break}case"intersection":{let n,i;t.length<e.length?(n=t.length,i=e.length):(n=e.length,i=t.length),this._isInResult=i===At.numMultiPolys&&n<i;break}case"xor":{const n=Math.abs(t.length-e.length);this._isInResult=n%2==1;break}case"difference":{const n=t=>1===t.length&&t[0].isSubject;this._isInResult=n(t)!==n(e);break}default:throw new Error(`Unrecognized operation type found ${At.type}`)}return this._isInResult}}class X{constructor(t,e,n){if(!Array.isArray(t)||0===t.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=e,this.isExterior=n,this.segments=[],"number"!=typeof t[0][0]||"number"!=typeof t[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const i=v.round(t[0][0],t[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};let r=i;for(let e=1,n=t.length;e<n;e++){if("number"!=typeof t[e][0]||"number"!=typeof t[e][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let n=v.round(t[e][0],t[e][1]);n.x===r.x&&n.y===r.y||(this.segments.push(Z.fromRing(r,n,this)),n.x<this.bbox.ll.x&&(this.bbox.ll.x=n.x),n.y<this.bbox.ll.y&&(this.bbox.ll.y=n.y),n.x>this.bbox.ur.x&&(this.bbox.ur.x=n.x),n.y>this.bbox.ur.y&&(this.bbox.ur.y=n.y),r=n)}i.x===r.x&&i.y===r.y||this.segments.push(Z.fromRing(r,i,this))}getSweepEvents(){const t=[];for(let e=0,n=this.segments.length;e<n;e++){const n=this.segments[e];t.push(n.leftSE),t.push(n.rightSE)}return t}}class ${constructor(t,e){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new X(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let e=1,n=t.length;e<n;e++){const n=new X(t[e],this,!1);n.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=n.bbox.ll.x),n.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=n.bbox.ll.y),n.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=n.bbox.ur.x),n.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=n.bbox.ur.y),this.interiorRings.push(n)}this.multiPoly=e}getSweepEvents(){const t=this.exteriorRing.getSweepEvents();for(let e=0,n=this.interiorRings.length;e<n;e++){const n=this.interiorRings[e].getSweepEvents();for(let e=0,i=n.length;e<i;e++)t.push(n[e])}return t}}class tt{constructor(t,e){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof t[0][0][0]&&(t=[t])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let e=0,n=t.length;e<n;e++){const n=new $(t[e],this);n.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=n.bbox.ll.x),n.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=n.bbox.ll.y),n.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=n.bbox.ur.x),n.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=n.bbox.ur.y),this.polys.push(n)}this.isSubject=e}getSweepEvents(){const t=[];for(let e=0,n=this.polys.length;e<n;e++){const n=this.polys[e].getSweepEvents();for(let e=0,i=n.length;e<i;e++)t.push(n[e])}return t}}class et{static factory(t){const e=[];for(let n=0,i=t.length;n<i;n++){const i=t[n];if(!i.isInResult()||i.ringOut)continue;let r=null,o=i.leftSE,s=i.rightSE;const a=[o],A=o.point,l=[];for(;r=o,o=s,a.push(o),o.point!==A;)for(;;){const t=o.getAvailableLinkedEvents();if(0===t.length){const t=a[0].point,e=a[a.length-1].point;throw new Error(`Unable to complete output ring starting at [${t.x}, ${t.y}]. Last matching segment found ends at [${e.x}, ${e.y}].`)}if(1===t.length){s=t[0].otherSE;break}let n=null;for(let t=0,e=l.length;t<e;t++)if(l[t].point===o.point){n=t;break}if(null!==n){const t=l.splice(n)[0],i=a.splice(t.index);i.unshift(i[0].otherSE),e.push(new et(i.reverse()));continue}l.push({index:a.length,point:o.point});const i=o.getLeftmostComparator(r);s=t.sort(i)[0].otherSE;break}e.push(new et(a))}return e}constructor(t){this.events=t;for(let e=0,n=t.length;e<n;e++)t[e].segment.ringOut=this;this.poly=null}getGeom(){let t=this.events[0].point;const e=[t];for(let n=1,i=this.events.length-1;n<i;n++){const i=this.events[n].point,r=this.events[n+1].point;0!==j(i,t,r)&&(e.push(i),t=i)}if(1===e.length)return null;const n=e[0],i=e[1];0===j(n,t,i)&&e.shift(),e.push(e[0]);const r=this.isExteriorRing()?1:-1,o=this.isExteriorRing()?0:e.length-1,s=this.isExteriorRing()?e.length:-1,a=[];for(let t=o;t!=s;t+=r)a.push([e[t].x,e[t].y]);return a}isExteriorRing(){if(void 0===this._isExteriorRing){const t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}enclosingRing(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let t=this.events[0];for(let e=1,n=this.events.length;e<n;e++){const n=this.events[e];V.compare(t,n)>0&&(t=n)}let e=t.segment.prevInResult(),n=e?e.prevInResult():null;for(;;){if(!e)return null;if(!n)return e.ringOut;if(n.ringOut!==e.ringOut)return n.ringOut.enclosingRing()!==e.ringOut?e.ringOut:e.ringOut.enclosingRing();e=n.prevInResult(),n=e?e.prevInResult():null}}}class nt{constructor(t){this.exteriorRing=t,t.poly=this,this.interiorRings=[]}addInterior(t){this.interiorRings.push(t),t.poly=this}getGeom(){const t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(let e=0,n=this.interiorRings.length;e<n;e++){const n=this.interiorRings[e].getGeom();null!==n&&t.push(n)}return t}}class it{constructor(t){this.rings=t,this.polys=this._composePolys(t)}getGeom(){const t=[];for(let e=0,n=this.polys.length;e<n;e++){const n=this.polys[e].getGeom();null!==n&&t.push(n)}return t}_composePolys(t){const e=[];for(let n=0,i=t.length;n<i;n++){const i=t[n];if(!i.poly)if(i.isExteriorRing())e.push(new nt(i));else{const t=i.enclosingRing();t.poly||e.push(new nt(t)),t.poly.addInterior(i)}}return e}}class rt{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z.compare;this.queue=t,this.tree=new l(e),this.segments=[]}process(t){const e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;const i=t.isLeft?this.tree.add(e):this.tree.find(e);if(!i)throw new Error(`Unable to find segment #${e.id} [${e.leftSE.point.x}, ${e.leftSE.point.y}] -> [${e.rightSE.point.x}, ${e.rightSE.point.y}] in SweepLine tree.`);let r,o,s=i,a=i;for(;void 0===r;)s=this.tree.prev(s),null===s?r=null:void 0===s.key.consumedBy&&(r=s.key);for(;void 0===o;)a=this.tree.next(a),null===a?o=null:void 0===a.key.consumedBy&&(o=a.key);if(t.isLeft){let i=null;if(r){const t=r.getIntersection(e);if(null!==t&&(e.isAnEndpoint(t)||(i=t),!r.isAnEndpoint(t))){const e=this._splitSafely(r,t);for(let t=0,i=e.length;t<i;t++)n.push(e[t])}}let s=null;if(o){const t=o.getIntersection(e);if(null!==t&&(e.isAnEndpoint(t)||(s=t),!o.isAnEndpoint(t))){const e=this._splitSafely(o,t);for(let t=0,i=e.length;t<i;t++)n.push(e[t])}}if(null!==i||null!==s){let t=null;t=null===i?s:null===s||V.comparePoints(i,s)<=0?i:s,this.queue.remove(e.rightSE),n.push(e.rightSE);const r=e.split(t);for(let t=0,e=r.length;t<e;t++)n.push(r[t])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=r)}else{if(r&&o){const t=r.getIntersection(o);if(null!==t){if(!r.isAnEndpoint(t)){const e=this._splitSafely(r,t);for(let t=0,i=e.length;t<i;t++)n.push(e[t])}if(!o.isAnEndpoint(t)){const e=this._splitSafely(o,t);for(let t=0,i=e.length;t<i;t++)n.push(e[t])}}}this.tree.remove(e)}return n}_splitSafely(t,e){this.tree.remove(t);const n=t.rightSE;this.queue.remove(n);const i=t.split(e);return i.push(n),void 0===t.consumedBy&&this.tree.add(t),i}}const ot=void 0!==i&&i.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,st=void 0!==i&&i.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;class at{run(t,e,n){At.type=t,v.reset();const i=[new tt(e,!0)];for(let t=0,e=n.length;t<e;t++)i.push(new tt(n[t],!1));if(At.numMultiPolys=i.length,"difference"===At.type){const t=i[0];let e=1;for(;e<i.length;)null!==m(i[e].bbox,t.bbox)?e++:i.splice(e,1)}if("intersection"===At.type)for(let t=0,e=i.length;t<e;t++){const e=i[t];for(let n=t+1,r=i.length;n<r;n++)if(null===m(e.bbox,i[n].bbox))return[]}const r=new l(V.compare);for(let t=0,e=i.length;t<e;t++){const e=i[t].getSweepEvents();for(let t=0,n=e.length;t<n;t++)if(r.insert(e[t]),r.size>ot)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const o=new rt(r);let s=r.size,a=r.pop();for(;a;){const t=a.key;if(r.size===s){const e=t.segment;throw new Error(`Unable to pop() ${t.isLeft?"left":"right"} SweepEvent [${t.point.x}, ${t.point.y}] from segment #${e.id} [${e.leftSE.point.x}, ${e.leftSE.point.y}] -> [${e.rightSE.point.x}, ${e.rightSE.point.y}] from queue.`)}if(r.size>ot)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(o.segments.length>st)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const e=o.process(t);for(let t=0,n=e.length;t<n;t++){const n=e[t];void 0===n.consumedBy&&r.insert(n)}s=r.size,a=r.pop()}v.reset();const A=et.factory(o.segments);return new it(A).getGeom()}}const At=new at,lt=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return At.run("union",t,n)},ct=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return At.run("intersection",t,n)},ut=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return At.run("xor",t,n)},ht=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return At.run("difference",t,n)};return{union:lt,intersection:ct,xor:ut,difference:ht}}()},8538:t=>{var e,n,i=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(e===setTimeout)return setTimeout(t,0);if((e===r||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:r}catch(t){e=r}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var a,A=[],l=!1,c=-1;function u(){l&&a&&(l=!1,a.length?A=a.concat(A):c=-1,A.length&&h())}function h(){if(!l){var t=s(u);l=!0;for(var e=A.length;e;){for(a=A,A=[];++c<e;)a&&a[c].run();c=-1,e=A.length}a=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{return n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function d(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];A.push(new g(t,e)),1!==A.length||l||s(h)},g.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=d,i.addListener=d,i.once=d,i.off=d,i.removeListener=d,i.removeAllListeners=d,i.emit=d,i.prependListener=d,i.prependOnceListener=d,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},7900:(t,e)=>{"use strict";function n(t,e,n){var i,r,o;if(0==e)i=r=o=n;else{var s=function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t},a=n<.5?n*(1+e):n+e-n*e,A=2*n-a;i=s(A,a,t+1/3),r=s(A,a,t),o=s(A,a,t-1/3)}return[Math.round(255*i),Math.round(255*r),Math.round(255*o)]}e.c=function(t,e){for(var i=e||{lum:50,sat:50},r=isNaN(i.lum)?50:i.lum,o=isNaN(i.sat)?50:i.sat,s=isNaN(t)?3:t,a=[],A=0;A<s;A++)e.rgb?a.push("rgb("+n(A/s,o/100,r/100).toString()+")"):a.push("HSL("+360*A/s+","+o+"%,"+r+"%)");return a}},6481:function(t){t.exports=function(){"use strict";function t(t,i,r,o,s){!function t(n,i,r,o,s){for(;o>r;){if(o-r>600){var a=o-r+1,A=i-r+1,l=Math.log(a),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(a-c)/a)*(A-a/2<0?-1:1);t(n,i,Math.max(r,Math.floor(i-A*c/a+u)),Math.min(o,Math.floor(i+(a-A)*c/a+u)),s)}var h=n[i],g=r,d=o;for(e(n,r,i),s(n[o],h)>0&&e(n,r,o);g<d;){for(e(n,g,d),g++,d--;s(n[g],h)<0;)g++;for(;s(n[d],h)>0;)d--}0===s(n[r],h)?e(n,r,d):e(n,++d,o),d<=i&&(r=d+1),i<=d&&(o=d-1)}}(t,i,r||0,o||t.length-1,s||n)}function e(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function n(t,e){return t<e?-1:t>e?1:0}var i=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function r(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function o(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,i,r){r||(r=d(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o=e;o<n;o++){var s=t.children[o];a(r,t.leaf?i(s):s)}return r}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function A(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function h(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function g(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function p(e,n,i,r,o){for(var s=[n,i];s.length;)if(!((i=s.pop())-(n=s.pop())<=r)){var a=n+Math.ceil((i-n)/r/2)*r;t(e,a,n,i,o),s.push(n,a,a,i)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(t){var e=this.data,n=[];if(!g(t,e))return n;for(var i=this.toBBox,r=[];e;){for(var o=0;o<e.children.length;o++){var s=e.children[o],a=e.leaf?i(s):s;g(t,a)&&(e.leaf?n.push(s):h(t,a)?this._all(s,n):r.push(s))}e=r.pop()}return n},i.prototype.collides=function(t){var e=this.data;if(!g(t,e))return!1;for(var n=[];e;){for(var i=0;i<e.children.length;i++){var r=e.children[i],o=e.leaf?this.toBBox(r):r;if(g(t,o)){if(e.leaf||h(t,o))return!0;n.push(r)}}e=n.pop()}return!1},i.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},i.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},i.prototype.clear=function(){return this.data=d([]),this},i.prototype.remove=function(t,e){if(!t)return this;for(var n,i,o,s=this.data,a=this.toBBox(t),A=[],l=[];s||A.length;){if(s||(s=A.pop(),i=A[A.length-1],n=l.pop(),o=!0),s.leaf){var c=r(t,s.children,e);if(-1!==c)return s.children.splice(c,1),A.push(s),this._condense(A),this}o||s.leaf||!h(s,a)?i?(n++,s=i.children[n],o=!1):s=null:(A.push(s),l.push(n),n=0,i=s,s=s.children[0])}return this},i.prototype.toBBox=function(t){return t},i.prototype.compareMinX=function(t,e){return t.minX-e.minX},i.prototype.compareMinY=function(t,e){return t.minY-e.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(t){return this.data=t,this},i.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},i.prototype._build=function(t,e,n,i){var r,s=n-e+1,a=this._maxEntries;if(s<=a)return o(r=d(t.slice(e,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,i-1))),(r=d([])).leaf=!1,r.height=i;var A=Math.ceil(s/a),l=A*Math.ceil(Math.sqrt(a));p(t,e,n,l,this.compareMinX);for(var c=e;c<=n;c+=l){var u=Math.min(c+l-1,n);p(t,c,u,A,this.compareMinY);for(var h=c;h<=u;h+=A){var g=Math.min(h+A-1,u);r.children.push(this._build(t,h,g,i-1))}}return o(r,this.toBBox),r},i.prototype._chooseSubtree=function(t,e,n,i){for(;i.push(e),!e.leaf&&i.length-1!==n;){for(var r=1/0,o=1/0,s=void 0,a=0;a<e.children.length;a++){var A=e.children[a],l=c(A),u=(h=t,g=A,(Math.max(g.maxX,h.maxX)-Math.min(g.minX,h.minX))*(Math.max(g.maxY,h.maxY)-Math.min(g.minY,h.minY))-l);u<o?(o=u,r=l<r?l:r,s=A):u===o&&l<r&&(r=l,s=A)}e=s||e.children[0]}var h,g;return e},i.prototype._insert=function(t,e,n){var i=n?t:this.toBBox(t),r=[],o=this._chooseSubtree(i,this.data,e,r);for(o.children.push(t),a(o,i);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(i,r,e)},i.prototype._split=function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var s=this._chooseSplitIndex(n,r,i),a=d(n.children.splice(s,n.children.length-s));a.height=n.height,a.leaf=n.leaf,o(n,this.toBBox),o(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},i.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(t,e,n){for(var i,r,o,a,A,l,u,h=1/0,g=1/0,d=e;d<=n-e;d++){var p=s(t,0,d,this.toBBox),f=s(t,d,n,this.toBBox),m=(r=p,o=f,a=void 0,A=void 0,l=void 0,u=void 0,a=Math.max(r.minX,o.minX),A=Math.max(r.minY,o.minY),l=Math.min(r.maxX,o.maxX),u=Math.min(r.maxY,o.maxY),Math.max(0,l-a)*Math.max(0,u-A)),I=c(p)+c(f);m<h?(h=m,i=d,g=I<g?I:g):m===h&&I<g&&(g=I,i=d)}return i||n-e},i.prototype._chooseSplitAxis=function(t,e,n){var i=t.leaf?this.compareMinX:A,r=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},i.prototype._allDistMargin=function(t,e,n,i){t.children.sort(i);for(var r=this.toBBox,o=s(t,0,e,r),A=s(t,n-e,n,r),l=u(o)+u(A),c=e;c<n-e;c++){var h=t.children[c];a(o,t.leaf?r(h):h),l+=u(o)}for(var g=n-e-1;g>=e;g--){var d=t.children[g];a(A,t.leaf?r(d):d),l+=u(A)}return l},i.prototype._adjustParentBBoxes=function(t,e,n){for(var i=n;i>=0;i--)a(e[i],t)},i.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},i}()},3516:(t,e,n)=>{"use strict";function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.CopyToClipboard=void 0;var r=a(n(5959)),o=a(n(5489)),s=["text","onCopy","options","children"];function a(t){return t&&t.__esModule?t:{default:t}}function A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function h(t,e){return h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},h(t,e)}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}(this,n)}}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},p(t)}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(A,t);var e,n,i,a=g(A);function A(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,A);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return f(d(t=a.call.apply(a,[this].concat(n))),"onClick",(function(e){var n=t.props,i=n.text,s=n.onCopy,a=n.children,A=n.options,l=r.default.Children.only(a),c=(0,o.default)(i,A);s&&s(i,c),l&&l.props&&"function"==typeof l.props.onClick&&l.props.onClick(e)})),t}return e=A,(n=[{key:"render",value:function(){var t=this.props,e=(t.text,t.onCopy,t.options,t.children),n=c(t,s),i=r.default.Children.only(e);return r.default.cloneElement(i,l(l({},n),{},{onClick:this.onClick}))}}])&&u(e.prototype,n),i&&u(e,i),Object.defineProperty(e,"prototype",{writable:!1}),A}(r.default.PureComponent);e.CopyToClipboard=m,f(m,"defaultProps",{onCopy:void 0,options:void 0})},5731:(t,e,n)=>{"use strict";var i=n(3516).CopyToClipboard;i.CopyToClipboard=i,t.exports=i},2341:(t,e,n)=>{t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}return n.m=t,n.c=e,n.p="",n(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(2),o=(i=r)&&i.__esModule?i:{default:i};e.default=o.default,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function r(t){return t&&t.__esModule?t:{default:t}}e.default=l;var o=n(3),s=r(n(4)),a=n(14),A=r(n(15));function l(t){var e=t.activeClassName,n=void 0===e?"":e,r=t.activeIndex,s=void 0===r?-1:r,l=t.activeStyle,c=t.autoEscape,u=t.caseSensitive,h=void 0!==u&&u,g=t.className,d=t.findChunks,p=t.highlightClassName,f=void 0===p?"":p,m=t.highlightStyle,I=void 0===m?{}:m,y=t.highlightTag,C=void 0===y?"mark":y,E=t.sanitize,_=t.searchWords,v=t.textToHighlight,B=t.unhighlightTag,w=void 0===B?"span":B,b=t.unhighlightClassName,Q=void 0===b?"":b,x=t.unhighlightStyle,D=function(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}(t,["activeClassName","activeIndex","activeStyle","autoEscape","caseSensitive","className","findChunks","highlightClassName","highlightStyle","highlightTag","sanitize","searchWords","textToHighlight","unhighlightTag","unhighlightClassName","unhighlightStyle"]),S=(0,o.findAll)({autoEscape:c,caseSensitive:h,findChunks:d,sanitize:E,searchWords:_,textToHighlight:v}),M=C,k=-1,R="",N=void 0,P=(0,A.default)((function(t){var e={};for(var n in t)e[n.toLowerCase()]=t[n];return e}));return(0,a.createElement)("span",i({className:g},D,{children:S.map((function(t,e){var i=v.substr(t.start,t.end-t.start);if(t.highlight){k++;var r=void 0;r="object"==typeof f?h?f[i]:(f=P(f))[i.toLowerCase()]:f;var o=k===+s;R=r+" "+(o?n:""),N=!0===o&&null!=l?Object.assign({},I,l):I;var A={children:i,className:R,key:e,style:N};return"string"!=typeof M&&(A.highlightIndex=k),(0,a.createElement)(M,A)}return(0,a.createElement)(w,{children:i,className:Q,key:e,style:x})}))}))}l.propTypes={activeClassName:s.default.string,activeIndex:s.default.number,activeStyle:s.default.object,autoEscape:s.default.bool,className:s.default.string,findChunks:s.default.func,highlightClassName:s.default.oneOfType([s.default.object,s.default.string]),highlightStyle:s.default.object,highlightTag:s.default.oneOfType([s.default.node,s.default.func,s.default.string]),sanitize:s.default.func,searchWords:s.default.arrayOf(s.default.oneOfType([s.default.string,s.default.instanceOf(RegExp)])).isRequired,textToHighlight:s.default.string.isRequired,unhighlightTag:s.default.oneOfType([s.default.node,s.default.func,s.default.string]),unhighlightClassName:s.default.string,unhighlightStyle:s.default.object},t.exports=e.default},function(t,e){t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}return n.m=t,n.c=e,n.p="",n(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2);Object.defineProperty(e,"combineChunks",{enumerable:!0,get:function(){return i.combineChunks}}),Object.defineProperty(e,"fillInChunks",{enumerable:!0,get:function(){return i.fillInChunks}}),Object.defineProperty(e,"findAll",{enumerable:!0,get:function(){return i.findAll}}),Object.defineProperty(e,"findChunks",{enumerable:!0,get:function(){return i.findChunks}})},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.findAll=function(t){var e=t.autoEscape,o=t.caseSensitive,s=void 0!==o&&o,a=t.findChunks,A=void 0===a?i:a,l=t.sanitize,c=t.searchWords,u=t.textToHighlight;return r({chunksToHighlight:n({chunks:A({autoEscape:e,caseSensitive:s,sanitize:l,searchWords:c,textToHighlight:u})}),totalLength:u?u.length:0})};var n=e.combineChunks=function(t){var e=t.chunks;return e=e.sort((function(t,e){return t.start-e.start})).reduce((function(t,e){if(0===t.length)return[e];var n=t.pop();if(e.start<=n.end){var i=Math.max(n.end,e.end);t.push({start:n.start,end:i})}else t.push(n,e);return t}),[])},i=function(t){var e=t.autoEscape,n=t.caseSensitive,i=t.sanitize,r=void 0===i?o:i,s=t.searchWords,a=t.textToHighlight;return a=r(a),s.filter((function(t){return t})).reduce((function(t,i){i=r(i),e&&(i=i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"));for(var o=new RegExp(i,n?"g":"gi"),s=void 0;s=o.exec(a);){var A=s.index,l=o.lastIndex;l>A&&t.push({start:A,end:l}),s.index==o.lastIndex&&o.lastIndex++}return t}),[])};e.findChunks=i;var r=e.fillInChunks=function(t){var e=t.chunksToHighlight,n=t.totalLength,i=[],r=function(t,e,n){e-t>0&&i.push({start:t,end:e,highlight:n})};if(0===e.length)r(0,n,!1);else{var o=0;e.forEach((function(t){r(o,t.start,!1),r(t.start,t.end,!0),o=t.end})),r(o,n,!1)}return i};function o(t){return t}}])},function(t,e,n){(function(e){if("production"!==e.env.NODE_ENV){var i="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;t.exports=n(6)((function(t){return"object"==typeof t&&null!==t&&t.$$typeof===i}),!0)}else t.exports=n(13)()}).call(e,n(5))},function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var A,l=[],c=!1,u=-1;function h(){c&&A&&(c=!1,A.length?l=A.concat(l):u=-1,l.length&&g())}function g(){if(!c){var t=a(h);c=!0;for(var e=l.length;e;){for(A=l,l=[];++u<e;)A&&A[u].run();u=-1,e=l.length}A=null,c=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{return i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function p(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new d(t,e)),1!==l.length||c||a(g)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){(function(e){"use strict";var i=n(7),r=n(8),o=n(9),s=n(10),a=n(11),A=n(12);t.exports=function(t,n){var l="function"==typeof Symbol&&Symbol.iterator,c="@@iterator";var u="<<anonymous>>",h={array:f("array"),bool:f("boolean"),func:f("function"),number:f("number"),object:f("object"),string:f("string"),symbol:f("symbol"),any:p(i.thatReturnsNull),arrayOf:function(t){return p((function(e,n,i,r,o){if("function"!=typeof t)return new d("Property `"+o+"` of component `"+i+"` has invalid PropType notation inside arrayOf.");var s=e[n];if(!Array.isArray(s))return new d("Invalid "+r+" `"+o+"` of type `"+I(s)+"` supplied to `"+i+"`, expected an array.");for(var A=0;A<s.length;A++){var l=t(s,A,i,r,o+"["+A+"]",a);if(l instanceof Error)return l}return null}))},element:p((function(e,n,i,r,o){var s=e[n];return t(s)?null:new d("Invalid "+r+" `"+o+"` of type `"+I(s)+"` supplied to `"+i+"`, expected a single ReactElement.")})),instanceOf:function(t){return p((function(e,n,i,r,o){if(!(e[n]instanceof t)){var s=t.name||u;return new d("Invalid "+r+" `"+o+"` of type `"+(((a=e[n]).constructor&&a.constructor.name?a.constructor.name:u)+"` supplied to `")+i+"`, expected instance of `"+s+"`.")}var a;return null}))},node:p((function(t,e,n,i,r){return m(t[e])?null:new d("Invalid "+i+" `"+r+"` supplied to `"+n+"`, expected a ReactNode.")})),objectOf:function(t){return p((function(e,n,i,r,o){if("function"!=typeof t)return new d("Property `"+o+"` of component `"+i+"` has invalid PropType notation inside objectOf.");var s=e[n],A=I(s);if("object"!==A)return new d("Invalid "+r+" `"+o+"` of type `"+A+"` supplied to `"+i+"`, expected an object.");for(var l in s)if(s.hasOwnProperty(l)){var c=t(s,l,i,r,o+"."+l,a);if(c instanceof Error)return c}return null}))},oneOf:function(t){if(!Array.isArray(t))return"production"!==e.env.NODE_ENV&&o(!1,"Invalid argument supplied to oneOf, expected an instance of array."),i.thatReturnsNull;return p((function(e,n,i,r,o){for(var s=e[n],a=0;a<t.length;a++)if(g(s,t[a]))return null;return new d("Invalid "+r+" `"+o+"` of value `"+s+"` supplied to `"+i+"`, expected one of "+JSON.stringify(t)+".")}))},oneOfType:function(t){if(!Array.isArray(t))return"production"!==e.env.NODE_ENV&&o(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),i.thatReturnsNull;for(var n=0;n<t.length;n++){var r=t[n];if("function"!=typeof r)return o(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",C(r),n),i.thatReturnsNull}return p((function(e,n,i,r,o){for(var s=0;s<t.length;s++)if(null==(0,t[s])(e,n,i,r,o,a))return null;return new d("Invalid "+r+" `"+o+"` supplied to `"+i+"`.")}))},shape:function(t){return p((function(e,n,i,r,o){var s=e[n],A=I(s);if("object"!==A)return new d("Invalid "+r+" `"+o+"` of type `"+A+"` supplied to `"+i+"`, expected `object`.");for(var l in t){var c=t[l];if(c){var u=c(s,l,i,r,o+"."+l,a);if(u)return u}}return null}))},exact:function(t){return p((function(e,n,i,r,o){var A=e[n],l=I(A);if("object"!==l)return new d("Invalid "+r+" `"+o+"` of type `"+l+"` supplied to `"+i+"`, expected `object`.");var c=s({},e[n],t);for(var u in c){var h=t[u];if(!h)return new d("Invalid "+r+" `"+o+"` key `"+u+"` supplied to `"+i+"`.\nBad object: "+JSON.stringify(e[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(t),null,"  "));var g=h(A,u,i,r,o+"."+u,a);if(g)return g}return null}))}};function g(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function d(t){this.message=t,this.stack=""}function p(t){if("production"!==e.env.NODE_ENV)var i={},s=0;function A(A,l,c,h,g,p,f){if(h=h||u,p=p||c,f!==a)if(n)r(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if("production"!==e.env.NODE_ENV&&"undefined"!=typeof console){var m=h+":"+c;!i[m]&&s<3&&(o(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",p,h),i[m]=!0,s++)}return null==l[c]?A?null===l[c]?new d("The "+g+" `"+p+"` is marked as required in `"+h+"`, but its value is `null`."):new d("The "+g+" `"+p+"` is marked as required in `"+h+"`, but its value is `undefined`."):null:t(l,c,h,g,p)}var l=A.bind(null,!1);return l.isRequired=A.bind(null,!0),l}function f(t){return p((function(e,n,i,r,o,s){var a=e[n];return I(a)!==t?new d("Invalid "+r+" `"+o+"` of type `"+y(a)+"` supplied to `"+i+"`, expected `"+t+"`."):null}))}function m(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(m);if(null===e||t(e))return!0;var n=function(t){var e=t&&(l&&t[l]||t[c]);if("function"==typeof e)return e}(e);if(!n)return!1;var i,r=n.call(e);if(n!==e.entries){for(;!(i=r.next()).done;)if(!m(i.value))return!1}else for(;!(i=r.next()).done;){var o=i.value;if(o&&!m(o[1]))return!1}return!0;default:return!1}}function I(t){var e=typeof t;return Array.isArray(t)?"array":t instanceof RegExp?"object":function(t,e){return"symbol"===t||"Symbol"===e["@@toStringTag"]||"function"==typeof Symbol&&e instanceof Symbol}(e,t)?"symbol":e}function y(t){if(null==t)return""+t;var e=I(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}function C(t){var e=y(t);switch(e){case"array":case"object":return"an "+e;case"boolean":case"date":case"regexp":return"a "+e;default:return e}}return d.prototype=Error.prototype,h.checkPropTypes=A,h.PropTypes=h,h}}).call(e,n(5))},function(t,e){"use strict";function n(t){return function(){return t}}var i=function(){};i.thatReturns=n,i.thatReturnsFalse=n(!1),i.thatReturnsTrue=n(!0),i.thatReturnsNull=n(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(t){return t},t.exports=i},function(t,e,n){(function(e){"use strict";var n=function(t){};"production"!==e.env.NODE_ENV&&(n=function(t){if(void 0===t)throw new Error("invariant requires an error message argument")}),t.exports=function(t,e,i,r,o,s,a,A){if(n(e),!t){var l;if(void 0===e)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[i,r,o,s,a,A],u=0;(l=new Error(e.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}}).call(e,n(5))},function(t,e,n){(function(e){"use strict";var i=n(7);if("production"!==e.env.NODE_ENV){var r=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=0,o="Warning: "+t.replace(/%s/g,(function(){return n[r++]}));"undefined"!=typeof console&&console.error(o);try{throw new Error(o)}catch(t){}};i=function(t,e){if(void 0===e)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==e.indexOf("Failed Composite propType: ")&&!t){for(var n=arguments.length,i=Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];r.apply(void 0,[e].concat(i))}}}t.exports=i}).call(e,n(5))},function(t,e){"use strict";var n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var o,s,a=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),A=1;A<arguments.length;A++){for(var l in o=Object(arguments[A]))i.call(o,l)&&(a[l]=o[l]);if(n){s=n(o);for(var c=0;c<s.length;c++)r.call(o,s[c])&&(a[s[c]]=o[s[c]])}}return a}},function(t,e){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){(function(e){"use strict";if("production"!==e.env.NODE_ENV)var i=n(8),r=n(9),o=n(11),s={};t.exports=function(t,n,a,A,l){if("production"!==e.env.NODE_ENV)for(var c in t)if(t.hasOwnProperty(c)){var u;try{i("function"==typeof t[c],"%s: %s type `%s` is invalid; it must be a function, usually from the `prop-types` package, but received `%s`.",A||"React class",a,c,typeof t[c]),u=t[c](n,c,A,a,null,o)}catch(t){u=t}if(r(!u||u instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",A||"React class",a,c,typeof u),u instanceof Error&&!(u.message in s)){s[u.message]=!0;var h=l?l():"";r(!1,"Failed %s type: %s%s",a,u.message,null!=h?h:"")}}}}).call(e,n(5))},function(t,e,n){"use strict";var i=n(7),r=n(8),o=n(11);t.exports=function(){function t(t,e,n,i,s,a){a!==o&&r(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=i,n.PropTypes=n,n}},function(t,e){t.exports=n(5959)},function(t,e){"use strict";var n=function(t,e){return t===e};t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,i=void 0,r=[],o=void 0,s=!1,a=function(t,n){return e(t,r[n])};return function(){for(var e=arguments.length,n=Array(e),A=0;A<e;A++)n[A]=arguments[A];return s&&i===this&&n.length===r.length&&n.every(a)?o:(s=!0,i=this,r=n,o=t.apply(this,n))}}}])},8299:(t,e)=>{"use strict";var n,i=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.server_context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.for("react.offscreen");function m(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case i:switch(t=t.type){case o:case a:case s:case h:case g:return t;default:switch(t=t&&t.$$typeof){case c:case l:case u:case p:case d:case A:return t;default:return e}}case r:return e}}}n=Symbol.for("react.module.reference"),e.ForwardRef=u,e.Memo=d,e.isFragment=function(t){return m(t)===o},e.isMemo=function(t){return m(t)===d}},4271:(t,e,n)=>{"use strict";t.exports=n(8299)},2192:(t,e,n)=>{"use strict";var i=n(5959),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,A={key:!0,ref:!0,__self:!0,__source:!0};function l(t,e,n){var i,o={},l=null,c=null;for(i in void 0!==n&&(l=""+n),void 0!==e.key&&(l=""+e.key),void 0!==e.ref&&(c=e.ref),e)s.call(e,i)&&!A.hasOwnProperty(i)&&(o[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps)void 0===o[i]&&(o[i]=e[i]);return{$$typeof:r,type:t,key:l,ref:c,props:o,_owner:a.current}}e.Fragment=o,e.jsx=l,e.jsxs=l},2540:(t,e,n)=>{"use strict";t.exports=n(2192)},1247:function(t,e){!function(t){"use strict";const e=134217729,n=33306690738754706e-32;function i(t,e,n,i,r){let o,s,a,A,l=e[0],c=i[0],u=0,h=0;c>l==c>-l?(o=l,l=e[++u]):(o=c,c=i[++h]);let g=0;if(u<t&&h<n)for(c>l==c>-l?(a=o-((s=l+o)-l),l=e[++u]):(a=o-((s=c+o)-c),c=i[++h]),o=s,0!==a&&(r[g++]=a);u<t&&h<n;)c>l==c>-l?(a=o-((s=o+l)-(A=s-o))+(l-A),l=e[++u]):(a=o-((s=o+c)-(A=s-o))+(c-A),c=i[++h]),o=s,0!==a&&(r[g++]=a);for(;u<t;)a=o-((s=o+l)-(A=s-o))+(l-A),l=e[++u],o=s,0!==a&&(r[g++]=a);for(;h<n;)a=o-((s=o+c)-(A=s-o))+(c-A),c=i[++h],o=s,0!==a&&(r[g++]=a);return 0===o&&0!==g||(r[g++]=o),g}function r(t){return new Float64Array(t)}const o=33306690738754716e-32,s=22204460492503146e-32,a=11093356479670487e-47,A=r(4),l=r(8),c=r(12),u=r(16),h=r(4);t.orient2d=function(t,r,g,d,p,f){const m=(r-f)*(g-p),I=(t-p)*(d-f),y=m-I;if(0===m||0===I||m>0!=I>0)return y;const C=Math.abs(m+I);return Math.abs(y)>=o*C?y:-function(t,r,o,g,d,p,f){let m,I,y,C,E,_,v,B,w,b,Q,x,D,S,M,k,R,N;const P=t-d,T=o-d,L=r-p,F=g-p;E=(M=(B=P-(v=(_=e*P)-(_-P)))*(b=F-(w=(_=e*F)-(_-F)))-((S=P*F)-v*w-B*w-v*b))-(Q=M-(R=(B=L-(v=(_=e*L)-(_-L)))*(b=T-(w=(_=e*T)-(_-T)))-((k=L*T)-v*w-B*w-v*b))),A[0]=M-(Q+E)+(E-R),E=(D=S-((x=S+Q)-(E=x-S))+(Q-E))-(Q=D-k),A[1]=D-(Q+E)+(E-k),E=(N=x+Q)-x,A[2]=x-(N-E)+(Q-E),A[3]=N;let O=function(t,e){let n=e[0];for(let i=1;i<t;i++)n+=e[i];return n}(4,A),G=s*f;if(O>=G||-O>=G)return O;if(m=t-(P+(E=t-P))+(E-d),y=o-(T+(E=o-T))+(E-d),I=r-(L+(E=r-L))+(E-p),C=g-(F+(E=g-F))+(E-p),0===m&&0===I&&0===y&&0===C)return O;if(G=a*f+n*Math.abs(O),(O+=P*C+F*m-(L*y+T*I))>=G||-O>=G)return O;E=(M=(B=m-(v=(_=e*m)-(_-m)))*(b=F-(w=(_=e*F)-(_-F)))-((S=m*F)-v*w-B*w-v*b))-(Q=M-(R=(B=I-(v=(_=e*I)-(_-I)))*(b=T-(w=(_=e*T)-(_-T)))-((k=I*T)-v*w-B*w-v*b))),h[0]=M-(Q+E)+(E-R),E=(D=S-((x=S+Q)-(E=x-S))+(Q-E))-(Q=D-k),h[1]=D-(Q+E)+(E-k),E=(N=x+Q)-x,h[2]=x-(N-E)+(Q-E),h[3]=N;const U=i(4,A,4,h,l);E=(M=(B=P-(v=(_=e*P)-(_-P)))*(b=C-(w=(_=e*C)-(_-C)))-((S=P*C)-v*w-B*w-v*b))-(Q=M-(R=(B=L-(v=(_=e*L)-(_-L)))*(b=y-(w=(_=e*y)-(_-y)))-((k=L*y)-v*w-B*w-v*b))),h[0]=M-(Q+E)+(E-R),E=(D=S-((x=S+Q)-(E=x-S))+(Q-E))-(Q=D-k),h[1]=D-(Q+E)+(E-k),E=(N=x+Q)-x,h[2]=x-(N-E)+(Q-E),h[3]=N;const j=i(U,l,4,h,c);E=(M=(B=m-(v=(_=e*m)-(_-m)))*(b=C-(w=(_=e*C)-(_-C)))-((S=m*C)-v*w-B*w-v*b))-(Q=M-(R=(B=I-(v=(_=e*I)-(_-I)))*(b=y-(w=(_=e*y)-(_-y)))-((k=I*y)-v*w-B*w-v*b))),h[0]=M-(Q+E)+(E-R),E=(D=S-((x=S+Q)-(E=x-S))+(Q-E))-(Q=D-k),h[1]=D-(Q+E)+(E-k),E=(N=x+Q)-x,h[2]=x-(N-E)+(Q-E),h[3]=N;const Y=i(j,c,4,h,u);return u[Y-1]}(t,r,g,d,p,f,C)},t.orient2dfast=function(t,e,n,i,r,o){return(e-o)*(n-r)-(t-r)*(i-o)},Object.defineProperty(t,"__esModule",{value:!0})}(e)},5292:t=>{"use strict";var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var o={},s=[],a=0;a<t.length;a++){var A=t[a],l=i.base?A[0]+i.base:A[0],c=o[l]||0,u="".concat(l," ").concat(c);o[l]=c+1;var h=n(u),g={css:A[1],media:A[2],sourceMap:A[3],supports:A[4],layer:A[5]};if(-1!==h)e[h].references++,e[h].updater(g);else{var d=r(g,i);i.byIndex=a,e.splice(a,0,{identifier:u,updater:d,references:1})}s.push(u)}return s}function r(t,e){var n=e.domAPI(e);n.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,r){var o=i(t=t||[],r=r||{});return function(t){t=t||[];for(var s=0;s<o.length;s++){var a=n(o[s]);e[a].references--}for(var A=i(t,r),l=0;l<o.length;l++){var c=n(o[l]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}o=A}}},9383:t=>{"use strict";var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},9088:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},6884:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},9893:t=>{"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,r&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},7997:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},4123:(t,e,n)=>{"use strict";function i(t,e,n,i,r,o,s){try{var a=t[o](s),A=a.value}catch(t){return void n(t)}a.done?e(A):Promise.resolve(A).then(i,r)}function r(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var s=t.apply(e,n);function a(t){i(s,r,o,a,A,"next",t)}function A(t){i(s,r,o,a,A,"throw",t)}a(void 0)}))}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){o(t,e,n[e])}))}return t}function a(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}n.d(e,{HY:()=>nr,Lz:()=>ir,PX:()=>Xi,TS:()=>Fr,Ye:()=>Zi,bP:()=>Hi}),t=n.hmd(t);var A=function(t,e){if(!t)throw new Error("No coordinates passed");return{type:"Feature",geometry:{type:"LineString",coordinates:t},properties:e||{}}};const l=u;function c(){const t=["value","590736JgtGCx","18gjamhW","970EUzwwZ","set","2194764EPljIs","4ahAhDY","get","3906WGtYDh","1045050HUWACd","18109PxEqcg","_keys","1417518iTekrI","8oDyqZK","1187543NetzUW"];return(c=function(){return t})()}function u(t,e){const n=c();return(u=function(t,e){return n[t-=246]})(t,e)}!function(t){const e=u,n=t();for(;;)try{if(-parseInt(e(260))/1*(parseInt(e(252))/2)+-parseInt(e(251))/3*(-parseInt(e(256))/4)+parseInt(e(253))/5*(parseInt(e(258))/6)+parseInt(e(249))/7+-parseInt(e(248))/8*(-parseInt(e(247))/9)+-parseInt(e(259))/10+-parseInt(e(255))/11==183347)break;n.push(n.shift())}catch(t){n.push(n.shift())}}(c);class h{[l(257)](t){var e;const n=l;return null==(e=this._keys.get(t))?void 0:e[n(250)]}[l(254)](t,e,n){const i=l,r=this[i(246)][i(257)](t);(void 0===r||n>r.version)&&this[i(246)][i(254)](t,{version:n,value:e()})}constructor(){this[u(246)]=new Map}}const g=p;!function(t){const e=p,n=t();for(;;)try{if(parseInt(e(457))/1+parseInt(e(450))/2+parseInt(e(447))/3+-parseInt(e(441))/4*(-parseInt(e(446))/5)+-parseInt(e(453))/6+parseInt(e(436))/7*(-parseInt(e(433))/8)+-parseInt(e(449))/9==388244)break;n.push(n.shift())}catch(t){n.push(n.shift())}}(m);const d={DEFAULT:g(434),HOVER:g(439),DRAGGING:g(442),SELECTED:g(445)};function p(t,e){const n=m();return(p=function(t,e){return n[t-=433]})(t,e)}const f={DEFAULT:g(434),HOVER:g(439),DRAGGING:"dragging",SELECTED:g(445)};function m(){const t=["3672392IdUxAy","default","MARKER","7rXrity","DONE","SPLINE_CURVE","hover","RECTANGLE","180MWBcMN","dragging","LINE","LABEL","selected","70315IvEyiD","577839OGORKF","PATH_ROUNDED_RECTANGLE","14571knGcTo","578812dbJEDl","CALCULATING","ROUNDED_RECTANGLE","2206590GQCoJg","START","FLOW","ICON","101823lGKQgr"];return(m=function(){return t})()}g(440),g(452),g(448),g(456),g(444),g(435),g(438),g(443),g(455),g(454),g(451),g(437);var I=C;function y(){var t=["getState","_directed","setDataProperty","addNode","DEFAULT","isEdge","hasOwnProperty","170928DUtcnJ","removeNode","404FjVQUS","6FouJDY","getId","36573uagTYZ","1260958TxAGDA","getPropertyValue","114533CGPmaV","2424115kJAqCq","5738894BuGsXz","setData","_sourceId","getConnectedNodes","10JtjFKc","state","_targetId","24GhOanO","_data","13561867yTQzlA","isDirected","_connectedNodes"];return(y=function(){return t})()}function C(t,e){var n=y();return(C=function(t,e){return n[t-=403]})(t,e)}!function(t){for(var e=C,n=t();;)try{if(730137===parseInt(e(430))/1+-parseInt(e(428))/2+-parseInt(e(427))/3*(-parseInt(e(424))/4)+-parseInt(e(431))/5*(-parseInt(e(425))/6)+parseInt(e(403))/7+parseInt(e(410))/8*(-parseInt(e(422))/9)+parseInt(e(407))/10*(-parseInt(e(412))/11))break;n.push(n.shift())}catch(t){n.push(n.shift())}}(y);class E{getId(){return this.id}[I(413)](){return this._directed}getSourceNodeId(){return this[I(405)]}getTargetNodeId(){return this._targetId}[I(429)](t){var e=I;return this.hasOwnProperty(t)?this[t]:this._data[e(421)](t)?this[e(411)][t]:void 0}[I(404)](t){this[I(411)]=t}[I(417)](t,e){this[I(411)][t]=e}setState(t){this[I(408)]=t}[I(415)](){return this.state}[I(418)](t){var e=I;this[e(414)][t[e(426)]()]=t}[I(423)](t){delete this[I(414)][t.getId()]}[I(406)](){return Object.values(this._connectedNodes)}constructor({id:t,sourceId:e,targetId:n,data:i,directed:r=!1}){var o=C;this[o(420)]=!0,this._connectedNodes={},this[o(408)]=f[o(419)],this.id=t,this._sourceId=e,this[o(409)]=n,this[o(416)]=r,this._data=i}}function _(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];throw new Error("number"==typeof t?"[MobX] minified error nr: "+t+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+t)}var v={};function B(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:v}var w=Object.assign,b=Object.getOwnPropertyDescriptor,Q=Object.defineProperty,x=Object.prototype,D=[];Object.freeze(D);var S={};Object.freeze(S);var M="undefined"!=typeof Proxy,k=Object.toString();function R(){M||_("Proxy not available")}function N(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}var P=function(){};function T(t){return"function"==typeof t}function L(t){switch(typeof t){case"string":case"symbol":case"number":return!0}return!1}function F(t){return null!==t&&"object"==typeof t}function O(t){if(!F(t))return!1;var e=Object.getPrototypeOf(t);if(null==e)return!0;var n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n.toString()===k}function G(t){var e=null==t?void 0:t.constructor;return!!e&&("GeneratorFunction"===e.name||"GeneratorFunction"===e.displayName)}function U(t,e,n){Q(t,e,{enumerable:!1,writable:!0,configurable:!0,value:n})}function j(t,e,n){Q(t,e,{enumerable:!1,writable:!1,configurable:!0,value:n})}function Y(t,e){var n="isMobX"+t;return e.prototype[n]=!0,function(t){return F(t)&&!0===t[n]}}function K(t){return null!=t&&"[object Map]"===Object.prototype.toString.call(t)}function z(t){return null!=t&&"[object Set]"===Object.prototype.toString.call(t)}var J=void 0!==Object.getOwnPropertySymbols;var q="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:J?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames;function H(t){return null===t?null:"object"==typeof t?""+t:t}function V(t,e){return x.hasOwnProperty.call(t,e)}var W=Object.getOwnPropertyDescriptors||function(t){var e={};return q(t).forEach((function(n){e[n]=b(t,n)})),e};function Z(t,e){return!!(t&e)}function X(t,e,n){return n?t|=e:t&=~e,t}function $(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function tt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,st(i.key),i)}}function et(t,e,n){return e&&tt(t.prototype,e),n&&tt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function nt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return $(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function it(){return it=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},it.apply(null,arguments)}function rt(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,ot(t,e)}function ot(t,e){return(ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function st(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}var at=Symbol("mobx-stored-annotations");function At(t){return Object.assign((function(e,n){if(ct(n))return t.decorate_20223_(e,n);lt(e,n,t)}),t)}function lt(t,e,n){V(t,at)||U(t,at,it({},t[at])),function(t){return t.annotationType_===It}(n)||(t[at][e]=n)}function ct(t){return"object"==typeof t&&"string"==typeof t.kind}var ut=Symbol("mobx administration"),ht=function(){function t(t){void 0===t&&(t="Atom"),this.name_=void 0,this.flags_=0,this.observers_=new Set,this.lastAccessedBy_=0,this.lowestObserverState_=fe.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=t}var e=t.prototype;return e.onBO=function(){this.onBOL&&this.onBOL.forEach((function(t){return t()}))},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(t){return t()}))},e.reportObserved=function(){return Oe(this)},e.reportChanged=function(){Le(),Ge(this),Fe()},e.toString=function(){return this.name_},et(t,[{key:"isBeingObserved",get:function(){return Z(this.flags_,t.isBeingObservedMask_)},set:function(e){this.flags_=X(this.flags_,t.isBeingObservedMask_,e)}},{key:"isPendingUnobservation",get:function(){return Z(this.flags_,t.isPendingUnobservationMask_)},set:function(e){this.flags_=X(this.flags_,t.isPendingUnobservationMask_,e)}},{key:"diffValue",get:function(){return Z(this.flags_,t.diffValueMask_)?1:0},set:function(e){this.flags_=X(this.flags_,t.diffValueMask_,1===e)}}])}();ht.isBeingObservedMask_=1,ht.isPendingUnobservationMask_=2,ht.diffValueMask_=4;var gt=Y("Atom",ht);function dt(t,e,n){void 0===e&&(e=P),void 0===n&&(n=P);var i=new ht(t);return e!==P&&function(t,e,n){An(on,t,e,n)}(i,e),n!==P&&an(i,n),i}var pt={identity:function(t,e){return t===e},structural:function(t,e){return Ii(t,e)},default:function(t,e){return Object.is?Object.is(t,e):t===e?0!==t||1/t==1/e:t!=t&&e!=e},shallow:function(t,e){return Ii(t,e,1)}};function ft(t,e,n){return mn(t)?t:Array.isArray(t)?$t.array(t,{name:n}):O(t)?$t.object(t,void 0,{name:n}):K(t)?$t.map(t,{name:n}):z(t)?$t.set(t,{name:n}):"function"!=typeof t||nn(t)||fn(t)?t:G(t)?dn(t):en(n,t)}function mt(t){return t}var It="override";function yt(t,e){return{annotationType_:t,options_:e,make_:Ct,extend_:Et,decorate_20223_:_t}}function Ct(t,e,n,i){var r;if(null!=(r=this.options_)&&r.bound)return null===this.extend_(t,e,n,!1)?0:1;if(i===t.target_)return null===this.extend_(t,e,n,!1)?0:2;if(nn(n.value))return 1;var o=vt(t,this,e,n,!1);return Q(i,e,o),2}function Et(t,e,n,i){var r=vt(t,this,e,n);return t.defineProperty_(e,r,i)}function _t(t,e){var n=e.kind,i=e.name,r=e.addInitializer,o=this;if("field"!=n){var s,a,A,l,c,u;if("method"==n)return nn(t)||(a=t,t=ce(null!=(A=null==(l=o.options_)?void 0:l.name)?A:i.toString(),a,null!=(c=null==(u=o.options_)?void 0:u.autoAction)&&c)),null!=(s=this.options_)&&s.bound&&r((function(){var t=this,e=t[i].bind(t);e.isMobxAction=!0,t[i]=e})),t;_("Cannot apply '"+o.annotationType_+"' to '"+String(i)+"' (kind: "+n+"):\n'"+o.annotationType_+"' can only be used on properties with a function value.")}else r((function(){lt(this,i,o)}))}function vt(t,e,n,i,r){var o,s,a,A,l,c,u;void 0===r&&(r=Re.safeDescriptors),function(t,e,n,i){e.annotationType_,i.value}(0,e,0,i);var h,g=i.value;null!=(o=e.options_)&&o.bound&&(g=g.bind(null!=(h=t.proxy_)?h:t.target_));return{value:ce(null!=(s=null==(a=e.options_)?void 0:a.name)?s:n.toString(),g,null!=(A=null==(l=e.options_)?void 0:l.autoAction)&&A,null!=(c=e.options_)&&c.bound?null!=(u=t.proxy_)?u:t.target_:void 0),configurable:!r||t.isPlainObject_,enumerable:!1,writable:!r}}function Bt(t,e){return{annotationType_:t,options_:e,make_:wt,extend_:bt,decorate_20223_:Qt}}function wt(t,e,n,i){var r;if(i===t.target_)return null===this.extend_(t,e,n,!1)?0:2;if(null!=(r=this.options_)&&r.bound&&(!V(t.target_,e)||!fn(t.target_[e]))&&null===this.extend_(t,e,n,!1))return 0;if(fn(n.value))return 1;var o=xt(t,this,e,n,!1,!1);return Q(i,e,o),2}function bt(t,e,n,i){var r,o=xt(t,this,e,n,null==(r=this.options_)?void 0:r.bound);return t.defineProperty_(e,o,i)}function Qt(t,e){var n,i=e.name,r=e.addInitializer;return fn(t)||(t=dn(t)),null!=(n=this.options_)&&n.bound&&r((function(){var t=this,e=t[i].bind(t);e.isMobXFlow=!0,t[i]=e})),t}function xt(t,e,n,i,r,o){void 0===o&&(o=Re.safeDescriptors),function(t,e,n,i){e.annotationType_,i.value}(0,e,0,i);var s,a=i.value;(fn(a)||(a=dn(a)),r)&&((a=a.bind(null!=(s=t.proxy_)?s:t.target_)).isMobXFlow=!0);return{value:a,configurable:!o||t.isPlainObject_,enumerable:!1,writable:!o}}function Dt(t,e){return{annotationType_:t,options_:e,make_:St,extend_:Mt,decorate_20223_:kt}}function St(t,e,n){return null===this.extend_(t,e,n,!1)?0:1}function Mt(t,e,n,i){return function(t,e,n,i){e.annotationType_,i.get}(0,this,0,n),t.defineComputedProperty_(e,it({},this.options_,{get:n.get,set:n.set}),i)}function kt(t,e){var n=this,i=e.name;return(0,e.addInitializer)((function(){var e=$n(this)[ut],r=it({},n.options_,{get:t,context:this});r.name||(r.name="ObservableObject."+i.toString()),e.values_.set(i,new pe(r))})),function(){return this[ut].getObservablePropValue_(i)}}function Rt(t,e){return{annotationType_:t,options_:e,make_:Nt,extend_:Pt,decorate_20223_:Tt}}function Nt(t,e,n){return null===this.extend_(t,e,n,!1)?0:1}function Pt(t,e,n,i){var r,o;return function(t,e){e.annotationType_}(0,this),t.defineObservableProperty_(e,n.value,null!=(r=null==(o=this.options_)?void 0:o.enhancer)?r:ft,i)}function Tt(t,e){var n=this,i=e.kind,r=e.name,o=new WeakSet;function s(t,e){var i,s,a=$n(t)[ut],A=new ge(e,null!=(i=null==(s=n.options_)?void 0:s.enhancer)?i:ft,"ObservableObject."+r.toString(),!1);a.values_.set(r,A),o.add(t)}if("accessor"==i)return{get:function(){return o.has(this)||s(this,t.get.call(this)),this[ut].getObservablePropValue_(r)},set:function(t){return o.has(this)||s(this,t),this[ut].setObservablePropValue_(r,t)},init:function(t){return o.has(this)||s(this,t),t}}}var Lt="true",Ft=Ot();function Ot(t){return{annotationType_:Lt,options_:t,make_:Gt,extend_:Ut,decorate_20223_:jt}}function Gt(t,e,n,i){var r,o,s,a;if(n.get)return ie.make_(t,e,n,i);if(n.set){var A=ce(e.toString(),n.set);return i===t.target_?null===t.defineProperty_(e,{configurable:!Re.safeDescriptors||t.isPlainObject_,set:A})?0:2:(Q(i,e,{configurable:!0,set:A}),2)}if(i!==t.target_&&"function"==typeof n.value)return G(n.value)?(null!=(a=this.options_)&&a.autoBind?dn.bound:dn).make_(t,e,n,i):(null!=(s=this.options_)&&s.autoBind?en.bound:en).make_(t,e,n,i);var l,c=!1===(null==(r=this.options_)?void 0:r.deep)?$t.ref:$t;"function"==typeof n.value&&null!=(o=this.options_)&&o.autoBind&&(n.value=n.value.bind(null!=(l=t.proxy_)?l:t.target_));return c.make_(t,e,n,i)}function Ut(t,e,n,i){var r,o,s;if(n.get)return ie.extend_(t,e,n,i);if(n.set)return t.defineProperty_(e,{configurable:!Re.safeDescriptors||t.isPlainObject_,set:ce(e.toString(),n.set)},i);"function"==typeof n.value&&null!=(r=this.options_)&&r.autoBind&&(n.value=n.value.bind(null!=(s=t.proxy_)?s:t.target_));return(!1===(null==(o=this.options_)?void 0:o.deep)?$t.ref:$t).extend_(t,e,n,i)}function jt(t,e){_("'"+this.annotationType_+"' cannot be used as a decorator")}var Yt={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function Kt(t){return t||Yt}Object.freeze(Yt);var zt=Rt("observable"),Jt=Rt("observable.ref",{enhancer:mt}),qt=Rt("observable.shallow",{enhancer:function(t,e,n){return null==t||ni(t)||Un(t)||Jn(t)||Vn(t)?t:Array.isArray(t)?$t.array(t,{name:n,deep:!1}):O(t)?$t.object(t,void 0,{name:n,deep:!1}):K(t)?$t.map(t,{name:n,deep:!1}):z(t)?$t.set(t,{name:n,deep:!1}):void 0}}),Ht=Rt("observable.struct",{enhancer:function(t,e){return Ii(t,e)?e:t}}),Vt=At(zt);function Wt(t){return!0===t.deep?ft:!1===t.deep?mt:function(t){var e,n;return t&&null!=(e=null==(n=t.options_)?void 0:n.enhancer)?e:ft}(t.defaultDecorator)}function Zt(t,e,n){return ct(e)?zt.decorate_20223_(t,e):L(e)?void lt(t,e,zt):mn(t)?t:O(t)?$t.object(t,e,n):Array.isArray(t)?$t.array(t,e):K(t)?$t.map(t,e):z(t)?$t.set(t,e):"object"==typeof t&&null!==t?t:$t.box(t,e)}w(Zt,Vt);var Xt={box:function(t,e){var n=Kt(e);return new ge(t,Wt(n),n.name,!0,n.equals)},array:function(t,e){var n=Kt(e);return(!1===Re.useProxies||!1===n.proxy?hi:Nn)(t,Wt(n),n.name)},map:function(t,e){var n=Kt(e);return new zn(t,Wt(n),n.name)},set:function(t,e){var n=Kt(e);return new Hn(t,Wt(n),n.name)},object:function(t,e,n){return fi((function(){return ln(!1===Re.useProxies||!1===(null==n?void 0:n.proxy)?$n({},n):function(t,e){var n,i;return R(),t=$n(t,e),null!=(i=(n=t[ut]).proxy_)?i:n.proxy_=new Proxy(t,_n)}({},n),t,e)}))},ref:At(Jt),shallow:At(qt),deep:Vt,struct:At(Ht)},$t=w(Zt,Xt),te="computed",ee=Dt(te),ne=Dt("computed.struct",{equals:pt.structural}),ie=function(t,e){if(ct(e))return ee.decorate_20223_(t,e);if(L(e))return lt(t,e,ee);if(O(t))return At(Dt(te,t));var n=O(e)?e:{};return n.get=t,n.name||(n.name=t.name||""),new pe(n)};Object.assign(ie,ee),ie.struct=At(ne);var re,oe,se=0,ae=1,Ae=null!=(re=null==(oe=b((function(){}),"name"))?void 0:oe.configurable)&&re,le={value:"action",configurable:!0,writable:!1,enumerable:!1};function ce(t,e,n,i){function r(){return function(t,e,n,i,r){var o=function(t,e){var n=!1,i=0,r=Re.trackingDerivation,o=!e||!r;Le();var s=Re.allowStateChanges;o&&(be(),s=ue(!0));var a=xe(!0),A={runAsAction_:o,prevDerivation_:r,prevAllowStateChanges_:s,prevAllowStateReads_:a,notifySpy_:n,startTime_:i,actionId_:ae++,parentActionId_:se};return se=A.actionId_,A}(0,e);try{return n.apply(i,r)}catch(t){throw o.error_=t,t}finally{!function(t){se!==t.actionId_&&_(30),se=t.parentActionId_,void 0!==t.error_&&(Re.suppressReactionErrors=!0),he(t.prevAllowStateChanges_),De(t.prevAllowStateReads_),Fe(),t.runAsAction_&&Qe(t.prevDerivation_),Re.suppressReactionErrors=!1}(o)}}(0,n,e,i||this,arguments)}return void 0===n&&(n=!1),r.isMobxAction=!0,r.toString=function(){return e.toString()},Ae&&(le.value=t,Q(r,"name",le)),r}function ue(t){var e=Re.allowStateChanges;return Re.allowStateChanges=t,e}function he(t){Re.allowStateChanges=t}var ge=function(t){function e(e,n,i,r,o){var s;return void 0===i&&(i="ObservableValue"),void 0===o&&(o=pt.default),(s=t.call(this,i)||this).enhancer=void 0,s.name_=void 0,s.equals=void 0,s.hasUnreportedChange_=!1,s.interceptors_=void 0,s.changeListeners_=void 0,s.value_=void 0,s.dehancer=void 0,s.enhancer=n,s.name_=i,s.equals=o,s.value_=n(e,void 0,i),s}rt(e,t);var n=e.prototype;return n.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},n.set=function(t){this.value_,(t=this.prepareNewValue_(t))!==Re.UNCHANGED&&this.setNewValue_(t)},n.prepareNewValue_=function(t){if(vn(this)){var e=wn(this,{object:this,type:Mn,newValue:t});if(!e)return Re.UNCHANGED;t=e.newValue}return t=this.enhancer(t,this.value_,this.name_),this.equals(this.value_,t)?Re.UNCHANGED:t},n.setNewValue_=function(t){var e=this.value_;this.value_=t,this.reportChanged(),bn(this)&&xn(this,{type:Mn,object:this,newValue:t,oldValue:e})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(t){return Bn(this,t)},n.observe_=function(t,e){return e&&t({observableKind:"value",debugObjectName:this.name_,object:this,type:Mn,newValue:this.value_,oldValue:void 0}),Qn(this,t)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return H(this.get())},n[Symbol.toPrimitive]=function(){return this.valueOf()},e}(ht),de=Y("ObservableValue",ge),pe=function(){function t(t){this.dependenciesState_=fe.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.observers_=new Set,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=fe.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Ce(null),this.name_=void 0,this.triggeredBy_=void 0,this.flags_=0,this.derivation=void 0,this.setter_=void 0,this.isTracing_=Ie.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,t.get||_(31),this.derivation=t.get,this.name_=t.name||"ComputedValue",t.set&&(this.setter_=ce("ComputedValue-setter",t.set)),this.equals_=t.equals||(t.compareStructural||t.struct?pt.structural:pt.default),this.scope_=t.context,this.requiresReaction_=t.requiresReaction,this.keepAlive_=!!t.keepAlive}var e=t.prototype;return e.onBecomeStale_=function(){!function(t){t.lowestObserverState_===fe.UP_TO_DATE_&&(t.lowestObserverState_=fe.POSSIBLY_STALE_,t.observers_.forEach((function(t){t.dependenciesState_===fe.UP_TO_DATE_&&(t.dependenciesState_=fe.POSSIBLY_STALE_,t.onBecomeStale_())})))}(this)},e.onBO=function(){this.onBOL&&this.onBOL.forEach((function(t){return t()}))},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(t){return t()}))},e.get=function(){if(this.isComputing&&_(32,this.name_,this.derivation),0!==Re.inBatch||0!==this.observers_.size||this.keepAlive_){if(Oe(this),_e(this)){var t=Re.trackingContext;this.keepAlive_&&!t&&(Re.trackingContext=this),this.trackAndCompute()&&function(t){t.lowestObserverState_!==fe.STALE_&&(t.lowestObserverState_=fe.STALE_,t.observers_.forEach((function(e){e.dependenciesState_===fe.POSSIBLY_STALE_?e.dependenciesState_=fe.STALE_:e.dependenciesState_===fe.UP_TO_DATE_&&(t.lowestObserverState_=fe.UP_TO_DATE_)})))}(this),Re.trackingContext=t}}else _e(this)&&(this.warnAboutUntrackedRead_(),Le(),this.value_=this.computeValue_(!1),Fe());var e=this.value_;if(Ee(e))throw e.cause;return e},e.set=function(t){if(this.setter_){this.isRunningSetter&&_(33,this.name_),this.isRunningSetter=!0;try{this.setter_.call(this.scope_,t)}finally{this.isRunningSetter=!1}}else _(34,this.name_)},e.trackAndCompute=function(){var t=this.value_,e=this.dependenciesState_===fe.NOT_TRACKING_,n=this.computeValue_(!0),i=e||Ee(t)||Ee(n)||!this.equals_(t,n);return i&&(this.value_=n),i},e.computeValue_=function(t){this.isComputing=!0;var e,n=ue(!1);if(t)e=ve(this,this.derivation,this.scope_);else if(!0===Re.disableErrorBoundaries)e=this.derivation.call(this.scope_);else try{e=this.derivation.call(this.scope_)}catch(t){e=new Ce(t)}return he(n),this.isComputing=!1,e},e.suspend_=function(){this.keepAlive_||(Be(this),this.value_=void 0)},e.observe_=function(t,e){var n=this,i=!0,r=void 0;return function(t,e){var n,i,r,o;void 0===e&&(e=S);var s,a=null!=(n=null==(i=e)?void 0:i.name)?n:"Autorun",A=!e.scheduler&&!e.delay;if(A)s=new Ue(a,(function(){this.track(u)}),e.onError,e.requiresObservable);else{var l=function(t){return t.scheduler?t.scheduler:t.delay?function(e){return setTimeout(e,t.delay)}:rn}(e),c=!1;s=new Ue(a,(function(){c||(c=!0,l((function(){c=!1,s.isDisposed||s.track(u)})))}),e.onError,e.requiresObservable)}function u(){t(s)}return null!=(r=e)&&null!=(r=r.signal)&&r.aborted||s.schedule_(),s.getDisposer_(null==(o=e)?void 0:o.signal)}((function(){var o=n.get();if(!i||e){var s=be();t({observableKind:"computed",debugObjectName:n.name_,type:Mn,object:n,newValue:o,oldValue:r}),Qe(s)}i=!1,r=o}))},e.warnAboutUntrackedRead_=function(){},e.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},e.valueOf=function(){return H(this.get())},e[Symbol.toPrimitive]=function(){return this.valueOf()},et(t,[{key:"isComputing",get:function(){return Z(this.flags_,t.isComputingMask_)},set:function(e){this.flags_=X(this.flags_,t.isComputingMask_,e)}},{key:"isRunningSetter",get:function(){return Z(this.flags_,t.isRunningSetterMask_)},set:function(e){this.flags_=X(this.flags_,t.isRunningSetterMask_,e)}},{key:"isBeingObserved",get:function(){return Z(this.flags_,t.isBeingObservedMask_)},set:function(e){this.flags_=X(this.flags_,t.isBeingObservedMask_,e)}},{key:"isPendingUnobservation",get:function(){return Z(this.flags_,t.isPendingUnobservationMask_)},set:function(e){this.flags_=X(this.flags_,t.isPendingUnobservationMask_,e)}},{key:"diffValue",get:function(){return Z(this.flags_,t.diffValueMask_)?1:0},set:function(e){this.flags_=X(this.flags_,t.diffValueMask_,1===e)}}])}();pe.isComputingMask_=1,pe.isRunningSetterMask_=2,pe.isBeingObservedMask_=4,pe.isPendingUnobservationMask_=8,pe.diffValueMask_=16;var fe,me,Ie,ye=Y("ComputedValue",pe);(me=fe||(fe={}))[me.NOT_TRACKING_=-1]="NOT_TRACKING_",me[me.UP_TO_DATE_=0]="UP_TO_DATE_",me[me.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",me[me.STALE_=2]="STALE_",function(t){t[t.NONE=0]="NONE",t[t.LOG=1]="LOG",t[t.BREAK=2]="BREAK"}(Ie||(Ie={}));var Ce=function(t){this.cause=void 0,this.cause=t};function Ee(t){return t instanceof Ce}function _e(t){switch(t.dependenciesState_){case fe.UP_TO_DATE_:return!1;case fe.NOT_TRACKING_:case fe.STALE_:return!0;case fe.POSSIBLY_STALE_:for(var e=xe(!0),n=be(),i=t.observing_,r=i.length,o=0;o<r;o++){var s=i[o];if(ye(s)){if(Re.disableErrorBoundaries)s.get();else try{s.get()}catch(t){return Qe(n),De(e),!0}if(t.dependenciesState_===fe.STALE_)return Qe(n),De(e),!0}}return Se(t),Qe(n),De(e),!1}}function ve(t,e,n){var i=xe(!0);Se(t),t.newObserving_=new Array(0===t.runId_?100:t.observing_.length),t.unboundDepsCount_=0,t.runId_=++Re.runId;var r,o=Re.trackingDerivation;if(Re.trackingDerivation=t,Re.inBatch++,!0===Re.disableErrorBoundaries)r=e.call(n);else try{r=e.call(n)}catch(t){r=new Ce(t)}return Re.inBatch--,Re.trackingDerivation=o,function(t){for(var e=t.observing_,n=t.observing_=t.newObserving_,i=fe.UP_TO_DATE_,r=0,o=t.unboundDepsCount_,s=0;s<o;s++){var a=n[s];0===a.diffValue&&(a.diffValue=1,r!==s&&(n[r]=a),r++),a.dependenciesState_>i&&(i=a.dependenciesState_)}for(n.length=r,t.newObserving_=null,o=e.length;o--;){var A=e[o];0===A.diffValue&&Pe(A,t),A.diffValue=0}for(;r--;){var l=n[r];1===l.diffValue&&(l.diffValue=0,Ne(l,t))}i!==fe.UP_TO_DATE_&&(t.dependenciesState_=i,t.onBecomeStale_())}(t),De(i),r}function Be(t){var e=t.observing_;t.observing_=[];for(var n=e.length;n--;)Pe(e[n],t);t.dependenciesState_=fe.NOT_TRACKING_}function we(t){var e=be();try{return t()}finally{Qe(e)}}function be(){var t=Re.trackingDerivation;return Re.trackingDerivation=null,t}function Qe(t){Re.trackingDerivation=t}function xe(t){var e=Re.allowStateReads;return Re.allowStateReads=t,e}function De(t){Re.allowStateReads=t}function Se(t){if(t.dependenciesState_!==fe.UP_TO_DATE_){t.dependenciesState_=fe.UP_TO_DATE_;for(var e=t.observing_,n=e.length;n--;)e[n].lowestObserverState_=fe.UP_TO_DATE_}}var Me=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},ke=!0,Re=function(){var t=B();return t.__mobxInstanceCount>0&&!t.__mobxGlobals&&(ke=!1),t.__mobxGlobals&&t.__mobxGlobals.version!==(new Me).version&&(ke=!1),ke?t.__mobxGlobals?(t.__mobxInstanceCount+=1,t.__mobxGlobals.UNCHANGED||(t.__mobxGlobals.UNCHANGED={}),t.__mobxGlobals):(t.__mobxInstanceCount=1,t.__mobxGlobals=new Me):(setTimeout((function(){_(35)}),1),new Me)}();function Ne(t,e){t.observers_.add(e),t.lowestObserverState_>e.dependenciesState_&&(t.lowestObserverState_=e.dependenciesState_)}function Pe(t,e){t.observers_.delete(e),0===t.observers_.size&&Te(t)}function Te(t){!1===t.isPendingUnobservation&&(t.isPendingUnobservation=!0,Re.pendingUnobservations.push(t))}function Le(){Re.inBatch++}function Fe(){if(0==--Re.inBatch){Ke();for(var t=Re.pendingUnobservations,e=0;e<t.length;e++){var n=t[e];n.isPendingUnobservation=!1,0===n.observers_.size&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBUO()),n instanceof pe&&n.suspend_())}Re.pendingUnobservations=[]}}function Oe(t){var e=Re.trackingDerivation;return null!==e?(e.runId_!==t.lastAccessedBy_&&(t.lastAccessedBy_=e.runId_,e.newObserving_[e.unboundDepsCount_++]=t,!t.isBeingObserved&&Re.trackingContext&&(t.isBeingObserved=!0,t.onBO())),t.isBeingObserved):(0===t.observers_.size&&Re.inBatch>0&&Te(t),!1)}function Ge(t){t.lowestObserverState_!==fe.STALE_&&(t.lowestObserverState_=fe.STALE_,t.observers_.forEach((function(t){t.dependenciesState_===fe.UP_TO_DATE_&&t.onBecomeStale_(),t.dependenciesState_=fe.STALE_})))}var Ue=function(){function t(t,e,n,i){void 0===t&&(t="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=fe.NOT_TRACKING_,this.runId_=0,this.unboundDepsCount_=0,this.flags_=0,this.isTracing_=Ie.NONE,this.name_=t,this.onInvalidate_=e,this.errorHandler_=n,this.requiresObservable_=i}var e=t.prototype;return e.onBecomeStale_=function(){this.schedule_()},e.schedule_=function(){this.isScheduled||(this.isScheduled=!0,Re.pendingReactions.push(this),Ke())},e.runReaction_=function(){if(!this.isDisposed){Le(),this.isScheduled=!1;var t=Re.trackingContext;if(Re.trackingContext=this,_e(this)){this.isTrackPending=!0;try{this.onInvalidate_()}catch(t){this.reportExceptionInDerivation_(t)}}Re.trackingContext=t,Fe()}},e.track=function(t){if(!this.isDisposed){Le(),this.isRunning=!0;var e=Re.trackingContext;Re.trackingContext=this;var n=ve(this,t,void 0);Re.trackingContext=e,this.isRunning=!1,this.isTrackPending=!1,this.isDisposed&&Be(this),Ee(n)&&this.reportExceptionInDerivation_(n.cause),Fe()}},e.reportExceptionInDerivation_=function(t){var e=this;if(this.errorHandler_)this.errorHandler_(t,this);else{if(Re.disableErrorBoundaries)throw t;var n="[mobx] uncaught error in '"+this+"'";Re.suppressReactionErrors||console.error(n,t),Re.globalReactionErrorHandlers.forEach((function(n){return n(t,e)}))}},e.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.isRunning||(Le(),Be(this),Fe()))},e.getDisposer_=function(t){var e=this,n=function n(){e.dispose(),null==t||null==t.removeEventListener||t.removeEventListener("abort",n)};return null==t||null==t.addEventListener||t.addEventListener("abort",n),n[ut]=this,n},e.toString=function(){return"Reaction["+this.name_+"]"},e.trace=function(t){},et(t,[{key:"isDisposed",get:function(){return Z(this.flags_,t.isDisposedMask_)},set:function(e){this.flags_=X(this.flags_,t.isDisposedMask_,e)}},{key:"isScheduled",get:function(){return Z(this.flags_,t.isScheduledMask_)},set:function(e){this.flags_=X(this.flags_,t.isScheduledMask_,e)}},{key:"isTrackPending",get:function(){return Z(this.flags_,t.isTrackPendingMask_)},set:function(e){this.flags_=X(this.flags_,t.isTrackPendingMask_,e)}},{key:"isRunning",get:function(){return Z(this.flags_,t.isRunningMask_)},set:function(e){this.flags_=X(this.flags_,t.isRunningMask_,e)}},{key:"diffValue",get:function(){return Z(this.flags_,t.diffValueMask_)?1:0},set:function(e){this.flags_=X(this.flags_,t.diffValueMask_,1===e)}}])}();Ue.isDisposedMask_=1,Ue.isScheduledMask_=2,Ue.isTrackPendingMask_=4,Ue.isRunningMask_=8,Ue.diffValueMask_=16;var je=100,Ye=function(t){return t()};function Ke(){Re.inBatch>0||Re.isRunningReactions||Ye(ze)}function ze(){Re.isRunningReactions=!0;for(var t=Re.pendingReactions,e=0;t.length>0;){++e===je&&(console.error("[mobx] cycle in reaction: "+t[0]),t.splice(0));for(var n=t.splice(0),i=0,r=n.length;i<r;i++)n[i].runReaction_()}Re.isRunningReactions=!1}var Je=Y("Reaction",Ue);var qe="action",He="autoAction",Ve=yt(qe),We=yt("action.bound",{bound:!0}),Ze=yt(He,{autoAction:!0}),Xe=yt("autoAction.bound",{autoAction:!0,bound:!0});function $e(t){return function(e,n){return T(e)?ce(e.name||"<unnamed action>",e,t):T(n)?ce(e,n,t):ct(n)?(t?Ze:Ve).decorate_20223_(e,n):L(n)?lt(e,n,t?Ze:Ve):L(e)?At(yt(t?He:qe,{name:e,autoAction:t})):void 0}}var tn=$e(!1);Object.assign(tn,Ve);var en=$e(!0);function nn(t){return T(t)&&!0===t.isMobxAction}Object.assign(en,Ze),tn.bound=At(We),en.bound=At(Xe);var rn=function(t){return t()};var on="onBO",sn="onBUO";function an(t,e,n){return An(sn,t,e,n)}function An(t,e,n,i){var r="function"==typeof i?gi(e,n):gi(e),o=T(i)?i:n,s=t+"L";return r[s]?r[s].add(o):r[s]=new Set([o]),function(){var t=r[s];t&&(t.delete(o),0===t.size&&delete r[s])}}function ln(t,e,n,i){var r=W(e);return fi((function(){var e=$n(t,i)[ut];q(r).forEach((function(t){e.extend_(t,r[t],!n||!(t in n)||n[t])}))})),t}var cn=0;function un(){this.message="FLOW_CANCELLED"}un.prototype=Object.create(Error.prototype);var hn=Bt("flow"),gn=Bt("flow.bound",{bound:!0}),dn=Object.assign((function(t,e){if(ct(e))return hn.decorate_20223_(t,e);if(L(e))return lt(t,e,hn);var n=t,i=n.name||"<unnamed flow>",r=function(){var t,e=arguments,r=++cn,o=tn(i+" - runid: "+r+" - init",n).apply(this,e),s=void 0,a=new Promise((function(e,n){var a=0;function A(t){var e;s=void 0;try{e=tn(i+" - runid: "+r+" - yield "+a++,o.next).call(o,t)}catch(t){return n(t)}c(e)}function l(t){var e;s=void 0;try{e=tn(i+" - runid: "+r+" - yield "+a++,o.throw).call(o,t)}catch(t){return n(t)}c(e)}function c(t){if(!T(null==t?void 0:t.then))return t.done?e(t.value):(s=Promise.resolve(t.value)).then(A,l);t.then(c,n)}t=n,A(void 0)}));return a.cancel=tn(i+" - runid: "+r+" - cancel",(function(){try{s&&pn(s);var e=o.return(void 0),n=Promise.resolve(e.value);n.then(P,P),pn(n),t(new un)}catch(e){t(e)}})),a};return r.isMobXFlow=!0,r}),hn);function pn(t){T(t.cancel)&&t.cancel()}function fn(t){return!0===(null==t?void 0:t.isMobXFlow)}function mn(t){return function(t,e){return!!t&&(void 0!==e?!!ni(t)&&t[ut].values_.has(e):ni(t)||!!t[ut]||gt(t)||Je(t)||ye(t))}(t)}function In(t,e,n){return t.set(e,n),n}function yn(t,e){if(null==t||"object"!=typeof t||t instanceof Date||!mn(t))return t;if(de(t)||ye(t))return yn(t.get(),e);if(e.has(t))return e.get(t);if(Un(t)){var n=In(e,t,new Array(t.length));return t.forEach((function(t,i){n[i]=yn(t,e)})),n}if(Vn(t)){var i=In(e,t,new Set);return t.forEach((function(t){i.add(yn(t,e))})),i}if(Jn(t)){var r=In(e,t,new Map);return t.forEach((function(t,n){r.set(n,yn(t,e))})),r}var o=In(e,t,{});return function(t){if(ni(t))return t[ut].ownKeys_();_(38)}(t).forEach((function(n){x.propertyIsEnumerable.call(t,n)&&(o[n]=yn(t[n],e))})),o}function Cn(t,e){void 0===e&&(e=void 0),Le();try{return t.apply(e)}finally{Fe()}}function En(t){return t[ut]}dn.bound=At(gn);var _n={has:function(t,e){return En(t).has_(e)},get:function(t,e){return En(t).get_(e)},set:function(t,e,n){var i;return!!L(e)&&(null==(i=En(t).set_(e,n,!0))||i)},deleteProperty:function(t,e){var n;return!!L(e)&&(null==(n=En(t).delete_(e,!0))||n)},defineProperty:function(t,e,n){var i;return null==(i=En(t).defineProperty_(e,n))||i},ownKeys:function(t){return En(t).ownKeys_()},preventExtensions:function(t){_(13)}};function vn(t){return void 0!==t.interceptors_&&t.interceptors_.length>0}function Bn(t,e){var n=t.interceptors_||(t.interceptors_=[]);return n.push(e),N((function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}))}function wn(t,e){var n=be();try{for(var i=[].concat(t.interceptors_||[]),r=0,o=i.length;r<o&&((e=i[r](e))&&!e.type&&_(14),e);r++);return e}finally{Qe(n)}}function bn(t){return void 0!==t.changeListeners_&&t.changeListeners_.length>0}function Qn(t,e){var n=t.changeListeners_||(t.changeListeners_=[]);return n.push(e),N((function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}))}function xn(t,e){var n=be(),i=t.changeListeners_;if(i){for(var r=0,o=(i=i.slice()).length;r<o;r++)i[r](e);Qe(n)}}var Dn=Symbol("mobx-keys");var Sn="splice",Mn="update",kn={get:function(t,e){var n=t[ut];return e===ut?n:"length"===e?n.getArrayLength_():"string"!=typeof e||isNaN(e)?V(Pn,e)?Pn[e]:t[e]:n.get_(parseInt(e))},set:function(t,e,n){var i=t[ut];return"length"===e&&i.setArrayLength_(n),"symbol"==typeof e||isNaN(e)?t[e]=n:i.set_(parseInt(e),n),!0},preventExtensions:function(){_(15)}},Rn=function(){function t(t,e,n,i){void 0===t&&(t="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=i,this.atom_=new ht(t),this.enhancer_=function(t,n){return e(t,n,"ObservableArray[..]")}}var e=t.prototype;return e.dehanceValue_=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.dehanceValues_=function(t){return void 0!==this.dehancer&&t.length>0?t.map(this.dehancer):t},e.intercept_=function(t){return Bn(this,t)},e.observe_=function(t,e){return void 0===e&&(e=!1),e&&t({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),Qn(this,t)},e.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},e.setArrayLength_=function(t){("number"!=typeof t||isNaN(t)||t<0)&&_("Out of range: "+t);var e=this.values_.length;if(t!==e)if(t>e){for(var n=new Array(t-e),i=0;i<t-e;i++)n[i]=void 0;this.spliceWithArray_(e,0,n)}else this.spliceWithArray_(t,e-t)},e.updateArrayLength_=function(t,e){t!==this.lastKnownLength_&&_(16),this.lastKnownLength_+=e,this.legacyMode_&&e>0&&ui(t+e+1)},e.spliceWithArray_=function(t,e,n){var i=this;this.atom_;var r=this.values_.length;if(void 0===t?t=0:t>r?t=r:t<0&&(t=Math.max(0,r+t)),e=1===arguments.length?r-t:null==e?0:Math.max(0,Math.min(e,r-t)),void 0===n&&(n=D),vn(this)){var o=wn(this,{object:this.proxy_,type:Sn,index:t,removedCount:e,added:n});if(!o)return D;e=o.removedCount,n=o.added}if(n=0===n.length?n:n.map((function(t){return i.enhancer_(t,void 0)})),this.legacyMode_){var s=n.length-e;this.updateArrayLength_(r,s)}var a=this.spliceItemsIntoValues_(t,e,n);return(0!==e||0!==n.length)&&this.notifyArraySplice_(t,n,a),this.dehanceValues_(a)},e.spliceItemsIntoValues_=function(t,e,n){var i;if(n.length<1e4)return(i=this.values_).splice.apply(i,[t,e].concat(n));var r=this.values_.slice(t,t+e),o=this.values_.slice(t+e);this.values_.length+=n.length-e;for(var s=0;s<n.length;s++)this.values_[t+s]=n[s];for(var a=0;a<o.length;a++)this.values_[t+n.length+a]=o[a];return r},e.notifyArrayChildUpdate_=function(t,e,n){var i=!this.owned_&&!1,r=bn(this),o=r||i?{observableKind:"array",object:this.proxy_,type:Mn,debugObjectName:this.atom_.name_,index:t,newValue:e,oldValue:n}:null;this.atom_.reportChanged(),r&&xn(this,o)},e.notifyArraySplice_=function(t,e,n){var i=!this.owned_&&!1,r=bn(this),o=r||i?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:Sn,index:t,removed:n,added:e,removedCount:n.length,addedCount:e.length}:null;this.atom_.reportChanged(),r&&xn(this,o)},e.get_=function(t){if(!(this.legacyMode_&&t>=this.values_.length))return this.atom_.reportObserved(),this.dehanceValue_(this.values_[t]);console.warn("[mobx] Out of bounds read: "+t)},e.set_=function(t,e){var n=this.values_;if(this.legacyMode_&&t>n.length&&_(17,t,n.length),t<n.length){this.atom_;var i=n[t];if(vn(this)){var r=wn(this,{type:Mn,object:this.proxy_,index:t,newValue:e});if(!r)return;e=r.newValue}(e=this.enhancer_(e,i))!==i&&(n[t]=e,this.notifyArrayChildUpdate_(t,e,i))}else{for(var o=new Array(t+1-n.length),s=0;s<o.length-1;s++)o[s]=void 0;o[o.length-1]=e,this.spliceWithArray_(n.length,0,o)}},t}();function Nn(t,e,n,i){return void 0===n&&(n="ObservableArray"),void 0===i&&(i=!1),R(),fi((function(){var r=new Rn(n,e,i,!1);j(r.values_,ut,r);var o=new Proxy(r.values_,kn);return r.proxy_=o,t&&t.length&&r.spliceWithArray_(0,0,t),o}))}var Pn={clear:function(){return this.splice(0)},replace:function(t){var e=this[ut];return e.spliceWithArray_(0,e.values_.length,t)},toJSON:function(){return this.slice()},splice:function(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var o=this[ut];switch(arguments.length){case 0:return[];case 1:return o.spliceWithArray_(t);case 2:return o.spliceWithArray_(t,e)}return o.spliceWithArray_(t,e,i)},spliceWithArray:function(t,e,n){return this[ut].spliceWithArray_(t,e,n)},push:function(){for(var t=this[ut],e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.spliceWithArray_(t.values_.length,0,n),t.values_.length},pop:function(){return this.splice(Math.max(this[ut].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=this[ut],e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.spliceWithArray_(0,0,n),t.values_.length},reverse:function(){return Re.trackingDerivation&&_(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){Re.trackingDerivation&&_(37,"sort");var t=this.slice();return t.sort.apply(t,arguments),this.replace(t),this},remove:function(t){var e=this[ut],n=e.dehanceValues_(e.values_).indexOf(t);return n>-1&&(this.splice(n,1),!0)}};function Tn(t,e){"function"==typeof Array.prototype[t]&&(Pn[t]=e(t))}function Ln(t){return function(){var e=this[ut];e.atom_.reportObserved();var n=e.dehanceValues_(e.values_);return n[t].apply(n,arguments)}}function Fn(t){return function(e,n){var i=this,r=this[ut];return r.atom_.reportObserved(),r.dehanceValues_(r.values_)[t]((function(t,r){return e.call(n,t,r,i)}))}}function On(t){return function(){var e=this,n=this[ut];n.atom_.reportObserved();var i=n.dehanceValues_(n.values_),r=arguments[0];return arguments[0]=function(t,n,i){return r(t,n,i,e)},i[t].apply(i,arguments)}}Tn("at",Ln),Tn("concat",Ln),Tn("flat",Ln),Tn("includes",Ln),Tn("indexOf",Ln),Tn("join",Ln),Tn("lastIndexOf",Ln),Tn("slice",Ln),Tn("toString",Ln),Tn("toLocaleString",Ln),Tn("toSorted",Ln),Tn("toSpliced",Ln),Tn("with",Ln),Tn("every",Fn),Tn("filter",Fn),Tn("find",Fn),Tn("findIndex",Fn),Tn("findLast",Fn),Tn("findLastIndex",Fn),Tn("flatMap",Fn),Tn("forEach",Fn),Tn("map",Fn),Tn("some",Fn),Tn("toReversed",Fn),Tn("reduce",On),Tn("reduceRight",On);var Gn=Y("ObservableArrayAdministration",Rn);function Un(t){return F(t)&&Gn(t[ut])}var jn={},Yn="add",Kn="delete",zn=function(){function t(t,e,n){var i=this;void 0===e&&(e=ft),void 0===n&&(n="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[ut]=jn,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=e,this.name_=n,T(Map)||_(18),fi((function(){i.keysAtom_=dt("ObservableMap.keys()"),i.data_=new Map,i.hasMap_=new Map,t&&i.merge(t)}))}var e=t.prototype;return e.has_=function(t){return this.data_.has(t)},e.has=function(t){var e=this;if(!Re.trackingDerivation)return this.has_(t);var n=this.hasMap_.get(t);if(!n){var i=n=new ge(this.has_(t),mt,"ObservableMap.key?",!1);this.hasMap_.set(t,i),an(i,(function(){return e.hasMap_.delete(t)}))}return n.get()},e.set=function(t,e){var n=this.has_(t);if(vn(this)){var i=wn(this,{type:n?Mn:Yn,object:this,newValue:e,name:t});if(!i)return this;e=i.newValue}return n?this.updateValue_(t,e):this.addValue_(t,e),this},e.delete=function(t){var e=this;if((this.keysAtom_,vn(this))&&!wn(this,{type:Kn,object:this,name:t}))return!1;if(this.has_(t)){var n=bn(this),i=n?{observableKind:"map",debugObjectName:this.name_,type:Kn,object:this,oldValue:this.data_.get(t).value_,name:t}:null;return Cn((function(){var n;e.keysAtom_.reportChanged(),null==(n=e.hasMap_.get(t))||n.setNewValue_(!1),e.data_.get(t).setNewValue_(void 0),e.data_.delete(t)})),n&&xn(this,i),!0}return!1},e.updateValue_=function(t,e){var n=this.data_.get(t);if((e=n.prepareNewValue_(e))!==Re.UNCHANGED){var i=bn(this),r=i?{observableKind:"map",debugObjectName:this.name_,type:Mn,object:this,oldValue:n.value_,name:t,newValue:e}:null;n.setNewValue_(e),i&&xn(this,r)}},e.addValue_=function(t,e){var n=this;this.keysAtom_,Cn((function(){var i,r=new ge(e,n.enhancer_,"ObservableMap.key",!1);n.data_.set(t,r),e=r.value_,null==(i=n.hasMap_.get(t))||i.setNewValue_(!0),n.keysAtom_.reportChanged()}));var i=bn(this),r=i?{observableKind:"map",debugObjectName:this.name_,type:Yn,object:this,name:t,newValue:e}:null;i&&xn(this,r)},e.get=function(t){return this.has(t)?this.dehanceValue_(this.data_.get(t).get()):this.dehanceValue_(void 0)},e.dehanceValue_=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},e.values=function(){var t=this,e=this.keys();return Ei({next:function(){var n=e.next(),i=n.done,r=n.value;return{done:i,value:i?void 0:t.get(r)}}})},e.entries=function(){var t=this,e=this.keys();return Ei({next:function(){var n=e.next(),i=n.done,r=n.value;return{done:i,value:i?void 0:[r,t.get(r)]}}})},e[Symbol.iterator]=function(){return this.entries()},e.forEach=function(t,e){for(var n,i=nt(this);!(n=i()).done;){var r=n.value,o=r[0],s=r[1];t.call(e,s,o,this)}},e.merge=function(t){var e=this;return Jn(t)&&(t=new Map(t)),Cn((function(){O(t)?function(t){var e=Object.keys(t);if(!J)return e;var n=Object.getOwnPropertySymbols(t);return n.length?[].concat(e,n.filter((function(e){return x.propertyIsEnumerable.call(t,e)}))):e}(t).forEach((function(n){return e.set(n,t[n])})):Array.isArray(t)?t.forEach((function(t){var n=t[0],i=t[1];return e.set(n,i)})):K(t)?(function(t){var e=Object.getPrototypeOf(t),n=Object.getPrototypeOf(e);return null===Object.getPrototypeOf(n)}(t)||_(19,t),t.forEach((function(t,n){return e.set(n,t)}))):null!=t&&_(20,t)})),this},e.clear=function(){var t=this;Cn((function(){we((function(){for(var e,n=nt(t.keys());!(e=n()).done;){var i=e.value;t.delete(i)}}))}))},e.replace=function(t){var e=this;return Cn((function(){for(var n,i=function(t){if(K(t)||Jn(t))return t;if(Array.isArray(t))return new Map(t);if(O(t)){var e=new Map;for(var n in t)e.set(n,t[n]);return e}return _(21,t)}(t),r=new Map,o=!1,s=nt(e.data_.keys());!(n=s()).done;){var a=n.value;if(!i.has(a))if(e.delete(a))o=!0;else{var A=e.data_.get(a);r.set(a,A)}}for(var l,c=nt(i.entries());!(l=c()).done;){var u=l.value,h=u[0],g=u[1],d=e.data_.has(h);if(e.set(h,g),e.data_.has(h)){var p=e.data_.get(h);r.set(h,p),d||(o=!0)}}if(!o)if(e.data_.size!==r.size)e.keysAtom_.reportChanged();else for(var f=e.data_.keys(),m=r.keys(),I=f.next(),y=m.next();!I.done;){if(I.value!==y.value){e.keysAtom_.reportChanged();break}I=f.next(),y=m.next()}e.data_=r})),this},e.toString=function(){return"[object ObservableMap]"},e.toJSON=function(){return Array.from(this)},e.observe_=function(t,e){return Qn(this,t)},e.intercept_=function(t){return Bn(this,t)},et(t,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Map"}}])}(),Jn=Y("ObservableMap",zn);var qn={},Hn=function(){function t(t,e,n){var i=this;void 0===e&&(e=ft),void 0===n&&(n="ObservableSet"),this.name_=void 0,this[ut]=qn,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=n,T(Set)||_(22),this.enhancer_=function(t,i){return e(t,i,n)},fi((function(){i.atom_=dt(i.name_),t&&i.replace(t)}))}var e=t.prototype;return e.dehanceValue_=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.clear=function(){var t=this;Cn((function(){we((function(){for(var e,n=nt(t.data_.values());!(e=n()).done;){var i=e.value;t.delete(i)}}))}))},e.forEach=function(t,e){for(var n,i=nt(this);!(n=i()).done;){var r=n.value;t.call(e,r,r,this)}},e.add=function(t){var e=this;if((this.atom_,vn(this))&&!wn(this,{type:Yn,object:this,newValue:t}))return this;if(!this.has(t)){Cn((function(){e.data_.add(e.enhancer_(t,void 0)),e.atom_.reportChanged()}));var n=bn(this),i=n?{observableKind:"set",debugObjectName:this.name_,type:Yn,object:this,newValue:t}:null;n&&xn(this,i)}return this},e.delete=function(t){var e=this;if(vn(this)&&!wn(this,{type:Kn,object:this,oldValue:t}))return!1;if(this.has(t)){var n=bn(this),i=n?{observableKind:"set",debugObjectName:this.name_,type:Kn,object:this,oldValue:t}:null;return Cn((function(){e.atom_.reportChanged(),e.data_.delete(t)})),n&&xn(this,i),!0}return!1},e.has=function(t){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(t))},e.entries=function(){var t=0,e=Array.from(this.keys()),n=Array.from(this.values());return Ei({next:function(){var i=t;return t+=1,i<n.length?{value:[e[i],n[i]],done:!1}:{done:!0}}})},e.keys=function(){return this.values()},e.values=function(){this.atom_.reportObserved();var t=this,e=0,n=Array.from(this.data_.values());return Ei({next:function(){return e<n.length?{value:t.dehanceValue_(n[e++]),done:!1}:{done:!0}}})},e.intersection=function(t){return z(t)?t.intersection(this):new Set(this).intersection(t)},e.union=function(t){return z(t)?t.union(this):new Set(this).union(t)},e.difference=function(t){return new Set(this).difference(t)},e.symmetricDifference=function(t){return z(t)?t.symmetricDifference(this):new Set(this).symmetricDifference(t)},e.isSubsetOf=function(t){return new Set(this).isSubsetOf(t)},e.isSupersetOf=function(t){return new Set(this).isSupersetOf(t)},e.isDisjointFrom=function(t){return z(t)?t.isDisjointFrom(this):new Set(this).isDisjointFrom(t)},e.replace=function(t){var e=this;return Vn(t)&&(t=new Set(t)),Cn((function(){Array.isArray(t)||z(t)?(e.clear(),t.forEach((function(t){return e.add(t)}))):null!=t&&_("Cannot initialize set from "+t)})),this},e.observe_=function(t,e){return Qn(this,t)},e.intercept_=function(t){return Bn(this,t)},e.toJSON=function(){return Array.from(this)},e.toString=function(){return"[object ObservableSet]"},e[Symbol.iterator]=function(){return this.values()},et(t,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Set"}}])}(),Vn=Y("ObservableSet",Hn),Wn=Object.create(null),Zn="remove",Xn=function(){function t(t,e,n,i){void 0===e&&(e=new Map),void 0===i&&(i=Ft),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=t,this.values_=e,this.name_=n,this.defaultAnnotation_=i,this.keysAtom_=new ht("ObservableObject.keys"),this.isPlainObject_=O(this.target_)}var e=t.prototype;return e.getObservablePropValue_=function(t){return this.values_.get(t).get()},e.setObservablePropValue_=function(t,e){var n=this.values_.get(t);if(n instanceof pe)return n.set(e),!0;if(vn(this)){var i=wn(this,{type:Mn,object:this.proxy_||this.target_,name:t,newValue:e});if(!i)return null;e=i.newValue}if((e=n.prepareNewValue_(e))!==Re.UNCHANGED){var r=bn(this),o=r?{type:Mn,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:n.value_,name:t,newValue:e}:null;n.setNewValue_(e),r&&xn(this,o)}return!0},e.get_=function(t){return Re.trackingDerivation&&!V(this.target_,t)&&this.has_(t),this.target_[t]},e.set_=function(t,e,n){return void 0===n&&(n=!1),V(this.target_,t)?this.values_.has(t)?this.setObservablePropValue_(t,e):n?Reflect.set(this.target_,t,e):(this.target_[t]=e,!0):this.extend_(t,{value:e,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,n)},e.has_=function(t){if(!Re.trackingDerivation)return t in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var e=this.pendingKeys_.get(t);return e||(e=new ge(t in this.target_,mt,"ObservableObject.key?",!1),this.pendingKeys_.set(t,e)),e.get()},e.make_=function(t,e){if(!0===e&&(e=this.defaultAnnotation_),!1!==e){if(!(t in this.target_)){var n;if(null!=(n=this.target_[at])&&n[t])return;_(1,e.annotationType_,this.name_+"."+t.toString())}for(var i=this.target_;i&&i!==x;){var r=b(i,t);if(r){var o=e.make_(this,t,r,i);if(0===o)return;if(1===o)break}i=Object.getPrototypeOf(i)}ii(this,e,t)}},e.extend_=function(t,e,n,i){if(void 0===i&&(i=!1),!0===n&&(n=this.defaultAnnotation_),!1===n)return this.defineProperty_(t,e,i);var r=n.extend_(this,t,e,i);return r&&ii(this,n,t),r},e.defineProperty_=function(t,e,n){void 0===n&&(n=!1),this.keysAtom_;try{Le();var i=this.delete_(t);if(!i)return i;if(vn(this)){var r=wn(this,{object:this.proxy_||this.target_,name:t,type:Yn,newValue:e.value});if(!r)return null;var o=r.newValue;e.value!==o&&(e=it({},e,{value:o}))}if(n){if(!Reflect.defineProperty(this.target_,t,e))return!1}else Q(this.target_,t,e);this.notifyPropertyAddition_(t,e.value)}finally{Fe()}return!0},e.defineObservableProperty_=function(t,e,n,i){void 0===i&&(i=!1),this.keysAtom_;try{Le();var r=this.delete_(t);if(!r)return r;if(vn(this)){var o=wn(this,{object:this.proxy_||this.target_,name:t,type:Yn,newValue:e});if(!o)return null;e=o.newValue}var s=ei(t),a={configurable:!Re.safeDescriptors||this.isPlainObject_,enumerable:!0,get:s.get,set:s.set};if(i){if(!Reflect.defineProperty(this.target_,t,a))return!1}else Q(this.target_,t,a);var A=new ge(e,n,"ObservableObject.key",!1);this.values_.set(t,A),this.notifyPropertyAddition_(t,A.value_)}finally{Fe()}return!0},e.defineComputedProperty_=function(t,e,n){void 0===n&&(n=!1),this.keysAtom_;try{Le();var i=this.delete_(t);if(!i)return i;if(vn(this))if(!wn(this,{object:this.proxy_||this.target_,name:t,type:Yn,newValue:void 0}))return null;e.name||(e.name="ObservableObject.key"),e.context=this.proxy_||this.target_;var r=ei(t),o={configurable:!Re.safeDescriptors||this.isPlainObject_,enumerable:!1,get:r.get,set:r.set};if(n){if(!Reflect.defineProperty(this.target_,t,o))return!1}else Q(this.target_,t,o);this.values_.set(t,new pe(e)),this.notifyPropertyAddition_(t,void 0)}finally{Fe()}return!0},e.delete_=function(t,e){if(void 0===e&&(e=!1),this.keysAtom_,!V(this.target_,t))return!0;if(vn(this)&&!wn(this,{object:this.proxy_||this.target_,name:t,type:Zn}))return null;try{var n;Le();var i,r=bn(this),o=this.values_.get(t),s=void 0;if(!o&&r)s=null==(i=b(this.target_,t))?void 0:i.value;if(e){if(!Reflect.deleteProperty(this.target_,t))return!1}else delete this.target_[t];if(o&&(this.values_.delete(t),o instanceof ge&&(s=o.value_),Ge(o)),this.keysAtom_.reportChanged(),null==(n=this.pendingKeys_)||null==(n=n.get(t))||n.set(t in this.target_),r){var a={type:Zn,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:s,name:t};r&&xn(this,a)}}finally{Fe()}return!0},e.observe_=function(t,e){return Qn(this,t)},e.intercept_=function(t){return Bn(this,t)},e.notifyPropertyAddition_=function(t,e){var n,i=bn(this);if(i){var r=i?{type:Yn,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:t,newValue:e}:null;i&&xn(this,r)}null==(n=this.pendingKeys_)||null==(n=n.get(t))||n.set(!0),this.keysAtom_.reportChanged()},e.ownKeys_=function(){return this.keysAtom_.reportObserved(),q(this.target_)},e.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},t}();function $n(t,e){var n;if(V(t,ut))return t;var i=null!=(n=null==e?void 0:e.name)?n:"ObservableObject",r=new Xn(t,new Map,String(i),function(t){var e;return t?null!=(e=t.defaultDecorator)?e:Ot(t):void 0}(e));return U(t,ut,r),t}var ti=Y("ObservableObjectAdministration",Xn);function ei(t){return Wn[t]||(Wn[t]={get:function(){return this[ut].getObservablePropValue_(t)},set:function(e){return this[ut].setObservablePropValue_(t,e)}})}function ni(t){return!!F(t)&&ti(t[ut])}function ii(t,e,n){var i;null==(i=t.target_[at])||delete i[n]}var ri=li(0),oi=function(){var t=!1,e={};return Object.defineProperty(e,"0",{set:function(){t=!0}}),Object.create(e)[0]=1,!1===t}(),si=0,ai=function(){};!function(t,e){Object.setPrototypeOf?Object.setPrototypeOf(t.prototype,e):void 0!==t.prototype.__proto__?t.prototype.__proto__=e:t.prototype=e}(ai,Array.prototype);var Ai=function(t){function e(e,n,i,r){var o;return void 0===i&&(i="ObservableArray"),void 0===r&&(r=!1),o=t.call(this)||this,fi((function(){var t=new Rn(i,n,r,!0);t.proxy_=o,j(o,ut,t),e&&e.length&&o.spliceWithArray(0,0,e),oi&&Object.defineProperty(o,"0",ri)})),o}rt(e,t);var n=e.prototype;return n.concat=function(){this[ut].atom_.reportObserved();for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Array.prototype.concat.apply(this.slice(),e.map((function(t){return Un(t)?t.slice():t})))},n[Symbol.iterator]=function(){var t=this,e=0;return Ei({next:function(){return e<t.length?{value:t[e++],done:!1}:{done:!0,value:void 0}}})},et(e,[{key:"length",get:function(){return this[ut].getArrayLength_()},set:function(t){this[ut].setArrayLength_(t)}},{key:Symbol.toStringTag,get:function(){return"Array"}}])}(ai);function li(t){return{enumerable:!1,configurable:!0,get:function(){return this[ut].get_(t)},set:function(e){this[ut].set_(t,e)}}}function ci(t){Q(Ai.prototype,""+t,li(t))}function ui(t){if(t>si){for(var e=si;e<t+100;e++)ci(e);si=t}}function hi(t,e,n){return new Ai(t,e,n)}function gi(t,e){if("object"==typeof t&&null!==t){if(Un(t))return void 0!==e&&_(23),t[ut].atom_;if(Vn(t))return t.atom_;if(Jn(t)){if(void 0===e)return t.keysAtom_;var n=t.data_.get(e)||t.hasMap_.get(e);return n||_(25,e,pi(t)),n}if(ni(t)){if(!e)return _(26);var i=t[ut].values_.get(e);return i||_(27,e,pi(t)),i}if(gt(t)||ye(t)||Je(t))return t}else if(T(t)&&Je(t[ut]))return t[ut];_(28)}function di(t,e){return t||_(29),void 0!==e?di(gi(t,e)):gt(t)||ye(t)||Je(t)||Jn(t)||Vn(t)?t:t[ut]?t[ut]:void _(24,t)}function pi(t,e){var n;if(void 0!==e)n=gi(t,e);else{if(nn(t))return t.name;n=ni(t)||Jn(t)||Vn(t)?di(t):gi(t)}return n.name_}function fi(t){var e=be(),n=ue(!0);Le();try{return t()}finally{Fe(),he(n),Qe(e)}}Object.entries(Pn).forEach((function(t){var e=t[0],n=t[1];"concat"!==e&&U(Ai.prototype,e,n)})),ui(1e3);var mi=x.toString;function Ii(t,e,n){return void 0===n&&(n=-1),yi(t,e,n)}function yi(t,e,n,i,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var o=typeof t;if("function"!==o&&"object"!==o&&"object"!=typeof e)return!1;var s=mi.call(t);if(s!==mi.call(e))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(t)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":n>=0&&n++}t=Ci(t),e=Ci(e);var a="[object Array]"===s;if(!a){if("object"!=typeof t||"object"!=typeof e)return!1;var A=t.constructor,l=e.constructor;if(A!==l&&!(T(A)&&A instanceof A&&T(l)&&l instanceof l)&&"constructor"in t&&"constructor"in e)return!1}if(0===n)return!1;n<0&&(n=-1),r=r||[];for(var c=(i=i||[]).length;c--;)if(i[c]===t)return r[c]===e;if(i.push(t),r.push(e),a){if((c=t.length)!==e.length)return!1;for(;c--;)if(!yi(t[c],e[c],n-1,i,r))return!1}else{var u,h=Object.keys(t);if(c=h.length,Object.keys(e).length!==c)return!1;for(;c--;)if(!V(e,u=h[c])||!yi(t[u],e[u],n-1,i,r))return!1}return i.pop(),r.pop(),!0}function Ci(t){return Un(t)?t.slice():K(t)||Jn(t)||z(t)||Vn(t)?Array.from(t.entries()):t}function Ei(t){return t[Symbol.iterator]=_i,t}function _i(){return this}["Symbol","Map","Set"].forEach((function(t){void 0===B()[t]&&_("MobX requires global '"+t+"' to be available or polyfilled")})),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(t){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:pi},$mobx:ut});var vi=6371008.8,Bi={centimeters:100*vi,centimetres:100*vi,degrees:360/(2*Math.PI),feet:3.28084*vi,inches:39.37*vi,kilometers:vi/1e3,kilometres:vi/1e3,meters:vi,metres:vi,miles:vi/1609.344,millimeters:1e3*vi,millimetres:1e3*vi,nauticalmiles:vi/1852,radians:1,yards:1.0936*vi};function wi(t,e,n={}){const i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function bi(t,e){return function(t){return t%(2*Math.PI)*180/Math.PI}(function(t,e="kilometers"){const n=Bi[e];if(!n)throw new Error(e+" units is invalid");return t/n}(t,e))}function Qi(t,e){!function(t,e){var n,i,r,o,s,a,A,l,c,u,h=0,g="FeatureCollection"===t.type,d="Feature"===t.type,p=g?t.features.length:1;for(n=0;n<p;n++){for(a=g?t.features[n].geometry:d?t.geometry:t,l=g?t.features[n].properties:d?t.properties:{},c=g?t.features[n].bbox:d?t.bbox:void 0,u=g?t.features[n].id:d?t.id:void 0,s=(A=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<s;r++)if(null!==(o=A?a.geometries[r]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,h,l,c,u))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===e(o.geometries[i],h,l,c,u))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,h,l,c,u))return!1;h++}}(t,(function(t,n,i,r,o){var s,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(wi(t,i,{bbox:r,id:o}),n,0)&&void 0}switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var A=0;A<t.coordinates.length;A++){var l=t.coordinates[A];if(!1===e(wi({type:s,coordinates:l},i),n,A))return!1}}))}function xi(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function Di(t,e){return t[0]*e[1]-e[0]*t[1]}function Si(t,e){return!function(t,e){return 0===Di(xi(t),xi(e))}(t,e)&&function(t,e){var n=t[0],i=xi(t),r=e[0],o=xi(e),s=Di(i,o),a=function(t,e){return[t[0]-e[0],t[1]-e[1]]}(r,n),A=function(t,e){return[t[0]+e[0],t[1]+e[1]]}(n,function(t,e){return[t*e[0],t*e[1]]}(Di(a,o)/s,i));return A}(t,e)}function Mi(t,e,n){var i=[],r=bi(e,n),o=function(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}(t),s=[];return o.forEach((function(t,e){if(e!==o.length-1){var n=function(t,e,n){var i=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),r=t[0]+n*(e[1]-t[1])/i,o=e[0]+n*(e[1]-t[1])/i,s=t[1]+n*(t[0]-e[0])/i,a=e[1]+n*(t[0]-e[0])/i;return[[r,s],[o,a]]}(t,o[e+1],r);if(i.push(n),e>0){var a=i[e-1],A=Si(n,a);!1!==A&&(a[1]=A,n[0]=A),s.push(a[0]),e===o.length-2&&(s.push(n[0]),s.push(n[1]))}2===o.length&&(s.push(n[0]),s.push(n[1]))}})),function(t,e,n={}){if(t.length<2)throw new Error("coordinates must be an array of two or more positions");return wi({type:"LineString",coordinates:t},e,n)}(s,t.properties)}var ki=function(t,e,n){if(!function(t){return null!==t&&"object"==typeof t&&!Array.isArray(t)}(n=n||{}))throw new Error("options is invalid");var i=n.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var r=function(t){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}(t),o=t.properties;switch(r){case"LineString":return Mi(t,e,i);case"MultiLineString":var s=[];return Qi(t,(function(t){s.push(Mi(t,e,i).geometry.coordinates)})),function(t,e,n={}){return wi({type:"MultiLineString",coordinates:t},e,n)}(s,o);default:throw new Error("geometry "+r+" is not supported")}};const Ri=Li;(function(t){const e=Li,n=t();for(;;)try{if(-parseInt(e(200))/1*(-parseInt(e(189))/2)+-parseInt(e(175))/3*(parseInt(e(169))/4)+-parseInt(e(178))/5*(-parseInt(e(172))/6)+parseInt(e(190))/7*(parseInt(e(166))/8)+parseInt(e(165))/9*(parseInt(e(195))/10)+parseInt(e(181))/11+-parseInt(e(171))/12*(parseInt(e(179))/13)==825172)break;n.push(n.shift())}catch(t){n.push(n.shift())}})(Fi),Ri(168),Ri(185),Ri(191),Ri(184),Ri(182),Ri(174),Ri(186),Ri(183),Ri(187);const Ni=Ri(184);Ri(174),Ri(193),Ri(194),Ri(167),Ri(196),Ri(202),Ri(177),Ri(192),Ri(198),Ri(180),Ri(197);const Pi={Alerting:"rgb(224, 34, 110)",Pending:"rgba(255, 153, 0)",Normal:Ri(201)},Ti="rgb(78, 194, 252)";function Li(t,e){const n=Fi();return(Li=function(t,e){return n[t-=165]})(t,e)}function Fi(){const t=["rgb(255, 215, 0, 0.2)","no label","18lWVEOo","8ttxVlm","rgb(255, 221, 87, 0.9)","rgba(10, 85, 161, 1)","656firGFe","pitch","264Yngyru","12Ybtnmg","cisco/atm-switch","rgba(41, 156, 70, 0.9)","3BfBcHW","zoom","rgb(32, 82, 153, 0.2)","3998900HWQsHL","2999152nOOvkP","rgb(240,240,240)","15359751klqAHp","#9acd32","rgba(245, 54, 54, 1)","rgba(154, 205, 50)","#0a55a1","#299C46","rgb(237, 71, 59)","new rule","10862IAdcNR","3404191oRlDoD","rgba(0, 0, 0, 0)","rgb(255, 215, 0, 0.15)","rgb(255, 0, 255, 0.8)","rgb(224, 52, 184, 0.8)","7856870pIjdCG","rgb(32, 82, 153, 0.8)","rgb(224, 190, 139)","rgb(223,523,123, 0.8)","viewState","156OvIffp","rgb(27, 133, 94)"];return(Fi=function(){return t})()}Ri(188),Ri(173);const Oi={color:Ni,lineWidth:1.5,label:Ri(203)},Gi="-:";function Ui(t,e){return[[(2*t[0]+e[0])/3,(2*t[1]+e[1])/3],[(t[0]+2*e[0])/3,(t[1]+2*e[1])/3]]}function ji(t,e,n=!0){const i=zi;if("string"==typeof t){const n=null==e?void 0:e[t],r=null==n?void 0:n[i(448)](i(436)),o=null==r?void 0:r.geometry;return(null==o?void 0:o[i(441)])||null}return Array[i(443)](t)?n?t[i(451)](0,2):t:null}function Yi(){const t=["feature","4763457AVwHxZ","10UpXHdi","item","map","coordinates","21902pQzGyQ","isArray","2822910OHlPNU","filter","1173435gudBtj","371128FMhRZN","getPropertyValue","3NhaRqK","1855692bMnlye","slice","578242WmlbCx","toFixed","29EOdHpZ"];return(Yi=function(){return t})()}function Ki(t,e){const n=zi;return t.map((t=>ji(t[zi(439)],e)))[n(445)]((t=>t))}function zi(t,e){const n=Yi();return(zi=function(t,e){return n[t-=434]})(t,e)}!function(t){const e=zi,n=t();for(;;)try{if(-parseInt(e(435))/1*(-parseInt(e(442))/2)+-parseInt(e(449))/3*(parseInt(e(450))/4)+parseInt(e(446))/5+-parseInt(e(444))/6+parseInt(e(452))/7+parseInt(e(447))/8+parseInt(e(437))/9*(parseInt(e(438))/10)==276128)break;n.push(n.shift())}catch(t){n.push(n.shift())}}(Yi);const Ji=qi;function qi(t,e){const n=Vi();return(qi=function(t,e){return n[t-=172]})(t,e)}!function(t){const e=qi,n=t();for(;;)try{if(parseInt(e(206))/1+parseInt(e(195))/2*(parseInt(e(182))/3)+parseInt(e(191))/4+-parseInt(e(205))/5+parseInt(e(198))/6+parseInt(e(174))/7+-parseInt(e(200))/8*(-parseInt(e(186))/9)==687116)break;n.push(n.shift())}catch(t){n.push(n.shift())}}(Vi);class Hi{[Ji(176)](){return this.id}[Ji(175)](){return Object.keys(this._connectedEdges).length}[Ji(190)](){const t=Ji,e=this.getId();return this[t(180)]()[t(181)](((n,i)=>{const r=t;return i[r(202)]()&&i[r(192)]()===e&&(n+=1),n}),0)}[Ji(207)](){const t=Ji,e=this.getId();return this.getConnectedEdges()[t(181)](((n,i)=>(i[t(202)]()&&i.getSourceNodeId()===e&&(n+=1),n)),0)}[Ji(187)](){const t=Ji,e=this[t(176)]();return this[t(180)]()[t(181)](((n,i)=>{const r=t;return i[r(192)]()===e?n[r(177)](i[r(201)]()):n[r(177)](i.getTargetNodeId()),n}),[])}[Ji(180)](){return Object.values(this[Ji(172)])}[Ji(179)](t){const e=Ji;return this.hasOwnProperty(t)?this[t]:this._data[e(188)](t)?this[e(185)][t]:void 0}setData(t){this[Ji(185)]=t}[Ji(204)](t,e){this._data[t]=e}setState(t){this[Ji(189)]=t}[Ji(203)](){return this[Ji(189)]}[Ji(173)](t){const e=Ji;(Array[e(196)](t)?t:[t])[e(194)]((t=>{this[e(172)][t.id]=t,t.addNode(this)}))}removeConnectedEdges(t){const e=Ji;(Array[e(196)](t)?t:[t])[e(194)]((t=>{const n=e;t.removeNode(this),delete this[n(172)][t.id]}))}[Ji(199)](){const t=Ji;Object[t(183)](this[t(172)])[t(194)]((t=>t.removeNode(this))),this[t(172)]={}}isSelectable(){return this[Ji(184)]}shouldHighlightConnectedEdges(){return this._highlightConnectedEdges}constructor({id:t,selectable:e=!1,highlightConnectedEdges:n=!1,data:i={}}){const r=qi;this[r(172)]={},this[r(189)]=d[r(193)],this[r(178)]=!0,this.id=t,this._data=i,this[r(184)]=e,this[r(197)]=n}}function Vi(){const t=["54565ZhzGTN","getOutDegree","_connectedEdges","addConnectedEdges","2819502nhOiwj","getDegree","getId","push","isNode","getPropertyValue","getConnectedEdges","reduce","122613AKDgOq","values","_selectable","_data","21609rZJLPp","getSiblingIds","hasOwnProperty","state","getInDegree","421084pqnkyx","getTargetNodeId","DEFAULT","forEach","34OlAzPy","isArray","_highlightConnectedEdges","3779694PgUDHg","clearConnectedEdges","376biGOPl","getSourceNodeId","isDirected","getState","setDataProperty","6565545AvTEhj"];return(Vi=function(){return t})()}const Wi=er;function Zi(t){const e=er;let{graph:n,parPath:i,lineExtraProps:r,commentsData:o,theme:A,isEdit:l=!1,isEph:c=!1,vCount:u,eCount:h}=t;const{addNode:g,addEdge:d,findNode:p,findEdge:f}=n,m=i[0],I=i.at(-1);let y=[77.77,88.88],C=p(m);if(!C&&!l){const t=n[e(482)][e(407)](u[e(449)],y,7,!0);u[e(449)]+=1,C=new Hi({id:m,data:{wasmId:t}}),g(C)}let _=p(I);if(!_&&!l){const t=n[e(482)][e(407)](u.current,y,7,!0);u.current+=1,_=new Hi({id:I,data:{wasmId:t}}),g(_)}const v=m+"-"+I,B=f(v),w=c?{isEph:!0}:{},b=r?{lineExtraProps:r}:{};if(B){if(!c){const t=B.getPropertyValue("parPath");Array[e(506)](t)&&B.setDataProperty(e(542),t)}B[e(515)](e(403),i);const t=[];if(i.forEach((r=>{const o=e,s=typeof r===o(520);let a=s?[77.77,88.88]:r[o(538)](0,2),A=s?p(r):void 0,l=null==A?void 0:A[o(419)](o(530));if(void 0===l){const t=p(i.at(0))[o(419)]("thrId");l=n[o(482)][o(407)](u[o(449)],a,t,s),A&&A[o(515)](o(530)),u[o(449)]+=1}t.push(l)})),"10.23.0.48"===i.at(0)&&(i.at(-1),e(502)),t[e(533)]){const i=B.getPropertyValue("rust_edge_id");void 0!==i?n.rustGraph[e(426)](i,t):console.log(e(423),i,function(t){return yn(t,new Map)}(B))}r&&B.setDataProperty(e(524),r)}else{const t=[];i.forEach((r=>{const o=e,s="string"==typeof r;let a=s?[77.77,88.88]:r.slice(0,2),A=s?p(r):void 0,c=null==A?void 0:A.getPropertyValue(o(530));if(void 0===c){const t=p(i.at(0))[o(419)](o(468));c=n[o(482)][o(407)](u[o(449)],a,t,s),A&&A[o(515)](o(530)),u[o(449)]+=1}if(t[o(532)](c),A||!s);else if(!l){const t=new Hi({id:r,data:{wasmId:c}});g(t)}}));const r=n.rustGraph.create_edge(h[e(449)],t);h[e(449)]+=1;const o={id:v,targetId:m,sourceId:I,directed:!0,data:a(s({parPath:i},w,b),{rust_edge_id:r,lineIds:new Set([]),trespass:{}})};d(new E(o))}[[e(431),m,I],[e(519),I,m]][e(472)]((t=>{var n,r;const s=e,[a,c,u]=t,[h,g]=[c,u];l&&(null==(r=null==(n=o[a])?void 0:n[h])?void 0:r[g])&&o[a][h][g][s(485)](),i[s(472)](((t,e)=>{var n,r;const l=s;if(Array[l(506)](t)&&t[l(533)]>2){const s=t[3],c=t[4],u=e,d=c&&A[l(509)][l(483)](c);if(void 0!==s){const e={text:s,iconColor:(null==c?void 0:c[l(465)](l(497)))>-1?c:null!=(n=c&&$i(d))?n:Ti,orderId:u,revOrderId:i[l(533)]-1-u,coords:t.slice(0,2),tar:h,src:g};!(null!=(r=o[a])&&r[h])&&(o[a][h]={}),!o[a][h][g]&&(o[a][h][g]=new Map),o[a][h][g][l(440)](u,e)}}}))}))}function Xi({locName:t,node:e,lineFeatures:n,newCoord:i,relatedLineIds:r,setRelatedLineIds:o,isDefDir:s}){const a=er;if(!n[a(533)])return[];const A=n;if(null==r||r[a(472)]((t=>{const e=a,[n,r,o,l]=t,c=A[n],u=c[e(445)].coordinates,{numCoords:h}=c[e(439)];u[r][o]=i;h[s?l:h[e(533)]-1-l]=i})),!r){const n=e[a(480)]()[a(495)]((t=>[t,t[a(419)](a(541))])),r=[];null==n||n[a(472)]((e=>{const n=a,[s,l]=e;l[n(472)]((e=>{const s=n,a=A[e];if(!a)return;const{segrPathVisible:l,numCoords:c}=a[s(439)],u=a.geometry.coordinates;l.forEach(((n,o)=>{const a=s;n[a(472)](((n,s)=>{var A;const l=a;"string"==typeof n.item&&(null==(A=n.item)?void 0:A[l(459)](Gi)[0])===t&&(u[o][s]=i,r.push([e,o,s,n.gIdx]))}))})),r[s(533)]&&o(r)}))}))}}function $i(t){const e=er;t[e(409)]("#")&&(t=t.slice(1));let n=1;8===t[e(533)]&&(n=parseInt(t[e(522)](6,2),16)/255,t=t[e(522)](0,6));const i=parseInt(t[e(522)](0,2),16),r=parseInt(t[e(522)](2,2),16),o=parseInt(t[e(522)](4,2),16);return 1!==n?e(457)+i+", "+r+", "+o+", "+n[e(430)](2)+")":"rgb("+i+", "+r+", "+o+")"}function tr(){const t=["length","random","toLowerCase","11cfEqPq","from","slice","querySelectorAll","Alerting","lineIds","rPath","abs","children","group","parPath","padStart","5905120tuGAvV","name","create_vertex","number","startsWith","stTotal","all_annots"," bps"," Kbps","documentElement","MultiLineString","FeatureCollection","rgba(255, 221, 87, 0.9)","gIdx","getPropertyValue","serializeToString","splice","Invalid count of numbers requested.","wasmid undefined","substring","image/svg+xml","update_edge_vertices","MultiPolygon","segrPath","lineId","toFixed","sources","Point","Pending","reduce","style","height","getElementById","parentNode","properties","set","filter","concat","get","max","geometry","thrCounts","round","MultiPoint","current","total"," Mbps","getAttribute","fontSize","3884502vqkKjX","replaceChild","rgb(72, 190, 194)","rgba(","132208MXAWOe","split","repeat","match","rgba(600,200,0)","Invalid input. Please provide a number.","find","indexOf","item","annotStateCounts","thrId","viewBox","primary","color","forEach","count","23465990OItLun","label","use","meters","min","querySelector","getConnectedEdges","type","rustGraph","getColorByName","7keHMKo","clear","coordinates","sort","disabled","rgba(219, 92, 158,1)","size","values","parPathCoords","toString","parseFromString","map","stringify","rgb","rgba(163, 27, 50,1)","interCoords","error","timeEnd","10.25.8.231","includes","setVisible","Invalid RGBA color string: ","isArray","4oMwCcv","parse","visualization","Polygon","newState","setAttribute","keys","Normal","setDataProperty","rgba(237, 129, 40, 1)","rgba(164, 50, 168,1)","11124162BwWEnT","targets","string","width","substr","svg","lineExtraProps","xlink:href","floor","810WwAgXE","1810705dZCwSw","join","wasmId","9004ClIqHX","push"];return(tr=function(){return t})()}function er(t,e){const n=tr();return(er=function(t,e){return n[t-=400]})(t,e)}!function(t){const e=er,n=t();for(;;)try{if(parseInt(e(458))/1+parseInt(e(531))/2*(parseInt(e(527))/3)+-parseInt(e(507))/4*(parseInt(e(528))/5)+parseInt(e(454))/6*(-parseInt(e(484))/7)+-parseInt(e(405))/8+-parseInt(e(518))/9+parseInt(e(474))/10*(parseInt(e(536))/11)==710631)break;n.push(n.shift())}catch(t){n.push(n.shift())}}(tr),Wi(432);const nr=(t,e)=>{const n=Wi,i=s({},t[n(446)]),r=s({},t[n(467)]);let o=t.stTotal,a=t[n(450)];for(const r in e[n(446)])r in t[n(446)]?i[r]=t[n(446)][r]+e.thrCounts[r]:i[r]=e.thrCounts[r];a+=e.total;for(const i in e.annotStateCounts)i in t[n(467)]?r[i]={count:t.annotStateCounts[i].count+e[n(467)][i][n(473)],label:e[n(467)][i][n(475)]}:r[i]=e[n(467)][i],o+=e[n(410)];t[n(446)]=i,t[n(467)]=r,t[n(410)]=o,t.total=a},ir=(t,e,n,i,r)=>{var o,a;const A=Wi,{thrId:l,defaultColor:c}=t,u=function(t,e,n){return t&&void 0!==e?t[e]:s({},Oi,n?{color:n}:{})}(e,l,c),{color:h,label:g}=u;if(i[A(533)]&&!i[A(503)](g))return{threshold:u,thrCounts:{},annotStateCounts:{},stTotal:0,total:0};const d={[l]:1},p={};let f=0;const{all_annots:m}=t;if(m&&(null==(o=n.at(-1))||!o[A(488)])){const t=function(t,e){const n=er;if(null==t||!t[n(533)])return[];if(!e)return t[n(495)]((t=>t.at(-1)));const i=[];for(const r of t){let t=0,o=r[n(533)]-1,s=null;for(;t<=o;){const i=Math[n(526)]((t+o)/2),a=r[i];a[n(501)]<=e?(s=a,t=i+1):o=i-1}s&&i[n(532)](s)}return i[n(487)](((t,e)=>{const i=n,r={Alerting:1,Pending:2,Normal:3},o=t[i(511)][i(409)]("Alerting")?i(540):t.newState[i(409)](i(433))?i(433):i(514),s=e[i(511)][i(409)](i(540))?i(540):e[i(511)][i(409)](i(433))?i(433):"Normal";return r[o]-r[s]}))}(m,r),e=null==(a=null==t?void 0:t[0])?void 0:a[A(511)],n=Object[A(513)](Pi)[A(464)]((t=>null==e?void 0:e[A(409)](t)));if(n){p[Pi[n]]={count:1,label:n},f=1}}return{threshold:u,all_annots:t[A(411)],thrCounts:d,annotStateCounts:p,total:1,stTotal:f}};function rr(t,e){var n=or();return(rr=function(t,e){return n[t-=319]})(t,e)}function or(){var t=["865XuwKcb","22jBoASJ","3077024taCxif","50zanNZR","6620957JTwwUC","558pHUQny","1437003TcZHDC","1012706tKEQjr","6ANegOG","3890ZeMYCg","24836lRVmys","7010916ZNYYQs"];return(or=function(){return t})()}let sr;!function(t){for(var e=rr,n=t();;)try{if(537107===parseInt(e(330))/1+parseInt(e(320))/2*(-parseInt(e(328))/3)+-parseInt(e(321))/4*(parseInt(e(323))/5)+-parseInt(e(319))/6*(-parseInt(e(327))/7)+parseInt(e(325))/8+-parseInt(e(329))/9*(-parseInt(e(326))/10)+-parseInt(e(324))/11*(parseInt(e(322))/12))break;n.push(n.shift())}catch(t){n.push(n.shift())}}(or);const ar=new Array(128).fill(void 0);function Ar(t){return ar[t]}ar.push(void 0,null,!0,!1);let lr=ar.length;function cr(t){const e=Ar(t);return function(t){t<132||(ar[t]=lr,lr=t)}(t),e}const ur="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};"undefined"!=typeof TextDecoder&&ur.decode();let hr=null;function gr(){return(null===hr||0===hr.byteLength)&&(hr=new Uint8Array(sr.memory.buffer)),hr}function dr(t,e){return t>>>=0,ur.decode(gr().subarray(t,t+e))}function pr(t){lr===ar.length&&ar.push(ar.length+1);const e=lr;return lr=ar[e],ar[e]=t,e}function fr(t){return null==t}let mr=null;let Ir=null;function yr(){return(null===Ir||0===Ir.byteLength)&&(Ir=new Int32Array(sr.memory.buffer)),Ir}function Cr(t){const e=typeof t;if("number"==e||"boolean"==e||null==t)return`${t}`;if("string"==e)return`"${t}"`;if("symbol"==e){const e=t.description;return null==e?"Symbol":`Symbol(${e})`}if("function"==e){const e=t.name;return"string"==typeof e&&e.length>0?`Function(${e})`:"Function"}if(Array.isArray(t)){const e=t.length;let n="[";e>0&&(n+=Cr(t[0]));for(let i=1;i<e;i++)n+=", "+Cr(t[i]);return n+="]",n}const n=/\[object ([^\]]+)\]/.exec(toString.call(t));let i;if(!(n.length>1))return toString.call(t);if(i=n[1],"Object"==i)try{return"Object("+JSON.stringify(t)+")"}catch(t){return"Object"}return t instanceof Error?`${t.name}: ${t.message}\n${t.stack}`:i}let Er=0;const _r="undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},vr="function"==typeof _r.encodeInto?function(t,e){return _r.encodeInto(t,e)}:function(t,e){const n=_r.encode(t);return e.set(n),{read:t.length,written:n.length}};function Br(t,e){try{return t.apply(this,e)}catch(t){sr.__wbindgen_exn_store(pr(t))}}const wr="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((t=>sr.__wbg_coords_free(t>>>0)));class br{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,wr.unregister(this),t}free(){const t=this.__destroy_into_raw();sr.__wbg_coords_free(t)}get lon(){return sr.__wbg_get_coords_lon(this.__wbg_ptr)}set lon(t){sr.__wbg_set_coords_lon(this.__wbg_ptr,t)}get lat(){return sr.__wbg_get_coords_lat(this.__wbg_ptr)}set lat(t){sr.__wbg_set_coords_lat(this.__wbg_ptr,t)}}const Qr="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((t=>sr.__wbg_graphwrapper_free(t>>>0)));class xr{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,Qr.unregister(this),t}free(){const t=this.__destroy_into_raw();sr.__wbg_graphwrapper_free(t)}count_vertices(){return sr.graphwrapper_count_vertices(this.__wbg_ptr)>>>0}count_hyperedges(){return sr.graphwrapper_count_hyperedges(this.__wbg_ptr)>>>0}rm_vertex(t){try{const n=sr.__wbindgen_add_to_stack_pointer(-16);sr.graphwrapper_rm_vertex(n,this.__wbg_ptr,t);var e=yr()[n/4+0];if(yr()[n/4+1])throw cr(e)}finally{sr.__wbindgen_add_to_stack_pointer(16)}}rm_hyperedge(t){try{const n=sr.__wbindgen_add_to_stack_pointer(-16);sr.graphwrapper_rm_hyperedge(n,this.__wbg_ptr,t);var e=yr()[n/4+0];if(yr()[n/4+1])throw cr(e)}finally{sr.__wbindgen_add_to_stack_pointer(16)}}create_vertex(t,e,n,i){try{const s=sr.__wbindgen_add_to_stack_pointer(-16);sr.graphwrapper_create_vertex(s,this.__wbg_ptr,t,pr(e),!fr(n),fr(n)?0:n,i);var r=yr()[s/4+0],o=yr()[s/4+1];if(yr()[s/4+2])throw cr(o);return r>>>0}finally{sr.__wbindgen_add_to_stack_pointer(16)}}update_vertex_weight(t,e,n,i,r){try{const a=sr.__wbindgen_add_to_stack_pointer(-16);sr.graphwrapper_update_vertex_weight(a,this.__wbg_ptr,t,e,pr(n),!fr(i),fr(i)?0:i,r);var o=yr()[a/4+0],s=yr()[a/4+1];if(yr()[a/4+2])throw cr(s);return Sr.__wrap(o)}finally{sr.__wbindgen_add_to_stack_pointer(16)}}create_edge(t,e){try{const r=sr.__wbindgen_add_to_stack_pointer(-16);sr.graphwrapper_create_edge(r,this.__wbg_ptr,t,pr(e));var n=yr()[r/4+0],i=yr()[r/4+1];if(yr()[r/4+2])throw cr(i);return n>>>0}finally{sr.__wbindgen_add_to_stack_pointer(16)}}update_edge_vertices(t,e){try{const r=sr.__wbindgen_add_to_stack_pointer(-16);sr.graphwrapper_update_edge_vertices(r,this.__wbg_ptr,t,pr(e));var n=yr()[r/4+0],i=yr()[r/4+1];if(yr()[r/4+2])throw cr(i);return cr(n)}finally{sr.__wbindgen_add_to_stack_pointer(16)}}get_vertex_weight(t){try{const i=sr.__wbindgen_add_to_stack_pointer(-16);sr.graphwrapper_get_vertex_weight(i,this.__wbg_ptr,t);var e=yr()[i/4+0],n=yr()[i/4+1];if(yr()[i/4+2])throw cr(n);return cr(e)}finally{sr.__wbindgen_add_to_stack_pointer(16)}}get_edge_vertices(t){try{const i=sr.__wbindgen_add_to_stack_pointer(-16);sr.graphwrapper_get_edge_vertices(i,this.__wbg_ptr,t);var e=yr()[i/4+0],n=yr()[i/4+1];if(yr()[i/4+2])throw cr(n);return cr(e)}finally{sr.__wbindgen_add_to_stack_pointer(16)}}graph_clear(){try{const e=sr.__wbindgen_add_to_stack_pointer(-16);sr.graphwrapper_graph_clear(e,this.__wbg_ptr);var t=yr()[e/4+0];if(yr()[e/4+1])throw cr(t)}finally{sr.__wbindgen_add_to_stack_pointer(16)}}clear_hyperEdges(){try{const e=sr.__wbindgen_add_to_stack_pointer(-16);sr.graphwrapper_clear_hyperEdges(e,this.__wbg_ptr);var t=yr()[e/4+0];if(yr()[e/4+1])throw cr(t)}finally{sr.__wbindgen_add_to_stack_pointer(16)}}generate_offsets_for_all_vertices(){try{const n=sr.__wbindgen_add_to_stack_pointer(-16);sr.graphwrapper_generate_offsets_for_all_vertices(n,this.__wbg_ptr);var t=yr()[n/4+0],e=yr()[n/4+1];if(yr()[n/4+2])throw cr(e);return cr(t)}finally{sr.__wbindgen_add_to_stack_pointer(16)}}constructor(){const t=sr.graphwrapper_new();return this.__wbg_ptr=t>>>0,this}}const Dr="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((t=>sr.__wbg_node_free(t>>>0)));class Sr{static __wrap(t){t>>>=0;const e=Object.create(Sr.prototype);return e.__wbg_ptr=t,Dr.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,Dr.unregister(this),t}free(){const t=this.__destroy_into_raw();sr.__wbg_node_free(t)}get thr_id(){try{const n=sr.__wbindgen_add_to_stack_pointer(-16);sr.__wbg_get_node_thr_id(n,this.__wbg_ptr);var t=yr()[n/4+0],e=yr()[n/4+1];return 0===t?void 0:e}finally{sr.__wbindgen_add_to_stack_pointer(16)}}set thr_id(t){sr.__wbg_set_node_thr_id(this.__wbg_ptr,!fr(t),fr(t)?0:t)}get is_node(){return 0!==sr.__wbg_get_node_is_node(this.__wbg_ptr)}set is_node(t){sr.__wbg_set_node_is_node(this.__wbg_ptr,t)}static new(t,e,n,i){!function(t,e){if(!(t instanceof e))throw new Error(`expected instance of ${e.name}`);t.ptr}(e,br);var r=e.__destroy_into_raw();const o=sr.node_new(t,r,!fr(n),fr(n)?0:n,i);return Sr.__wrap(o)}id(){return sr.node_id(this.__wbg_ptr)>>>0}to_string(){let t,e;try{const r=sr.__wbindgen_add_to_stack_pointer(-16);sr.node_to_string(r,this.__wbg_ptr);var n=yr()[r/4+0],i=yr()[r/4+1];return t=n,e=i,dr(n,i)}finally{sr.__wbindgen_add_to_stack_pointer(16),sr.__wbindgen_free(t,e,1)}}}function Mr(){return Mr=r((function*(t,e){if("function"==typeof Response&&t instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return yield WebAssembly.instantiateStreaming(t,e)}catch(e){if("application/wasm"==t.headers.get("Content-Type"))throw e;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",e)}const n=yield t.arrayBuffer();return yield WebAssembly.instantiate(n,e)}{const n=yield WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}})),Mr.apply(this,arguments)}function kr(){const e={wbg:{}};return e.wbg.__wbindgen_object_drop_ref=function(t){cr(t)},e.wbg.__wbindgen_string_new=function(t,e){return pr(dr(t,e))},e.wbg.__wbindgen_number_get=function(t,e){const n=Ar(e),i="number"==typeof n?n:void 0;((null===mr||0===mr.byteLength)&&(mr=new Float64Array(sr.memory.buffer)),mr)[t/8+1]=fr(i)?0:i,yr()[t/4+0]=!fr(i)},e.wbg.__wbg_crypto_1d1f22824a6a080c=function(t){return pr(Ar(t).crypto)},e.wbg.__wbindgen_is_object=function(t){const e=Ar(t);return"object"==typeof e&&null!==e},e.wbg.__wbg_process_4a72847cc503995b=function(t){return pr(Ar(t).process)},e.wbg.__wbg_versions_f686565e586dd935=function(t){return pr(Ar(t).versions)},e.wbg.__wbg_node_104a2ff8d6ea03a2=function(t){return pr(Ar(t).node)},e.wbg.__wbindgen_is_string=function(t){return"string"==typeof Ar(t)},e.wbg.__wbg_require_cca90b1a94a0255b=function(){return Br((function(){return pr(t.require)}),arguments)},e.wbg.__wbg_msCrypto_eb05e62b530a1508=function(t){return pr(Ar(t).msCrypto)},e.wbg.__wbg_randomFillSync_5c9c955aa56b6049=function(){return Br((function(t,e){Ar(t).randomFillSync(cr(e))}),arguments)},e.wbg.__wbg_getRandomValues_3aa56aa6edec874c=function(){return Br((function(t,e){Ar(t).getRandomValues(Ar(e))}),arguments)},e.wbg.__wbindgen_object_clone_ref=function(t){return pr(Ar(t))},e.wbg.__wbindgen_is_undefined=function(t){return void 0===Ar(t)},e.wbg.__wbindgen_number_new=function(t){return pr(t)},e.wbg.__wbg_set_ce5827ace4c694dc=function(t,e,n){Ar(t)[cr(e)]=cr(n)},e.wbg.__wbg_get_bd8e338fbd5f5cc8=function(t,e){return pr(Ar(t)[e>>>0])},e.wbg.__wbg_length_cd7af8117672b8b8=function(t){return Ar(t).length},e.wbg.__wbg_new_16b304a2cfa7ff4a=function(){return pr(new Array)},e.wbg.__wbindgen_is_function=function(t){return"function"==typeof Ar(t)},e.wbg.__wbg_newnoargs_e258087cd0daa0ea=function(t,e){return pr(new Function(dr(t,e)))},e.wbg.__wbg_call_27c0f87801dedf93=function(){return Br((function(t,e){return pr(Ar(t).call(Ar(e)))}),arguments)},e.wbg.__wbg_new_72fb9a18b5ae2624=function(){return pr(new Object)},e.wbg.__wbg_self_ce0dbfc45cf2f5be=function(){return Br((function(){return pr(self.self)}),arguments)},e.wbg.__wbg_window_c6fb939a7f436783=function(){return Br((function(){return pr(window.window)}),arguments)},e.wbg.__wbg_globalThis_d1e6af4856ba331b=function(){return Br((function(){return pr(globalThis.globalThis)}),arguments)},e.wbg.__wbg_global_207b558942527489=function(){return Br((function(){return pr(n.g.global)}),arguments)},e.wbg.__wbg_push_a5b05aedc7234f9f=function(t,e){return Ar(t).push(Ar(e))},e.wbg.__wbg_new_28c511d9baebfa89=function(t,e){return pr(new Error(dr(t,e)))},e.wbg.__wbg_call_b3ca7c6051f9bec1=function(){return Br((function(t,e,n){return pr(Ar(t).call(Ar(e),Ar(n)))}),arguments)},e.wbg.__wbg_buffer_12d079cc21e14bdb=function(t){return pr(Ar(t).buffer)},e.wbg.__wbg_newwithbyteoffsetandlength_425360430a1c8206=function(t,e,n){return pr(new Int32Array(Ar(t),e>>>0,n>>>0))},e.wbg.__wbg_new_8cccba86b0f574cb=function(t){return pr(new Int32Array(Ar(t)))},e.wbg.__wbg_newwithbyteoffsetandlength_aa4a17c33a06e5cb=function(t,e,n){return pr(new Uint8Array(Ar(t),e>>>0,n>>>0))},e.wbg.__wbg_new_63b92bc8671ed464=function(t){return pr(new Uint8Array(Ar(t)))},e.wbg.__wbg_set_a47bac70306a19a7=function(t,e,n){Ar(t).set(Ar(e),n>>>0)},e.wbg.__wbg_newwithlength_e9b4878cebadb3d3=function(t){return pr(new Uint8Array(t>>>0))},e.wbg.__wbg_subarray_a1f73cd4b5b42fe1=function(t,e,n){return pr(Ar(t).subarray(e>>>0,n>>>0))},e.wbg.__wbg_getindex_00f7e689b0c9cb5f=function(t,e){return Ar(t)[e>>>0]},e.wbg.__wbindgen_debug_string=function(t,e){const n=function(t,e,n){if(void 0===n){const n=_r.encode(t),i=e(n.length,1)>>>0;return gr().subarray(i,i+n.length).set(n),Er=n.length,i}let i=t.length,r=e(i,1)>>>0;const o=gr();let s=0;for(;s<i;s++){const e=t.charCodeAt(s);if(e>127)break;o[r+s]=e}if(s!==i){0!==s&&(t=t.slice(s)),r=n(r,i,i=s+3*t.length,1)>>>0;const e=gr().subarray(r+s,r+i);s+=vr(t,e).written,r=n(r,i,s,1)>>>0}return Er=s,r}(Cr(Ar(e)),sr.__wbindgen_malloc,sr.__wbindgen_realloc),i=Er;yr()[t/4+1]=i,yr()[t/4+0]=n},e.wbg.__wbindgen_throw=function(t,e){throw new Error(dr(t,e))},e.wbg.__wbindgen_memory=function(){return pr(sr.memory)},e}function Rr(t){return Nr.apply(this,arguments)}function Nr(){return Nr=r((function*(t){if(void 0!==sr)return sr;void 0===t&&(t=new URL("data:application/wasm;base64,AGFzbQEAAAABgAIjYAF/AGACf38Bf2ACf38AYAN/f38AYAN/f38Bf2ABfwF/YAR/f39/AGAAAX9gCH9/f39/f39/AGAAAGAFf39/f38AYAV/f39/fwF/YAZ/f39/f38AYAd/f39/f39/AX9gA39/fwF+YAd/f39/f39/AGAEf39/fwF/YAJ/fwF8YAZ/f39/f38Bf2ACf3wAYAF/AXxgAXwBf2ACf38BfmAJf39/f39/fn5+AGADfn9/AX9gA39+fwF/YAt/f39/f39/f39/fwF/YAN/f34AYAV/f35/fwBgBH9+f38AYAV/f3x/fwBgBH98f38AYAV/f31/fwBgBH99f38AYAN/f3wAAuELKwN3YmcaX193YmluZGdlbl9vYmplY3RfZHJvcF9yZWYAAAN3YmcVX193YmluZGdlbl9zdHJpbmdfbmV3AAEDd2JnFV9fd2JpbmRnZW5fbnVtYmVyX2dldAACA3diZx1fX3diZ19jcnlwdG9fMWQxZjIyODI0YTZhMDgwYwAFA3diZxRfX3diaW5kZ2VuX2lzX29iamVjdAAFA3diZx5fX3diZ19wcm9jZXNzXzRhNzI4NDdjYzUwMzk5NWIABQN3YmcfX193YmdfdmVyc2lvbnNfZjY4NjU2NWU1ODZkZDkzNQAFA3diZxtfX3diZ19ub2RlXzEwNGEyZmY4ZDZlYTAzYTIABQN3YmcUX193YmluZGdlbl9pc19zdHJpbmcABQN3YmceX193YmdfcmVxdWlyZV9jY2E5MGIxYTk0YTAyNTViAAcDd2JnH19fd2JnX21zQ3J5cHRvX2ViMDVlNjJiNTMwYTE1MDgABQN3YmclX193YmdfcmFuZG9tRmlsbFN5bmNfNWM5Yzk1NWFhNTZiNjA0OQACA3diZyZfX3diZ19nZXRSYW5kb21WYWx1ZXNfM2FhNTZhYTZlZGVjODc0YwACA3diZxtfX3diaW5kZ2VuX29iamVjdF9jbG9uZV9yZWYABQN3YmcXX193YmluZGdlbl9pc191bmRlZmluZWQABQN3YmcVX193YmluZGdlbl9udW1iZXJfbmV3ABUDd2JnGl9fd2JnX3NldF9jZTU4MjdhY2U0YzY5NGRjAAMDd2JnGl9fd2JnX2dldF9iZDhlMzM4ZmJkNWY1Y2M4AAEDd2JnHV9fd2JnX2xlbmd0aF9jZDdhZjgxMTc2NzJiOGI4AAUDd2JnGl9fd2JnX25ld18xNmIzMDRhMmNmYTdmZjRhAAcDd2JnFl9fd2JpbmRnZW5faXNfZnVuY3Rpb24ABQN3YmcgX193YmdfbmV3bm9hcmdzX2UyNTgwODdjZDBkYWEwZWEAAQN3YmcbX193YmdfY2FsbF8yN2MwZjg3ODAxZGVkZjkzAAEDd2JnGl9fd2JnX25ld183MmZiOWExOGI1YWUyNjI0AAcDd2JnG19fd2JnX3NlbGZfY2UwZGJmYzQ1Y2YyZjViZQAHA3diZx1fX3diZ193aW5kb3dfYzZmYjkzOWE3ZjQzNjc4MwAHA3diZyFfX3diZ19nbG9iYWxUaGlzX2QxZTZhZjQ4NTZiYTMzMWIABwN3YmcdX193YmdfZ2xvYmFsXzIwN2I1NTg5NDI1Mjc0ODkABwN3YmcbX193YmdfcHVzaF9hNWIwNWFlZGM3MjM0ZjlmAAEDd2JnGl9fd2JnX25ld18yOGM1MTFkOWJhZWJmYTg5AAEDd2JnG19fd2JnX2NhbGxfYjNjYTdjNjA1MWY5YmVjMQAEA3diZx1fX3diZ19idWZmZXJfMTJkMDc5Y2MyMWUxNGJkYgAFA3diZzFfX3diZ19uZXd3aXRoYnl0ZW9mZnNldGFuZGxlbmd0aF80MjUzNjA0MzBhMWM4MjA2AAQDd2JnGl9fd2JnX25ld184Y2NjYmE4NmIwZjU3NGNiAAUDd2JnMV9fd2JnX25ld3dpdGhieXRlb2Zmc2V0YW5kbGVuZ3RoX2FhNGExN2MzM2EwNmU1Y2IABAN3YmcaX193YmdfbmV3XzYzYjkyYmM4NjcxZWQ0NjQABQN3YmcaX193Ymdfc2V0X2E0N2JhYzcwMzA2YTE5YTcAAwN3YmckX193YmdfbmV3d2l0aGxlbmd0aF9lOWI0ODc4Y2ViYWRiM2QzAAUDd2JnH19fd2JnX3N1YmFycmF5X2ExZjczY2Q0YjViNDJmZTEABAN3YmcfX193YmdfZ2V0aW5kZXhfMDBmN2U2ODliMGM5Y2I1ZgARA3diZxdfX3diaW5kZ2VuX2RlYnVnX3N0cmluZwACA3diZxBfX3diaW5kZ2VuX3Rocm93AAIDd2JnEV9fd2JpbmRnZW5fbWVtb3J5AAcDqASmBAMFBgMBAgYGAwMBBAQCAwMSAwYACgoDAwMDAwMDAwMDAwMBBAMDAwMDDAEECAgICAMECAgDAwMDCAgICAIDAwMDAwMDAwYBAwMDAwICAggIAgIDFg8PAgICDQ0XAAABDAIMAwMAAA0AAAAAAgsAAAAAAAAAAAEGAAAAAAAAAgAAAQMYAQAAAgAAAAAIAQEAAAABBwAAAwMDAwMABAQFBgIZAAAAAAAGAwYCAgICAgMAAAAAAgMCAwICBgYGBgIAAAICAAAAAAAAAAAAAQwCAAsAAAYGBgADAwICABoGAgIGAA0HBgYHAAACAgACAQEABwgAAwEGAQEAAAAAAwMPAwMDAwACAgICAgICAgIABQMDAwMDBgYDGwAKAAIAAQAABQUBAgMDAQACDAIDAgIBAgMCAgcBAwABCwIAAgIAAgUABgADAgICAgIJAgABAAAACQIAAgEBAgUDAAADAwMABQICBAIEAgMBAgMDAAAAAgAFAQMDAwMDBQACCwIBAwMDBgABAAEBAAABAAIDAQYAAAEBAQEQCQkAAQAAAQEBAAEBAQICAAIBAAAAAAATEwUFBQUFAAUGAgEUFAcFCQAAAAAAEgAKHAseIAIAAQAGAA4OAAAAAAQCAgAFAAcFAgUBAAAFByICARAFAQMBAQQGAAEKAQECAwIDAQACAgICAQIBAQMDAwMBAwABAQUBAQECARECCQkBAgEBAQIBAQQEBAQFBQAFBQAEBwFwAcYBxgEFAwEAEQYJAX8BQYCAwAALB8MHJgZtZW1vcnkCABFfX3diZ19jb29yZHNfZnJlZQD7AxRfX3diZ19nZXRfY29vcmRzX2xvbgDiAxRfX3diZ19zZXRfY29vcmRzX2xvbgDWAxRfX3diZ19nZXRfY29vcmRzX2xhdADjAxRfX3diZ19zZXRfY29vcmRzX2xhdADXAw9fX3diZ19ub2RlX2ZyZWUA/AMVX193YmdfZ2V0X25vZGVfdGhyX2lkAKMDFV9fd2JnX3NldF9ub2RlX3Rocl9pZAC1AxZfX3diZ19nZXRfbm9kZV9pc19ub2RlANgDFl9fd2JnX3NldF9ub2RlX2lzX25vZGUAzQMIbm9kZV9uZXcA4gIHbm9kZV9pZADZAw5ub2RlX3RvX3N0cmluZwCIAhNfX3diZ19yZWxhdGlvbl9mcmVlAM0EDHJlbGF0aW9uX25ldwDOBAtyZWxhdGlvbl9pZADaAxJyZWxhdGlvbl90b19zdHJpbmcAiQIXX193YmdfZ3JhcGh3cmFwcGVyX2ZyZWUA+QEQZ3JhcGh3cmFwcGVyX25ldwDdAhtncmFwaHdyYXBwZXJfY291bnRfdmVydGljZXMA2wMdZ3JhcGh3cmFwcGVyX2NvdW50X2h5cGVyZWRnZXMA3AMWZ3JhcGh3cmFwcGVyX3JtX3ZlcnRleADOAhlncmFwaHdyYXBwZXJfcm1faHlwZXJlZGdlAM8CGmdyYXBod3JhcHBlcl9jcmVhdGVfdmVydGV4AKgCIWdyYXBod3JhcHBlcl91cGRhdGVfdmVydGV4X3dlaWdodACbAhhncmFwaHdyYXBwZXJfY3JlYXRlX2VkZ2UAvgIhZ3JhcGh3cmFwcGVyX3VwZGF0ZV9lZGdlX3ZlcnRpY2VzAL8CHmdyYXBod3JhcHBlcl9nZXRfdmVydGV4X3dlaWdodACpAh5ncmFwaHdyYXBwZXJfZ2V0X2VkZ2VfdmVydGljZXMAqgIYZ3JhcGh3cmFwcGVyX2dyYXBoX2NsZWFyAKUDHWdyYXBod3JhcHBlcl9jbGVhcl9oeXBlckVkZ2VzAO4CLmdyYXBod3JhcHBlcl9nZW5lcmF0ZV9vZmZzZXRzX2Zvcl9hbGxfdmVydGljZXMAzQIRX193YmluZGdlbl9tYWxsb2MAmwMSX193YmluZGdlbl9yZWFsbG9jAL4DH19fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIAtQQPX193YmluZGdlbl9mcmVlAJQEFF9fd2JpbmRnZW5fZXhuX3N0b3JlAKMECY8DAQBBAQvFAakBrwHFAcwBowGqAbIBtQGwAaUBswGiAc0BtAG+Ab8BkAGkAY8BzwSeAYcBiAGaAZIBlAGVAaYBmQG6AZ8BkwGbAZwBpwGdAZgBuQG7Ac8EywTQBPoD+gP5A/kDsATpAfwB7wHQAfEB6gHyAZUCzwGSAvMB2wGRAvsB9AHtAfAB2gHuAdAEygPQBPYBkgRNxQPMBNAEpgO2BK8DvAOyA8cDkATGA7sD3gLQBNACtwS6A5ED9gK6BMwE0ATQBNAEvQOdBLoDgwSLBLYDzwTQBMwCzgPCAosChASuA9AEugOTBLgE0ATQBKwD0AT+A5kE0ATQBK8DswTQBIYEiAT/A/cD8APvA+4D8APxA+4D7gPyA9MC7APQBKIE0ATlAoAEpATZAtAElQSEBIwDrgG/BOcDngLQBMsD/gK9A9AE9QOoBJ0EiQSmBKQEjQOpBPQD3gG2AtAEpwTRA4EEwASlBNgChASOA8UEwQTQBMIEwwSWBJoEqgSrBMIDvAHQBKcE0AS0BFb/AsYECvGkDaYE0ioCHH8EfiMAQaAKayIDJAACQAJAAkACQAJAIAMCfwJAAkACQAJAAkACQCABKQMAIh9QRQRAIAEpAwgiIFANASABKQMQIiFQDQIgHyAhfCIiIB9UDQMgHyAgVA0EIAEsABohEiABLwEYIQEgAyAfPgIAIANBAUECIB9CgICAgBBUIgQbNgKgASADQQAgH0IgiKcgBBs2AgQgA0EIakEAQZgBEMoEGiADICA+AqQBIANBAUECICBCgICAgBBUIgQbNgLEAiADQQAgIEIgiKcgBBs2AqgBIANBrAFqQQBBmAEQygQaIAMgIT4CyAIgA0EBQQIgIUKAgICAEFQiBBs2AugDIANBACAhQiCIpyAEGzYCzAIgA0HQAmpBAEGYARDKBBogA0HwA2pBAEGcARDKBBogA0EBNgLsAyADQQE2AowFIAGtwyAiQgF9eX1CwprB6AR+QoChzaC0AnxCIIinIgTBIQ8CQCABwSIIQQBOBEAgAyABEHEaIANBpAFqIAEQcRogA0HIAmogARBxGgwBCyADQewDakEAIAhrwRBxGgsCQCAPQQBIBEAgA0EAIA9rQf//A3EiARA4IANBpAFqIAEQOCADQcgCaiABEDgMAQsgA0HsA2ogBEH//wNxEDgLIAMoAqABIQQgA0H8CGogA0GgARDHBBogAyAENgKcCiAEIAMoAugDIgggBCAISxsiBkEoSw0JIAZFBEBBACEGDAcLIAZBAXEhDCAGQQFGBEAMBgsgBkE+cSENIANB/AhqIQEgA0HIAmohBQNAIAEgCSABKAIAIhAgBSgCAGoiCmoiCTYCACABQQRqIgsgCygCACIRIAVBBGooAgBqIgsgCiAQSSAJIApJcmoiCjYCACALIBFJIAogC0lyIQkgBUEIaiEFIAFBCGohASANIAdBAmoiB0cNAAsMBQtB5+HAAEEcQYTiwAAQnAMAC0GU4sAAQR1BtOLAABCcAwALQcTiwABBHEHg4sAAEJwDAAtBqOTAAEE2QeDkwAAQnAMAC0Hg48AAQTdBmOTAABCcAwALIAwEfyAHQQJ0IgEgA0H8CGpqIgcgBygCACIHIANByAJqIAFqKAIAaiIBIAlqIgo2AgAgASAHSSABIApLcgUgCQtFDQAgBkEoRg0EIANB/AhqIAZBAnRqQQE2AgAgBkEBaiEGCyADIAY2ApwKIAMoAowFIgcgBiAGIAdJGyIBQSlPDQQgAUECdCEBAkADQCABBEBBfyABQQRrIgEgA0H8CGpqKAIAIgYgASADQewDamooAgAiCkcgBiAKSxsiBUUNAQwCCwtBf0EAIAEbIQULAkACQCAFIBJOBEAgBEUEQEEAIQQMAwsgBEEBa0H/////A3EiAUEBaiIGQQNxIQUgAUEDSQRAIAMhAUIAIR8MAgsgBkH8////B3EhCiADIQFCACEfA0AgASABNQIAQgp+IB98Ih8+AgAgAUEEaiIGIAY1AgBCCn4gH0IgiHwiHz4CACABQQhqIgYgBjUCAEIKfiAfQiCIfCIfPgIAIAFBDGoiBiAGNQIAQgp+IB9CIIh8Ih8+AgAgH0IgiCEfIAFBEGohASAKQQRrIgoNAAsMAQsgD0EBaiEPDAMLIAUEQANAIAEgATUCAEIKfiAffCIfPgIAIAFBBGohASAfQiCIIR8gBUEBayIFDQALCyAfpyIBRQ0AIARBKEYNBCADIARBAnRqIAE2AgAgBEEBaiEECyADIAQ2AqABAkAgAygCxAIiBEEpSQRAQQAhBkEAIARFDQIaIARBAWtB/////wNxIgFBAWoiCkEDcSEFIAFBA0kEQCADQaQBaiEBQgAhHwwCCyAKQfz///8HcSEKIANBpAFqIQFCACEfA0AgASABNQIAQgp+IB98Ih8+AgAgAUEEaiILIAs1AgBCCn4gH0IgiHwiHz4CACABQQhqIgsgCzUCAEIKfiAfQiCIfCIfPgIAIAFBDGoiCyALNQIAQgp+IB9CIIh8Ih8+AgAgH0IgiCEfIAFBEGohASAKQQRrIgoNAAsMAQsgBEEoQYCNwQAQrwQACyAFBEADQCABIAE1AgBCCn4gH3wiHz4CACABQQRqIQEgH0IgiCEfIAVBAWsiBQ0ACwsgBCAfpyIBRQ0AGiAEQShGDQMgA0GkAWogBEECdGogATYCACAEQQFqCzYCxAIgCARAIAhBAWtB/////wNxIgFBAWoiBEEDcSEFAkAgAUEDSQRAIANByAJqIQFCACEfDAELIARB/P///wdxIQogA0HIAmohAUIAIR8DQCABIAE1AgBCCn4gH3wiHz4CACABQQRqIgQgBDUCAEIKfiAfQiCIfCIfPgIAIAFBCGoiBCAENQIAQgp+IB9CIIh8Ih8+AgAgAUEMaiIEIAQ1AgBCCn4gH0IgiHwiHz4CACAfQiCIIR8gAUEQaiEBIApBBGsiCg0ACwsgBQRAA0AgASABNQIAQgp+IB98Ih8+AgAgAUEEaiEBIB9CIIghHyAFQQFrIgUNAAsLIB+nIgFFBEAgAyAINgLoAwwCCyAIQShGDQMgA0HIAmogCEECdGogATYCACAIQQFqIQYLIAMgBjYC6AMLIANBkAVqIgQgA0HsA2oiAUGgARDHBBogAyAHNgKwBiAEQQEQcSEVIAMoAowFIQQgA0G0BmoiCCABQaABEMcEGiADIAQ2AtQHIAhBAhBxIRYgAygCjAUhBCADQdgHaiIIIAFBoAEQxwQaIAMgBDYC+AggCEEDEHEhFwJAAkAgAygCoAEiByADKAL4CCIRIAcgEUsbIgZBKE0EQCADQYwFaiEYIANBsAZqIRkgA0HUB2ohGiADKAKMBSEQIAMoArAGIRMgAygC1AchFEEAIQgDQCAIIQogBkECdCEBAkADQCABBEBBfyABIBpqKAIAIgQgAUEEayIBIANqKAIAIghHIAQgCEsbIgVFDQEMAgsLQX9BACABGyEFC0EAIQwgAwJ/IAVBAU0EQCAGBEBBASEJQQAhByAGQQFHBEAgBkE+cSELIAMiAUHYB2ohBQNAIAEgCSABKAIAIgwgBSgCAEF/c2oiBGoiCTYCACABQQRqIgggCCgCACINIAVBBGooAgBBf3NqIgggBCAMSSAEIAlLcmoiBDYCACAIIA1JIAQgCElyIQkgBUEIaiEFIAFBCGohASALIAdBAmoiB0cNAAsLIAZBAXEEfyADIAdBAnQiAWoiBCAEKAIAIgQgASAXaigCAEF/c2oiASAJaiIINgIAIAEgBEkgASAIS3IFIAkLRQ0KCyADIAY2AqABQQghDCAGIQcLAkACQAJAAkAgByAUIAcgFEsbIgRBKUkEQCAEQQJ0IQECQANAIAEEQEF/IAEgGWooAgAiCCABQQRrIgEgA2ooAgAiBkcgBiAISRsiBUUNAQwCCwtBf0EAIAEbIQULAkAgBUEBSwRAIAchBAwBCyAEBEBBASEJQQAhByAEQQFHBEAgBEE+cSELIAMiAUG0BmohBQNAIAEgCSABKAIAIg0gBSgCAEF/c2oiCGoiCTYCACABQQRqIgYgBigCACIOIAVBBGooAgBBf3NqIgYgCCANSSAIIAlLcmoiCDYCACAGIA5JIAYgCEtyIQkgBUEIaiEFIAFBCGohASALIAdBAmoiB0cNAAsLIARBAXEEfyADIAdBAnQiAWoiCCAIKAIAIgggASAWaigCAEF/c2oiASAJaiIGNgIAIAEgCEkgASAGS3IFIAkLRQ0PCyADIAQ2AqABIAxBBHIhDAsgBCATIAQgE0sbIghBKU8NASAIQQJ0IQECQANAIAEEQEF/IAEgGGooAgAiBiABQQRrIgEgA2ooAgAiB0cgBiAHSxsiBUUNAQwCCwtBf0EAIAEbIQULAkAgBUEBSwRAIAQhCAwBCyAIBEBBASEJQQAhByAIQQFHBEAgCEE+cSELIAMiAUGQBWohBQNAIAEgCSABKAIAIg0gBSgCAEF/c2oiBGoiCTYCACABQQRqIgYgBigCACIOIAVBBGooAgBBf3NqIgYgBCANSSAEIAlLcmoiBDYCACAGIA5JIAQgBklyIQkgBUEIaiEFIAFBCGohASALIAdBAmoiB0cNAAsLIAhBAXEEfyADIAdBAnQiAWoiBCAEKAIAIgQgASAVaigCAEF/c2oiASAJaiIGNgIAIAEgBEkgASAGS3IFIAkLRQ0PCyADIAg2AqABIAxBAmohDAsgCCAQIAggEEsbIgZBKU8NCiAGQQJ0IQECQANAIAEEQEF/IAFBBGsiASADQewDamooAgAiBCABIANqKAIAIgdHIAQgB0sbIgVFDQEMAgsLQX9BACABGyEFCwJAIAVBAUsEQCAIIQYMAQsgBgRAQQEhCUEAIQcgBkEBRwRAIAZBPnEhCyADIgFB7ANqIQUDQCABIAkgASgCACINIAUoAgBBf3NqIgRqIgk2AgAgAUEEaiIIIAgoAgAiDiAFQQRqKAIAQX9zaiIIIAQgDUkgBCAJS3JqIgQ2AgAgCCAOSSAEIAhJciEJIAVBCGohBSABQQhqIQEgCyAHQQJqIgdHDQALCyAGQQFxBH8gAyAHQQJ0IgFqIgQgBCgCACIEIANB7ANqIAFqKAIAQX9zaiIBIAlqIgg2AgAgASAESSABIAhLcgUgCQtFDQ8LIAMgBjYCoAEgDEEBaiEMCyAKQRFGDQIgAiAKaiAMQTBqOgAAIAYgAygCxAIiCyAGIAtLGyIBQSlPDQwgCkEBaiEIIAFBAnQhAQJAA0AgAQRAQX8gAUEEayIBIANBpAFqaigCACIEIAEgA2ooAgAiB0cgBCAHSxsiBEUNAQwCCwtBf0EAIAEbIQQLIANB/AhqIANBoAEQxwQaIAMgBjYCnAogBiADKALoAyINIAYgDUsbIgxBKEsNAwJAIAxFBEBBACEMDAELQQAhCUEAIQcgDEEBRwRAIAxBPnEhGyADQfwIaiEBIANByAJqIQUDQCABIAkgASgCACIcIAUoAgBqIg5qIh02AgAgAUEEaiIJIAkoAgAiHiAFQQRqKAIAaiIJIA4gHEkgDiAdS3JqIg42AgAgCSAeSSAJIA5LciEJIAVBCGohBSABQQhqIQEgGyAHQQJqIgdHDQALCyAMQQFxBH8gB0ECdCIBIANB/AhqaiIHIAcoAgAiByADQcgCaiABaigCAGoiASAJaiIFNgIAIAEgB0kgASAFS3IFIAkLRQ0AIAxBKEYNDCADQfwIaiAMQQJ0akEBNgIAIAxBAWohDAsgAyAMNgKcCiAQIAwgDCAQSRsiAUEpTw0MIAFBAnQhAQJAA0AgAQRAQX8gAUEEayIBIANB/AhqaigCACIHIAEgA0HsA2pqKAIAIgVHIAUgB0kbIgVFDQEMAgsLQX9BACABGyEFCwJAIAUgEk4iASAEIBJIIgRFcUUEQCABDQsgBA0BDAoLQQAhBEEAIAZFDQYaIAZBAWtB/////wNxIgFBAWoiB0EDcSEFIAFBA0kEQCADIQFCACEfDAYLIAdB/P///wdxIQogAyEBQgAhHwNAIAEgATUCAEIKfiAffCIfPgIAIAFBBGoiByAHNQIAQgp+IB9CIIh8Ih8+AgAgAUEIaiIHIAc1AgBCCn4gH0IgiHwiHz4CACABQQxqIgcgBzUCAEIKfiAfQiCIfCIfPgIAIB9CIIghHyABQRBqIQEgCkEEayIKDQALDAULIANBARBxGiADKAKgASIBIAMoAowFIgQgASAESxsiAUEpTw0MIAFBAnQhASADQQRrIQQgA0HoA2ohBgJAA0AgAQRAIAEgBGohByABIAZqIQsgAUEEayEBQX8gCygCACILIAcoAgAiB0cgByALSRsiBUUNAQwCCwtBf0EAIAEbIQULIAVBAkkNCAwJCyAEQShBgI3BABCvBAALIAhBKEGAjcEAEK8EAAtBEUERQbDjwAAQ1QIACyAMQShBgI3BABCvBAALIAUEQANAIAEgATUCAEIKfiAffCIfPgIAIAFBBGohASAfQiCIIR8gBUEBayIFDQALCyAGIB+nIgFFDQAaIAZBKEYNBiADIAZBAnRqIAE2AgAgBkEBagsiBzYCoAECQCALRQ0AIAtBAWtB/////wNxIgFBAWoiBEEDcSEFAkAgAUEDSQRAIANBpAFqIQFCACEfDAELIARB/P///wdxIQogA0GkAWohAUIAIR8DQCABIAE1AgBCCn4gH3wiHz4CACABQQRqIgQgBDUCAEIKfiAfQiCIfCIfPgIAIAFBCGoiBCAENQIAQgp+IB9CIIh8Ih8+AgAgAUEMaiIEIAQ1AgBCCn4gH0IgiHwiHz4CACAfQiCIIR8gAUEQaiEBIApBBGsiCg0ACwsgBQRAA0AgASABNQIAQgp+IB98Ih8+AgAgAUEEaiEBIB9CIIghHyAFQQFrIgUNAAsLIB+nIgFFBEAgCyEEDAELIAtBKEYNBiADQaQBaiALQQJ0aiABNgIAIAtBAWohBAsgAyAENgLEAgJAIA1FBEBBACENDAELIA1BAWtB/////wNxIgFBAWoiBEEDcSEFAkAgAUEDSQRAIANByAJqIQFCACEfDAELIARB/P///wdxIQogA0HIAmohAUIAIR8DQCABIAE1AgBCCn4gH3wiHz4CACABQQRqIgQgBDUCAEIKfiAfQiCIfCIfPgIAIAFBCGoiBCAENQIAQgp+IB9CIIh8Ih8+AgAgAUEMaiIEIAQ1AgBCCn4gH0IgiHwiHz4CACAfQiCIIR8gAUEQaiEBIApBBGsiCg0ACwsgBQRAA0AgASABNQIAQgp+IB98Ih8+AgAgAUEEaiEBIB9CIIghHyAFQQFrIgUNAAsLIB+nIgFFDQAgDUEoRg0GIANByAJqIA1BAnRqIAE2AgAgDUEBaiENCyADIA02AugDIAcgESAHIBFLGyIGQShNDQALCwwCCyACIAhqIQQgCiEBQX8hBQJAA0AgAUF/Rg0BIAVBAWohBSABIAJqIAFBAWshAS0AAEE5Rg0ACyABIAJqIgRBAWoiBiAGLQAAQQFqOgAAIAFBAmogCksNASAEQQJqQTAgBRDKBBoMAQsgAkExOgAAIAoEQCACQQFqQTAgChDKBBoLIAhBEUkEQCAEQTA6AAAgD0EBaiEPIApBAmohCAwBCyAIQRFBwOPAABDVAgALIAhBEU0EQCAAIA87AQggACAINgIEIAAgAjYCACADQaAKaiQADwsgCEERQdDjwAAQrwQACyAGQShBgI3BABCvBAALQShBKEGAjcEAENUCAAsgAUEoQYCNwQAQrwQAC0GQjcEAQRpBgI3BABCcAwALqyQCCX8BfiMAQRBrIggkAAJAAkACQAJAAkACQAJAIABB9QFPBEAgAEHN/3tPDQcgAEELaiIAQXhxIQVBpJnBACgCACIJRQ0EQQAgBWshAwJ/QQAgBUGAAkkNABpBHyAFQf///wdLDQAaIAVBBiAAQQh2ZyIAa3ZBAXEgAEEBdGtBPmoLIgdBAnRBiJbBAGooAgAiAkUEQEEAIQAMAgtBACEAIAVBGSAHQQF2a0EAIAdBH0cbdCEEA0ACQCACKAIEQXhxIgYgBUkNACAGIAVrIgYgA08NACACIQEgBiIDDQBBACEDIAEhAAwECyACKAIUIgYgACAGIAIgBEEddkEEcWpBEGooAgAiAkcbIAAgBhshACAEQQF0IQQgAg0ACwwBC0GgmcEAKAIAIgJBECAAQQtqQfgDcSAAQQtJGyIFQQN2IgB2IgFBA3EEQAJAIAFBf3NBAXEgAGoiAUEDdCIAQZiXwQBqIgQgAEGgl8EAaigCACIAKAIIIgNHBEAgAyAENgIMIAQgAzYCCAwBC0GgmcEAIAJBfiABd3E2AgALIABBCGohAyAAIAFBA3QiAUEDcjYCBCAAIAFqIgAgACgCBEEBcjYCBAwHCyAFQaiZwQAoAgBNDQMCQAJAIAFFBEBBpJnBACgCACIARQ0GIABoQQJ0QYiWwQBqKAIAIgEoAgRBeHEgBWshAyABIQIDQAJAIAEoAhAiAA0AIAEoAhQiAA0AIAIoAhghBwJAAkAgAiACKAIMIgBGBEAgAkEUQRAgAigCFCIAG2ooAgAiAQ0BQQAhAAwCCyACKAIIIgEgADYCDCAAIAE2AggMAQsgAkEUaiACQRBqIAAbIQQDQCAEIQYgASIAQRRqIABBEGogACgCFCIBGyEEIABBFEEQIAEbaigCACIBDQALIAZBADYCAAsgB0UNBCACIAIoAhxBAnRBiJbBAGoiASgCAEcEQCAHQRBBFCAHKAIQIAJGG2ogADYCACAARQ0FDAQLIAEgADYCACAADQNBpJnBAEGkmcEAKAIAQX4gAigCHHdxNgIADAQLIAAoAgRBeHEgBWsiASADIAEgA0kiARshAyAAIAIgARshAiAAIQEMAAsACwJAQQIgAHQiBEEAIARrciABIAB0cWgiAUEDdCIAQZiXwQBqIgQgAEGgl8EAaigCACIAKAIIIgNHBEAgAyAENgIMIAQgAzYCCAwBC0GgmcEAIAJBfiABd3E2AgALIAAgBUEDcjYCBCAAIAVqIgYgAUEDdCIBIAVrIgRBAXI2AgQgACABaiAENgIAQaiZwQAoAgAiAwRAIANBeHFBmJfBAGohAUGwmcEAKAIAIQICf0GgmcEAKAIAIgVBASADQQN2dCIDcUUEQEGgmcEAIAMgBXI2AgAgAQwBCyABKAIICyEDIAEgAjYCCCADIAI2AgwgAiABNgIMIAIgAzYCCAsgAEEIaiEDQbCZwQAgBjYCAEGomcEAIAQ2AgAMCAsgACAHNgIYIAIoAhAiAQRAIAAgATYCECABIAA2AhgLIAIoAhQiAUUNACAAIAE2AhQgASAANgIYCwJAAkAgA0EQTwRAIAIgBUEDcjYCBCACIAVqIgQgA0EBcjYCBCADIARqIAM2AgBBqJnBACgCACIGRQ0BIAZBeHFBmJfBAGohAEGwmcEAKAIAIQECf0GgmcEAKAIAIgVBASAGQQN2dCIGcUUEQEGgmcEAIAUgBnI2AgAgAAwBCyAAKAIICyEGIAAgATYCCCAGIAE2AgwgASAANgIMIAEgBjYCCAwBCyACIAMgBWoiAEEDcjYCBCAAIAJqIgAgACgCBEEBcjYCBAwBC0GwmcEAIAQ2AgBBqJnBACADNgIACyACQQhqIQMMBgsgACABckUEQEEAIQFBAiAHdCIAQQAgAGtyIAlxIgBFDQMgAGhBAnRBiJbBAGooAgAhAAsgAEUNAQsDQCAAIAEgACgCBEF4cSIEIAVrIgYgA0kiBxshCSAAKAIQIgJFBEAgACgCFCECCyABIAkgBCAFSSIAGyEBIAMgBiADIAcbIAAbIQMgAiIADQALCyABRQ0AIAVBqJnBACgCACIATSADIAAgBWtPcQ0AIAEoAhghBwJAAkAgASABKAIMIgBGBEAgAUEUQRAgASgCFCIAG2ooAgAiAg0BQQAhAAwCCyABKAIIIgIgADYCDCAAIAI2AggMAQsgAUEUaiABQRBqIAAbIQQDQCAEIQYgAiIAQRRqIABBEGogACgCFCICGyEEIABBFEEQIAIbaigCACICDQALIAZBADYCAAsgB0UNAiABIAEoAhxBAnRBiJbBAGoiAigCAEcEQCAHQRBBFCAHKAIQIAFGG2ogADYCACAARQ0DDAILIAIgADYCACAADQFBpJnBAEGkmcEAKAIAQX4gASgCHHdxNgIADAILAkACQAJAAkACQCAFQaiZwQAoAgAiAUsEQCAFQayZwQAoAgAiAE8EQCAFQa+ABGpBgIB8cSICQRB2QAAhACAIQQRqIgFBADYCCCABQQAgAkGAgHxxIABBf0YiAhs2AgQgAUEAIABBEHQgAhs2AgAgCCgCBCIBRQRAQQAhAwwKCyAIKAIMIQZBuJnBACAIKAIIIgNBuJnBACgCAGoiADYCAEG8mcEAQbyZwQAoAgAiAiAAIAAgAkkbNgIAAkACQEG0mcEAKAIAIgIEQEGIl8EAIQADQCABIAAoAgAiBCAAKAIEIgdqRg0CIAAoAggiAA0ACwwCC0HEmcEAKAIAIgBBACAAIAFNG0UEQEHEmcEAIAE2AgALQciZwQBB/x82AgBBlJfBACAGNgIAQYyXwQAgAzYCAEGIl8EAIAE2AgBBpJfBAEGYl8EANgIAQayXwQBBoJfBADYCAEGgl8EAQZiXwQA2AgBBtJfBAEGol8EANgIAQaiXwQBBoJfBADYCAEG8l8EAQbCXwQA2AgBBsJfBAEGol8EANgIAQcSXwQBBuJfBADYCAEG4l8EAQbCXwQA2AgBBzJfBAEHAl8EANgIAQcCXwQBBuJfBADYCAEHUl8EAQciXwQA2AgBByJfBAEHAl8EANgIAQdyXwQBB0JfBADYCAEHQl8EAQciXwQA2AgBB5JfBAEHYl8EANgIAQdiXwQBB0JfBADYCAEHgl8EAQdiXwQA2AgBB7JfBAEHgl8EANgIAQeiXwQBB4JfBADYCAEH0l8EAQeiXwQA2AgBB8JfBAEHol8EANgIAQfyXwQBB8JfBADYCAEH4l8EAQfCXwQA2AgBBhJjBAEH4l8EANgIAQYCYwQBB+JfBADYCAEGMmMEAQYCYwQA2AgBBiJjBAEGAmMEANgIAQZSYwQBBiJjBADYCAEGQmMEAQYiYwQA2AgBBnJjBAEGQmMEANgIAQZiYwQBBkJjBADYCAEGkmMEAQZiYwQA2AgBBrJjBAEGgmMEANgIAQaCYwQBBmJjBADYCAEG0mMEAQaiYwQA2AgBBqJjBAEGgmMEANgIAQbyYwQBBsJjBADYCAEGwmMEAQaiYwQA2AgBBxJjBAEG4mMEANgIAQbiYwQBBsJjBADYCAEHMmMEAQcCYwQA2AgBBwJjBAEG4mMEANgIAQdSYwQBByJjBADYCAEHImMEAQcCYwQA2AgBB3JjBAEHQmMEANgIAQdCYwQBByJjBADYCAEHkmMEAQdiYwQA2AgBB2JjBAEHQmMEANgIAQeyYwQBB4JjBADYCAEHgmMEAQdiYwQA2AgBB9JjBAEHomMEANgIAQeiYwQBB4JjBADYCAEH8mMEAQfCYwQA2AgBB8JjBAEHomMEANgIAQYSZwQBB+JjBADYCAEH4mMEAQfCYwQA2AgBBjJnBAEGAmcEANgIAQYCZwQBB+JjBADYCAEGUmcEAQYiZwQA2AgBBiJnBAEGAmcEANgIAQZyZwQBBkJnBADYCAEGQmcEAQYiZwQA2AgBBtJnBACABQQ9qQXhxIgBBCGsiAjYCAEGYmcEAQZCZwQA2AgBBrJnBACADQShrIgQgASAAa2pBCGoiADYCACACIABBAXI2AgQgASAEakEoNgIEQcCZwQBBgICAATYCAAwICyACIARJIAEgAk1yDQAgACgCDCIEQQFxDQAgBEEBdiAGRg0DC0HEmcEAQcSZwQAoAgAiACABIAAgAUkbNgIAIAEgA2ohBEGIl8EAIQACQAJAA0AgBCAAKAIARwRAIAAoAggiAA0BDAILCyAAKAIMIgdBAXENACAHQQF2IAZGDQELQYiXwQAhAANAAkAgAiAAKAIAIgRPBEAgBCAAKAIEaiIHIAJLDQELIAAoAgghAAwBCwtBtJnBACABQQ9qQXhxIgBBCGsiBDYCAEGsmcEAIANBKGsiCSABIABrakEIaiIANgIAIAQgAEEBcjYCBCABIAlqQSg2AgRBwJnBAEGAgIABNgIAIAIgB0Ega0F4cUEIayIAIAAgAkEQakkbIgRBGzYCBEGIl8EAKQIAIQogBEEQakGQl8EAKQIANwIAIAQgCjcCCEGUl8EAIAY2AgBBjJfBACADNgIAQYiXwQAgATYCAEGQl8EAIARBCGo2AgAgBEEcaiEAA0AgAEEHNgIAIABBBGoiACAHSQ0ACyACIARGDQcgBCAEKAIEQX5xNgIEIAIgBCACayIAQQFyNgIEIAQgADYCACAAQYACTwRAIAIgABCxAQwICyAAQXhxQZiXwQBqIQECf0GgmcEAKAIAIgRBASAAQQN2dCIAcUUEQEGgmcEAIAAgBHI2AgAgAQwBCyABKAIICyEAIAEgAjYCCCAAIAI2AgwgAiABNgIMIAIgADYCCAwHCyAAIAE2AgAgACAAKAIEIANqNgIEIAFBD2pBeHFBCGsiAiAFQQNyNgIEIARBD2pBeHFBCGsiAyACIAVqIgBrIQUgA0G0mcEAKAIARg0DIANBsJnBACgCAEYNBCADKAIEIgFBA3FBAUYEQCADIAFBeHEiARCWASABIAVqIQUgASADaiIDKAIEIQELIAMgAUF+cTYCBCAAIAVBAXI2AgQgACAFaiAFNgIAIAVBgAJPBEAgACAFELEBDAYLIAVBeHFBmJfBAGohAQJ/QaCZwQAoAgAiBEEBIAVBA3Z0IgNxRQRAQaCZwQAgAyAEcjYCACABDAELIAEoAggLIQQgASAANgIIIAQgADYCDCAAIAE2AgwgACAENgIIDAULQayZwQAgACAFayIBNgIAQbSZwQBBtJnBACgCACIAIAVqIgI2AgAgAiABQQFyNgIEIAAgBUEDcjYCBCAAQQhqIQMMCAtBsJnBACgCACEAAkAgASAFayICQQ9NBEBBsJnBAEEANgIAQaiZwQBBADYCACAAIAFBA3I2AgQgACABaiIBIAEoAgRBAXI2AgQMAQtBqJnBACACNgIAQbCZwQAgACAFaiIENgIAIAQgAkEBcjYCBCAAIAFqIAI2AgAgACAFQQNyNgIECyAAQQhqIQMMBwsgACADIAdqNgIEQbSZwQBBtJnBACgCACIAQQ9qQXhxIgFBCGsiAjYCAEGsmcEAQayZwQAoAgAgA2oiBCAAIAFrakEIaiIBNgIAIAIgAUEBcjYCBCAAIARqQSg2AgRBwJnBAEGAgIABNgIADAMLQbSZwQAgADYCAEGsmcEAQayZwQAoAgAgBWoiATYCACAAIAFBAXI2AgQMAQtBsJnBACAANgIAQaiZwQBBqJnBACgCACAFaiIBNgIAIAAgAUEBcjYCBCAAIAFqIAE2AgALIAJBCGohAwwDC0EAIQNBrJnBACgCACIAIAVNDQJBrJnBACAAIAVrIgE2AgBBtJnBAEG0mcEAKAIAIgAgBWoiAjYCACACIAFBAXI2AgQgACAFQQNyNgIEIABBCGohAwwCCyAAIAc2AhggASgCECICBEAgACACNgIQIAIgADYCGAsgASgCFCICRQ0AIAAgAjYCFCACIAA2AhgLAkAgA0EQTwRAIAEgBUEDcjYCBCABIAVqIgAgA0EBcjYCBCAAIANqIAM2AgAgA0GAAk8EQCAAIAMQsQEMAgsgA0F4cUGYl8EAaiECAn9BoJnBACgCACIEQQEgA0EDdnQiA3FFBEBBoJnBACADIARyNgIAIAIMAQsgAigCCAshBCACIAA2AgggBCAANgIMIAAgAjYCDCAAIAQ2AggMAQsgASADIAVqIgBBA3I2AgQgACABaiIAIAAoAgRBAXI2AgQLIAFBCGohAwsgCEEQaiQAIAMLvBQBCX4gACABKQMAIgVCf4UiByACKQMAIgkgASkDCCIEIAOthSIGQjiGIAZCgP4Dg0IohoQgBkKAgPwHg0IYhiAGQoCAgPgPg0IIhoSEIARCCIhCgICA+A+DIARCGIhCgID8B4OEIARCKIhCgP4DgyAEQjiIhISEQtKBqpur+oLXp39+IgRCOIYgBEKA/gODQiiGhCAEQoCA/AeDQhiGIARCgICA+A+DQgiGhIQgBEIIiEKAgID4D4MgBEIYiEKAgPwHg4QgBEIoiEKA/gODIARCOIiEhIQgBkLYotHvwqnlvy1+hSIIIAIpAxgiCoUiBELYotHvwqnlvy1+IARCOIYgBEKA/gODQiiGhCAEQoCA/AeDQhiGIARCgICA+A+DQgiGhIQgBEIIiEKAgID4D4MgBEIYiEKAgPwHg4QgBEIoiEKA/gODIARCOIiEhIRC0oGqm6v6gtenf34iBEI4hiAEQoD+A4NCKIaEIARCgID8B4NCGIYgBEKAgID4D4NCCIaEhCAEQgiIQoCAgPgPgyAEQhiIQoCA/AeDhCAEQiiIQoD+A4MgBEI4iISEhIWFIgRCOIYgBEKA/gODQiiGhCAEQoCA/AeDQhiGIARCgICA+A+DQgiGhIQgBEIIiEKAgID4D4MgBEIYiEKAgPwHg4QgBEIoiEKA/gODIARCOIiEhIRC0oGqm6v6gtenf34iBkI4hiAGQoD+A4NCKIaEIAZCgID8B4NCGIYgBkKAgID4D4NCCIaEhCAGQgiIQoCAgPgPgyAGQhiIQoCA/AeDhCAGQiiIQoD+A4MgBkI4iISEhCAEQtii0e/CqeW/LX6FIgRCOIYgBEKA/gODQiiGhCAEQoCA/AeDQhiGIARCgICA+A+DQgiGhIQgBEIIiEKAgID4D4MgBEIYiEKAgPwHg4QgBEIoiEKA/gODIARCOIiEhIR+IgZCOIYgBkKA/gODQiiGhCAGQoCA/AeDQhiGIAZCgICA+A+DQgiGhIQgBkIIiEKAgID4D4MgBkIYiEKAgPwHg4QgBkIoiEKA/gODIAZCOIiEhIQgBCAFQjiGIAVCgP4Dg0IohoQgBUKAgPwHg0IYhiAFQoCAgPgPg0IIhoSEIAVCCIhCgICA+A+DIAVCGIhCgID8B4OEIAVCKIhCgP4DgyAFQjiIhISEIgZ+hSAEiTcDGCAAIAIpAwgiCyAIIAIpAxAiDIUiBELYotHvwqnlvy1+IARCOIYgBEKA/gODQiiGhCAEQoCA/AeDQhiGIARCgICA+A+DQgiGhIQgBEIIiEKAgID4D4MgBEIYiEKAgPwHg4QgBEIoiEKA/gODIARCOIiEhIRC0oGqm6v6gtenf34iBEI4hiAEQoD+A4NCKIaEIARCgID8B4NCGIYgBEKAgID4D4NCCIaEhCAEQgiIQoCAgPgPgyAEQhiIQoCA/AeDhCAEQiiIQoD+A4MgBEI4iISEhIWFIgRCOIYgBEKA/gODQiiGhCAEQoCA/AeDQhiGIARCgICA+A+DQgiGhIQgBEIIiEKAgID4D4MgBEIYiEKAgPwHg4QgBEIoiEKA/gODIARCOIiEhIRC0oGqm6v6gtenf34iBUI4hiAFQoD+A4NCKIaEIAVCgID8B4NCGIYgBUKAgID4D4NCCIaEhCAFQgiIQoCAgPgPgyAFQhiIQoCA/AeDhCAFQiiIQoD+A4MgBUI4iISEhCAEQtii0e/CqeW/LX6FIgRCOIYgBEKA/gODQiiGhCAEQoCA/AeDQhiGIARCgICA+A+DQgiGhIQgBEIIiEKAgID4D4MgBEIYiEKAgPwHg4QgBEIoiEKA/gODIARCOIiEhIQgB34iBUI4hiAFQoD+A4NCKIaEIAVCgID8B4NCGIYgBUKAgID4D4NCCIaEhCAFQgiIQoCAgPgPgyAFQhiIQoCA/AeDhCAFQiiIQoD+A4MgBUI4iISEhCAEIAZ+hSAEiTcDECAAIAogCCALhSIEQtii0e/CqeW/LX4gBEI4hiAEQoD+A4NCKIaEIARCgID8B4NCGIYgBEKAgID4D4NCCIaEhCAEQgiIQoCAgPgPgyAEQhiIQoCA/AeDhCAEQiiIQoD+A4MgBEI4iISEhELSgaqbq/qC16d/fiIEQjiGIARCgP4Dg0IohoQgBEKAgPwHg0IYhiAEQoCAgPgPg0IIhoSEIARCCIhCgICA+A+DIARCGIhCgID8B4OEIARCKIhCgP4DgyAEQjiIhISEhYUiBEI4hiAEQoD+A4NCKIaEIARCgID8B4NCGIYgBEKAgID4D4NCCIaEhCAEQgiIQoCAgPgPgyAEQhiIQoCA/AeDhCAEQiiIQoD+A4MgBEI4iISEhELSgaqbq/qC16d/fiIFQjiGIAVCgP4Dg0IohoQgBUKAgPwHg0IYhiAFQoCAgPgPg0IIhoSEIAVCCIhCgICA+A+DIAVCGIhCgID8B4OEIAVCKIhCgP4DgyAFQjiIhISEIARC2KLR78Kp5b8tfoUiBEI4hiAEQoD+A4NCKIaEIARCgID8B4NCGIYgBEKAgID4D4NCCIaEhCAEQgiIQoCAgPgPgyAEQhiIQoCA/AeDhCAEQiiIQoD+A4MgBEI4iISEhCAHfiIFQjiGIAVCgP4Dg0IohoQgBUKAgPwHg0IYhiAFQoCAgPgPg0IIhoSEIAVCCIhCgICA+A+DIAVCGIhCgID8B4OEIAVCKIhCgP4DgyAFQjiIhISEIAQgBn6FIASJNwMIIAAgDCAIIAmFIgRC2KLR78Kp5b8tfiAEQjiGIARCgP4Dg0IohoQgBEKAgPwHg0IYhiAEQoCAgPgPg0IIhoSEIARCCIhCgICA+A+DIARCGIhCgID8B4OEIARCKIhCgP4DgyAEQjiIhISEQtKBqpur+oLXp39+IgRCOIYgBEKA/gODQiiGhCAEQoCA/AeDQhiGIARCgICA+A+DQgiGhIQgBEIIiEKAgID4D4MgBEIYiEKAgPwHg4QgBEIoiEKA/gODIARCOIiEhISFhSIEQjiGIARCgP4Dg0IohoQgBEKAgPwHg0IYhiAEQoCAgPgPg0IIhoSEIARCCIhCgICA+A+DIARCGIhCgID8B4OEIARCKIhCgP4DgyAEQjiIhISEQtKBqpur+oLXp39+IgVCOIYgBUKA/gODQiiGhCAFQoCA/AeDQhiGIAVCgICA+A+DQgiGhIQgBUIIiEKAgID4D4MgBUIYiEKAgPwHg4QgBUIoiEKA/gODIAVCOIiEhIQgBELYotHvwqnlvy1+hSIEQjiGIARCgP4Dg0IohoQgBEKAgPwHg0IYhiAEQoCAgPgPg0IIhoSEIARCCIhCgICA+A+DIARCGIhCgID8B4OEIARCKIhCgP4DgyAEQjiIhISEIAd+IgVCOIYgBUKA/gODQiiGhCAFQoCA/AeDQhiGIAVCgICA+A+DQgiGhIQgBUIIiEKAgID4D4MgBUIYiEKAgPwHg4QgBUIoiEKA/gODIAVCOIiEhIQgBCAGfoUgBIk3AwALsBACGn4IfyMAQTBrIh8kAAJAAn8CQAJAAkACQAJAAkACQAJAIAEpAwAiBFBFBEAgASkDCCIFUA0BIAEpAxAiA1ANAiADIAR8IgMgBFQNAyAEIAVUDQQgA0KAgICAgICAgCBaDQUgHyABLwEYIgE7AQggHyAEIAV9IgU3AwAgASABQSBrIAEgA0KAgICAEFQiHhsiHUEQayAdIANCIIYgAyAeGyIDQoCAgICAgMAAVCIeGyIdQQhrIB0gA0IQhiADIB4bIgNCgICAgICAgIABVCIeGyIdQQRrIB0gA0IIhiADIB4bIgNCgICAgICAgIAQVCIeGyIdQQJrIB0gA0IEhiADIB4bIgNCgICAgICAgIDAAFQiHhsgA0IChiADIB4bIgpCAFkiHWsiHmvBIiBBAEgNBiAfIAUgIK0iA4YiBiADiCIHNwMQIAUgB1INCiAfIAE7AQggHyAENwMAIB8gBCADQj+DIgWGIgMgBYgiBTcDECAEIAVSDQpBoH8gHmvBQdAAbEGwpwVqQc4QbSIBQdEATw0HIAFBBHQiAUGQ5sAAaikDACIFQv////8PgyIEIANCIIgiEX4iCEIgiCIZIAVCIIgiByARfiIafCAHIANC/////w+DIgN+IgVCIIgiG3whDCAIQv////8PgyADIAR+QiCIfCAFQv////8Pg3xCgICAgAh8QiCIIRBCAUEAIB4gAUGY5sAAai8BAGprQT9xrSIJhiIIQgF9IQ0gBCAGQiCIIgN+IgVC/////w+DIAQgBkL/////D4MiBn5CIIh8IAYgB34iBkL/////D4N8QoCAgIAIfEIgiCESIAMgB34hEyAGQiCIIRQgBUIgiCEVIAFBmubAAGovAQAhASAHIAogHa2GIgNCIIgiFn4iFyAEIBZ+IgVCIIgiDnwgByADQv////8PgyIDfiIGQiCIIg98IAVC/////w+DIAMgBH5CIIh8IAZC/////w+DfCIYQoCAgIAIfEIgiHxCAXwiCyAJiKciHkGQzgBPBEAgHkHAhD1JDQkgHkGAwtcvTwRAQQhBCSAeQYCU69wDSSIdGyEgQYDC1y9BgJTr3AMgHRsMCwtBBkEHIB5BgK3iBEkiHRshIEHAhD1BgK3iBCAdGwwKCyAeQeQATwRAQQJBAyAeQegHSSIdGyEgQeQAQegHIB0bDAoLQQpBASAeQQlLIiAbDAkLQefhwABBHEHg8MAAEJwDAAtBlOLAAEEdQfDwwAAQnAMAC0HE4sAAQRxBgPHAABCcAwALQajkwABBNkGg8sAAEJwDAAtB4OPAAEE3QZDywAAQnAMAC0Gg8cAAQS1B0PHAABCcAwALQdjewABBHUGY38AAEJwDAAsgAUHRAEHQ8MAAENUCAAtBBEEFIB5BoI0GSSIdGyEgQZDOAEGgjQYgHRsLIR0gDCAQfCEMIAsgDYMhAyAgIAFrQQFqISIgCyATIBV8IBR8IBJ8fSIcQgF8IgYgDYMhBUEAIQECQAJAAkACQAJAAkACQAJAA0AgHiAdbiEhIAFBEUYNAiABIAJqIiQgIUEwaiIjOgAAAkAgHiAdICFsayIerSAJhiIKIAN8IgQgBloEQCABICBHDQEgAUEBaiEBQgEhBANAIAQhBiAFIQcgAUERTw0GIAEgAmogA0IKfiIDIAmIp0EwaiIdOgAAIAFBAWohASAEQgp+IQQgBUIKfiIFIAMgDYMiA1gNAAsgBCALIAx9fiIJIAR8IQogBSADfSAIVCIeDQcgCSAEfSIJIANWDQMMBwsgBiAEfSIFIB2tIAmGIgZUIR0gCyAMfSIJQgF8IQggBSAGVCAJQgF9IgkgBFhyDQVCAiAUIBV8IBJ8IBN8IAMgBnwiBCAKfHx9IQ1CACAZIBt8IBB8IgsgGnwgAyAKfHx9IQwgGEKAgICACHxCIIgiECAOIA98fCAXfCEFIAQgC3wgByARIBZ9fnwgDn0gD30gEH0hBwNAIAQgCnwiDiAJVCAFIAx8IAcgCnxackUEQCADIAp8IQRBACEdDAcLICQgI0EBayIjOgAAIAMgBnwhAyAFIA18IQsgCSAOVgRAIAYgB3whByAEIAZ8IQQgBSAGfSEFIAYgC1gNAQsLIAYgC1YhHSADIAp8IQQMBQsgAUEBaiEBIB1BCkkgHUEKbiEdRQ0AC0Hg8cAAEMEDAAsgASACakEBayEgIAdCCn4gAyAIfH0hCyAIIAxCCn4gDiAPfCAYQoCAgIAIfEIgiHwgF3xCCn59IAZ+fCENIAkgA30hDkIAIQcDQCADIAh8IgQgCVQgByAOfCADIA18WnJFBEBBACEeDAULICAgHUEBayIdOgAAIAcgC3wiDyAIVCEeIAQgCVoNBSAHIAh9IQcgBCEDIAggD1gNAAsMBAtBEUERQfDxwAAQ1QIACyABQRFBgPLAABDVAgALAkAgBCAIWiAdcg0AIAggBCAGfCIDWCAIIAR9IAMgCH1UcQ0AIABBADYCAAwECyAEIBxCA31YIARCAlpxRQRAIABBADYCAAwECyAAICI7AQggACABQQFqNgIEDAILIAMhBAsCQCAEIApaIB5yDQAgCiAEIAh8IgNYIAogBH0gAyAKfVRxDQAgAEEANgIADAILIAQgBkJYfiAFfFggBCAGQhR+WnFFBEAgAEEANgIADAILIAAgIjsBCCAAIAE2AgQLIAAgAjYCAAsgH0EwaiQADwsgH0EANgIYIwBBEGsiACQAIAAgHzYCDCAAIB9BEGo2AgggAEEIakGc+MAAIABBDGpBnPjAACAfQRhqQajfwAAQjAEAC6gPAgZ+A38gACkDCCIEIAEoAggiCq2FIgJCOIYgAkKA/gODQiiGhCACQoCA/AeDQhiGIAJCgICA+A+DQgiGhIQgBEIIiEKAgID4D4MgBEIYiEKAgPwHg4QgBEIoiEKA/gODIARCOIiEhIRC0oGqm6v6gtenf34iBEI4hiAEQoD+A4NCKIaEIARCgID8B4NCGIYgBEKAgID4D4NCCIaEhCAEQgiIQoCAgPgPgyAEQhiIQoCA/AeDhCAEQiiIQoD+A4MgBEI4iISEhCACQtii0e/CqeW/LX6FIApBAnQiCa18Qq3+1eTUhf2o2AB+IQIgASgCBCEIIAApAxghAyAAKQMQIQYgACkDACEEAkAgCUEITQRAIAIgBHwCfiAKRQRAQgAMAQsgCCAJakEEazUAACEHIAg1AAALIAaFIgVCOIYgBUKA/gODQiiGhCAFQoCA/AeDQhiGIAVCgICA+A+DQgiGhIQgBkIIiEKAgID4D4MgBkIYiEKAgPwHg4QgBkIoiEKA/gODIAZCOIiEhIQgAyAHhSIGQn+FfiICQjiGIAJCgP4Dg0IohoQgAkKAgPwHg0IYhiACQoCAgPgPg0IIhoSEIAJCCIhCgICA+A+DIAJCGIhCgID8B4OEIAJCKIhCgP4DgyACQjiIhISEhSAGQjiGIAZCgP4Dg0IohoQgBkKAgPwHg0IYhiAGQoCAgPgPg0IIhoSEIANCCIhCgICA+A+DIANCGIhCgID8B4OEIANCKIhCgP4DgyADQjiIhISEIAV+hUIXiSECDAELIAlBEE0EQCACIAR8IAgpAAAgBoUiAkI4hiACQoD+A4NCKIaEIAJCgID8B4NCGIYgAkKAgID4D4NCCIaEhCACQgiIQoCAgPgPgyACQhiIQoCA/AeDhCACQiiIQoD+A4MgAkI4iISEhCAIIAlqQQhrKQAAIAOFIgNCf4V+IgZCOIYgBkKA/gODQiiGhCAGQoCA/AeDQhiGIAZCgICA+A+DQgiGhIQgBkIIiEKAgID4D4MgBkIYiEKAgPwHg4QgBkIoiEKA/gODIAZCOIiEhISFIANCOIYgA0KA/gODQiiGhCADQoCA/AeDQhiGIANCgICA+A+DQgiGhIQgA0IIiEKAgID4D4MgA0IYiEKAgPwHg4QgA0IoiEKA/gODIANCOIiEhIQgAn6FQheJIQIMAQsgAiAEfCAGIAggCWpBEGsiACkAAIUiAkI4hiACQoD+A4NCKIaEIAJCgID8B4NCGIYgAkKAgID4D4NCCIaEhCACQgiIQoCAgPgPgyACQhiIQoCA/AeDhCACQiiIQoD+A4MgAkI4iISEhCADIABBCGopAACFIgVCf4V+IgdCOIYgB0KA/gODQiiGhCAHQoCA/AeDQhiGIAdCgICA+A+DQgiGhIQgB0IIiEKAgID4D4MgB0IYiEKAgPwHg4QgB0IoiEKA/gODIAdCOIiEhISFIAVCOIYgBUKA/gODQiiGhCAFQoCA/AeDQhiGIAVCgICA+A+DQgiGhIQgBUIIiEKAgID4D4MgBUIYiEKAgPwHg4QgBUIoiEKA/gODIAVCOIiEhIQgAn6FQheJIQIDQCACIAR8IAYgCCkAAIUiAkI4hiACQoD+A4NCKIaEIAJCgID8B4NCGIYgAkKAgID4D4NCCIaEhCACQgiIQoCAgPgPgyACQhiIQoCA/AeDhCACQiiIQoD+A4MgAkI4iISEhCADIAhBCGopAACFIgVCf4V+IgdCOIYgB0KA/gODQiiGhCAHQoCA/AeDQhiGIAdCgICA+A+DQgiGhIQgB0IIiEKAgID4D4MgB0IYiEKAgPwHg4QgB0IoiEKA/gODIAdCOIiEhISFIAVCOIYgBUKA/gODQiiGhCAFQoCA/AeDQhiGIAVCgICA+A+DQgiGhIQgBUIIiEKAgID4D4MgBUIYiEKAgPwHg4QgBUIoiEKA/gODIAVCOIiEhIQgAn6FQheJIQIgCEEQaiEIIAlBEGsiCUEQSw0ACwsgAiABNQIMhSIDQjiGIANCgP4Dg0IohoQgA0KAgPwHg0IYhiADQoCAgPgPg0IIhoSEIAJCCIhCgICA+A+DIAJCGIhCgID8B4OEIAJCKIhCgP4DgyACQjiIhISEQtKBqpur+oLXp39+IgJCOIYgAkKA/gODQiiGhCACQoCA/AeDQhiGIAJCgICA+A+DQgiGhIQgAkIIiEKAgID4D4MgAkIYiEKAgPwHg4QgAkIoiEKA/gODIAJCOIiEhIQgA0LYotHvwqnlvy1+hSICQjiGIAJCgP4Dg0IohoQgAkKAgPwHg0IYhiACQoCAgPgPg0IIhoSEIAJCCIhCgICA+A+DIAJCGIhCgID8B4OEIAJCKIhCgP4DgyACQjiIhISEIARCf4V+IgNCOIYgA0KA/gODQiiGhCADQoCA/AeDQhiGIANCgICA+A+DQgiGhIQgA0IIiEKAgID4D4MgA0IYiEKAgPwHg4QgA0IoiEKA/gODIANCOIiEhIQgAiAEQjiGIARCgP4Dg0IohoQgBEKAgPwHg0IYhiAEQoCAgPgPg0IIhoSEIARCCIhCgICA+A+DIARCGIhCgID8B4OEIARCKIhCgP4DgyAEQjiIhISEfoUgAomnC8wvAhp/A34jACICIAJBwARrQUBxIgUkACMAQRBrIgIkAAJAIAEoAggiAw0AQbivwAApAwAiHEL/AYNCBFEEQCAcQiCIpyEDDAELIAIgHDcDCCACQQhqEIgDQQEhAwsgAkEQaiQAIAUgAS0ALToALyAFQf8BIAMgA0H/AU8bIgM2AkggBUEANgJEIAUgBUEvajYCQCAFQgQ3ApADIAVCADcCiAMgBUKAgICAwAA3AoADIAVBgANqIQcjAEEQayIEJAAgBUFAayIQIggoAgAhCwJAIAgoAggiAiAIKAIEIgZNDQAgAiAGayIIQQAgAiAITxsiCCAHKAIAIAcoAggiCWtLBEAgByAJIAgQoAMLIAcoAgwgBygCFCIJayAITw0AIAdBDGogCSAIEJ0DCyAEIAI2AgwgBCAGNgIIIAQgCzYCBCAHQQxqIQgjAEEgayICJAACQAJAIARBBGoiBigCCCILIAYoAgQiCUsEQCAGKAIAIQwgCyAJayEKA0ACQCAMLQAARQRAIwBBEGsiCyQAIAtBCGpBwAAQ6AIgCygCCCINQcAAENADIQlB8ZTBAC0AABpBwAFBwAAQnAQiBkUEQEHAAEHAARDEBAALIAZCADcDgAEgBiAJNgJAIAZCgYCAgBA3AwAgAkEQaiIJQQE6AAwgCUHAADYCCCAJIA02AgQgCSAGNgIAIAtBEGokAAwBCyACQRBqEMYCCyACKAIQIgYgBigCACILQQFqNgIAIAtBAEgNAiACQQhqIgkgAkEYaikCADcDACACIAIpAhA3AwAgAi0AHCENIAcoAggiCyAHKAIARgRAIAcQmQMLIAcoAgQgC0EEdGoiESACKQMANwIAIBFBCGogCSkDADcCACAHIAtBAWo2AgggCCgCCCILIAgoAgBGBEAgCBCVAwsgCCgCBCALQQN0aiIJIA06AAQgCSAGNgIAIAggC0EBajYCCCAKQQFrIgoNAAsLIAJBIGokAAwBCwALIARBEGokACAFKAKIAyERIAUoAoQDIQsgBSgCgAMhFyAFKAKMAyENIAUoApADIQYgBSgClAMhDyAFQYgDaiIMQgA3AgAgBUIENwKQAyAFQoCAgIDAADcCgAMCQCADRQ0AIAcoAgAgBygCCCICayADSQRAIAcgAiADEKADCyAHKAIMIAcoAhQiAmsgA08NACAHQQxqIAIgAxCdAwsgB0EMaiEIIwBBIGsiBCQAAkACQCADIgIEQANAIARBEGoQxgIgBCgCECIJIAkoAgAiCkEBajYCACAKQQBIDQIgBEEIaiIOIARBGGopAgA3AwAgBCAEKQIQNwMAIAQtABwhEyAHKAIIIgogBygCAEYEQCAHEJkDCyAHKAIEIApBBHRqIhQgBCkDADcCACAUQQhqIA4pAwA3AgAgByAKQQFqNgIIIAgoAggiCiAIKAIARgRAIAgQlQMLIAgoAgQgCkEDdGoiDiATOgAEIA4gCTYCACAIIApBAWo2AgggAkEBayICDQALCyAEQSBqJAAMAQsACyAFQThqIhMgDCgCADYCACAFIAUpAoADNwMwIAUoAowDIRQgBSgCkAMhDCAFKAKUAyEYIAUgBiAPQQN0ajYCjAMgBSANNgKIAyAFIAY2AoQDIAUgBjYCgAMgBUGMAmohDUEAIQIjAEEQayIIJAAgBygCDCIGIAcoAgQiCWshBAJAAkACQCAGIAlGBEBBBCEKDAELIARBAXQhBiAEQfj///8DSw0BQfGUwQAtAAAaQQQhAiAGQQQQnAQiCkUNAQsgCEEMaiIOQQA2AgAgCCAKNgIIIAggBEEDdjYCBCMAQRBrIgYkACAHKAIMIAcoAgRrQQN2IgkgCEEEaiIEKAIAIAQoAggiAmtLBEAgBCACIAkQoAMgBCgCCCECCyAGIAQoAgQ2AgwgBiACNgIIIAYgBEEIajYCBCMAQRBrIgQkACAEQQhqIAdBCGopAgA3AwAgBCAHKQIANwMAIAZBBGoiCSgCBCECIAkoAgAgBCgCBCIKIAQoAgwiD0cEQCAJKAIIIAJBBHRqIQkDQCAKKAIAIRIgCi0ABCEWIAlBCGpCADcCACAJQQRqIBY6AAAgCSASNgIAIAlBEGohCSACQQFqIQIgCkEIaiIKIA9HDQALIAQgDzYCBAsgAjYCACAEEMgCIARBEGokACAGQRBqJAAgDUEIaiAOKAIANgIAIA0gCCkCBDcCACAIQRBqJAAMAQsgAiAGEI8EAAsgA0GAAk8EQEH4tMAAQSpBiLbAABCcAwALIAVBzAJqIQ1BACEKIwBBEGsiCSQAQcAAIQQCQAJAIAMEQCADQQZ0IQIgA0H///8PSw0BQfGUwQAtAAAaQcAAIQogAkHAABCcBCIERQ0BCyAJQQxqIhVBADYCACAJIAQ2AgggCSADNgIEIAlBBGoiAigCACACKAIIIgRrIANJBEAgAiEIIwBBEGsiCiQAIApBCGohDyMAQSBrIgYkAAJ/QQAgBCADIARqIg5LDQAaQQQgAigCACIEQQF0IhIgDiAOIBJJGyIOIA5BBE0bIhJBBnQhFiAOQYCAgBBJQQZ0IQ4gBiAEBH8gBiAEQQZ0NgIcIAYgAigCBDYCFEHAAAVBAAs2AhggBkEIaiAOIBYgBkEUahCOAiAGKAIIRQRAIAYoAgwhBCAIIBI2AgAgCCAENgIEQYGAgIB4DAELIAYoAhAhCCAGKAIMCyEEIA8gCDYCBCAPIAQ2AgAgBkEgaiQAIAooAggiBEGBgICAeEcEQCAEIAooAgwQjwQACyAKQRBqJAAgAigCCCEECyACIAMEfyADIARqIAIoAgQgBEEGdGohBANAIARBADsBACAEQUBrIQQgA0EBayIDDQALBSAECzYCCCANQQhqIBUoAgA2AgAgDSAJKQIENwIAIAlBEGokAAwBCyAKIAIQjwQACyANQQA2AgwgEBCrAyAFQYgCaiATKAIANgAAIAEoAgwhAiABQQA2AgwgASgCHCEDIAFBADYCHCABKAIkIQQgAUEANgIkIAUgBSkDMDcAgAIgASgCECEIIAEoAiAhCSABKAIoIQogBUG4A2ogEEGAARDHBBpB8ZTBAC0AABoCQAJAAkACQAJAQcACQcAAEJwEIgYEQCAGQoGAgIAQNwMAIAZBCGogB0G4ARDHBBogBkEAOgDAASAGQQE2AugBIAYgCjYC5AEgBiAENgLgASAGIAk2AtwBIAYgAzYC2AEgBiAINgLUASAGIAI2AtABIAYgBSkA/QE3AMEBIAZByAFqIAVBhAJqKQAANwAAIAYgBSkCzAI3AuwBIAZB9AFqIAVB1AJqIhMpAgA3AgAgBiAFKQKMAjcC/AEgBkGEAmogBUGUAmooAgA2AgAgBSAGNgI8IAVBtAJqQgA3AgAgBUIANwKsAiAFIAwgGEEDdGo2AqgCIAUgFDYCpAIgBSAMNgKgAiAFIAw2ApwCIAUgCyARQQR0ajYCmAIgBSAXNgKUAiAFIAs2ApACIAUgCzYCjAIgBUGcAmohFyARRQ0EIAVB+AJqIRIgBUHgAmohFiAFQfUCaiEUIAVB6AJqIQ8gBUGNA2ohDgNAIAUgC0EQajYCkAIgCy0ADCIEQQJGDQUgCykCACEcIAVBiANqIgggC0EIaigCADYCACALQQ9qLQAAIQIgDiALLwANOwAAIA5BAmoiAyACOgAAIAUgHDcDgAMgBSAEOgCMAyAFKAKgAiICIAUoAqgCRgRAIAUoAoADIgIgAigCACICQQFrNgIAIAJBAUcNBiAFQYADahCtAwwGCyAFQcgCaiIHIAgoAgA2AgAgBUG+AmoiCyADLQAAOgAAIAUgBSkDgAM3A8ACIAUgAkEIajYCoAIgBSAOLwAAOwG8AiAFIAUoArgCIgNBAWo2ArgCIAIoAgAhCSACLQAEIQICQCABKAIUIgoEQCAFQYADaiAKIAMgASgCGCgCEBEDAAwBCyAFQYCAgIB4NgKAAwsgASgCBCEKIAEoAgAhDCAGIAYoAgAiDUEBajYCACANQQBIDQIgEyAFKQKAAzcCACAPIAUpA8ACNwIAIBQgBS8BvAI7AAAgE0EIaiAIKAIANgIAIA9BCGogBygCADYCACAUQQJqIAstAAA6AAAgBSAKNgLQAiAFIAw2AswCIAUgBDoA9AIgBSADNgL8AiAFIAY2AvgCIAUgAjoA5AIgBSAJNgLgAgJAAkACQAJAIANFBEAgAS0ALA0BCyAFQYADaiINIAVBzAJqQTQQxwQaIAVBQGshGkEAIQJBACEKQgAhHCMAQUBqIgkkAEGAgICAeCELAkACQCANKAIIQYCAgIB4RgR/QQAFIA0oAhAhAyANKAIMIQQgCUGAgICAeDYCNCAJQQA2AiwCQCADRQRAQQEhAgwBCyADQQBIDQJB8ZTBAC0AABpBASEKIANBARCcBCICRQ0CCyACIAQgAxDHBCECIAkgAzYCKCAJIAI2AiQgCSADNgIgIAlBLGoiAigCCCIDQYCAgIB4ckGAgICAeEcEQCACKAIMIANBARCsBAsgAkEIaiIDIAlBIGoiBCkCADcCACADQQhqIARBCGooAgA2AgAgCUEMaiIEIAIpAgA3AgAgBEEIaiADKQIANwIAIARBEGogAkEQaigCADYCACAJKAIQIQIgCSgCFCELIAkpAhghHCAJKAIMCyEEIA0oAgQhCCANKAIAIQMgCSAcNwI4IAkgCzYCNCAJIAggAiADGzYCMCAJQQEgBCADGzYCLCAJQQxqIRhBACEHIwBBMGsiCyQAIAlBLGoiAigCCCEDAkAgAigCAEUEQEHglcEAKAIARQRAQeCVwQBBgSA2AgAMAgsMAQsgAigCBBoLAkACQAJAAkACQCALAn8gA0GAgICAeEYEQAJ/IwBBEGsiBCQAIARBCGoQrQIgBCgCCCEDAkAgBCgCDCIIBH9B8ZTBAC0AABogCCADEJwEBSADCyICBEAgAkECNgIQIAJCgYCAgBA3AwBBgJbBACkDACEcA0AgHEIBfCIdUA0CQYCWwQAgHUGAlsEAKQMAIh4gHCAeUSIDGzcDACAeIRwgA0UNAAsgAiAdNwMIIARBEGokACACDAILIAMgCBDEBAALEL8DAAsMAQsgCyACKQIMNwIIIAsgAzYCBCALQRBqIREjAEEgayIIJAAgC0EEaiICKAIEIQQgAigCACEKAkAgAigCCCICQQhPBEAgCEEIaiEVAkACQAJAAkAgBEEDakF8cSIDIARGDQAgAyAEayIDIAIgAiADSxsiDEUNAEEAIQNBASEQA0AgAyAEai0AAEUNBCAMIANBAWoiA0cNAAsgDCACQQhrIhBLDQIMAQsgAkEIayEQQQAhDAsDQCAEIAxqIgNBBGooAgAiB0GBgoQIayAHQX9zcSADKAIAIgNBgYKECGsgA0F/c3FyQYCBgoR4cQ0BIAxBCGoiDCAQTQ0ACwsCQAJAIAIgDGsiB0UEQEEAIQcMAQsgBCAMaiEbQQAhA0EBIRADQCADIBtqLQAARQRAIAMhBwwDCyAHIANBAWoiA0cNAAsLQQAhEAsgByAMaiEDCyAVIAM2AgQgFSAQNgIAIAgoAgwhAyAIKAIIIQcMAQtBACEDIAJFDQBBASEHA0AgAyAEai0AAEUNASACIANBAWoiA0cNAAtBACEHIAIhAwsCQCAHRQRAIAggAjYCHCAIIAQ2AhggCCAKNgIUIwBBIGsiBCQAIAhBFGoiAigCACIHIAIoAggiA0YEQCADQQFqIgdFBEBBAEEAEI8EAAsgB0F/c0EfdiEKIAQgAwR/IAQgAzYCHCAEIAIoAgQ2AhRBAQVBAAs2AhggBEEIaiAKIAcgBEEUahCHAiAEKAIIBEAgBCgCDCAEKAIQEI8EAAsgBCgCDCEKIAIgBzYCACACIAo2AgQLIAMgB0YEQCACEIUCIAIoAgAhBwsgAiADQQFqIgo2AgggAigCBCICIANqQQA6AAACQCAHIApNBEAgAiEDDAELIApFBEBBASEDIAIgB0EBEKwEDAELIAIgB0EBIAoQkQQiAw0AQQEgChCPBAALIAggCjYCBCAIIAM2AgAgBEEgaiQAIAgoAgQhAiAIKAIAIQRBgICAgHghCgwBCyARIAM2AgwLIBEgAjYCCCARIAQ2AgQgESAKNgIAIAhBIGokACALKAIQQYCAgIB4Rw0BAn8gCygCFCEHIAsoAhghCiMAQRBrIgQkACAEQQhqEK0CIAQoAgghAwJAIAQoAgwiCAR/QfGUwQAtAAAaIAggAxCcBAUgAwsiAgRAIAIgCjYCGCACIAc2AhQgAkEBNgIQIAJCgYCAgBA3AwBBgJbBACkDACEcA0AgHEIBfCIdUA0CQYCWwQAgHUGAlsEAKQMAIh4gHCAeUSIDGzcDACAeIRwgA0UNAAsgAiAdNwMIIARBEGokACACDAILIAMgCBDEBAALEL8DAAsLIgg2AgQgCCAIKAIAIgJBAWo2AgAgAkEASA0BQfGUwQAtAAAaQRhBBBCcBCICRQ0CIAJCgYCAgBA3AgAgAkEANgIMIAJBADYCCCACQQI2AgAgCyACNgIQQQAQgQMiBARAIAQgBCgCACIDQQFqNgIAIANBAEgNAgsgCyAEEIEDIgM2AiACQCADRQ0AIAMgAygCACIDQQFrNgIAIANBAUcNACALQSBqEPwCCyALKAIQIgooAggiBwRAIwBBIGsiAyQAIAdBCGoiByAHKAIEIgxBAWo2AgQgDEEASARAIAcgBygCBEEBazYCBCADQQA2AhggA0EBNgIMIANBiM3AADYCCCADQgQ3AhAgA0EIakGwzcAAELQDAAsgA0EgaiQAC0HxlMEALQAAGkHAAEEEEJwEIgNFDQMgAyAENgIIIAMgAjYCBCADIAg2AgAgA0EMaiANQTQQxwQaIBhBBGpB8M/AACkDADcCACADQcCvwAAoAgARAABBxK/AACgCACICBEAgAyACQcivwAAoAgAQrAQLIBhBATYCACAKIAooAgAiAkEBazYCACACQQFGBEAgC0EQahCcAgsgCygCBCICIAIoAgAiAkEBazYCACACQQFGBEAgC0EEahDkAgsgC0EwaiQADAQLIAtBKGogC0EYaikCADcDACALIAspAhA3AyBB0K/AAEEvIAtBIGpBgLDAAEHgsMAAEMMCAAsAC0EEQRgQxAQAC0EEQcAAEMQEAAsgGiAJKQIQNwIAIAlBQGskAAwBCyAKIAMQjwQACyAFLQBAQQRGDQMgACAFKQNANwIADAELQZCrwAAQiQNFDQEgAEIFNwIAIAUoAtQCIgBBgICAgHhGIABFckUEQCAFKALYAiAAQQEQrAQLIAUoAugCIgAgACgCACIAQQFrNgIAIABBAUYEQCAPEK0DCyAFKALgAiIAIAAoAgAiAEEBazYCACAAQQFGBEAgFhCtAwsgBSgC+AIiACAAKAIAIgBBAWs2AgAgAEEBRw0AIBIQ9QELIAVBjAJqEMkCIBcQyAIgBSgCPCICQUBrIgAgACgCqAEiA0EBazYCqAECQCADQQFHDQAgACgCxAEiA0UNACADQQR0IQYgACgCwAFBCGohCiAAQawBaiEDQQAhAANAIAooAgAgCkEDNgIAQQJGBEAgAyAAEMcCGgsgAEEBaiEAIApBEGohCiAGQRBrIgYNAAsLIAIgAigCACIAQQFrNgIAIABBAUcNCCAFQTxqEPUBDAgLIAVBQGsiAyAFQcwCakE0EMcEGiAFQYADaiICIAMQe0HxlMEALQAAGkHAAUHAABCcBCIDRQ0EIAUgAyACQcABEMcENgKAAyACEOcCIAUoAjwiBigChAJFDQUgAiAGKAKAAkEMahDXAiAFKAKEA0GAAjsAAAsgBSgCkAIiCyAFKAKYAkcNAAsMBAtBwABBwAIQxAQACwALQcAAQcABEMQEAAtBAEEAQYCrwAAQ1QIACyAFQYwCahDJAiAXEMgCIAAgBSgCPDYCBCAAQQY6AAALAkAgASgCDCIARQ0AIAAgASgCECICKAIAEQAAIAIoAgQiA0UNACAAIAMgAigCCBCsBAsCQCABKAIUIgBFDQAgACABKAIYIgIoAgARAAAgAigCBCIDRQ0AIAAgAyACKAIIEKwECyABQRxqEMgDIAFBJGoQyAMkAAuPCwIPfwJ+IwBBMGsiByQAAkACfyABKAIMIglBAWoiBCAJSQRAIAdBADYCFCAHQQE2AgggB0HIjcAANgIEIAdCBDcCDCAHQQRqQbSOwAAQtAMACyABKAIEIg0gDUEBaiIIQQN2IgZBB2wiCyANQQhJGyIFQQF2IARJBEAgB0EgaiAEIAVBAWoiCCAEIAhLGxCDASAHKAIoIQ4gBygCJCIMIAcoAiAiCkUNARogByAHKAIsNgIcIAcgDjYCGCAHIAw2AhQgB0KEgICAgAE3AgggByABQRBqNgIEIAcgCjYCECAJBEAgCkEIaiEPIAEoAgAiC0EEayEQIAspAwBCf4VCgIGChIiQoMCAf4MhEyALIQggCSENQQAhBQNAIBNQBEAgCCEEA0AgBUEIaiEFIAQpAwggBEEIaiIIIQRCf4VCgIGChIiQoMCAf4MiE1ANAAsLIBAgE3qnQQN2IAVqQQJ0IhFrKAIAIgQgA08NBCAKIAIgBEHoAGxqKAJgIhIgDHEiBmopAABCgIGChIiQoMCAf4MiFFAEQEEIIQQDQCAEIAZqIQYgBEEIaiEEIAogBiAMcSIGaikAAEKAgYKEiJCgwIB/gyIUUA0ACwsgE0IBfSATgyETIAogFHqnQQN2IAZqIAxxIgRqLAAAQQBOBEAgCikDAEKAgYKEiJCgwIB/g3qnQQN2IQQLIAQgCmogEkEZdiIGOgAAIA8gBEEIayAMcWogBjoAACAKIARBAnRrQQRrIAsgEWtBBGsoAAA2AAAgDUEBayINDQALCyAHIAk2AhwgByAOIAlrNgIYQQAhBANAIAEgBGoiAigCACEDIAIgBCAHakEQaiICKAIANgIAIAIgAzYCACAEQQRqIgRBEEcNAAsgB0EEahDqAkEIIQ5BgYCAgHgMAQsgASgCACEFIAYgCEEHcUEAR2oiBgRAIAUhBANAIAQgBCkDACITQn+FQgeIQoGChIiQoMCAAYMgE0L//v379+/fv/8AhHw3AwAgBEEIaiEEIAZBAWsiBg0ACwsCQAJAIAhBCE8EQCAFIAhqIAUpAAA3AAAMAQsgBUEIaiAFIAgQyAQaIAhFDQELQQAhC0EAIQQDQAJAIAUgBCIIai0AAEGAAUcNACADIAUgBEECdCIJa0EEaygCACIESwRAIAUgCWtBBGshDyAFIAtqIRBBACAIa0ECdCERA0AgASgCBCIJIAIgBEHoAGxqKAJgIgxxIgohBiAFIApqKQAAQoCBgoSIkKDAgH+DIhNQBEBBCCEEA0AgBCAGaiEGIARBCGohBCAFIAYgCXEiBmopAABCgIGChIiQoMCAf4MiE1ANAAsLIAUgE3qnQQN2IAZqIAlxIgRqLAAAQQBOBEAgBSkDAEKAgYKEiJCgwIB/g3qnQQN2IQQLAkAgBCAKayAIIAprcyAJcUEITwRAIAQgBWoiBi0AACAGIAxBGXYiBjoAACAFIARBCGsgCXFqQQhqIAY6AAAgBSAEQQJ0ayEJQf8BRwRAQXwhBANAIAQgEGoiBS0AACEGIAUgBCAJaiIFLQAAOgAAIAUgBjoAACAEQQFqIgQNAAsMAgsgASgCACIFIAhqQf8BOgAAIAUgASgCBCAIQQhrcWpBCGpB/wE6AAAgCUEEayAPKAAANgAADAQLIAUgCGogDEEZdiIEOgAAIAUgCSAIQQhrcWpBCGogBDoAAAwDCyABKAIAIgUgEWpBBGsoAgAiBCADSQ0ACwsgBCADQZyNwAAQ1QIACyAIQQFqIQQgC0EEayELIAggDUcNAAsgASgCBCICIAJBAWpBA3ZBB2wgAkEISRshCyABKAIMIQkLIAEgCyAJazYCCEGBgICAeAshASAAIA42AgQgACABNgIAIAdBMGokAA8LIAQgA0GcjcAAENUCAAunFQIPfwR+IwBBgAFrIgQkAAJAAkACQAJAAkAgAygCCEUEQEEGIQUMAQsgBEEoaiIJIAEgAhDBASAEKAIsIQsgBCgCKCIFQRFGBEAgCSABIAMQ7QIgBEH4AGoiDSIDIARBNGooAgA2AgAgBCAEKQIsNwNwIAQoAigiBUERRgRAIARBGGogAygCADYCACAEIAQpA3A3AxAgASgCaCALTQ0DIAkgASgCZCALQRRsaiIDENICIAMoAgwhESAEKQIsIRMgBCgCKCEDIARBATYCKCAEIAs2AiwgA0GAgICAeEYNAyAJEKIDIAQgAzYCHCAEIBM3AiAgBCgCFCIKIQUgBCgCGCIMIQcgE6chCEEAIQMjAEEgayIGJAACQCATQiCIpyAHRw0AIAYgCDYCGCAGIAggB0ECdCIDajYCHCAGIAU2AhAgBiADIAVqNgIUIAZBCGogBkEQahDFAiAGKAIIIgdFBEBBASEDDAELIAYoAgwhCEEBIQMDQCADQQAhAwRAIAcoAgAgCCgCAEYhAwsgBiAGQRBqEMUCIAYoAgQhCCAGKAIAIgcNAAsLIAZBIGokACADDQQgBCAMNgI4IAQgCjYCNEEAIQMgBEEANgIwIARCgICAgMAANwIoIAQgBEEcajYCPCANQQA2AgAgBEKAgICAwAA3AnAgBEHwAGohBiMAQdAAayICJAAgAkEwaiAJQRBqKQIAIhM3AwAgAkEoaiAJQQhqIgUpAgA3AwAgAiAJKQIANwMgIAJBQGsgBSgCADYCACACIBOnIgU2AkggAiACQTRqNgJEIAIgCSkCADcDOCACKAIsIQcgAkEEaiACQThqIggoAhAiCkEAIApBf0YiChDkAyIMIAogDEsbQQEgByAFIAgQXkEAIQUCQCACKAIMIghFDQAgAigCBCIHRQ0AA0AgBygCCCAFaiEFIAhBAWsiCEUNASAHKAIMIgcNAAsLIAYgBRDzAyACQRhqIAJBDGooAgA2AgAgAiACKQIENwMQIAJBOGogAkEQahDbAiACKAI4QYCAgIB4RwRAA0AgAkEoaiIHIAJBQGsoAgAiBTYCACACIAIpAjg3AyAgAigCJCEIIAYgBRDzAyAGKAIEIAYoAghBAnRqIAggBUECdBDHBBogB0EANgIAIAYgBSAGKAIIajYCCCACQSBqEPgDIAJBOGogAkEQahDbAiACKAI4QYCAgIB4Rw0ACwsgAkEQahCkAiACQdAAaiQAIARB2ABqIg8gDSgCACICNgIAIAQgBCkCcDcDUCAEKAJUIAIgCUEAQSAgAmdrED8gBEHQAGoQgAIgBEEwaiAEQSRqKAIANgIAIAQgBCkCHDcDKCAEIARBEGo2AjQgDUEANgIAIARCgICAgMAANwJwQQAhBSMAQUBqIgIkACACQRhqIAlBCGopAgAiEzcDACACIAkpAgAiFDcDECACIBOnIgo2AjggAiAUNwMwIwBBEGsiByQAIAdBADYCBCAHIAJBMGoiDDYCACAHIAwoAggiCDYCDCAHIAg2AggjAEEQayIIJAAgBygCACIOIAcoAgQiEDYCCCAIQQhqIA4gBygCCCIOIBBrIhBBACAOIBBPGxCnAyAIKAIMIQ4gCCgCCCEQIAJBBGogCkEAIApBf0YiChDkAyISIAogEksbQQEgECAOIAJBHGoQZCAHENwBIAhBEGokACAMEPgDIAdBEGokAAJAIAIoAgwiCEUNACACKAIEIgdFDQADQCAHKAIIIAVqIQUgCEEBayIIRQ0BIAcoAgwiBw0ACwsgBiAFEPMDIAJBKGogAkEMaigCADYCACACIAIpAgQ3AyAgAkEwaiACQSBqENsCIAIoAjBBgICAgHhHBEADQCACQRhqIgcgAkE4aigCACIFNgIAIAIgAikCMDcDECACKAIUIQggBiAFEPMDIAYoAgQgBigCCEECdGogCCAFQQJ0EMcEGiAHQQA2AgAgBiAFIAYoAghqNgIIIAJBEGoQ+AMgAkEwaiACQSBqENsCIAIoAjBBgICAgHhHDQALCyACQSBqEKQCIAJBQGskACAEQegAaiANKAIAIgI2AgAgBCAEKQJwNwNgIAQoAmQgAiAJQQBBICACZ2sQPyAEQeAAahCAAiAEKAJUIQIgBCgCUCEFIA8oAgAiBgRAIAZBAnQhCQNAIAIgA2ooAgAiBiABKAIoTwRAIAAgBjYCBCAAQQ02AgAgBCAFNgIoIAQgAjYCLCAEQShqEPgDIARB4ABqEPgDDAgLIARBCGogASgCJCAGQegAbGpBIGogCxBbIAkgA0EEaiIDRw0ACwsgBCAFNgIoIAQgAjYCLCAEQShqEPgDIAQoAmQhCSAEKAJgIQ0gBCgCaCICBEAgAkECdCEMQQAhAwNAIAMgCWooAgAiBSABKAIoTwRAIAAgBTYCBCAAQQ02AgAgBCANNgIoIAQgCTYCLCAEQShqEPgDDAgLIAsiAiABKAIkIAVB6ABsakFAayIGKAIITwR/QQAFIAYoAgwiB0EEayEPIAYoAhAiCCAGKAIEIAJBA3RqKAIAIgpxIQUgCkEZdq1CgYKEiJCgwIABfiEVQQAhCgJAA0AgBSAHaikAACIUIBWFIhNCf4UgE0KBgoSIkKDAgAF9g0KAgYKEiJCgwIB/gyETA0AgE1AEQCAUIBRCAYaDQoCBgoSIkKDAgH+DUEUNAyAKQQhqIgogBWogCHEhBQwCCyATeiEWIBNCAX0gE4MhEyAPIBanQQN2IAVqIAhxIg5BAnRrKAIAIAJHDQALC0GAASEFIAcgDkECdEECdSIKaiIPKQAAIhMgE0IBhoNCgIGChIiQoMCAf4N6p0EDdiAHIApBCGsgCHFqIgcpAAAiEyATQgGGg0KAgYKEiJCgwIB/g3mnQQN2akEHTQRAIAYgBigCFEEBajYCFEH/ASEFCyAPIAU6AAAgB0EIaiAFOgAAIAYgBigCGEEBazYCGAsgBiACELcBIQJBAQshBSAEIAI2AgQgBCAFNgIAIAwgA0EEaiIDRw0ACwsgBCANNgIoIAQgCTYCLCAEQShqIgMQ+AMgBEEwaiIFIARBGGooAgA2AgAgBCAEKQMQNwMoIAQgETYCNCMAQSBrIgIkACABQUBrIgYgAxAvIQkgAkEYaiADQQhqKQIANwMAIAIgAykCADcDECACQQhqIAZBIGogCSACQRBqEJ8CIAItAAwaIAJBIGokACADIAFB4ABqIAsQjQECQCAEKAIoQYCAgIB4RgRAIARBgICAgHg2AnAMAQsgBEH4AGogBSkCADcDACAEIAQpAig3A3ALIARB8ABqEIoEIABBETYCAAwGCyAAIAQpAzg3AxAgAEEgaiAEQcgAaikDADcDACAAQRhqIARBQGspAwA3AwAgAEEMaiADKAIANgIAIAAgBCkDcDcCBCAAIAU2AgAMBQsgACAEKQMwNwMIIABBIGogBEHIAGopAwA3AwAgAEEYaiAEQUBrKQMANwMAIABBEGogBEE4aikDADcDACALIQILIAAgAjYCBCAAIAU2AgAgAygCACIARQ0DIAMoAgQgAEECdEEEEKwEDAMLIABBATYCACAAIAs2AgQMAQsgACACNgIEIABBBDYCACAEQRxqEPgDCyAEQRBqEPgDCyAEQYABaiQAC8sHAQh/IwBBgAFrIgMkACADIAI2AjwgA0HYAGoiByABIAIQwQEgAygCXCECAkACQAJAAkACQCADKAJYIgVBEUYEQCADIAI2AkAgASgCaCACTQ0EIAcgASgCZCACQRRsahDSAiADKAJgIQQgAygCXCEFIAMoAlghBiADQQE2AlggAyACNgJcIAZBgICAgHhGDQQgBxCiAyADIAEoAnhBAWsiCDYCRCAHIAFB4ABqIAIQjQECQCADKAJYQYCAgIB4RgRAIANBgICAgHg2AkgMAQsgA0HQAGogA0HgAGopAgA3AwAgAyADKQJYNwNICyADQcgAahCKBCADQTBqIAFBgAFqIgcgA0FAaxCQAyADQShqIAFBoAFqIgkgA0E8ahCQAyAEBEAgBEECdCEKQQAhAgNAIAIgBWooAgAiBCABKAIoTwRAIAAgBDYCBCAAQQ02AgAgAyAGNgJYIAMgBTYCXCADQdgAahD4AwwICyADQdgAaiABKAIkIARB6ABsakEgaiADQUBrEE8gCiACQQRqIgJHDQALCyADIAY2AlggAyAFNgJcIANB2ABqIgIQ+AMgAygCQCIFIAhGDQIgAiABIAgQwAEgAygCXCECIAMoAlgiBkERRg0BIAAgAykDYDcDCCAAQSBqIANB+ABqKQMANwMAIABBGGogA0HwAGopAwA3AwAgAEEQaiADQegAaikDADcDACAAIAI2AgQgACAGNgIADAULIAAgAykDYDcDCCAAQSBqIANB+ABqKQMANwMAIABBGGogA0HwAGopAwA3AwAgAEEQaiADQegAaikDADcDACAAIAI2AgQgACAFNgIADAQLIANBIGogCSACIAUQcCADQRhqIAcgA0HEAGoQkAMgA0EQaiAHIAMoAkAgAhBwIAMoAkAiAiABKAJoTw0BIANB2ABqIgggASgCZCACQRRsahDSAiADKAJgIQQgAygCXCEFIAMoAlghBiADIAMoAkAiAjYCXCADQQE2AlggBkGAgICAeEYNASAIEKIDIAQEQCAEQQJ0IQhBACECA0AgAiAFaigCACIEIAEoAihPBEAgACAENgIEIABBDTYCACADIAY2AlggAyAFNgJcIANB2ABqEPgDDAYLIANBCGogASgCJCAEQegAbGpBIGoiBCADKAJAEFsgA0HYAGogBCADQcQAahBPIAggAkEEaiICRw0ACwsgAyAGNgJYIAMgBTYCXCADQdgAahD4AwsgAEERNgIADAILIAAgAjYCBCAAQQE2AgAMAQsgACACNgIEIABBATYCAAsgA0GAAWokAAu3FwINfwJ+IwBBgAFrIgMkACADIAI2AgQgA0E4aiIHIAEgAigCBBDCASADKAI8IQICQAJAAkACQCADKAI4IgRBEUYEQCABKAIkIQQgASgCKCEGIANBDTYCOCADIAI2AjwgAiAGTw0BIAcQogMgA0EANgJoIANB9ABqIgdBmIfAACkCADcCACADQoCAgIDAADcCYCADQZCHwAApAgA3AmwgA0HgAGogBCACQegAbGpBQGsQ9AIgA0EoaiAHKQIAIhA3AwAgAyADKQJsIhE3AyAgAygCYCEKIAMoAmQhBiADKAJoIQUgByAQNwIAIAMgBTYCaCADIAY2AmQgAyAKNgJgIAMgETcCbCADQewAakEEEPICIAUEQCAGQQRqIQIgBSEEIAYhBwNAIAcgAigCADYCACAHQQRqIQcgAkEIaiECIARBAWsiBA0ACwsgAyAFNgIcIAMgBjYCGCADIApBAXRB/v///wNxNgIUIAMgATYCaCADIAU2AmQgAyAGNgJgIANBOGoiDCADQeAAaiICEIMCIANBEGoiByADQcQAaigCADYCACADIAMpAjw3AwggAygCOCIEQRFHDQIgA0HoAGogBygCADYCACADIAMpAwg3A2AgA0EUahD4AyADIAE2AmwjAEHgAGsiASQAIAFBADoAACABQRE2AgggAUHIAGogAkEIaikCADcDACABIAIpAgA3A0AgASABNgJQIAFB3ABqIghBADYCACABQoCAgIDAADcCVEEAIQYjAEEwayICJAAjAEHQAGsiByQAIAdBADoAByAHQRhqIgUgAUFAayIEQRBqKAIANgIAIAdBEGogBEEIaiIKKQIAIhA3AwAgByAEKQIAIhE3AwggB0EoaiAK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AAsLIARBMGokAAsMBAsgASAJIAEgCUkbIQsgB0EDdiAFLQAMIQkCQCABIAhPBEAgCiAIIAIgBiAEEEAMAQsgACABIAIgAyAEEEAgBiEDIAghASAKIQALIAtNIQYgAUEVTw0BDAILCyAFQQA2AjggBUEBNgIsIAVBgJDAADYCKCAFQgQ3AjAgBUEoakHAkcAAELQDAAsgAUECSQ0AQQEhBgNAIAAgBkEBaiIGEPgBIAEgBkcNAAsLIAVB0ABqJAAL9QQBBn8jAEGwAWsiAyQAIANBGGogAUEIaikCADcDACADQSBqIAFBEGopAgA3AwAgA0EoaiABQRhqKQIANwMAIANBADoATCADQQA2AkQgA0EANgIwIAMgAigCiAE2AkggAyACQYwBajYCQCADIAEpAgA3AxAgAkGQAWoiCBCMBCEEIAhBBSADQRBqEN8CIAIoAowBIgVB+AFqEJoDIgZB/wFxIgdFIAQgBkEIdkH/AXEgB0dxckUEQCAFQewBakEBEIoDCyADQYgBaiABQThqKAIANgIAIANBgAFqIAFBMGopAgA3AwAgA0H4AGogAUEoaikCADcDACADQQE6AIwBIAMgASkCIDcDcCADQdAAaiADQfAAahCuAgJAAkAgAygCUEUEQCADQegAaiIFIANB1ABqIgFBCGooAgA2AgAgAyABKQIANwNgIAMoAkRBA0YNASADQcQAaiEGIAJBoAFqIQcCQANAAkAgA0EIaiAIEKgBAn8gAygCCCIBBEAgAygCDAwBCwNAIANB8ABqIAcQ1AEgAygCcCIBQQJGDQALIAFBAWsNASADKAJ0IQEgAygCeAshBCABQQVGIANBEGogBEZxDQIgBCABEQAAIAMoAkRBA0cNAQwECwsgAygCREEDRg0CIAIgBhB4DAILIANB8ABqIgEgA0EQakHAABDHBBogAEEMaiABQQEQugIgAEEIaiADQegAaigCADYCAAwCCyACIANBQGsgAygCVCADKAJYEJgEAAsgA0HwAGogA0EQakHAABDHBBogAEEMaiADQZABahDwAiAAQQhqIAUoAgA2AgALIAAgAykDYDcCACADQbABaiQAC/UEAQZ/IwBBsAFrIgMkACADQRhqIAFBCGopAgA3AwAgA0EgaiABQRBqKQIANwMAIANBKGogAUEYaikCADcDACADQQA6AEwgA0EANgJEIANBADYCMCADIAIoAogBNgJIIAMgAkGMAWo2AkAgAyABKQIANwMQIAJBkAFqIggQjAQhBCAIQQogA0EQahDfAiACKAKMASIFQfgBahCaAyIGQf8BcSIHRSAEIAZBCHZB/wFxIAdHcXJFBEAgBUHsAWpBARCKAwsgA0GIAWogAUE4aigCADYCACADQYABaiABQTBqKQIANwMAIANB+ABqIAFBKGopAgA3AwAgA0EBOgCMASADIAEpAiA3A3AgA0HQAGogA0HwAGoQrwICQAJAIAMoAlBFBEAgA0HoAGoiBSADQdQAaiIBQQhqKAIANgIAIAMgASkCADcDYCADKAJEQQNGDQEgA0HEAGohBiACQaABaiEHAkADQAJAIANBCGogCBCoAQJ/IAMoAggiAQRAIAMoAgwMAQsDQCADQfAAaiAHENQBIAMoAnAiAUECRg0ACyABQQFrDQEgAygCdCEBIAMoAngLIQQgAUEKRiADQRBqIARGcQ0CIAQgAREAACADKAJEQQNHDQEMBAsLIAMoAkRBA0YNAiACIAYQeAwCCyADQfAAaiIBIANBEGpBwAAQxwQaIABBDGogAUEBELwCIABBCGogA0HoAGooAgA2AgAMAgsgAiADQUBrIAMoAlQgAygCWBCYBAALIANB8ABqIANBEGpBwAAQxwQaIABBDGogA0GQAWoQ8AIgAEEIaiAFKAIANgIACyAAIAMpA2A3AgAgA0GwAWokAAv1BAEGfyMAQbABayIDJAAgA0EYaiABQQhqKQIANwMAIANBIGogAUEQaikCADcDACADQShqIAFBGGopAgA3AwAgA0EAOgBMIANBADYCRCADQQA2AjAgAyACKAKIATYCSCADIAJBjAFqNgJAIAMgASkCADcDECACQZABaiIIEIwEIQQgCEEMIANBEGoQ3wIgAigCjAEiBUH4AWoQmgMiBkH/AXEiB0UgBCAGQQh2Qf8BcSAHR3FyRQRAIAVB7AFqQQEQigMLIANBiAFqIAFBOGooAgA2AgAgA0GAAWogAUEwaikCADcDACADQfgAaiABQShqKQIANwMAIANBAToAjAEgAyABKQIgNwNwIANB0ABqIANB8ABqELACAkACQCADKAJQRQRAIANB6ABqIgUgA0HUAGoiAUEIaigCADYCACADIAEpAgA3A2AgAygCREEDRg0BIANBxABqIQYgAkGgAWohBwJAA0ACQCADQQhqIAgQqAECfyADKAIIIgEEQCADKAIMDAELA0AgA0HwAGogBxDUASADKAJwIgFBAkYNAAsgAUEBaw0BIAMoAnQhASADKAJ4CyEEIAFBDEYgA0EQaiAERnENAiAEIAERAAAgAygCREEDRw0BDAQLCyADKAJEQQNGDQIgAiAGEHgMAgsgA0HwAGoiASADQRBqQcAAEMcEGiAAQQxqIAFBARC7AiAAQQhqIANB6ABqKAIANgIADAILIAIgA0FAayADKAJUIAMoAlgQmAQACyADQfAAaiADQRBqQcAAEMcEGiAAQQxqIANBkAFqEPACIABBCGogBSgCADYCAAsgACADKQNgNwIAIANBsAFqJAAL9QQBBn8jAEGwAWsiAyQAIANBGGogAUEIaikCADcDACADQSBqIAFBEGopAgA3AwAgA0EoaiABQRhqKQIANwMAIANBADoATCADQQA2AkQgA0EANgIwIAMgAigCiAE2AkggAyACQYwBajYCQCADIAEpAgA3AxAgAkGQAWoiCBCMBCEEIAhBESADQRBqEN8CIAIoAowBIgVB+AFqEJoDIgZB/wFxIgdFIAQgBkEIdkH/AXEgB0dxckUEQCAFQewBakEBEIoDCyADQYgBaiABQThqKAIANgIAIANBgAFqIAFBMGopAgA3AwAgA0H4AGogAUEoaikCADcDACADQQE6AIwBIAMgASkCIDcDcCADQdAAaiADQfAAahCxAgJAAkAgAygCUEUEQCADQegAaiIFIANB1ABqIgFBCGooAgA2AgAgAyABKQIANwNgIAMoAkRBA0YNASADQcQAaiEGIAJBoAFqIQcCQANAAkAgA0EIaiAIEKgBAn8gAygCCCIBBEAgAygCDAwBCwNAIANB8ABqIAcQ1AEgAygCcCIBQQJGDQALIAFBAWsNASADKAJ0IQEgAygCeAshBCABQRFGIANBEGogBEZxDQIgBCABEQAAIAMoAkRBA0cNAQwECwsgAygCREEDRg0CIAIgBhB4DAILIANB8ABqIgEgA0EQakHAABDHBBogAEEMaiABQQEQpgIgAEEIaiADQegAaigCADYCAAwCCyACIANBQGsgAygCVCADKAJYEJgEAAsgA0HwAGogA0EQakHAABDHBBogAEEMaiADQZABahDwAiAAQQhqIAUoAgA2AgALIAAgAykDYDcCACADQbABaiQAC/UEAQZ/IwBBsAFrIgMkACADQRhqIAFBCGopAgA3AwAgA0EgaiABQRBqKQIANwMAIANBKGogAUEYaikCADcDACADQQA6AEwgA0EANgJEIANBADYCMCADIAIoAogBNgJIIAMgAkGMAWo2AkAgAyABKQIANwMQIAJBkAFqIggQjAQhBCAIQRIgA0EQahDfAiACKAKMASIFQfgBahCaAyIGQf8BcSIHRSAEIAZBCHZB/wFxIAdHcXJFBEAgBUHsAWpBARCKAwsgA0GIAWogAUE4aigCADYCACADQYABaiABQTBqKQIANwMAIANB+ABqIAFBKGopAgA3AwAgA0EBOgCMASADIAEpAiA3A3AgA0HQAGogA0HwAGoQsgICQAJAIAMoAlBFBEAgA0HoAGoiBSADQdQAaiIBQQhqKAIANgIAIAMgASkCADcDYCADKAJEQQNGDQEgA0HEAGohBiACQaABaiEHAkADQAJAIANBCGogCBCoAQJ/IAMoAggiAQRAIAMoAgwMAQsDQCADQfAAaiAHENQBIAMoAnAiAUECRg0ACyABQQFrDQEgAygCdCEBIAMoAngLIQQgAUESRiADQRBqIARGcQ0CIAQgAREAACADKAJEQQNHDQEMBAsLIAMoAkRBA0YNAiACIAYQeAwCCyADQfAAaiIBIANBEGpBwAAQxwQaIABBDGogAUEBEL0CIABBCGogA0HoAGooAgA2AgAMAgsgAiADQUBrIAMoAlQgAygCWBCYBAALIANB8ABqIANBEGpBwAAQxwQaIABBDGogA0GQAWoQ8AIgAEEIaiAFKAIANgIACyAAIAMpA2A3AgAgA0GwAWokAAv1BAEGfyMAQbABayIDJAAgA0EYaiABQQhqKQIANwMAIANBIGogAUEQaikCADcDACADQShqIAFBGGopAgA3AwAgA0EAOgBMIANBADYCRCADQQA2AjAgAyACKAKIATYCSCADIAJBjAFqNgJAIAMgASkCADcDECACQZABaiIIEIwEIQQgCEETIANBEGoQ3wIgAigCjAEiBUH4AWoQmgMiBkH/AXEiB0UgBCAGQQh2Qf8BcSAHR3FyRQRAIAVB7AFqQQEQigMLIANBiAFqIAFBOGooAgA2AgAgA0GAAWogAUEwaikCADcDACADQfgAaiABQShqKQIANwMAIANBAToAjAEgAyABKQIgNwNwIANB0ABqIANB8ABqELMCAkACQCADKAJQRQRAIANB6ABqIgUgA0HUAGoiAUEIaigCADYCACADIAEpAgA3A2AgAygCREEDRg0BIANBxABqIQYgAkGgAWohBwJAA0ACQCADQQhqIAgQqAECfyADKAIIIgEEQCADKAIMDAELA0AgA0HwAGogBxDUASADKAJwIgFBAkYNAAsgAUEBaw0BIAMoAnQhASADKAJ4CyEEIAFBE0YgA0EQaiAERnENAiAEIAERAAAgAygCREEDRw0BDAQLCyADKAJEQQNGDQIgAiAGEHgMAgsgA0HwAGoiASADQRBqQcAAEMcEGiAAQQxqIAFBARCnAiAAQQhqIANB6ABqKAIANgIADAILIAIgA0FAayADKAJUIAMoAlgQmAQACyADQfAAaiADQRBqQcAAEMcEGiAAQQxqIANBkAFqEPACIABBCGogBSgCADYCAAsgACADKQNgNwIAIANBsAFqJAAL9QQBBn8jAEGwAWsiAyQAIANBGGogAUEIaikCADcDACADQSBqIAFBEGopAgA3AwAgA0EoaiABQRhqKQIANwMAIANBADoATCADQQA2AkQgA0EANgIwIAMgAigCiAE2AkggAyACQYwBajYCQCADIAEpAgA3AxAgAkGQAWoiCBCMBCEEIAhBBSADQRBqEN8CIAIoAowBIgVB+AFqEJoDIgZB/wFxIgdFIAQgBkEIdkH/AXEgB0dxckUEQCAFQewBakEBEIoDCyADQYgBaiABQThqKAIANgIAIANBgAFqIAFBMGopAgA3AwAgA0H4AGogAUEoaikCADcDACADQQA6AIwBIAMgASkCIDcDcCADQdAAaiADQfAAahCuAgJAAkAgAygCUEUEQCADQegAaiIFIANB1ABqIgFBCGooAgA2AgAgAyABKQIANwNgIAMoAkRBA0YNASADQcQAaiEGIAJBoAFqIQcCQANAAkAgA0EIaiAIEKgBAn8gAygCCCIBBEAgAygCDAwBCwNAIANB8ABqIAcQ1AEgAygCcCIBQQJGDQALIAFBAWsNASADKAJ0IQEgAygCeAshBCABQQVGIANBEGogBEZxDQIgBCABEQAAIAMoAkRBA0cNAQwECwsgAygCREEDRg0CIAIgBhB4DAILIANB8ABqIgEgA0EQakHAABDHBBogAEEMaiABQQAQugIgAEEIaiADQegAaigCADYCAAwCCyACIANBQGsgAygCVCADKAJYEJgEAAsgA0HwAGogA0EQakHAABDHBBogAEEMaiADQZABahDwAiAAQQhqIAUoAgA2AgALIAAgAykDYDcCACADQbABaiQAC/UEAQZ/IwBBsAFrIgMkACADQRhqIAFBCGopAgA3AwAgA0EgaiABQRBqKQIANwMAIANBKGogAUEYaikCADcDACADQQA6AEwgA0EANgJEIANBADYCMCADIAIoAogBNgJIIAMgAkGMAWo2AkAgAyABKQIANwMQIAJBkAFqIggQjAQhBCAIQQogA0EQahDfAiACKAKMASIFQfgBahCaAyIGQf8BcSIHRSAEIAZBCHZB/wFxIAdHcXJFBEAgBUHsAWpBARCKAwsgA0GIAWogAUE4aigCADYCACADQYABaiABQTBqKQIANwMAIANB+ABqIAFBKGopAgA3AwAgA0EAOgCMASADIAEpAiA3A3AgA0HQAGogA0HwAGoQrwICQAJAIAMoAlBFBEAgA0HoAGoiBSADQdQAaiIBQQhqKAIANgIAIAMgASkCADcDYCADKAJEQQNGDQEgA0HEAGohBiACQaABaiEHAkADQAJAIANBCGogCBCoAQJ/IAMoAggiAQRAIAMoAgwMAQsDQCADQfAAaiAHENQBIAMoAnAiAUECRg0ACyABQQFrDQEgAygCdCEBIAMoAngLIQQgAUEKRiADQRBqIARGcQ0CIAQgAREAACADKAJEQQNHDQEMBAsLIAMoAkRBA0YNAiACIAYQeAwCCyADQfAAaiIBIANBEGpBwAAQxwQaIABBDGogAUEAELwCIABBCGogA0HoAGooAgA2AgAMAgsgAiADQUBrIAMoAlQgAygCWBCYBAALIANB8ABqIANBEGpBwAAQxwQaIABBDGogA0GQAWoQ8AIgAEEIaiAFKAIANgIACyAAIAMpA2A3AgAgA0GwAWokAAv1BAEGfyMAQbABayIDJAAgA0EYaiABQQhqKQIANwMAIANBIGogAUEQaikCADcDACADQShqIAFBGGopAgA3AwAgA0EAOgBMIANBADYCRCADQQA2AjAgAyACKAKIATYCSCADIAJBjAFqNgJAIAMgASkCADcDECACQZABaiIIEIwEIQQgCEEMIANBEGoQ3wIgAigCjAEiBUH4AWoQmgMiBkH/AXEiB0UgBCAGQQh2Qf8BcSAHR3FyRQRAIAVB7AFqQQEQigMLIANBiAFqIAFBOGooAgA2AgAgA0GAAWogAUEwaikCADcDACADQfgAaiABQShqKQIANwMAIANBADoAjAEgAyABKQIgNwNwIANB0ABqIANB8ABqELACAkACQCADKAJQRQRAIANB6ABqIgUgA0HUAGoiAUEIaigCADYCACADIAEpAgA3A2AgAygCREEDRg0BIANBxABqIQYgAkGgAWohBwJAA0ACQCADQQhqIAgQqAECfyADKAIIIgEEQCADKAIMDAELA0AgA0HwAGogBxDUASADKAJwIgFBAkYNAAsgAUEBaw0BIAMoAnQhASADKAJ4CyEEIAFBDEYgA0EQaiAERnENAiAEIAERAAAgAygCREEDRw0BDAQLCyADKAJEQQNGDQIgAiAGEHgMAgsgA0HwAGoiASADQRBqQcAAEMcEGiAAQQxqIAFBABC7AiAAQQhqIANB6ABqKAIANgIADAILIAIgA0FAayADKAJUIAMoAlgQmAQACyADQfAAaiADQRBqQcAAEMcEGiAAQQxqIANBkAFqEPACIABBCGogBSgCADYCAAsgACADKQNgNwIAIANBsAFqJAAL9QQBBn8jAEGwAWsiAyQAIANBGGogAUEIaikCADcDACADQSBqIAFBEGopAgA3AwAgA0EoaiABQRhqKQIANwMAIANBADoATCADQQA2AkQgA0EANgIwIAMgAigCiAE2AkggAyACQYwBajYCQCADIAEpAgA3AxAgAkGQAWoiCBCMBCEEIAhBESADQRBqEN8CIAIoAowBIgVB+AFqEJoDIgZB/wFxIgdFIAQgBkEIdkH/AXEgB0dxckUEQCAFQewBakEBEIoDCyADQYgBaiABQThqKAIANgIAIANBgAFqIAFBMGopAgA3AwAgA0H4AGogAUEoaikCADcDACADQQA6AIwBIAMgASkCIDcDcCADQdAAaiADQfAAahCxAgJAAkAgAygCUEUEQCADQegAaiIFIANB1ABqIgFBCGooAgA2AgAgAyABKQIANwNgIAMoAkRBA0YNASADQcQAaiEGIAJBoAFqIQcCQANAAkAgA0EIaiAIEKgBAn8gAygCCCIBBEAgAygCDAwBCwNAIANB8ABqIAcQ1AEgAygCcCIBQQJGDQALIAFBAWsNASADKAJ0IQEgAygCeAshBCABQRFGIANBEGogBEZxDQIgBCABEQAAIAMoAkRBA0cNAQwECwsgAygCREEDRg0CIAIgBhB4DAILIANB8ABqIgEgA0EQakHAABDHBBogAEEMaiABQQAQpgIgAEEIaiADQegAaigCADYCAAwCCyACIANBQGsgAygCVCADKAJYEJgEAAsgA0HwAGogA0EQakHAABDHBBogAEEMaiADQZABahDwAiAAQQhqIAUoAgA2AgALIAAgAykDYDcCACADQbABaiQAC/UEAQZ/IwBBsAFrIgMkACADQRhqIAFBCGopAgA3AwAgA0EgaiABQRBqKQIANwMAIANBKGogAUEYaikCADcDACADQQA6AEwgA0EANgJEIANBADYCMCADIAIoAogBNgJIIAMgAkGMAWo2AkAgAyABKQIANwMQIAJBkAFqIggQjAQhBCAIQRIgA0EQahDfAiACKAKMASIFQfgBahCaAyIGQf8BcSIHRSAEIAZBCHZB/wFxIAdHcXJFBEAgBUHsAWpBARCKAwsgA0GIAWogAUE4aigCADYCACADQYABaiABQTBqKQIANwMAIANB+ABqIAFBKGopAgA3AwAgA0EAOgCMASADIAEpAiA3A3AgA0HQAGogA0HwAGoQsgICQAJAIAMoAlBFBEAgA0HoAGoiBSADQdQAaiIBQQhqKAIANgIAIAMgASkCADcDYCADKAJEQQNGDQEgA0HEAGohBiACQaABaiEHAkADQAJAIANBCGogCBCoAQJ/IAMoAggiAQRAIAMoAgwMAQsDQCADQfAAaiAHENQBIAMoAnAiAUECRg0ACyABQQFrDQEgAygCdCEBIAMoAngLIQQgAUESRiADQRBqIARGcQ0CIAQgAREAACADKAJEQQNHDQEMBAsLIAMoAkRBA0YNAiACIAYQeAwCCyADQfAAaiIBIANBEGpBwAAQxwQaIABBDGogAUEAEL0CIABBCGogA0HoAGooAgA2AgAMAgsgAiADQUBrIAMoAlQgAygCWBCYBAALIANB8ABqIANBEGpBwAAQxwQaIABBDGogA0GQAWoQ8AIgAEEIaiAFKAIANgIACyAAIAMpA2A3AgAgA0GwAWokAAv1BAEGfyMAQbABayIDJAAgA0EYaiABQQhqKQIANwMAIANBIGogAUEQaikCADcDACADQShqIAFBGGopAgA3AwAgA0EA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gAELIQQgAUEGRiADQRRqIARGcQ0CIAQgAREAACADKAJMQQNHDQEMBAsLIAMoAkxBA0YNAiACIAUQeAwCCyADQfgAaiIBIANBFGpBxAAQxwQaIABBDGogAUEBEKsCDAILIAIgA0HIAGogAygCXCADKAJgEJgEAAsgA0H4AGoiASADQRRqQcQAEMcEGiAAQQxqIAEQ8QILIABBCGogA0HwAGooAgA2AgAgACADKQNoNwIAIANBwAFqJAALuQQBBn8jAEHAAWsiAyQAIANBADoAVCADQQA2AkwgAyACKAKIATYCUCADIAJBjAFqNgJIIANBJGogAUEkEMcEGiADQQA2AhQgAkGQAWoiBxCMBCEEIAdBASADQRRqEN8CIAIoAowBIgVB+AFqEJoDIgZB/wFxIghFIAQgBkEIdkH/AXEgCEdxckUEQCAFQewBakEBEIoDCyADQZABaiABQTxqKQIANwMAIANBiAFqIAFBNGopAgA3AwAgA0GAAWogAUEsaikCADcDACADQQA6AJgBIAMgASkCJDcDeCADQdgAaiADQfgAahCTAgJAAkAgAygCWEUEQCADQfAAaiADQdwAaiIBQQhqKAIANgIAIAMgASkCADcDaCADKAJMQQNGDQEgA0HMAGohBSACQaABaiEGAkADQAJAIANBCGogBxCoAQJ/IAMoAggiAQRAIAMoAgwMAQsDQCADQfgAaiAGENQBIAMoAngiAUECRg0ACyABQQFrDQEgAygCfCEBIAMoAoABCyEEIAFBAUYgA0EUaiAERnENAiAEIAERAAAgAygCTEEDRw0BDAQLCyADKAJMQQNGDQIgAiAFEHgMAgsgA0H4AGoiASADQRRqQcQAEMcEGiAAQQxqIAFBABCsAgwCCyACIANByABqIAMoAlwgAygCYBCYBAALIANB+ABqIgEgA0EUakHEABDHBBogAEEMaiABEIADCyAAQQhqIANB8ABqKAIANgIAIAAgAykDaDcCACADQcABaiQAC7kEAQZ/IwBBwAFrIgMkACADQQA6AFQgA0EANgJMIAMgAigCiAE2AlAgAyACQYwBajYCSCADQSRqIAFBJBDHBBogA0EANgIUIAJBkAFqIgcQjAQhBCAHQQYgA0EUahDfAiACKAKMASIFQfgBahCaAyIGQf8BcSIIRSAEIAZBCHZB/wFxIAhHcXJFBEAgBUHsAWpBARCKAwsgA0GQAWogAUE8aikCADcDACADQYgBaiABQTRqKQIANwMAIANBgAFqIAFBLGopAgA3AwAgA0EAOgCYASADIAEpAiQ3A3ggA0HYAGogA0H4AGoQlAICQAJAIAMoAlhFBEAgA0HwAGogA0HcAGoiAUEIaigCADYCACADIAEpAgA3A2ggAygCTEEDRg0BIANBzABqIQUgAkGgAWohBgJAA0ACQCADQQhqIAcQqAECfyADKAIIIgEEQCADKAIMDAELA0AgA0H4AGogBhDUASADKAJ4IgFBAkYNAAsgAUEBaw0BIAMoAnwhASADKAKAAQshBCABQQZGIANBFGogBEZxDQIgBCABEQAAIAMoAkxBA0cNAQwECwsgAygCTEEDRg0CIAIgBRB4DAILIANB+ABqIgEgA0EUakHEABDHBBogAEEMaiABQQAQqwIMAgsgAiADQcgAaiADKAJcIAMoAmAQmAQACyADQfgAaiIBIANBFGpBxAAQxwQaIABBDGogARDxAgsgAEEIaiADQfAAaigCADYCACAAIAMpA2g3AgAgA0HAAWokAAuQAgEBfyMAQSBrIgYkAAJAAkACQAJAAkACQAJAAkAgBEH/AXFBAWsOBAECAwQACyAFQf8BcUEBaw4EBAYFBgYLIAVB/wFxQQFrDgQDBQQFBQsgBUH/AXFBAWsOBAIEAwQECyAFQf8BcUEBaw4EAQMCAwMLIAVB/wFxQQFrDgQAAgECAgsgBkEANgIYIAZBATYCDCAGQey+wAA2AgggBkIENwIQIAZBCGpB9L7AABC0AwALIAZBADYCGCAGQQE2AgwgBkHEv8AANgIIIAZCBDcCECAGQQhqQcy/wAAQtAMACyABIAMgASgCACIFIAIgBUYiBBs2AgAgACAFNgIEIAAgBEF/c0EBcTYCACAGQSBqJAALuAQBCX8jAEEQayIEJAACQAJAAn8CQCAAKAIABEAgACgCBCEGIAQgASgCDCIDNgIMIAQgASgCCCICNgIIIAQgASgCBCIFNgIEIAQgASgCACIBNgIAIAAtACAhCSAAKAIQIQogAC0AHEEIcQ0BIAohCCAJDAILIAAoAhQgACgCGCABEFwhAgwDCyAAKAIUIAEgBSAAKAIYKAIMEQQADQEgAEEBOgAgQTAhCCAAQTA2AhAgBEIBNwIAIAYgBWshAUEAIQUgAUEAIAEgBk0bIQZBAQshByADBEAgA0EMbCEDA0ACfwJAAkACQCACLwEAQQFrDgICAQALIAIoAgQMAgsgAigCCAwBCyACLwECIgFB6AdPBEBBBEEFIAFBkM4ASRsMAQtBASABQQpJDQAaQQJBAyABQeQASRsLIAJBDGohAiAFaiEFIANBDGsiAw0ACwsCfwJAIAUgBkkEQCAGIAVrIQMCQAJAAkAgB0H/AXEiAkEBaw4DAAEAAgsgAyECQQAhAwwBCyADQQF2IQIgA0EBakEBdiEDCyACQQFqIQIgACgCGCEHIAAoAhQhAQNAIAJBAWsiAkUNAiABIAggBygCEBEBAEUNAAsMAwsgACgCFCAAKAIYIAQQXAwBCyABIAcgBBBcDQFBACECAn8DQCADIAIgA0YNARogAkEBaiECIAEgCCAHKAIQEQEARQ0ACyACQQFrCyADSQshAiAAIAk6ACAgACAKNgIQDAELQQEhAgsgBEEQaiQAIAILkQQBC38gAUEBayENIAAoAgQhCiAAKAIAIQsgACgCCCEMA0ACQAJAIAIgA0kNAANAIAEgA2ohBQJAAkAgAiADayIHQQhPBEACQCAFQQNqQXxxIgYgBWsiBARAQQAhAANAIAAgBWotAABBCkYNBSAEIABBAWoiAEcNAAsgBCAHQQhrIgBNDQEMAwsgB0EIayEACwNAIAZBBGooAgAiCUGKlKjQAHNBgYKECGsgCUF/c3EgBigCACIJQYqUqNAAc0GBgoQIayAJQX9zcXJBgIGChHhxDQIgBkEIaiEGIARBCGoiBCAATQ0ACwwBCyACIANGBEAgAiEDDAQLQQAhAANAIAAgBWotAABBCkYNAiAHIABBAWoiAEcNAAsgAiEDDAMLIAQgB0YEQCACIQMMAwsDQCAEIAVqLQAAQQpGBEAgBCEADAILIAcgBEEBaiIERw0ACyACIQMMAgsgACADaiIGQQFqIQMCQCACIAZNDQAgACAFai0AAEEKRw0AQQAhBSADIQYgAyEADAMLIAIgA08NAAsLQQEhBSACIgAgCCIGRw0AQQAPCwJAIAwtAABFDQAgC0Ho+cAAQQQgCigCDBEEAEUNAEEBDwtBACEEIAAgCEcEQCAAIA1qLQAAQQpGIQQLIAAgCGshACABIAhqIQcgDCAEOgAAIAYhCCALIAcgACAKKAIMEQQAIgAgBXJFDQALIAAL9Q0CC38BfiMAQYABayIIJAAgCCAENgIIIAggATYCAAJAAkAgCAJ/AkACQCAHKAIAIgktAABFBEAgAUEBdiIBIARJDQEgAg0CIANFDQEgA0EBdgwDCyAIQQA2AkwgCEKAgICAwAA3AkQgACAIQcQAahDgAQwDCyAHKQIEIRMgCEEANgI0IAhCgICAgMAANwIsIAhBADoAWCAIIAk2AlQgCCATQiCJNwJMIAggBTYCRCAIIAUgBkECdGo2AkggCEEsaiEHIwBB4ABrIgIkAAJAIAhBxABqIgUtABQNACAFKAIAIgEgBSgCBCIPRg0AIAVBDGohAyAFKAIQIQ0gBSgCCCEQIAJBzABqIQYgAkFAayEMIAJBOGpBBHIhDgNAIAUgAUEEaiIENgIAIAJBOGogECgCACABKAIAIgEQ2QECQCACKAI4IglBEUYEQCACQTBqIA5BCGooAgA2AgAgAiAOKQIANwMoDAELIAJBMGogDEEIaigCADYCACACQRhqIAZBCGopAgA3AwAgAkEgaiAGQRBqKAIANgIAIAIgDCkDADcDKCACIAYpAgA3AxAgAigCPCEBCyAMIAIpAyg3AwAgBiACKQMQNwIAIAxBCGogAkEwaigCADYCACAGQQhqIAJBGGopAwA3AgAgBkEQaiACQSBqKAIANgIAIAIgATYCPCACIAk2AjgjAEEwayIBJAAgAkE4aiIKQQRqIQsCQCAKKAIAIhFBEUYEQCACIAspAgA3AgAgAkEIaiALQQhqKQIANwIADAELIAMoAgAgAUEUaiALQQhqKQIANwIAIAFBJGogCkEcaikCADcCACABQSxqIApBJGooAgA2AgAoAgAiCS0AACESIAlBAToAACABIBE2AgggASALKQIANwIMIAEgCikCFDcCHAJAIBJFBEAgCSgCCEERRg0BIAlBADoAAAsgAkGAgICAeDYCBCABQQhqEKIDDAELIAlBCGogAUEIakEoEMcEGiACQYCAgIB4NgIEIAlBADoAAAsgAUEwaiQAIAIoAgQiAUGBgICAeEYNASABQYCAgIB4RgRAIAVBAToAFCANQQE6AAAMAgsgAikCCCETIA0tAAAEQCAFQQE6ABQgAUUNAiATpyABQQJ0QQQQrAQMAgsgAigCACELIAcoAggiCSAHKAIARgRAIAcgCUEBEKADCyAHKAIEIAlBBHRqIgogEzcCCCAKIAE2AgQgCiALNgIAIAcgCUEBajYCCCAEIgEgD0cNAAsLIAVChICAgMAANwIAIAJB4ABqJAAgCCkCLCETIAggCCgCNDYCTCAIIBM3AkQgACAFEOABDAILEOQDIgIgA0EBdiIDIAIgA0sbCzYCBCAIIAE2AgwgASAGSw0BIAcoAgQhAiAIIAcoAggiAzYCfCAIIAI2AnggCCAJNgJ0IAggAzYCYCAIIAI2AlwgCCAJNgJYIAggATYCcCAIIAYgAWs2AlQgCCAFNgJsIAggBSABQQJ0ajYCUCAIIAhBBGoiATYCaCAIIAhBDGoiAjYCZCAIIAE2AkwgCCACNgJIIAggCDYCRCAIQSxqIQEgCEHEAGohAgJAQfiCwAAQiQMiAwRAIAEgAiADEEcMAQsQmgIoAgBBQGshBSMAQUBqIgYkAAJAQfiCwAAQiQMiAwRAIAUgAygCjAFBQGtGBEAgASACIAMQRwwCCyMAQdABayIEJAAgAygCiAEhByAEQQE6AGQgBCAHNgJgIARBADYCXCAEIANBjAFqNgJYIAQgAkE8EMcEIgJBADYCPCAFQSQgAhCdAiACKAJcQQNHBEAgAyACQdwAahB4CyACQegAaiACQegAEMcEGiABIAJBpAFqENwCIAJB0AFqJAAMAQsgBiACQTwQxwQiAyAFNgI8IwBB4AFrIgIkAAJAQQBB/ILAACgCABEFACIEBEAgAkEoaiADQTwQxwQaIAJBADYCZCACIAQ2AiQgAygCPEE0IAJBJGoiAxCdAiACKAIkEPgCIAJBgAFqIANB3AAQxwQaIAJBDGogAkHAAWoQ3AIgAUEQaiACQRxqKQIANwIAIAFBCGogAkEUaikCADcCACABIAIpAgw3AgAgAkHgAWokAAwBCyADQgQ3AiggA0IENwIMQYCJwABBxgAgAkHfAWpByInAAEGoisAAEMMCAAsLIAZBQGskAAsgCEEYaiIBIAhBNGooAgA2AgAgCEEoaiAIQUBrKAIANgIAIAggCCkCLDcDECAIIAgpAjg3AyAgCEEQaiAIQSBqIgIQtAIgAEEIaiABKAIANgIAIAAgCCkDEDcCACACEKICCyAIQYABaiQADwsgCEEANgJUIAhBATYCSCAIQYCewAA2AkQgCEIENwJMIAhBxABqQdyfwAAQtAMAC9kJAgR/AX4jAEGAAWsiCCQAIAggBDYCCCAIIAE2AgACQAJAIAgCfwJAAkAgBygCACIJLQAARQRAIAFBAXYiASAESQ0BIAINAiADRQ0BIANBAXYMAwsgCEEANgJMIAhCgICAgMAANwJEIAAgCEHEAGoQ1QEMAwsgBykCBCEMIAhBADYCNCAIQoCAgIDAADcCLCAIQQA6AFggCCAJNgJUIAggDEIgiTcCTCAIIAU2AkQgCCAFIAZBAnRqNgJIIAhBLGohBSMAQTBrIgQkAAJAIAhBxABqIgMtABQNACADKAIAIgEgAygCBCIHRg0AIANBDGohCSADKAIQIQYgAygCCCELA0AgAyABQQRqIgI2AgAgBEEIaiIKIAsoAgAgASgCABDCASAEKAIIQRJGDQEgBCAJIAoQ4QECQAJAAkACQCAEKAIADgMAAQUBCyAGQQE6AAAMAQsgBi0AAEUNAQsgA0EBOgAUDAILIAQoAgQhCiAFKAIIIgEgBSgCAEYEQCAFQQEQ8wMLIAUoAgQgAUECdGogCjYCACAFIAFBAWo2AgggAiIBIAdHDQALCyAEQTBqJAAgCCkCLCEMIAggCCgCNDYCTCAIIAw3AkQgACADENUBDAILEOQDIgIgA0EBdiIDIAIgA0sbCzYCBCAIIAE2AgwgASAGSw0BIAcoAgQhAiAIIAcoAggiAzYCfCAIIAI2AnggCCAJNgJ0IAggAzYCYCAIIAI2AlwgCCAJNgJYIAggATYCcCAIIAYgAWs2AlQgCCAFNgJsIAggBSABQQJ0ajYCUCAIIAhBBGoiATYCaCAIIAhBDGoiAjYCZCAIIAE2AkwgCCACNgJIIAggCDYCRCAIQSxqIQEgCEHEAGohAgJAQfiCwAAQiQMiAwRAIAEgAiADEEgMAQsQmgIoAgBBQGshBSMAQUBqIgYkAAJAQfiCwAAQiQMiAwRAIAUgAygCjAFBQGtGBEAgASACIAMQSAwCCyMAQdABayIEJAAgAygCiAEhByAEQQE6AGQgBCAHNgJgIARBADYCXCAEIANBjAFqNgJYIAQgAkE8EMcEIgJBADYCPCAFQR0gAhCdAiACKAJcQQNHBEAgAyACQdwAahB4CyACQegAaiACQegAEMcEGiABIAJBpAFqENwCIAJB0AFqJAAMAQsgBiACQTwQxwQiAyAFNgI8IwBB4AFrIgIkAAJAQQBB/ILAACgCABEFACIEBEAgAygCPCACIAQ2AiQgAkEoaiADQTwQxwQaIAJBADYCZEE/IAJBJGoiAxCdAiACKAIkEPgCIAJBgAFqIANB3AAQxwQaIAJBDGogAkHAAWoQ3AIgAUEQaiACQRxqKQIANwIAIAFBCGogAkEUaikCADcCACABIAIpAgw3AgAgAkHgAWokAAwBC0GAicAAQcYAIAJB3wFqQciJwABBqIrAABDDAgALCyAGQUBrJAALIAhBGGoiASAIQTRqKAIANgIAIAhBKGogCEFAaygCADYCACAIIAgpAiw3AxAgCCAIKQI4NwMgIAhBEGogCEEgaiICELQCIABBCGogASgCADYCACAAIAgpAxA3AgAgAhCkAgsgCEGAAWokAA8LIAhBADYCVCAIQQE2AkggCEGMg8AANgJEIAhCBDcCTCAIQcQAakHQhMAAELQDAAvcCQIEfwF+IwBBgAFrIggkACAIIAQ2AgggCCABNgIAAkACQCAIAn8CQAJAIAcoAgAiCS0AAEUEQCABQQF2IgEgBEkNASACDQIgA0UNASADQQF2DAMLIAhBADYCTCAIQoCAgIDAADcCRCAAIAhBxABqEOsBDAMLIAcpAgQhDCAIQQA2AjQgCEKAgICAwAA3AiwgCEEAOgBYIAggCTYCVCAIIAxCIIk3AkwgCCAFNgJEIAggBSAGQQJ0ajYCSCAIQSxqIQUjAEEwayIEJAACQCAIQcQAaiIDLQAUDQAgAygCACIBIAMoAgQiB0YNACADQQxqIQkgAygCECEGIAMoAgghCwNAIAMgAUEEaiICNgIAIARBCGoiCiALKAIAIAEoAgAQwAEgBCgCCEESRg0BIAQgCSAKEOEBAkACQAJAAkAgBCgCAA4DAAEFAQsgBkEBOgAADAELIAYtAABFDQELIANBAToAFAwCCyAEKAIEIQogBSgCCCIBIAUoAgBGBEAgBSABQQEQngMLIAUoAgQgAUECdGogCjYCACAFIAFBAWo2AgggAiIBIAdHDQALCyAEQTBqJAAgCCkCLCEMIAggCCgCNDYCTCAIIAw3AkQgACADEOsBDAILEOQDIgIgA0EBdiIDIAIgA0sbCzYCBCAIIAE2AgwgASAGSw0BIAcoAgQhAiAIIAcoAggiAzYCfCAIIAI2AnggCCAJNgJ0IAggAzYCYCAIIAI2AlwgCCAJNgJYIAggATYCcCAIIAYgAWs2AlQgCCAFNgJsIAggBSABQQJ0ajYCUCAIIAhBBGoiATYCaCAIIAhBDGoiAjYCZCAIIAE2AkwgCCACNgJIIAggCDYCRCAIQSxqIQEgCEHEAGohAgJAQfiCwAAQiQMiAwRAIAEgAiADEEkMAQsQmgIoAgBBQGshBSMAQUBqIgYkAAJAQfiCwAAQiQMiAwRAIAUgAygCjAFBQGtGBEAgASACIAMQSQwCCyMAQdABayIEJAAgAygCiAEhByAEQQE6AGQgBCAHNgJgIARBADYCXCAEIANBjAFqNgJYIAQgAkE8EMcEIgJBADYCPCAFQSUgAhCdAiACKAJcQQNHBEAgAyACQdwAahB4CyACQegAaiACQegAEMcEGiABIAJBpAFqENwCIAJB0AFqJAAMAQsgBiACQTwQxwQiAyAFNgI8IwBB4AFrIgIkAAJAQQBB/ILAACgCABEFACIEBEAgAygCPCACIAQ2AiQgAkEoaiADQTwQxwQaIAJBADYCZEHCACACQSRqIgMQnQIgAigCJBD4AiACQYABaiADQdwAEMcEGiACQQxqIAJBwAFqENwCIAFBEGogAkEcaikCADcCACABQQhqIAJBFGopAgA3AgAgASACKQIMNwIAIAJB4AFqJAAMAQtBgInAAEHGACACQd8BakHIicAAQaiKwAAQwwIACwsgBkFAayQACyAIQRhqIgEgCEE0aigCADYCACAIQShqIAhBQGsoAgA2AgAgCCAIKQIsNwMQIAggCCkCODcDICAIQRBqIAhBIGoiAhC0AiAAQQhqIAEoAgA2AgAgACAIKQMQNwIAIAIQowILIAhBgAFqJAAPCyAIQQA2AlQgCEEBNgJIIAhBjIPAADYCRCAIQgQ3AkwgCEHEAGpB0ITAABC0AwAL2wkCBH8BfiMAQYABayIIJAAgCCAENgIIIAggATYCAAJAAkAgCAJ/AkACQCAHKAIAIgktAABFBEAgAUEBdiIBIARJDQEgAg0CIANFDQEgA0EBdgwDCyAIQQA2AkwgCEKAgICAwAA3AkQgACAIQcQAahDrAQwDCyAHKQIEIQwgCEEANgI0IAhCgICAgMAANwIsIAhBADoAWCAIIAk2AlQgCCAMQiCJNwJMIAggBTYCRCAIIAUgBkECdGo2AkggCEEsaiEFIwBBMGsiBCQAAkAgCEHEAGoiAy0AFA0AIAMoAgAiASADKAIEIgdGDQAgA0EMaiEJIAMoAhAhBiADKAIIIQsDQCADIAFBBGoiAjYCACAEQQhqIgogCygCACABKAIAEMMBIAQoAghBEkYNASAEIAkgChDhAQJAAkACQAJAIAQoAgAOAwABBQELIAZBAToAAAwBCyAGLQAARQ0BCyADQQE6ABQMAgsgBCgCBCEKIAUoAggiASAFKAIARgRAIAUgAUEBEJ4DCyAFKAIEIAFBAnRqIAo2AgAgBSABQQFqNgIIIAIiASAHRw0ACwsgBEEwaiQAIAgpAiwhDCAIIAgoAjQ2AkwgCCAMNwJEIAAgAxDrAQwCCxDkAyICIANBAXYiAyACIANLGws2AgQgCCABNgIMIAEgBksNASAHKAIEIQIgCCAHKAIIIgM2AnwgCCACNgJ4IAggCTYCdCAIIAM2AmAgCCACNgJcIAggCTYCWCAIIAE2AnAgCCAGIAFrNgJUIAggBTYCbCAIIAUgAUECdGo2AlAgCCAIQQRqIgE2AmggCCAIQQxqIgI2AmQgCCABNgJMIAggAjYCSCAIIAg2AkQgCEEsaiEBIAhBxABqIQICQEH4gsAAEIkDIgMEQCABIAIgAxBLDAELEJoCKAIAQUBrIQUjAEFAaiIGJAACQEH4gsAAEIkDIgMEQCAFIAMoAowBQUBrRgRAIAEgAiADEEsMAgsjAEHQAWsiBCQAIAMoAogBIQcgBEEBOgBkIAQgBzYCYCAEQQA2AlwgBCADQYwBajYCWCAEIAJBPBDHBCICQQA2AjwgBUEfIAIQnQIgAigCXEEDRwRAIAMgAkHcAGoQeAsgAkHoAGogAkHoABDHBBogASACQaQBahDcAiACQdABaiQADAELIAYgAkE8EMcEIgMgBTYCPCMAQeABayICJAACQEEAQfyCwAAoAgARBQAiBARAIAMoAjwgAiAENgIkIAJBKGogA0E8EMcEGiACQQA2AmRBPiACQSRqIgMQnQIgAigCJBD4AiACQYABaiADQdwAEMcEGiACQQxqIAJBwAFqENwCIAFBEGogAkEcaikCADcCACABQQhqIAJBFGopAgA3AgAgASACKQIMNwIAIAJB4AFqJAAMAQtBgInAAEHGACACQd8BakHIicAAQaiKwAAQwwIACwsgBkFAayQACyAIQRhqIgEgCEE0aigCADYCACAIQShqIAhBQGsoAgA2AgAgCCAIKQIsNwMQIAggCCkCODcDICAIQRBqIAhBIGoiAhC0AiAAQQhqIAEoAgA2AgAgACAIKQMQNwIAIAIQowILIAhBgAFqJAAPCyAIQQA2AlQgCEEBNgJIIAhBjIPAADYCRCAIQgQ3AkwgCEHEAGpB0ITAABC0AwALrhQCA34bfyMAQRBrIhUkACAVQQhqIRsgASkDCCIDIAKthSIEQjiGIARCgP4Dg0IohoQgBEKAgPwHg0IYhiAEQoCAgPgPg0IIhoSEIANCCIhCgICA+A+DIANCGIhCgID8B4OEIANCKIhCgP4DgyADQjiIhISEQtKBqpur+oLXp39+IgNCOIYgA0KA/gODQiiGhCADQoCA/AeDQhiGIANCgICA+A+DQgiGhIQgA0IIiEKAgID4D4MgA0IYiEKAgPwHg4QgA0IoiEKA/gODIANCOIiEhIQgBELYotHvwqnlvy1+hSIDQjiGIANCgP4Dg0IohoQgA0KAgPwHg0IYhiADQoCAgPgPg0IIhoSEIANCCIhCgICA+A+DIANCGIhCgID8B4OEIANCKIhCgP4DgyADQjiIhISEIAEpAwAiBEJ/hX4iBUI4hiAFQoD+A4NCKIaEIAVCgID8B4NCGIYgBUKAgID4D4NCCIaEhCAFQgiIQoCAgPgPgyAFQhiIQoCA/AeDhCAFQiiIQoD+A4MgBUI4iISEhCADIARCOIYgBEKA/gODQiiGhCAEQoCA/AeDQhiGIARCgICA+A+DQgiGhIQgBEIIiEKAgID4D4MgBEIYiEKAgPwHg4QgBEIoiEKA/gODIARCOIiEhIR+hSADiachFiMAQRBrIhEkACARIAI2AgwgEUEMaiMAQRBrIh0kACABQSBqIg4oAgghEiAOKAIEIRcgDigCFEUEQAJAIB1BCGohHiMAQTBrIgokAAJAAn8gDkEMaiIMKAIMIghBAWoiASAISQRAIApBADYCFCAKQQE2AgggCkHIjcAANgIEIApCBDcCDCAKQQRqQbSOwAAQtAMACyAMKAIEIg8gD0EBaiIHQQN2IglBB2wiCyAPQQhJGyIGQQF2IAFJBEAgCkEgaiABIAZBAWoiByABIAdLGxCDASAKKAIoIRQgCigCJCIQIAooAiAiDUUNARogCiAKKAIsNgIcIAogFDYCGCAKIBA2AhQgCkKEgICAgAE3AgggCiAMQRBqNgIEIAogDTYCECAIBEAgDUEIaiEYIAwoAgAiC0EEayEZIAspAwBCf4VCgIGChIiQoMCAf4MhAyALIQcgCCEPQQAhBgNAIANQBEAgByEBA0AgBkEIaiEGIAEpAwggAUEIaiIHIQFCf4VCgIGChIiQoMCAf4MiA1ANAAsLIBkgA3qnQQN2IAZqQQJ0IhprKAIAIgEgEk8NBCANIBcgAUEDdGooAgAiICAQcSIJaikAAEKAgYKEiJCgwIB/gyIEUARAQQghAQNAIAEgCWohCSABQQhqIQEgDSAJIBBxIglqKQAAQoCBgoSIkKDAgH+DIgRQDQALCyADQgF9IAODIQMgDSAEeqdBA3YgCWogEHEiAWosAABBAE4EQCANKQMAQoCBgoSIkKDAgH+DeqdBA3YhAQsgASANaiAgQRl2Igk6AAAgGCABQQhrIBBxaiAJOgAAIA0gAUECdGtBBGsgCyAaa0EEaygAADYAACAPQQFrIg8NAAsLIAogCDYCHCAKIBQgCGs2AhhBACEBA0AgASAMaiIHKAIAIQYgByABIApqQRBqIgcoAgA2AgAgByAGNgIAIAFBBGoiAUEQRw0ACyAKQQRqEOoCQQghFEGBgICAeAwBCyAMKAIAIQYgCSAHQQdxQQBHaiIJBEAgBiEBA0AgASABKQMAIgNCf4VCB4hCgYKEiJCgwIABgyADQv/+/fv379+//wCEfDcDACABQQhqIQEgCUEBayIJDQALCwJAAkAgB0EITwRAIAYgB2ogBikAADcAAAwBCyAGQQhqIAYgBxDIBBogB0UNAQtBACELQQAhAQNAAkAgBiABIgdqLQAAQYABRw0AIBIgBiABQQJ0IghrQQRrKAIAIgFLBEAgBiAIa0EEayEYIAYgC2ohGUEAIAdrQQJ0IRoDQCAMKAIEIgggFyABQQN0aigCACIQcSINIQkgBiANaikAAEKAgYKEiJCgwIB/gyIDUARAQQghAQNAIAEgCWohCSABQQhqIQEgBiAIIAlxIglqKQAAQoCBgoSIkKDAgH+DIgNQDQALCyAGIAN6p0EDdiAJaiAIcSIBaiwAAEEATgRAIAYpAwBCgIGChIiQoMCAf4N6p0EDdiEBCwJAIAEgDWsgByANa3MgCHFBCE8EQCABIAZqIgktAAAgCSAQQRl2Igk6AAAgBiABQQhrIAhxakEIaiAJOgAAIAYgAUECdGshCEH/AUcEQEF8IQEDQCABIBlqIgYtAAAhCSAGIAEgCGoiBi0AADoAACAGIAk6AAAgAUEBaiIBDQALDAILIAwoAgAiBiAHakH/AToAACAGIAwoAgQgB0EIa3FqQQhqQf8BOgAAIAhBBGsgGCgAADYAAAwECyAGIAdqIBBBGXYiAToAACAGIAggB0EIa3FqQQhqIAE6AAAMAwsgDCgCACIGIBpqQQRrKAIAIgEgEkkNAAsLIAEgEkGcjcAAENUCAAsgB0EBaiEBIAtBBGshCyAHIA9HDQALIAwoAgQiASABQQFqQQN2QQdsIAFBCEkbIQsgDCgCDCEICyAMIAsgCGs2AghBgYCAgHgLIQEgHiAUNgIEIB4gATYCACAKQTBqJAAMAQsgASASQZyNwAAQ1QIACwsgDigCDCIIQQRrIQogDigCECILIBZxIQcgFkEZdiIPrUKBgoSIkKDAgAF+IQUoAgAhDEEAIQYCQAJAAn8CQANAIAcgCGopAAAiBCAFhSIDQn+FIANCgYKEiJCgwIABfYNCgIGChIiQoMCAf4MhAwNAIANQBEAgBEKAgYKEiJCgwIB/gyEDQQEhASAGRQRAIAN6p0EDdiAHaiALcSETIANCAFIhAQsgAyAEQgGGg0IAUg0DIAcgHEEIaiIcaiALcSEHIAEhBgwCCyAKIAN6p0EDdiAHaiALcUECdGsoAgAiASASTw0EIANCAX0gA4MhAyAMIBcgAUEDdGooAgRHDQALC0EADAELIAggE2osAAAiBkEATgRAIAggCCkDAEKAgYKEiJCgwIB/g3qnQQN2IhNqLQAAIQYLIA4oAhghASAIIBNqIA86AAAgCCATQQhrIAtxakEIaiAPOgAAIA4gDigCFCAGQQFxazYCFCAOIAFBAWo2AhggCCATQQJ0a0EEayABNgIAQQELIQcgESABNgIEIBEgBzYCACAdQRBqJAAMAQsgASASQcCFwAAQ1QIACyARKAIEIQYCQCARKAIAIgtFBEAgDigCCCIBIAZLDQEgBiABQfCFwAAQ1QIACyAOIgEoAggiByABKAIAIghGBEAgAUEBENYCIAEoAgAhCCABKAIIIQcLIAcgCEYEQCABEJUDCyABKAIEIAdBA3RqIgggAjYCBCAIIBY2AgAgASAHQQFqNgIICyAbIAY2AgAgGyALRToABCARQRBqJAAgFSgCCCEBIAAgFS0ADEEBcToABCAAIAE2AgAgFUEQaiQAC/kDAQl/IwBBEGsiBCQAAn8gAigCBCIFBEBBASAAIAIoAgAgBSABKAIMEQQADQEaCyACKAIMIgUEQCACKAIIIgMgBUEMbGohCCAEQQxqIQkDQAJAAkACQAJAIAMvAQBBAWsOAgIBAAsCQCADKAIEIgJBwQBPBEAgAUEMaigCACEFA0BBASAAQYb8wABBwAAgBREEAA0IGiACQUBqIgJBwABLDQALDAELIAJFDQMLIABBhvzAACACIAFBDGooAgARBABFDQJBAQwFCyAAIAMoAgQgAygCCCABQQxqKAIAEQQARQ0BQQEMBAsgAy8BAiECIAlBADoAACAEQQA2AggCf0EEQQUgAkGQzgBJGyACQegHTw0AGkEBIAJBCkkNABpBAkEDIAJB5ABJGwsiBSAEQQhqIgpqIgdBAWsiBiACIAJBCm4iC0EKbGtBMHI6AAACQCAGIApGDQAgB0ECayIGIAtBCnBBMHI6AAAgBEEIaiAGRg0AIAdBA2siBiACQeQAbkEKcEEwcjoAACAEQQhqIAZGDQAgB0EEayIGIAJB6AduQQpwQTByOgAAIARBCGogBkYNACAHQQVrIAJBkM4AbkEwcjoAAAsgACAEQQhqIAUgAUEMaigCABEEAEUNAEEBDAMLIANBDGoiAyAIRw0ACwtBAAsgBEEQaiQAC6EYAhR/AX4jAEGgAWsiCCQAIAggATYCCCAIIAQ2AhACQAJAIAgCfwJAAkAgBCABQQF2IgxLDQAgAg0BIANFDQAgA0EBdgwCCyAIQfAAaiAHQQhqKQIANwIAIAhBADYCWCAIIAcpAgA3AmggCEE4aiEQIwBB8ABrIgokACAKQQhqIhogCEHYAGoiAkEIaikCADcDACAKIAIpAgA3AwAgCkE4aiIbIAJBGGooAgA2AgAgCkEAOgAgIAogBSAGQQR0aiIBNgIYIAogAikCEDcDMCAKIAo2AhwgAigCHCEXIAogCkEgajYCLCAKIBc2AiggCiAKQRxqNgIkAkAgASAFRgRAIAUhAQwBCyAKIAVBEGo2AhQCQCAFKAIEIgdBgICAgHhGDQAgCkHEAGohBiAKQdwAaiEEIApBKGohDANAAkAgBSgCACEBIAUpAgghHCAKQdgAaiAKQThqIg0oAgA2AgAgCiAKKQMwNwNQIAogHDcCZCAKIAc2AmAgCiABNgJcIAYhBUEAIQsjAEFAaiIJJAAgBCgCBCEYIAQoAgAhFiAKQdAAaiIBKAIIIRMgASgCBCEPIAEoAgAhFCAMKAIAIQcgCUEEaiEVIAQoAggiGSEBIBkgBCgCDEECdGohAiMAQTBrIg4kACAOIAI2AhgCfyABIAJGBEAgASECQQAMAQsgDiABNgIoIA5BATYCJCAOIAE2AiAgDkEBNgIcIA4gAUEEajYCFCAOIA5BFGo2AiwgDkEIaiERIA5BHGoiASgCECESIAEoAgwhAyABKAIIIQsCQAJAAkACQAJAAkACQAJAIAEoAgAiAg4DAQACAAsgASgCBCIBDQILIAtFDQAgAyIBDQILQQAhASASRQ0EIBIoAgAiAiASKAIEIgtGDQQgEiACQQRqIgM2AgAMAgsgC0UgAkECRnINACADDQMLIBJFDQEgEigCACEDIBIoAgQhCyABIQILIAMgC0YNACASIANBBGo2AgAgAiEBDAELQQAhAQsgESADNgIEIBEgATYCACAOKAIYIQEgDigCFCECIA4oAgwhCyAOKAIICyEDIBUgCzYCDCAVIAM2AgggFSABNgIEIBUgAjYCACAOQTBqJAACQAJAAkAgCSgCDEUNACAHKAIAKAIAIREgCSgCECEDIAkoAgghCyAJKAIEIQIDQCACIgEgC0YNASADIQcCQAJAAkACQAJAAkAgESgCAEEBaw4CAQIACyAHKAIAIBEoAgRGDQMMAgsgASgCACARKAIERw0BQfGUwQAtAAAaQQxBBBCcBCICRQ0GIAJBATYCBCACIBY2AgAgAiAHKAIANgIIIAlBATYCOCAJIAI2AjQgCSACNgIwIAkgFDYCKCAJIA82AiQgCSAPNgIgIAkgAkEMajYCPCAJIA8gE0EMbGo2AiwgCUEUaiAJQSBqENYBDAMLIAcoAgAgESgCBEcNACABKAIAIBEoAghHDQBB8ZTBAC0AABpBDEEEEJwEIgJFDQUgAkEANgIEIAIgFjYCACAJQQE2AjggCSACNgI0IAkgAjYCMCAJIBQ2AiggCSAPNgIkIAkgDzYCICAJIAJBDGo2AjwgCSAPIBNBDGxqNgIsIAlBFGogCUEgahDWAQwCCyAJIBM2AhwgCSAPNgIYIAkgFDYCFAwBC0HxlMEALQAAGkEMQQQQnAQiAkUNAyACQQE2AgQgAiAWNgIAIAIgASgCADYCCCAJQQE2AjggCSACNgI0IAkgAjYCMCAJIBQ2AiggCSAPNgIkIAkgDzYCICAJIAJBDGo2AjwgCSAPIBNBDGxqNgIsIAlBFGogCUEgahDWAQsgAUEEaiECIAkoAhwhEyAJKAIYIQ8gCSgCFCEUIAEhAyAHDQALCyAFIBM2AgggBSAPNgIEIAUgFDYCACAYBEAgGSAYQQJ0QQQQrAQLIAlBQGskAAwBC0EEQQwQxAQACyANIAZBCGooAgA2AgAgCiAGKQIANwMwIAooAhQiBSAKKAIYIgFGDQAgCiAFQRBqNgIUIAUoAgQiB0GAgICAeEcNAQwCCwsgASEFDAELIAVBEGohBQsgBSABIAVrQQR2EPsCIBBBCGogGikDADcCACAQIAopAwA3AgAgECAXNgIcIBAgCikDMDcCECAQQRhqIBsoAgA2AgAgCkHwAGokACMAQSBrIgskACMAQTBrIgwkACAQQRBqIgEpAgAhHCAMIAEoAggiBTYCKCAMIBw3AyAjAEEQayINJAAgDUEANgIEIA0gDEEgaiIGNgIAIA0gBigCCCIBNgIMIA0gATYCCCMAQRBrIgckACANKAIAIgIgDSgCBCIBNgIIIAdBCGogAiANKAIIIgIgAWsiAUEAIAEgAk0bEKgDIAcoAgwhBCAHKAIIIQMgDEEEaiAFQQAgBUF/RiICEOQDIgEgASACSRtBASADIAQQfyANEN0BIAdBEGokACAGKAIAIgEEQCAGKAIEIAFBDGxBBBCsBAsgC0EEaiECIA1BEGokAAJAIBAoAgBFBEAgDEEYaiAMQQxqKAIANgIAIAwgDCkCBDcDEAwBCyAMQRhqIBBBDGooAgA2AgAgDCAQKQIENwMQIAxBEGogDEEEaiIBELQCIAEQpQILIAJBATYCACACIAwpAxA3AgQgAkEMaiAMQRhqKAIANgIAIAxBMGokAAJAIAsoAgRFBEAgC0EANgIcIAtCgICAgMAANwIUIAAgC0EUahDsAQwBCyAAIAspAgg3AgAgAEEIaiALQRBqKAIANgIACyALQSBqJAAMAgsQ5AMiAiADQQF2IgEgASACSRsLNgIMIAggDDYCFCAGIAxJDQEgCEE4aiEBQQAhAiAHKAIEIQMCQCAHKAIIIg1FBEBBBCEEDAELIA1BDGwiAkEASCANQarVqtUAS3JFBEBB8ZTBAC0AABpBBCELIAJBBBCcBCIEDQELIAsgAhCPBAALIAQgAyACEMcEIQIgASANNgIIIAEgAjYCBCABIA02AgAgCEHQAGoiAyAHQQhqKAIANgIAIAggBykCACIcNwJIIAggBygCDCICNgJEIAggAjYCVCAIQYQBaiAIQUBrIgQpAgA3AgAgCEHgAGogAykCADcDACAIIAgpAjg3AnwgCCAcNwNYIAggDDYCmAEgCCAGIAxrNgJ4IAggBTYClAEgCCAFIAxBBHRqNgJ0IAggCEEMaiIDNgKQASAIIAhBFGoiAjYCjAEgCCADNgJwIAggAjYCbCAIIAhBCGo2AmggCEHYAGohBgJAQfiCwAAQiQMiAgRAIAEgBiACEFIMAQsQmgIoAgBBQGshAyMAQdAAayIFJAACQEH4gsAAEIkDIgsEQCADIAsoAowBQUBrRgRAIAEgBiALEFIMAgsjAEHgAWsiByQAIAsoAogBIQIgB0EBOgBsIAcgAjYCaCAHQQA2AmQgByALQYwBajYCYCAHIAZBxAAQxwQiBkEANgJEIANBGyAGEJ0CIAYoAmRBA0cEQCALIAZB5ABqEHgLIAZB8ABqIgIgBkHwABDHBBogASACQcQAahDcAiACKAIAQYCAgIB4RwRAIAIQ0QILIAZB4AFqJAAMAQsgBUEIaiICIAZBxAAQxwQaIAUgAzYCTCMAQfABayIGJAACQEEAQfyCwAAoAgARBQAiAwRAIAZBKGogAkHEABDHBBogBkEANgJsIAYgAzYCJCACKAJEQTUgBkEkaiICEJ0CIAYoAiQQ+AIgBkGIAWoiAyACQeQAEMcEGiAGQQxqIANByABqENwCIAMoAgRBgICAgHhHBEAgA0EEahDRAgsgAUEQaiAGQRxqKQIANwIAIAFBCGogBkEUaikCADcCACABIAYpAgw3AgAgBkHwAWokAAwBCyACQRxqEP0DIAIQ9gMgAkE8ahD9AyACQSRqEPYDQYCJwABBxgAgBkHvAWpByInAAEGoisAAEMMCAAsLIAVB0ABqJAALIAhBIGoiAiAEKAIANgIAIAhBMGogCEHMAGooAgA2AgAgCCAIKQI4NwMYIAggCCkCRDcDKCAIQRhqIAhBKGoiARC0AiAAQQhqIAIoAgA2AgAgACAIKQMYNwIAIAEQpQILIAhBoAFqJAAPCyAIQQA2AmggCEEBNgJcIAhBgJ7AADYCWCAIQgQ3AmAgCEHYAGpB3J/AABC0AwAL/xACCX8BfiMAQaABayIIJAAgCCABNgIIIAggBDYCEAJAAkAgCAJ/AkACQCAEIAFBAXYiC0sNACACDQEgA0UNACADQQF2DAILIAhB8ABqIAdBCGopAgA3AgAgCEEANgJYIAggBykCADcCaCMAQeAAayIJJAAgCUEIaiIHIAhB2ABqIgFBCGopAgA3AwAgCSABKQIANwMAIAlBOGoiECABQRhqKAIANgIAIAlBADoAICAJIAUgBkECdGoiDjYCGCAJIAU2AhQgCSABKQIQNwMwIAkgCTYCHCABKAIcIQ0gCSAJQSBqNgIsIAkgDTYCKCAJIAlBHGo2AiQgBSAORwRAIAlBKGohBiAJQcQAaiEMA0AgCUHYAGogECgCADYCACAJIAkpAzA3A1AgCSAFNgJcIwBBQGoiCiQAIApBEGoiBCAJQdAAaiIBQQhqKAIANgIAIAogBTYCFCAKIAEpAgA3AwggBigCACAKIAU2AhgoAgAiASgCBCEPIAogASgCCCILNgIgIAogDzYCHCAKIApBGGo2AiQgCkEAOgArIAogCkEkajYCNCAKIAs2AjggCiAKQStqNgIwIAogCkE/ajYCLCAKQSxqIgMoAgwiAUEAIAFBf0YiAhDkAyIBIAEgAkkbQQEgDyALIAMQhAFB/wFxQQJGBEAgBSgCACEBIAooAhAiAiAKKAIIRgRAIApBCGoQlgMLIAooAgwgAkECdGogATYCACAKIAJBAWo2AhALIAwgCikDCDcCACAMQQhqIgEgBCgCADYCACAKQUBrJAAgECABKAIANgIAIAkgDCkCADcDMCAFQQRqIgUgDkcNAAsLIAhBOGoiDiAJKQMANwIAIA4gDTYCHCAOIAkpAzA3AhAgDkEIaiAHKQMANwIAIA5BGGogECgCADYCACAJQeAAaiQAIwBBIGsiDyQAIA9BBGohByMAQTBrIgwkACAOQRBqIgEpAgAhESAMIAEoAggiBjYCKCAMIBE3AyAjAEEQayINJAAgDUEANgIEIA0gDEEgaiIFNgIAIA0gBSgCCCIBNgIMIA0gATYCCCMAQRBrIgskACANKAIAIgIgDSgCBCIBNgIIIAtBCGogAiANKAIIIgIgAWsiAUEAIAEgAk0bEKcDIAsoAgwhBCALKAIIIQMgDEEEaiAGQQAgBkF/RiICEOQDIgEgASACSRtBASADIAQQgAEgDRDcASALQRBqJAAgBRD4AyANQRBqJAACQCAOKAIARQRAIAxBGGogDEEMaigCADYCACAMIAwpAgQ3AxAMAQsgDEEYaiAOQQxqKAIANgIAIAwgDikCBDcDECAMQRBqIAxBBGoiARC0AiABEKQCCyAHQQE2AgAgByAMKQMQNwIEIAdBDGogDEEYaigCADYCACAMQTBqJAACQCAPKAIERQRAIA9BADYCHCAPQoCAgIDAADcCFCAAIA9BFGoQ1QEMAQsgACAPKQIINwIAIABBCGogD0EQaigCADYCAAsgD0EgaiQADAILEOQDIgIgA0EBdiIBIAEgAkkbCzYCDCAIIAs2AhQgBiALSQ0BIAhBOGoiASAHENICIAhB0ABqIgMgB0EIaigCADYCACAIIAcpAgAiETcCSCAIIAcoAgwiAjYCRCAIIAI2AlQgCEGEAWogCEFAayIEKQIANwIAIAhB4ABqIAMpAgA3AwAgCCAIKQI4NwJ8IAggETcDWCAIIAs2ApgBIAggBiALazYCeCAIIAU2ApQBIAggBSALQQJ0ajYCdCAIIAhBDGoiAzYCkAEgCCAIQRRqIgI2AowBIAggAzYCcCAIIAI2AmwgCCAIQQhqNgJoIAhB2ABqIQYCQEH4gsAAEIkDIgIEQCABIAYgAhBTDAELEJoCKAIAQUBrIQMjAEHQAGsiBSQAAkBB+ILAABCJAyILBEAgAyALKAKMAUFAa0YEQCABIAYgCxBTDAILIwBB4AFrIgckACALKAKIASECIAdBAToAbCAHIAI2AmggB0EANgJkIAcgC0GMAWo2AmAgByAGQcQAEMcEIgZBADYCRCADQRogBhCdAiAGKAJkQQNHBEAgCyAGQeQAahB4CyAGQfAAaiIDIAZB8AAQxwQaIwBBIGsiAiQAIAJBGGogA0HcAGooAgA2AgAgAkEQaiADQdQAaikCADcDACACQQhqIANBzABqKQIANwMAIAIgAykCRDcDACABIAIQ3AIgAygCAEGAgICAeEcEQCADEIIECyACQSBqJAAgBkHgAWokAAwBCyAFQQhqIgIgBkHEABDHBBogBSADNgJMIwBB8AFrIgYkAAJAQQBB/ILAACgCABEFACIDBEAgBkEoaiACQcQAEMcEGiAGQQA2AmwgBiADNgIkIAIoAkRBMCAGQSRqIgIQnQIgBigCJBD4AiAGQYgBaiIDIAJB5AAQxwQaIwBBIGsiAiQAIAJBGGogA0HgAGooAgA2AgAgAkEQaiADQdgAaikCADcDACACQQhqIANB0ABqKQIANwMAIAIgAykCSDcDACAGQQxqIAIQ3AIgAygCBEGAgICAeEcEQCADQQRqEIIECyACQSBqJAAgAUEQaiAGQRxqKQIANwIAIAFBCGogBkEUaikCADcCACABIAYpAgw3AgAgBkHwAWokAAwBCyACEPgDIAJBJGoQ+ANBgInAAEHGACAGQe8BakHIicAAQaiKwAAQwwIACwsgBUHQAGokAAsgCEEgaiICIAQoAgA2AgAgCEEwaiAIQcwAaigCADYCACAIIAgpAjg3AxggCCAIKQJENwMoIAhBGGogCEEoaiIBELQCIABBCGogAigCADYCACAAIAgpAxg3AgAgARCkAgsgCEGgAWokAA8LIAhBADYCaCAIQQE2AlwgCEGMg8AANgJYIAhCBDcCYCAIQdgAakHQhMAAELQDAAuKBAEGfyMAQZABayIDJAAgA0EYaiABQQhqKQIANwMAIANBIGogAUEQaikCADcDACADQShqIAFBGGopAgA3AwAgA0EAOgBIIANBADYCQCADIAJBjAFqNgI8IANBADoAMCADIAIoAogBNgJEIAMgASkCADcDECACQZABaiIIEIwEIQQgCEECIANBEGoQ3wIgAigCjAEiBUH4AWoQmgMiBkH/AXEiB0UgBCAGQQh2Qf8BcSAHR3FyRQRAIAVB7AFqQQEQigMLIAEoAiwhBSABKAIoIQYgASgCJCEEIAEoAiAgA0HYAGogAUE4aigCADYCACADIAEpAjA3A1AoAgBBASAEKAIAIAQoAgQgBiAFIANB0ABqEIUBIQUgAAJ/AkAgAygCQEEDRg0AIANBQGshBiACQaABaiEHAkADQAJAIANBCGogCBCoAQJ/IAMoAggiAQRAIAMoAgwMAQsDQCADQdAAaiAHENQBIAMoAlAiAUECRg0ACyABQQFrDQEgAygCVCEBIAMoAlgLIQQgAUECRiADQRBqIARGcQ0CIAQgAREAACADKAJAQQNHDQEMAwsLIAMoAkBBA0YNASACIAYQeAwBCyADQdAAaiIBIANBEGpBPBDHBBogAUEBEKACDAELIANB0ABqIANBEGpBPBDHBBogA0HwAGoQoQMLOgABIAAgBToAACADQZABaiQAC4oEAQZ/IwBBkAFrIgMkACADQRhqIAFBCGopAgA3AwAgA0EgaiABQRBqKQIANwMAIANBKGogAUEYaikCADcDACADQQA6AEggA0EANgJAIAMgAkGMAWo2AjwgA0EAOgAwIAMgAigCiAE2AkQgAyABKQIANwMQIAJBkAFqIggQjAQhBCAIQQkgA0EQahDfAiACKAKMASIFQfgBahCaAyIGQf8BcSIHRSAEIAZBCHZB/wFxIAdHcXJFBEAgBUHsAWpBARCKAwsgASgCLCEFIAEoAighBiABKAIkIQQgASgCICADQdgAaiABQThqKAIANgIAIAMgASkCMDcDUCgCAEEBIAQoAgAgBCgCBCAGIAUgA0HQAGoQhAEhBSAAAn8CQCADKAJAQQNGDQAgA0FAayEGIAJBoAFqIQcCQANAAkAgA0EIaiAIEKgBAn8gAygCCCIBBEAgAygCDAwBCwNAIANB0ABqIAcQ1AEgAygCUCIBQQJGDQALIAFBAWsNASADKAJUIQEgAygCWAshBCABQQlGIANBEGogBEZxDQIgBCABEQAAIAMoAkBBA0cNAQwDCwsgAygCQEEDRg0BIAIgBhB4DAELIANB0ABqIgEgA0EQakE8EMcEGiABQQEQoQIMAQsgA0HQAGogA0EQakE8EMcEGiADQfAAahChAws6AAEgACAFOgAAIANBkAFqJAALigQBBn8jAEGQAWsiAyQAIANBGGogAUEIaikCADcDACADQSBqIAFBEGopAgA3AwAgA0EoaiABQRhqKQIANwMAIANBADoASCADQQA2AkAgAyACQYwBajYCPCADQQA6ADAgAyACKAKIATYCRCADIAEpAgA3AxAgAkGQAWoiCBCMBCEEIAhBAiADQRBqEN8CIAIoAowBIgVB+AFqEJoDIgZB/wFxIgdFIAQgBkEIdkH/AXEgB0dxckUEQCAFQewBakEBEIoDCyABKAIsIQUgASgCKCEGIAEoAiQhBCABKAIgIANB2ABqIAFBOGooAgA2AgAgAyABKQIwNwNQKAIAQQAgBCgCACAEKAIEIAYgBSADQdAAahCFASEFIAACfwJAIAMoAkBBA0YNACADQUBrIQYgAkGgAWohBwJAA0ACQCADQQhqIAgQqAECfyADKAII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QdCEwAAQtAMAC0GwncAAQR5B0J3AABCcAwAL0QMBBn8CQAJAAkAgAUECSQ0AIAFBAXYhBQNAAkAgBUEBayIFQQF0IgRBAXIiAiABTw0AIAUhAwNAIARBAmoiBCABSQRAIAQgAiAAIAJBAnRqKAIAIAAgBEECdGooAgBJGyECCyABIANNDQUgASACTQ0EIAAgA0ECdGoiBigCACIHIAAgAkECdGoiBCgCACIDTw0BIAYgAzYCACAEIAc2AgAgAiEDIAJBAXQiBEEBciICIAFJDQALCyAFDQALIAFBAWshAwJAAkADQCAAKAIAIQQgACAAIANBAnRqIgIoAgA2AgAgAiAENgIAIANBAkkNA0EAIQVBASECQQAhBANAIAVBAmoiBSADSQRAIAUgAiAAIAJBAnRqKAIAIAAgBUECdGooAgBJGyECCyADIARNDQIgAiADTw0DIAAgBEECdGoiBigCACIHIAAgAkECdGoiBSgCACIESQRAIAYgBDYCACAFIAc2AgAgAiEEIAJBAXQiBUEBciICIANJDQELCyADQQFrIgMgAUkNAAsgAyABQeCRwAAQ1QIACyAEIANB8JHAABDVAgALIAIgA0GAksAAENUCAAsPCyACIAFBgJLAABDVAgALIAMgAUHwkcAAENUCAAv9AwEIfyMAQYABayIDJAAgA0EoaiABQQhqKQIANwIAIANBMGogAUEQaikCADcCACADQQA6AEQgA0EANgI8IANBADYCECADIAIoAogBNgJAIAMgAkGMAWo2AjggAyABKQIANwIgIAJBkAFqIggQjAQhBCAIQQcgA0EQahDfAiACKAKMASIFQfgBahCaAyIGQf8BcSIHRSAEIAZBCHZB/wFxIAdHcXJFBEAgBUHsAWpBARCKAwsgA0HIAGogASgCGCgCAEEBIAEoAhwiBCgCACAEKAIEIAEoAiAgASgCJCABKAIoEGMgAygCUCEFIAMoAkwhBiADKAJIIQcCQAJAIAMoAjxBA0YNACADQTxqIQkgAkGgAWohCgJAA0ACQCADQQhqIAgQqAECfyADKAIIIgEEQCADKAIMDAELA0AgA0HIAGogChDUASADKAJIIgFBAkYNAAsgAUEBaw0BIAMoAkwhASADKAJQCyEEIAFBB0YgA0EQaiAERnENAiAEIAERAAAgAygCPEEDRw0BDAMLCyADKAI8QQNG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R3FyRQRAIAVB7AFqQQEQigMLIANByABqIAEoAhgoAgBBACABKAIcIgQoAgAgBCgCBCABKAIgIAEoAiQgASgCKBBjIAMoAlAhBSADKAJMIQYgAygCSCEHAkACQCADKAI8QQNGDQAgA0E8aiEJIAJBoAFqIQoCQANAAkAgA0EIaiAIEKgBAn8gAygCCCIBBEAgAygCDAwBCwNAIANByABqIAoQ1AEgAygCSCIBQQJGDQALIAFBAWsNASADKAJMIQEgAygCUAshBCABQQdGIANBEGogBEZxDQIgBCABEQAAIAMoAjxBA0cNAQwDCwsgAygCPEEDRg0BIAIgCRB4DAELIANByABqIgEgA0EQakE4EMcEGiAAQQxqIAFBABCHAwwBCyADQcgAaiIBIANBEGpBOBDHBBogAEEMaiABEPACCyAAIAU2AgggACAGNgIEIAAgBzYCACADQYABaiQAC/0DAQh/IwBBgAFrIgMkACADQShqIAFBCGopAgA3AgAgA0EwaiABQRBqKQIANwIAIANBADoARCADQQA2AjwgA0EANgIQIAMgAigCiAE2AkAgAyACQYwBajYCOCADIAEpAgA3AiAgAkGQAWoiCBCMBCEEIAhBCCADQRBqEN8CIAIoAowBIgVB+AFqEJoDIgZB/wFxIgdFIAQgBkEIdkH/AXEgB0dxckUEQCAFQewBakEBEIoDCyADQcgAaiABKAIYKAIAQQAgASgCHCIEKAIAIAQoAgQgASgCICABKAIkIAEoAigQZCADKAJQIQUgAygCTCEGIAMoAkghBwJAAkAgAygCPEEDRg0AIANBPGohCSACQaABaiEKAkADQAJAIANBCGogCBCoAQJ/IAMoAggiAQRAIAMoAgwMAQsDQCADQcgAaiAKENQBIAMoAkgiAUECRg0ACyABQQFrDQEgAygCTCEBIAMoAlALIQQgAUEIRiADQRBqIARGcQ0CIAQgAREAACADKAI8QQNHDQEMAwsLIAMoAjxBA0YNASACIAkQeAwBCyADQcgAaiIBIANBEGpBOBDHBBogAEEMaiABQQAQggMMAQsgA0HIAGoiASADQRBqQTgQxwQaIABBDGogARDwAgsgACAFNgIIIAAgBjYCBCAAIAc2AgAgA0GAAWokAAv9AwEIfyMAQYABayIDJAAgA0EoaiABQQhqKQIANwIAIANBMGogAUEQ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QQA6AERBMSABQQRqIgIQnQIgASgCBBD4AiABQdAAaiACQcwAEMcEGiABIAFBkAFqEJIDIAEtAAAiAkEDRg0AIAEtAAEhBSAEIAI6AAAgBCAFOgABIAFBoAFqJAAMAQtBgInAAEHGACABQZ8BakHIicAAQaiKwAAQwwIACyADLQAJIQEgAy0ACAs6AAAgACABOgABIANB4ABqJAAgAC0AACEBIAAtAAELIQIgByABOgAAIAcgAjoAASAAQRBqJAAgBy0AASAHLQAAIgAgAEECRhshCQsgB0HQAGokACAJDwsgB0EANgIkIAdBATYCGCAHQYyDwAA2AhQgB0IENwIcIAdBFGpB0ITAABC0AwAL9AIBBH8CQAJAAkACQAJAAkAgByAIVgRAIAcgCH0gCFgNAQJAIAYgByAGfVQgByAGQgGGfSAIQgGGWnFFBEAgBiAIVg0BDAgLIAIgA0kNAwwGCyAHIAYgCH0iBn0gBlYNBiACIANJDQMgASADaiABIQsCQANAIAMgCUYNASAJQQFqIQkgC0EBayILIANqIgotAABBOUYNAAsgCiAKLQAAQQFqOgAAIAMgCWtBAWogA08NBSAKQQFqQTAgCUEBaxDKBBoMBQsCf0ExIANFDQAaIAFBMToAAEEwIANBAUYNABogAUEBakEwIANBAWsQygQaQTALIARBAWrBIgQgBcFMIAIgA01yDQQ6AAAgA0EBaiEDDAQLIABBADYCAA8LIABBADYCAA8LIAMgAkGg9MAAEK8EAAsgAyACQYD0wAAQrwQACyACIANPDQAgAyACQZD0wAAQrwQACyAAIAQ7AQggACADNgIEIAAgATYCAA8LIABBADYCAAuGBAEFfyMAQdAAayICJAAgACgCACEBIABBADYCAAJAIAEEQCACQcQAaiAAQRxqKQIANwIAIAJBPGogAEEUaikCADcCACACQTRqIABBDGopAgA3AgAgAiAAKQIENwIsIAIgATYCKCACQQxqIQMjAEEwayIBJAAgAUEMaiACQShqIgRBJBDHBBpBgIDAABCJAyIFRQRAQYSAwABBNkGwgcAAEJwDAAsgAUEMaiAEIAUQcyADQQA2AgAgA0EUaiABQRxqKQIANwIAIANBDGogAUEUaikCADcCACADIAEpAgw3AgQgAUEwaiQAQQIhASACKAIUIQMgAigCECEEIAIoAgxF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AgAgA0EMaiABQQxqKQIANwIAIAMgASkCBDcCBCABQTBqJABBAiEBIAIoAgwhAyACKAIIIQQgAigCBEUEQCACQShqIAJBGGopAgA3AwAgAiACKQIQNwMgQQEhAQsgAEEsahDSAyAAIAM2AjQgACAENgIwIAAgATYCLCAAIAIpAyA3AjggAEFAayACQShqKQMANwIAIAAoAkghAQJAIAAtAFRFBEAgASgCACAAKAJMIABBAzYCTEECRw0BQUBrIAAoAlAQngQMAQsgASgCACIBIAEoAgAiA0EBajYCACADQQBIDQIgACgCTCAAQQM2AkwgAiABNgIgQQJGBEAgAUFAayAAKAJQEJ4ECyACKAIgIgAgACgCACIAQQFrNgIAIABBAUcNACACQSBqEPUBCyACQdAAaiQADwtB6ILAABCyBAALAAvbAwEFfyMAQdAAayICJAAgACgCACEBIABBADYCAAJAIAEEQCACQSRqIABBBGpBKBDHBBogAiABNgIgIAJBBGohAyMAQTBrIgEkACABQQRqIAJBIGoiBEEsEMcEGkGAgMAAEIkDIgVFBEBBhIDAAEE2QbCBwAAQnAMACyABQQRqIAQgBRBrIANBADYCACADQRRqIAFBFGopAgA3AgAgA0EMaiABQQxqKQIANwIAIAMgASkCBDcCBCABQTBqJABBAiEBIAIoAgwhAyACKAIIIQQgAigCBEUEQCACQShqIAJBGGopAgA3AwAgAiACKQIQNwMgQQEhAQsgAEEsahDTAyAAIAM2AjQgACAENgIwIAAgATYCLCAAIAIpAyA3AjggAEFAayACQShqKQMANwIAIAAoAkghAQJAIAAtAFRFBEAgASgCACAAKAJMIABBAzYCTEECRw0BQUBrIAAoAlAQngQMAQsgASgCACIBIAEoAgAiA0EBajYCACADQQBIDQIgACgCTCAAQQM2AkwgAiABNgIgQQJGBEAgAUFAayAAKAJQEJ4ECyACKAIgIgAgACgCACIAQQFrNgIAIABBAUcNACACQSBqEPUBCyACQdAAaiQADwtB6ILAABCyBAALAAvbAwEFfyMAQdAAayICJAAgACgCACEBIABBADYCAAJAIAEEQCACQSRqIABBBGpBKBDHBBogAiABNgIgIAJBBGohAyMAQTBrIgEkACABQQRqIAJBIGoiBEEsEMcEGkGAgMAAEIkDIgVFBEBBhIDAAEE2QbCBwAAQnAMACyABQQRqIAQgBRBqIANBADYCACADQRRqIAFBFGopAgA3AgAgA0EMaiABQQxqKQIANwIAIAMgASkCBDcCBCABQTBqJABBAiEBIAIoAgwhAyACKAIIIQQgAigCBEUEQCACQShqIAJBGGopAgA3AwAgAiACKQIQNwMgQQEhAQsgAEEsahDTAyAAIAM2AjQgACAENgIwIAAgATYCLCAAIAIpAyA3AjggAEFAayACQShqKQMANwIAIAAoAkghAQJAIAAtAFRFBEAgASgCACAAKAJMIABBAzYCTEECRw0BQUBrIAAoAlAQngQMAQsgASgCACIBIAEoAgAiA0EBajYCACADQQBIDQIgACgCTCAAQQM2AkwgAiABNgIgQQJGBEAgAUFAayAAKAJQEJ4ECyACKAIgIgAgACgCACIAQQFrNgIAIABBAUcNACACQSBqEPUBCyACQdAAaiQADwtB6ILAABCyBAALAAvcAwEFfyMAQeAAayICJAAgACgCACEBIABBADYCAAJAIAEEQCACQSRqIABBBGpBOBDHBBogAiABNgIgIAJBBGohAyMAQUBqIgEkACABQQRqIAJBIGoiBEE8EMcEGkGAgMAAEIkDIgVFBEBBhIDAAEE2QbCBwAAQnAMACyABQQRqIAQgBRBBIANBADYCACADQRRqIAFBFGopAgA3AgAgA0EMaiABQQxqKQIANwIAIAMgASkCBDcCBCABQUBrJABBAiEBIAIoAgwhAyACKAIIIQQgAigCBEUEQCACQShqIAJBGGopAgA3AwAgAiACKQIQNwMgQQEhAQsgAEE8ahDUAyAAIAM2AkQgACAENgJAIAAgATYCPCAAIAIpAyA3AkggAEHQAGogAkEoaikDADcCACAAKAJYIQECQCAALQBkRQRAIAEoAgAgACgCXCAAQQM2AlxBAkcNAUFAayAAKAJgEJ4EDAELIAEoAgAiASABKAIAIgNBAWo2AgAgA0EASA0CIAAoAlwgAEEDNgJcIAIgATYCIEECRgRAIAFBQGsgACgCYBCeBAsgAigCICIAIAAoAgAiAEEBazYCACAAQQFHDQAgAkEgahD1AQsgAkHgAGokAA8LQeiCwAAQsgQACwAL2wMBBX8jAEHQAGsiAiQAIAAoAgAhASAAQQA2AgACQCABBEAgAkEkaiAAQQRqQSgQxwQaIAIgATYCICACQQRqIQMjAEEwayIBJAAgAUEEaiACQSBqIgRBLBDHBBpBgIDAABCJAyIFRQRAQYSAwABBNkGwgcAAEJwDAAsgAUEEaiAEIAUQaSADQQA2AgAgA0EUaiABQRRqKQIANwIAIANBDGogAUEMaikCADcCACADIAEpAgQ3AgQgAUEwaiQAQQIhASACKAIMIQMgAigCCCEEIAIoAgRFBEAgAkEoaiACQRhqKQIANwMAIAIgAikCEDcDIEEBIQELIABBLGoQ0gMgACADNgI0IAAgBDYCMCAAIAE2AiwgACACKQMgNwI4IABBQGsgAkEoaikDADcCACAAKAJIIQECQCAALQBURQRAIAEoAgAgACgCTCAAQQM2AkxBAkcNAUFAayAAKAJQEJ4EDAELIAEoAgAiASABKAIAIgNBAWo2AgAgA0EASA0CIAAoAkwgAEEDNgJMIAIgATYCIEECRgRAIAFBQGsgACgCUBCeBAsgAigCICIAIAAoAgAiAEEBazYCACAAQQFHDQAgAkEgahD1AQsgAkHQAGokAA8LQeiCwAAQsgQACwAL3AMBBX8jAEHgAGsiAiQAIAAoAgAhASAAQQA2AgACQCABBEAgAkEkaiAAQQRqQTgQxwQaIAIgATYCICACQQRqIQMjAEFAaiIBJAAgAUEEaiACQSBqIgRBPBDHBBpBgIDAABCJAyIFRQRAQYSAwABBNkGwgcAAEJwDAAsgAUEEaiAEIAUQRSADQQA2AgAgA0EUaiABQRRqKQIANwIAIANBDGogAUEMaikCADcCACADIAEpAgQ3AgQgAUFAayQAQQIhASACKAIMIQMgAigCCCEEIAIoAgRFBEAgAkEoaiACQRhqKQIANwMAIAIgAikCEDcDIEEBIQELIABBPGoQ0wMgACADNgJEIAAgBDYCQCAAIAE2AjwgACACKQMgNwJIIABB0ABqIAJBKGopAwA3AgAgACgCWCEBAkAgAC0AZEUEQCABKAIAIAAoAlwgAEEDNgJcQQJHDQFBQGsgACgCYBCeBAwBCyABKAIAIgEgASgCACIDQQFqNgIAIANBAEgNAiAAKAJcIABBAzYCXCACIAE2AiBBAkYEQCABQUBrIAAoAmAQngQLIAIoAiAiACAAKAIAIgBBAWs2AgAgAEEBRw0AIAJBIGoQ9QELIAJB4ABqJAAPC0HogsAAELIEAAsAC88KAgN+AX8jAEEgayIFJAAgBSAAKQMANwMYIAUgACkDCDcDECAFIAApAxg3AwggBSAAKQMQNwMAIAUgATUCACIEIAEpAxAgASkDCCAFKQMQIgIgATUCGIUiA0LYotHvwqnlvy1+hSADQjiGIANCgP4Dg0IohoQgA0KAgPwHg0IYhiADQoCAgPgPg0IIhoSEIAJCCIhCgICA+A+DIAJCGIhCgID8B4OEIAJCKIhCgP4DgyACQjiIhISEQtKBqpur+oLXp39+IgJCOIYgAkKA/gODQiiGhCACQoCA/AeDQhiGIAJCgICA+A+DQgiGhIQgAkIIiEKAgID4D4MgAkIYiEKAgPwHg4QgAkIoiEKA/gODIAJCOIiEhISFIgJC2KLR78Kp5b8tfoUgAkI4hiACQoD+A4NCKIaEIAJCgID8B4NCGIYgAkKAgID4D4NCCIaEhCACQgiIQoCAgPgPgyACQhiIQoCA/AeDhCACQiiIQoD+A4MgAkI4iISEhELSgaqbq/qC16d/fiICQjiGIAJCgP4Dg0IohoQgAkKAgPwHg0IYhiACQoCAgPgPg0IIhoSEIAJCCIhCgICA+A+DIAJCGIhCgID8B4OEIAJCKIhCgP4DgyACQjiIhISEhSICQtii0e/CqeW/LX6EIAJCOIYgAkKA/gODQiiGhCACQoCA/AeDQhiGIAJCgICA+A+DQgiGhIQgAkIIiEKAgID4D4MgAkIYiEKAgPwHg4QgAkIoiEKA/gODIAJCOIiEhIRC0oGqm6v6gtenf34iAkI4hiACQoD+A4NCKIaEIAJCgID8B4NCGIYgAkKAgID4D4NCCIaEhCACQgiIQoCAgPgPgyACQhiIQoCA/AeDhCACQiiIQoD+A4MgAkI4iISEhIUiAkI4hiACQoD+A4NCKIaEIAJCgID8B4NCGIYgAkKAgID4D4NCCIaEhCACQgiIQoCAgPgPgyACQhiIQoCA/AeDhCACQiiIQoD+A4MgAkI4iISEhELSgaqbq/qC16d/fiIDQjiGIANCgP4Dg0IohoQgA0KAgPwHg0IYhiADQoCAgPgPg0IIhoSEIANCCIhCgICA+A+DIANCGIhCgID8B4OEIANCKIhCgP4DgyADQjiIhISEIAJC2KLR78Kp5b8tfoUiAjcDECAEUEUEQCAFIAIgATUCBIUiA0I4hiADQoD+A4NCKIaEIANCgID8B4NCGIYgA0KAgID4D4NCCIaEhCACQgiIQoCAgPgPgyACQhiIQoCA/AeDhCACQiiIQoD+A4MgAkI4iISEhELSgaqbq/qC16d/fiICQjiGIAJCgP4Dg0IohoQgAkKAgPwHg0IYhiACQoCAgPgPg0IIhoSEIAJCCIhCgICA+A+DIAJCGIhCgID8B4OEIAJCKIhCgP4DgyACQjiIhISEIANC2KLR78Kp5b8tfoU3AxALIAUpAxAhAiAFKQMYIQMgBUEgaiQAIAIgA0I4hiADQoD+A4NCKIaEIANCgID8B4NCGIYgA0KAgID4D4NCCIaEhCADQgiIQoCAgPgPgyADQhiIQoCA/AeDhCADQiiIQoD+A4MgA0I4iISEhH4gAkI4hiACQoD+A4NCKIaEIAJCgID8B4NCGIYgAkKAgID4D4NCCIaEhCACQgiIQoCAgPgPgyACQhiIQoCA/AeDhCACQiiIQoD+A4MgAkI4iISEhCADQn+FfiIDQjiGIANCgP4Dg0IohoQgA0KAgPwHg0IYhiADQoCAgPgPg0IIhoSEIANCCIhCgICA+A+DIANCGIhCgID8B4OEIANCKIhCgP4DgyADQjiIhISEhSACiacLlQgBE38jAEEQayIRJAACQAJAIAIEQCACIANNDQEgASgCACEEIAEgASADQQJ0aiIDKAIANgIAIAMgBDYCACARIAEoAgAiDzYCDCABQQRqIQggAkEBayIERQ0CIAghAwNAIAMoAgAgD08NAyADQQRqIQMgBCALQQFqIgtHDQALIAQhCwwCC0EAQQBBkJLAABDVAgALIAMgAkGQksAAENUCAAsgAkECdCABakEEayEDA0AgCyAEIgVPIhRFBEAgBEEBayEEIAMoAgAgA0EEayEDIA9PDQELCwJAIAUgC08EQCMAQYACayIMJAAgCCALQQJ0aiISIAUgC2tBAnRqIQggEUEMaigCACETQYABIQ1BACEFQYABIQ4gEiEDA0ACQCAIIANrIgZBhAhJIhVFDQAgBkECdiEEIAUgCUkiECAHIApJciIWBEAgBEGAAWsiBiANIBAbIQ0gDiAGIAQgFhsgEBshDgwBCyAEIAZBA3YiDmshDQsCQCAFIAlHDQAgDkUEQCAMIgkhBQwBC0EAIQQgDCIFIQkgAyEGA0AgCSAEOgAAIAkgBigCACATT2ohCSAGQQRqIQYgDiAEQQFqIgRHDQALCwJAIAcgCkcNACANRQRAIAxBgAFqIgohBwwBCyAIQQRrIQRBACEGIAxBgAFqIgchCgNAIAogBjoAACAKIAQoAgAgE0lqIQogBEEEayEEIA0gBkEBaiIGRw0ACwsgCSAFayIEIAogB2siBiAEIAZJGyIEBEAgAyAFLQAAQQJ0aiIGKAIAIRAgBiAIIActAABBf3NBAnRqKAIANgIAIARBAUcEQCAEQQFrIQQDQCAIIActAABBf3NBAnRqIAMgBS0AAUECdGooAgA2AgAgAyAFLQABQQJ0aiAIIActAAFBf3NBAnRqKAIANgIAIAdBAWohByAFQQFqIQUgBEEBayIEDQALCyAIIActAABBf3NBAnRqIBA2AgAgB0EBaiEHIAVBAWohBQsgCEEAIA1rQQAgByAKRhtBAnRqIQggAyAOQQAgBSAJRhtBAnRqIQMgFUUNAAsCQCAFIAlJBEAgCCEEA0AgAyAJQQFrIgktAABBAnRqIggoAgAhBiAIIARBBGsiBCgCADYCACAEIAY2AgAgBSAJSQ0ACwwBCyAHIApPBEAgAyEEDAELIAMhBANAIAQoAgAhAyAEIAggCkEBayIKLQAAQX9zQQJ0aiIFKAIANgIAIAUgAzYCACAEQQRqIQQgByAKSQ0ACwsgDEGAAmokACAEIBJrQQJ2IAEgDzYCACALaiIDIAJPDQEgASABIANBAnRqIgEoAgA2AgAgASAPNgIAIAAgFDoABCAAIAM2AgAgEUEQaiQADwsgCyAFQaCSwAAQsQQACyADIAJBsJLAABDVAgAL4QMCCH8BfiMAQTBrIgIkACAAKAIAIQEgAEEANgIAAkAgAQRAIAJBLGogAEEcaigCADYCACACQSRqIABBFGopAgA3AgAgAkEcaiAAQQxqKQIANwIAIAIgACkCBDcCFCACIAE2AhAjAEEgayIBJAAgAkEQaiIDKAIQIQUgAygCDCEGIAMoAgghBCADKAIAIQcgAygCBCEIIAFBGGogA0EcaigCADYCACABIAMpAhQ3AxAgAUEEaiAHKAIAIAgoAgBrQQEgBCgCACAEKAIEIAYgBSABQRBqEFkgASkCBCEJIAIgASgCDDYCDCACIAk3AgQgAkEANgIAIAFBIGokACACKAIAIQEgAikCBCEJIAIoAgwhAyAAQSBqEOoDIAAgAzYCLCAAIAk3AiQgAEECQQEgARs2AiAgACgCMCEBAkAgAC0APEUEQCABKAIAIAAoAjQgAEEDNgI0QQJHDQFBQGsgACgCOBCeBAwBCyABKAIAIgEgASgCACIDQQFqNgIAIANBAEgNAiAAKAI0IABBAzYCNCACIAE2AhBBAkYEQCABQUBrIAAoAjgQngQLIAIoAhAiACAAKAIAIgBBAWs2AgAgAEEBRw0AIAJBEGoQ9QELIAJBMGokAA8LQeiCwAAQsgQACwAL4QMCCH8BfiMAQTBrIgIkACAAKAIAIQEgAEEANgIAAkAgAQRAIAJBLGogAEEcaigCADYCACACQSRqIABBFGopAgA3AgAgAkEcaiAAQQxqKQIANwIAIAIgACkCBDcCFCACIAE2AhAjAEEgayIBJAAgAkEQaiIDKAIQIQUgAygCDCEGIAMoAgghBCADKAIAIQcgAygCBCEIIAFBGGogA0EcaigCADYCACABIAMpAhQ3AxAgAUEEaiAHKAIAIAgoAgBrQQEgBCgCACAEKAIEIAYgBSABQRBqEFcgASkCBCEJIAIgASgCDDYCDCACIAk3AgQgAkEANgIAIAFBIGokACACKAIAIQEgAikCBCEJIAIoAgwhAyAAQSBqEOkDIAAgAzYCLCAAIAk3AiQgAEECQQEgARs2AiAgACgCMCEBAkAgAC0APEUEQCABKAIAIAAoAjQgAEEDNgI0QQJHDQFBQGsgACgCOBCeBAwBCyABKAIAIgEgASgCACIDQQFqNgIAIANBAEgNAiAAKAI0IABBAzYCNCACIAE2AhBBAkYEQCABQUBrIAAoAjgQngQLIAIoAhAiACAAKAIAIgBBAWs2AgAgAEEBRw0AIAJBEGoQ9QELIAJBMGokAA8LQeiCwAAQsgQACwAL4QMCCH8BfiMAQTBrIgIkACAAKAIAIQEgAEEANgIAAkAgAQRAIAJBLGogAEEcaigCADYCACACQSRqIABBFGopAgA3AgAgAkEcaiAAQQxqKQIANwIAIAIgACkCBDcCFCACIAE2AhAjAEEgayIBJAAgAkEQaiIDKAIQIQUgAygCDCEGIAMoAgghBCADKAIAIQcgAygCBCEIIAFBGGogA0EcaigCADYCACABIAMpAhQ3AxAgAUEEaiAHKAIAIAgoAgBrQQEgBCgCACAEKAIEIAYgBSABQRBqEFogASkCBCEJIAIgASgCDDYCDCACIAk3AgQgAkEANgIAIAFBIGokACACKAIAIQEgAikCBCEJIAIoAgwhAyAAQSBqEOoDIAAgAzYCLCAAIAk3AiQgAEECQQEgARs2AiAgACgCMCEBAkAgAC0APEUEQCABKAIAIAAoAjQgAEEDNgI0QQJHDQFBQGsgACgCOBCeBAwBCyABKAIAIgEgASgCACIDQQFqNgIAIANBAEgNAiAAKAI0IABBAzYCNCACIAE2AhBBAkYEQCABQUBrIAAoAjgQngQLIAIoAhAiACAAKAIAIgBBAWs2AgAgAEEBRw0AIAJBEGoQ9QELIAJBMGokAA8LQeiCwAAQsgQACwAL4QMCCH8BfiMAQTBrIgIkACAAKAIAIQEgAEEANgIAAkAgAQRAIAJBLGogAEEcaigCADYCACACQSRqIABBFGopAgA3AgAgAkEcaiAAQQxqKQIANwIAIAIgACkCBDcCFCACIAE2AhAjAEEgayIBJAAgAkEQaiIDKAIQIQUgAygCDCEGIAMoAgghBCADKAIAIQcgAygCBCEIIAFBGGogA0EcaigCADYCACABIAMpAhQ3AxAgAUEEaiAHKAIAIAgoAgBrQQEgBCgCACAEKAIEIAYgBSABQRBqEFggASkCBCEJIAIgASgCDDYCDCACIAk3AgQgAkEANgIAIAFBIGokACACKAIAIQEgAikCBCEJIAIoAgwhAyAAQSBqEOgDIAAgAzYCLCAAIAk3AiQgAEECQQEgARs2AiAgACgCMCEBAkAgAC0APEUEQCABKAIAIAAoAjQgAEEDNgI0QQJHDQFBQGsgACgCOBCeBAwBCyABKAIAIgEgASgCACIDQQFqNgIAIANBAEgNAiAAKAI0IABBAzYCNCACIAE2AhBBAkYEQCABQUBrIAAoAjgQngQLIAIoAhAiACAAKAIAIgBBAWs2AgAgAEEBRw0AIAJBEGoQ9QELIAJBMGokAA8LQeiCwAAQsgQACwALwAMBCH8jAEHQAGsiAiQAIAAoAgAhASAAQQA2AgACQCABBEAgAkEYaiAAQQRqQTgQxwQaIAIgATYCFCACQQxqIQMjAEFAaiIBJAAgAkEUaiIELwEAIQUgAUEEakECciAEQQJqQToQxwQaIAEgBTsBBEGAgMAAEIkDIgRFBEBBhIDAAEE2QbCBwAAQnAMACyABIAFBBGogBBBgIAMgAS8BADsBBCADQQA2AgAgAUFAayQAAn8gAigCDCIBRQRAIAItABEhBiACLQAQIQdBAQwBCyACKAIQIQhBAgshAyAALQA8QQJPBEAgAEFAaxDRAwsgACAINgJEIAAgATYCQCAAIAY6AD4gACAHOgA9IAAgAzoAPCAAKAJIIQECQCAALQBURQRAIAEoAgAgACgCTCAAQQM2AkxBAkcNAUFAayAAKAJQEJ4EDAELIAEoAgAiASABKAIAIgNBAWo2AgAgA0EASA0CIAAoAkwgAEEDNgJMIAIgATYCFEECRgRAIAFBQGsgACgCUBCeBAsgAigCFCIAIAAoAgAiAEEBazYCACAAQQFHDQAgAkEUahD1AQsgAkHQAGokAA8LQeiCwAAQsgQACwALwAMBCH8jAEHQAGsiAiQAIAAoAgAhASAAQQA2AgACQCABBEAgAkEYaiAAQQRqQTgQxwQaIAIgATYCFCACQQxqIQMjAEFAaiIBJAAgAkEUaiIELwEAIQUgAUEEakECciAEQQJqQToQxwQaIAEgBTsBBEGAgMAAEIkDIgRFBEBBhIDAAEE2QbCBwAAQnAMACyABIAFBBGogBBBfIAMgAS8BADsBBCADQQA2AgAgAUFAayQAAn8gAigCDCIBRQRAIAItABEhBiACLQAQIQdBAQwBCyACKAIQIQhBAgshAyAALQA8QQJPBEAgAEFAaxDRAwsgACAINgJEIAAgATYCQCAAIAY6AD4gACAHOgA9IAAgAzoAPCAAKAJIIQECQCAALQBURQRAIAEoAgAgACgCTCAAQQM2AkxBAkcNAUFAayAAKAJQEJ4EDAELIAEoAgAiASABKAIAIgNBAWo2AgAgA0EASA0CIAAoAkwgAEEDNgJMIAIgATYCFEECRgRAIAFBQGsgACgCUBCeBAsgAigCFCIAIAAoAgAiAEEBazYCACAAQQFHDQAgAkEUahD1AQsgAkHQAGokAA8LQeiCwAAQsgQACwAL0QIBCH8CQCABKAIAIgUoAoQBIgQgBSgCgAFrIgZBAEwNAAJAAkACQCABLQAMRQRAIAUgBSgCgAEiA0EBajYCgAEgAyAEa0EATg0BIAEoAggiBEEEbSEHIAEoAgQgBEEBayADcUEDdGoiAigCBCEFIAIoAgAhAiAEQcEASSAGIAdKcg0EIAEgBEEBdhDiAQwECyAFIARBAWsiAzYChAEgAyABKAIAIgYoAoABIghrIglBAEgNASABKAIEIAEoAggiB0EBayADcUEDdGoiAigCBCEFIAIoAgAhAiADIAhGDQIgB0HBAEkgB0EEbSAJTHINAyABIAdBAXYQ4gEMAwsgASgCACADNgKAAQwCCyAGIAQ2AoQBDAELIAYgBCAGKAKAASIGIAMgBkYiAxs2AoABIAEoAgAgBDYChAEgAkEAIAMbIQILIAAgBTYCBCAAIAI2AgALhQQCCn8BfiMAQUBqIgMkACAAKAIQIQEgAEGAgICAeDYCEAJAIAFBgICAgHhHBEAgA0E4aiAAQSxqKQIANwIAIANBMGogAEEkaikCADcCACADQShqIABBHGopAgA3AgAgAyAAKQIUNwIgIAMgATYCHCMAQSBrIgEkACABQQhqIgUgA0EcaiICQQhqIgYpAgA3AwAgASACKQIANwMAIAIoAiAhByACKAIcIQggAigCGCEEIAIoAhAhCSACKAIUIQogAUEYaiAGKQIANwMAIAEgAikCADcDECABIAkoAgAgCigCAGtBASAEKAIAIAQoAgQgCCAHIAFBEGoQXSADQQxqIgJBDGogBSgCADYCACACIAEpAwA3AgQgAkEANgIAIAFBIGokACADKAIMIQEgAykCECELIAMoAhghAiAAEOsDIAAgAjYCDCAAIAs3AgQgAEECQQEgARs2AgAgACgCNCEBAkAgAC0AQEUEQCABKAIAIAAoAjggAEEDNgI4QQJHDQFBQGsgACgCPBCeBAwBCyABKAIAIgEgASgCACICQQFqNgIAIAJBAEgNAiAAKAI4IABBAzYCOCADIAE2AhxBAkYEQCABQUBrIAAoAjwQngQLIAMoAhwiACAAKAIAIgBBAWs2AgAgAEEBRw0AIANBHGoQ9QELIANBQGskAA8LQeiCwAAQsgQACwALhQQCCn8BfiMAQUBqIgMkACAAKAIQIQEgAEGAgICAeDYCEAJAIAFBgICAgHhHBEAgA0E4aiAAQSxqKQIANwIAIANBMGogAEEkaikCADcCACADQShqIABBHGopAgA3AgAgAyAAKQIUNwIgIAMgATYCHCMAQSBrIgEkACABQQhqIgUgA0EcaiICQQhqIgYpAgA3AwAgASACKQIANwMAIAIoAiAhByACKAIcIQggAigCGCEEIAIoAhAhCSACKAIUIQog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akEkEMcEGiACIAE2AgggAkEIakGAgMAAEIkDIgFFBEBBhIDAAEE2QbCBwAAQnAMACyABEIIBIAJBADYCAEECQQEgAigCACIEGyEDIAIoAgQhASAAKAIoQQJPBEAgAEEsahDRAwsgACABNgIwIAAgBDYCLCAAIAM2AiggACgCNCEBAkAgAC0AQEUEQCABKAIAIAAoAjggAEEDNgI4QQJHDQFBQGsgACgCPBCeBAwBCyABKAIAIgMgAygCACIBQQFqNgIAIAFBAEgNAiAAKAI4IABBAzYCOCACIAM2AghBAkYEQCADQUBrIAAoAjwQngQLIAIoAggiACAAKAIAIgBBAWs2AgAgAEEBRw0AIAJBCGoQ9QELIAJBMGokAA8LQeiCwAAQsgQACwAL0gIBBH8jAEEwayICJAAgACgCACEBIABBADYCAAJAIAEEQCACQQxqIABBBGpBJBDHBBogAiABNgIIIAJBCGpBgIDAABCJAyIBRQRAQYSAwABBNkGwgcAAEJwDAAsgARCBASACQQA2AgBBAkEBIAIoAgAiBBshAyACKAIEIQEgACgCKEECTwRAIABBLGoQ0QMLIAAgATYCMCAAIAQ2AiwgACADNgIoIAAoAjQhAQJAIAAtAEBFBEAgASgCACAAKAI4IABBAzYCOEECRw0BQUBrIAAoAjwQngQMAQsgASgCACIDIAMoAgAiAUEBajYCACABQQBIDQIgACgCOCAAQQM2AjggAiADNgIIQQJGBEAgA0FAayAAKAI8EJ4ECyACKAIIIgAgACgCACIAQQFrNgIAIABBAUcNACACQQhqEPUBCyACQTBqJAAPC0HogsAAELIEAAsAC7UCAQd/IwBBEGsiAiQAQQEhBwJAAkAgASgCFCIEQScgASgCGCgCECIFEQEADQAgAiAAKAIAQYECEDoCQCACLQAAQYABRgRAIAJBCGohBkGAASEDA0ACQCADQYABRwRAIAItAAoiACACLQALTw0EIAIgAEEBajoACiAAQQpPDQYgACACai0AACEBDAELQQAhAyAGQQA2AgAgAigCBCEBIAJCADcDAAsgBCABIAURAQBFDQALDAILQQogAi0ACiIBIAFBCk0bIQAgASACLQALIgMgASADSxshBgNAIAEgBkYNASACIAFBAWoiAzoACiAAIAFGDQMgASACaiEIIAMhASAEIAgtAAAg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A0EUaiACQRxqKQIANwIAIANBDGogAkEUaikCADcCACADIAIpAgw3AgQgAkEwaiQAQQIhAiABKAIUIQMgASgCECEEIAEoAgxFBEAgAUEwaiABQSBqKQIANwMAIAEgASkCGDcDKEEBIQILIABBKGoQ1QMgACADNgIwIAAgBDYCLCAAIAI2AiggACABKQMoNwI0IABBPGogAUEwaikDADcCACABQShqIAAoAgAQ1wIgASgCLEGAAjsAACABQdAAaiQADwtB6ILAABCyBAALgAMBBX8jAEHQAGsiASQAIAAoAgQhAiAAQQA2AgQgAgRAIAFBxABqIABBIGopAgA3AgAgAUE8aiAAQRhqKQIANwIAIAFBNGogAEEQaikCADcCACABIAApAgg3AiwgASACNgIoIAFBDGohAyMAQTBrIgIkACACQQxqIAFBKGoiBEEkEMcEGkGAgMAAEIkDIgVFBEBBhIDAAEE2QaCBwAAQnAMACyACQQxqIAQgBRBzIANBADYCACADQRRqIAJBHGopAgA3AgAgA0EMaiACQRRqKQIANwIAIAMgAikCDDcCBCACQTBqJABBAiECIAEoAhQhAyABKAIQIQQgASgCDEUEQCABQTBqIAFBIGopAgA3AwAgASABKQIYNwMoQQEhAgsgAEEoahDSAyAAIAM2AjAgACAENgIsIAAgAjYCKCAAIAEpAyg3AjQgAEE8aiABQTBqKQMANwIAIAFBKGogACgCABDXAiABKAIsQYACOwAAIAFB0ABqJAAPC0HogsAAELIEAAvLAQICfwF+IwBBEGsiASQAAkACQAJAIAKtIAOtfiIGQiCIpw0AIAanIgJBB2oiBCACSQ0AIAMgBEF4cSIEakEIaiICIARJDQAgAkH4////B00NAQsQ+gIgACABKQMANwIEIABBADYCAAwBCyACBH9B8ZTBAC0AABogAkEIEJwEBUEICyIFBEAgAEEANgIMIAAgA0EBayICNgIEIAAgBCAFajYCACAAIAIgA0EDdkEHbCACQQhJGzYCCAwBC0EIIAIQxAQACyABQRBqJAAL+AEBBX8jAEEwayIDJAACf0ECIAEoAgAiBCABKAIERg0AGiABIARBBGo2AgAgA0EIaiABKAIIIAQoAgAQwQEgAygCDCEEQQEgAygCCCIGQRFGDQAaQQghBSADQRBqIQECQAJAAkAgAigC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NgIAIANBFGogAkEUaikCADcCACADQQxqIAJBDGopAgA3AgAgAyACKQIENwIEIAJBMGokAEECIQIgASgCDCEDIAEoAgghBCABKAIERQRAIAFBKGogAUEYaikCADcDACABIAEpAhA3AyBBASECCyAAQTBqENIDIAAgAzYCOCAAIAQ2AjQgACACNgIwIAAgASkDIDcCPCAAQcQAaiABQShqKQMANwIAIAFBIGogACgCABDXAiABKAIkQYACOwAAIAFB0ABqJAAPC0HogsAAELIEAAvWAgEFfyMAQdAAayIBJAAgACgCBCECIABBADYCBCACBEAgAUEkaiAAQQhqQSgQxwQaIAEgAjYCICABQQRqIQMjAEEwayICJAAgAkEEaiABQSBqIgRBLBDHBBpBgIDAABCJAyIFRQRAQYSAwABBNkGggcAAEJwDAAsgAkEEaiAEIAUQaCADQQA2AgAgA0EUaiACQRRqKQIANwIAIANBDGogAkEMaikCADcCACADIAIpAgQ3AgQgAkEwaiQAQQIhAiABKAIMIQMgASgCCCEEIAEoAgRFBEAgAUEoaiABQRhqKQIANwMAIAEgASkCEDcDIEEBIQILIABBMGoQ0gMgACADNgI4IAAgBDYCNCAAIAI2AjAgACABKQMgNwI8IABBxABqIAFBKGopAwA3AgAgAUEgaiAAKAIAENcCIAEoAiRBgAI7AAAgAUHQAGokAA8LQeiCwAAQsgQAC9YCAQV/IwBB4ABrIgEkACAAKAIEIQIgAEEANgIEIAIEQCABQSRqIABBCGpBOBDHBBogASACNgIgIAFBBGohAyMAQUBqIgIkACACQQRqIAFBIGoiBEE8EMcEGkGAgMAAEIkDIgVFBEBBhIDAAEE2QaCBwAAQnAMACyACQQRqIAQgBRBFIANBADYCACADQRRqIAJBFGopAgA3AgAgA0EMaiACQQxqKQIANwIAIAMgAikCBDcCBCACQUBrJABBAiECIAEoAgwhAyABKAIIIQQgASgCBEUEQCABQShqIAFBGGopAgA3AwAgASABKQIQNwMgQQEhAgsgAEFAaxDTAyAAIAM2AkggACAENgJEIAAgAjYCQCAAIAEpAyA3AkwgAEHUAGogAUEoaikDADcCACABQSBqIAAoAgAQ1wIgASgCJEGAAjsAACABQeAAaiQADwtB6ILAABCyBAAL5gEB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NgIAIABBAUYEQCAEQQxqEJwCCyAEQUBrJAALsQEBAX8jAEEQayIHJAAgACgCFCABIAIgACgCGCgCDBEEACEBIAdBADoADSAHIAE6AAwgByAANgIIIAdBCGogAyAEIAUgBhCXASECIActAAwhAQJ/IAFBAEcgBy0ADUUNABpBASABDQAaIAIoAgAiAC0AHEEEcUUEQCAAKAIUQYf6wABBAiAAKAIYKAIMEQQADAELIAAoAhRBhvrAAEEBIAAoAhgoAgwRBAALIAdBEGokAAvYBQEMfyMAQYABayIKJAACQAJAAkBB9JTBACgCACIADQAgCkEAQcAAEMoEIgYhACMAQRBrIgckACAHQcAANgIMIAcgADYCCCAHQQhqIQIjAEEgayIBJAACQAJAQQBBuKjAACgCABEFACIABEAgACAAKAIAQQJGIgNBAnRqIgkoAgAhACADDQIgAEUEQCACKAIEIQAgAigCACECA0AgAEUNAxAqIgMQHyIEIAJB/////wcgACAAQf////8HTxsiBRAiIQggA0GEAU8EQCADEAALIARBhAFPBEAgBBAACyAJKAIEIAgQCyAAIAVrIQAgAiAFaiECIAFBCGoQ3QMgASgCCEUNAAtBjYCAgHghACABKAIMIgJBhAFJDQMgAhAADAMLIAIoAgQiAEUNASAJQQhqIQsgAigCACECA0ACQCABIAsoAgBBAEGAAiAAIABBgAJPGyIEECYiAzYCGCAJKAIEIAMQDCABQRBqEN0DIAEoAhANACAAIARrIQAQKiIFEB8iCBAjIQMgCEGEAU8EQCAIEAALIAMgAUEYaigCACACECQgA0GEAU8EQCADEAALIAVBhAFPBEAgBRAACyABKAIYIgNBhAFPBEAgAxAACyACIARqIQIgAA0BDAMLCyABKAIUIgBBhAFPBEAgABAACyABKAIYIgBBhAFPBEAgABAAC0GIgICAeCEADAILQcihwABBxgAgAUEfakGQosAAQfCiwAAQwwIAC0EAIQALIAFBIGokACAAIQEgB0EQaiQAIAANASAGQUBrIgAgBkHAABDHBBpB8ZTBAC0AABpBwABBCBCcBCIBRQ0CIAEgAEHAABDHBCEBQfSUwQBB9JTBACgCACIAIAEgABs2AgAgAEUEQCABIQAMAQsgAUHAAEEIEKwECyAKQYABaiQAIAAPCyAGIAE2AkBB1I7AAEEeIAZBQGtBxI7AAEHUj8AAEMMCAAtBCEHAABDEBAALmAEBAX8gAAJ/AkACfwJAAkAgAQRAIAJBAEgNASADKAIEBEAgAygCCCIEBEAgAygCACAEIAEgAhCRBAwFCwsgAkUNAkHxlMEALQAAGiACIAEQnAQMAwsgAEEANgIEDAMLIABBADYCBAwCCyABCyIDBEAgACACNgIIIAAgAzYCBEEADAILIAAgAjYCCCAAIAE2AgQLQQELNgIAC5sBAQF/AkACQCABBEAgAkEASA0BAn8gAygCBARAAkAgAygCCCIERQRADAELIAMoAgAgBCABIAIQkQQMAgsLIAEgAkUNABpB8ZTBAC0AABogAiABEJwECyIDBEAgACACNgIIIAAgAzYCBCAAQQA2AgAPCyAAIAI2AgggACABNgIEDAILIABBADYCBAwBCyAAQQA2AgQLIABBATYCAAvDAQEFfwJAAkBB+JTBACgCACIARQRAQfGUwQAtAAAaQQRBBBCcBCIARQ0BIABBqKHAADYCAEHxlMEALQAAGkEIQQQQnAQiAUUNAiABQeSPwAA2AgQgASAANgIAQfiUwQBB+JTBACgCACIAIAEgABs2AgAgAEUEQCABDwsgASgCACIDIAEoAgQiAigCABEAACACKAIEIgQEQCADIAQgAigCCBCsBAsgAUEIQQQQrAQLIAAPC0EEQQQQxAQAC0EEQQgQxAQAC8oBAQN/IwBBMGsiASQAIAAoAgAhAiAAQQA2AgAgAgRAIAFBDGogAEEEakEkEMcEGiABIAI2AgggAUEIakGAgMAAEIkDIgJFBEBBhIDAAEE2QaCBwAAQnAMACyACEIIBIAFBADYCACABKAIEIQIgASgCACEDIAAoAixBAk8EQCAAQTBqENEDCyAAIAM2AjAgACACNgI0IABBAkEBIAMbNgIsIAFBCGogACgCKBDXAiABKAIMQYACOwAAIAFBMGokAA8LQeiCwAAQsgQAC8oBAQN/IwBBMGsiASQAIAAoAgAhAiAAQQA2AgAgAgRAIAFBDGogAEEEakEkEMcEGiABIAI2AgggAUEIakGAgMAAEIkDIgJFBEBBhIDAAEE2QaCBwAAQnAMACyACEIEBIAFBADYCACABKAIEIQIgASgCACEDIAAoAixBAk8EQCAAQTBqENEDCyAAIAM2AjAgACACNgI0IABBAkEBIAMbNgIsIAFBCGogACgCKBDXAiABKAIMQYACOwAAIAFBMGokAA8LQeiCwAAQsgQAC6sBAQh/IwBBIGsiAiQAIAJBCGoiBCABQQhqIgUpAgA3AwAgAiABKQIANwMAIAEoAhwhBiABKAIYIQcgASgCFCEDIAEoAhAhCCABLQAgIQkgAkEYaiAFKQIANwMAIAIgASkCADcDECACIAgoAgAgCUEARyADKAIAIAMoAgQgByAGIAJBEGoQXSAAQQxqIAQoAgA2AgAgACACKQMANwIEIABBADYCACACQSBqJAALqwEBCH8jAEEgayICJAAgAkEIaiIEIAFBCGoiBSkCADcDACACIAEpAgA3AwAgASgCHCEGIAEoAhghByABKAIUIQMgASgCECEIIAEtACAhCSACQRhqIAUpAgA3AwAgAiABKQIANwMQIAIgCCgCACAJQQBHIAMoAgAgAygCBCAHIAYgAkEQahBeIABBDGogBCgCADYCACAAIAIpAwA3AgQgAEEANgIAIAJBIGokAAvJAQEDfyMAQUBqIgEkACAAKAIEIQIgAEEANgIEIAIEQCABQRBqIABBCGpBMBDHBBogASACNgIMIAFBDGpBgIDAABCJAyICRQRAQYSAwABBNkGggcAAEJwDAAsgAhB2IAFBADYCACABKAIEIQIgASgCACEDIAAoAjhBAk8EQCAAQTxqENEDCyAAIAM2AjwgACACNgJAIABBAkEBIAMbNgI4IAFBDGogACgCABDXAiABKAIQQYACOwAAIAFBQGskAA8LQeiCwAAQsgQAC+8DAQh/IwBB0ABrIgIkACACQRE2AgggAkHIAGogAUEIaigCADYCACACIAEpAgA3A0AgAiACQQhqNgJMIAJBNGohBiMAQTBrIgEkACABQQhqIAJBQGsiAyADKAIMENIBAkACQAJAIAEoAggOAwABAAELIAZBADYCCCAGQoCAgIDAADcCAAwBCyABKAIMIQUgAUEgakEEELUCIAEoAiQhBCABKAIgBEAgBCABKAIoEI8EAAsgASgCKCIHIAU2AgAgAUEcaiIJQQE2AgAgASAHNgIYIAEgBDYCFCABQShqIANBCGopAgA3AwAgASADKQIANwMgIwBBIGsiAyQAIANBEGogAUEgaiIFIAUoAgwQ0gEgAygCEEEBRgRAIAFBFGohBCADKAIUIQcDQCAE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aiEEA0AgASACNgIIIAAgAigCDCICNgIAIAJBEGogBCACG0EANgIAIAAgACgCCEEBazYCCCABIAM2AgwgAUEIahCxAyAAKAIAIgINAAsLIAFBADYCCCABIABBDGo2AgwgAUEIahCxAyABQRBqJAALjwEBBH8jAEEQayIBJAAgACgCACICBEAgAEEMaiEDIABBBGohBANAIAEgAjYCCCAAIAIoAgwiAjYCACACQRBqIAQgAhtBADYCACAAIAAoAghBAWs2AgggASADNgIMIAFBCGoQuAMgACgCACICDQALCyABQQA2AgggASAAQQxqNgIMIAFBCGoQuAMgAUEQaiQAC48BAQR/IwBBEGsiASQAIAAoAgAiAgRAIABBDGohAyAAQQRqIQQDQCABIAI2AgggACACKAIMIgI2AgAgAkEQaiAEIAIbQQA2AgAgACAAKAIIQQFrNgIIIAEgAzYCDCABQQhqEO0DIAAoAgAiAg0ACwsgAUEANgIIIAEgAEEMajYCDCABQQhqEO0DIAFBEGokAAuPAQEEfyMAQRBrIgEkACAAKAIAIgIEQCAAQQxqIQMgAEEEaiEEA0AgASACNgIIIAAgAigCDCICNgIAIAJBEGogBCACG0EANgIAIAAgACgCCEEBazYCCCABIAM2AgwgAUEIahC5AyAAKAIAIgINAAsLIAFBADYCCCABIABBDGo2AgwgAUEIahC5AyABQRBqJAALkgEBBn8jAEEQayIDJAAgASgCACIFBEAgASgCDCEGIAEoAhAhByABKAIIIQQgASgCBCEIIANBCGogAUEcaigCADYCACADIAEpAhQ3AwAgACAFKAIAIAgoAgBrIAIgBCgCACAEKAIEIAYgByADEGUgASgCIEECTwRAIAFBJGoQ0QMLIANBEGokAA8LQdiCwAAQsgQAC5IBAQZ/IwBBEGsiAyQAIAEoAgAiBQRAIAEoAgwhBiABKAIQIQcgASgCCCEEIAEoAgQhCCADQQhqIAFBHGooAgA2AgAgAyABKQIUNwMAIAAgBSgCACAIKAIAayACIAQoAgAgBCgCBCAGIAcgAxBmIAEoAiBBAk8EQCABQSRqENEDCyADQRBqJAAPC0HYgsAAELIEAAu7EgMSfwR+AXwjAEEQayITJAACQCABBEAgASgCAA0BIAFBfzYCACMAQYABayIKJAAgCiADNgIMQQAh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AgAiDyAFKAIEIhA2AgggCUEIaiAPIAUoAggiDyAQayIQQQAgDyAQTxsQpwMgCSgCDCEPIAkoAgghECACQQRqIA5BACAOQX9GIg4Q5AMiFyAOIBdLG0EBIBAgDyACQRxqEGMgBRDcASAJQRBqJAAgEhD4AyAFQRBqJAACQCACKAIMIglFDQAgAigCBCIFRQ0AA0AgBSgCCCAMaiEMIAlBAWsiCUUNASAFKAIMIgUNAAsLIAYgDBDzAyACQShqIAJBDGooAgA2AgAgAiACKQIENwMgIAJBMGogAkEgahDbAiACKAIwQYCAgIB4RwRAA0AgAkEYaiIJIAJBOGooAgAiBTYCACACIAIpAjA3AxAgAigCFCEMIAYgBRDzAyAGKAIEIAYoAghBAnRqIAwgBUECdBDHBBogCUEANgIAIAYgBSAGKAIIajYCCCACQRBqEPgDIAJBMGogAkEgahDbAiACKAIwQYCAgIB4Rw0ACwsgAkEgahCkAiACQUBrJAAgA0HwAGogFSgCADYCACADIAMpApQCNwNoIAMpAmwhGiADIAg2AvABIAMgGjcC6AEgA0GIAWogFhCEAiADQeAAaiICIBFBCGooAgA2AgAgAyARKQIANwNYIAMoAogBIgVBEUcEQCAEIAMpA5gBNwMQIARBIGogA0GoAWopAwA3AwAgBEEYaiADQaABaikDADcDACAEQQxqIAIoAgA2AgAgBCADKQNYNwIEIAQgBTYCACADQegAahD4AwwHCyADQYABaiACKAIANgIAIAMgAykDWDcDeCADQegAahD4AyADQYgBaiICIAggDSADQfgAahAyIAMoAogBIgVBEUcEQCAEQQRqIAJBBHJBJBDHBBogBCAFNgIADAcLIANBzABqEPgDCyAUIAdBBGoiB0cNAQwHCwsgBCADKQOQATcDCCAEQSBqIANBqAFqKQMANwMAIARBGGogA0GgAWopAwA3AwAgBEEQaiADQZgBaikDADcDACAEIA02AgQgBCACNgIACyADQUBrEPgDDAMLIAQgAykDkAE3AwggBEEgaiADQagBaikDADcDACAEQRhqIANBoAFqKQMANwMAIARBEGogA0GYAWopAwA3AwAgBCAFNgIEIAQgBjYCAAwFCyAEIAMpA5gBNwMQIARBIGogA0GoAWopAwA3AwAgBEEYaiADQaABaikDADcDACAE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JAAgBCgCDCEDIAQoAgghAiABQQA2AgAgACACNgIEIAAgA0EAIAIbNgIAIARBEGokAA8LEL0EAAsQvgQAC/RAAyN/Bn4CfCABKAIcQQFxIQMgASgCCARAAn8gASEbIAArAwAhKyABKAIMIRFBACEAIwBB8AhrIgckACArvSEnAn9BAiArICtiDQAaICdC/////////weDIilCgICAgICAgAiEICdCAYZC/v///////w+DICdCNIinQf8PcSIAGyImQgGDISggJ0KAgICAgICA+P8AgyElAkACQCApUARAQQMgJUKAgICAgICA+P8AUQ0DGiAlUEUNAUEEDAMLICVQDQELQoCAgICAgIAgICZCAYYgJkKAgICAgICACFEiARshJkICQgEgARshJUHLd0HMdyABGyAAaiEAIChQDAELIABBswhrIQBCASElIChQCyEBIAcgADsB6AggByAlNwPgCCAHQgE3A9gIIAcgJjcD0AggByABOgDqCAJ/IAFBAkYEQEEBIRZBAAwBCyADRQRAQfL1wABBASAnQgBTGyEWICdCP4inDAELQfL1wABB8/XAACAnQgBTGyEWQQELIRwCQAJ/AkACQAJAAkACQEEDIAFBAmtB/wFxIgEgAUEDTxtBAWsOAwECAwALIAdBAzYCmAggB0H09cAANgKUCCAHQQI7AZAIQQEhASAHQZAIagwECyAHQQM2ApgIIAdB9/XAADYClAggB0ECOwGQCEEBIQEgB0GQCGoMAwtBAiEBIAdBAjsBkAggEUUNASAHQaAIaiARNgIAIAdBADsBnAggB0ECNgKYCCAHQcn1wAA2ApQIIAdBkAhqDAILQXRBBSAAwSIAQQBIGyAAbCIAQcD9AEkEQCAHQZAIaiENIAdBEGohDCAAQQR2QRVqIQhBgIB+QQAgEWsgEUGAgAJPGyEBAkACQAJ/AkACQAJAAkAgB0HQCGoiDykDACIlUEUEQCAlQoCAgICAgICAIFoNASAIRQ0CQaB/IA8vARgiAEEgayAAICVCgICAgBBUIgAbIgNBEGsgAyAlQiCGICUgABsiJUKAgICAgIDAAFQiABsiA0EIayADICVCEIYgJSAAGyIlQoCAgICAgICAAVQiABsiA0EEayADICVCCIYgJSAAGyIlQoCAgICAgICAEFQiABsiA0ECayADICVCBIYgJSAAGyIlQoCAgICAgICAwABUIgAbICVCAoYgJSAAGyIlQgBZayIEa8FB0ABsQbCnBWpBzhBtIgBB0QBPDQMgAEEEdCIDQZDmwABqKQMAIiZC/////w+DIicgJSAlQn+FQj+IhiIlQiCIIih+IilCIIggJkIgiCImICh+fCAmICVC/////w+DIiV+IiZCIIh8IClC/////w+DICUgJ35CIIh8ICZC/////w+DfEKAgICACHxCIIh8IiZBQCAEIANBmObAAGovAQBqayIFQT9xrSIniKchACADQZrmwABqLwEAIQMgJkIBICeGIihCAX0iKYMiJVAEQCAIQQpLDQcgCEECdEGk88AAaigCACAASw0HCyAAQZDOAE8EQCAAQcCEPUkNBSAAQYDC1y9PBEBBCEEJIABBgJTr3ANJIgQbIQZBgMLXL0GAlOvcAyAEGwwHC0EGQQcgAEGAreIESSIEGyEGQcCEPUGAreIEIAQbDAYLIABB5ABPBEBBAkEDIABB6AdJIgQbIQZB5ABB6AcgBBsMBgtBCkEBIABBCUsiBhsMBQtB5+HAAEEcQdTywAAQnAMAC0Hk8sAAQSRBiPPAABCcAwALQbDywABBIUGY88AAEJwDAAsgAEHRAEHQ8MAAENUCAAtBBEEFIABBoI0GSSIEGyEGQZDOAEGgjQYgBBsLIQQCQAJAAkACQCAGIANrQQFqwSICIAHBIgNKBEAgBUH//wNxIQsgAiABa8EgCCACIANrIAhJGyIFQQFrIQpBACEDA0AgACAEbiEJIAMgCEYNAyAAIAQgCWxrIQAgAyAMaiAJQTBqOgAAIAMgCkYNBCADIAZGDQIgA0EBaiEDIARBCkkgBEEKbiEERQ0AC0HQ88AAEMEDAAsgDSAMIAhBACACIAEgJkIKgCAErSAnhiAoEIYBDAULIANBAWohAyALQQFrQT9xrSEqQgEhJgNAICYgKohQRQRAIA1BADYCAAwGCyADIAhPDQMgAyAMaiAlQgp+IiUgJ4inQTBqOgAAICZCCn4hJiAlICmDISUgBSADQQFqIgNHDQALIA0gDCAIIAUgAiABICUgKCAmEIYBDAQLIAggCEHg88AAENUCAAsgDSAMIAggBSACIAEgAK0gJ4YgJXwgBK0gJ4YgKBCGAQwCCyADIAhB8PPAABDVAgALIA1BADYCAAsgAcEhFwJAIAcoApAIRQRAIAdBwAhqIRhBACEJIwBBwAZrIgUkAAJAAkACQAJAAkACQAJAAkACQAJAAkAgDykDACIlUEUEQCAPKQMIIiZQDQEgDykDECInUA0CICUgJ3wgJVQNAyAlICZUDQQgDy8BGCEAIAUgJT4CDCAFQQFBAiAlQoCAgIAQVCIBGzYCrAEgBUEAICVCIIinIAEbNgIQIAVBFGpBAEGYARDKBBogBUG0AWpBAEGcARDKBBogBUEBNgKwASAFQQE2AtACIACtwyAlQgF9eX1CwprB6AR+QoChzaC0AnxCIIinIgHBIRACQCAAwSIDQQBOBEAgBUEMaiAAEHEaDAELIAVBsAFqQQAgA2vBEHEaCwJAIBBBAEgEQCAFQQxqQQAgEGtB//8DcRA4DAELIAVBsAFqIAFB//8DcRA4CyAFKALQAiELIAVBnAVqIAVBsAFqQaABEMcEGiAFIAs2ArwGIAgiBkEKTwRAIAVBlAVqIQEDQCAFKAK8BiICQSlPDQoCQCACRQ0AIAJBAnQhAAJ/IAJB/////wNqIgNB/////wNxIgRFBEBCACElIAVBnAVqIABqDAELIAAgAWohAiAEQQFqQf7///8HcSEEQgAhJQNAIAJBBGoiACAANQIAICVCIIaEIiVCgJTr3AOAIiY+AgAgAiACNQIAICUgJkKAlOvcA359QiCGhCIlQoCU69wDgCImPgIAICUgJkKAlOvcA359ISUgAkEIayECIARBAmsiBA0ACyACQQhqCyADQQFxDQBBBGsiACAANQIAICVCIIaEQoCU69wDgD4CAAsgBkEJayIGQQlLDQALCyAGQQJ0QbjfwABqKAIAIgFFDQUgBSgCvAYiAkEpTw0IIAIEfyACQQJ0IQAgAa0hJgJ/IAJB/////wNqIgFB/////wNxIgNFBEBCACElIAVBnAVqIABqDAELIANBAWpB/v///wdxIQQgACAFakGUBWohAkIAISUDQCACQQRqIgAgADUCACAlQiCGhCIlICaAIic+AgAgAiACNQIAICUgJiAnfn1CIIaEIiUgJoAiJz4CACAlICYgJ359ISUgAkEIayECIARBAmsiBA0ACyACQQhqCyEAIAFBAXFFBEAgAEEEayIAIAA1AgAgJUIghoQgJoA+AgALIAUoArwGBUEACyIAIAUoAqwBIgEgACABSxsiAEEoSw0RIABFBEBBACEADAgLIABBAXEhDSAAQQFGBEBBACEGDAcLIABBPnEhD0EAIQYgBUGcBWohAiAFQQxqIQQDQCACIAIoAgAiCiAEKAIAaiIDIAZBAXFqIg42AgAgAkEEaiIGIAYoAgAiFSAEQQRqKAIAaiIGIAMgCkkgAyAOS3JqIgM2AgAgBiAVSSADIAZJciEGIARBCGohBCACQQhqIQIgDyAJQQJqIglHDQALDAYLQefhwABBHEHw5MAAEJwDAAtBlOLAAEEdQYDlwAAQnAMAC0HE4sAAQRxBkOXAABCcAwALQajkwABBNkGA5sAAEJwDAAtB4OPAAEE3QfDlwAAQnAMAC0HHjcEAQRtBgI3BABCcAwALIA0EfyAJQQJ0IgMgBUGcBWpqIgQgBCgCACIEIAVBDGogA2ooAgBqIgMgBmoiBjYCACADIARJIAMgBktyBSAGC0EBcUUNACAAQShGDQIgBUGcBWogAEECdGpBATYCACAAQQFqIQALIAUgADYCvAYgACALIAAgC0sbIgJBKU8NACACQQJ0IQICQANAIAIEQEF/IAJBBGsiAiAFQbABamooAgAiACACIAVBnAVqaigCACIDRyAAIANLGyIERQ0BDAILC0F/QQAgAhshBAsCQAJAIARBAk8EQCABRQRAQQAhASAFQQA2AqwBDAMLIAFBAWtB/////wNxIgBBAWoiA0EDcSEEIABBA0kEQCAFQQxqIQJCACElDAILIANB/P///wdxIQAgBUEMaiECQgAhJQNAIAIgAjUCAEIKfiAlfCIlPgIAIAJBBGoiAyADNQIAQgp+ICVCIIh8IiU+AgAgAkEIaiIDIAM1AgBCCn4gJUIgiHwiJT4CACACQQxqIgMgAzUCAEIKfiAlQiCIfCIlPgIAICVCIIghJSACQRBqIQIgAEEEayIADQALDAELIBBBAWohEAwBCyAEBEADQCACIAI1AgBCCn4gJXwiJT4CACACQQRqIQIgJUIgiCElIARBAWsiBA0ACwsgJaciAARAIAFBKEYNAyAFQQxqIAFBAnRqIAA2AgAgAUEBaiEBCyAFIAE2AqwBC0EAIQoCQAJAAkACQCAQwSIAIBfBIgNIIh1FBEAgECAXa8EgCCAAIANrIAhJGyIGDQELQQAhBgwBCyAFQdQCaiIBIAVBsAFqIgBBoAEQxwQaIAUgCzYC9AMgAUEBEHEhHiAFKALQAiEBIAVB+ANqIgMgAEGgARDHBBogBSABNgKYBSADQQIQcSEfIAUoAtACIQEgBUGcBWoiAyAAQaABEMcEGiAFIAE2ArwGIAVBrAFqISAgBUHQAmohISAFQfQDaiEiIAVBmAVqISMgA0EDEHEhJCAFKAKsASEBIAUoAtACIQsgBSgC9AMhFSAFKAKYBSEZIAUoArwGIRpBACEPAkADQCAPIQ0CQAJAAkACQCABQSlJBEAgDUEBaiEPIAFBAnQhAEEAIQICQAJAAkADQCAAIAJGDQEgBUEMaiACaiACQQRqIQIoAgBFDQALIAEgGiABIBpLGyIAQSlPDRYgAEECdCECAkADQCACBEBBfyACICNqKAIAIgMgAkEEayICIAVBDGpqKAIAIgRHIAMgBEsbIgRFDQEMAgsLQX9BACACGyEEC0EAIQ4gBEECSQRAQQEhCUEAIQogAEEBRwRAIABBPnEhDiAFQQxqIQIgBUGcBWohBANAIAIgAigCACISIAQoAgBBf3NqIgEgCUEBcWoiCTYCACACQQRqIgMgAygCACITIARBBGooAgBBf3NqIgMgASASSSABIAlLcmoiATYCACADIBNJIAEgA0lyIQkgBEEIaiEEIAJBCGohAiAOIApBAmoiCkcNAAsLIABBAXEEfyAKQQJ0IgEgBUEMamoiAyADKAIAIgMgASAkaigCAEF/c2oiASAJaiIENgIAIAEgA0kgASAES3IFIAkLQQFxRQ0RIAUgADYCrAFBCCEOIAAhAQsgASAZIAEgGUsbIgNBKU8NBSADQQJ0IQIDQCACRQ0CQX8gAiAiaigCACIAIAJBBGsiAiAFQQxqaigCACIERyAAIARLGyIERQ0ACwwCCyAGIAhLDQMgBiANRg0KIAwgDWpBMCAGIA1rEMoEGgwKC0F/QQAgAhshBAsCQCAEQQFLBEAgASEDDAELIAMEQEEBIQlBACEKIANBAUcEQCADQT5xIRIgBUEMaiECIAVB+ANqIQQDQCACIAIoAgAiEyAEKAIAQX9zaiIAIAlBAXFqIgk2AgAgAkEEaiIBIAEoAgAiFCAEQQRqKAIAQX9zaiIBIAAgE0kgACAJS3JqIgA2AgAgASAUSSAAIAFJciEJIARBCGohBCACQQhqIQIgEiAKQQJqIgpHDQALCyADQQFxBH8gCkECdCIAIAVBDGpqIgEgASgCACIBIAAgH2ooAgBBf3NqIgAgCWoiBDYCACAAIAFJIAAgBEtyBSAJC0EBcUUNDwsgBSADNgKsASAOQQRyIQ4LIAMgFSADIBVLGyIAQSlPDRMgAEECdCECAkADQCACBEBBfyACICFqKAIAIgEgAkEEayICIAVBDGpqKAIAIgRHIAEgBEsbIgRFDQEMAgsLQX9BACACGyEECwJAIARBAUsEQCADIQAMAQsgAARAQQEhCUEAIQogAEEBRwRAIABBPnEhEiAFQQxqIQIgBUHUAmohBANAIAIgAigCACITIAQoAgBBf3NqIgEgCUEBcWoiCTYCACACQQRqIgMgAygCACIUIARBBGooAgBBf3NqIgMgASATSSABIAlLcmoiATYCACADIBRJIAEgA0lyIQkgBEEIaiEEIAJBCGohAiASIApBAmoiCkcNAAsLIABBAXEEfyAKQQJ0IgEgBUEMamoiAyADKAIAIgMgASAeaigCAEF/c2oiASAJaiIENgIAIAEgA0kgASAES3IFIAkLQQFxRQ0PCyAFIAA2AqwBIA5BAmohDgsgACALIAAgC0sbIgFBKU8NDCABQQJ0IQICQANAIAIEQEF/IAIgIGooAgAiAyACQQRrIgIgBUEMamooAgAiBEcgAyAESxsiBEUNAQwCCwtBf0EAIAIbIQQLAkAgBEEBSwRAIAAhAQwBCyABBEBBASEJQQAhCiABQQFHBEAgAUE+cSESIAVBDGohAiAFQbABaiEEA0AgAiACKAIAIhMgBCgCAEF/c2oiACAJQQFxaiIJNgIAIAJBBGoiAyADKAIAIhQgBEEEaigCAEF/c2oiAyAAIBNJIAAgCUtyaiIANgIAIAMgFEkgACADSXIhCSAEQQhqIQQgAkEIaiECIBIgCkECaiIKRw0ACwsgAUEBcQR/IApBAnQiACAFQQxqaiIDIAMoAgAiAyAFQbABaiAAaigCAEF/c2oiACAJaiIENgIAIAAgA0kgACAES3IFIAkLQQFxRQ0PCyAFIAE2AqwBIA5BAWohDgsgCCANRwRAIAwgDWogDkEwajoAACABQSlPDQ0gAUUEQEEAIQEMBgsgAUEBa0H/////A3EiAEEBaiIDQQNxIQQgAEEDSQRAIAVBDGohAkIAISUMBQsgA0H8////B3EhACAFQQxqIQJCACElA0AgAiACNQIAQgp+ICV8IiU+AgAgAkEEaiIDIAM1AgBCCn4gJUIgiHwiJT4CACACQQhqIgMgAzUCAEIKfiAlQiCIfCIlPgIAIAJBDGoiAyADNQIAQgp+ICVCIIh8IiU+AgAgJUIgiCElIAJBEGohAiAAQQRrIgANAAsMBAsgCCAIQdDlwAAQ1QIACwwLCyAGIAhB4OXAABCvBAALIANBKEGAjcEAEK8EAAsgBARAA0AgAiACNQIAQgp+ICV8IiU+AgAgAkEEaiECICVCIIghJSAEQQFrIgQNAAsLICWnIgBFDQAgAUEoRg0CIAVBDGogAUECdGogADYCACABQQFqIQELIAUgATYCrAEgBiAPRw0AC0EBIQoMAQsMBAsCQAJAIAtBKUkEQCALRQRAQQAhCwwDCyALQQFrQf////8DcSIAQQFqIgNBA3EhBCAAQQNJBEAgBUGwAWohAkIAISUMAgsgA0H8////B3EhACAFQbABaiECQgAhJQNAIAIgAjUCAEIFfiAlfCIlPgIAIAJBBGoiAyADNQIAQgV+ICVCIIh8IiU+AgAgAkEIaiIDIAM1AgBCBX4gJUIgiHwiJT4CACACQQxqIgMgAzUCAEIFfiAlQiCIfCIlPgIAICVCIIghJSACQRBqIQIgAEEEayIADQALDAELIAtBKEGAjcEAEK8EAAsgBARAA0AgAiACNQIAQgV+ICV8IiU+AgAgAkEEaiECICVCIIghJSAEQQFrIgQNAAsLICWnIgBFDQAgC0EoRg0EIAVBsAFqIAtBAnRqIAA2AgAgC0EBaiELCyAFIAs2AtACIAEgCyABIAtLGyICQSlPDQIgAkECdCECAkACQAJAAkACQAJAA0AgAkUNAUF/IAJBBGsiAiAFQbABamooAgAiACACIAVBDGpqKAIAIgFHIAAgAUsbIgBFDQALIABB/wFxQQFGDQEMBQsgCiACRXFFDQQgBkEBayIAIAhPDQEgACAMai0AAEEBcUUNBAsgBiAISw0CIAYgDGohAUEAIQIgDCEEAkADQCACIAZGDQEgAkEBaiECIARBAWsiBCAGaiIALQAAQTlGDQALIAAgAC0AAEEBajoAACAGIAJrQQFqIAZPDQQgAEEBakEwIAJBAWsQygQaDAQLAn9BMSAGRQ0AGiAMQTE6AABBMCAGQQFGDQAaIAxBAWpBMCAGQQFrEMoEGkEwCyEAIBBBAWohECAdRQ0BDAMLIAAgCEGg5cAAENUCAAsgBiAITw0BIAEgADoAACAGQQFqIQYMAQsgBiAIQbDlwAAQrwQACyAGIAhLDQELIBggEDsBCCAYIAY2AgQgGCAMNgIAIAVBwAZqJAAMBgsgBiAIQcDlwAAQrwQACyACQShBgI3BABCvBAALQShBKEGAjcEAENUCAAsgAUEoQYCNwQAQrwQAC0GQjcEAQRpBgI3BABCcAwALIAdByAhqIAdBmAhqKAIANgIAIAcgBykCkAg3A8AICyAXIAcuAcgIIgBIBEAgB0EIaiAHKALACCAHKALECCAAIBEgB0GQCGoQigEgBygCDCEBIAcoAggMAwtBAiEBIAdBAjsBkAggEUUEQEEBIQEgB0EBNgKYCCAHQfr1wAA2ApQIIAdBkAhqDAMLIAdBoAhqIBE2AgAgB0EAOwGcCCAHQQI2ApgIIAdByfXAADYClAggB0GQCGoMAgtBgfbAAEElQaj2wAAQnAMAC0EBIQEgB0EBNgKYCCAHQfr1wAA2ApQIIAdBkAhqCyEAIAcgATYCzAggByAANgLICCAHIBw2AsQIIAcgFjYCwAggGyAHQcAIahBVIAdB8AhqJAAMAQsgAEEoQYCNwQAQrwQACw8LIAApAwAiJb8hKyAlQv///////////wCDvyIsRACA4Dd5w0FDZiAsRAAAAAAAAAAAYiAsRC1DHOviNho/Y3FyRQRAQgAhJSMAQYABayIAJAAgK70hJwJ/QQIgKyArYg0AGiAnQv////////8HgyIpQoCAgICAgIAIhCAnQgGGQv7///////8PgyAnQjSIp0H/D3EiBBsiJkIBgyEoICdCgICAgICAgPj/AIMhJQJAAkAgKVAEQEEDICVCgICAgICAgPj/AFENAxogJVBFDQFBBAwDCyAlUA0BC0KAgICAgICAICAmQgGGICZCgICAgICAgAhRIgYbISZCAkIBIAYbISVBy3dBzHcgBhsgBGohBCAoUAwBCyAEQbMIayEEQgEhJSAoUAshBiAAIAQ7AXggACAlNwNwIABCATcDaCAAICY3A2AgACAGOgB6An8gBkECRgRAQQAhBEEBDAELIANFBEAgJ0I/iKchBEHy9cAAQQEgJ0IAUxsMAQtBASEEQfL1wABB8/XAACAnQgBTGwshCAJ/AkACQAJAAkBBAyAGQQJrQf8BcSIDIANBA08bQQFrDgMBAwIACyAAQQM2AiggAEH09cAANgIkIABBAjsBIEEBIQMgAEEgagwDCyAAQQM2AiggAEH39cAANgIkIABBAjsBIEEBIQMgAEEgagwCCyAAQSBqIABB4ABqIgMgAEEPaiIGEC4CQCAAKAIgRQRAIABB0ABqIAMgBhArDAELIABB2ABqIABBKGooAgA2AgAgACAAKQIgNwNQCyAAIAAoAlAgACgCVCAALwFYQQEgAEEgahCKASAAKAIEIQMgACgCAAwBC0ECIQMgAEECOwEgIABBMGpBATYCACAAQQA7ASwgAEECNgIoIABByfXAADYCJCAAQSBqCyEGIAAgAzYCXCAAIAY2AlggACAENgJUIAAgCDYCUCABIABB0ABqEFUgAEGAAWokAA8LAn9CACElIwBBkAFrIgAkACArvSEnAn9BAiArICtiDQAaICdC/////////weDIilCgICAgICAgAiEICdCAYZC/v///////w+DICdCNIinQf8PcSIEGyImQgGDISggJ0KAgICAgICA+P8AgyElAkACQCApUARAQQMgJUKAgICAgICA+P8AUQ0DGiAlUEUNAUEEDAMLICVQDQELQoCAgICAgIAgICZCAYYgJkKAgICAgICACFEiBhshJkICQgEgBhshJUHLd0HMdyAGGyAEaiEEIChQDAELIARBswhrIQRCASElIChQCyEGIAAgBDsBiAEgACAlNwOAASAAQgE3A3ggACAmNwNwIAAgBjoAigECfyAGQQJGBEBBACEEQQEMAQsgA0UEQCAnQj+IpyEEQfL1wABBASAnQgBTGwwBC0EBIQRB8vXAAEHz9cAAICdCAFMbCyENAkACQCAAAn8CQAJAAkACQEEDIAZBAmtB/wFxIgMgA0EDTxtBAWsOAwECAwALIABBAzYCICAAQfT1wAA2AhwgAEECOwEYQQEMAwsgAEEDNgIgIABB9/XAADYCHCAAQQI7ARhBAQwCCyAAQQM2AiAgAEECOwEYIABB+/XAADYCHEEBDAELIABBGGogAEHwAGoiAyAAQQdqIgYQLgJAIAAoAhhFBEAgAEHgAGogAyAGECsMAQsgAEHoAGogAEEgaigCADYCACAAIAApAhg3A2ALIAAoAmQiCEUNASAAKAJgIgwtAABBME0NAiAALgFoIQYgAEEBNgIgIAAgDDYCHCAAQQI7ARhBASEDIAhBAUcE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AwA3AwAgAEGQh8AAKQIANwIsIABBCGogBEEIaikDADcDACAAQRBqIARBEGopAwA3AwAgAEEYaiAEQRhqKQMANwMAIABBNGpBmIfAACkCADcCACADQTBqJAAgBBDEAhCQAiIAKAIAIQMgACgCBCEAIAFB8AFqEI0CIgYgBkEgaiADIAAoAgwRBQAQLSABQcgBaiIDQZiHwAApAgA3AwAgAUHYAWogAUH4AWopAwAiBzcDACABQeABaiABQYACaikDACIINwMAIAFB6AFqIAFBiAJqKQMAIgk3AwAgASABKQPwASIKNwPQASABQZCHwAApAgA3A8ABIAJBGGoiAEEYaiAJNwMAIABBEGogCDcDACAAQQhqIAc3AwAgACAKNwMAIABBADYCKCAAQQg2AiQgAEEANgIgIAAgASkDwAE3AiwgAEE0aiADKQMANwIAIABBQGsgBUHAABDHBBogAEGAAWogAUHAABDHBBogAEHAAWogBEHAABDHBBogAEIANwOAAiABQaACaiQAIAJBCGpBwJLAABDmAiACQagCakHYksAAKQMANwMAIAJB0JLAACkDADcDoAIgAiACKQMQNwO4AiACIAIpAwg3A7ACIwBBsAJrIgEkACABQQhqIABBqAIQxwQaQfGUwQAtAAAaQbACQQgQnAQiAEUEQEEIQbACEMQEAAsgAEEANgIAIABBBGogAUEEakGsAhDHBBogAUGwAmokACACQcACaiQAIAALkwIBA38jAEEQayIDJAAgAyAAKAIAIgJBHGo2AgwjAEEQayIAJAAgASgCFEHkmMAAQQQgASgCGCgCDBEEACEEIABBADoADSAAIAQ6AAwgACABNgIIIABBCGpB6JjAAEECIAJBGGpB7JjAABCXAUH8mMAAQQYgAkEIakGEmcAAEJcBQZSZwABBBiACQZyZwAAQlwFBrJnAAEEHIANBDGpBtJnAABCXASEBAn8gAC0ADCICQQBHIAAtAA1FDQAaQQEgAg0AGiABKAIAIgEtABxBBHFFBEAgASgCFEGH+sAAQQIgASgCGCgCDBEEAAwBCyABKAIUQYb6wABBASABKAIYKAIMEQQACyAAQRBqJAAgA0EQaiQAC2EBA38gACgCCCIDIAAoAgAiBSgChAEiBCAFKAKAAWtMBEAgACADQQF0EOIBIAAoAgghAwsgACgCBCADQQFrIARx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QcyZwABBCEHUmcAAQQcgAkEMakGck8AAEIwCIAJBEGokAAs+AQF/AkAgACgCACIARQ0AIAAgACgCjAgiAUEBazYCjAggAUEBRw0AIABBADYCwAggACgCkAgNACAAEM4BCwusAgECfyMAQSBrIgIkACACQQE7ARwgAiABNgIYIAIgADYCFCACQcj3wAA2AhAgAkEBNgIMIwBBEGsiASQAIAJBDGoiACgCCCICRQRAQezRwAAQsgQACyABIAAoAgw2AgwgASAANgIIIAEgAjYCBCMAQRBrIgAkACABQQRqIgEoAgAiAigCDCEDAkACQAJAAkAgAigCBA4CAAECCyADDQFBASECQQAhAwwCCyADDQAgAigCACICKAIEIQMgAigCACECDAELIAAgAjYCDCAAQYCAgIB4NgIAIABBsNLAACABKAIEIgAoAgggASgCCCAALQAQIAAtABEQ9wEACyAAIAM2AgQgACACNgIAIABBnNLAACABKAIEIgAoAgggASgCCCAALQAQIAAtABEQ9wEACzIAAkAgAARAIAAoAgANASAAIAI2AgwgAEEANgIAIAAgAUEARzYCCA8LEL0EAAsQvgQACzgBAX8jAEEQayICJAAgAiAANgIMIAFBxKvAAEEUQdirwABBBCACQQxqQdyrwAAQjAIgAkEQaiQACzcBAX8jAEEQayIEJAAgBCABNgIMIAQgADYCCCAEQQhqQbDDwAAgBEEMakGww8AAIAIgAxCMAQALMAEBfyAAKAIAIgAEQCAAKAIAIgEEQCAAKAIEIAFBAnRBBBCsBAsgAEEUQQQQrAQLCzABAX8gACgCACIABEAgACgCACIBBEAgACgCBCABQQxsQQQQrAQLIABBFEEEEKwECwsyAQF/IAEoAhwiAkEQcUUEQCACQSBxRQRAIAAgARCwBA8LIAAgARCYAg8LIAAgARCXAgs0AQF/IwBBEGsiAiQAIAIgACgCADYCDCABQbCfwABBCyACQQxqQbyfwAAQ+gEgAkEQaiQACzQBAX8jAEEQayICJAAgAiAAKAIANgIMIAFBzJ/AAEEOIAJBDGpBvJ/AABD6ASACQRBqJAALMgEBfyABKAIcIgJBEHFFBEAgAkEgcUUEQCAAIAEQ4QMPCyAAIAEQmAIPCyAAIAEQlwILLgACQCADaUEBR0GAgICAeCADayABSXJFBEAgACAB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f0HxlMEALQAAGkGMCEEEEJwEIgFFBEBBBEGMCBDEBAALIAEgAEGMCBDHBAtnAQJ/IwBBEGsiASQAIAFBDzYCDCABQdCFwAA2AggjAEEgayIAJAAgAEEBNgIEIABBkPfAADYCACAAQgE3AgwgACABQQhqrUKAgICAsBeENwMYIAAgAEEYajYCCCAAQeCFwAAQtAMACyUBAX8gACgCACIBIAEoAgAiAUEBazYCACABQQFGBEAgABDkAgsLJgACQAJAAkAgACgCAA4CAQIACyAAQQRqENEDCw8LIABBBGoQpAILJgACQAJAAkAgACgCAA4CAQIACyAAQQRqENEDCw8LIABBBGoQogILJgACQAJAAkAgACgCAA4CAQIACyAAQQRqENEDCw8LIABBBGoQowILJgACQAJAAkAgACgCAA4CAQIACyAAQQRqENEDCw8LIABBBGoQpQILJQAgAEUEQEGgyMAAQTIQvAQACyAAIAIgAyAEIAUgASgCEBELAAsaACAAKAIAIgAEQCAAEPgDIABBFEEEEKwECwsjACAARQRAQaDIwABBMhC8BAALIAAgAiADIAQgASgCEBEGAAsjACAARQRAQaDIwABBMhC8BAALIAAgAiADIAQgASgCEBEdAAsjACAARQRAQaDIwABBMhC8BAALIAAgAiADIAQgASgCEBEQAAsjACAARQRAQaDIwABBMhC8BAALIAAgAiADIAQgASgCEBEfAAsjACAARQRAQaDIwABBMhC8BAALIAAgAiADIAQgASgCEBEhAAtRAQJ/IAEgACgCACAAKAIIIgNrSwRAIwBBEGsiAiQAIAJBCGogACADIAEQ5QEgAigCCCIAQYGAgIB4RwRAIAAgAigCDBCPBAALIAJBEGokAAsLKAEBfyAAKAIAIgFBgICAgHhyQYCAgIB4RwRAIAAoAgQgAUEBEKwECwslACABIAAtAABBAnQiAEHI2cAAaigCACAAQaTYwABqKAIAEJcECx0BAX8gACgCACIBBEAgACgCBCABQQxsQQQQrAQLCyEAIABFBEBBoMjAAEEyELwEAAsgACACIAMgASgCEBEDAAsdAQF/IAAoAgAiAQRAIAAoAgQgAUECdEEEEKwECwsaACAAKAIAKAIAIAEoAgAgAkEDdGtBCGsQfgsaACAAKAIAKAIAIAEoAgAgAkEEdGtBEGsQfgsbAQF/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ajYCECADQQhqIAIQtAMAC2sBAX8jAEEwayIDJAAgAyABNgIEIAMgADYCACADQQI2AgwgA0HE/cAANgIIIANCAjcCFCADIANBBGqtQoCAgIDwBYQ3AyggAyADrUKAgICA8AWENwMgIAMgA0EgajYCECADQQhqIAIQtAMACw4AIAA1AgBBASABEK0BC2sBAX8jAEEwayIDJAAgAyABNgIEIAMgADYCACADQQI2AgwgA0H4/cAANgIIIANCAjcCFCADIANBBGqtQoCAgIDwBYQ3AyggAyADrUKAgICA8AWENwMgIAMgA0EgajYCECADQQhqIAIQtAMACw8AQZn3wABBKyAAEJwDAAsOACAAKQMAQQEgARCtAQu+AgICfwF+IAAoAgApAwAhBCMAQYABayIDJAACfwJAAkAgASgCHCIAQRBxRQRAIABBIHENASAEQQEgARCtAQwDC0EAIQADQCAAIANqQf8AaiAEp0EPcSICQTByIAJB1wBqIAJBCkkbOgAAIABBAWshACAEQhBUIARCBIghBEUNAAsMAQtBACEAA0AgACADakH/AGogBKdBD3EiAkEwciACQTdqIAJBCkkbOgAAIABBAWshACAEQhBUIARCBIghBEUNAAsgAEGAAWoiAkGBAU8EQCACQYABQaz6wAAQrgQACyABQQFBvPrAAEECIAAgA2pBgAFqQQAgAGsQOwwBCyAAQYABaiICQYEBTwRAIAJBgAFBrPrAABCuBAALIAFBAUG8+sAAQQIgACADakGAAWpBACAAaxA7CyADQYABaiQACwsAIAAjAGokACMAC6YBAQF/IAAoAgAhAiMAQUBqIgAkACAAQgA3AzggAEE4aiACKAIAECggACAAKAI8IgI2AjQgACAAKAI4NgIwIAAgAjYCLCAAQY0BNgIoIABBAjYCECAAQejJwAA2AgwgAEIBNwIYIAAgAEEsajYCJCAAIABBJGo2AhQgASgCFCABKAIYIABBDGoQTiAAKAIsIgIEQCAAKAIwIAJBARCsBAsgAEFAayQACwwAIAAoAgAgARDQAgv9BAECfwJ/IAAoAgAhAiMAQSBrIgAkAAJAAkACQAJAAkACQCACLQAAQQFrDgMBAgMACyAAIAIoAgQ2AgQgAEEIaiICIAFB+M/AAEECEN8DIAJB+s/AAEEEIABBBGpBgNDAABCXASAAQSg6ABNB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RQRAQQRBCBDEBAALIAEgADYCBCABQQA2AgAgAQsHAEGIlcEACwIACwuxlAEOAEGAgMAAC5MHFAAAAGFzc2VydGlvbiBmYWlsZWQ6IGluamVjdGVkICYmICF3b3JrZXJfdGhyZWFkLmlzX251bGwoKS9ob21lL3ZhZHVnYS8uY2FyZ28vcmVnaXN0cnkvc3JjL2luZGV4LmNyYXRlcy5pby02ZjE3ZDIyYmJhMTUwMDFmL3JheW9uLWNvcmUtMS4xMi4xL3NyYy9yZWdpc3RyeS5ycwAAADoAEABjAAAACQIAABUAAAA6ABAAYwAAACICAAARAAAAaW50ZXJuYWwgZXJyb3I6IGVudGVyZWQgdW5yZWFjaGFibGUgY29kZS9ob21lL3ZhZHVnYS8uY2FyZ28vcmVnaXN0cnkvc3JjL2luZGV4LmNyYXRlcy5pby02ZjE3ZDIyYmJhMTUwMDFmL3JheW9uLWNvcmUtMS4xMi4xL3NyYy9qb2IucnMAAOgAEABeAAAA5gAAACAAAADoABAAXgAAAGYAAAAgAAAA6AAQAF4AAAB3AAAALgAAACgAAAApAAAAbWlkID4gbGVuAAAAgAEQAAkAAAAvcnVzdGMvMTI5ZjNiOTk2NGFmNGQ0YTcwOWQxMzgzOTMwYWRlMTJkZmU3YzA4MS9saWJyYXJ5L2FsbG9jL3NyYy92ZWMvbW9kLnJzlAEQAEwAAAD0BQAADQAAAC9ob21lL3ZhZHVnYS8uY2FyZ28vcmVnaXN0cnkvc3JjL2luZGV4LmNyYXRlcy5pby02ZjE3ZDIyYmJhMTUwMDFmL3JheW9uLTEuMTAuMC9zcmMvc2xpY2UvbW9kLnJzAPABEABfAAAASwMAACgAAAAvaG9tZS92YWR1Z2EvLmNhcmdvL3JlZ2lzdHJ5L3NyYy9pbmRleC5jcmF0ZXMuaW8tNmYxN2QyMmJiYTE1MDAxZi9pbmRleG1hcC0yLjIuNi9zcmMvbWFwL2NvcmUucnNgAhAAYAAAAC0AAAAjAAAAaW5kZXggbm90IGZvdW5kAGACEABgAAAAOgAAAAoAAABgAhAAYAAAAFMBAAA9AAAAL2hvbWUvdmFkdWdhLy5jYXJnby9yZWdpc3RyeS9zcmMvaW5kZXguY3JhdGVzLmlvLTZmMTdkMjJiYmExNTAwMWYvaW5kZXhtYXAtMi4yLjYvc3JjL21hcC9jb3JlL3Jhdy5ycwADEABkAAAAVAAAAC4AAADwARAAXwAAANgDAAAoAAAAAAAAAP//////////iAMQAEGgh8AAC6MD//////////8qAAAABAAAAAQAAAArAAAALAAAACwAAAAqAAAABAAAAAQAAAAtAAAALgAAAC4AAABleHBlY3RlZCAgdG90YWwgd3JpdGVzLCBidXQgZ290INgDEAAJAAAA4QMQABcAAAAvaG9tZS92YWR1Z2EvLmNhcmdvL3JlZ2lzdHJ5L3NyYy9pbmRleC5jcmF0ZXMuaW8tNmYxN2QyMmJiYTE1MDAxZi9yYXlvbi0xLjEwLjAvc3JjL2l0ZXIvY29sbGVjdC9tb2QucnMAAAgEEABmAAAAZAAAAAUAAABjYW5ub3QgYWNjZXNzIGEgVGhyZWFkIExvY2FsIFN0b3JhZ2UgdmFsdWUgZHVyaW5nIG9yIGFmdGVyIGRlc3RydWN0aW9uAABDAAAAAAAAAAEAAABEAAAAL3J1c3RjLzEyOWYzYjk5NjRhZjRkNGE3MDlkMTM4MzkzMGFkZTEyZGZlN2MwODEvbGlicmFyeS9zdGQvc3JjL3RocmVhZC9sb2NhbC5ycwDYBBAATwAAAAYBAAAaAAAA//////////84BRAAQdCKwAALgwgvaG9tZS92YWR1Z2EvLmNhcmdvL3JlZ2lzdHJ5L3NyYy9pbmRleC5jcmF0ZXMuaW8tNmYxN2QyMmJiYTE1MDAxZi9pbmRleG1hcC0yLjIuNi9zcmMvbWFwL2NvcmUvcmF3LnJzUAUQAGQAAACJAAAAHgAAAC9ob21lL3ZhZHVnYS8uY2FyZ28vcmVnaXN0cnkvc3JjL2luZGV4LmNyYXRlcy5pby02ZjE3ZDIyYmJhMTUwMDFmL2luZGV4bWFwLTIuMi42L3NyYy9tYXAvY29yZS9lbnRyeS5ycwAAxAUQAGYAAAA2AQAAGQAAAC9ob21lL3ZhZHVnYS8uY2FyZ28vcmVnaXN0cnkvc3JjL2luZGV4LmNyYXRlcy5pby02ZjE3ZDIyYmJhMTUwMDFmL2luZGV4bWFwLTIuMi42L3NyYy9tYXAvY29yZS5yczwGEABgAAAAJQAAAA8AAABIYXNoIHRhYmxlIGNhcGFjaXR5IG92ZXJmbG93rAYQABwAAAAvaG9tZS92YWR1Z2EvLmNhcmdvL3JlZ2lzdHJ5L3NyYy9pbmRleC5jcmF0ZXMuaW8tNmYxN2QyMmJiYTE1MDAxZi9oYXNoYnJvd24tMC4xNC41L3NyYy9yYXcvbW9kLnJzAAAA0AYQAGEAAABWAAAAKAAAAEUAAAAEAAAABAAAAEYAAABnZXRyYW5kb206OmdldHJhbmRvbSgpIGZhaWxlZC4vaG9tZS92YWR1Z2EvLmNhcmdvL3JlZ2lzdHJ5L3NyYy9pbmRleC5jcmF0ZXMuaW8tNmYxN2QyMmJiYTE1MDAxZi9haGFzaC0wLjguMTEvc3JjL3JhbmRvbV9zdGF0ZS5yc3IHEABiAAAAUgAAADMAAABFAAAABAAAAAQAAABHAAAAbWlkID4gbGVuAAAA9AcQAAkAAAAvaG9tZS92YWR1Z2EvLmNhcmdvL3JlZ2lzdHJ5L3NyYy9pbmRleC5jcmF0ZXMuaW8tNmYxN2QyMmJiYTE1MDAxZi9yYXlvbi0xLjEwLjAvc3JjL3NsaWNlL3F1aWNrc29ydC5ycwAAAAgIEABlAAAAlgIAAA8AAAAICBAAZQAAADwCAAAHAAAACAgQAGUAAACuAAAACwAAAAgIEABlAAAAIgMAAB0AAAAICBAAZQAAACYDAAAbAAAACAgQAGUAAAAxAwAAHwAAAAgIEABlAAAAMgMAACQAAAAICBAAZQAAAOoAAAALAAAACAgQAGUAAADZAAAAGgAAAAgIEABlAAAA2QAAACQAAAAICBAAZQAAAAMCAAALAAAACAgQAGUAAAAkAgAAKwAAAAgIEABlAAAALgIAAAcAAABKAAAAAAAAAP//////////SAkQAEHgksAAC4UWRXJyb3JOb25lU29tZQAAAEsAAAAEAAAABAAAAEwAAABLAAAABAAAAAQAAABNAAAAVmVydGV4SW5kZXgASwAAAAQAAAAEAAAATgAAAEh5cGVyZWRnZUluZGV4SHlwZXJlZGdlSW5kZXhOb3RGb3VuZEsAAAAEAAAABAAAAE8AAABJbnRlcm5hbEh5cGVyZWRnZUluZGV4Tm90Rm91bmRIeXBlcmVkZ2VXZWlnaHROb3RGb3VuZAAAAEsAAAAEAAAABAAAAFAAAABIeXBlcmVkZ2VXZWlnaHRVbmNoYW5nZWRpbmRleAAAAEsAAAAEAAAABAAAAFEAAAB3ZWlnaHRIeXBlcmVkZ2VWZXJ0aWNlc1VuY2hhbmdlZEh5cGVyZWRnZUNyZWF0aW9uTm9WZXJ0aWNlc0h5cGVyZWRnZVVwZGF0ZU5vVmVydGljZXNIeXBlcmVkZ2VWZXJ0aWNlc0luZGV4ZXNOb3RGb3VuZHZlcnRpY2VzSwAAAAQAAAAEAAAAUgAAAEh5cGVyZWRnZUludmFsaWRDb250cmFjdGlvbnRhcmdldAAAAEsAAAAEAAAABAAAAFMAAABIeXBlcmVkZ2VXZWlnaHRBbHJlYWR5QXNzaWduZWRIeXBlcmVkZ2VzSW52YWxpZEludGVyc2VjdGlvbnNIeXBlcmVkZ2VzSW52YWxpZEpvaW5WZXJ0ZXhJbmRleE5vdEZvdW5kSwAAAAQAAAAEAAAAVAAAAEludGVybmFsVmVydGV4SW5kZXhOb3RGb3VuZFZlcnRleFdlaWdodE5vdEZvdW5kAEsAAAAEAAAABAAAAFUAAABWZXJ0ZXhXZWlnaHRVbmNoYW5nZWRWZXJ0ZXhXZWlnaHRBbHJlYWR5QXNzaWduZWRFcnJvciBhZGRpbmcgdmVydGV4OiAAAAD8CxAAFQAAAE5vZGUgUmVsYXRpb24gAAAhDBAACQAAAENvb3Jkc2xvbgAAAFYAAAAIAAAACAAAAFcAAABsYXQASwAAAAQAAAAEAAAAWAAAAE5vZGVpZAAASwAAAAQAAAAEAAAAWQAAAGNvb3JkcwAAVgAAABAAAAAIAAAAWgAAAHRocl9pZAAASwAAAAgAAAAEAAAAWwAAAGlzX25vZGUASwAAAAQAAAAEAAAAXAAAABwMEAAFAAAAUmVsYXRpb25saW5lX2lkRXhwZWN0ZWQgdmVydGljZV9pZHhzIHRvIGJlIGFuIGFycmF5IG9mIG51bWJlcnMuZWRnZSB1cGRhdGVkVmVydGljZXMgYXJlIHVuY2hhbmdlZCwgdXBkYXRlIHNraXBwZWQuRmFpbGVkIHRvIGdldCBoeXBlcmVkZ2UgdmVydGljZXM6ID4NEAAiAAAARXJyb3IgcmV0cmlldmluZyB2ZXJ0ZXg6IAAAAGgNEAAZAAAAU2VyaWFsaXphdGlvbiBlcnJvcjogAAAAjA0QABUAAAAvcnVzdGMvMTI5ZjNiOTk2NGFmNGQ0YTcwOWQxMzgzOTMwYWRlMTJkZmU3YzA4MS9saWJyYXJ5L2FsbG9jL3NyYy92ZWMvbW9kLnJzrA0QAEwAAACVCAAAJAAAAHRvbyBtYW55IHZhbHVlcyBwdXNoZWQgdG8gY29uc3VtZXIAAAgOEAAiAAAAL2hvbWUvdmFkdWdhLy5jYXJnby9yZWdpc3RyeS9zcmMvaW5kZXguY3JhdGVzLmlvLTZmMTdkMjJiYmExNTAwMWYvcmF5b24tMS4xMC4wL3NyYy9pdGVyL2NvbGxlY3QvY29uc3VtZXIucnMANA4QAGsAAAB+AAAACQAAAGFzc2VydGlvbiBmYWlsZWQ6IGluZGV4IDw9IGxlbgAANA4QAGsAAABhAAAADQAAAF0AAABeAAAABAAAAAQAAABUAAAAbWlkID4gbGVuAAAA9A4QAAkAAABhc3NlcnRpb24gZmFpbGVkOiB2ZWMuY2FwYWNpdHkoKSAtIHN0YXJ0ID49IGxlbi9ob21lL3ZhZHVnYS8uY2FyZ28vcmVnaXN0cnkvc3JjL2luZGV4LmNyYXRlcy5pby02ZjE3ZDIyYmJhMTUwMDFmL3JheW9uLTEuMTAuMC9zcmMvdmVjLnJzNw8QAFkAAADFAAAACQAAADQOEABrAAAAEgAAAAkAAABWZXJ0ZXhJbmRleABeAAAABAAAAAQAAABOAAAASHlwZXJlZGdlSW5kZXgAADcPEABZAAAA3QAAACMAAABpdGVydG9vbHM6IC56aXBfZXEoKSByZWFjaGVkIGVuZCBvZiBvbmUgaXRlcmF0b3IgYmVmb3JlIHRoZSBvdGhlci9ob21lL3ZhZHVnYS8uY2FyZ28vcmVnaXN0cnkvc3JjL2luZGV4LmNyYXRlcy5pby02ZjE3ZDIyYmJhMTUwMDFmL2l0ZXJ0b29scy0wLjExLjAvc3JjL3ppcF9lcV9pbXBsLnJzAAAtEBAAZQAAADAAAAANAAAAAAAAANMIo4WIaj8kRHNwAy6KGRPQMZ8pIjgJpIlsTuyY+i4IY2Fubm90IGFjY2VzcyBhIFRocmVhZCBMb2NhbCBTdG9yYWdlIHZhbHVlIGR1cmluZyBvciBhZnRlciBkZXN0cnVjdGlvbgAAXwAAAAAAAAABAAAARAAAAC9ydXN0Yy8xMjlmM2I5OTY0YWY0ZDRhNzA5ZDEzODM5MzBhZGUxMmRmZTdjMDgxL2xpYnJhcnkvc3RkL3NyYy90aHJlYWQvbG9jYWwucnMAIBEQAE8AAAAGAQAAGgAAAEVycm9yb3NfZXJyb3IAAABgAAAABAAAAAQAAABhAAAAZGVzY3JpcHRpb24AYAAAAAgAAAAEAAAAYgAAAGludGVybmFsX2NvZGUAAABgAAAABAAAAAQAAABjAAAAdW5rbm93bl9jb2RlZ2V0cmFuZG9tOiB0aGlzIHRhcmdldCBpcyBub3Qgc3VwcG9ydGVkZXJybm86IGRpZCBub3QgcmV0dXJuIGEgcG9zaXRpdmUgdmFsdWV1bmV4cGVjdGVkIHNpdHVhdGlvblNlY1JhbmRvbUNvcHlCeXRlczogaU9TIFNlY3VyaXR5IGZyYW1ld29yayBmYWlsdXJlUnRsR2VuUmFuZG9tOiBXaW5kb3dzIHN5c3RlbSBmdW5jdGlvbiBmYWlsdXJlUkRSQU5EOiBmYWlsZWQgbXVsdGlwbGUgdGltZXM6IENQVSBpc3N1ZSBsaWtlbHlSRFJBTkQ6IGluc3RydWN0aW9uIG5vdCBzdXBwb3J0ZWRXZWIgQ3J5cHRvIEFQSSBpcyB1bmF2YWlsYWJsZUNhbGxpbmcgV2ViIEFQSSBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzIGZhaWxlZHJhbmRTZWN1cmU6IFZ4V29ya3MgUk5HIG1vZHVsZSBpcyBub3QgaW5pdGlhbGl6ZWROb2RlLmpzIGNyeXB0byBDb21tb25KUyBtb2R1bGUgaXMgdW5hdmFpbGFibGVDYWxsaW5nIE5vZGUuanMgQVBJIGNyeXB0by5yYW5kb21GaWxsU3luYyBmYWlsZWROb2RlLmpzIEVTIG1vZHVsZXMgYXJlIG5vdCBkaXJlY3RseSBzdXBwb3J0ZWQsIHNlZSBodHRwczovL2RvY3MucnMvZ2V0cmFuZG9tI25vZGVqcy1lcy1tb2R1bGUtc3VwcG9ydAAAAGQAAABjcnlwdG8AACcAAAAmAAAAFAAAADIAAAAtAAAALwAAACEAAAAdAAAALQBB8KjAAAszMQAAAC0AAAAwAAAAZQAAAOgREAAPEhAANRIQAEkSEAB7EhAAqBIQANcSEAD4EhAAFRMQAEGsqcAAC70RQhMQAHMTEACgExAA0BMQAGUAAAAIAAAABAAAAGYAAAAvaG9tZS92YWR1Z2EvLmNhcmdvL3JlZ2lzdHJ5L3NyYy9pbmRleC5jcmF0ZXMuaW8tNmYxN2QyMmJiYTE1MDAxZi9yYXlvbi1jb3JlLTEuMTIuMS9zcmMvcmVnaXN0cnkucnNUaGUgZ2xvYmFsIHRocmVhZCBwb29sIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4AzBQQAGMAAACoAAAACgAAAMwUEABjAAAAwAAAABYAAADMFBAAYwAAACsBAAA2AAAAZwAAAMwUEABjAAAAMgMAAC8AAADMFBAAYwAAADgDAAAqAAAAzBQQAGMAAACPAwAAJgAAAFRocmVhZFBvb2xCdWlsZEVycm9ya2luZGgAAAAEAAAABAAAAGkAAAAvaG9tZS92YWR1Z2EvLmNhcmdvL3JlZ2lzdHJ5L3NyYy9pbmRleC5jcmF0ZXMuaW8tNmYxN2QyMmJiYTE1MDAxZi9jcm9zc2JlYW0tZXBvY2gtMC45LjE4L3NyYy9pbnRlcm5hbC5yc+wVEABoAAAAgQEAADkAAABUcmllZCB0byBzaHJpbmsgdG8gYSBsYXJnZXIgY2FwYWNpdHlkFhAAJAAAAC9ydXN0Yy8xMjlmM2I5OTY0YWY0ZDRhNzA5ZDEzODM5MzBhZGUxMmRmZTdjMDgxL2xpYnJhcnkvYWxsb2Mvc3JjL3Jhd192ZWMucnOQFhAATAAAAAMCAAAJAAAAY2Fubm90IHJlY3Vyc2l2ZWx5IGFjcXVpcmUgbXV0ZXjsFhAAIAAAAAAvcnVzdGMvMTI5ZjNiOTk2NGFmNGQ0YTcwOWQxMzgzOTMwYWRlMTJkZmU3YzA4MS9saWJyYXJ5L3N0ZC9zcmMvc3lzL3N5bmMvbXV0ZXgvbm9fdGhyZWFkcy5ycwAAABUXEABcAAAAFAAAAAkAAABvcGVyYXRpb24gbm90IHN1cHBvcnRlZCBvbiB0aGlzIHBsYXRmb3JthBcQACgAAAAkAAAAAgAAAKwXEABrAAAAQAAAAAQAAABsAAAAdGhyZWFkIG5hbWUgbWF5IG5vdCBjb250YWluIGludGVyaW9yIG51bGwgYnl0ZXMAbQAAABAAAAAEAAAAbgAAAC9ydXN0Yy8xMjlmM2I5OTY0YWY0ZDRhNzA5ZDEzODM5MzBhZGUxMmRmZTdjMDgxL2xpYnJhcnkvc3RkL3NyYy90aHJlYWQvbW9kLnJzAAAAEBgQAE0AAADsAQAAJAAAAE51bEVycm9ybwAAAAQAAAAEAAAAcAAAAG8AAAAEAAAABAAAAHEAAABHbG9iYWxQb29sQWxyZWFkeUluaXRpYWxpemVkQ3VycmVudFRocmVhZEFscmVhZHlJblBvb2xJT0Vycm9yAAAAbwAAAAQAAAAEAAAAcgAAAGNhbm5vdCBhY2Nlc3MgYSBUaHJlYWQgTG9jYWwgU3RvcmFnZSB2YWx1ZSBkdXJpbmcgb3IgYWZ0ZXIgZGVzdHJ1Y3Rpb24AAHMAAAAAAAAAAQAAAEQAAAAvcnVzdGMvMTI5ZjNiOTk2NGFmNGQ0YTcwOWQxMzgzOTMwYWRlMTJkZmU3YzA4MS9saWJyYXJ5L3N0ZC9zcmMvdGhyZWFkL2xvY2FsLnJzAEAZEABPAAAABgEAABoAAABhc3NlcnRpb24gZmFpbGVkOiB0LmdldCgpLmVxKCYoc2VsZiBhcyAqY29uc3QgXykpL2hvbWUvdmFkdWdhLy5jYXJnby9yZWdpc3RyeS9zcmMvaW5kZXguY3JhdGVzLmlvLTZmMTdkMjJiYmExNTAwMWYvcmF5b24tY29yZS0xLjEyLjEvc3JjL3JlZ2lzdHJ5LnJz0RkQAGMAAACtAgAADQAAAGFzc2VydGlvbiBmYWlsZWQ6IHQuZ2V0KCkuaXNfbnVsbCgpANEZEABjAAAAwAIAAA0AAABhc3NlcnRpb24gZmFpbGVkOiBuX3RocmVhZHMgPD0gVEhSRUFEU19NQVgvaG9tZS92YWR1Z2EvLmNhcmdvL3JlZ2lzdHJ5L3NyYy9pbmRleC5jcmF0ZXMuaW8tNmYxN2QyMmJiYTE1MDAxZi9yYXlvbi1jb3JlLTEuMTIuMS9zcmMvc2xlZXAvbW9kLnJzAACiGhAAZAAAAD4AAAAJAAAAohoQAGQAAACDAAAANAAAAKIaEABkAAAAIgEAADQAAAAvaG9tZS92YWR1Z2EvLmNhcmdvL3JlZ2lzdHJ5L3NyYy9pbmRleC5jcmF0ZXMuaW8tNmYxN2QyMmJiYTE1MDAxZi9yYXlvbi1jb3JlLTEuMTIuMS9zcmMvcmVnaXN0cnkucnMAOBsQAGMAAAB1AwAAIwAAAE9uY2UgaW5zdGFuY2UgaGFzIHByZXZpb3VzbHkgYmVlbiBwb2lzb25lZAAArBsQACoAAABvbmUtdGltZSBpbml0aWFsaXphdGlvbiBtYXkgbm90IGJlIHBlcmZvcm1lZCByZWN1cnNpdmVseeAbEAA4AAAAL3J1c3RjLzEyOWYzYjk5NjRhZjRkNGE3MDlkMTM4MzkzMGFkZTEyZGZlN2MwODEvbGlicmFyeS9zdGQvc3JjL3N5bmMvb25jZS5ycyAcEABMAAAAlQAAADIAAAAvaG9tZS92YWR1Z2EvLmNhcmdvL3JlZ2lzdHJ5L3NyYy9pbmRleC5jcmF0ZXMuaW8tNmYxN2QyMmJiYTE1MDAxZi9yYXlvbi1jb3JlLTEuMTIuMS9zcmMvcmVnaXN0cnkucnMAfBwQAGMAAAB1AwAAIwAAAHQAAAAEAAAABAAAAHUAAAAvaG9tZS92YWR1Z2EvLmNhcmdvL3JlZ2lzdHJ5L3NyYy9pbmRleC5jcmF0ZXMuaW8tNmYxN2QyMmJiYTE1MDAxZi9jcm9zc2JlYW0tZXBvY2gtMC45LjE4L3NyYy9pbnRlcm5hbC5yc3YAQfm6wAALmgodEABoAAAAdwAAACwAAAAAHRAAaAAAAIEBAAA5AAAAAQAAAC9ob21lL3ZhZHVnYS8uY2FyZ28vcmVnaXN0cnkvc3JjL2luZGV4LmNyYXRlcy5pby02ZjE3ZDIyYmJhMTUwMDFmL2Nyb3NzYmVhbS1lcG9jaC0wLjkuMTgvc3JjL3N5bmMvbGlzdC5ycwAAAJwdEABpAAAA4gAAABEAAABPbmNlIGluc3RhbmNlIGhhcyBwcmV2aW91c2x5IGJlZW4gcG9pc29uZWQAABgeEAAqAAAAb25lLXRpbWUgaW5pdGlhbGl6YXRpb24gbWF5IG5vdCBiZSBwZXJmb3JtZWQgcmVjdXJzaXZlbHlMHhAAOAAAAC9ydXN0Yy8xMjlmM2I5OTY0YWY0ZDRhNzA5ZDEzODM5MzBhZGUxMmRmZTdjMDgxL2xpYnJhcnkvc3RkL3NyYy9zeW5jL29uY2UucnOMHhAATAAAAJUAAAAyAAAAL3J1c3RjLzEyOWYzYjk5NjRhZjRkNGE3MDlkMTM4MzkzMGFkZTEyZGZlN2MwODEvbGlicmFyeS9jb3JlL3NyYy9zeW5jL2F0b21pYy5yc3RoZXJlIGlzIG5vIHN1Y2ggdGhpbmcgYXMgYSByZWxlYXNlIGZhaWx1cmUgb3JkZXJpbmcANx8QADQAAADoHhAATwAAAEANAAAdAAAAdGhlcmUgaXMgbm8gc3VjaCB0aGluZyBhcyBhbiBhY3F1aXJlLXJlbGVhc2UgZmFpbHVyZSBvcmRlcmluZwAAAIQfEAA9AAAA6B4QAE8AAAA/DQAAHAAAAHVuYWxpZ25lZCBwb2ludGVyAAAA3B8QABEAAAAAAAAAL2hvbWUvdmFkdWdhLy5jYXJnby9yZWdpc3RyeS9zcmMvaW5kZXguY3JhdGVzLmlvLTZmMTdkMjJiYmExNTAwMWYvY3Jvc3NiZWFtLWVwb2NoLTAuOS4xOC9zcmMvYXRvbWljLnJzAAD8HxAAZgAAAHEAAAAFAAAAL2hvbWUvdmFkdWdhLy5jYXJnby9yZWdpc3RyeS9zcmMvaW5kZXguY3JhdGVzLmlvLTZmMTdkMjJiYmExNTAwMWYvY3Jvc3NiZWFtLWVwb2NoLTAuOS4xOC9zcmMvc3luYy9vbmNlX2xvY2sucnMAAHQgEABuAAAAQgAAABMAAAAAAAAAY2Fubm90IGFjY2VzcyBhIFRocmVhZCBMb2NhbCBTdG9yYWdlIHZhbHVlIGR1cmluZyBvciBhZnRlciBkZXN0cnVjdGlvbgAAeQAAAAAAAAABAAAARAAAAC9ydXN0Yy8xMjlmM2I5OTY0YWY0ZDRhNzA5ZDEzODM5MzBhZGUxMmRmZTdjMDgxL2xpYnJhcnkvc3RkL3NyYy90aHJlYWQvbG9jYWwucnMAUCEQAE8AAAAGAQAAGgAAAHoAAAAEAAAABAAAAHsAAAB6AAAABAAAAAQAAABcAAAAY2Fubm90IGFjY2VzcyBhIFRocmVhZCBMb2NhbCBTdG9yYWdlIHZhbHVlIGR1cmluZyBvciBhZnRlciBkZXN0cnVjdGlvbgAAfQAAAAAAAAABAAAARAAAAC9ydXN0Yy8xMjlmM2I5OTY0YWY0ZDRhNzA5ZDEzODM5MzBhZGUxMmRmZTdjMDgxL2xpYnJhcnkvc3RkL3NyYy90aHJlYWQvbG9jYWwucnMAKCIQAE8AAAAGAQAAGgAAAP//////////iCIQAEGgxcAAC9YaIGNhbid0IGJlIHJlcHJlc2VudGVkIGFzIGEgSmF2YVNjcmlwdCBudW1iZXIBAAAAAAAAAKAiEAAsAAAAfgAAAC9ob21lL3ZhZHVnYS8uY2FyZ28vcmVnaXN0cnkvc3JjL2luZGV4LmNyYXRlcy5pby02ZjE3ZDIyYmJhMTUwMDFmL3NlcmRlLXdhc20tYmluZGdlbi0wLjMuMS9zcmMvbGliLnJzAAAA4CIQAGUAAAAYAAAADgAAAH8AAAByZXR1cm4gdGhpc2Nhbm5vdCBhY2Nlc3MgYSBUaHJlYWQgTG9jYWwgU3RvcmFnZSB2YWx1ZSBkdXJpbmcgb3IgYWZ0ZXIgZGVzdHJ1Y3Rpb24AAACMAAAAAAAAAAEAAABEAAAAL3J1c3RjLzEyOWYzYjk5NjRhZjRkNGE3MDlkMTM4MzkzMGFkZTEyZGZlN2MwODEvbGlicmFyeS9zdGQvc3JjL3RocmVhZC9sb2NhbC5ycwDAIxAATwAAAAYBAAAaAAAAY2xvc3VyZSBpbnZva2VkIHJlY3Vyc2l2ZWx5IG9yIGFmdGVyIGJlaW5nIGRyb3BwZWRUcmllZCB0byBzaHJpbmsgdG8gYSBsYXJnZXIgY2FwYWNpdHkAAFIkEAAkAAAAL3J1c3RjLzEyOWYzYjk5NjRhZjRkNGE3MDlkMTM4MzkzMGFkZTEyZGZlN2MwODEvbGlicmFyeS9hbGxvYy9zcmMvcmF3X3ZlYy5yc4AkEABMAAAAAwIAAAkAAABKc1ZhbHVlKCkAAADcJBAACAAAAOQkEAABAAAAbnVsbCBwb2ludGVyIHBhc3NlZCB0byBydXN0cmVjdXJzaXZlIHVzZSBvZiBhbiBvYmplY3QgZGV0ZWN0ZWQgd2hpY2ggd291bGQgbGVhZCB0byB1bnNhZmUgYWxpYXNpbmcgaW4gcnVzdAAAjgAAAAgAAAAEAAAAjwAAAJAAAACOAAAACAAAAAQAAACRAAAATm9uZVNvbWWTAAAABAAAAAQAAACUAAAAlQAAAAwAAAAEAAAAlgAAAJcAAACYAAAAL3J1c3QvZGVwcy9kbG1hbGxvYy0wLjIuNi9zcmMvZGxtYWxsb2MucnNhc3NlcnRpb24gZmFpbGVkOiBwc2l6ZSA+PSBzaXplICsgbWluX292ZXJoZWFkALglEAApAAAAqAQAAAkAAABhc3NlcnRpb24gZmFpbGVkOiBwc2l6ZSA8PSBzaXplICsgbWF4X292ZXJoZWFkAAC4JRAAKQAAAK4EAAANAAAAdG9vIG1hbnkgcnVubmluZyB0aHJlYWRzIGluIHRocmVhZCBzY29wZWAmEAAoAAAAbGlicmFyeS9zdGQvc3JjL3RocmVhZC9zY29wZWQucnOQJhAAIAAAADkAAAAJAAAAmQAAAAQAAAAEAAAAmgAAAEFjY2Vzc0Vycm9yY2FsbGVkIGBSZXN1bHQ6OnVud3JhcCgpYCBvbiBhbiBgRXJyYCB2YWx1ZWxpYnJhcnkvc3RkL3NyYy90aHJlYWQvbW9kLnJzAAYnEAAdAAAAxAIAADAAAABmYWlsZWQgdG8gZ2VuZXJhdGUgdW5pcXVlIHRocmVhZCBJRDogYml0c3BhY2UgZXhoYXVzdGVkADQnEAA3AAAABicQAB0AAAC4BAAADQAAAG1haW4AVGhyZWFkaWQAAACbAAAACAAAAAgAAACcAAAAbmFtZZMAAAAIAAAABAAAAJ0AAABvcGVyYXRpb24gbm90IHN1cHBvcnRlZCBvbiB0aGlzIHBsYXRmb3JtuCcQACgAAAAkAAAAAAAAAAIAAADgJxAAT3Njb2RlAACTAAAABAAAAAQAAACeAAAAa2luZJ8AAAABAAAAAQAAAKAAAABtZXNzYWdlAJUAAAAMAAAABAAAAKEAAABLaW5kRXJyb3IAAACTAAAACAAAAAQAAACiAAAAQ3VzdG9tZXJyb3IAkwAAAAQAAAAEAAAAowAAAG1lbW9yeSBhbGxvY2F0aW9uIG9mICBieXRlcyBmYWlsZWQAAHQoEAAVAAAAiSgQAA0AAABsaWJyYXJ5L3N0ZC9zcmMvYWxsb2MucnOoKBAAGAAAAGIBAAAJAAAAbGlicmFyeS9zdGQvc3JjL3Bhbmlja2luZy5yc9AoEAAcAAAAiwIAAB4AAACVAAAADAAAAAQAAACkAAAAkwAAAAgAAAAEAAAApQAAAJMAAAAIAAAABAAAAKYAAACnAAAAqAAAABAAAAAEAAAAqQAAAKoAAACrAAAAAAAAAAEAAACsAAAArQAAAAgAAAAEAAAArgAAAK8AAACrAAAAAAAAAAEAAACwAAAAVGhyZWFkSWSTAAAABAAAAAQAAACxAAAATm90Rm91bmRQZXJtaXNzaW9uRGVuaWVkQ29ubmVjdGlvblJlZnVzZWRDb25uZWN0aW9uUmVzZXRIb3N0VW5yZWFjaGFibGVOZXR3b3JrVW5yZWFjaGFibGVDb25uZWN0aW9uQWJvcnRlZE5vdENvbm5lY3RlZEFkZHJJblVzZUFkZHJOb3RBdmFpbGFibGVOZXR3b3JrRG93bkJyb2tlblBpcGVBbHJlYWR5RXhpc3RzV291bGRCbG9ja05vdEFEaXJlY3RvcnlJc0FEaXJlY3RvcnlEaXJlY3RvcnlOb3RFbXB0eVJlYWRPbmx5RmlsZXN5c3RlbUZpbGVzeXN0ZW1Mb29wU3RhbGVOZXR3b3JrRmlsZUhhbmRsZUludmFsaWRJbnB1dEludmFsaWREYXRhVGltZWRPdXRXcml0ZVplcm9TdG9yYWdlRnVsbE5vdFNlZWthYmxlRmlsZXN5c3RlbVF1b3RhRXhjZWVkZWRGaWxlVG9vTGFyZ2VSZXNvdXJjZUJ1c3lFeGVjdXRhYmxlRmlsZUJ1c3lEZWFkbG9ja0Nyb3NzZXNEZXZpY2VzVG9vTWFueUxpbmtzSW52YWxpZEZpbGVuYW1lQXJndW1lbnRMaXN0VG9vTG9uZ0ludGVycnVwdGVkVW5zdXBwb3J0ZWRVbmV4cGVjdGVkRW9mT3V0T2ZNZW1vcnlPdGhlclVuY2F0ZWdvcml6ZWRvcGVyYXRpb24gc3VjY2Vzc2Z1bGNvbmR2YXIgd2FpdCBub3Qgc3VwcG9ydGVkwisQABoAAABsaWJyYXJ5L3N0ZC9zcmMvc3lzL3N5bmMvY29uZHZhci9ub190aHJlYWRzLnJzAADkKxAALgAAABQAAAAJAAAACAAAABAAAAARAAAADwAAAA8AAAASAAAAEQAAAAwAAAAJAAAAEAAAAAsAAAAKAAAADQAAAAoAAAANAAAADAAAABEAAAASAAAADgAAABYAAAAMAAAACwAAAAgAAAAJAAAACwAAAAsAAAAXAAAADAAAAAwAAAASAAAACAAAAA4AAAAMAAAADwAAABMAAAALAAAACwAAAA0AAAALAAAABQAAAA0AAACQKRAAmCkQAKgpEAC5KRAAyCkQANcpEADpKRAA+ikQAAYqEAAPKhAAHyoQACoqEAA0KhAAQSoQAEsqEABYKhAAZCoQAHUqEACHKhAAlSoQAKsqEAC3KhAAwioQAMoqEADTKhAA3ioQAOkqEAAAKxAADCsQABgrEAAqKxAAMisQAEArEABMKxAAWysQAG4rEAB5KxAAhCsQAJErEACcKxAAoSsQAEhhc2ggdGFibGUgY2FwYWNpdHkgb3ZlcmZsb3dsLRAAHAAAAC9ydXN0L2Rl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",self.location));const e=kr();("string"==typeof t||"function"==typeof Request&&t instanceof Request||"function"==typeof URL&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:i}=yield function(t,e){return Mr.apply(this,arguments)}(yield t,e);return function(t,e){return sr=t.exports,Rr.__wbindgen_wasm_module=e,mr=null,Ir=null,hr=null,sr}(n,i)})),Nr.apply(this,arguments)}"undefined"==typeof FinalizationRegistry||new FinalizationRegistry((t=>sr.__wbg_relation_free(t>>>0)));const Pr=Tr;function Tr(t,e){const n=Lr();return(Tr=function(t,e){return n[t-=449]})(t,e)}function Lr(){const t=["nodes","123990HtLBVn","locName","warn","removeConnectedEdges","reverse","flat","thrId","Unable to find node ","slice","getSourceNodeId","getNodeMap","coordinates","findEdge","direction","generate_offsets_for_all_vertices","_edgeMap","addConnectedEdges","lineIds","keys","getTargetNodeId","feature","switchDirection","node && !feature && !isStart. nextId++","_updateCache","is_fake","1500184IPwWUB","toFixed","Unable to remove edge ","getEdges","number","findNode","root","equals","addNode","set","myversion","getLineSwitchMap","Unable to remove node ","28bPfIrs","now","setDataProperty","27796eTKbrh","log","Unable to add edge ","replaceVariables","source","isArray","meters","push","map","version","rustGraph","target","_name","targets","edges",",  source or target node is missing.","properties","count_vertices","splice","getDegree","gIdx","$locRole","reset","VisLayers","graph_clear","reduce","coords","wasmId"," - doesn't exist","forEach","_nodeMap","_bumpVersion","3649184kUnmjF","get","feature && !isStart. nextId++","1530252iHhoko","getGraphName","setGraphName","resetNodes","count_hyperedges","getId","then","getEdgeMap","resetEdges","values","6IsddWA","11255DKAuMR","getNodes","getPropertyValue","length","2117633TLaVbZ","removeEdge","isDefDir","item","lineId","getConnectedEdges","segrPath","batchAddEdges","geometry","sources","getEditableLines","toString","getSiblingIds","_cache","add","parPath","string","getVisible","Feature","addEdge"];return(Lr=function(){return t})()}!function(t){const e=Tr,n=t();for(;;)try{if(parseInt(e(503))/1*(parseInt(e(500))/2)+-parseInt(e(462))/3+parseInt(e(487))/4+-parseInt(e(549))/5+-parseInt(e(548))/6*(-parseInt(e(553))/7)+-parseInt(e(535))/8+-parseInt(e(538))/9==396952)break;n.push(n.shift())}catch(t){n.push(n.shift())}}(Lr);class Fr{get[Pr(539)](){const t=Pr;return this[t(515)][t(452)]()}get[Pr(555)](){const t=Pr;return this[t(475)]===t(450)}get[Pr(550)](){const t=Pr;return this[t(485)]("nodes",(()=>Object[t(547)](this[t(533)]))),this._cache[t(536)](t(461))}get getWasmIdsNodeMap(){var t;const e=Pr,n=[];return null==(t=this[e(550)])||t[e(532)]((t=>{const i=e,r=null==t?void 0:t[i(551)](i(530));r&&n[i(510)]([r,t])})),new Map(n)}get[Pr(472)](){return this[Pr(533)]}get[Pr(490)](){const t=Pr;return this._updateCache(t(517),(()=>Object[t(547)](this[t(477)]))),this[t(454)][t(536)](t(517))}[Pr(545)](){return this._edgeMap}get isEmpty(){const t=Pr;return 0===Object[t(480)](this[t(533)])[t(552)]}_bumpVersion(){this[Pr(512)]+=1}[Pr(485)](t,e){const n=Pr;this[n(454)][n(496)](t,e,this.version)}get[Pr(498)](){var t;const e=Pr,n=[];return null==(t=this[e(451)])||t.forEach((t=>{const i=e;null!=t&&t[i(519)]&&n[i(510)]([t[i(519)][i(463)],t])})),new Map(n)}get[Pr(451)](){var t,e,n;const i=Pr,{getVisLayers:r}=this[i(493)][i(526)],o=((t,e,n=Wi(470),i)=>{const r=Wi;if("primary"===e&&n===r(470))return t[r(464)]((t=>t.name===e));const o=(null==t?void 0:t[r(464)])&&t[r(464)]((t=>t[r(402)]===n));return o?void 0!==i?o.children[i]:o[r(401)][r(464)]((t=>t[r(406)]===e)):null})(r,"stat2"),l=!o||!o[i(458)],c=[],u=new Map;let h=0;const g=this.getNodeMap;if(this.getEdges[i(532)](((t,e)=>{var n,r;const o=i;if(t[o(551)](o(486)))return;const A=t[o(551)](o(456)),d=this[o(555)]?A:A[o(470)]()[o(466)]();if(null==d||!d[o(552)])return;{t[o(502)](o(557),h);const e=t[o(551)](o(479));null==e||e[o(455)](h)}const p=null==d?void 0:d.at(0);if("string"!=typeof p)return;const f=null==(n=this.findNode(p))?void 0:n.getPropertyValue(o(482));if(!(null==f?void 0:f[o(519)]))return;const m=t[o(551)]("rust_edge_id");typeof m===o(491)&&u.set(m,e);const I=f[o(519)].thrId,y=t[o(551)]("lineExtraProps"),C=null==d?void 0:d.at(-1),_=C?null==(r=null==g?void 0:g[C])?void 0:r[o(551)](o(482)):null,v=f[o(449)];let B;_&&(B=_[o(449)]);const w=null==y?void 0:y[o(468)],b=void 0!==w?w:I,Q=Array.isArray(d)&&d.length>0?function(t){var e;const n=Pr,{path:i,nodeMap:r,findEdge:o,addEdge:s,lineId:a,graph:A}=t;if(A[n(513)][n(520)](),A[n(513)][n(542)](),0===i[n(552)])return[[]];const l=[];let c=[];for(let t=0;t<i.length;t++){const A=i[t],u=ji(A,r);if(typeof A===n(457)&&c[n(552)]>0){if(c[n(510)]({item:A,gIdx:t,coords:u}),c[n(552)]>1){const t=c.at(0)[n(556)],A=c.at(-1)[n(556)],l=null==c?void 0:c.map((t=>t[n(529)])),u=t+"-"+A;let h;const g=r[t],d=r[A];if(!g||!d)continue;const p=i[0],f=null!=(e=o(t+"-"+A))?e:o(A+"-"+t);if(f){if(p!==t){const t=f.getPropertyValue(n(479)),e=null==f?void 0:f.getPropertyValue("trespass");null==t||t[n(455)](a),e[p]=a}}else{h={id:u,targetId:t,sourceId:A,directed:!0,data:{is_fake:!0,parPath:l,lineIds:new Set([a]),trespass:{[p]:a}}};s(new E(h))}}l[n(510)](c),c=[]}c[n(510)]({item:A,gIdx:t,coords:u})}return l}({path:this.isDefDir?d:d[o(470)]()[o(466)](),nodeMap:g,findEdge:this[o(474)],addEdge:this[o(460)],lineId:h,graph:this}):[],x=[];Q[o(532)](((t,e)=>{const n=o;(0===e||e===Q[n(552)]-1||2!==t[n(552)])&&x[n(510)](t)})),!x[o(552)]&&Array.isArray(d)&&x.push([{item:p,gIdx:0},{item:d.at(-1),gIdx:1}]);const D=l?x.filter((t=>t[o(552)]>1)).map((t=>Ki(t,g))):B?[[v[o(473)][o(470)](0,2),B[o(473)][o(470)](0,2)]]:null;if(!D)return;const S=Array[o(508)](d)&&(null==d?void 0:d[o(511)](((t,e)=>({item:t,gIdx:e})))),M=S&&(null==S?void 0:S.length)?Ki(S,g):[];c.push({id:h,type:o(459),geometry:{type:"MultiLineString",coordinates:D},properties:a(s({},f.properties,y,void 0!==b&&{thrId:b}),{locName:p,parPath:d,numCoords:M,segrPath:Q,segrPathVisible:x,rust_edge_id:m})}),h++})),!l||!c.length)return c;const d=null==(t=this[i(513)])?void 0:t[i(476)]();if(!d)return c;for(let t=0;t<d[i(552)]-1;t+=3){const r=u[i(536)](d[t]),o=c[r];if(!o)continue;const s=o[i(519)][i(559)],a=0===d[t+1],l=o&&(null==(e=null==o?void 0:o.geometry[i(473)])?void 0:e.at(a?-1:0)),h=d[t+2]/10;if(l&&(null==l?void 0:l.length)>1){const t=null==l?void 0:l[0],e=null==l?void 0:l.at(-1);if(t&&e){const r=[t,e],o=ki(A(a?r.slice()[i(466)]():r),h,{units:i(509)}),[c,u]=null==(n=null==o?void 0:o.geometry)?void 0:n[i(473)],g=Ui(c,u)[i(511)]((t=>t[i(511)]((t=>parseFloat(t[i(488)](6)))))),d=1,p=a?g[i(470)]()[i(466)]():g;l.splice(d,0,...p);const f=a?-1:0,m=s.at(f),I=m[0][i(523)],y=[g[0],g[1]][i(511)](((t,e)=>({item:t,gIdx:I+1}))),C=1;m[i(521)](C,0,...y)}}}return c}constructor(t,e=null){const n=Tr;this[n(533)]={},this._edgeMap={},this._name=Date[n(501)]()[n(452)](),this[n(512)]=0,this[n(497)]=0,this[n(454)]=new h,this[n(475)]=n(450),this[n(540)]=t=>{this[n(515)]=t},this[n(483)]=()=>{const t=n;this[t(475)]=this[t(475)]===t(516)?t(450):t(516)},this[n(495)]=t=>{const e=n;this[e(533)][t[e(543)]()]=t},this.batchAddNodes=t=>{const e=n;let i=Object[e(480)](this._nodeMap).length;const r=0===i,o=t[e(528)](((t,n,o)=>{var s,a;const A=e,l=n.getPropertyValue("feature");if(l&&!r?console[A(504)](A(537),i):!r&&console[A(504)](A(484),i),l&&r&&(l.id=i++),null==l?void 0:l[A(519)].locName){const t=null==l?void 0:l[A(449)];if(A(473)in t){const e=null==l?void 0:l.properties[A(468)],r=function(t){const e=Tr;return Array[e(508)](t)?t[e(467)](1/0)[e(511)](Number):[]}(t[A(473)]),o=new Float64Array(r),c=null==(s=this[A(513)])?void 0:s.create_vertex(i,o,e,!0);c&&(null==(a=this[A(513)])||a.get_vertex_weight(c)),void 0!==c&&n[A(502)](A(530),c)}}return t[n.getId()]=n,t}),s({},this._nodeMap));this[e(533)]=o,this._bumpVersion()},this[n(492)]=t=>this._nodeMap[t],this.updateNode=t=>{const e=n;this[e(533)][t[e(543)]()]=t,this[e(534)]()},this[n(460)]=t=>{const e=n,i=this[e(492)](t[e(471)]()),r=this[e(492)](t[e(481)]());i&&r?(this[e(477)][t[e(543)]()]=t,i[e(478)](t),r.addConnectedEdges(t)):console[e(464)](e(505)+t.id+e(518))},this[n(560)]=t=>{const e=n;t[e(532)]((t=>this[e(460)](t))),this[e(534)]()},this.updateEdge=t=>{const e=n;this[e(477)][t[e(543)]()]=t,this[e(534)]()},this.removeNode=t=>{const e=n,i=this[e(492)](t);i?(i[e(558)]()[e(532)]((t=>{const n=e;delete this._edgeMap[t[n(543)]()]})),delete this._nodeMap[t],this[e(534)]()):console[e(464)](e(499)+t+e(531))},this[n(554)]=t=>{const e=n,i=this.findEdge(t);if(!i)return void console[e(464)](e(489)+t+" - doesn't exist");const r=this[e(492)](i[e(471)]()),o=this[e(492)](i[e(481)]());delete this._edgeMap[t],null==r||r[e(465)](i),null==o||o.removeConnectedEdges(i),this._bumpVersion()},this[n(474)]=t=>this[n(477)][t],this.getConnectedEdges=t=>{const e=n,i=this[e(492)](t);return i?i[e(558)]():(console[e(464)](e(469)+t+e(531)),[])},this.getNodeSiblings=t=>{const e=n,i=this[e(492)](t);return i?i[e(453)]().map((t=>this[e(492)](t))):(console.warn("Unable to find node "+t+e(531)),[])},this[n(522)]=t=>{const e=n,i=this.findNode(t);return i?i.getDegree():(console[e(464)](e(469)+t+e(531)),0)},this[n(541)]=()=>{const t=n;this[t(533)]={},this[t(534)]()},this[n(546)]=()=>{const t=n;this._edgeMap={},this[t(534)]()},this[n(525)]=()=>{var t;const e=n;this.resetNodes(),this[e(546)](),null==(t=this.rustGraph)||t[e(527)](),this._bumpVersion()},this.triggerUpdate=()=>{this[n(534)]()},this[n(494)]=t=>{const e=n;return!!(t&&t instanceof Fr)&&this[e(512)]===t[e(512)]},this.root=t,Rr()[n(544)]((()=>{this.rustGraph=new xr}));const i=t[n(506)](n(524));let r=i===n(514),o=i===n(507);const a=r?n(450):o?n(516):void 0;this[n(475)]=a||n(450),function(t,e,n){O(t)?ln(t,t,e,n):fi((function(){var i=$n(t,n)[ut];if(!t[Dn]){var r=Object.getPrototypeOf(t),o=new Set([].concat(q(t),q(r)));o.delete("constructor"),o.delete(ut),U(r,Dn,o)}t[Dn].forEach((function(t){return i.make_(t,!e||!(t in e)||e[t])}))}))}(this,{_bumpVersion:tn,getEditableLines:ie,addEdge:tn,addNode:tn,getNodes:ie},{autoBind:!0}),e&&(this[n(533)]=e._nodeMap,this[n(477)]=e[n(477)],this[n(515)]=e&&e._name)}}function Or(t,e){const n=Gr();return(Or=function(t,e){return n[t-=175]})(t,e)}function Gr(){const t=["223262HjnFnN","1543522sDHGzR","7067709rnGJFv","8xTeAoU","261085ePzGnp","6fUiQWd","4472475VhJSpT","1850608wrwLpZ","955401FXZNdC","Hello there, "];return(Gr=function(){return t})()}!function(t){const e=Or,n=t();for(;;)try{if(parseInt(e(175))/1+-parseInt(e(176))/2+-parseInt(e(183))/3*(-parseInt(e(178))/4)+parseInt(e(179))/5*(-parseInt(e(180))/6)+-parseInt(e(181))/7+parseInt(e(182))/8+parseInt(e(177))/9==413920)break;n.push(n.shift())}catch(t){n.push(n.shift())}}(Gr)},4224:t=>{var e=Math.PI/180,n=180/Math.PI;function i(t){var e=r(t[0]+1,t[2]);return[r(t[0],t[2]),o(t[1]+1,t[2]),e,o(t[1],t[2])]}function r(t,e){return t/Math.pow(2,e)*360-180}function o(t,e){var i=Math.PI-2*Math.PI*t/Math.pow(2,e);return n*Math.atan(.5*(Math.exp(i)-Math.exp(-i)))}function s(t,e,n){var i=h(t,e,n);return i[0]=Math.floor(i[0]),i[1]=Math.floor(i[1]),i}function a(t){return[[2*t[0],2*t[1],t[2]+1],[2*t[0]+1,2*t[1],t[2]+1],[2*t[0]+1,2*t[1]+1,t[2]+1],[2*t[0],2*t[1]+1,t[2]+1]]}function A(t){return t[0]%2==0&&t[1]%2==0?[t[0]/2,t[1]/2,t[2]-1]:t[0]%2==0&&!t[1]%2==0?[t[0]/2,(t[1]-1)/2,t[2]-1]:!t[0]%2==0&&t[1]%2==0?[(t[0]-1)/2,t[1]/2,t[2]-1]:[(t[0]-1)/2,(t[1]-1)/2,t[2]-1]}function l(t){return a(A(t))}function c(t,e){for(var n=0;n<t.length;n++)if(u(t[n],e))return!0;return!1}function u(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function h(t,n,i){var r=Math.sin(n*e),o=Math.pow(2,i);return[o*(t/360+.5),o*(.5-.25*Math.log((1+r)/(1-r))/Math.PI),i]}t.exports={tileToGeoJSON:function(t){var e=i(t);return{type:"Polygon",coordinates:[[[e[0],e[1]],[e[0],e[3]],[e[2],e[3]],[e[2],e[1]],[e[0],e[1]]]]}},tileToBBOX:i,getChildren:a,getParent:A,getSiblings:l,hasTile:c,hasSiblings:function(t,e){for(var n=l(t),i=0;i<n.length;i++)if(!c(e,n[i]))return!1;return!0},tilesEqual:u,tileToQuadkey:function(t){for(var e="",n=t[2];n>0;n--){var i=0,r=1<<n-1;t[0]&r&&i++,t[1]&r&&(i+=2),e+=i.toString()}return e},quadkeyToTile:function(t){for(var e=0,n=0,i=t.length,r=i;r>0;r--){var o=1<<r-1;switch(t[i-r]){case"0":break;case"1":e|=o;break;case"2":n|=o;break;case"3":e|=o,n|=o}}return[e,n,i]},pointToTile:s,bboxToTile:function(t){var e=s(t[0],t[1],32),n=s(t[2],t[3],32),i=[e[0],e[1],n[0],n[1]],r=function(t){for(var e=28,n=0;n<e;n++){var i=1<<32-(n+1);if((t[0]&i)!=(t[2]&i)||(t[1]&i)!=(t[3]&i))return n}return e}(i);return 0===r?[0,0,0]:[i[0]>>>32-r,i[1]>>>32-r,r]},pointToTileFraction:h}},922:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});class i{constructor(t=[],e=r){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let t=(this.length>>1)-1;t>=0;t--)this._down(t)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:n}=this,i=e[t];for(;t>0;){const r=t-1>>1,o=e[r];if(n(i,o)>=0)break;e[t]=o,t=r}e[t]=i}_down(t){const{data:e,compare:n}=this,i=this.length>>1,r=e[t];for(;t<i;){let i=1+(t<<1),o=e[i];const s=i+1;if(s<this.length&&n(e[s],o)<0&&(i=s,o=e[s]),n(o,r)>=0)break;e[t]=o,t=i}e[t]=r}}function r(t,e){return t<e?-1:t>e?1:0}},62:t=>{t.exports=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,n=[],i=0;i<t.rangeCount;i++)n.push(t.getRangeAt(i));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null}return t.removeAllRanges(),function(){"Caret"===t.type&&t.removeAllRanges(),t.rangeCount||n.forEach((function(e){t.addRange(e)})),e&&e.focus()}}},9482:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return r(e,t),e},s=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0});var a=o(n(4420));s(n(4420),e),e.default=a},4420:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TSIDGenerator=e.TSID=e.getTsid=void 0;var i=n(2795),r=new Date("2020-01-01T00:00:00+00:00").getTime(),o=4194303,s="0123456789ABCDEFGHJKMNPQRSTVWXYZ",a=Array.from({length:128},(function(){return-1}));function A(t,e){for(var n=0;n<t.length;n++)a[t.charCodeAt(n)]=e+n,a[t.charCodeAt(n).toString().toUpperCase().charCodeAt(0)]=e+n}A("0123456789",0),A("abcdefghjkmnpqrstvwxyz",10),A("oi",0),A("l",1);e.getTsid=function(){return l.create()};var l=function(){function t(t){var e=this;this.toBigInt=function(){return e._number},this.toString=function(){return e.toCanonicalString()},this.toHexString=function(){return(0,i.encode)(e._number,16,16)},this.toDecimalString=function(){return(0,i.encode)(e._number,10)},this.toBase62String=function(){return(0,i.encode)(e._number,62)},this._number=t&BigInt("0xFFFFFFFFFFFFFFFF"),this._epoch=r}return t.prototype.setEpoch=function(t){this._epoch=t},Object.defineProperty(t.prototype,"timestamp",{get:function(){return this._epoch+Number(this._number>>BigInt(22))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"random",{get:function(){return Number(this._number&BigInt(o))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"number",{get:function(){return this._number},enumerable:!1,configurable:!0}),t.prototype.toCanonicalString=function(){var t=this;return Array.from({length:13},(function(e,n){return s[Number(t._number>>BigInt(60-5*n)&BigInt(31))]})).join("")},t.prototype.toBytes=function(){for(var t=new Uint8Array(8),e=0;e<8;e++)t[e]=Number(this._number>>BigInt(8*(7-e))&BigInt(255));return t},t.prototype.toStringWithFormat=function(t){var e;switch(void 0===t&&(t="S"),t){case"S":e=this.toCanonicalString();break;case"s":e=this.toCanonicalString().toLowerCase();break;case"X":e=(0,i.encode)(this._number,16,16);break;case"x":e=(0,i.encode)(this._number,16,16).toLowerCase();break;case"d":e=(0,i.encode)(this._number,10);break;case"z":e=(0,i.encode)(this._number,62)}return e},t.create=function(){return u.create()},t.fromBytes=function(e){if(8!==e.length)throw new Error("Invalid TSID bytes (len=".concat(e.length," bytes, expected ").concat(8,")"));return new t(BigInt("0x"+Array.from(e).map((function(t){return t.toString(16).padStart(2,"0")})).join("")))},t.fromString=function(e,n){var r;switch(void 0===n&&(n="S"),n){case"S":case"s":if(13!==e.length)throw new Error("Invalid TSID string: (len=".concat(e.length," chars, but expected ").concat(13,")"));r=Array.from(e).reduce((function(t,e,n){return t+(BigInt(s.indexOf(e.toUpperCase()))<<BigInt(5*(13-n-1)))}),BigInt(0));break;case"X":case"x":if(16!==e.length)throw new Error("Invalid TSID string: (len=".concat(e.length," chars, but expected ").concat(16,")"));r=BigInt((0,i.decode)(e.toUpperCase(),16));break;case"d":r=BigInt((0,i.decode)(e,10));break;case"z":r=BigInt((0,i.decode)(e,62));break;default:throw new Error("Invalid format: '".concat(n,"'"))}return new t(r)},t}();e.TSID=l;var c=function(){function t(t,e,n,s){if(void 0===t&&(t=null),void 0===e&&(e=10),void 0===n&&(n=r),null!==t&&t<0)throw new Error("Invalid node: ".concat(t));if(e<0||e>20)throw new Error("Invalid node_bits: ".concat(e));if(this.randomFunction=s||function(t){return BigInt((0,i.uniformInt)(0,Math.pow(2,t)))},this.node=null===t?Number(BigInt((0,i.uniformInt)(0,Math.pow(2,20)))>>BigInt(20-e)):t,this.node>>e>0)throw new Error("Node ".concat(this.node," too large for node_bits==").concat(e));this._epoch=n,this._nodeBits=e,this._counterBits=22-e,this.counter=this.randomFunction(this._counterBits),this._milliseconds=(new Date).getTime(),this._counterMask=BigInt(o)>>BigInt(e),this._nodeMask=BigInt(o)>>BigInt(this._counterBits)}return t.prototype.create=function(){var t=(new Date).getTime();if(t-this._milliseconds<1)this.counter+=BigInt(1),this.counter>>BigInt(this._counterBits)!==BigInt(0)&&(this._milliseconds+=1,this.counter=BigInt(0));else{this._milliseconds=t;var e=this.randomFunction(this._counterBits);this.counter=e&this._counterMask}var n=BigInt(this._milliseconds-this._epoch)<<BigInt(22),i=(BigInt(this.node)&this._nodeMask)<<BigInt(this._counterBits),r=this.counter&this._counterMask,o=new l(n+i+r);return o.setEpoch(this._epoch),o},t}();e.TSIDGenerator=c;var u=new c},2795:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.uniformInt=e.decode=e.encode=void 0;var n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";e.encode=function(t,e,i){for(var r=[];t>0;)r.push(n[Number(t%BigInt(e))]),t=BigInt(Math.floor(Number(t/BigInt(e))));return i&&r.length<i&&r.push.apply(r,Array(i-r.length).fill("0")),r.reverse().join("")},e.decode=function(t,e){for(var i=0,r=0,o=t;r<o.length;r++){var s=o[r];i*=e,i+=n.indexOf(s)}return i},e.uniformInt=function(t,e){return Math.floor(Math.random()*(e-t+1))+t}},7155:function(t,e){!function(t){"use strict";function e(){}function n(t){this.message=t||""}function i(t){this.message=t||""}function r(t){this.message=t||""}function o(){}function s(t){return null===t?Nt:t.color}function a(t){return null===t?null:t.parent}function A(t,e){null!==t&&(t.color=e)}function l(t){return null===t?null:t.left}function c(t){return null===t?null:t.right}function u(){this.root_=null,this.size_=0}function h(){}function g(){this.array_=[],arguments[0]instanceof Ct&&this.addAll(arguments[0])}function d(){}function p(t){this.message=t||""}function f(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,i=1 in arguments&&parseInt(Number(arguments[1]),10)||0;i=i<0?Math.max(n+i,0):Math.min(i,n);var r=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(r=r<0?Math.max(n+arguments[2],0):Math.min(r,n);i<r;)e[i]=t,++i;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var m=function(){};m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},m.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var I=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),y=function(){},C={MAX_VALUE:{configurable:!0}};y.isNaN=function(t){return Number.isNaN(t)},y.doubleToLongBits=function(t){return t},y.longBitsToDouble=function(t){return t},y.isInfinite=function(t){return!Number.isFinite(t)},C.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(y,C);var E=function(){},_=function(){},v=function(){},B=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},w={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};B.prototype.setOrdinate=function(t,e){switch(t){case B.X:this.x=e;break;case B.Y:this.y=e;break;case B.Z:this.z=e;break;default:throw new I("Invalid ordinate index: "+t)}},B.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!m.equalsWithTolerance(this.x,e.x,n)&&!!m.equalsWithTolerance(this.y,e.y,n)}},B.prototype.getOrdinate=function(t){switch(t){case B.X:return this.x;case B.Y:return this.y;case B.Z:return this.z}throw new I("Invalid ordinate index: "+t)},B.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||y.isNaN(this.z))&&y.isNaN(t.z)},B.prototype.equals=function(t){return t instanceof B&&this.equals2D(t)},B.prototype.equalInZ=function(t,e){return m.equalsWithTolerance(this.z,t.z,e)},B.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},B.prototype.clone=function(){},B.prototype.copy=function(){return new B(this)},B.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},B.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return Math.sqrt(e*e+n*n+i*i)},B.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},B.prototype.hashCode=function(){var t=17;return 37*(t=37*t+B.hashCode(this.x))+B.hashCode(this.y)},B.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},B.prototype.interfaces_=function(){return[E,_,e]},B.prototype.getClass=function(){return B},B.hashCode=function(){if(1===arguments.length){var t=arguments[0];return y.doubleToLongBits(t),Math.trunc(0)}},w.DimensionalComparator.get=function(){return b},w.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},w.NULL_ORDINATE.get=function(){return y.NaN},w.X.get=function(){return 0},w.Y.get=function(){return 1},w.Z.get=function(){return 2},Object.defineProperties(B,w);var b=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new I("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};b.prototype.compare=function(t,e){var n=t,i=e,r=b.compare(n.x,i.x);if(0!==r)return r;var o=b.compare(n.y,i.y);return 0!==o?o:this._dimensionsToTest<=2?0:b.compare(n.z,i.z)},b.prototype.interfaces_=function(){return[v]},b.prototype.getClass=function(){return b},b.compare=function(t,e){return t<e?-1:t>e?1:y.isNaN(t)?y.isNaN(e)?0:-1:y.isNaN(e)?1:0};var Q=function(){};Q.prototype.create=function(){},Q.prototype.interfaces_=function(){return[]},Q.prototype.getClass=function(){return Q};var x=function(){},D={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};x.prototype.interfaces_=function(){return[]},x.prototype.getClass=function(){return x},x.toLocationSymbol=function(t){switch(t){case x.EXTERIOR:return"e";case x.BOUNDARY:return"b";case x.INTERIOR:return"i";case x.NONE:return"-"}throw new I("Unknown location value: "+t)},D.INTERIOR.get=function(){return 0},D.BOUNDARY.get=function(){return 1},D.EXTERIOR.get=function(){return 2},D.NONE.get=function(){return-1},Object.defineProperties(x,D);var S=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},M=function(){},k={LOG_10:{configurable:!0}};M.prototype.interfaces_=function(){return[]},M.prototype.getClass=function(){return M},M.log10=function(t){var e=Math.log(t);return y.isInfinite(e)||y.isNaN(e)?e:e/M.LOG_10},M.min=function(t,e,n,i){var r=t;return e<r&&(r=e),n<r&&(r=n),i<r&&(r=i),r},M.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],o=arguments[2];return i<r?r:i>o?o:i}},M.wrap=function(t,e){return t<0?e- -t%e:t%e},M.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var i=arguments[1],r=arguments[2],o=arguments[3],s=arguments[0];return i>s&&(s=i),r>s&&(s=r),o>s&&(s=o),s}},M.average=function(t,e){return(t+e)/2},k.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(M,k);var R=function(t){this.str=t};R.prototype.append=function(t){this.str+=t},R.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},R.prototype.toString=function(t){return this.str};var N=function(t){this.value=t};N.prototype.intValue=function(){return this.value},N.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},N.isNaN=function(t){return Number.isNaN(t)};var P=function(){};P.isWhitespace=function(t){return t<=32&&t>=0||127===t},P.toUpperCase=function(t){return t.toUpperCase()};var T=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length)if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0]));else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i,r)}},L={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};T.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},T.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),i=T.magnitude(n._hi),r=T.TEN.pow(i);(n=n.divide(r)).gt(T.TEN)?(n=n.divide(T.TEN),i+=1):n.lt(T.ONE)&&(n=n.multiply(T.TEN),i-=1);for(var o=i+1,s=new R,a=T.MAX_PRINT_DIGITS-1,A=0;A<=a;A++){t&&A===o&&s.append(".");var l=Math.trunc(n._hi);if(l<0)break;var c=!1,u=0;l>9?(c=!0,u="9"):u="0"+l,s.append(u),n=n.subtract(T.valueOf(l)).multiply(T.TEN),c&&n.selfAdd(T.TEN);var h=!0,g=T.magnitude(n._hi);if(g<0&&Math.abs(g)>=a-A&&(h=!1),!h)break}return e[0]=i,s.toString()},T.prototype.sqr=function(){return this.multiply(this)},T.prototype.doubleValue=function(){return this._hi+this._lo},T.prototype.subtract=function(){if(arguments[0]instanceof T){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},T.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},T.prototype.isZero=function(){return 0===this._hi&&0===this._lo},T.prototype.selfSubtract=function(){if(arguments[0]instanceof T){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},T.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},T.prototype.min=function(t){return this.le(t)?this:t},T.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof T){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,s=null,a=null,A=null,l=null,c=null,u=null;return A=this._hi/n,u=(r=(l=T.SPLIT*A)-(r=l-A))*(s=(u=T.SPLIT*n)-(s=u-n))-(c=A*n)+r*(a=n-s)+(o=A-r)*s+o*a,u=A+(l=(this._hi-c-u+this._lo-A*i)/n),this._hi=u,this._lo=A-u+l,this}},T.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},T.prototype.divide=function(){if(arguments[0]instanceof T){var t=arguments[0],e=null,n=null,i=null,r=null,o=null,s=null,a=null,A=null;return n=(o=this._hi/t._hi)-(e=(s=T.SPLIT*o)-(e=s-o)),A=e*(i=(A=T.SPLIT*t._hi)-(i=A-t._hi))-(a=o*t._hi)+e*(r=t._hi-i)+n*i+n*r,s=(this._hi-a-A+this._lo-o*t._lo)/t._hi,new T(A=o+s,o-A+s)}if("number"==typeof arguments[0]){var l=arguments[0];return y.isNaN(l)?T.createNaN():T.copy(this).selfDivide(l,0)}},T.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},T.prototype.pow=function(t){if(0===t)return T.valueOf(1);var e=new T(this),n=T.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2==1&&n.selfMultiply(e),(i/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},T.prototype.ceil=function(){if(this.isNaN())return T.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new T(t,e)},T.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},T.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},T.prototype.setValue=function(){if(arguments[0]instanceof T){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},T.prototype.max=function(t){return this.ge(t)?this:t},T.prototype.sqrt=function(){if(this.isZero())return T.valueOf(0);if(this.isNegative())return T.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=T.valueOf(e),i=this.subtract(n.sqr())._hi*(.5*t);return n.add(i)},T.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof T){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,i=null,r=null,o=null,s=null,a=null;return o=(r=this._hi+e)-(s=r-this._hi),i=(a=(o=e-s+(this._hi-o))+this._lo)+(r-(n=r+a)),this._hi=n+i,this._lo=i+(n-this._hi),this}}else if(2===arguments.length){var A=arguments[0],l=arguments[1],c=null,u=null,h=null,g=null,d=null,p=null,f=null;g=this._hi+A,u=this._lo+l,d=g-(p=g-this._hi),h=u-(f=u-this._lo);var m=(c=g+(p=(d=A-p+(this._hi-d))+u))+(p=(h=l-f+(this._lo-h))+(p+(g-c))),I=p+(c-m);return this._hi=m,this._lo=I,this}},T.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof T){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,s=null,a=null,A=null,l=null;r=(A=T.SPLIT*this._hi)-this._hi,l=T.SPLIT*n,r=A-r,o=this._hi-r,s=l-n;var c=(A=this._hi*n)+(l=r*(s=l-s)-A+r*(a=n-s)+o*s+o*a+(this._hi*i+this._lo*n)),u=l+(r=A-c);return this._hi=c,this._lo=u,this}},T.prototype.selfSqr=function(){return this.selfMultiply(this)},T.prototype.floor=function(){if(this.isNaN())return T.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new T(t,e)},T.prototype.negate=function(){return this.isNaN()?this:new T(-this._hi,-this._lo)},T.prototype.clone=function(){},T.prototype.multiply=function(){if(arguments[0]instanceof T){var t=arguments[0];return t.isNaN()?T.createNaN():T.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return y.isNaN(e)?T.createNaN():T.copy(this).selfMultiply(e,0)}},T.prototype.isNaN=function(){return y.isNaN(this._hi)},T.prototype.intValue=function(){return Math.trunc(this._hi)},T.prototype.toString=function(){var t=T.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},T.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),i=e[0]+1,r=n;if("."===n.charAt(0))r="0"+n;else if(i<0)r="0."+T.stringOfChar("0",-i)+n;else if(-1===n.indexOf(".")){var o=i-n.length;r=n+T.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+r:r},T.prototype.reciprocal=function(){var t=null,e=null,n=null,i=null,r=null,o=null,s=null,a=null;e=(r=1/this._hi)-(t=(o=T.SPLIT*r)-(t=o-r)),n=(a=T.SPLIT*this._hi)-this._hi;var A=r+(o=(1-(s=r*this._hi)-(a=t*(n=a-n)-s+t*(i=this._hi-n)+e*n+e*i)-r*this._lo)/this._hi);return new T(A,r-A+o)},T.prototype.toSciNotation=function(){if(this.isZero())return T.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),i=T.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var r="";n.length>1&&(r=n.substring(1));var o=n.charAt(0)+"."+r;return this.isNegative()?"-"+o+i:o+i},T.prototype.abs=function(){return this.isNaN()?T.NaN:this.isNegative()?this.negate():new T(this)},T.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},T.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},T.prototype.add=function(){if(arguments[0]instanceof T){var t=arguments[0];return T.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return T.copy(this).selfAdd(e)}},T.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof T){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._hi=n,this._lo=i}},T.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},T.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},T.prototype.trunc=function(){return this.isNaN()?T.NaN:this.isPositive()?this.floor():this.ceil()},T.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},T.prototype.interfaces_=function(){return[e,E,_]},T.prototype.getClass=function(){return T},T.sqr=function(t){return T.valueOf(t).selfMultiply(t)},T.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return T.parse(t)}if("number"==typeof arguments[0])return new T(arguments[0])},T.sqrt=function(t){return T.valueOf(t).sqrt()},T.parse=function(t){for(var e=0,n=t.length;P.isWhitespace(t.charAt(e));)e++;var i=!1;if(e<n){var r=t.charAt(e);"-"!==r&&"+"!==r||(e++,"-"===r&&(i=!0))}for(var o=new T,s=0,a=0,A=0;!(e>=n);){var l=t.charAt(e);if(e++,P.isDigit(l)){var c=l-"0";o.selfMultiply(T.TEN),o.selfAdd(c),s++}else{if("."!==l){if("e"===l||"E"===l){var u=t.substring(e);try{A=N.parseInt(u)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+u+" in string "+t):e}break}throw new Error("Unexpected character '"+l+"' at position "+e+" in string "+t)}a=s}}var h=o,g=s-a-A;if(0===g)h=o;else if(g>0){var d=T.TEN.pow(g);h=o.divide(d)}else if(g<0){var p=T.TEN.pow(-g);h=o.multiply(p)}return i?h.negate():h},T.createNaN=function(){return new T(y.NaN,y.NaN)},T.copy=function(t){return new T(t)},T.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),i=Math.trunc(Math.floor(n));return 10*Math.pow(10,i)<=e&&(i+=1),i},T.stringOfChar=function(t,e){for(var n=new R,i=0;i<e;i++)n.append(t);return n.toString()},L.PI.get=function(){return new T(3.141592653589793,12246467991473532e-32)},L.TWO_PI.get=function(){return new T(6.283185307179586,24492935982947064e-32)},L.PI_2.get=function(){return new T(1.5707963267948966,6123233995736766e-32)},L.E.get=function(){return new T(2.718281828459045,14456468917292502e-32)},L.NaN.get=function(){return new T(y.NaN,y.NaN)},L.EPS.get=function(){return 123259516440783e-46},L.SPLIT.get=function(){return 134217729},L.MAX_PRINT_DIGITS.get=function(){return 32},L.TEN.get=function(){return T.valueOf(10)},L.ONE.get=function(){return T.valueOf(1)},L.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},L.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(T,L);var F=function(){},O={DP_SAFE_EPSILON:{configurable:!0}};F.prototype.interfaces_=function(){return[]},F.prototype.getClass=function(){return F},F.orientationIndex=function(t,e,n){var i=F.orientationIndexFilter(t,e,n);if(i<=1)return i;var r=T.valueOf(e.x).selfAdd(-t.x),o=T.valueOf(e.y).selfAdd(-t.y),s=T.valueOf(n.x).selfAdd(-e.x),a=T.valueOf(n.y).selfAdd(-e.y);return r.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},F.signOfDet2x2=function(t,e,n,i){return t.multiply(i).selfSubtract(e.multiply(n)).signum()},F.intersection=function(t,e,n,i){var r=T.valueOf(i.y).selfSubtract(n.y).selfMultiply(T.valueOf(e.x).selfSubtract(t.x)),o=T.valueOf(i.x).selfSubtract(n.x).selfMultiply(T.valueOf(e.y).selfSubtract(t.y)),s=r.subtract(o),a=T.valueOf(i.x).selfSubtract(n.x).selfMultiply(T.valueOf(t.y).selfSubtract(n.y)),A=T.valueOf(i.y).selfSubtract(n.y).selfMultiply(T.valueOf(t.x).selfSubtract(n.x)),l=a.subtract(A).selfDivide(s).doubleValue(),c=T.valueOf(t.x).selfAdd(T.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),u=T.valueOf(e.x).selfSubtract(t.x).selfMultiply(T.valueOf(t.y).selfSubtract(n.y)),h=T.valueOf(e.y).selfSubtract(t.y).selfMultiply(T.valueOf(t.x).selfSubtract(n.x)),g=u.subtract(h).selfDivide(s).doubleValue(),d=T.valueOf(n.y).selfAdd(T.valueOf(i.y).selfSubtract(n.y).selfMultiply(g)).doubleValue();return new B(c,d)},F.orientationIndexFilter=function(t,e,n){var i=null,r=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=r-o;if(r>0){if(o<=0)return F.signum(s);i=r+o}else{if(!(r<0))return F.signum(s);if(o>=0)return F.signum(s);i=-r-o}var a=F.DP_SAFE_EPSILON*i;return s>=a||-s>=a?F.signum(s):2},F.signum=function(t){return t>0?1:t<0?-1:0},O.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(F,O);var G=function(){},U={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};U.X.get=function(){return 0},U.Y.get=function(){return 1},U.Z.get=function(){return 2},U.M.get=function(){return 3},G.prototype.setOrdinate=function(t,e,n){},G.prototype.size=function(){},G.prototype.getOrdinate=function(t,e){},G.prototype.getCoordinate=function(){},G.prototype.getCoordinateCopy=function(t){},G.prototype.getDimension=function(){},G.prototype.getX=function(t){},G.prototype.clone=function(){},G.prototype.expandEnvelope=function(t){},G.prototype.copy=function(){},G.prototype.getY=function(t){},G.prototype.toCoordinateArray=function(){},G.prototype.interfaces_=function(){return[_]},G.prototype.getClass=function(){return G},Object.defineProperties(G,U);var j=function(){},Y=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(j),K=function(){};K.arraycopy=function(t,e,n,i,r){for(var o=0,s=e;s<e+r;s++)n[i+o]=t[s],o++},K.getProperty=function(t){return{"line.separator":"\n"}[t]};var z=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this.x=n,this.y=i,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var r=arguments[0],o=arguments[1];this.x=r.y*o.w-o.y*r.w,this.y=o.x*r.w-r.x*o.w,this.w=r.x*o.y-o.x*r.y}else if(arguments[0]instanceof B&&arguments[1]instanceof B){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var A=arguments[0],l=arguments[1],c=arguments[2];this.x=A,this.y=l,this.w=c}else if(4===arguments.length){var u=arguments[0],h=arguments[1],g=arguments[2],d=arguments[3],p=u.y-h.y,f=h.x-u.x,m=u.x*h.y-h.x*u.y,I=g.y-d.y,y=d.x-g.x,C=g.x*d.y-d.x*g.y;this.x=f*C-y*m,this.y=I*m-p*C,this.w=p*y-I*f}};z.prototype.getY=function(){var t=this.y/this.w;if(y.isNaN(t)||y.isInfinite(t))throw new Y;return t},z.prototype.getX=function(){var t=this.x/this.w;if(y.isNaN(t)||y.isInfinite(t))throw new Y;return t},z.prototype.getCoordinate=function(){var t=new B;return t.x=this.getX(),t.y=this.getY(),t},z.prototype.interfaces_=function(){return[]},z.prototype.getClass=function(){return z},z.intersection=function(t,e,n,i){var r=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-i.y,A=i.x-n.x,l=n.x*i.y-i.x*n.y,c=r*A-a*o,u=(o*l-A*s)/c,h=(a*s-r*l)/c;if(y.isNaN(u)||y.isInfinite(u)||y.isNaN(h)||y.isInfinite(h))throw new Y;return new B(u,h)};var J=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof B){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i.x,r.x,i.y,r.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],A=arguments[3];this.init(o,s,a,A)}},q={serialVersionUID:{configurable:!0}};J.prototype.getArea=function(){return this.getWidth()*this.getHeight()},J.prototype.equals=function(t){if(!(t instanceof J))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},J.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new J;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,i=this._maxx<t._maxx?this._maxx:t._maxx,r=this._maxy<t._maxy?this._maxy:t._maxy;return new J(e,i,n,r)},J.prototype.isNull=function(){return this._maxx<this._minx},J.prototype.getMaxX=function(){return this._maxx},J.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof B){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof J){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&i>=this._miny&&i<=this._maxy}},J.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof J){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof B){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||i>this._maxy||i<this._miny)}},J.prototype.getMinY=function(){return this._miny},J.prototype.getMinX=function(){return this._minx},J.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof B){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof J){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=i,this._maxy=i):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),i<this._miny&&(this._miny=i),i>this._maxy&&(this._maxy=i))}},J.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},J.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},J.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},J.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},J.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},J.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},J.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},J.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},J.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},J.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof J){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof B){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.covers(n,i)}},J.prototype.centre=function(){return this.isNull()?null:new B((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},J.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof B){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof J){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];r<o?(this._minx=r,this._maxx=o):(this._minx=o,this._maxx=r),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},J.prototype.getMaxY=function(){return this._maxy},J.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},J.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+B.hashCode(this._minx))+B.hashCode(this._maxx))+B.hashCode(this._miny))+B.hashCode(this._maxy)},J.prototype.interfaces_=function(){return[E,e]},J.prototype.getClass=function(){return J},J.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),A=Math.max(o.x,s.x),l=Math.min(i.x,r.x),c=Math.max(i.x,r.x);return!(l>A||c<a||(a=Math.min(o.y,s.y),A=Math.max(o.y,s.y),l=Math.min(i.y,r.y),c=Math.max(i.y,r.y),l>A||c<a))}},q.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(J,q);var H={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},V=function(t){this.geometryFactory=t||new me};V.prototype.read=function(t){var e,n,i;t=t.replace(/[\n\r]/g," ");var r=H.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((r=H.emptyTypeStr.exec(t))[2]=void 0),r&&(n=r[1].toLowerCase(),i=r[2],Z[n]&&(e=Z[n].apply(this,[i]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},V.prototype.write=function(t){return this.extractGeometry(t)},V.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!W[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+W[e].apply(this,[t])+")"};var W={coordinate:function(t){return t.x+" "+t.y},point:function(t){return W.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+W.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push(W.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push(W.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+W.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+W.linestring.apply(this,[t._shell])+")");for(var n=0,i=t._holes.length;n<i;++n)e.push("("+W.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+W.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},Z={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(H.spaces);return this.geometryFactory.createPoint(new B(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(H.trimParens,"$1"),i.push(Z.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(i)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(H.spaces),i.push(new B(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(i)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(H.spaces),i.push(new B(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(i)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(H.parenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(H.trimParens,"$1"),i.push(Z.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(i)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,i,r,o=t.trim().split(H.parenComma),s=[],a=0,A=o.length;a<A;++a)e=o[a].replace(H.trimParens,"$1"),n=Z.linestring.apply(this,[e]),i=this.geometryFactory.createLinearRing(n._points),0===a?r=i:s.push(i);return this.geometryFactory.createPolygon(r,s)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(H.doubleParenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(H.trimParens,"$1"),i.push(Z.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],i=0,r=e.length;i<r;++i)n.push(this.read(e[i]));return this.geometryFactory.createGeometryCollection(n)}},X=function(t){this.parser=new V(t)};X.prototype.write=function(t){return this.parser.write(t)},X.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var $=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),tt=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}($),et=function(){};et.prototype.interfaces_=function(){return[]},et.prototype.getClass=function(){return et},et.shouldNeverReachHere=function(){if(0===arguments.length)et.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new tt("Should never reach here"+(null!==t?": "+t:""))}},et.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],et.isTrue(t,null);else if(2===arguments.length&&(e=arguments[1],!(t=arguments[0])))throw null===e?new tt:new tt(e)},et.equals=function(){var t,e,n;if(2===arguments.length)t=arguments[0],e=arguments[1],et.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new tt("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var nt=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new B,this._intPt[1]=new B,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},it={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};nt.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},nt.prototype.getTopologySummary=function(){var t=new R;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},nt.prototype.computeIntersection=function(t,e,n,i){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(t,e,n,i)},nt.prototype.getIntersectionNum=function(){return this._result},nt.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},nt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},nt.prototype.setPrecisionModel=function(t){this._precisionModel=t},nt.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},nt.prototype.getIntersection=function(t){return this._intPt[t]},nt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},nt.prototype.hasIntersection=function(){return this._result!==nt.NO_INTERSECTION},nt.prototype.getEdgeDistance=function(t,e){return nt.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},nt.prototype.isCollinear=function(){return this._result===nt.COLLINEAR_INTERSECTION},nt.prototype.toString=function(){return X.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+X.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},nt.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},nt.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},nt.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},nt.prototype.interfaces_=function(){return[]},nt.prototype.getClass=function(){return nt},nt.computeEdgeDistance=function(t,e,n){var i=Math.abs(n.x-e.x),r=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=i>r?i:r;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=i>r?s:a)||t.equals(e)||(o=Math.max(s,a))}return et.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},nt.nonRobustComputeEdgeDistance=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=Math.sqrt(i*i+r*r);return et.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},it.DONT_INTERSECT.get=function(){return 0},it.DO_INTERSECT.get=function(){return 1},it.COLLINEAR.get=function(){return 2},it.NO_INTERSECTION.get=function(){return 0},it.POINT_INTERSECTION.get=function(){return 1},it.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(nt,it);var rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new J(this._inputLines[0][0],this._inputLines[0][1]),n=new J(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],i=arguments[2];if(this._isProper=!1,J.intersects(n,i,e)&&0===at.orientationIndex(n,i,e)&&0===at.orientationIndex(i,n,e))return this._isProper=!0,(e.equals(n)||e.equals(i))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,i,r){r.x=this.smallestInAbsValue(t.x,e.x,n.x,i.x),r.y=this.smallestInAbsValue(t.y,e.y,n.y,i.y),t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},e.prototype.safeHCoordinateIntersection=function(t,n,i,r){var o=null;try{o=z.intersection(t,n,i,r)}catch(s){if(!(s instanceof Y))throw s;o=e.nearestEndpoint(t,n,i,r)}return o},e.prototype.intersection=function(t,n,i,r){var o=this.intersectionWithNormalization(t,n,i,r);return this.isInSegmentEnvelopes(o)||(o=new B(e.nearestEndpoint(t,n,i,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,i){var r=t,o=Math.abs(r);return Math.abs(e)<o&&(r=e,o=Math.abs(e)),Math.abs(n)<o&&(r=n,o=Math.abs(n)),Math.abs(i)<o&&(r=i),r},e.prototype.checkDD=function(t,e,n,i,r){var o=F.intersection(t,e,n,i),s=this.isInSegmentEnvelopes(o);K.out.println("DD in env = "+s+"  --------------------- "+o),r.distance(o)>1e-4&&K.out.println("Distance = "+r.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,i){var r=new B(t),o=new B(e),s=new B(n),a=new B(i),A=new B;this.normalizeToEnvCentre(r,o,s,a,A);var l=this.safeHCoordinateIntersection(r,o,s,a);return l.x+=A.x,l.y+=A.y,l},e.prototype.computeCollinearIntersection=function(e,n,i,r){var o=J.intersects(e,n,i),s=J.intersects(e,n,r),a=J.intersects(i,r,e),A=J.intersects(i,r,n);return o&&s?(this._intPt[0]=i,this._intPt[1]=r,t.COLLINEAR_INTERSECTION):a&&A?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||s||A?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&A?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||o||A?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&A?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,i,r){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,A=t.y>e.y?t.y:e.y,l=n.x<i.x?n.x:i.x,c=n.y<i.y?n.y:i.y,u=n.x>i.x?n.x:i.x,h=n.y>i.y?n.y:i.y,g=((o>l?o:l)+(a<u?a:u))/2,d=((s>c?s:c)+(A<h?A:h))/2;r.x=g,r.y=d,t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},e.prototype.computeIntersect=function(e,n,i,r){if(this._isProper=!1,!J.intersects(e,n,i,r))return t.NO_INTERSECTION;var o=at.orientationIndex(e,n,i),s=at.orientationIndex(e,n,r);if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION;var a=at.orientationIndex(i,r,e),A=at.orientationIndex(i,r,n);return a>0&&A>0||a<0&&A<0?t.NO_INTERSECTION:0===o&&0===s&&0===a&&0===A?this.computeCollinearIntersection(e,n,i,r):(0===o||0===s||0===a||0===A?(this._isProper=!1,e.equals2D(i)||e.equals2D(r)?this._intPt[0]=e:n.equals2D(i)||n.equals2D(r)?this._intPt[0]=n:0===o?this._intPt[0]=new B(i):0===s?this._intPt[0]=new B(r):0===a?this._intPt[0]=new B(e):0===A&&(this._intPt[0]=new B(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,i,r)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,i){var r=t,o=at.distancePointLine(t,n,i),s=at.distancePointLine(e,n,i);return s<o&&(o=s,r=e),(s=at.distancePointLine(n,t,e))<o&&(o=s,r=n),(s=at.distancePointLine(i,t,e))<o&&(o=s,r=i),r},e}(nt),ot=function(){};ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.orientationIndex=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=n.x-e.x,s=n.y-e.y;return ot.signOfDet2x2(i,r,o,s)},ot.signOfDet2x2=function(t,e,n,i){var r=null,o=null,s=null;if(r=1,0===t||0===i)return 0===e||0===n?0:e>0?n>0?-r:r:n>0?r:-r;if(0===e||0===n)return i>0?t>0?r:-r:t>0?-r:r;if(e>0?i>0?e<=i||(r=-r,o=t,t=n,n=o,o=e,e=i,i=o):e<=-i?(r=-r,n=-n,i=-i):(o=t,t=-n,n=o,o=e,e=-i,i=o):i>0?-e<=i?(r=-r,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=i,i=o):e>=i?(t=-t,e=-e,n=-n,i=-i):(r=-r,o=-t,t=-n,n=o,o=-e,e=-i,i=o),t>0){if(!(n>0))return r;if(!(t<=n))return r}else{if(n>0)return-r;if(!(t>=n))return-r;r=-r,t=-t,n=-n}for(;;){if((i-=(s=Math.floor(n/t))*e)<0)return-r;if(i>e)return r;if(t>(n-=s*t)+n){if(e<i+i)return r}else{if(e>i+i)return-r;n=t-n,i=e-i,r=-r}if(0===i)return 0===n?0:-r;if(0===n)return r;if((e-=(s=Math.floor(t/n))*i)<0)return r;if(e>i)return-r;if(n>(t-=s*n)+t){if(i<e+e)return-r}else{if(i>e+e)return r;t=n-t,e=i-e,r=-r}if(0===e)return 0===t?0:r;if(0===t)return-r}};var st=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};st.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,i=e.x;return n>i&&(n=e.x,i=t.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var r=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,A=ot.signOfDet2x2(r,o,s,a);if(0===A)return this._isPointOnSegment=!0,null;a<o&&(A=-A),A>0&&this._crossingCount++}},st.prototype.isPointInPolygon=function(){return this.getLocation()!==x.EXTERIOR},st.prototype.getLocation=function(){return this._isPointOnSegment?x.BOUNDARY:this._crossingCount%2==1?x.INTERIOR:x.EXTERIOR},st.prototype.isOnSegment=function(){return this._isPointOnSegment},st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st},st.locatePointInRing=function(){if(arguments[0]instanceof B&&S(arguments[1],G)){for(var t=arguments[1],e=new st(arguments[0]),n=new B,i=new B,r=1;r<t.size();r++)if(t.getCoordinate(r,n),t.getCoordinate(r-1,i),e.countSegment(n,i),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof B&&arguments[1]instanceof Array){for(var o=arguments[1],s=new st(arguments[0]),a=1;a<o.length;a++){var A=o[a],l=o[a-1];if(s.countSegment(A,l),s.isOnSegment())return s.getLocation()}return s.getLocation()}};var at=function(){},At={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};at.prototype.interfaces_=function(){return[]},at.prototype.getClass=function(){return at},at.orientationIndex=function(t,e,n){return F.orientationIndex(t,e,n)},at.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,i=1;i<t.length-1;i++){var r=t[i].x-n,o=t[i+1].y;e+=r*(t[i-1].y-o)}return e/2}if(S(arguments[0],G)){var s=arguments[0],a=s.size();if(a<3)return 0;var A=new B,l=new B,c=new B;s.getCoordinate(0,l),s.getCoordinate(1,c);var u=l.x;c.x-=u;for(var h=0,g=1;g<a-1;g++)A.y=l.y,l.x=c.x,l.y=c.y,s.getCoordinate(g+1,c),c.x-=u,h+=l.x*(A.y-c.y);return h/2}},at.distanceLineLine=function(t,e,n,i){if(t.equals(e))return at.distancePointLine(t,n,i);if(n.equals(i))return at.distancePointLine(i,t,e);var r=!1;if(J.intersects(t,e,n,i)){var o=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x);if(0===o)r=!0;else{var s=(t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,A=s/o;(A<0||A>1||a<0||a>1)&&(r=!0)}}else r=!0;return r?M.min(at.distancePointLine(t,n,i),at.distancePointLine(e,n,i),at.distancePointLine(n,t,e),at.distancePointLine(i,t,e)):0},at.isPointInRing=function(t,e){return at.locatePointInRing(t,e)!==x.EXTERIOR},at.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,i=new B;t.getCoordinate(0,i);for(var r=i.x,o=i.y,s=1;s<e;s++){t.getCoordinate(s,i);var a=i.x,A=i.y,l=a-r,c=A-o;n+=Math.sqrt(l*l+c*c),r=a,o=A}return n},at.isCCW=function(t){var e=t.length-1;if(e<3)throw new I("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],i=0,r=1;r<=e;r++){var o=t[r];o.y>n.y&&(n=o,i=r)}var s=i;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(n)&&s!==i);var a=i;do{a=(a+1)%e}while(t[a].equals2D(n)&&a!==i);var A=t[s],l=t[a];if(A.equals2D(n)||l.equals2D(n)||A.equals2D(l))return!1;var c=at.computeOrientation(A,n,l);return 0===c?A.x>l.x:c>0},at.locatePointInRing=function(t,e){return st.locatePointInRing(t,e)},at.distancePointLinePerpendicular=function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(r)*Math.sqrt(i)},at.computeOrientation=function(t,e,n){return at.orientationIndex(t,e,n)},at.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new I("Line array must contain at least one vertex");for(var n=t.distance(e[0]),i=0;i<e.length-1;i++){var r=at.distancePointLine(t,e[i],e[i+1]);r<n&&(n=r)}return n}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var A=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),l=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/A;if(l<=0)return o.distance(s);if(l>=1)return o.distance(a);var c=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/A;return Math.abs(c)*Math.sqrt(A)}},at.isOnLine=function(t,e){for(var n=new rt,i=1;i<e.length;i++){var r=e[i-1],o=e[i];if(n.computeIntersection(t,r,o),n.hasIntersection())return!0}return!1},At.CLOCKWISE.get=function(){return-1},At.RIGHT.get=function(){return at.CLOCKWISE},At.COUNTERCLOCKWISE.get=function(){return 1},At.LEFT.get=function(){return at.COUNTERCLOCKWISE},At.COLLINEAR.get=function(){return 0},At.STRAIGHT.get=function(){return at.COLLINEAR},Object.defineProperties(at,At);var lt=function(){};lt.prototype.filter=function(t){},lt.prototype.interfaces_=function(){return[]},lt.prototype.getClass=function(){return lt};var ct=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},ut={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};ct.prototype.isGeometryCollection=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION},ct.prototype.getFactory=function(){return this._factory},ct.prototype.getGeometryN=function(t){return this},ct.prototype.getArea=function(){return 0},ct.prototype.isRectangle=function(){return!1},ct.prototype.equals=function(){if(arguments[0]instanceof ct){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof ct))return!1;var n=e;return this.equalsExact(n)}},ct.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},ct.prototype.geometryChanged=function(){this.apply(ct.geometryChangedFilter)},ct.prototype.geometryChangedAction=function(){this._envelope=null},ct.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},ct.prototype.getLength=function(){return 0},ct.prototype.getNumGeometries=function(){return 1},ct.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,i)}},ct.prototype.getUserData=function(){return this._userData},ct.prototype.getSRID=function(){return this._SRID},ct.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},ct.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION)throw new I("This method does not support GeometryCollection arguments")},ct.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},ct.prototype.norm=function(){var t=this.copy();return t.normalize(),t},ct.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},ct.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new J(this._envelope)},ct.prototype.setSRID=function(t){this._SRID=t},ct.prototype.setUserData=function(t){this._userData=t},ct.prototype.compare=function(t,e){for(var n=t.iterator(),i=e.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),o=i.next(),s=r.compareTo(o);if(0!==s)return s}return n.hasNext()?1:i.hasNext()?-1:0},ct.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},ct.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ct.SORTINDEX_MULTIPOINT||this.getSortIndex()===ct.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ct.SORTINDEX_MULTIPOLYGON},ct.prototype.interfaces_=function(){return[_,E,e]},ct.prototype.getClass=function(){return ct},ct.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},ct.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},ut.serialVersionUID.get=function(){return 0x799ea46522854c00},ut.SORTINDEX_POINT.get=function(){return 0},ut.SORTINDEX_MULTIPOINT.get=function(){return 1},ut.SORTINDEX_LINESTRING.get=function(){return 2},ut.SORTINDEX_LINEARRING.get=function(){return 3},ut.SORTINDEX_MULTILINESTRING.get=function(){return 4},ut.SORTINDEX_POLYGON.get=function(){return 5},ut.SORTINDEX_MULTIPOLYGON.get=function(){return 6},ut.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},ut.geometryChangedFilter.get=function(){return ht},Object.defineProperties(ct,ut);var ht=function(){};ht.interfaces_=function(){return[lt]},ht.filter=function(t){t.geometryChangedAction()};var gt=function(){};gt.prototype.filter=function(t){},gt.prototype.interfaces_=function(){return[]},gt.prototype.getClass=function(){return gt};var dt=function(){},pt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};dt.prototype.isInBoundary=function(t){},dt.prototype.interfaces_=function(){return[]},dt.prototype.getClass=function(){return dt},pt.Mod2BoundaryNodeRule.get=function(){return ft},pt.EndPointBoundaryNodeRule.get=function(){return mt},pt.MultiValentEndPointBoundaryNodeRule.get=function(){return It},pt.MonoValentEndPointBoundaryNodeRule.get=function(){return yt},pt.MOD2_BOUNDARY_RULE.get=function(){return new ft},pt.ENDPOINT_BOUNDARY_RULE.get=function(){return new mt},pt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new It},pt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new yt},pt.OGC_SFS_BOUNDARY_RULE.get=function(){return dt.MOD2_BOUNDARY_RULE},Object.defineProperties(dt,pt);var ft=function(){};ft.prototype.isInBoundary=function(t){return t%2==1},ft.prototype.interfaces_=function(){return[dt]},ft.prototype.getClass=function(){return ft};var mt=function(){};mt.prototype.isInBoundary=function(t){return t>0},mt.prototype.interfaces_=function(){return[dt]},mt.prototype.getClass=function(){return mt};var It=function(){};It.prototype.isInBoundary=function(t){return t>1},It.prototype.interfaces_=function(){return[dt]},It.prototype.getClass=function(){return It};var yt=function(){};yt.prototype.isInBoundary=function(t){return 1===t},yt.prototype.interfaces_=function(){return[dt]},yt.prototype.getClass=function(){return yt};var Ct=function(){};Ct.prototype.add=function(){},Ct.prototype.addAll=function(){},Ct.prototype.isEmpty=function(){},Ct.prototype.iterator=function(){},Ct.prototype.size=function(){},Ct.prototype.toArray=function(){},Ct.prototype.remove=function(){},(n.prototype=new Error).name="IndexOutOfBoundsException";var Et=function(){};Et.prototype.hasNext=function(){},Et.prototype.next=function(){},Et.prototype.remove=function(){};var _t=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(Ct);(i.prototype=new Error).name="NoSuchElementException";var vt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Ct&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,Ct]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new Bt(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new n;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,i=this.array_.length;n<i;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(_t),Bt=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new i;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(Et),wt=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.ensureCapacity(n.length),this.add(n,i)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[1],n=!1,i=arguments[0].iterator();i.hasNext();)this.add(i.next(),e),n=!0;return n}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],i=arguments[1];return this.add(n,i,!0),!0}if(arguments[0]instanceof B&&"boolean"==typeof arguments[1]){var r=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(r))return null;t.prototype.add.call(this,r)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1];return this.add(o,s),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var a=arguments[0],A=arguments[1];if(arguments[2])for(var l=0;l<a.length;l++)this.add(a[l],A);else for(var c=a.length-1;c>=0;c--)this.add(a[c],A);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof B){var u=arguments[0],h=arguments[1];if(!arguments[2]){var g=this.size();if(g>0){if(u>0&&this.get(u-1).equals2D(h))return null;if(u<g&&this.get(u).equals2D(h))return null}}t.prototype.add.call(this,u,h)}}else if(4===arguments.length){var d=arguments[0],p=arguments[1],f=arguments[2],m=arguments[3],I=1;f>m&&(I=-1);for(var y=f;y!==m;y+=I)this.add(d[y],p);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new B(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(vt),bt=function(){},Qt={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Qt.ForwardComparator.get=function(){return xt},Qt.BidirectionalComparator.get=function(){return Dt},Qt.coordArrayType.get=function(){return new Array(0).fill(null)},bt.prototype.interfaces_=function(){return[]},bt.prototype.getClass=function(){return bt},bt.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},bt.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(bt.indexOf(i,e)<0)return i}return null},bt.scroll=function(t,e){var n=bt.indexOf(e,t);if(n<0)return null;var i=new Array(t.length).fill(null);K.arraycopy(t,n,i,0,t.length-n),K.arraycopy(t,0,i,t.length-n,n),K.arraycopy(i,0,t,0,t.length)},bt.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];if(i===r)return!0;if(null===i||null===r)return!1;if(i.length!==r.length)return!1;for(var s=0;s<i.length;s++)if(0!==o.compare(i[s],r[s]))return!1;return!0}},bt.intersection=function(t,e){for(var n=new wt,i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()},bt.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},bt.removeRepeatedPoints=function(t){return bt.hasRepeatedPoints(t)?new wt(t,!1).toCoordinateArray():t},bt.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),i=0;i<=n;i++){var r=t[i];t[i]=t[e-i],t[e-i]=r}},bt.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var i=new Array(e).fill(null);if(0===e)return i;for(var r=0,o=0;o<t.length;o++)null!==t[o]&&(i[r++]=t[o]);return i},bt.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new B(t[n]);return e}if(5===arguments.length)for(var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],A=0;A<a;A++)o[s+A]=new B(i[r+A])},bt.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=e[t.length-n-1];if(0!==i.compareTo(r))return!1}return!0},bt.envelope=function(t){for(var e=new J,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},bt.toCoordinateArray=function(t){return t.toArray(bt.coordArrayType)},bt.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},bt.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},bt.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,i=t[e].compareTo(t[n]);if(0!==i)return i}return 1},bt.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var i=t[n].compareTo(e[n]);if(0!==i)return i;n++}return n<e.length?-1:n<t.length?1:0},bt.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},bt.extract=function(t,e,n){e=M.clamp(e,0,t.length);var i=(n=M.clamp(n,-1,t.length))-e+1;n<0&&(i=0),e>=t.length&&(i=0),n<e&&(i=0);var r=new Array(i).fill(null);if(0===i)return r;for(var o=0,s=e;s<=n;s++)r[o++]=t[s];return r},Object.defineProperties(bt,Qt);var xt=function(){};xt.prototype.compare=function(t,e){return bt.compare(t,e)},xt.prototype.interfaces_=function(){return[v]},xt.prototype.getClass=function(){return xt};var Dt=function(){};Dt.prototype.compare=function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;var r=bt.compare(n,i);return bt.isEqualReversed(n,i)?0:r},Dt.prototype.OLDcompare=function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;for(var r=bt.increasingDirection(n),o=bt.increasingDirection(i),s=r>0?0:n.length-1,a=o>0?0:n.length-1,A=0;A<n.length;A++){var l=n[s].compareTo(i[a]);if(0!==l)return l;s+=r,a+=o}return 0},Dt.prototype.interfaces_=function(){return[v]},Dt.prototype.getClass=function(){return Dt};var St=function(){};St.prototype.get=function(){},St.prototype.put=function(){},St.prototype.size=function(){},St.prototype.values=function(){},St.prototype.entrySet=function(){};var Mt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(St);(r.prototype=new Error).name="OperationNotSupported",(o.prototype=new Ct).contains=function(){};var kt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Ct&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Rt(this)},e}(o),Rt=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new i;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new r},e}(Et),Nt=0;(u.prototype=new Mt).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},u.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Nt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,i,r=this.root_;do{if(n=r,(i=t.compareTo(r.key))<0)r=r.left;else{if(!(i>0)){var o=r.value;return r.value=e,o}r=r.right}}while(null!==r);var s={key:t,left:null,right:null,value:e,parent:n,color:Nt,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},u.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(a(t)===l(a(a(t)))){var e=c(a(a(t)));1===s(e)?(A(a(t),Nt),A(e,Nt),A(a(a(t)),1),t=a(a(t))):(t===c(a(t))&&(t=a(t),this.rotateLeft(t)),A(a(t),Nt),A(a(a(t)),1),this.rotateRight(a(a(t))))}else{var n=l(a(a(t)));1===s(n)?(A(a(t),Nt),A(n,Nt),A(a(a(t)),1),t=a(a(t))):(t===l(a(t))&&(t=a(t),this.rotateRight(t)),A(a(t),Nt),A(a(a(t)),1),this.rotateLeft(a(a(t))))}this.root_.color=Nt},u.prototype.values=function(){var t=new vt,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=u.successor(e));)t.add(e.value);return t},u.prototype.entrySet=function(){var t=new kt,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=u.successor(e));)t.add(e);return t},u.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},u.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},u.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},u.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,i=t;null!==n&&i===n.right;)i=n,n=n.parent;return n},u.prototype.size=function(){return this.size_};var Pt=function(){};Pt.prototype.interfaces_=function(){return[]},Pt.prototype.getClass=function(){return Pt},h.prototype=new o,(g.prototype=new h).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},g.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},g.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},g.prototype.remove=function(t){throw new r},g.prototype.size=function(){return this.array_.length},g.prototype.isEmpty=function(){return 0===this.array_.length},g.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},g.prototype.iterator=function(){return new Tt(this)};var Tt=function(t){this.treeSet_=t,this.position_=0};Tt.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new i;return this.treeSet_.array_[this.position_++]},Tt.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Tt.prototype.remove=function(){throw new r};var Lt=function(){};Lt.sort=function(){var t,e,n,i,r=arguments[0];if(1===arguments.length)i=function(t,e){return t.compareTo(e)},r.sort(i);else if(2===arguments.length)n=arguments[1],i=function(t,e){return n.compare(t,e)},r.sort(i);else if(3===arguments.length){(e=r.slice(arguments[1],arguments[2])).sort();var o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length));for(r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t])}else if(4===arguments.length)for(e=r.slice(arguments[1],arguments[2]),n=arguments[3],i=function(t,e){return n.compare(t,e)},e.sort(i),o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length)),r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t])},Lt.asList=function(t){for(var e=new vt,n=0,i=t.length;n<i;n++)e.add(t[n]);return e};var Ft=function(){},Ot={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Ot.P.get=function(){return 0},Ot.L.get=function(){return 1},Ot.A.get=function(){return 2},Ot.FALSE.get=function(){return-1},Ot.TRUE.get=function(){return-2},Ot.DONTCARE.get=function(){return-3},Ot.SYM_FALSE.get=function(){return"F"},Ot.SYM_TRUE.get=function(){return"T"},Ot.SYM_DONTCARE.get=function(){return"*"},Ot.SYM_P.get=function(){return"0"},Ot.SYM_L.get=function(){return"1"},Ot.SYM_A.get=function(){return"2"},Ft.prototype.interfaces_=function(){return[]},Ft.prototype.getClass=function(){return Ft},Ft.toDimensionSymbol=function(t){switch(t){case Ft.FALSE:return Ft.SYM_FALSE;case Ft.TRUE:return Ft.SYM_TRUE;case Ft.DONTCARE:return Ft.SYM_DONTCARE;case Ft.P:return Ft.SYM_P;case Ft.L:return Ft.SYM_L;case Ft.A:return Ft.SYM_A}throw new I("Unknown dimension value: "+t)},Ft.toDimensionValue=function(t){switch(P.toUpperCase(t)){case Ft.SYM_FALSE:return Ft.FALSE;case Ft.SYM_TRUE:return Ft.TRUE;case Ft.SYM_DONTCARE:return Ft.DONTCARE;case Ft.SYM_P:return Ft.P;case Ft.SYM_L:return Ft.L;case Ft.SYM_A:return Ft.A}throw new I("Unknown dimension symbol: "+t)},Object.defineProperties(Ft,Ot);var Gt=function(){};Gt.prototype.filter=function(t){},Gt.prototype.interfaces_=function(){return[]},Gt.prototype.getClass=function(){return Gt};var Ut=function(){};Ut.prototype.filter=function(t,e){},Ut.prototype.isDone=function(){},Ut.prototype.isGeometryChanged=function(){},Ut.prototype.interfaces_=function(){return[]},Ut.prototype.getClass=function(){return Ut};var jt=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new I("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new J,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var i=this._geometries[n].getCoordinates(),r=0;r<i.length;r++)t[++e]=i[r];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e;if(this._geometries.length!==i._geometries.length)return!1;for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].equalsExact(i._geometries[r],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Lt.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=Ft.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=Ft.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new g(Lt.asList(this._geometries)),n=new g(Lt.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var i=arguments[1],r=arguments[0],o=this.getNumGeometries(),s=r.getNumGeometries(),a=0;a<o&&a<s;){var A=this.getGeometryN(a),l=r.getGeometryN(a),c=A.compareToSameClass(l,i);if(0!==c)return c;a++}return a<o?1:a<s?-1:0}},e.prototype.apply=function(){if(S(arguments[0],gt))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(S(arguments[0],Ut)){var n=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(this._geometries[i].apply(n),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(S(arguments[0],Gt)){var r=arguments[0];r.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(r)}else if(S(arguments[0],lt)){var s=arguments[0];s.filter(this);for(var a=0;a<this._geometries.length;a++)this._geometries[a].apply(s)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),et.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(ct),Yt=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Ft.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Kt(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Pt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(jt),Kt=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=dt.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=i}};Kt.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Kt.prototype.getBoundary=function(){return this._geom instanceof Vt?this.boundaryLineString(this._geom):this._geom instanceof Yt?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Kt.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Kt.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Kt.prototype.computeBoundaryCoordinates=function(t){var e=new vt;this._endpointMap=new u;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);0!==i.getNumPoints()&&(this.addEndpoint(i.getCoordinateN(0)),this.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var r=this._endpointMap.entrySet().iterator();r.hasNext();){var o=r.next(),s=o.getValue().count;this._bnRule.isInBoundary(s)&&e.add(o.getKey())}return bt.toCoordinateArray(e)},Kt.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new zt,this._endpointMap.put(t,e)),e.count++},Kt.prototype.interfaces_=function(){return[]},Kt.prototype.getClass=function(){return Kt},Kt.getBoundary=function(){return 1===arguments.length?new Kt(arguments[0]).getBoundary():2===arguments.length?new Kt(arguments[0],arguments[1]).getBoundary():void 0};var zt=function(){this.count=null};zt.prototype.interfaces_=function(){return[]},zt.prototype.getClass=function(){return zt};var Jt=function(){},qt={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Jt.prototype.interfaces_=function(){return[]},Jt.prototype.getClass=function(){return Jt},Jt.chars=function(t,e){for(var n=new Array(e).fill(null),i=0;i<e;i++)n[i]=t;return String(n)},Jt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],o="",s=new function(){}(new function(){}(Jt.getStackTrace(i))),a=0;a<r;a++)try{o+=s.readLine()+Jt.NEWLINE}catch(t){if(!(t instanceof d))throw t;et.shouldNeverReachHere()}return o}},Jt.split=function(t,e){for(var n=e.length,i=new vt,r=""+t,o=r.indexOf(e);o>=0;){var s=r.substring(0,o);i.add(s),o=(r=r.substring(o+n)).indexOf(e)}r.length>0&&i.add(r);for(var a=new Array(i.size()).fill(null),A=0;A<a.length;A++)a[A]=i.get(A);return a},Jt.toString=function(){if(1===arguments.length){var t=arguments[0];return Jt.SIMPLE_ORDINATE_FORMAT.format(t)}},Jt.spaces=function(t){return Jt.chars(" ",t)},qt.NEWLINE.get=function(){return K.getProperty("line.separator")},qt.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Jt,qt);var Ht=function(){};Ht.prototype.interfaces_=function(){return[]},Ht.prototype.getClass=function(){return Ht},Ht.copyCoord=function(t,e,n,i){for(var r=Math.min(t.getDimension(),n.getDimension()),o=0;o<r;o++)n.setOrdinate(i,o,t.getOrdinate(e,o))},Ht.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,G.X)===t.getOrdinate(e-1,G.X)&&t.getOrdinate(0,G.Y)===t.getOrdinate(e-1,G.Y)},Ht.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var i=Math.min(t.getDimension(),e.getDimension()),r=0;r<n;r++)for(var o=0;o<i;o++){var s=t.getOrdinate(r,o),a=e.getOrdinate(r,o);if(!(t.getOrdinate(r,o)===e.getOrdinate(r,o)||y.isNaN(s)&&y.isNaN(a)))return!1}return!0},Ht.extend=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();if(Ht.copy(e,0,i,0,r),r>0)for(var o=r;o<n;o++)Ht.copy(e,r-1,i,o,1);return i},Ht.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),i=0;i<=n;i++)Ht.swap(t,i,e-i)},Ht.swap=function(t,e,n){if(e===n)return null;for(var i=0;i<t.getDimension();i++){var r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r)}},Ht.copy=function(t,e,n,i,r){for(var o=0;o<r;o++)Ht.copyCoord(t,e+o,n,i+o)},Ht.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),i=new R;i.append("(");for(var r=0;r<e;r++){r>0&&i.append(" ");for(var o=0;o<n;o++)o>0&&i.append(","),i.append(Jt.toString(t.getOrdinate(r,o)))}return i.append(")"),i.toString()}},Ht.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Ht.createClosedRing(t,e,4):e.getOrdinate(0,G.X)===e.getOrdinate(n-1,G.X)&&e.getOrdinate(0,G.Y)===e.getOrdinate(n-1,G.Y)?e:Ht.createClosedRing(t,e,n+1)},Ht.createClosedRing=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();Ht.copy(e,0,i,0,r);for(var o=r;o<n;o++)Ht.copy(e,0,i,o,1);return i};var Vt=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new J:this._points.expandEnvelope(new J)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e;if(this._points.size()!==i._points.size())return!1;for(var r=0;r<this._points.size();r++)if(!this.equal(this._points.getCoordinate(r),i._points.getCoordinate(r),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Ht.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Ft.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return at.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Ht.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var i=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==i)return i;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var r=arguments[0];return arguments[1].compare(this._points,r._points)}},e.prototype.apply=function(){if(S(arguments[0],gt))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(S(arguments[0],Ut)){var n=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(n.filter(this._points,i),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else(S(arguments[0],Gt)||S(arguments[0],lt))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Kt(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new I("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Pt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(ct),Wt=function(){};Wt.prototype.interfaces_=function(){return[]},Wt.prototype.getClass=function(){return Wt};var Zt=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new J;var t=new J;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Ft.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(S(arguments[0],gt)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(S(arguments[0],Ut)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(S(arguments[0],Gt)||S(arguments[0],lt))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),et.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Wt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(ct),Xt=function(){};Xt.prototype.interfaces_=function(){return[]},Xt.prototype.getClass=function(){return Xt};var $t=function(t){function e(e,n,i){if(t.call(this,i),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new I("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new I("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i];for(var r=0;r<this._holes.length;r++)for(var o=this._holes[r].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(at.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(at.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var i=t.getX(n);if(i!==e.getMinX()&&i!==e.getMaxX())return!1;var r=t.getY(n);if(r!==e.getMinY()&&r!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var A=t.getX(a),l=t.getY(a);if(A!==o==(l!==s))return!1;o=A,s=l}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e,r=this._shell,o=i._shell;if(!r.equalsExact(o,n))return!1;if(this._holes.length!==i._holes.length)return!1;for(var s=0;s<this._holes.length;s++)if(!this._holes[s].equalsExact(i._holes[s],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);Lt.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var i=new Array(e.getCoordinates().length-1).fill(null);K.arraycopy(e.getCoordinates(),0,i,0,i.length);var r=bt.minCoordinate(e.getCoordinates());bt.scroll(i,r),K.arraycopy(i,0,e.getCoordinates(),0,i.length),e.getCoordinates()[i.length]=i[0],at.isCCW(e.getCoordinates())===n&&bt.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var i=arguments[1],r=arguments[0],o=this._shell,s=r._shell,a=o.compareToSameClass(s,i);if(0!==a)return a;for(var A=this.getNumInteriorRing(),l=r.getNumInteriorRing(),c=0;c<A&&c<l;){var u=this.getInteriorRingN(c),h=r.getInteriorRingN(c),g=u.compareToSameClass(h,i);if(0!==g)return g;c++}return c<A?1:c<l?-1:0}},e.prototype.apply=function(t){if(S(t,gt)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(S(t,Ut)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(S(t,Gt))t.filter(this);else if(S(t,lt)){t.filter(this),this._shell.apply(t);for(var i=0;i<this._holes.length;i++)this._holes[i].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),i=0;i<n.length;i++)n[i]=this._holes[i].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Xt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(ct),te=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Ft.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Wt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(jt),ee=function(t){function e(e,n){e instanceof B&&n instanceof me&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Ft.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Ht.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new I("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new I("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Vt),ne=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new vt,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),i=0;i<n.getNumGeometries();i++)t.add(n.getGeometryN(i));var r=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(r))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Xt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(jt),ie=function(t){this._factory=t||null,this._isUserDataCopied=!1},re={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};ie.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},ie.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},ie.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof jt?this.editGeometryCollection(t,e):t instanceof $t?this.editPolygon(t,e):t instanceof Zt||t instanceof Vt?e.edit(t,this._factory):(et.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},ie.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),i=new vt,r=0;r<n.getNumGeometries();r++){var o=this.edit(n.getGeometryN(r),e);null===o||o.isEmpty()||i.add(o)}return n.getClass()===te?this._factory.createMultiPoint(i.toArray([])):n.getClass()===Yt?this._factory.createMultiLineString(i.toArray([])):n.getClass()===ne?this._factory.createMultiPolygon(i.toArray([])):this._factory.createGeometryCollection(i.toArray([]))},ie.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var i=this.edit(n.getExteriorRing(),e);if(null===i||i.isEmpty())return this._factory.createPolygon();for(var r=new vt,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e);null===s||s.isEmpty()||r.add(s)}return this._factory.createPolygon(i,r.toArray([]))},ie.prototype.interfaces_=function(){return[]},ie.prototype.getClass=function(){return ie},ie.GeometryEditorOperation=function(){},re.NoOpGeometryOperation.get=function(){return oe},re.CoordinateOperation.get=function(){return se},re.CoordinateSequenceOperation.get=function(){return ae},Object.defineProperties(ie,re);var oe=function(){};oe.prototype.edit=function(t,e){return t},oe.prototype.interfaces_=function(){return[ie.GeometryEditorOperation]},oe.prototype.getClass=function(){return oe};var se=function(){};se.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof ee?e.createLinearRing(n):t instanceof Vt?e.createLineString(n):t instanceof Zt?n.length>0?e.createPoint(n[0]):e.createPoint():t},se.prototype.interfaces_=function(){return[ie.GeometryEditorOperation]},se.prototype.getClass=function(){return se};var ae=function(){};ae.prototype.edit=function(t,e){return t instanceof ee?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Vt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Zt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},ae.prototype.interfaces_=function(){return[ie.GeometryEditorOperation]},ae.prototype.getClass=function(){return ae};var Ae=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new B}else if(S(arguments[0],G)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)this._coordinates[i]=n.getCoordinateCopy(i)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var r=arguments[0],o=arguments[1];this._coordinates=r,this._dimension=o,null===r&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1];this._coordinates=new Array(s).fill(null),this._dimension=a;for(var A=0;A<s;A++)this._coordinates[A]=new B}},le={serialVersionUID:{configurable:!0}};Ae.prototype.setOrdinate=function(t,e,n){switch(e){case G.X:this._coordinates[t].x=n;break;case G.Y:this._coordinates[t].y=n;break;case G.Z:this._coordinates[t].z=n;break;default:throw new I("invalid ordinateIndex")}},Ae.prototype.size=function(){return this._coordinates.length},Ae.prototype.getOrdinate=function(t,e){switch(e){case G.X:return this._coordinates[t].x;case G.Y:return this._coordinates[t].y;case G.Z:return this._coordinates[t].z}return y.NaN},Ae.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},Ae.prototype.getCoordinateCopy=function(t){return new B(this._coordinates[t])},Ae.prototype.getDimension=function(){return this._dimension},Ae.prototype.getX=function(t){return this._coordinates[t].x},Ae.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new Ae(t,this._dimension)},Ae.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},Ae.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new Ae(t,this._dimension)},Ae.prototype.toString=function(){if(this._coordinates.length>0){var t=new R(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},Ae.prototype.getY=function(t){return this._coordinates[t].y},Ae.prototype.toCoordinateArray=function(){return this._coordinates},Ae.prototype.interfaces_=function(){return[G,e]},Ae.prototype.getClass=function(){return Ae},le.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(Ae,le);var ce=function(){},ue={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};ce.prototype.readResolve=function(){return ce.instance()},ce.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new Ae(arguments[0]);if(S(arguments[0],G))return new Ae(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new Ae(t):new Ae(t,e)}},ce.prototype.interfaces_=function(){return[Q,e]},ce.prototype.getClass=function(){return ce},ce.instance=function(){return ce.instanceObject},ue.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},ue.instanceObject.get=function(){return new ce},Object.defineProperties(ce,ue);var he=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new vt,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new kt;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(St),ge=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof pe){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var i=arguments[0];this._modelType=i._modelType,this._scale=i._scale}},de={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};ge.prototype.equals=function(t){if(!(t instanceof ge))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},ge.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits();return new N(n).compareTo(new N(i))},ge.prototype.getScale=function(){return this._scale},ge.prototype.isFloating=function(){return this._modelType===ge.FLOATING||this._modelType===ge.FLOATING_SINGLE},ge.prototype.getType=function(){return this._modelType},ge.prototype.toString=function(){var t="UNKNOWN";return this._modelType===ge.FLOATING?t="Floating":this._modelType===ge.FLOATING_SINGLE?t="Floating-Single":this._modelType===ge.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},ge.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return y.isNaN(t)||this._modelType===ge.FLOATING_SINGLE?t:this._modelType===ge.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof B){var e=arguments[0];if(this._modelType===ge.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},ge.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===ge.FLOATING?t=16:this._modelType===ge.FLOATING_SINGLE?t=6:this._modelType===ge.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},ge.prototype.setScale=function(t){this._scale=Math.abs(t)},ge.prototype.interfaces_=function(){return[e,E]},ge.prototype.getClass=function(){return ge},ge.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},de.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},de.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(ge,de);var pe=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},fe={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};pe.prototype.readResolve=function(){return pe.nameToTypeMap.get(this._name)},pe.prototype.toString=function(){return this._name},pe.prototype.interfaces_=function(){return[e]},pe.prototype.getClass=function(){return pe},fe.serialVersionUID.get=function(){return-552860263173159e4},fe.nameToTypeMap.get=function(){return new he},Object.defineProperties(pe,fe),ge.Type=pe,ge.FIXED=new pe("FIXED"),ge.FLOATING=new pe("FLOATING"),ge.FLOATING_SINGLE=new pe("FLOATING SINGLE");var me=function t(){this._precisionModel=new ge,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?S(arguments[0],Q)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof ge&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Ie={serialVersionUID:{configurable:!0}};me.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new B(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new B(t.getMinX(),t.getMinY()),new B(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new B(t.getMinX(),t.getMinY()),new B(t.getMinX(),t.getMaxY()),new B(t.getMaxX(),t.getMaxY()),new B(t.getMaxX(),t.getMinY()),new B(t.getMinX(),t.getMinY())]),null)},me.prototype.createLineString=function(t){return t?t instanceof Array?new Vt(this.getCoordinateSequenceFactory().create(t),this):S(t,G)?new Vt(t,this):void 0:new Vt(this.getCoordinateSequenceFactory().create([]),this)},me.prototype.createMultiLineString=function(){return 0===arguments.length?new Yt(null,this):1===arguments.length?new Yt(arguments[0],this):void 0},me.prototype.buildGeometry=function(t){for(var e=null,n=!1,i=!1,r=t.iterator();r.hasNext();){var o=r.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(i=!0)}if(null===e)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection(me.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof $t)return this.createMultiPolygon(me.toPolygonArray(t));if(a instanceof Vt)return this.createMultiLineString(me.toLineStringArray(t));if(a instanceof Zt)return this.createMultiPoint(me.toPointArray(t));et.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},me.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},me.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof B){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(S(arguments[0],G))return new Zt(arguments[0],this)}},me.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},me.prototype.createPolygon=function(){if(0===arguments.length)return new $t(null,null,this);if(1===arguments.length){if(S(arguments[0],G)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ee){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new $t(arguments[0],arguments[1],this)},me.prototype.getSRID=function(){return this._SRID},me.prototype.createGeometryCollection=function(){return 0===arguments.length?new jt(null,this):1===arguments.length?new jt(arguments[0],this):void 0},me.prototype.createGeometry=function(t){return new ie(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},me.prototype.getPrecisionModel=function(){return this._precisionModel},me.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(S(arguments[0],G))return new ee(arguments[0],this)}},me.prototype.createMultiPolygon=function(){return 0===arguments.length?new ne(null,this):1===arguments.length?new ne(arguments[0],this):void 0},me.prototype.createMultiPoint=function(){if(0===arguments.length)return new te(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new te(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(S(arguments[0],G)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),i=0;i<e.size();i++){var r=this.getCoordinateSequenceFactory().create(1,e.getDimension());Ht.copy(e,i,r,0,1),n[i]=this.createPoint(r)}return this.createMultiPoint(n)}}},me.prototype.interfaces_=function(){return[e]},me.prototype.getClass=function(){return me},me.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},me.getDefaultCoordinateSequenceFactory=function(){return ce.instance()},me.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},me.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},Ie.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(me,Ie);var ye=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Ce=function(t){this.geometryFactory=t||new me};Ce.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!Ee[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==ye.indexOf(n)?Ee[n].apply(this,[e.coordinates]):"GeometryCollection"===n?Ee[n].apply(this,[e.geometries]):Ee[n].apply(this,[e])},Ce.prototype.write=function(t){var e=t.getGeometryType();if(!_e[e])throw new Error("Geometry is not supported");return _e[e].apply(this,[t])};var Ee={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var i=t.geometry.type;if(!Ee[i])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=Ee.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(new B(i[0],i[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new B(t[0],t[1]),new B(t[2],t[1]),new B(t[2],t[3]),new B(t[0],t[3]),new B(t[0],t[1])])},Point:function(t){var e=new B(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Ee.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=Ee.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Ee.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=Ee.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),i=[],r=1;r<t.length;++r){var o=t[r],s=Ee.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);i.push(a)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(Ee.Polygon.apply(this,[i]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(this.read(i))}return this.geometryFactory.createGeometryCollection(e)}},_e={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:_e.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=_e.Point.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),i=0;i<n.length;++i){var r=n[i];e.push(_e.coordinate.apply(this,[r]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=_e.LineString.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=_e.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var i=0;i<t._holes.length;++i){var r=t._holes[i],o=_e.LineString.apply(this,[r]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=_e.Polygon.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=i.getGeometryType();e.push(_e[r].apply(this,[i]))}return{type:"GeometryCollection",geometries:e}}},ve=function(t){this.geometryFactory=t||new me,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Ce(this.geometryFactory)};ve.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===ge.FIXED&&this.reducePrecision(e),e},ve.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Be=function(){this.parser=new Ce(this.geometryFactory)};Be.prototype.write=function(t){return this.parser.write(t)};var we=function(){},be={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};we.prototype.interfaces_=function(){return[]},we.prototype.getClass=function(){return we},we.opposite=function(t){return t===we.LEFT?we.RIGHT:t===we.RIGHT?we.LEFT:t},be.ON.get=function(){return 0},be.LEFT.get=function(){return 1},be.RIGHT.get=function(){return 2},Object.defineProperties(we,be),(p.prototype=new Error).name="EmptyStackException",(f.prototype=new _t).add=function(t){return this.array_.push(t),!0},f.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},f.prototype.push=function(t){return this.array_.push(t),t},f.prototype.pop=function(t){if(0===this.array_.length)throw new p;return this.array_.pop()},f.prototype.peek=function(){if(0===this.array_.length)throw new p;return this.array_[this.array_.length-1]},f.prototype.empty=function(){return 0===this.array_.length},f.prototype.isEmpty=function(){return this.empty()},f.prototype.search=function(t){return this.array_.indexOf(t)},f.prototype.size=function(){return this.array_.length},f.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Qe=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Qe.prototype.getCoordinate=function(){return this._minCoord},Qe.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Qe.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();et.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],i=at.computeOrientation(this._minCoord,n,e),r=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&i===at.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&i===at.CLOCKWISE)&&(r=!0),r&&(this._minIndex=this._minIndex-1)},Qe.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var i=we.LEFT;return n[e].y<n[e+1].y&&(i=we.RIGHT),i},Qe.prototype.getEdge=function(){return this._orientedDe},Qe.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Qe.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Qe.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}et.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===we.LEFT&&(this._orientedDe=this._minDe.getSym())},Qe.prototype.interfaces_=function(){return[]},Qe.prototype.getClass=function(){return Qe};var xe=function(t){function e(n,i){t.call(this,e.msgWithCoord(n,i)),this.pt=i?new B(i):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}($),De=function(){this.array_=[]};De.prototype.addLast=function(t){this.array_.push(t)},De.prototype.removeFirst=function(){return this.array_.shift()},De.prototype.isEmpty=function(){return 0===this.array_.length};var Se=function(){this._finder=null,this._dirEdgeList=new vt,this._nodes=new vt,this._rightMostCoord=null,this._env=null,this._finder=new Qe};Se.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Se.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Se.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var i=n.next();if(i.isVisited()||i.getSym().isVisited()){e=i;break}}if(null===e)throw new xe("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var r=t.getEdges().iterator();r.hasNext();){var o=r.next();o.setVisited(!0),this.copySymDepths(o)}},Se.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(we.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Se.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Se.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(we.RIGHT)>=1&&e.getDepth(we.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Se.prototype.computeDepths=function(t){var e=new kt,n=new De,i=t.getNode();for(n.addLast(i),e.add(i),t.setVisited(!0);!n.isEmpty();){var r=n.removeFirst();e.add(r),this.computeNodeDepth(r);for(var o=r.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}},Se.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Se.prototype.getEnvelope=function(){if(null===this._env){for(var t=new J,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),i=0;i<n.length-1;i++)t.expandToInclude(n[i]);this._env=t}return this._env},Se.prototype.addReachable=function(t){var e=new f;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Se.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(we.LEFT,t.getDepth(we.RIGHT)),e.setDepth(we.RIGHT,t.getDepth(we.LEFT))},Se.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();this._dirEdgeList.add(i);var r=i.getSym().getNode();r.isVisited()||e.push(r)}},Se.prototype.getNodes=function(){return this._nodes},Se.prototype.getDirectedEdges=function(){return this._dirEdgeList},Se.prototype.interfaces_=function(){return[E]},Se.prototype.getClass=function(){return Se};var Me=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[we.ON]=n}else if(arguments[0]instanceof t){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var r=0;r<this.location.length;r++)this.location[r]=i.location[r]}}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.init(3),this.location[we.ON]=o,this.location[we.LEFT]=s,this.location[we.RIGHT]=a}};Me.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Me.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==x.NONE)return!1;return!0},Me.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===x.NONE&&(this.location[e]=t)},Me.prototype.isLine=function(){return 1===this.location.length},Me.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[we.ON]=this.location[we.ON],e[we.LEFT]=x.NONE,e[we.RIGHT]=x.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===x.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Me.prototype.getLocations=function(){return this.location},Me.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[we.LEFT];this.location[we.LEFT]=this.location[we.RIGHT],this.location[we.RIGHT]=t},Me.prototype.toString=function(){var t=new R;return this.location.length>1&&t.append(x.toLocationSymbol(this.location[we.LEFT])),t.append(x.toLocationSymbol(this.location[we.ON])),this.location.length>1&&t.append(x.toLocationSymbol(this.location[we.RIGHT])),t.toString()},Me.prototype.setLocations=function(t,e,n){this.location[we.ON]=t,this.location[we.LEFT]=e,this.location[we.RIGHT]=n},Me.prototype.get=function(t){return t<this.location.length?this.location[t]:x.NONE},Me.prototype.isArea=function(){return this.location.length>1},Me.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===x.NONE)return!0;return!1},Me.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(we.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Me.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(x.NONE)},Me.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Me.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Me.prototype.interfaces_=function(){return[]},Me.prototype.getClass=function(){return Me};var ke=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Me(e),this.elt[1]=new Me(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Me(n.elt[0]),this.elt[1]=new Me(n.elt[1])}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.elt[0]=new Me(x.NONE),this.elt[1]=new Me(x.NONE),this.elt[i].setLocation(r)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new Me(o,s,a),this.elt[1]=new Me(o,s,a)}else if(4===arguments.length){var A=arguments[0],l=arguments[1],c=arguments[2],u=arguments[3];this.elt[0]=new Me(x.NONE,x.NONE,x.NONE),this.elt[1]=new Me(x.NONE,x.NONE,x.NONE),this.elt[A].setLocations(l,c,u)}};ke.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},ke.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},ke.prototype.isNull=function(t){return this.elt[t].isNull()},ke.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},ke.prototype.isLine=function(t){return this.elt[t].isLine()},ke.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Me(t.elt[e]):this.elt[e].merge(t.elt[e])},ke.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},ke.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(we.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},ke.prototype.toString=function(){var t=new R;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},ke.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},ke.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},ke.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(we.ON,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.elt[n].setLocation(i,r)}},ke.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},ke.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},ke.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Me(this.elt[t].location[0]))},ke.prototype.interfaces_=function(){return[]},ke.prototype.getClass=function(){return ke},ke.toLineLabel=function(t){for(var e=new ke(x.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Re=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new vt,this._pts=new vt,this._label=new ke(x.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new vt,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Re.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=at.isCCW(this._ring.getCoordinates())},Re.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Re.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new xe("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new xe("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var i=e.getLabel();et.isTrue(i.isArea()),this.mergeLabel(i),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},Re.prototype.getLinearRing=function(){return this._ring},Re.prototype.getCoordinate=function(t){return this._pts.get(t)},Re.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},Re.prototype.addPoints=function(t,e,n){var i=t.getCoordinates();if(e){var r=1;n&&(r=0);for(var o=r;o<i.length;o++)this._pts.add(i[o])}else{var s=i.length-2;n&&(s=i.length-1);for(var a=s;a>=0;a--)this._pts.add(i[a])}},Re.prototype.isHole=function(){return this._isHole},Re.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Re.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!at.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},Re.prototype.addHole=function(t){this._holes.add(t)},Re.prototype.isShell=function(){return null===this._shell},Re.prototype.getLabel=function(){return this._label},Re.prototype.getEdges=function(){return this._edges},Re.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Re.prototype.getShell=function(){return this._shell},Re.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,we.RIGHT);if(n===x.NONE)return null;if(this._label.getLocation(e)===x.NONE)return this._label.setLocation(e,n),null}},Re.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Re.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Re.prototype.interfaces_=function(){return[]},Re.prototype.getClass=function(){return Re};var Ne=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Re),Pe=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new vt,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Ne(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Re),Te=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};Te.prototype.setVisited=function(t){this._isVisited=t},Te.prototype.setInResult=function(t){this._isInResult=t},Te.prototype.isCovered=function(){return this._isCovered},Te.prototype.isCoveredSet=function(){return this._isCoveredSet},Te.prototype.setLabel=function(t){this._label=t},Te.prototype.getLabel=function(){return this._label},Te.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Te.prototype.updateIM=function(t){et.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Te.prototype.isInResult=function(){return this._isInResult},Te.prototype.isVisited=function(){return this._isVisited},Te.prototype.interfaces_=function(){return[]},Te.prototype.getClass=function(){return Te};var Le=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new ke(0,x.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=x.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var i=t.getLocation(e);n!==x.BOUNDARY&&(n=i)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new ke(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof ke)for(var n=arguments[0],i=0;i<2;i++){var r=this.computeMergedLocation(n,i);this._label.getLocation(i)===x.NONE&&this._label.setLocation(i,r)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=x.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case x.BOUNDARY:n=x.INTERIOR;break;case x.INTERIOR:default:n=x.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Te),Fe=function(){this.nodeMap=new u,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};Fe.prototype.find=function(t){return this.nodeMap.get(t)},Fe.prototype.addNode=function(){if(arguments[0]instanceof B){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Le){var n=arguments[0],i=this.nodeMap.get(n.getCoordinate());return null===i?(this.nodeMap.put(n.getCoordinate(),n),n):(i.mergeLabel(n),i)}},Fe.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},Fe.prototype.iterator=function(){return this.nodeMap.values().iterator()},Fe.prototype.values=function(){return this.nodeMap.values()},Fe.prototype.getBoundaryNodes=function(t){for(var e=new vt,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(t)===x.BOUNDARY&&e.add(i)}return e},Fe.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},Fe.prototype.interfaces_=function(){return[]},Fe.prototype.getClass=function(){return Fe};var Oe=function(){},Ge={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Oe.prototype.interfaces_=function(){return[]},Oe.prototype.getClass=function(){return Oe},Oe.isNorthern=function(t){return t===Oe.NE||t===Oe.NW},Oe.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},Oe.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},Oe.isInHalfPlane=function(t,e){return e===Oe.SE?t===Oe.SE||t===Oe.SW:t===e||t===e+1},Oe.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new I("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Oe.NE:Oe.SE:e>=0?Oe.NW:Oe.SW}if(arguments[0]instanceof B&&arguments[1]instanceof B){var n=arguments[0],i=arguments[1];if(i.x===n.x&&i.y===n.y)throw new I("Cannot compute the quadrant for two identical points "+n);return i.x>=n.x?i.y>=n.y?Oe.NE:Oe.SE:i.y>=n.y?Oe.NW:Oe.SW}},Ge.NE.get=function(){return 0},Ge.NW.get=function(){return 1},Ge.SW.get=function(){return 2},Ge.SE.get=function(){return 3},Object.defineProperties(Oe,Ge);var Ue=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];this._edge=e,this.init(n,i),this._label=null}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this._edge=r,this.init(o,s),this._label=a}};Ue.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:at.computeOrientation(t._p0,t._p1,this._p1)},Ue.prototype.getDy=function(){return this._dy},Ue.prototype.getCoordinate=function(){return this._p0},Ue.prototype.setNode=function(t){this._node=t},Ue.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1);t.print("  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Ue.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Ue.prototype.getDirectedCoordinate=function(){return this._p1},Ue.prototype.getDx=function(){return this._dx},Ue.prototype.getLabel=function(){return this._label},Ue.prototype.getEdge=function(){return this._edge},Ue.prototype.getQuadrant=function(){return this._quadrant},Ue.prototype.getNode=function(){return this._node},Ue.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Ue.prototype.computeLabel=function(t){},Ue.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Oe.quadrant(this._dx,this._dy),et.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Ue.prototype.interfaces_=function(){return[E]},Ue.prototype.getClass=function(){return Ue};var je=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var i=e.getNumPoints()-1;this.init(e.getCoordinate(i),e.getCoordinate(i-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new ke(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new xe("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,we.LEFT)===x.INTERIOR&&this._label.getLocation(e,we.RIGHT)===x.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[we.LEFT]+"/"+this._depth[we.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,x.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,x.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var i=1;t===we.LEFT&&(i=-1);var r=we.opposite(t),o=e+n*i;this.setDepth(t,e),this.setDepth(r,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===x.EXTERIOR&&e===x.INTERIOR?1:t===x.INTERIOR&&e===x.EXTERIOR?-1:0},e}(Ue),Ye=function(){};Ye.prototype.createNode=function(t){return new Le(t,null)},Ye.prototype.interfaces_=function(){return[]},Ye.prototype.getClass=function(){return Ye};var Ke=function(){if(this._edges=new vt,this._nodes=null,this._edgeEndList=new vt,0===arguments.length)this._nodes=new Fe(new Ye);else if(1===arguments.length){var t=arguments[0];this._nodes=new Fe(t)}};Ke.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Ke.prototype.find=function(t){return this._nodes.find(t)},Ke.prototype.addNode=function(){if(arguments[0]instanceof Le){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof B){var e=arguments[0];return this._nodes.addNode(e)}},Ke.prototype.getNodeIterator=function(){return this._nodes.iterator()},Ke.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Ke.prototype.debugPrintln=function(t){K.out.println(t)},Ke.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var i=n.getLabel();return null!==i&&i.getLocation(t)===x.BOUNDARY},Ke.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Ke.prototype.matchInSameDirection=function(t,e,n,i){return!!t.equals(n)&&at.computeOrientation(t,e,i)===at.COLLINEAR&&Oe.quadrant(t,e)===Oe.quadrant(n,i)},Ke.prototype.getEdgeEnds=function(){return this._edgeEndList},Ke.prototype.debugPrint=function(t){K.out.print(t)},Ke.prototype.getEdgeIterator=function(){return this._edges.iterator()},Ke.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(this.matchInSameDirection(t,e,r[0],r[1]))return i;if(this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return i}return null},Ke.prototype.insertEdge=function(t){this._edges.add(t)},Ke.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Ke.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var i=new je(n,!0),r=new je(n,!1);i.setSym(r),r.setSym(i),this.add(i),this.add(r)}},Ke.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Ke.prototype.getNodes=function(){return this._nodes.values()},Ke.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return i}return null},Ke.prototype.interfaces_=function(){return[]},Ke.prototype.getClass=function(){return Ke},Ke.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var ze=function(){this._geometryFactory=null,this._shellList=new vt;var t=arguments[0];this._geometryFactory=t};ze.prototype.sortShellsAndHoles=function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isHole()?n.add(r):e.add(r)}},ze.prototype.computePolygons=function(t){for(var e=new vt,n=t.iterator();n.hasNext();){var i=n.next().toPolygon(this._geometryFactory);e.add(i)}return e},ze.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(null===i.getShell()){var r=this.findEdgeRingContaining(i,t);if(null===r)throw new xe("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(r)}}},ze.prototype.buildMinimalEdgeRings=function(t,e,n){for(var i=new vt,r=t.iterator();r.hasNext();){var o=r.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else i.add(o)}return i},ze.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},ze.prototype.buildMaximalEdgeRings=function(t){for(var e=new vt,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var r=new Pe(i,this._geometryFactory);e.add(r),r.setInResult()}}return e},ze.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(t)}},ze.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},ze.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var A=a.next(),l=A.getLinearRing(),c=l.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var u=!1;c.contains(i)&&at.isPointInRing(r,l.getCoordinates())&&(u=!0),u&&(null===o||s.contains(c))&&(o=A)}return o},ze.prototype.findShell=function(t){for(var e=0,n=null,i=t.iterator();i.hasNext();){var r=i.next();r.isHole()||(n=r,e++)}return et.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},ze.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Ke.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(e),r=new vt,o=this.buildMinimalEdgeRings(i,this._shellList,r);this.sortShellsAndHoles(o,this._shellList,r),this.placeFreeHoles(this._shellList,r)}},ze.prototype.interfaces_=function(){return[]},ze.prototype.getClass=function(){return ze};var Je=function(){};Je.prototype.getBounds=function(){},Je.prototype.interfaces_=function(){return[]},Je.prototype.getClass=function(){return Je};var qe=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};qe.prototype.getItem=function(){return this._item},qe.prototype.getBounds=function(){return this._bounds},qe.prototype.interfaces_=function(){return[Je,e]},qe.prototype.getClass=function(){return qe};var He=function(){this._size=null,this._items=null,this._size=0,this._items=new vt,this._items.add(null)};He.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},He.prototype.size=function(){return this._size},He.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},He.prototype.clear=function(){this._size=0,this._items.clear()},He.prototype.isEmpty=function(){return 0===this._size},He.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},He.prototype.interfaces_=function(){return[]},He.prototype.getClass=function(){return He};var Ve=function(){};Ve.prototype.visitItem=function(t){},Ve.prototype.interfaces_=function(){return[]},Ve.prototype.getClass=function(){return Ve};var We=function(){};We.prototype.insert=function(t,e){},We.prototype.remove=function(t,e){},We.prototype.query=function(){},We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We};var Ze=function(){if(this._childBoundables=new vt,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Xe={serialVersionUID:{configurable:!0}};Ze.prototype.getLevel=function(){return this._level},Ze.prototype.size=function(){return this._childBoundables.size()},Ze.prototype.getChildBoundables=function(){return this._childBoundables},Ze.prototype.addChildBoundable=function(t){et.isTrue(null===this._bounds),this._childBoundables.add(t)},Ze.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Ze.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Ze.prototype.interfaces_=function(){return[Je,e]},Ze.prototype.getClass=function(){return Ze},Xe.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Ze,Xe);var $e=function(){};$e.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},$e.min=function(t){return $e.sort(t),t.get(0)},$e.sort=function(t,e){var n=t.toArray();e?Lt.sort(n,e):Lt.sort(n);for(var i=t.iterator(),r=0,o=n.length;r<o;r++)i.next(),i.set(n[r])},$e.singletonList=function(t){var e=new vt;return e.add(t),e};var tn=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};tn.prototype.expandToQueue=function(t,e){var n=tn.isComposite(this._boundable1),i=tn.isComposite(this._boundable2);if(n&&i)return tn.area(this._boundable1)>tn.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(i)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new I("neither boundable is composite")},tn.prototype.isLeaves=function(){return!(tn.isComposite(this._boundable1)||tn.isComposite(this._boundable2))},tn.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},tn.prototype.expand=function(t,e,n,i){for(var r=t.getChildBoundables().iterator();r.hasNext();){var o=r.next(),s=new tn(o,e,this._itemDistance);s.getDistance()<i&&n.add(s)}},tn.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},tn.prototype.getDistance=function(){return this._distance},tn.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},tn.prototype.interfaces_=function(){return[E]},tn.prototype.getClass=function(){return tn},tn.area=function(t){return t.getBounds().getArea()},tn.isComposite=function(t){return t instanceof Ze};var en=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new vt,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];et.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},nn={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};en.prototype.getNodeCapacity=function(){return this._nodeCapacity},en.prototype.lastNode=function(t){return t.get(t.size()-1)},en.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Ze?t+=this.size(n):n instanceof qe&&(t+=1)}return t}},en.prototype.removeItem=function(t,e){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof qe&&r.getItem()===e&&(n=r)}return null!==n&&(t.getChildBoundables().remove(n),!0)},en.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new vt:t}if(1===arguments.length){for(var e=arguments[0],n=new vt,i=e.getChildBoundables().iterator();i.hasNext();){var r=i.next();if(r instanceof Ze){var o=this.itemsTree(r);null!==o&&n.add(o)}else r instanceof qe?n.add(r.getItem()):et.shouldNeverReachHere()}return n.size()<=0?null:n}},en.prototype.insert=function(t,e){et.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new qe(t,e))},en.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new vt;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(et.isTrue(n>-2),i.getLevel()===n)return r.add(i),null;for(var o=i.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof Ze?this.boundablesAtLevel(n,s,r):(et.isTrue(s instanceof qe),-1===n&&r.add(s))}return null}},en.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new vt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,i)}else if(3===arguments.length)if(S(arguments[2],Ve)&&arguments[0]instanceof Object&&arguments[1]instanceof Ze)for(var r=arguments[0],o=arguments[2],s=arguments[1].getChildBoundables(),a=0;a<s.size();a++){var A=s.get(a);this.getIntersectsOp().intersects(A.getBounds(),r)&&(A instanceof Ze?this.query(r,A,o):A instanceof qe?o.visitItem(A.getItem()):et.shouldNeverReachHere())}else if(S(arguments[2],_t)&&arguments[0]instanceof Object&&arguments[1]instanceof Ze)for(var l=arguments[0],c=arguments[2],u=arguments[1].getChildBoundables(),h=0;h<u.size();h++){var g=u.get(h);this.getIntersectsOp().intersects(g.getBounds(),l)&&(g instanceof Ze?this.query(l,g,c):g instanceof qe?c.add(g.getItem()):et.shouldNeverReachHere())}},en.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},en.prototype.getRoot=function(){return this.build(),this._root},en.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=this.removeItem(i,r);if(o)return!0;for(var s=null,a=i.getChildBoundables().iterator();a.hasNext();){var A=a.next();if(this.getIntersectsOp().intersects(A.getBounds(),n)&&A instanceof Ze&&(o=this.remove(n,A,r))){s=A;break}}return null!==s&&s.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(s),o}},en.prototype.createHigherLevels=function(t,e){et.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},en.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Ze){var i=this.depth(n);i>t&&(t=i)}}return t+1}},en.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var n=new vt;n.add(this.createNode(e));var i=new vt(t);$e.sort(i,this.getComparator());for(var r=i.iterator();r.hasNext();){var o=r.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},en.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},en.prototype.interfaces_=function(){return[e]},en.prototype.getClass=function(){return en},en.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},nn.IntersectsOp.get=function(){return rn},nn.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nn.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(en,nn);var rn=function(){},on=function(){};on.prototype.distance=function(t,e){},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on};var sn=function(t){function n(e){e=e||n.DEFAULT_NODE_CAPACITY,t.call(this,e)}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var i={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return n.prototype.createParentBoundablesFromVerticalSlices=function(t,e){et.isTrue(t.length>0);for(var n=new vt,i=0;i<t.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e));return n},n.prototype.createNode=function(t){return new an(t)},n.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},n.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},n.prototype.getIntersectsOp=function(){return n.intersectsOp},n.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),i=new Array(e).fill(null),r=t.iterator(),o=0;o<e;o++){i[o]=new vt;for(var s=0;r.hasNext()&&s<n;){var a=r.next();i[o].add(a),s++}}return i},n.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],i=arguments[1];t.prototype.query.call(this,n,i)}else if(3===arguments.length)if(S(arguments[2],Ve)&&arguments[0]instanceof Object&&arguments[1]instanceof Ze){var r=arguments[0],o=arguments[1],s=arguments[2];t.prototype.query.call(this,r,o,s)}else if(S(arguments[2],_t)&&arguments[0]instanceof Object&&arguments[1]instanceof Ze){var a=arguments[0],A=arguments[1],l=arguments[2];t.prototype.query.call(this,a,A,l)}},n.prototype.getComparator=function(){return n.yComparator},n.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},n.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},n.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},n.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var i=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new vt(t);$e.sort(r,n.xComparator);var o=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(i))));return this.createParentBoundablesFromVerticalSlices(o,e)},n.prototype.nearestNeighbour=function(){if(1===arguments.length){if(S(arguments[0],on)){var t=arguments[0],e=new tn(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof tn){var i=arguments[0];return this.nearestNeighbour(i,y.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof n&&S(arguments[1],on)){var r=arguments[0],o=arguments[1],s=new tn(this.getRoot(),r.getRoot(),o);return this.nearestNeighbour(s)}if(arguments[0]instanceof tn&&"number"==typeof arguments[1]){var a=arguments[0],A=arguments[1],l=null,c=new He;for(c.add(a);!c.isEmpty()&&A>0;){var u=c.poll(),h=u.getDistance();if(h>=A)break;u.isLeaves()?(A=h,l=u):u.expandToQueue(c,A)}return[l.getBoundable(0).getItem(),l.getBoundable(1).getItem()]}}else if(3===arguments.length){var g=arguments[2],d=new qe(arguments[0],arguments[1]),p=new tn(this.getRoot(),d,g);return this.nearestNeighbour(p)[0]}},n.prototype.interfaces_=function(){return[We,e]},n.prototype.getClass=function(){return n},n.centreX=function(t){return n.avg(t.getMinX(),t.getMaxX())},n.avg=function(t,e){return(t+e)/2},n.centreY=function(t){return n.avg(t.getMinY(),t.getMaxY())},i.STRtreeNode.get=function(){return an},i.serialVersionUID.get=function(){return 0x39920f7d5f261e0},i.xComparator.get=function(){return{interfaces_:function(){return[v]},compare:function(e,i){return t.compareDoubles(n.centreX(e.getBounds()),n.centreX(i.getBounds()))}}},i.yComparator.get=function(){return{interfaces_:function(){return[v]},compare:function(e,i){return t.compareDoubles(n.centreY(e.getBounds()),n.centreY(i.getBounds()))}}},i.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},i.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(n,i),n}(en),an=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new J(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ze),An=function(){};An.prototype.interfaces_=function(){return[]},An.prototype.getClass=function(){return An},An.relativeSign=function(t,e){return t<e?-1:t>e?1:0},An.compare=function(t,e,n){if(e.equals2D(n))return 0;var i=An.relativeSign(e.x,n.x),r=An.relativeSign(e.y,n.y);switch(t){case 0:return An.compareValue(i,r);case 1:return An.compareValue(r,i);case 2:return An.compareValue(r,-i);case 3:return An.compareValue(-i,r);case 4:return An.compareValue(-i,-r);case 5:return An.compareValue(-r,-i);case 6:return An.compareValue(-r,i);case 7:return An.compareValue(i,-r)}return et.shouldNeverReachHere("invalid octant value"),0},An.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var ln=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._segString=t,this.coord=new B(e),this.segmentIndex=n,this._segmentOctant=i,this._isInterior=!e.equals2D(t.getCoordinate(n))};ln.prototype.getCoordinate=function(){return this.coord},ln.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},ln.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:An.compare(this._segmentOctant,this.coord,e.coord)},ln.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},ln.prototype.isInterior=function(){return this._isInterior},ln.prototype.interfaces_=function(){return[E]},ln.prototype.getClass=function(){return ln};var cn=function(){this._nodeMap=new u,this._edge=null;var t=arguments[0];this._edge=t};cn.prototype.getSplitCoordinates=function(){var t=new wt;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next();this.addEdgeCoordinates(n,i,t),n=i}return t.toCoordinateArray()},cn.prototype.addCollapsedNodes=function(){var t=new vt;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},cn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},cn.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),i=this._edge.getCoordinate(e+2);n.equals2D(i)&&t.add(new N(e+1))}},cn.prototype.addEdgeCoordinates=function(t,e,n){var i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);n.add(new B(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));r&&n.add(new B(e.coord))},cn.prototype.iterator=function(){return this._nodeMap.values().iterator()},cn.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},cn.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var i=e.segmentIndex-t.segmentIndex;return e.isInterior()||i--,1===i&&(n[0]=t.segmentIndex+1,!0)},cn.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),i=n.next();n.hasNext();){var r=n.next();this.findCollapseIndex(i,r,e)&&t.add(new N(e[0])),i=r}},cn.prototype.getEdge=function(){return this._edge},cn.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},cn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),s=0;o[s++]=new B(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return r&&(o[s]=new B(e.coord)),new dn(o,this._edge.getData())},cn.prototype.add=function(t,e){var n=new ln(this._edge,t,e,this._edge.getSegmentOctant(e)),i=this._nodeMap.get(n);return null!==i?(et.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this._nodeMap.put(n,n),n)},cn.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new $("bad split edge start point at "+n);var i=t.get(t.size()-1).getCoordinates(),r=i[i.length-1];if(!r.equals2D(e[e.length-1]))throw new $("bad split edge end point at "+r)},cn.prototype.interfaces_=function(){return[]},cn.prototype.getClass=function(){return cn};var un=function(){};un.prototype.interfaces_=function(){return[]},un.prototype.getClass=function(){return un},un.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new I("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),i=Math.abs(e);return t>=0?e>=0?n>=i?0:1:n>=i?7:6:e>=0?n>=i?3:2:n>=i?4:5}if(arguments[0]instanceof B&&arguments[1]instanceof B){var r=arguments[0],o=arguments[1],s=o.x-r.x,a=o.y-r.y;if(0===s&&0===a)throw new I("Cannot compute the octant for two identical points "+r);return un.octant(s,a)}};var hn=function(){};hn.prototype.getCoordinates=function(){},hn.prototype.size=function(){},hn.prototype.getCoordinate=function(t){},hn.prototype.isClosed=function(){},hn.prototype.setData=function(t){},hn.prototype.getData=function(){},hn.prototype.interfaces_=function(){return[]},hn.prototype.getClass=function(){return hn};var gn=function(){};gn.prototype.addIntersection=function(t,e){},gn.prototype.interfaces_=function(){return[hn]},gn.prototype.getClass=function(){return gn};var dn=function(){this._nodeList=new cn(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};dn.prototype.getCoordinates=function(){return this._pts},dn.prototype.size=function(){return this._pts.length},dn.prototype.getCoordinate=function(t){return this._pts[t]},dn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},dn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},dn.prototype.setData=function(t){this._data=t},dn.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:un.octant(t,e)},dn.prototype.getData=function(){return this._data},dn.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[1],i=arguments[3],r=new B(arguments[0].getIntersection(i));this.addIntersection(r,n)}},dn.prototype.toString=function(){return X.toLineString(new Ae(this._pts))},dn.prototype.getNodeList=function(){return this._nodeList},dn.prototype.addIntersectionNode=function(t,e){var n=e,i=n+1;if(i<this._pts.length){var r=this._pts[i];t.equals2D(r)&&(n=i)}return this._nodeList.add(t,n)},dn.prototype.addIntersections=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},dn.prototype.interfaces_=function(){return[gn]},dn.prototype.getClass=function(){return dn},dn.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new vt;return dn.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],i=arguments[0].iterator();i.hasNext();)i.next().getNodeList().addSplitEdges(n)};var pn=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new B,this.p1=new B;else if(1===arguments.length){var t=arguments[0];this.p0=new B(t.p0),this.p1=new B(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3];this.p0=new B(e,n),this.p1=new B(i,r)}},fn={serialVersionUID:{configurable:!0}};pn.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},pn.prototype.orientationIndex=function(){if(arguments[0]instanceof pn){var t=arguments[0],e=at.orientationIndex(this.p0,this.p1,t.p0),n=at.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof B){var i=arguments[0];return at.orientationIndex(this.p0,this.p1,i)}},pn.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},pn.prototype.isVertical=function(){return this.p0.x===this.p1.x},pn.prototype.equals=function(t){if(!(t instanceof pn))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},pn.prototype.intersection=function(t){var e=new rt;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},pn.prototype.project=function(){if(arguments[0]instanceof B){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new B(t);var e=this.projectionFactor(t),n=new B;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof pn){var i=arguments[0],r=this.projectionFactor(i.p0),o=this.projectionFactor(i.p1);if(r>=1&&o>=1)return null;if(r<=0&&o<=0)return null;var s=this.project(i.p0);r<0&&(s=this.p0),r>1&&(s=this.p1);var a=this.project(i.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new pn(s,a)}},pn.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},pn.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},pn.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},pn.prototype.distancePerpendicular=function(t){return at.distancePointLinePerpendicular(t,this.p0,this.p1)},pn.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},pn.prototype.midPoint=function(){return pn.midPoint(this.p0,this.p1)},pn.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=e*e+n*n;return i<=0?y.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/i},pn.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),i=y.MAX_VALUE,r=null,o=this.closestPoint(t.p0);i=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(r=s.distance(t.p1))<i&&(i=r,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(r=a.distance(this.p0))<i&&(i=r,n[0]=this.p0,n[1]=a);var A=t.closestPoint(this.p1);return(r=A.distance(this.p1))<i&&(i=r,n[0]=this.p1,n[1]=A),n},pn.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},pn.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},pn.prototype.getLength=function(){return this.p0.distance(this.p1)},pn.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},pn.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},pn.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},pn.prototype.lineIntersection=function(t){try{return z.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof Y))throw t}return null},pn.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},pn.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(r*r+o*o),a=0,A=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*r/s,A=e*o/s}return new B(n-A,i+a)},pn.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},pn.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||y.isNaN(e))&&(e=1),e},pn.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},pn.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},pn.prototype.distance=function(){if(arguments[0]instanceof pn){var t=arguments[0];return at.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof B){var e=arguments[0];return at.distancePointLine(e,this.p0,this.p1)}},pn.prototype.pointAlong=function(t){var e=new B;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},pn.prototype.hashCode=function(){var t=y.doubleToLongBits(this.p0.x);t^=31*y.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=y.doubleToLongBits(this.p1.x);return n^=31*y.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},pn.prototype.interfaces_=function(){return[E,e]},pn.prototype.getClass=function(){return pn},pn.midPoint=function(t,e){return new B((t.x+e.x)/2,(t.y+e.y)/2)},fn.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(pn,fn);var mn=function(){this.tempEnv1=new J,this.tempEnv2=new J,this._overlapSeg1=new pn,this._overlapSeg2=new pn};mn.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn};var In=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=i};In.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},In.prototype.computeSelect=function(t,e,n,i){var r=this._pts[e],o=this._pts[n];if(i.tempEnv1.init(r,o),n-e==1)return i.select(this,e),null;if(!t.intersects(i.tempEnv1))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,i),s<n&&this.computeSelect(t,s,n,i)},In.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},In.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},In.prototype.setId=function(t){this._id=t},In.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},In.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new J(t,e)}return this._env},In.prototype.getEndIndex=function(){return this._end},In.prototype.getStartIndex=function(){return this._start},In.prototype.getContext=function(){return this._context},In.prototype.getId=function(){return this._id},In.prototype.computeOverlapsInternal=function(t,e,n,i,r,o){var s=this._pts[t],a=this._pts[e],A=n._pts[i],l=n._pts[r];if(e-t==1&&r-i==1)return o.overlap(this,t,n,i),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(A,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),u=Math.trunc((i+r)/2);t<c&&(i<u&&this.computeOverlapsInternal(t,c,n,i,u,o),u<r&&this.computeOverlapsInternal(t,c,n,u,r,o)),c<e&&(i<u&&this.computeOverlapsInternal(c,e,n,i,u,o),u<r&&this.computeOverlapsInternal(c,e,n,u,r,o))},In.prototype.interfaces_=function(){return[]},In.prototype.getClass=function(){return In};var yn=function(){};yn.prototype.interfaces_=function(){return[]},yn.prototype.getClass=function(){return yn},yn.getChainStartIndices=function(t){var e=0,n=new vt;n.add(new N(e));do{var i=yn.findChainEnd(t,e);n.add(new N(i)),e=i}while(e<t.length-1);return yn.toIntArray(n)},yn.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var i=Oe.quadrant(t[n],t[n+1]),r=e+1;r<t.length&&(t[r-1].equals2D(t[r])||Oe.quadrant(t[r-1],t[r])===i);)r++;return r-1},yn.getChains=function(){if(1===arguments.length){var t=arguments[0];return yn.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=new vt,r=yn.getChainStartIndices(e),o=0;o<r.length-1;o++){var s=new In(e,r[o],r[o+1],n);i.add(s)}return i}},yn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Cn=function(){};Cn.prototype.computeNodes=function(t){},Cn.prototype.getNodedSubstrings=function(){},Cn.prototype.interfaces_=function(){return[]},Cn.prototype.getClass=function(){return Cn};var En=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};En.prototype.setSegmentIntersector=function(t){this._segInt=t},En.prototype.interfaces_=function(){return[Cn]},En.prototype.getClass=function(){return En};var _n=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new vt,this._index=new sn,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=yn.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new vn(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),i=this._index.query(n.getEnvelope()).iterator();i.hasNext();){var r=i.next();if(r.getId()>n.getId()&&(n.computeOverlaps(r,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return vn},Object.defineProperties(e,n),e}(En),vn=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[1],n=arguments[2],i=arguments[3],r=arguments[0].getContext(),o=n.getContext();this._si.processIntersections(r,e,o,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(mn),Bn=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(i)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(r),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}},wn={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Bn.prototype.getEndCapStyle=function(){return this._endCapStyle},Bn.prototype.isSingleSided=function(){return this._isSingleSided},Bn.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Bn.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Bn.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Bn.JOIN_ROUND&&(this._quadrantSegments=Bn.DEFAULT_QUADRANT_SEGMENTS)},Bn.prototype.getJoinStyle=function(){return this._joinStyle},Bn.prototype.setJoinStyle=function(t){this._joinStyle=t},Bn.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Bn.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Bn.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Bn.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Bn.prototype.getMitreLimit=function(){return this._mitreLimit},Bn.prototype.setMitreLimit=function(t){this._mitreLimit=t},Bn.prototype.setSingleSided=function(t){this._isSingleSided=t},Bn.prototype.interfaces_=function(){return[]},Bn.prototype.getClass=function(){return Bn},Bn.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},wn.CAP_ROUND.get=function(){return 1},wn.CAP_FLAT.get=function(){return 2},wn.CAP_SQUARE.get=function(){return 3},wn.JOIN_ROUND.get=function(){return 1},wn.JOIN_MITRE.get=function(){return 2},wn.JOIN_BEVEL.get=function(){return 3},wn.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},wn.DEFAULT_MITRE_LIMIT.get=function(){return 5},wn.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Bn,wn);var bn=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=at.COUNTERCLOCKWISE,this._inputLine=t||null},Qn={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};bn.prototype.isDeletable=function(t,e,n,i){var r=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(r,o,s)&&!!this.isShallow(r,o,s,i)&&this.isShallowSampled(r,o,t,n,i)},bn.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),i=!1;n<this._inputLine.length;){var r=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=bn.DELETE,r=!0,i=!0),t=r?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return i},bn.prototype.isShallowConcavity=function(t,e,n,i){return at.computeOrientation(t,e,n)===this._angleOrientation&&at.distancePointLine(e,t,n)<i},bn.prototype.isShallowSampled=function(t,e,n,i,r){var o=Math.trunc((i-n)/bn.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=n;s<i;s+=o)if(!this.isShallow(t,e,this._inputLine[s],r))return!1;return!0},bn.prototype.isConcave=function(t,e,n){return at.computeOrientation(t,e,n)===this._angleOrientation},bn.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=at.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},bn.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===bn.DELETE;)e++;return e},bn.prototype.isShallow=function(t,e,n,i){return at.distancePointLine(e,t,n)<i},bn.prototype.collapseLine=function(){for(var t=new wt,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==bn.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},bn.prototype.interfaces_=function(){return[]},bn.prototype.getClass=function(){return bn},bn.simplify=function(t,e){return new bn(t).simplify(e)},Qn.INIT.get=function(){return 0},Qn.DELETE.get=function(){return 1},Qn.KEEP.get=function(){return 1},Qn.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(bn,Qn);var xn=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new vt},Dn={COORDINATE_ARRAY_TYPE:{configurable:!0}};xn.prototype.getCoordinates=function(){return this._ptList.toArray(xn.COORDINATE_ARRAY_TYPE)},xn.prototype.setPrecisionModel=function(t){this._precisionModel=t},xn.prototype.addPt=function(t){var e=new B(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},xn.prototype.revere=function(){},xn.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var i=t.length-1;i>=0;i--)this.addPt(t[i])},xn.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},xn.prototype.toString=function(){return(new me).createLineString(this.getCoordinates()).toString()},xn.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new B(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},xn.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},xn.prototype.interfaces_=function(){return[]},xn.prototype.getClass=function(){return xn},Dn.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(xn,Dn);var Sn=function(){},Mn={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Sn.prototype.interfaces_=function(){return[]},Sn.prototype.getClass=function(){return Sn},Sn.toDegrees=function(t){return 180*t/Math.PI},Sn.normalize=function(t){for(;t>Math.PI;)t-=Sn.PI_TIMES_2;for(;t<=-Math.PI;)t+=Sn.PI_TIMES_2;return t},Sn.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=n.x-e.x,r=n.y-e.y;return Math.atan2(r,i)}},Sn.isAcute=function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)>0},Sn.isObtuse=function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)<0},Sn.interiorAngle=function(t,e,n){var i=Sn.angle(e,t),r=Sn.angle(e,n);return Math.abs(r-i)},Sn.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Sn.PI_TIMES_2;t>=Sn.PI_TIMES_2&&(t=0)}else{for(;t>=Sn.PI_TIMES_2;)t-=Sn.PI_TIMES_2;t<0&&(t=0)}return t},Sn.angleBetween=function(t,e,n){var i=Sn.angle(e,t),r=Sn.angle(e,n);return Sn.diff(i,r)},Sn.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Sn.toRadians=function(t){return t*Math.PI/180},Sn.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Sn.COUNTERCLOCKWISE:n<0?Sn.CLOCKWISE:Sn.NONE},Sn.angleBetweenOriented=function(t,e,n){var i=Sn.angle(e,t),r=Sn.angle(e,n)-i;return r<=-Math.PI?r+Sn.PI_TIMES_2:r>Math.PI?r-Sn.PI_TIMES_2:r},Mn.PI_TIMES_2.get=function(){return 2*Math.PI},Mn.PI_OVER_2.get=function(){return Math.PI/2},Mn.PI_OVER_4.get=function(){return Math.PI/4},Mn.COUNTERCLOCKWISE.get=function(){return at.COUNTERCLOCKWISE},Mn.CLOCKWISE.get=function(){return at.CLOCKWISE},Mn.NONE.get=function(){return at.COLLINEAR},Object.defineProperties(Sn,Mn);var kn=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new pn,this._seg1=new pn,this._offset0=new pn,this._offset1=new pn,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],i=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new rt,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Bn.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(i)},Rn={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};kn.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=at.computeOrientation(this._s0,this._s1,this._s2),i=n===at.CLOCKWISE&&this._side===we.LEFT||n===at.COUNTERCLOCKWISE&&this._side===we.RIGHT;0===n?this.addCollinear(e):i?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},kn.prototype.addLineEndCap=function(t,e){var n=new pn(t,e),i=new pn;this.computeOffsetSegment(n,we.LEFT,this._distance,i);var r=new pn;this.computeOffsetSegment(n,we.RIGHT,this._distance,r);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case Bn.CAP_ROUND:this._segList.addPt(i.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,at.CLOCKWISE,this._distance),this._segList.addPt(r.p1);break;case Bn.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(r.p1);break;case Bn.CAP_SQUARE:var A=new B;A.x=Math.abs(this._distance)*Math.cos(a),A.y=Math.abs(this._distance)*Math.sin(a);var l=new B(i.p1.x+A.x,i.p1.y+A.y),c=new B(r.p1.x+A.x,r.p1.y+A.y);this._segList.addPt(l),this._segList.addPt(c)}},kn.prototype.getCoordinates=function(){return this._segList.getCoordinates()},kn.prototype.addMitreJoin=function(t,e,n,i){var r=!0,o=null;try{o=z.intersection(e.p0,e.p1,n.p0,n.p1),(i<=0?1:o.distance(t)/Math.abs(i))>this._bufParams.getMitreLimit()&&(r=!1)}catch(t){if(!(t instanceof Y))throw t;o=new B(0,0),r=!1}r?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,i,this._bufParams.getMitreLimit())},kn.prototype.addFilletCorner=function(t,e,n,i,r){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),A=n.x-t.x,l=n.y-t.y,c=Math.atan2(l,A);i===at.CLOCKWISE?a<=c&&(a+=2*Math.PI):a>=c&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,c,i,r),this._segList.addPt(n)},kn.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*kn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Bn.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Bn.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},kn.prototype.createSquare=function(t){this._segList.addPt(new B(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new B(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new B(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new B(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},kn.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},kn.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},kn.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},kn.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},kn.prototype.addLimitedMitreJoin=function(t,e,n,i){var r=this._seg0.p1,o=Sn.angle(r,this._seg0.p0),s=Sn.angleBetweenOriented(this._seg0.p0,r,this._seg1.p1)/2,a=Sn.normalize(o+s),A=Sn.normalize(a+Math.PI),l=i*n,c=n-l*Math.abs(Math.sin(s)),u=r.x+l*Math.cos(A),h=r.y+l*Math.sin(A),g=new B(u,h),d=new pn(r,g),p=d.pointAlongOffset(1,c),f=d.pointAlongOffset(1,-c);this._side===we.LEFT?(this._segList.addPt(p),this._segList.addPt(f)):(this._segList.addPt(f),this._segList.addPt(p))},kn.prototype.computeOffsetSegment=function(t,e,n,i){var r=e===we.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),A=r*n*o/a,l=r*n*s/a;i.p0.x=t.p0.x-l,i.p0.y=t.p0.y+A,i.p1.x=t.p1.x-l,i.p1.y=t.p1.y+A},kn.prototype.addFilletArc=function(t,e,n,i,r){var o=i===at.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var A=s/a,l=0,c=new B;l<s;){var u=e+o*l;c.x=t.x+r*Math.cos(u),c.y=t.y+r*Math.sin(u),this._segList.addPt(c),l+=A}},kn.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*kn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new B((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var i=new B((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},kn.prototype.createCircle=function(t){var e=new B(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},kn.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},kn.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new xn,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*kn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},kn.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Bn.JOIN_BEVEL||this._bufParams.getJoinStyle()===Bn.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,at.CLOCKWISE,this._distance))},kn.prototype.closeRing=function(){this._segList.closeRing()},kn.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},kn.prototype.interfaces_=function(){return[]},kn.prototype.getClass=function(){return kn},Rn.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Rn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Rn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Rn.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(kn,Rn);var Nn=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Nn.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,i=Math.abs(e),r=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,n,r);var o=r.getCoordinates();return n&&bt.reverse(o),o},Nn.prototype.computeSingleSidedBufferCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var r=bn.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],we.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(r[s],!0)}else{n.addSegments(t,!1);var a=bn.simplify(t,i),A=a.length-1;n.initSideSegments(a[0],a[1],we.LEFT),n.addFirstSegment();for(var l=2;l<=A;l++)n.addNextSegment(a[l],!0)}n.addLastSegment(),n.closeRing()},Nn.prototype.computeRingBufferCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);e===we.RIGHT&&(i=-i);var r=bn.simplify(t,i),o=r.length-1;n.initSideSegments(r[o-1],r[0],e);for(var s=1;s<=o;s++){var a=1!==s;n.addNextSegment(r[s],a)}n.closeRing()},Nn.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),i=bn.simplify(t,n),r=i.length-1;e.initSideSegments(i[0],i[1],we.LEFT);for(var o=2;o<=r;o++)e.addNextSegment(i[o],!0);e.addLastSegment(),e.addLineEndCap(i[r-1],i[r]);var s=bn.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],we.LEFT);for(var A=a-2;A>=0;A--)e.addNextSegment(s[A],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},Nn.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Bn.CAP_ROUND:e.createCircle(t);break;case Bn.CAP_SQUARE:e.createSquare(t)}},Nn.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),i=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],i);else if(this._bufParams.isSingleSided()){var r=e<0;this.computeSingleSidedBufferCurve(t,r,i)}else this.computeLineBufferCurve(t,i);return i.getCoordinates()},Nn.prototype.getBufferParameters=function(){return this._bufParams},Nn.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Nn.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Nn.copyCoordinates(t);var i=this.getSegGen(n);return this.computeRingBufferCurve(t,e,i),i.getCoordinates()},Nn.prototype.computeOffsetCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){var r=bn.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],we.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(r[s],!0)}else{var a=bn.simplify(t,i),A=a.length-1;n.initSideSegments(a[0],a[1],we.LEFT),n.addFirstSegment();for(var l=2;l<=A;l++)n.addNextSegment(a[l],!0)}n.addLastSegment()},Nn.prototype.getSegGen=function(t){return new kn(this._precisionModel,this._bufParams,t)},Nn.prototype.interfaces_=function(){return[]},Nn.prototype.getClass=function(){return Nn},Nn.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new B(t[n]);return e};var Pn=function(){this._subgraphs=null,this._seg=new pn,this._cga=new at;var t=arguments[0];this._subgraphs=t},Tn={DepthSegment:{configurable:!0}};Pn.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new vt,n=this._subgraphs.iterator();n.hasNext();){var i=n.next(),r=i.getEnvelope();t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments(t,i.getDirectedEdges(),e)}return e}if(3===arguments.length)if(S(arguments[2],_t)&&arguments[0]instanceof B&&arguments[1]instanceof je){for(var o=arguments[0],s=arguments[1],a=arguments[2],A=s.getEdge().getCoordinates(),l=0;l<A.length-1;l++)if(this._seg.p0=A[l],this._seg.p1=A[l+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||at.computeOrientation(this._seg.p0,this._seg.p1,o)===at.RIGHT)){var c=s.getDepth(we.LEFT);this._seg.p0.equals(A[l])||(c=s.getDepth(we.RIGHT));var u=new Ln(this._seg,c);a.add(u)}}else if(S(arguments[2],_t)&&arguments[0]instanceof B&&S(arguments[1],_t))for(var h=arguments[0],g=arguments[2],d=arguments[1].iterator();d.hasNext();){var p=d.next();p.isForward()&&this.findStabbedSegments(h,p,g)}},Pn.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:$e.min(e)._leftDepth},Pn.prototype.interfaces_=function(){return[]},Pn.prototype.getClass=function(){return Pn},Tn.DepthSegment.get=function(){return Ln},Object.defineProperties(Pn,Tn);var Ln=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new pn(t),this._leftDepth=e};Ln.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},Ln.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},Ln.prototype.toString=function(){return this._upwardSeg.toString()},Ln.prototype.interfaces_=function(){return[E]},Ln.prototype.getClass=function(){return Ln};var Fn=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};Fn.prototype.area=function(){return Fn.area(this.p0,this.p1,this.p2)},Fn.prototype.signedArea=function(){return Fn.signedArea(this.p0,this.p1,this.p2)},Fn.prototype.interpolateZ=function(t){if(null===t)throw new I("Supplied point is null.");return Fn.interpolateZ(t,this.p0,this.p1,this.p2)},Fn.prototype.longestSideLength=function(){return Fn.longestSideLength(this.p0,this.p1,this.p2)},Fn.prototype.isAcute=function(){return Fn.isAcute(this.p0,this.p1,this.p2)},Fn.prototype.circumcentre=function(){return Fn.circumcentre(this.p0,this.p1,this.p2)},Fn.prototype.area3D=function(){return Fn.area3D(this.p0,this.p1,this.p2)},Fn.prototype.centroid=function(){return Fn.centroid(this.p0,this.p1,this.p2)},Fn.prototype.inCentre=function(){return Fn.inCentre(this.p0,this.p1,this.p2)},Fn.prototype.interfaces_=function(){return[]},Fn.prototype.getClass=function(){return Fn},Fn.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Fn.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Fn.det=function(t,e,n,i){return t*i-e*n},Fn.interpolateZ=function(t,e,n,i){var r=e.x,o=e.y,s=n.x-r,a=i.x-r,A=n.y-o,l=i.y-o,c=s*l-a*A,u=t.x-r,h=t.y-o,g=(l*u-a*h)/c,d=(-A*u+s*h)/c;return e.z+g*(n.z-e.z)+d*(i.z-e.z)},Fn.longestSideLength=function(t,e,n){var i=t.distance(e),r=e.distance(n),o=n.distance(t),s=i;return r>s&&(s=r),o>s&&(s=o),s},Fn.isAcute=function(t,e,n){return!!Sn.isAcute(t,e,n)&&!!Sn.isAcute(e,n,t)&&!!Sn.isAcute(n,t,e)},Fn.circumcentre=function(t,e,n){var i=n.x,r=n.y,o=t.x-i,s=t.y-r,a=e.x-i,A=e.y-r,l=2*Fn.det(o,s,a,A),c=Fn.det(s,o*o+s*s,A,a*a+A*A),u=Fn.det(o,o*o+s*s,a,a*a+A*A);return new B(i-c/l,r+u/l)},Fn.perpendicularBisector=function(t,e){var n=e.x-t.x,i=e.y-t.y,r=new z(t.x+n/2,t.y+i/2,1),o=new z(t.x-i+n/2,t.y+n+i/2,1);return new z(r,o)},Fn.angleBisector=function(t,e,n){var i=e.distance(t),r=i/(i+e.distance(n)),o=n.x-t.x,s=n.y-t.y;return new B(t.x+r*o,t.y+r*s)},Fn.area3D=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,A=n.z-t.z,l=r*A-o*a,c=o*s-i*A,u=i*a-r*s,h=l*l+c*c+u*u;return Math.sqrt(h)/2},Fn.centroid=function(t,e,n){var i=(t.x+e.x+n.x)/3,r=(t.y+e.y+n.y)/3;return new B(i,r)},Fn.inCentre=function(t,e,n){var i=e.distance(n),r=t.distance(n),o=t.distance(e),s=i+r+o,a=(i*t.x+r*e.x+o*n.x)/s,A=(i*t.y+r*e.y+o*n.y)/s;return new B(a,A)};var On=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new vt;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};On.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,x.EXTERIOR,x.INTERIOR)},On.prototype.addPolygon=function(t){var e=this._distance,n=we.LEFT;this._distance<0&&(e=-this._distance,n=we.RIGHT);var i=t.getExteriorRing(),r=bt.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&r.length<3)return null;this.addPolygonRing(r,e,n,x.EXTERIOR,x.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=bt.removeRepeatedPoints(s.getCoordinates());this._distance>0&&this.isErodedCompletely(s,-this._distance)||this.addPolygonRing(a,e,we.opposite(n),x.INTERIOR,x.EXTERIOR)}},On.prototype.isTriangleErodedCompletely=function(t,e){var n=new Fn(t[0],t[1],t[2]),i=n.inCentre();return at.distancePointLine(i,n.p0,n.p1)<Math.abs(e)},On.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=bt.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,x.EXTERIOR,x.INTERIOR)},On.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var i=new dn(t,new ke(0,x.BOUNDARY,e,n));this._curveList.add(i)},On.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},On.prototype.addPolygonRing=function(t,e,n,i,r){if(0===e&&t.length<ee.MINIMUM_VALID_SIZE)return null;var o=i,s=r;t.length>=ee.MINIMUM_VALID_SIZE&&at.isCCW(t)&&(o=r,s=i,n=we.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},On.prototype.add=function(t){if(t.isEmpty())return null;t instanceof $t?this.addPolygon(t):t instanceof Vt?this.addLineString(t):t instanceof Zt?this.addPoint(t):(t instanceof te||t instanceof Yt||t instanceof ne||t instanceof jt)&&this.addCollection(t)},On.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var i=t.getEnvelopeInternal(),r=Math.min(i.getHeight(),i.getWidth());return e<0&&2*Math.abs(e)>r},On.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},On.prototype.interfaces_=function(){return[]},On.prototype.getClass=function(){return On};var Gn=function(){};Gn.prototype.locate=function(t){},Gn.prototype.interfaces_=function(){return[]},Gn.prototype.getClass=function(){return Gn};var Un=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Un.prototype.next=function(){if(this._atStart)return this._atStart=!1,Un.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new i;var t=this._parent.getGeometryN(this._index++);return t instanceof jt?(this._subcollectionIterator=new Un(t),this._subcollectionIterator.next()):t},Un.prototype.remove=function(){throw new Error(this.getClass().getName())},Un.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Un.prototype.interfaces_=function(){return[Et]},Un.prototype.getClass=function(){return Un},Un.isAtomic=function(t){return!(t instanceof jt)};var jn=function(){this._geom=null;var t=arguments[0];this._geom=t};jn.prototype.locate=function(t){return jn.locate(t,this._geom)},jn.prototype.interfaces_=function(){return[Gn]},jn.prototype.getClass=function(){return jn},jn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&at.isPointInRing(t,e.getCoordinates())},jn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!jn.isPointInRing(t,n))return!1;for(var i=0;i<e.getNumInteriorRing();i++){var r=e.getInteriorRingN(i);if(jn.isPointInRing(t,r))return!1}return!0},jn.containsPoint=function(t,e){if(e instanceof $t)return jn.containsPointInPolygon(t,e);if(e instanceof jt)for(var n=new Un(e);n.hasNext();){var i=n.next();if(i!==e&&jn.containsPoint(t,i))return!0}return!1},jn.locate=function(t,e){return e.isEmpty()?x.EXTERIOR:jn.containsPoint(t,e)?x.INTERIOR:x.EXTERIOR};var Yn=function(){this._edgeMap=new u,this._edgeList=null,this._ptInAreaLocation=[x.NONE,x.NONE]};Yn.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Yn.prototype.propagateSideLabels=function(t){for(var e=x.NONE,n=this.iterator();n.hasNext();){var i=n.next().getLabel();i.isArea(t)&&i.getLocation(t,we.LEFT)!==x.NONE&&(e=i.getLocation(t,we.LEFT))}if(e===x.NONE)return null;for(var r=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,we.ON)===x.NONE&&a.setLocation(t,we.ON,r),a.isArea(t)){var A=a.getLocation(t,we.LEFT),l=a.getLocation(t,we.RIGHT);if(l!==x.NONE){if(l!==r)throw new xe("side location conflict",s.getCoordinate());A===x.NONE&&et.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),r=A}else et.isTrue(a.getLocation(t,we.LEFT)===x.NONE,"found single null side"),a.setLocation(t,we.RIGHT,r),a.setLocation(t,we.LEFT,r)}}},Yn.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Yn.prototype.print=function(t){K.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},Yn.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Yn.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,i=e.get(n).getLabel().getLocation(t,we.LEFT);et.isTrue(i!==x.NONE,"Found unlabelled area edge");for(var r=i,o=this.iterator();o.hasNext();){var s=o.next().getLabel();et.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,we.LEFT),A=s.getLocation(t,we.RIGHT);if(a===A)return!1;if(A!==r)return!1;r=a}return!0},Yn.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},Yn.prototype.iterator=function(){return this.getEdges().iterator()},Yn.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new vt(this._edgeMap.values())),this._edgeList},Yn.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===x.NONE&&(this._ptInAreaLocation[t]=jn.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Yn.prototype.toString=function(){var t=new R;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},Yn.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Yn.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var i=n.next().getLabel(),r=0;r<2;r++)i.isLine(r)&&i.getLocation(r)===x.BOUNDARY&&(e[r]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),A=0;A<2;A++)if(a.isAnyNull(A)){var l=x.NONE;if(e[A])l=x.EXTERIOR;else{var c=s.getCoordinate();l=this.getLocation(A,c,t)}a.setAllLocationsIfNull(A,l)}},Yn.prototype.getDegree=function(){return this._edgeMap.size()},Yn.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Yn.prototype.interfaces_=function(){return[]},Yn.prototype.getClass=function(){return Yn};var Kn=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var r=this._resultAreaEdgeList.get(i),o=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!r.isInResult())continue;e.setNext(r),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new xe("no outgoing dirEdge found",this.getCoordinate());et.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var i=t.get(e-1),r=n.getQuadrant(),o=i.getQuadrant();return Oe.isNorthern(r)&&Oe.isNorthern(o)?n:Oe.isNorthern(r)||Oe.isNorthern(o)?0!==n.getDy()?n:0!==i.getDy()?i:(et.shouldNeverReachHere("found two horizontal edges incident on node"),null):i},e.prototype.print=function(t){K.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new vt;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var i=this._edgeList.get(n),r=i.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=i}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(we.LEFT),i=t.getDepth(we.RIGHT),r=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,r)!==i)throw new xe("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],s=arguments[2],a=arguments[0];a<o;a++){var A=this._edgeList.get(a);A.setEdgeDepths(we.RIGHT,s),s=A.getDepth(we.LEFT)}return s}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,i=this._SCANNING_FOR_INCOMING,r=this._resultAreaEdgeList.size()-1;r>=0;r--){var o=this._resultAreaEdgeList.get(r),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),i){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;n=s,i=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),i=this._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(et.isTrue(null!==e,"found null for first outgoing dirEdge"),et.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],i=0,r=this.iterator();r.hasNext();)r.next().getEdgeRing()===n&&i++;return i}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=x.NONE,e=this.iterator();e.hasNext();){var n=e.next(),i=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=x.INTERIOR;break}if(i.isInResult()){t=x.EXTERIOR;break}}}if(t===x.NONE)return null;for(var r=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(r===x.INTERIOR):(s.isInResult()&&(r=x.EXTERIOR),a.isInResult()&&(r=x.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new ke(x.NONE);for(var n=this.iterator();n.hasNext();)for(var i=n.next().getEdge().getLabel(),r=0;r<2;r++){var o=i.getLocation(r);o!==x.INTERIOR&&o!==x.BOUNDARY||this._label.setLocation(r,x.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Yn),zn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new Le(t,new Kn)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ye),Jn=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Jn.prototype.compareTo=function(t){var e=t;return Jn.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Jn.prototype.interfaces_=function(){return[E]},Jn.prototype.getClass=function(){return Jn},Jn.orientation=function(t){return 1===bt.increasingDirection(t)},Jn.compareOriented=function(t,e,n,i){for(var r=e?1:-1,o=i?1:-1,s=e?t.length:-1,a=i?n.length:-1,A=e?0:t.length-1,l=i?0:n.length-1;;){var c=t[A].compareTo(n[l]);if(0!==c)return c;var u=(A+=r)===s,h=(l+=o)===a;if(u&&!h)return-1;if(!u&&h)return 1;if(u&&h)return 0}};var qn=function(){this._edges=new vt,this._ocaMap=new u};qn.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var i=n.getCoordinates(),r=0;r<i.length;r++)r>0&&t.print(","),t.print(i[r].x+" "+i[r].y);t.println(")")}t.print(")  ")},qn.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},qn.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},qn.prototype.iterator=function(){return this._edges.iterator()},qn.prototype.getEdges=function(){return this._edges},qn.prototype.get=function(t){return this._edges.get(t)},qn.prototype.findEqualEdge=function(t){var e=new Jn(t.getCoordinates());return this._ocaMap.get(e)},qn.prototype.add=function(t){this._edges.add(t);var e=new Jn(t.getCoordinates());this._ocaMap.put(e,t)},qn.prototype.interfaces_=function(){return[]},qn.prototype.getClass=function(){return qn};var Hn=function(){};Hn.prototype.processIntersections=function(t,e,n,i){},Hn.prototype.isDone=function(){},Hn.prototype.interfaces_=function(){return[]},Hn.prototype.getClass=function(){return Hn};var Vn=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Vn.prototype.isTrivialIntersection=function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(Vn.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.size()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},Vn.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Vn.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Vn.prototype.getLineIntersector=function(){return this._li},Vn.prototype.hasProperIntersection=function(){return this._hasProper},Vn.prototype.processIntersections=function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Vn.prototype.hasIntersection=function(){return this._hasIntersection},Vn.prototype.isDone=function(){return!1},Vn.prototype.hasInteriorIntersection=function(){return this._hasInterior},Vn.prototype.interfaces_=function(){return[Hn]},Vn.prototype.getClass=function(){return Vn},Vn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Wn=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new B(t),this.segmentIndex=e,this.dist=n};Wn.prototype.getSegmentIndex=function(){return this.segmentIndex},Wn.prototype.getCoordinate=function(){return this.coord},Wn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Wn.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Wn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Wn.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Wn.prototype.getDistance=function(){return this.dist},Wn.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Wn.prototype.interfaces_=function(){return[E]},Wn.prototype.getClass=function(){return Wn};var Zn=function(){this._nodeMap=new u,this.edge=null;var t=arguments[0];this.edge=t};Zn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Zn.prototype.iterator=function(){return this._nodeMap.values().iterator()},Zn.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},Zn.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Zn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.pts[e.segmentIndex],r=e.dist>0||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),s=0;o[s++]=new B(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return r&&(o[s]=e.coord),new ni(o,new ke(this.edge._label))},Zn.prototype.add=function(t,e,n){var i=new Wn(t,e,n),r=this._nodeMap.get(i);return null!==r?r:(this._nodeMap.put(i,i),i)},Zn.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Zn.prototype.interfaces_=function(){return[]},Zn.prototype.getClass=function(){return Zn};var Xn=function(){};Xn.prototype.getChainStartIndices=function(t){var e=0,n=new vt;n.add(new N(e));do{var i=this.findChainEnd(t,e);n.add(new N(i)),e=i}while(e<t.length-1);return Xn.toIntArray(n)},Xn.prototype.findChainEnd=function(t,e){for(var n=Oe.quadrant(t[e],t[e+1]),i=e+1;i<t.length&&Oe.quadrant(t[i-1],t[i])===n;)i++;return i-1},Xn.prototype.interfaces_=function(){return[]},Xn.prototype.getClass=function(){return Xn},Xn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var $n=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new J,this.env2=new J;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Xn;this.startIndex=e.getChainStartIndices(this.pts)};$n.prototype.getCoordinates=function(){return this.pts},$n.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},$n.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},$n.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],i)}else if(6===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],A=arguments[4],l=arguments[5],c=this.pts[r],u=this.pts[o],h=s.pts[a],g=s.pts[A];if(o-r==1&&A-a==1)return l.addIntersections(this.e,r,s.e,a),null;if(this.env1.init(c,u),this.env2.init(h,g),!this.env1.intersects(this.env2))return null;var d=Math.trunc((r+o)/2),p=Math.trunc((a+A)/2);r<d&&(a<p&&this.computeIntersectsForChain(r,d,s,a,p,l),p<A&&this.computeIntersectsForChain(r,d,s,p,A,l)),d<o&&(a<p&&this.computeIntersectsForChain(d,o,s,a,p,l),p<A&&this.computeIntersectsForChain(d,o,s,p,A,l))}},$n.prototype.getStartIndexes=function(){return this.startIndex},$n.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(n,t,i,e)},$n.prototype.interfaces_=function(){return[]},$n.prototype.getClass=function(){return $n};var ti=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},ei={NULL_VALUE:{configurable:!0}};ti.prototype.getDepth=function(t,e){return this._depth[t][e]},ti.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},ti.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==ti.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===ti.NULL_VALUE}if(2===arguments.length){var i=arguments[0],r=arguments[1];return this._depth[i][r]===ti.NULL_VALUE}},ti.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var i=0;this._depth[t][n]>e&&(i=1),this._depth[t][n]=i}}},ti.prototype.getDelta=function(t){return this._depth[t][we.RIGHT]-this._depth[t][we.LEFT]},ti.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?x.EXTERIOR:x.INTERIOR},ti.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},ti.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var i=t.getLocation(e,n);i!==x.EXTERIOR&&i!==x.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=ti.depthAtLocation(i):this._depth[e][n]+=ti.depthAtLocation(i))}else if(3===arguments.length){var r=arguments[0],o=arguments[1];arguments[2]===x.INTERIOR&&this._depth[r][o]++}},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti},ti.depthAtLocation=function(t){return t===x.EXTERIOR?0:t===x.INTERIOR?1:ti.NULL_VALUE},ei.NULL_VALUE.get=function(){return-1},Object.defineProperties(ti,ei);var ni=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Zn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new ti,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.pts=i,this._label=r}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,ke.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var i=!0,r=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(n.pts[s])||(i=!1),this.pts[s].equals2D(n.pts[--o])||(r=!1),!i&&!r)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new $n(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new J;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,i){var r=new B(t.getIntersection(i)),o=e,s=t.getEdgeDistance(n,i),a=o+1;if(a<this.pts.length){var A=this.pts[a];r.equals2D(A)&&(o=a,s=0)}this.eiList.add(r,o,s)},e.prototype.toString=function(){var t=new R;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,we.ON),e.getLocation(1,we.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,we.LEFT),e.getLocation(1,we.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,we.RIGHT),e.getLocation(1,we.RIGHT),2))},e}(Te),ii=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new qn,this._bufParams=t||null};ii.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},ii.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new ke(t.getLabel())).flip(),n.merge(i);var r=ii.depthDelta(i),o=e.getDepthDelta()+r;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(ii.depthDelta(t.getLabel()))},ii.prototype.buildSubgraphs=function(t,e){for(var n=new vt,i=t.iterator();i.hasNext();){var r=i.next(),o=r.getRightmostCoordinate(),s=new Pn(n).getDepth(o);r.computeDepth(s),r.findResultEdges(),n.add(r),e.add(r.getDirectedEdges(),r.getNodes())}},ii.prototype.createSubgraphs=function(t){for(var e=new vt,n=t.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var r=new Se;r.create(i),e.add(r)}}return $e.sort(e,$e.reverseOrder()),e},ii.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},ii.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new _n,n=new rt;return n.setPrecisionModel(t),e.setSegmentIntersector(new Vn(n)),e},ii.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var i=new Nn(n,this._bufParams),r=new On(t,e,i).getCurves();if(r.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(r,n),this._graph=new Ke(new zn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new ze(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},ii.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var i=n.getNodedSubstrings().iterator();i.hasNext();){var r=i.next(),o=r.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=r.getData(),a=new ni(r.getCoordinates(),new ke(s));this.insertUniqueEdge(a)}}},ii.prototype.setNoder=function(t){this._workingNoder=t},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},ii.depthDelta=function(t){var e=t.getLocation(0,we.LEFT),n=t.getLocation(0,we.RIGHT);return e===x.INTERIOR&&n===x.EXTERIOR?1:e===x.EXTERIOR&&n===x.INTERIOR?-1:0},ii.convertSegStrings=function(t){for(var e=new me,n=new vt;t.hasNext();){var i=t.next(),r=e.createLineString(i.getCoordinates());n.add(r)}return e.buildGeometry(n)};var ri=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=i,this._offsetX=r,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ri.prototype.rescale=function(){if(S(arguments[0],Ct))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],i=0;i<n.length;i++)n[i].x=n[i].x/this._scaleFactor+this._offsetX,n[i].y=n[i].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&K.out.println(n)}},ri.prototype.scale=function(){if(S(arguments[0],Ct)){for(var t=arguments[0],e=new vt,n=t.iterator();n.hasNext();){var i=n.next();e.add(new dn(this.scale(i.getCoordinates()),i.getData()))}return e}if(arguments[0]instanceof Array){for(var r=arguments[0],o=new Array(r.length).fill(null),s=0;s<r.length;s++)o[s]=new B(Math.round((r[s].x-this._offsetX)*this._scaleFactor),Math.round((r[s].y-this._offsetY)*this._scaleFactor),r[s].z);return bt.removeRepeatedPoints(o)}},ri.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ri.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ri.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ri.prototype.interfaces_=function(){return[Cn]},ri.prototype.getClass=function(){return ri};var oi=function(){this._li=new rt,this._segStrings=null;var t=arguments[0];this._segStrings=t},si={fact:{configurable:!0}};oi.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],i=arguments[1].iterator();i.hasNext();)for(var r=i.next().getCoordinates(),o=1;o<r.length-1;o++)if(r[o].equals(n))throw new $("found endpt/interior pt intersection at index "+o+" :pt "+n)},oi.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var i=n.next();this.checkInteriorIntersections(e,i)}else if(2===arguments.length)for(var r=arguments[0],o=arguments[1],s=r.getCoordinates(),a=o.getCoordinates(),A=0;A<s.length-1;A++)for(var l=0;l<a.length-1;l++)this.checkInteriorIntersections(r,A,o,l);else if(4===arguments.length){var c=arguments[0],u=arguments[1],h=arguments[2],g=arguments[3];if(c===h&&u===g)return null;var d=c.getCoordinates()[u],p=c.getCoordinates()[u+1],f=h.getCoordinates()[g],m=h.getCoordinates()[g+1];if(this._li.computeIntersection(d,p,f,m),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,p)||this.hasInteriorIntersection(this._li,f,m)))throw new $("found non-noded intersection at "+d+"-"+p+" and "+f+"-"+m)}},oi.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},oi.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),i=0;i<n.length-2;i++)this.checkCollapse(n[i],n[i+1],n[i+2])},oi.prototype.hasInteriorIntersection=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){var r=t.getIntersection(i);if(!r.equals(e)&&!r.equals(n))return!0}return!1},oi.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new $("found non-noded collapse at "+oi.fact.createLineString([t,e,n]))},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},si.fact.get=function(){return new me},Object.defineProperties(oi,si);var ai=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new I("Scale factor must be non-zero");1!==e&&(this._pt=new B(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new B,this._p1Scaled=new B),this.initCorners(this._pt)},Ai={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};ai.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),i=Math.max(t.x,e.x),r=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>i||this._maxy<r||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return et.isTrue(!(s&&a),"Found bad envelope test"),a},ai.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new B(this._maxx,this._maxy),this._corner[1]=new B(this._minx,this._maxy),this._corner[2]=new B(this._minx,this._miny),this._corner[3]=new B(this._maxx,this._miny)},ai.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},ai.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},ai.prototype.getCoordinate=function(){return this._originalPt},ai.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},ai.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=ai.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new J(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},ai.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},ai.prototype.intersectsToleranceSquare=function(t,e){var n=!1,i=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&i||t.equals(this._pt)||e.equals(this._pt)))))},ai.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),i=t.getCoordinate(e+1);return!!this.intersects(n,i)&&(t.addIntersection(this.getCoordinate(),e),!0)},ai.prototype.interfaces_=function(){return[]},ai.prototype.getClass=function(){return ai},Ai.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(ai,Ai);var li=function(){this.tempEnv1=new J,this.selectedSegment=new pn};li.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}},li.prototype.interfaces_=function(){return[]},li.prototype.getClass=function(){return li};var ci=function(){this._index=null;var t=arguments[0];this._index=t},ui={HotPixelSnapAction:{configurable:!0}};ci.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=e.getSafeEnvelope(),o=new hi(e,n,i);return this._index.query(r,{interfaces_:function(){return[Ve]},visitItem:function(t){t.select(r,o)}}),o.isNodeAdded()}},ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci},ui.HotPixelSnapAction.get=function(){return hi},Object.defineProperties(ci,ui);var hi=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],i=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(li),gi=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new vt};gi.prototype.processIntersections=function(t,e,n,i){if(t===n&&e===i)return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];if(this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var A=0;A<this._li.getIntersectionNum();A++)this._interiorIntersections.add(this._li.getIntersection(A));t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)}},gi.prototype.isDone=function(){return!1},gi.prototype.getInteriorIntersections=function(){return this._interiorIntersections},gi.prototype.interfaces_=function(){return[Hn]},gi.prototype.getClass=function(){return gi};var di=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new rt,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};di.prototype.checkCorrectness=function(t){var e=dn.getNodedSubstrings(t),n=new oi(e);try{n.checkValid()}catch(t){if(!(t instanceof j))throw t;t.printStackTrace()}},di.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},di.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},di.prototype.findInteriorIntersections=function(t,e){var n=new gi(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},di.prototype.computeVertexSnaps=function(){if(S(arguments[0],Ct))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof dn)for(var n=arguments[0],i=n.getCoordinates(),r=0;r<i.length;r++){var o=new ai(i[r],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,r)&&n.addIntersection(i[r],r)}},di.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new _n,this._pointSnapper=new ci(this._noder.getIndex()),this.snapRound(t,this._li)},di.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=new ai(n,this._scaleFactor,this._li);this._pointSnapper.snap(i)}},di.prototype.interfaces_=function(){return[Cn]},di.prototype.getClass=function(){return di};var pi=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Bn,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},fi={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};pi.prototype.bufferFixedPrecision=function(t){var e=new ri(new di(new ge(1)),t.getScale()),n=new ii(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},pi.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=pi.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof xe))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],i=pi.precisionScaleFactor(this._argGeom,this._distance,n),r=new ge(i);this.bufferFixedPrecision(r)}},pi.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===ge.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},pi.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},pi.prototype.bufferOriginalPrecision=function(){try{var t=new ii(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof $))throw t;this._saveException=t}},pi.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},pi.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},pi.prototype.interfaces_=function(){return[]},pi.prototype.getClass=function(){return pi},pi.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new pi(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ct&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],i=new pi(arguments[0]);return i.setQuadrantSegments(n),i.getResultGeometry(e)}if(arguments[2]instanceof Bn&&arguments[0]instanceof ct&&"number"==typeof arguments[1]){var r=arguments[1];return new pi(arguments[0],arguments[2]).getResultGeometry(r)}}else if(4===arguments.length){var o=arguments[1],s=arguments[2],a=arguments[3],A=new pi(arguments[0]);return A.setQuadrantSegments(s),A.setEndCapStyle(a),A.getResultGeometry(o)}},pi.precisionScaleFactor=function(t,e,n){var i=t.getEnvelopeInternal(),r=M.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(r)/Math.log(10)+1);return Math.pow(10,o)},fi.CAP_ROUND.get=function(){return Bn.CAP_ROUND},fi.CAP_BUTT.get=function(){return Bn.CAP_FLAT},fi.CAP_FLAT.get=function(){return Bn.CAP_FLAT},fi.CAP_SQUARE.get=function(){return Bn.CAP_SQUARE},fi.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(pi,fi);var mi=function(){this._pt=[new B,new B],this._distance=y.NaN,this._isNull=!0};mi.prototype.getCoordinates=function(){return this._pt},mi.prototype.getCoordinate=function(t){return this._pt[t]},mi.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i<this._distance&&this.initialize(e,n,i)}},mi.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=r,this._isNull=!1}},mi.prototype.getDistance=function(){return this._distance},mi.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i>this._distance&&this.initialize(e,n,i)}},mi.prototype.interfaces_=function(){return[]},mi.prototype.getClass=function(){return mi};var Ii=function(){};Ii.prototype.interfaces_=function(){return[]},Ii.prototype.getClass=function(){return Ii},Ii.computeDistance=function(){if(arguments[2]instanceof mi&&arguments[0]instanceof Vt&&arguments[1]instanceof B)for(var t=arguments[1],e=arguments[2],n=arguments[0].getCoordinates(),i=new pn,r=0;r<n.length-1;r++){i.setCoordinates(n[r],n[r+1]);var o=i.closestPoint(t);e.setMinimum(o,t)}else if(arguments[2]instanceof mi&&arguments[0]instanceof $t&&arguments[1]instanceof B){var s=arguments[0],a=arguments[1],A=arguments[2];Ii.computeDistance(s.getExteriorRing(),a,A);for(var l=0;l<s.getNumInteriorRing();l++)Ii.computeDistance(s.getInteriorRingN(l),a,A)}else if(arguments[2]instanceof mi&&arguments[0]instanceof ct&&arguments[1]instanceof B){var c=arguments[0],u=arguments[1],h=arguments[2];if(c instanceof Vt)Ii.computeDistance(c,u,h);else if(c instanceof $t)Ii.computeDistance(c,u,h);else if(c instanceof jt)for(var g=c,d=0;d<g.getNumGeometries();d++){var p=g.getGeometryN(d);Ii.computeDistance(p,u,h)}else h.setMinimum(c.getCoordinate(),u)}else if(arguments[2]instanceof mi&&arguments[0]instanceof pn&&arguments[1]instanceof B){var f=arguments[1],m=arguments[2],I=arguments[0].closestPoint(f);m.setMinimum(I,f)}};var yi=function(t){this._maxPtDist=new mi,this._inputGeom=t||null},Ci={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};yi.prototype.computeMaxMidpointDistance=function(t){var e=new _i(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},yi.prototype.computeMaxVertexDistance=function(t){var e=new Ei(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},yi.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},yi.prototype.getDistancePoints=function(){return this._maxPtDist},yi.prototype.interfaces_=function(){return[]},yi.prototype.getClass=function(){return yi},Ci.MaxPointDistanceFilter.get=function(){return Ei},Ci.MaxMidpointDistanceFilter.get=function(){return _i},Object.defineProperties(yi,Ci);var Ei=function(t){this._maxPtDist=new mi,this._minPtDist=new mi,this._geom=t||null};Ei.prototype.filter=function(t){this._minPtDist.initialize(),Ii.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ei.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ei.prototype.interfaces_=function(){return[gt]},Ei.prototype.getClass=function(){return Ei};var _i=function(t){this._maxPtDist=new mi,this._minPtDist=new mi,this._geom=t||null};_i.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),i=t.getCoordinate(e),r=new B((n.x+i.x)/2,(n.y+i.y)/2);this._minPtDist.initialize(),Ii.computeDistance(this._geom,r,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},_i.prototype.isDone=function(){return!1},_i.prototype.isGeometryChanged=function(){return!1},_i.prototype.getMaxPointDistance=function(){return this._maxPtDist},_i.prototype.interfaces_=function(){return[Ut]},_i.prototype.getClass=function(){return _i};var vi=function(t){this._comps=t||null};vi.prototype.filter=function(t){t instanceof $t&&this._comps.add(t)},vi.prototype.interfaces_=function(){return[Gt]},vi.prototype.getClass=function(){return vi},vi.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return vi.getPolygons(t,new vt)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof $t?n.add(e):e instanceof jt&&e.apply(new vi(n)),n}};var Bi=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Bi.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ee){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Vt&&this._lines.add(t)},Bi.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Bi.prototype.interfaces_=function(){return[lt]},Bi.prototype.getClass=function(){return Bi},Bi.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Bi.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Bi.getLines(e,n))}},Bi.getLines=function(){if(1===arguments.length){var t=arguments[0];return Bi.getLines(t,!1)}if(2===arguments.length){if(S(arguments[0],Ct)&&S(arguments[1],Ct)){for(var e=arguments[1],n=arguments[0].iterator();n.hasNext();){var i=n.next();Bi.getLines(i,e)}return e}if(arguments[0]instanceof ct&&"boolean"==typeof arguments[1]){var r=arguments[0],o=arguments[1],s=new vt;return r.apply(new Bi(s,o)),s}if(arguments[0]instanceof ct&&S(arguments[1],Ct)){var a=arguments[0],A=arguments[1];return a instanceof Vt?A.add(a):a.apply(new Bi(A)),A}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&S(arguments[0],Ct)&&S(arguments[1],Ct)){for(var l=arguments[1],c=arguments[2],u=arguments[0].iterator();u.hasNext();){var h=u.next();Bi.getLines(h,l,c)}return l}if("boolean"==typeof arguments[2]&&arguments[0]instanceof ct&&S(arguments[1],Ct)){var g=arguments[1],d=arguments[2];return arguments[0].apply(new Bi(g,d)),g}}};var wi=function(){if(this._boundaryRule=dt.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new I("Rule must be non-null");this._boundaryRule=t}};wi.prototype.locateInternal=function(){if(arguments[0]instanceof B&&arguments[1]instanceof $t){var t=arguments[0],e=arguments[1];if(e.isEmpty())return x.EXTERIOR;var n=e.getExteriorRing(),i=this.locateInPolygonRing(t,n);if(i===x.EXTERIOR)return x.EXTERIOR;if(i===x.BOUNDARY)return x.BOUNDARY;for(var r=0;r<e.getNumInteriorRing();r++){var o=e.getInteriorRingN(r),s=this.locateInPolygonRing(t,o);if(s===x.INTERIOR)return x.EXTERIOR;if(s===x.BOUNDARY)return x.BOUNDARY}return x.INTERIOR}if(arguments[0]instanceof B&&arguments[1]instanceof Vt){var a=arguments[0],A=arguments[1];if(!A.getEnvelopeInternal().intersects(a))return x.EXTERIOR;var l=A.getCoordinates();return A.isClosed()||!a.equals(l[0])&&!a.equals(l[l.length-1])?at.isOnLine(a,l)?x.INTERIOR:x.EXTERIOR:x.BOUNDARY}if(arguments[0]instanceof B&&arguments[1]instanceof Zt){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?x.INTERIOR:x.EXTERIOR}},wi.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?at.locatePointInRing(t,e.getCoordinates()):x.EXTERIOR},wi.prototype.intersects=function(t,e){return this.locate(t,e)!==x.EXTERIOR},wi.prototype.updateLocationInfo=function(t){t===x.INTERIOR&&(this._isIn=!0),t===x.BOUNDARY&&this._numBoundaries++},wi.prototype.computeLocation=function(t,e){if(e instanceof Zt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Vt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof $t)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Yt)for(var n=e,i=0;i<n.getNumGeometries();i++){var r=n.getGeometryN(i);this.updateLocationInfo(this.locateInternal(t,r))}else if(e instanceof ne)for(var o=e,s=0;s<o.getNumGeometries();s++){var a=o.getGeometryN(s);this.updateLocationInfo(this.locateInternal(t,a))}else if(e instanceof jt)for(var A=new Un(e);A.hasNext();){var l=A.next();l!==e&&this.computeLocation(t,l)}},wi.prototype.locate=function(t,e){return e.isEmpty()?x.EXTERIOR:e instanceof Vt||e instanceof $t?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?x.BOUNDARY:this._numBoundaries>0||this._isIn?x.INTERIOR:x.EXTERIOR)},wi.prototype.interfaces_=function(){return[]},wi.prototype.getClass=function(){return wi};var bi=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];this._component=e,this._segIndex=n,this._pt=i}},Qi={INSIDE_AREA:{configurable:!0}};bi.prototype.isInsideArea=function(){return this._segIndex===bi.INSIDE_AREA},bi.prototype.getCoordinate=function(){return this._pt},bi.prototype.getGeometryComponent=function(){return this._component},bi.prototype.getSegmentIndex=function(){return this._segIndex},bi.prototype.interfaces_=function(){return[]},bi.prototype.getClass=function(){return bi},Qi.INSIDE_AREA.get=function(){return-1},Object.defineProperties(bi,Qi);var xi=function(t){this._pts=t||null};xi.prototype.filter=function(t){t instanceof Zt&&this._pts.add(t)},xi.prototype.interfaces_=function(){return[Gt]},xi.prototype.getClass=function(){return xi},xi.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Zt?$e.singletonList(t):xi.getPoints(t,new vt)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Zt?n.add(e):e instanceof jt&&e.apply(new xi(n)),n}};var Di=function(){this._locations=null;var t=arguments[0];this._locations=t};Di.prototype.filter=function(t){(t instanceof Zt||t instanceof Vt||t instanceof $t)&&this._locations.add(new bi(t,0,t.getCoordinate()))},Di.prototype.interfaces_=function(){return[Gt]},Di.prototype.getClass=function(){return Di},Di.getLocations=function(t){var e=new vt;return t.apply(new Di(e)),e};var Si=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new wi,this._minDistanceLocation=null,this._minDistance=y.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=i,this._terminateDistance=r}};Si.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=1-e,r=vi.getPolygons(this._geom[e]);if(r.size()>0){var o=Di.getLocations(this._geom[i]);if(this.computeContainmentDistance(o,r,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&S(arguments[0],_t)&&S(arguments[1],_t)){for(var s=arguments[0],a=arguments[1],A=arguments[2],l=0;l<s.size();l++)for(var c=s.get(l),u=0;u<a.size();u++)if(this.computeContainmentDistance(c,a.get(u),A),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof bi&&arguments[1]instanceof $t){var h=arguments[0],g=arguments[1],d=arguments[2],p=h.getCoordinate();if(x.EXTERIOR!==this._ptLocator.locate(p,g))return this._minDistance=0,d[0]=h,d[1]=new bi(g,p),null}},Si.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(r,s,n),this._minDistance<=this._terminateDistance)return null}},Si.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Bi.getLines(this._geom[0]),n=Bi.getLines(this._geom[1]),i=xi.getPoints(this._geom[0]),r=xi.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,r,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,i,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(i,r,t),void this.updateMinDistance(t,!1))))},Si.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Si.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Si.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Si.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Vt&&arguments[1]instanceof Zt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var i=t.getCoordinates(),r=e.getCoordinate(),o=0;o<i.length-1;o++){var s=at.distancePointLine(r,i[o],i[o+1]);if(s<this._minDistance){this._minDistance=s;var a=new pn(i[o],i[o+1]).closestPoint(r);n[0]=new bi(t,o,a),n[1]=new bi(e,0,r)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Vt&&arguments[1]instanceof Vt){var A=arguments[0],l=arguments[1],c=arguments[2];if(A.getEnvelopeInternal().distance(l.getEnvelopeInternal())>this._minDistance)return null;for(var u=A.getCoordinates(),h=l.getCoordinates(),g=0;g<u.length-1;g++)for(var d=0;d<h.length-1;d++){var p=at.distanceLineLine(u[g],u[g+1],h[d],h[d+1]);if(p<this._minDistance){this._minDistance=p;var f=new pn(u[g],u[g+1]),m=new pn(h[d],h[d+1]),I=f.closestPoints(m);c[0]=new bi(A,g,I[0]),c[1]=new bi(l,d,I[1])}if(this._minDistance<=this._terminateDistance)return null}}},Si.prototype.computeMinDistancePoints=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o),a=r.getCoordinate().distance(s.getCoordinate());if(a<this._minDistance&&(this._minDistance=a,n[0]=new bi(r,0,r.getCoordinate()),n[1]=new bi(s,0,s.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Si.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new I("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Si.prototype.computeMinDistanceLines=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(r,s,n),this._minDistance<=this._terminateDistance)return null}},Si.prototype.interfaces_=function(){return[]},Si.prototype.getClass=function(){return Si},Si.distance=function(t,e){return new Si(t,e).distance()},Si.isWithinDistance=function(t,e,n){return new Si(t,e,n).distance()<=n},Si.nearestPoints=function(t,e){return new Si(t,e).nearestPoints()};var Mi=function(){this._pt=[new B,new B],this._distance=y.NaN,this._isNull=!0};Mi.prototype.getCoordinates=function(){return this._pt},Mi.prototype.getCoordinate=function(t){return this._pt[t]},Mi.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i<this._distance&&this.initialize(e,n,i)}},Mi.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=r,this._isNull=!1}},Mi.prototype.toString=function(){return X.toLineString(this._pt[0],this._pt[1])},Mi.prototype.getDistance=function(){return this._distance},Mi.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i>this._distance&&this.initialize(e,n,i)}},Mi.prototype.interfaces_=function(){return[]},Mi.prototype.getClass=function(){return Mi};var ki=function(){};ki.prototype.interfaces_=function(){return[]},ki.prototype.getClass=function(){return ki},ki.computeDistance=function(){if(arguments[2]instanceof Mi&&arguments[0]instanceof Vt&&arguments[1]instanceof B)for(var t=arguments[0],e=arguments[1],n=arguments[2],i=new pn,r=t.getCoordinates(),o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var s=i.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof Mi&&arguments[0]instanceof $t&&arguments[1]instanceof B){var a=arguments[0],A=arguments[1],l=arguments[2];ki.computeDistance(a.getExteriorRing(),A,l);for(var c=0;c<a.getNumInteriorRing();c++)ki.computeDistance(a.getInteriorRingN(c),A,l)}else if(arguments[2]instanceof Mi&&arguments[0]instanceof ct&&arguments[1]instanceof B){var u=arguments[0],h=arguments[1],g=arguments[2];if(u instanceof Vt)ki.computeDistance(u,h,g);else if(u instanceof $t)ki.computeDistance(u,h,g);else if(u instanceof jt)for(var d=u,p=0;p<d.getNumGeometries();p++){var f=d.getGeometryN(p);ki.computeDistance(f,h,g)}else g.setMinimum(u.getCoordinate(),h)}else if(arguments[2]instanceof Mi&&arguments[0]instanceof pn&&arguments[1]instanceof B){var m=arguments[1],I=arguments[2],y=arguments[0].closestPoint(m);I.setMinimum(y,m)}};var Ri=function(){this._g0=null,this._g1=null,this._ptDist=new Mi,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Ni={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Ri.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Ri.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new I("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Ri.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Ri.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Ri.prototype.computeOrientedDistance=function(t,e,n){var i=new Pi(e);if(t.apply(i),n.setMaximum(i.getMaxPointDistance()),this._densifyFrac>0){var r=new Ti(e,this._densifyFrac);t.apply(r),n.setMaximum(r.getMaxPointDistance())}},Ri.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Ri.prototype.interfaces_=function(){return[]},Ri.prototype.getClass=function(){return Ri},Ri.distance=function(){if(2===arguments.length)return new Ri(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],e=new Ri(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}},Ni.MaxPointDistanceFilter.get=function(){return Pi},Ni.MaxDensifiedByFractionDistanceFilter.get=function(){return Ti},Object.defineProperties(Ri,Ni);var Pi=function(){this._maxPtDist=new Mi,this._minPtDist=new Mi,this._euclideanDist=new ki,this._geom=null;var t=arguments[0];this._geom=t};Pi.prototype.filter=function(t){this._minPtDist.initialize(),ki.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Pi.prototype.getMaxPointDistance=function(){return this._maxPtDist},Pi.prototype.interfaces_=function(){return[gt]},Pi.prototype.getClass=function(){return Pi};var Ti=function(){this._maxPtDist=new Mi,this._minPtDist=new Mi,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Ti.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),i=t.getCoordinate(e),r=(i.x-n.x)/this._numSubSegs,o=(i.y-n.y)/this._numSubSegs,s=0;s<this._numSubSegs;s++){var a=n.x+s*r,A=n.y+s*o,l=new B(a,A);this._minPtDist.initialize(),ki.computeDistance(this._geom,l,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Ti.prototype.isDone=function(){return!1},Ti.prototype.isGeometryChanged=function(){return!1},Ti.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ti.prototype.interfaces_=function(){return[Ut]},Ti.prototype.getClass=function(){return Ti};var Li=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},Fi={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Li.prototype.checkMaximumDistance=function(t,e,n){var i=new Ri(e,t);if(i.setDensifyFraction(.25),this._maxDistanceFound=i.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var r=i.getCoordinates();this._errorLocation=r[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+X.toLineString(r[0],r[1])+")"}},Li.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Li.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Li.VERBOSE&&K.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Li.prototype.checkNegativeValid=function(){if(!(this._input instanceof $t||this._input instanceof ne||this._input instanceof jt))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Li.prototype.getErrorIndicator=function(){return this._errorIndicator},Li.prototype.checkMinimumDistance=function(t,e,n){var i=new Si(t,e,n);if(this._minDistanceFound=i.distance(),this._minDistanceFound<n){this._isValid=!1;var r=i.nearestPoints();this._errorLocation=i.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+X.toLineString(r[0],r[1])+" )"}},Li.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Li.prototype.getErrorLocation=function(){return this._errorLocation},Li.prototype.getPolygonLines=function(t){for(var e=new vt,n=new Bi(e),i=vi.getPolygons(t).iterator();i.hasNext();)i.next().apply(n);return t.getFactory().buildGeometry(e)},Li.prototype.getErrorMessage=function(){return this._errMsg},Li.prototype.interfaces_=function(){return[]},Li.prototype.getClass=function(){return Li},Fi.VERBOSE.get=function(){return!1},Fi.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Li,Fi);var Oi=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Gi={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Oi.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Oi.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Oi.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new J(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new J(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},Oi.prototype.checkDistance=function(){var t=new Li(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Oi.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Oi.prototype.checkPolygonal=function(){this._result instanceof $t||this._result instanceof ne||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Oi.prototype.getErrorIndicator=function(){return this._errorIndicator},Oi.prototype.getErrorLocation=function(){return this._errorLocation},Oi.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Oi.prototype.report=function(t){if(!Oi.VERBOSE)return null;K.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Oi.prototype.getErrorMessage=function(){return this._errorMsg},Oi.prototype.interfaces_=function(){return[]},Oi.prototype.getClass=function(){return Oi},Oi.isValidMsg=function(t,e,n){var i=new Oi(t,e,n);return i.isValid()?null:i.getErrorMessage()},Oi.isValid=function(t,e,n){return!!new Oi(t,e,n).isValid()},Gi.VERBOSE.get=function(){return!1},Gi.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Oi,Gi);var Ui=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Ui.prototype.getCoordinates=function(){return this._pts},Ui.prototype.size=function(){return this._pts.length},Ui.prototype.getCoordinate=function(t){return this._pts[t]},Ui.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Ui.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:un.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Ui.prototype.setData=function(t){this._data=t},Ui.prototype.getData=function(){return this._data},Ui.prototype.toString=function(){return X.toLineString(new Ae(this._pts))},Ui.prototype.interfaces_=function(){return[hn]},Ui.prototype.getClass=function(){return Ui};var ji=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new vt,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};ji.prototype.getInteriorIntersection=function(){return this._interiorIntersection},ji.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},ji.prototype.getIntersectionSegments=function(){return this._intSegments},ji.prototype.count=function(){return this._intersectionCount},ji.prototype.getIntersections=function(){return this._intersections},ji.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},ji.prototype.setKeepIntersections=function(t){this._keepIntersections=t},ji.prototype.processIntersections=function(t,e,n,i){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===i)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,i))return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=r,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},ji.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},ji.prototype.hasIntersection=function(){return null!==this._interiorIntersection},ji.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},ji.prototype.interfaces_=function(){return[Hn]},ji.prototype.getClass=function(){return ji},ji.createAllIntersectionsFinder=function(t){var e=new ji(t);return e.setFindAllIntersections(!0),e},ji.createAnyIntersectionFinder=function(t){return new ji(t)},ji.createIntersectionCounter=function(t){var e=new ji(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Yi=function(){this._li=new rt,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Yi.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Yi.prototype.getIntersections=function(){return this._segInt.getIntersections()},Yi.prototype.isValid=function(){return this.execute(),this._isValid},Yi.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Yi.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new ji(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new _n;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Yi.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new xe(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Yi.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+X.toLineString(t[0],t[1])+" and "+X.toLineString(t[2],t[3])},Yi.prototype.interfaces_=function(){return[]},Yi.prototype.getClass=function(){return Yi},Yi.computeIntersections=function(t){var e=new Yi(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Ki=function t(){this._nv=null;var e=arguments[0];this._nv=new Yi(t.toSegmentStrings(e))};Ki.prototype.checkValid=function(){this._nv.checkValid()},Ki.prototype.interfaces_=function(){return[]},Ki.prototype.getClass=function(){return Ki},Ki.toSegmentStrings=function(t){for(var e=new vt,n=t.iterator();n.hasNext();){var i=n.next();e.add(new Ui(i.getCoordinates(),i))}return e},Ki.checkValid=function(t){new Ki(t).checkValid()};var zi=function(t){this._mapOp=t};zi.prototype.map=function(t){for(var e=new vt,n=0;n<t.getNumGeometries();n++){var i=this._mapOp.map(t.getGeometryN(n));i.isEmpty()||e.add(i)}return t.getFactory().createGeometryCollection(me.toGeometryArray(e))},zi.prototype.interfaces_=function(){return[]},zi.prototype.getClass=function(){return zi},zi.map=function(t,e){return new zi(e).map(t)};var Ji=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new vt,this._resultLineList=new vt;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Ji.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Ji.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Ji.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Ji.prototype.collectLineEdge=function(t,e,n){var i=t.getLabel(),r=t.getEdge();t.isLineEdge()&&(t.isVisited()||!br.isResultOfOp(i,e)||r.isCovered()||(n.add(r),t.setVisitedEdge(!0)))},Ji.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),i=n.getEdge();if(n.isLineEdge()&&!i.isCoveredSet()){var r=this._op.isCoveredByA(n.getCoordinate());i.setCovered(r)}}},Ji.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel();n.isIsolated()&&(i.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Ji.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),i=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(i),n.setInResult(!0)}},Ji.prototype.collectBoundaryTouchEdge=function(t,e,n){var i=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(et.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(br.isResultOfOp(i,e)&&e===br.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Ji.prototype.interfaces_=function(){return[]},Ji.prototype.getClass=function(){return Ji};var qi=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new vt;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};qi.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},qi.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==br.INTERSECTION)){var i=n.getLabel();br.isResultOfOp(i,t)&&this.filterCoveredNodeToPoint(n)}}},qi.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},qi.prototype.interfaces_=function(){return[]},qi.prototype.getClass=function(){return qi};var Hi=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Hi.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Hi.prototype.transformPolygon=function(t,e){var n=!0,i=this.transformLinearRing(t.getExteriorRing(),t);null!==i&&i instanceof ee&&!i.isEmpty()||(n=!1);for(var r=new vt,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof ee||(n=!1),r.add(s))}if(n)return this._factory.createPolygon(i,r.toArray([]));var a=new vt;return null!==i&&a.add(i),a.addAll(r),this._factory.buildGeometry(a)},Hi.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Hi.prototype.getInputGeometry=function(){return this._inputGeom},Hi.prototype.transformMultiLineString=function(t,e){for(var n=new vt,i=0;i<t.getNumGeometries();i++){var r=this.transformLineString(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Hi.prototype.transformCoordinates=function(t,e){return this.copy(t)},Hi.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Hi.prototype.transformMultiPoint=function(t,e){for(var n=new vt,i=0;i<t.getNumGeometries();i++){var r=this.transformPoint(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Hi.prototype.transformMultiPolygon=function(t,e){for(var n=new vt,i=0;i<t.getNumGeometries();i++){var r=this.transformPolygon(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Hi.prototype.copy=function(t){return t.copy()},Hi.prototype.transformGeometryCollection=function(t,e){for(var n=new vt,i=0;i<t.getNumGeometries();i++){var r=this.transform(t.getGeometryN(i));null!==r&&(this._pruneEmptyGeometry&&r.isEmpty()||n.add(r))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(me.toGeometryArray(n)):this._factory.buildGeometry(n)},Hi.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Zt)return this.transformPoint(t,null);if(t instanceof te)return this.transformMultiPoint(t,null);if(t instanceof ee)return this.transformLinearRing(t,null);if(t instanceof Vt)return this.transformLineString(t,null);if(t instanceof Yt)return this.transformMultiLineString(t,null);if(t instanceof $t)return this.transformPolygon(t,null);if(t instanceof ne)return this.transformMultiPolygon(t,null);if(t instanceof jt)return this.transformGeometryCollection(t,null);throw new I("Unknown Geometry subtype: "+t.getClass().getName())},Hi.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var i=n.size();return i>0&&i<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Hi.prototype.interfaces_=function(){return[]},Hi.prototype.getClass=function(){return Hi};var Vi=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new pn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Vt&&"number"==typeof arguments[1]){var e=arguments[1];t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=i}};Vi.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),i=0;i<n;i++){var r=t.get(i),o=this.findSnapForVertex(r,e);null!==o&&(t.set(i,new B(o)),0===i&&this._isClosed&&t.set(t.size()-1,new B(o)))}},Vi.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Vi.prototype.snapTo=function(t){var e=new wt(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Vi.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var i=0;i<n;i++){var r=e[i],o=this.findSegmentIndexToSnap(r,t);o>=0&&t.add(o+1,new B(r),!1)}},Vi.prototype.findSegmentIndexToSnap=function(t,e){for(var n=y.MAX_VALUE,i=-1,r=0;r<e.size()-1;r++){if(this._seg.p0=e.get(r),this._seg.p1=e.get(r+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,i=r)}return i},Vi.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Vi.prototype.interfaces_=function(){return[]},Vi.prototype.getClass=function(){return Vi},Vi.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Wi=function(t){this._srcGeom=t||null},Zi={SNAP_PRECISION_FACTOR:{configurable:!0}};Wi.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Xi(e,n).transform(this._srcGeom)},Wi.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),i=new Xi(t,n,!0).transform(this._srcGeom),r=i;return e&&S(r,Xt)&&(r=i.buffer(0)),r},Wi.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Wi.prototype.extractTargetCoordinates=function(t){for(var e=new g,n=t.getCoordinates(),i=0;i<n.length;i++)e.add(n[i]);return e.toArray(new Array(0).fill(null))},Wi.prototype.computeMinimumSegmentLength=function(t){for(var e=y.MAX_VALUE,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);i<e&&(e=i)}return e},Wi.prototype.interfaces_=function(){return[]},Wi.prototype.getClass=function(){return Wi},Wi.snap=function(t,e,n){var i=new Array(2).fill(null),r=new Wi(t);i[0]=r.snapTo(e,n);var o=new Wi(e);return i[1]=o.snapTo(i[0],n),i},Wi.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Wi.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===ge.FIXED){var i=1/n.getScale()*2/1.415;i>e&&(e=i)}return e}if(2===arguments.length){var r=arguments[0],o=arguments[1];return Math.min(Wi.computeOverlaySnapTolerance(r),Wi.computeOverlaySnapTolerance(o))}},Wi.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Wi.SNAP_PRECISION_FACTOR},Wi.snapToSelf=function(t,e,n){return new Wi(t).snapToSelf(e,n)},Zi.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Wi,Zi);var Xi=function(t){function e(e,n,i){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==i&&i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Vi(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),i=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Hi),$i=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};$i.prototype.getCommon=function(){return y.longBitsToDouble(this._commonBits)},$i.prototype.add=function(t){var e=y.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=$i.signExpBits(this._commonBits),this._isFirst=!1,null):$i.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=$i.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=$i.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},$i.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=y.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+y.toBinaryString(t),i=n.substring(n.length-64);return i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+e+" ]"}},$i.prototype.interfaces_=function(){return[]},$i.prototype.getClass=function(){return $i},$i.getBit=function(t,e){return t&1<<e?1:0},$i.signExpBits=function(t){return t>>52},$i.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},$i.numCommonMostSigMantissaBits=function(t,e){for(var n=0,i=52;i>=0;i--){if($i.getBit(t,i)!==$i.getBit(e,i))return n;n++}return 52};var tr=function(){this._commonCoord=null,this._ccFilter=new nr},er={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};tr.prototype.addCommonBits=function(t){var e=new ir(this._commonCoord);t.apply(e),t.geometryChanged()},tr.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new B(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new ir(e);return t.apply(n),t.geometryChanged(),t},tr.prototype.getCommonCoordinate=function(){return this._commonCoord},tr.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr},er.CommonCoordinateFilter.get=function(){return nr},er.Translater.get=function(){return ir},Object.defineProperties(tr,er);var nr=function(){this._commonBitsX=new $i,this._commonBitsY=new $i};nr.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},nr.prototype.getCommonCoordinate=function(){return new B(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},nr.prototype.interfaces_=function(){return[gt]},nr.prototype.getClass=function(){return nr};var ir=function(){this.trans=null;var t=arguments[0];this.trans=t};ir.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,i=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,i)},ir.prototype.isDone=function(){return!1},ir.prototype.isGeometryChanged=function(){return!0},ir.prototype.interfaces_=function(){return[Ut]},ir.prototype.getClass=function(){return ir};var rr=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};rr.prototype.selfSnap=function(t){return new Wi(t).snapTo(t,this._snapTolerance)},rr.prototype.removeCommonBits=function(t){this._cbr=new tr,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},rr.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},rr.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=br.overlayOp(e[0],e[1],t);return this.prepareResult(n)},rr.prototype.checkValid=function(t){t.isValid()||K.out.println("Snapped geometry is invalid")},rr.prototype.computeSnapTolerance=function(){this._snapTolerance=Wi.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},rr.prototype.snap=function(t){var e=this.removeCommonBits(t);return Wi.snap(e[0],e[1],this._snapTolerance)},rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr},rr.overlayOp=function(t,e,n){return new rr(t,e).getResultGeometry(n)},rr.union=function(t,e){return rr.overlayOp(t,e,br.UNION)},rr.intersection=function(t,e){return rr.overlayOp(t,e,br.INTERSECTION)},rr.symDifference=function(t,e){return rr.overlayOp(t,e,br.SYMDIFFERENCE)},rr.difference=function(t,e){return rr.overlayOp(t,e,br.DIFFERENCE)};var or=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};or.prototype.getResultGeometry=function(t){var e=null,n=!1,i=null;try{e=br.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof $))throw t;i=t}if(!n)try{e=rr.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof $?i:t}return e},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},or.overlayOp=function(t,e,n){return new or(t,e).getResultGeometry(n)},or.union=function(t,e){return or.overlayOp(t,e,br.UNION)},or.intersection=function(t,e){return or.overlayOp(t,e,br.INTERSECTION)},or.symDifference=function(t,e){return or.overlayOp(t,e,br.SYMDIFFERENCE)},or.difference=function(t,e){return or.overlayOp(t,e,br.DIFFERENCE)};var sr=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};sr.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},sr.prototype.interfaces_=function(){return[]},sr.prototype.getClass=function(){return sr};var ar=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=i,this._xValue=r,this._obj=o}},Ar={INSERT:{configurable:!0},DELETE:{configurable:!0}};ar.prototype.isDelete=function(){return this._eventType===ar.DELETE},ar.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},ar.prototype.getObject=function(){return this._obj},ar.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},ar.prototype.getInsertEvent=function(){return this._insertEvent},ar.prototype.isInsert=function(){return this._eventType===ar.INSERT},ar.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},ar.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},ar.prototype.interfaces_=function(){return[E]},ar.prototype.getClass=function(){return ar},Ar.INSERT.get=function(){return 1},Ar.DELETE.get=function(){return 2},Object.defineProperties(ar,Ar);var lr=function(){};lr.prototype.interfaces_=function(){return[]},lr.prototype.getClass=function(){return lr};var cr=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};cr.prototype.isTrivialIntersection=function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(cr.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.getNumPoints()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},cr.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},cr.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},cr.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},cr.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next().getCoordinate();if(t.isIntersection(i))return!0}return!1},cr.prototype.hasProperIntersection=function(){return this._hasProper},cr.prototype.hasIntersection=function(){return this._hasIntersection},cr.prototype.isDone=function(){return this._isDone},cr.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},cr.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},cr.prototype.addIntersections=function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr},cr.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var ur=function(t){function e(){t.call(this),this.events=new vt,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){$e.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof cr&&S(arguments[0],_t)&&S(arguments[1],_t)){var i=arguments[0],r=arguments[1],o=arguments[2];this.addEdges(i,i),this.addEdges(r,r),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&S(arguments[0],_t)&&arguments[1]instanceof cr){var s=arguments[0],a=arguments[1];arguments[2]?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(a)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),i=n.getStartIndexes(),r=0;r<i.length-1;r++){var o=new sr(n,r),s=new ar(e,n.getMinX(r),o);this.events.add(s),this.events.add(new ar(n.getMaxX(r),s))}},e.prototype.processOverlaps=function(t,e,n,i){for(var r=n.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(r.computeIntersections(a,i),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[1],i=arguments[0].iterator();i.hasNext();){var r=i.next();this.addEdge(r,n)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(lr),hr=function(){this._min=y.POSITIVE_INFINITY,this._max=y.NEGATIVE_INFINITY},gr={NodeComparator:{configurable:!0}};hr.prototype.getMin=function(){return this._min},hr.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},hr.prototype.getMax=function(){return this._max},hr.prototype.toString=function(){return X.toLineString(new B(this._min,0),new B(this._max,0))},hr.prototype.interfaces_=function(){return[]},hr.prototype.getClass=function(){return hr},gr.NodeComparator.get=function(){return dr},Object.defineProperties(hr,gr);var dr=function(){};dr.prototype.compare=function(t,e){var n=t,i=e,r=(n._min+n._max)/2,o=(i._min+i._max)/2;return r<o?-1:r>o?1:0},dr.prototype.interfaces_=function(){return[v]},dr.prototype.getClass=function(){return dr};var pr=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],i=arguments[2];this._min=e,this._max=n,this._item=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(hr),fr=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(hr),mr=function(){this._leaves=new vt,this._root=null,this._level=0};mr.prototype.buildTree=function(){$e.sort(this._leaves,new hr.NodeComparator);for(var t=this._leaves,e=null,n=new vt;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},mr.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new pr(t,e,n))},mr.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},mr.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},mr.prototype.printNode=function(t){K.out.println(X.toLineString(new B(t._min,this._level),new B(t._max,this._level)))},mr.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},mr.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var i=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(i);else{var r=new fr(t.get(n),t.get(n+1));e.add(r)}}},mr.prototype.interfaces_=function(){return[]},mr.prototype.getClass=function(){return mr};var Ir=function(){this._items=new vt};Ir.prototype.visitItem=function(t){this._items.add(t)},Ir.prototype.getItems=function(){return this._items},Ir.prototype.interfaces_=function(){return[Ve]},Ir.prototype.getClass=function(){return Ir};var yr=function(){this._index=null;var t=arguments[0];if(!S(t,Xt))throw new I("Argument must be Polygonal");this._index=new _r(t)},Cr={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};yr.prototype.locate=function(t){var e=new st(t),n=new Er(e);return this._index.query(t.y,t.y,n),e.getLocation()},yr.prototype.interfaces_=function(){return[Gn]},yr.prototype.getClass=function(){return yr},Cr.SegmentVisitor.get=function(){return Er},Cr.IntervalIndexedGeometry.get=function(){return _r},Object.defineProperties(yr,Cr);var Er=function(){this._counter=null;var t=arguments[0];this._counter=t};Er.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Er.prototype.interfaces_=function(){return[Ve]},Er.prototype.getClass=function(){return Er};var _r=function(){this._index=new mr;var t=arguments[0];this.init(t)};_r.prototype.init=function(t){for(var e=Bi.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},_r.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new pn(t[e-1],t[e]),i=Math.min(n.p0.y,n.p1.y),r=Math.max(n.p0.y,n.p1.y);this._index.insert(i,r,n)}},_r.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Ir;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._index.query(i,r,o)}},_r.prototype.interfaces_=function(){return[]},_r.prototype.getClass=function(){return _r};var vr=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new he,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new wi,2===arguments.length){var e=arguments[0],n=arguments[1],i=dt.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=i,null!==n&&this.add(n)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this._argIndex=r,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var i=this._nodes.addNode(n).getLabel(),r=1;x.NONE,i.getLocation(t,we.ON)===x.BOUNDARY&&r++;var o=e.determineBoundary(this._boundaryNodeRule,r);i.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[1],i=arguments[2],r=new cr(arguments[0],!0,!1);r.setIsDoneIfProperInt(i);var o=this.createEdgeSetIntersector(),s=this._parentGeom instanceof ee||this._parentGeom instanceof $t||this._parentGeom instanceof ne,a=n||!s;return o.computeIntersections(this._edges,r,a),this.addSelfIntersectionNodes(this._argIndex),r}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var i=new cr(e,n,!0);return i.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,i),i},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Zt){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,x.INTERIOR)}else if(arguments[0]instanceof B){var e=arguments[0];this.insertPoint(this._argIndex,e,x.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),x.EXTERIOR,x.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,x.INTERIOR,x.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],x.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],x.BOUNDARY)},e.prototype.addLineString=function(t){var e=bt.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new ni(e,new ke(this._argIndex,x.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),et.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,i=t.iterator();i.hasNext();){var r=i.next();e[n++]=r.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===x.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var i=bt.removeRepeatedPoints(t.getCoordinates());if(i.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=i[0],null;var r=e,o=n;at.isCCW(i)&&(r=n,o=e);var s=new ni(i,new ke(this._argIndex,x.BOUNDARY,r,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,i[0],x.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var i=this._nodes.addNode(e),r=i.getLabel();null===r?i._label=new ke(t,n):r.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new ur},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.eiList.iterator();r.hasNext();){var o=r.next();this.addSelfIntersectionNode(t,o.coord,i)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ne&&(this._useBoundaryDeterminationRule=!1),e instanceof $t)this.addPolygon(e);else if(e instanceof Vt)this.addLineString(e);else if(e instanceof Zt)this.addPoint(e);else if(e instanceof te)this.addCollection(e);else if(e instanceof Yt)this.addCollection(e);else if(e instanceof ne)this.addCollection(e);else{if(!(e instanceof jt))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return S(this._parentGeom,Xt)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new yr(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?x.BOUNDARY:x.INTERIOR},e}(Ke),Br=function(){if(this._li=new rt,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new vr(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=dt.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new vr(0,e,i),this._arg[1]=new vr(1,n,i)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];r.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(r.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new vr(0,r,s),this._arg[1]=new vr(1,o,s)}};Br.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Br.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Br.prototype.interfaces_=function(){return[]},Br.prototype.getClass=function(){return Br};var wr=function(){};wr.prototype.interfaces_=function(){return[]},wr.prototype.getClass=function(){return wr},wr.map=function(){if(arguments[0]instanceof ct&&S(arguments[1],wr.MapOp)){for(var t=arguments[0],e=arguments[1],n=new vt,i=0;i<t.getNumGeometries();i++){var r=e.map(t.getGeometryN(i));null!==r&&n.add(r)}return t.getFactory().buildGeometry(n)}if(S(arguments[0],Ct)&&S(arguments[1],wr.MapOp)){for(var o=arguments[0],s=arguments[1],a=new vt,A=o.iterator();A.hasNext();){var l=A.next(),c=s.map(l);null!==c&&a.add(c)}return a}},wr.MapOp=function(){};var br=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new wi,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new qn,this._resultPolyList=new vt,this._resultLineList=new vt,this._resultPointList=new vt,this._graph=new Ke(new zn),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new ke(t.getLabel())).flip();var r=e.getDepth();r.isNull()&&r.add(n),r.add(i),n.merge(i)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,i,r){var o=new vt;return o.addAll(t),o.addAll(n),o.addAll(i),o.isEmpty()?e.createEmptyResult(r,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(this._ptLocator.locate(t,i)!==x.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new vt,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new vt;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Ki.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new ze(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var i=new Ji(this,this._geomFact,this._ptLocator);this._resultLineList=i.build(t);var r=new qi(this,this._geomFact,this._ptLocator);this._resultPointList=r.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var i=n.next(),r=i.getLabel();r.isArea()&&!i.isInteriorAreaEdge()&&e.isResultOfOp(r.getLocation(0,we.RIGHT),r.getLocation(1,we.RIGHT),t)&&i.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),i=e.getDepth();if(!i.isNull()){i.normalize();for(var r=0;r<2;r++)n.isNull(r)||!n.isArea()||i.isNull(r)||(0===i.getDelta(r)?n.toLine(r):(et.isTrue(!i.isNull(r,we.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(r,we.LEFT,i.getLocation(r,we.LEFT)),et.isTrue(!i.isNull(r,we.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(r,we.RIGHT,i.getLocation(r,we.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Br);br.overlayOp=function(t,e,n){return new br(t,e).getResultGeometry(n)},br.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return br.createEmptyResult(br.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return zi.map(t,{interfaces_:function(){return[wr.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),or.overlayOp(t,e,br.INTERSECTION)},br.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return br.createEmptyResult(br.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),or.overlayOp(t,e,br.SYMDIFFERENCE)},br.resultDimension=function(t,e,n){var i=e.getDimension(),r=n.getDimension(),o=-1;switch(t){case br.INTERSECTION:o=Math.min(i,r);break;case br.UNION:o=Math.max(i,r);break;case br.DIFFERENCE:o=i;break;case br.SYMDIFFERENCE:o=Math.max(i,r)}return o},br.createEmptyResult=function(t,e,n,i){var r=null;switch(br.resultDimension(t,e,n)){case-1:r=i.createGeometryCollection(new Array(0).fill(null));break;case 0:r=i.createPoint();break;case 1:r=i.createLineString();break;case 2:r=i.createPolygon()}return r},br.difference=function(t,e){return t.isEmpty()?br.createEmptyResult(br.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),or.overlayOp(t,e,br.DIFFERENCE))},br.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),i=t.getLocation(1);return br.isResultOfOp(n,i,e)}if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];switch(r===x.BOUNDARY&&(r=x.INTERIOR),o===x.BOUNDARY&&(o=x.INTERIOR),s){case br.INTERSECTION:return r===x.INTERIOR&&o===x.INTERIOR;case br.UNION:return r===x.INTERIOR||o===x.INTERIOR;case br.DIFFERENCE:return r===x.INTERIOR&&o!==x.INTERIOR;case br.SYMDIFFERENCE:return r===x.INTERIOR&&o!==x.INTERIOR||r!==x.INTERIOR&&o===x.INTERIOR}return!1}},br.INTERSECTION=1,br.UNION=2,br.DIFFERENCE=3,br.SYMDIFFERENCE=4;var Qr=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new wi,this._seg=new pn;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Qr.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),i=0;i<n.size()-1;i++)if(n.getCoordinate(i,this._seg.p0),n.getCoordinate(i+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Qr.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?x.BOUNDARY:this._ptLocator.locate(t,this._g)},Qr.prototype.extractLinework=function(t){var e=new xr;t.apply(e);var n=e.getLinework(),i=me.toLineStringArray(n);return t.getFactory().createMultiLineString(i)},Qr.prototype.interfaces_=function(){return[]},Qr.prototype.getClass=function(){return Qr};var xr=function(){this._linework=null,this._linework=new vt};xr.prototype.getLinework=function(){return this._linework},xr.prototype.filter=function(t){if(t instanceof $t){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},xr.prototype.interfaces_=function(){return[Gt]},xr.prototype.getClass=function(){return xr};var Dr=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Dr.prototype.extractPoints=function(t,e,n){for(var i=t.getCoordinates(),r=0;r<i.length-1;r++)this.computeOffsetPoints(i[r],i[r+1],e,n)},Dr.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Dr.prototype.getPoints=function(t){for(var e=new vt,n=Bi.getLines(this._g).iterator();n.hasNext();){var i=n.next();this.extractPoints(i,t,e)}return e},Dr.prototype.computeOffsetPoints=function(t,e,n,i){var r=e.x-t.x,o=e.y-t.y,s=Math.sqrt(r*r+o*o),a=n*r/s,A=n*o/s,l=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var u=new B(l-A,c+a);i.add(u)}if(this._doRight){var h=new B(l+A,c-a);i.add(h)}},Dr.prototype.interfaces_=function(){return[]},Dr.prototype.getClass=function(){return Dr};var Sr=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new vt;var e=arguments[0],n=arguments[1],i=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,i],this._locFinder=[new Qr(this._geom[0],this._boundaryDistanceTolerance),new Qr(this._geom[1],this._boundaryDistanceTolerance),new Qr(this._geom[2],this._boundaryDistanceTolerance)]},Mr={TOLERANCE:{configurable:!0}};Sr.prototype.reportResult=function(t,e,n){K.out.println("Overlay result invalid - A:"+x.toLocationSymbol(e[0])+" B:"+x.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+x.toLocationSymbol(e[2]))},Sr.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Sr.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var i=arguments[0],r=arguments[1];return this._location[0]=this._locFinder[0].getLocation(r),this._location[1]=this._locFinder[1].getLocation(r),this._location[2]=this._locFinder[2].getLocation(r),!!Sr.hasLocation(this._location,x.BOUNDARY)||this.isValidResult(i,this._location)}},Sr.prototype.addTestPts=function(t){var e=new Dr(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Sr.prototype.isValidResult=function(t,e){var n=br.isResultOfOp(e[0],e[1],t),i=!(n^e[2]===x.INTERIOR);return i||this.reportResult(t,e,n),i},Sr.prototype.getInvalidLocation=function(){return this._invalidLocation},Sr.prototype.interfaces_=function(){return[]},Sr.prototype.getClass=function(){return Sr},Sr.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Sr.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Wi.computeSizeBasedSnapTolerance(t),Wi.computeSizeBasedSnapTolerance(e))},Sr.isValid=function(t,e,n,i){return new Sr(t,e,i).isValid(n)},Mr.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Sr,Mr);var kr=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};kr.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);this._skipEmpty&&i.isEmpty()||e.add(i)}},kr.prototype.combine=function(){for(var t=new vt,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},kr.prototype.interfaces_=function(){return[]},kr.prototype.getClass=function(){return kr},kr.combine=function(){if(1===arguments.length)return new kr(arguments[0]).combine();if(2===arguments.length){var t=arguments[0],e=arguments[1];return new kr(kr.createList(t,e)).combine()}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];return new kr(kr.createList(n,i,r)).combine()}},kr.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},kr.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new vt;return n.add(t),n.add(e),n}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=new vt;return s.add(i),s.add(r),s.add(o),s}};var Rr=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new vt)},Nr={STRTREE_NODE_CAPACITY:{configurable:!0}};Rr.prototype.reduceToGeometries=function(t){for(var e=new vt,n=t.iterator();n.hasNext();){var i=n.next(),r=null;S(i,_t)?r=this.unionTree(i):i instanceof ct&&(r=i),e.add(r)}return e},Rr.prototype.extractByEnvelope=function(t,e,n){for(var i=new vt,r=0;r<e.getNumGeometries();r++){var o=e.getGeometryN(r);o.getEnvelopeInternal().intersects(t)?i.add(o):n.add(o)}return this._geomFactory.buildGeometry(i)},Rr.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),i=e.getEnvelopeInternal();if(!n.intersects(i))return kr.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var r=n.intersection(i);return this.unionUsingEnvelopeIntersection(t,e,r)},Rr.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new sn(Rr.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var i=t.itemsTree();return this.unionTree(i)},Rr.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];if(i-n<=1){var r=Rr.getGeometry(e,n);return this.unionSafe(r,null)}if(i-n==2)return this.unionSafe(Rr.getGeometry(e,n),Rr.getGeometry(e,n+1));var o=Math.trunc((i+n)/2),s=this.binaryUnion(e,n,o),a=this.binaryUnion(e,o,i);return this.unionSafe(s,a)}},Rr.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var i=n.next();e=null===e?i.copy():e.union(i)}return e},Rr.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Rr.prototype.unionActual=function(t,e){return Rr.restrictToPolygons(t.union(e))},Rr.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Rr.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var i=new vt,r=this.extractByEnvelope(n,t,i),o=this.extractByEnvelope(n,e,i),s=this.unionActual(r,o);return i.add(s),kr.combine(i)},Rr.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Rr.prototype.interfaces_=function(){return[]},Rr.prototype.getClass=function(){return Rr},Rr.restrictToPolygons=function(t){if(S(t,Xt))return t;var e=vi.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(me.toPolygonArray(e))},Rr.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Rr.union=function(t){return new Rr(t).union()},Nr.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Rr,Nr);var Pr=function(){};Pr.prototype.interfaces_=function(){return[]},Pr.prototype.getClass=function(){return Pr},Pr.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return br.createEmptyResult(br.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),or.overlayOp(t,e,br.UNION)},t.GeoJSONReader=ve,t.GeoJSONWriter=Be,t.OverlayOp=br,t.UnionOp=Pr,t.BufferOp=pi,Object.defineProperty(t,"__esModule",{value:!0})}(e)},8779:(t,e,n)=>{"use strict";var i=n(5959);var r="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},o=i.useState,s=i.useEffect,a=i.useLayoutEffect,A=i.useDebugValue;function l(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!r(t,n)}catch(t){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(t,e){return e()}:function(t,e){var n=e(),i=o({inst:{value:n,getSnapshot:e}}),r=i[0].inst,c=i[1];return a((function(){r.value=n,r.getSnapshot=e,l(r)&&c({inst:r})}),[t,n,e]),s((function(){return l(r)&&c({inst:r}),t((function(){l(r)&&c({inst:r})}))}),[t]),A(n),n};e.useSyncExternalStore=void 0!==i.useSyncExternalStore?i.useSyncExternalStore:c},3676:(t,e,n)=>{"use strict";t.exports=n(8779)},5276:t=>{"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAW0lEQVR4nGNgGAWMyBwXFxcGBgaGeii3EU0tXHzPnj1wQRYsihqQ+I0ExDEMQAYNONgoAN0AmMkNaDSyQSheY8JiaCMOGzE04zIAmyFYNTMw4A+DRhzsUUBtAADw4BCeIZkGdwAAAABJRU5ErkJggg=="},9029:t=>{"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAACE1BMVEX///8A//8AgICA//8AVVVAQID///8rVVVJtttgv98nTmJ2xNgkW1ttyNsmWWZmzNZYxM4gWGgeU2JmzNNr0N1Rwc0eU2VXxdEhV2JqytQeVmMhVmNoydUfVGUgVGQfVGQfVmVqy9hqy9dWw9AfVWRpydVry9YhVmMgVGNUw9BrytchVWRexdGw294gVWQgVmUhVWPd4N6HoaZsy9cfVmQgVGRrytZsy9cgVWQgVWMgVWRsy9YfVWNsy9YgVWVty9YgVWVry9UgVWRsy9Zsy9UfVWRsy9YgVWVty9YgVWRty9Vsy9aM09sgVWRTws/AzM0gVWRtzNYgVWRuy9Zsy9cgVWRGcHxty9bb5ORbxdEgVWRty9bn6OZTws9mydRfxtLX3Nva5eRix9NFcXxOd4JPeINQeIMiVmVUws9Vws9Vw9BXw9BYxNBaxNBbxNBcxdJexdElWWgmWmhjyNRlx9IqXGtoipNpytVqytVryNNrytZsjZUuX210k5t1y9R2zNR3y9V4lp57zth9zdaAnKOGoaeK0NiNpquV09mesrag1tuitbmj1tuj19uktrqr2d2svcCu2d2xwMO63N+7x8nA3uDC3uDFz9DK4eHL4eLN4eIyYnDX5OM5Z3Tb397e4uDf4uHf5uXi5ePi5+Xj5+Xk5+Xm5+Xm6OY6aHXQ19fT4+NfhI1Ww89gx9Nhx9Nsy9ZWw9Dpj2abAAAAWnRSTlMAAQICAwQEBgcIDQ0ODhQZGiAiIyYpKywvNTs+QklPUlNUWWJjaGt0dnd+hIWFh4mNjZCSm6CpsbW2t7nDzNDT1dje5efr7PHy9PT29/j4+Pn5+vr8/f39/f6DPtKwAAABTklEQVR4Xr3QVWPbMBSAUTVFZmZmhhSXMjNvkhwqMzMzMzPDeD+xASvObKePPa+ffHVl8PlsnE0+qPpBuQjVJjno6pZpSKXYl7/bZyFaQxhf98hHDKEppwdWIW1frFnrxSOWHFfWesSEWC6R/P4zOFrix3TzDFLlXRTR8c0fEEJ1/itpo7SVO9Jdr1DVxZ0USyjZsEY5vZfiiAC0UoTGOrm9PZLuRl8X+Dq1HQtoFbJZbv61i+Poblh/97TC7n0neCcK0ETNUrz1/xPHf+DNAW9Ac6t8O8WH3Vp98f5lCaYKAOFZMLyHL4Y0fe319idMNgMMp+zWVSybUed/+/h7I4wRAG1W6XDy4XmjR9HnzvDRZXUAYDFOhC1S/Hh+fIXxen+eO+AKqbs+wAo30zDTDvDxKoJN88sjUzDFAvBzEUGFsnADoIvAJzoh2BZ8sner+Ke/vwECuQAAAABJRU5ErkJggg=="},6089:e=>{"use strict";e.exports=t},9089:t=>{"use strict";t.exports=e},7781:t=>{"use strict";t.exports=n},8531:t=>{"use strict";t.exports=i},2007:t=>{"use strict";t.exports=r},3241:t=>{"use strict";t.exports=o},5959:t=>{"use strict";t.exports=s},8398:t=>{"use strict";t.exports=a},1269:t=>{"use strict";t.exports=A},8304:t=>{function e(){return t.exports=e=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(null,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},6784:t=>{t.exports=function(t){return t&&t.__esModule?t:{default:t}},t.exports.__esModule=!0,t.exports.default=t.exports},739:t=>{t.exports=function(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.includes(i))continue;n[i]=t[i]}return n},t.exports.__esModule=!0,t.exports.default=t.exports},2014:(t,e,n)=>{"use strict";var i=n(8051);function r(t,e={}){if(null!=t.bbox&&!0!==e.recompute)return t.bbox;const n=[1/0,1/0,-1/0,-1/0];return i.coordEach.call(void 0,t,(t=>{n[0]>t[0]&&(n[0]=t[0]),n[1]>t[1]&&(n[1]=t[1]),n[2]<t[0]&&(n[2]=t[0]),n[3]<t[1]&&(n[3]=t[1])})),n}var o=r;e.Ay=o},297:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=6371008.8,i={centimeters:637100880,centimetres:637100880,degrees:360/(2*Math.PI),feet:20902260.511392,inches:39.37*n,kilometers:6371.0088,kilometres:6371.0088,meters:n,metres:n,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:n/1852,radians:1,yards:6967335.223679999},r={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:2.9155334959812285e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046};function o(t,e,n={}){const i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function s(t,e,n={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!f(t[0])||!f(t[1]))throw new Error("coordinates must contain numbers");return o({type:"Point",coordinates:t},e,n)}function a(t,e,n={}){for(const e of t){if(e.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(e[e.length-1].length!==e[0].length)throw new Error("First and last Position are not equivalent.");for(let t=0;t<e[e.length-1].length;t++)if(e[e.length-1][t]!==e[0][t])throw new Error("First and last Position are not equivalent.")}return o({type:"Polygon",coordinates:t},e,n)}function A(t,e,n={}){if(t.length<2)throw new Error("coordinates must be an array of two or more positions");return o({type:"LineString",coordinates:t},e,n)}function l(t,e={}){const n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function c(t,e,n={}){return o({type:"MultiLineString",coordinates:t},e,n)}function u(t,e,n={}){return o({type:"MultiPoint",coordinates:t},e,n)}function h(t,e,n={}){return o({type:"MultiPolygon",coordinates:t},e,n)}function g(t,e="kilometers"){const n=i[e];if(!n)throw new Error(e+" units is invalid");return t*n}function d(t,e="kilometers"){const n=i[e];if(!n)throw new Error(e+" units is invalid");return t/n}function p(t){return 180*(t%(2*Math.PI))/Math.PI}function f(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}e.areaFactors=r,e.azimuthToBearing=function(t){return(t%=360)>0?t>180?t-360:t:t<-180?t+360:t},e.bearingToAzimuth=function(t){let e=t%360;return e<0&&(e+=360),e},e.convertArea=function(t,e="meters",n="kilometers"){if(!(t>=0))throw new Error("area must be a positive number");const i=r[e];if(!i)throw new Error("invalid original units");const o=r[n];if(!o)throw new Error("invalid final units");return t/i*o},e.convertLength=function(t,e="kilometers",n="kilometers"){if(!(t>=0))throw new Error("length must be a positive number");return g(d(t,e),n)},e.degreesToRadians=function(t){return t%360*Math.PI/180},e.earthRadius=n,e.factors=i,e.feature=o,e.featureCollection=l,e.geometry=function(t,e,n={}){switch(t){case"Point":return s(e).geometry;case"LineString":return A(e).geometry;case"Polygon":return a(e).geometry;case"MultiPoint":return u(e).geometry;case"MultiLineString":return c(e).geometry;case"MultiPolygon":return h(e).geometry;default:throw new Error(t+" is invalid")}},e.geometryCollection=function(t,e,n={}){return o({type:"GeometryCollection",geometries:t},e,n)},e.isNumber=f,e.isObject=function(t){return null!==t&&"object"==typeof t&&!Array.isArray(t)},e.lengthToDegrees=function(t,e){return p(d(t,e))},e.lengthToRadians=d,e.lineString=A,e.lineStrings=function(t,e,n={}){return l(t.map((t=>A(t,e))),n)},e.multiLineString=c,e.multiPoint=u,e.multiPolygon=h,e.point=s,e.points=function(t,e,n={}){return l(t.map((t=>s(t,e))),n)},e.polygon=a,e.polygons=function(t,e,n={}){return l(t.map((t=>a(t,e))),n)},e.radiansToDegrees=p,e.radiansToLength=g,e.round=function(t,e=0){if(e&&!(e>=0))throw new Error("precision must be a positive number");const n=Math.pow(10,e||0);return Math.round(t*n)/n},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((t=>{if(!f(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}},8051:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(297);function r(t,e,n){if(null!==t)for(var i,o,s,a,A,l,c,u,h=0,g=0,d=t.type,p="FeatureCollection"===d,f="Feature"===d,m=p?t.features.length:1,I=0;I<m;I++){A=(u=!!(c=p?t.features[I].geometry:f?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var y=0;y<A;y++){var C=0,E=0;if(null!==(a=u?c.geometries[y]:c)){l=a.coordinates;var _=a.type;switch(h=!n||"Polygon"!==_&&"MultiPolygon"!==_?0:1,_){case null:break;case"Point":if(!1===e(l,g,I,C,E))return!1;g++,C++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(!1===e(l[i],g,I,C,E))return!1;g++,"MultiPoint"===_&&C++}"LineString"===_&&C++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(o=0;o<l[i].length-h;o++){if(!1===e(l[i][o],g,I,C,E))return!1;g++}"MultiLineString"===_&&C++,"Polygon"===_&&E++}"Polygon"===_&&C++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(E=0,o=0;o<l[i].length;o++){for(s=0;s<l[i][o].length-h;s++){if(!1===e(l[i][o][s],g,I,C,E))return!1;g++}E++}C++}break;case"GeometryCollection":for(i=0;i<a.geometries.length;i++)if(!1===r(a.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function s(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function a(t,e){var n,i,r,o,s,a,A,l,c,u,h=0,g="FeatureCollection"===t.type,d="Feature"===t.type,p=g?t.features.length:1;for(n=0;n<p;n++){for(a=g?t.features[n].geometry:d?t.geometry:t,l=g?t.features[n].properties:d?t.properties:{},c=g?t.features[n].bbox:d?t.bbox:void 0,u=g?t.features[n].id:d?t.id:void 0,s=(A=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<s;r++)if(null!==(o=A?a.geometries[r]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,h,l,c,u))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===e(o.geometries[i],h,l,c,u))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,h,l,c,u))return!1;h++}}function A(t,e){a(t,(function(t,n,r,o,s){var a,A=null===t?null:t.type;switch(A){case null:case"Point":case"LineString":case"Polygon":return!1!==e(i.feature.call(void 0,t,r,{bbox:o,id:s}),n,0)&&void 0}switch(A){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<t.coordinates.length;l++){var c={type:a,coordinates:t.coordinates[l]};if(!1===e(i.feature.call(void 0,c,r),n,l))return!1}}))}function l(t,e){A(t,(function(t,n,o){var s=0;if(t.geometry){var a=t.geometry.type;if("Point"!==a&&"MultiPoint"!==a){var A,l=0,c=0,u=0;return!1!==r(t,(function(r,a,h,g,d){if(void 0===A||n>l||g>c||d>u)return A=r,l=n,c=g,u=d,void(s=0);var p=i.lineString.call(void 0,[A,r],t.properties);if(!1===e(p,n,o,d,s))return!1;s++,A=r}))&&void 0}}}))}function c(t,e){if(!t)throw new Error("geojson is required");A(t,(function(t,n,r){if(null!==t.geometry){var o=t.geometry.type,s=t.geometry.coordinates;switch(o){case"LineString":if(!1===e(t,n,r,0,0))return!1;break;case"Polygon":for(var a=0;a<s.length;a++)if(!1===e(i.lineString.call(void 0,s[a],t.properties),n,r,a))return!1}}}))}e.coordAll=function(t){var e=[];return r(t,(function(t){e.push(t)})),e},e.coordEach=r,e.coordReduce=function(t,e,n,i){var o=n;return r(t,(function(t,i,r,s,a){o=0===i&&void 0===n?t:e(o,t,i,r,s,a)}),i),o},e.featureEach=s,e.featureReduce=function(t,e,n){var i=n;return s(t,(function(t,r){i=0===r&&void 0===n?t:e(i,t,r)})),i},e.findPoint=function(t,e){if(e=e||{},!i.isObject.call(void 0,e))throw new Error("options is invalid");var n,r=e.featureIndex||0,o=e.multiFeatureIndex||0,s=e.geometryIndex||0,a=e.coordIndex||0,A=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),A=A||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":A=A||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":return i.point.call(void 0,l,A,e);case"MultiPoint":return o<0&&(o=l.length+o),i.point.call(void 0,l[o],A,e);case"LineString":return a<0&&(a=l.length+a),i.point.call(void 0,l[a],A,e);case"Polygon":return s<0&&(s=l.length+s),a<0&&(a=l[s].length+a),i.point.call(void 0,l[s][a],A,e);case"MultiLineString":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a),i.point.call(void 0,l[o][a],A,e);case"MultiPolygon":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s),a<0&&(a=l[o][s].length-a),i.point.call(void 0,l[o][s][a],A,e)}throw new Error("geojson is invalid")},e.findSegment=function(t,e){if(e=e||{},!i.isObject.call(void 0,e))throw new Error("options is invalid");var n,r=e.featureIndex||0,o=e.multiFeatureIndex||0,s=e.geometryIndex||0,a=e.segmentIndex||0,A=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),A=A||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":A=A||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=l.length+a-1),i.lineString.call(void 0,[l[a],l[a+1]],A,e);case"Polygon":return s<0&&(s=l.length+s),a<0&&(a=l[s].length+a-1),i.lineString.call(void 0,[l[s][a],l[s][a+1]],A,e);case"MultiLineString":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a-1),i.lineString.call(void 0,[l[o][a],l[o][a+1]],A,e);case"MultiPolygon":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s),a<0&&(a=l[o][s].length-a-1),i.lineString.call(void 0,[l[o][s][a],l[o][s][a+1]],A,e)}throw new Error("geojson is invalid")},e.flattenEach=A,e.flattenReduce=function(t,e,n){var i=n;return A(t,(function(t,r,o){i=0===r&&0===o&&void 0===n?t:e(i,t,r,o)})),i},e.geomEach=a,e.geomReduce=function(t,e,n){var i=n;return a(t,(function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)})),i},e.lineEach=c,e.lineReduce=function(t,e,n){var i=n;return c(t,(function(t,r,o,s){i=0===r&&void 0===n?t:e(i,t,r,o,s)})),i},e.propEach=o,e.propReduce=function(t,e,n){var i=n;return o(t,(function(t,r){i=0===r&&void 0===n?t:e(i,t,r)})),i},e.segmentEach=l,e.segmentReduce=function(t,e,n){var i=n,r=!1;return l(t,(function(t,o,s,a,A){i=!1===r&&void 0===n?t:e(i,t,o,s,a,A),r=!0})),i}},4452:(t,e)=>{var n;!function(){"use strict";var i={}.hasOwnProperty;function r(){for(var t="",e=0;e<arguments.length;e++){var n=arguments[e];n&&(t=s(t,o(n)))}return t}function o(t){if("string"==typeof t||"number"==typeof t)return t;if("object"!=typeof t)return"";if(Array.isArray(t))return r.apply(null,t);if(t.toString!==Object.prototype.toString&&!t.toString.toString().includes("[native code]"))return t.toString();var e="";for(var n in t)i.call(t,n)&&t[n]&&(e=s(e,n));return e}function s(t,e){return e?t?t+" "+e:t+e:t}t.exports?(r.default=r,t.exports=r):void 0===(n=function(){return r}.apply(e,[]))||(t.exports=n)}()},6505:function(t){t.exports=function(){"use strict";var t={},e={};function n(n,i,r){if(e[n]=r,"index"===n){var o="var sharedModule = {}; ("+e.shared+")(sharedModule); ("+e.worker+")(sharedModule);",s={};return e.shared(s),e.index(t,s),"undefined"!=typeof window&&t.setWorkerUrl(window.URL.createObjectURL(new Blob([o],{type:"text/javascript"}))),t}}return n("shared",["exports"],(function(t){function e(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{A(i.next(t))}catch(t){o(t)}}function a(t){try{A(i.throw(t))}catch(t){o(t)}}function A(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}A((i=i.apply(t,e||[])).next())}))}function n(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}"function"==typeof SuppressedError&&SuppressedError;var i=r;function r(t,e){this.x=t,this.y=e}r.prototype={clone:function(){return new r(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=i,this},_rotateAround:function(t,e){var n=Math.cos(t),i=Math.sin(t),r=e.y+i*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-i*(this.y-e.y),this.y=r,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(t){return t instanceof r?t:Array.isArray(t)?new r(t[0],t[1]):t};var o=n(i),s=a;function a(t,e,n,i){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(i-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=n,this.p2y=i}a.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(void 0===e&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var n=t,i=0;i<8;i++){var r=this.sampleCurveX(n)-t;if(Math.abs(r)<e)return n;var o=this.sampleCurveDerivativeX(n);if(Math.abs(o)<1e-6)break;n-=r/o}var s=0,a=1;for(n=t,i=0;i<20&&(r=this.sampleCurveX(n),!(Math.abs(r-t)<e));i++)t>r?s=n:a=n,n=.5*(a-s)+s;return n},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}};var A=n(s);let l,c;function u(){return null==l&&(l="undefined"!=typeof OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),l}function h(){if(null==c&&(c=!1,u())){const t=5,e=new OffscreenCanvas(t,t).getContext("2d",{willReadFrequently:!0});if(e){for(let n=0;n<t*t;n++){const i=4*n;e.fillStyle=`rgb(${i},${i+1},${i+2})`,e.fillRect(n%t,Math.floor(n/t),1,1)}const n=e.getImageData(0,0,t,t).data;for(let e=0;e<t*t*4;e++)if(e%4!=3&&n[e]!==e){c=!0;break}}}return c||!1}function g(t,e,n,i){const r=new A(t,e,n,i);return t=>r.solve(t)}const d=g(.25,.1,.25,1);function p(t,e,n){return Math.min(n,Math.max(e,t))}function f(t,e,n){const i=n-e,r=((t-e)%i+i)%i+e;return r===e?n:r}function m(t,...e){for(const n of e)for(const e in n)t[e]=n[e];return t}let I=1;function y(t,e,n){const i={};for(const n in t)i[n]=e.call(this,t[n],n,t);return i}function C(t,e,n){const i={};for(const n in t)e.call(this,t[n],n,t)&&(i[n]=t[n]);return i}function E(t){return Array.isArray(t)?t.map(E):"object"==typeof t&&t?y(t,E):t}const _={};function v(t){_[t]||("undefined"!=typeof console&&console.warn(t),_[t]=!0)}function B(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function w(t){return"undefined"!=typeof WorkerGlobalScope&&void 0!==t&&t instanceof WorkerGlobalScope}let b=null;function Q(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap}const x="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function D(t,n,i,r,o){return e(this,void 0,void 0,(function*(){if("undefined"==typeof VideoFrame)throw new Error("VideoFrame not supported");const e=new VideoFrame(t,{timestamp:0});try{const s=null==e?void 0:e.format;if(!s||!s.startsWith("BGR")&&!s.startsWith("RGB"))throw new Error(`Unrecognized format ${s}`);const a=s.startsWith("BGR"),A=new Uint8ClampedArray(r*o*4);if(yield e.copyTo(A,function(t,e,n,i,r){const o=4*Math.max(-e,0),s=(Math.max(0,n)-n)*i*4+o,a=4*i,A=Math.max(0,e),l=Math.max(0,n);return{rect:{x:A,y:l,width:Math.min(t.width,e+i)-A,height:Math.min(t.height,n+r)-l},layout:[{offset:s,stride:a}]}}(t,n,i,r,o)),a)for(let t=0;t<A.length;t+=4){const e=A[t];A[t]=A[t+2],A[t+2]=e}return A}finally{e.close()}}))}let S,M;const k="AbortError";function R(){return new Error(k)}const N={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function P(t){return N.REGISTERED_PROTOCOLS[t.substring(0,t.indexOf("://"))]}const T="global-dispatcher";class L extends Error{constructor(t,e,n,i){super(`AJAXError: ${e} (${t}): ${n}`),this.status=t,this.statusText=e,this.url=n,this.body=i}}const F=()=>w(self)?self.worker&&self.worker.referrer:("blob:"===window.location.protocol?window.parent:window).location.href,O=function(t,n){if(/:\/\//.test(t.url)&&!/^https?:|^file:/.test(t.url)){const e=P(t.url);if(e)return e(t,n);if(w(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:t,targetMapId:T},n)}if(!(/^file:/.test(i=t.url)||/^file:/.test(F())&&!/^\w+:/.test(i))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(t,n){return e(this,void 0,void 0,(function*(){const e=new Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,cache:t.cache,referrer:F(),signal:n.signal});"json"!==t.type||e.headers.has("Accept")||e.headers.set("Accept","application/json");const i=yield fetch(e);if(!i.ok){const e=yield i.blob();throw new L(i.status,i.statusText,t.url,e)}let r;r="arrayBuffer"===t.type||"image"===t.type?i.arrayBuffer():"json"===t.type?i.json():i.text();const o=yield r;if(n.signal.aborted)throw R();return{data:o,cacheControl:i.headers.get("Cache-Control"),expires:i.headers.get("Expires")}}))}(t,n);if(w(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:t,mustQueue:!0,targetMapId:T},n)}var i;return function(t,e){return new Promise(((n,i)=>{var r;const o=new XMLHttpRequest;o.open(t.method||"GET",t.url,!0),"arrayBuffer"!==t.type&&"image"!==t.type||(o.responseType="arraybuffer");for(const e in t.headers)o.setRequestHeader(e,t.headers[e]);"json"===t.type&&(o.responseType="text",(null===(r=t.headers)||void 0===r?void 0:r.Accept)||o.setRequestHeader("Accept","application/json")),o.withCredentials="include"===t.credentials,o.onerror=()=>{i(new Error(o.statusText))},o.onload=()=>{if(!e.signal.aborted)if((o.status>=200&&o.status<300||0===o.status)&&null!==o.response){let e=o.response;if("json"===t.type)try{e=JSON.parse(o.response)}catch(t){return void i(t)}n({data:e,cacheControl:o.getResponseHeader("Cache-Control"),expires:o.getResponseHeader("Expires")})}else{const e=new Blob([o.response],{type:o.getResponseHeader("Content-Type")});i(new L(o.status,o.statusText,t.url,e))}},e.signal.addEventListener("abort",(()=>{o.abort(),i(R())})),o.send(t.body)}))}(t,n)};function G(t){if(!t||t.indexOf("://")<=0||0===t.indexOf("data:image/")||0===t.indexOf("blob:"))return!0;const e=new URL(t),n=window.location;return e.protocol===n.protocol&&e.host===n.host}function U(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function j(t,e,n){if(n&&n[t]){const i=n[t].indexOf(e);-1!==i&&n[t].splice(i,1)}}class Y{constructor(t,e={}){m(this,e),this.type=t}}class K extends Y{constructor(t,e={}){super("error",m({error:t},e))}}class z{on(t,e){return this._listeners=this._listeners||{},U(t,e,this._listeners),this}off(t,e){return j(t,e,this._listeners),j(t,e,this._oneTimeListeners),this}once(t,e){return e?(this._oneTimeListeners=this._oneTimeListeners||{},U(t,e,this._oneTimeListeners),this):new Promise((e=>this.once(t,e)))}fire(t,e){"string"==typeof t&&(t=new Y(t,e||{}));const n=t.type;if(this.listens(n)){t.target=this;const e=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(const n of e)n.call(this,t);const i=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];for(const e of i)j(n,e,this._oneTimeListeners),e.call(this,t);const r=this._eventedParent;r&&(m(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),r.fire(t))}else t instanceof K&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,e){return this._eventedParent=t,this._eventedParentData=e,this}}var J={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const q=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function H(t,e){const n={};for(const e in t)"ref"!==e&&(n[e]=t[e]);return q.forEach((t=>{t in e&&(n[t]=e[t])})),n}function V(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!V(t[n],e[n]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!V(t[n],e[n]))return!1;return!0}return t===e}function W(t,e){t.push(e)}function Z(t,e,n){W(n,{command:"addSource",args:[t,e[t]]})}function X(t,e,n){W(e,{command:"removeSource",args:[t]}),n[t]=!0}function $(t,e,n,i){X(t,n,i),Z(t,e,n)}function tt(t,e,n){let i;for(i in t[n])if(Object.prototype.hasOwnProperty.call(t[n],i)&&"data"!==i&&!V(t[n][i],e[n][i]))return!1;for(i in e[n])if(Object.prototype.hasOwnProperty.call(e[n],i)&&"data"!==i&&!V(t[n][i],e[n][i]))return!1;return!0}function et(t,e,n,i,r,o){t=t||{},e=e||{};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(V(t[s],e[s])||n.push({command:o,args:[i,s,e[s],r]}));for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&!Object.prototype.hasOwnProperty.call(t,s)&&(V(t[s],e[s])||n.push({command:o,args:[i,s,e[s],r]}))}function nt(t){return t.id}function it(t,e){return t[e.id]=e,t}class rt{constructor(t,e,n,i){this.message=(t?`${t}: `:"")+n,i&&(this.identifier=i),null!=e&&e.__line__&&(this.line=e.__line__)}}function ot(t,...e){for(const n of e)for(const e in n)t[e]=n[e];return t}class st extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}class at{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[t,n]of e)this.bindings[t]=n}concat(t){return new at(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const At={kind:"null"},lt={kind:"number"},ct={kind:"string"},ut={kind:"boolean"},ht={kind:"color"},gt={kind:"object"},dt={kind:"value"},pt={kind:"collator"},ft={kind:"formatted"},mt={kind:"padding"},It={kind:"resolvedImage"},yt={kind:"variableAnchorOffsetCollection"};function Ct(t,e){return{kind:"array",itemType:t,N:e}}function Et(t){if("array"===t.kind){const e=Et(t.itemType);return"number"==typeof t.N?`array<${e}, ${t.N}>`:"value"===t.itemType.kind?"array":`array<${e}>`}return t.kind}const _t=[At,lt,ct,ut,ht,ft,gt,Ct(dt),mt,It,yt];function vt(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!vt(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const t of _t)if(!vt(t,e))return null}return`Expected ${Et(t)} but found ${Et(e)} instead.`}function Bt(t,e){return e.some((e=>e.kind===t.kind))}function wt(t,e){return e.some((e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t))}function bt(t,e){return"array"===t.kind&&"array"===e.kind?t.itemType.kind===e.itemType.kind&&"number"==typeof t.N:t.kind===e.kind}const Qt=.96422,xt=.82521,Dt=4/29,St=6/29,Mt=3*St*St,kt=St*St*St,Rt=Math.PI/180,Nt=180/Math.PI;function Pt(t){return(t%=360)<0&&(t+=360),t}function Tt([t,e,n,i]){let r,o;const s=Ft((.2225045*(t=Lt(t))+.7168786*(e=Lt(e))+.0606169*(n=Lt(n)))/1);t===e&&e===n?r=o=s:(r=Ft((.4360747*t+.3850649*e+.1430804*n)/Qt),o=Ft((.0139322*t+.0971045*e+.7141733*n)/xt));const a=116*s-16;return[a<0?0:a,500*(r-s),200*(s-o),i]}function Lt(t){return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ft(t){return t>kt?Math.pow(t,1/3):t/Mt+Dt}function Ot([t,e,n,i]){let r=(t+16)/116,o=isNaN(e)?r:r+e/500,s=isNaN(n)?r:r-n/200;return r=1*Ut(r),o=Qt*Ut(o),s=xt*Ut(s),[Gt(3.1338561*o-1.6168667*r-.4906146*s),Gt(-.9787684*o+1.9161415*r+.033454*s),Gt(.0719453*o-.2289914*r+1.4052427*s),i]}function Gt(t){return(t=t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055)<0?0:t>1?1:t}function Ut(t){return t>St?t*t*t:Mt*(t-Dt)}function jt(t){return parseInt(t.padEnd(2,t),16)/255}function Yt(t,e){return Kt(e?t/100:t,0,1)}function Kt(t,e,n){return Math.min(Math.max(e,t),n)}function zt(t){return!t.some(Number.isNaN)}const Jt={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class qt{constructor(t,e,n,i=1,r=!0){this.r=t,this.g=e,this.b=n,this.a=i,r||(this.r*=i,this.g*=i,this.b*=i,i||this.overwriteGetter("rgb",[t,e,n,i]))}static parse(t){if(t instanceof qt)return t;if("string"!=typeof t)return;const e=function(t){if("transparent"===(t=t.toLowerCase().trim()))return[0,0,0,0];const e=Jt[t];if(e){const[t,n,i]=e;return[t/255,n/255,i/255,1]}if(t.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(t)){const e=t.length<6?1:2;let n=1;return[jt(t.slice(n,n+=e)),jt(t.slice(n,n+=e)),jt(t.slice(n,n+=e)),jt(t.slice(n,n+e)||"ff")]}if(t.startsWith("rgb")){const e=t.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(e){const[t,n,i,r,o,s,a,A,l,c,u,h]=e,g=[r||" ",a||" ",c].join("");if("  "===g||"  /"===g||",,"===g||",,,"===g){const t=[i,s,l].join(""),e="%%%"===t?100:""===t?255:0;if(e){const t=[Kt(+n/e,0,1),Kt(+o/e,0,1),Kt(+A/e,0,1),u?Yt(+u,h):1];if(zt(t))return t}}return}}const n=t.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(n){const[t,e,i,r,o,s,a,A,l]=n,c=[i||" ",o||" ",a].join("");if("  "===c||"  /"===c||",,"===c||",,,"===c){const t=[+e,Kt(+r,0,100),Kt(+s,0,100),A?Yt(+A,l):1];if(zt(t))return function([t,e,n,i]){function r(i){const r=(i+t/30)%12,o=e*Math.min(n,1-n);return n-o*Math.max(-1,Math.min(r-3,9-r,1))}return t=Pt(t),e/=100,n/=100,[r(0),r(8),r(4),i]}(t)}}}(t);return e?new qt(...e,!1):void 0}get rgb(){const{r:t,g:e,b:n,a:i}=this,r=i||1/0;return this.overwriteGetter("rgb",[t/r,e/r,n/r,i])}get hcl(){return this.overwriteGetter("hcl",function(t){const[e,n,i,r]=Tt(t),o=Math.sqrt(n*n+i*i);return[Math.round(1e4*o)?Pt(Math.atan2(i,n)*Nt):NaN,o,e,r]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Tt(this.rgb))}overwriteGetter(t,e){return Object.defineProperty(this,t,{value:e}),e}toString(){const[t,e,n,i]=this.rgb;return`rgba(${[t,e,n].map((t=>Math.round(255*t))).join(",")},${i})`}}qt.black=new qt(0,0,0,1),qt.white=new qt(1,1,1,1),qt.transparent=new qt(0,0,0,0),qt.red=new qt(1,0,0,1);class Ht{constructor(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Vt{constructor(t,e,n,i,r){this.text=t,this.image=e,this.scale=n,this.fontStack=i,this.textColor=r}}class Wt{constructor(t){this.sections=t}static fromString(t){return new Wt([new Vt(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((t=>0!==t.text.length||t.image&&0!==t.image.name.length))}static factory(t){return t instanceof Wt?t:Wt.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map((t=>t.text)).join("")}}class Zt{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Zt)return t;if("number"==typeof t)return new Zt([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const e of t)if("number"!=typeof e)return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new Zt(t)}}toString(){return JSON.stringify(this.values)}}const Xt=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class $t{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof $t)return t;if(Array.isArray(t)&&!(t.length<1)&&t.length%2==0){for(let e=0;e<t.length;e+=2){const n=t[e],i=t[e+1];if("string"!=typeof n||!Xt.has(n))return;if(!Array.isArray(i)||2!==i.length||"number"!=typeof i[0]||"number"!=typeof i[1])return}return new $t(t)}}toString(){return JSON.stringify(this.values)}}class te{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new te({name:t,available:!1}):null}}function ee(t,e,n,i){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===i||"number"==typeof i&&i>=0&&i<=1?null:`Invalid rgba value [${[t,e,n,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof i?[t,e,n,i]:[t,e,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ne(t){if(null===t||"string"==typeof t||"boolean"==typeof t||"number"==typeof t||t instanceof qt||t instanceof Ht||t instanceof Wt||t instanceof Zt||t instanceof $t||t instanceof te)return!0;if(Array.isArray(t)){for(const e of t)if(!ne(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!ne(t[e]))return!1;return!0}return!1}function ie(t){if(null===t)return At;if("string"==typeof t)return ct;if("boolean"==typeof t)return ut;if("number"==typeof t)return lt;if(t instanceof qt)return ht;if(t instanceof Ht)return pt;if(t instanceof Wt)return ft;if(t instanceof Zt)return mt;if(t instanceof $t)return yt;if(t instanceof te)return It;if(Array.isArray(t)){const e=t.length;let n;for(const e of t){const t=ie(e);if(n){if(n===t)continue;n=dt;break}n=t}return Ct(n||dt,e)}return gt}function re(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof qt||t instanceof Wt||t instanceof Zt||t instanceof $t||t instanceof te?t.toString():JSON.stringify(t)}class oe{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!ne(t[1]))return e.error("invalid value");const n=t[1];let i=ie(n);const r=e.expectedType;return"array"!==i.kind||0!==i.N||!r||"array"!==r.kind||"number"==typeof r.N&&0!==r.N||(i=r),new oe(i,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class se{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const ae={string:ct,number:lt,boolean:ut,object:gt};class Ae{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let n,i=1;const r=t[0];if("array"===r){let r,o;if(t.length>2){const n=t[1];if("string"!=typeof n||!(n in ae)||"object"===n)return e.error('The item type argument of "array" must be one of string, number, boolean',1);r=ae[n],i++}else r=dt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);o=t[2],i++}n=Ct(r,o)}else{if(!ae[r])throw new Error(`Types doesn't contain name = ${r}`);n=ae[r]}const o=[];for(;i<t.length;i++){const n=e.parse(t[i],i,dt);if(!n)return null;o.push(n)}return new Ae(n,o)}evaluate(t){for(let e=0;e<this.args.length;e++){const n=this.args[e].evaluate(t);if(!vt(this.type,ie(n)))return n;if(e===this.args.length-1)throw new se(`Expected value to be of type ${Et(this.type)}, but found ${Et(ie(n))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}const le={"to-boolean":ut,"to-color":ht,"to-number":lt,"to-string":ct};class ce{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[0];if(!le[n])throw new Error(`Can't parse ${n} as it is not part of the known types`);if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return e.error("Expected one argument.");const i=le[n],r=[];for(let n=1;n<t.length;n++){const i=e.parse(t[n],n,dt);if(!i)return null;r.push(i)}return new ce(i,r)}evaluate(t){switch(this.type.kind){case"boolean":return Boolean(this.args[0].evaluate(t));case"color":{let e,n;for(const i of this.args){if(e=i.evaluate(t),n=null,e instanceof qt)return e;if("string"==typeof e){const n=t.parseColor(e);if(n)return n}else if(Array.isArray(e)&&(n=e.length<3||e.length>4?`Invalid rbga value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:ee(e[0],e[1],e[2],e[3]),!n))return new qt(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new se(n||`Could not parse color from value '${"string"==typeof e?e:JSON.stringify(e)}'`)}case"padding":{let e;for(const n of this.args){e=n.evaluate(t);const i=Zt.parse(e);if(i)return i}throw new se(`Could not parse padding from value '${"string"==typeof e?e:JSON.stringify(e)}'`)}case"variableAnchorOffsetCollection":{let e;for(const n of this.args){e=n.evaluate(t);const i=$t.parse(e);if(i)return i}throw new se(`Could not parse variableAnchorOffsetCollection from value '${"string"==typeof e?e:JSON.stringify(e)}'`)}case"number":{let e=null;for(const n of this.args){if(e=n.evaluate(t),null===e)return 0;const i=Number(e);if(!isNaN(i))return i}throw new se(`Could not convert ${JSON.stringify(e)} to number.`)}case"formatted":return Wt.fromString(re(this.args[0].evaluate(t)));case"resolvedImage":return te.fromString(re(this.args[0].evaluate(t)));default:return re(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}const ue=["Unknown","Point","LineString","Polygon"];class he{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?ue[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=qt.parse(t)),e}}class ge{constructor(t,e,n=[],i,r=new at,o=[]){this.registry=t,this.path=n,this.key=n.map((t=>`[${t}]`)).join(""),this.scope=r,this.errors=o,this.expectedType=i,this._isConstant=e}parse(t,e,n,i,r={}){return e?this.concat(e,n,i)._parse(t,r):this._parse(t,r)}_parse(t,e){function n(t,e,n){return"assert"===n?new Ae(e,[t]):"coerce"===n?new ce(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=t[0];if("string"!=typeof i)return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const r=this.registry[i];if(r){let i=r.parse(t,this);if(!i)return null;if(this.expectedType){const t=this.expectedType,r=i.type;if("string"!==t.kind&&"number"!==t.kind&&"boolean"!==t.kind&&"object"!==t.kind&&"array"!==t.kind||"value"!==r.kind)if("color"!==t.kind&&"formatted"!==t.kind&&"resolvedImage"!==t.kind||"value"!==r.kind&&"string"!==r.kind)if("padding"!==t.kind||"value"!==r.kind&&"number"!==r.kind&&"array"!==r.kind)if("variableAnchorOffsetCollection"!==t.kind||"value"!==r.kind&&"array"!==r.kind){if(this.checkSubtype(t,r))return null}else i=n(i,t,e.typeAnnotation||"coerce");else i=n(i,t,e.typeAnnotation||"coerce");else i=n(i,t,e.typeAnnotation||"coerce");else i=n(i,t,e.typeAnnotation||"assert")}if(!(i instanceof oe)&&"resolvedImage"!==i.type.kind&&this._isConstant(i)){const e=new he;try{i=new oe(i.type,i.evaluate(e))}catch(t){return this.error(t.message),null}}return i}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,e,n){const i="number"==typeof t?this.path.concat(t):this.path,r=n?this.scope.concat(n):this.scope;return new ge(this.registry,this._isConstant,i,e||null,r,this.errors)}error(t,...e){const n=`${this.key}${e.map((t=>`[${t}]`)).join("")}`;this.errors.push(new st(n,t))}checkSubtype(t,e){const n=vt(t,e);return n&&this.error(n),n}}class de{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const n=[];for(let i=1;i<t.length-1;i+=2){const r=t[i];if("string"!=typeof r)return e.error(`Expected string, but found ${typeof r} instead.`,i);if(/[^a-zA-Z0-9_]/.test(r))return e.error("Variable names must contain only alphanumeric characters or '_'.",i);const o=e.parse(t[i+1],i+1);if(!o)return null;n.push([r,o])}const i=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return i?new de(n,i):null}outputDefined(){return this.result.outputDefined()}}class pe{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const n=t[1];return e.scope.has(n)?new pe(n,e.scope.get(n)):e.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class fe{constructor(t,e,n){this.type=t,this.index=e,this.input=n}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,lt),i=e.parse(t[2],2,Ct(e.expectedType||dt));return n&&i?new fe(i.type.itemType,n,i):null}evaluate(t){const e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new se(`Array index out of bounds: ${e} < 0.`);if(e>=n.length)throw new se(`Array index out of bounds: ${e} > ${n.length-1}.`);if(e!==Math.floor(e))throw new se(`Array index must be an integer, but found ${e} instead.`);return n[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class me{constructor(t,e){this.type=ut,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,dt),i=e.parse(t[2],2,dt);return n&&i?Bt(n.type,[ut,ct,lt,At,dt])?new me(n,i):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${Et(n.type)} instead`):null}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!n)return!1;if(!wt(e,["boolean","string","number","null"]))throw new se(`Expected first argument to be of type boolean, string, number or null, but found ${Et(ie(e))} instead.`);if(!wt(n,["string","array"]))throw new se(`Expected second argument to be of type array or string, but found ${Et(ie(n))} instead.`);return n.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class Ie{constructor(t,e,n){this.type=lt,this.needle=t,this.haystack=e,this.fromIndex=n}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,dt),i=e.parse(t[2],2,dt);if(!n||!i)return null;if(!Bt(n.type,[ut,ct,lt,At,dt]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${Et(n.type)} instead`);if(4===t.length){const r=e.parse(t[3],3,lt);return r?new Ie(n,i,r):null}return new Ie(n,i)}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!wt(e,["boolean","string","number","null"]))throw new se(`Expected first argument to be of type boolean, string, number or null, but found ${Et(ie(e))} instead.`);let i;if(this.fromIndex&&(i=this.fromIndex.evaluate(t)),wt(n,["string"])){const t=n.indexOf(e,i);return-1===t?-1:[...n.slice(0,t)].length}if(wt(n,["array"]))return n.indexOf(e,i);throw new se(`Expected second argument to be of type array or string, but found ${Et(ie(n))} instead.`)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class ye{constructor(t,e,n,i,r,o){this.inputType=t,this.type=e,this.input=n,this.cases=i,this.outputs=r,this.otherwise=o}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return e.error("Expected an even number of arguments.");let n,i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);const r={},o=[];for(let s=2;s<t.length-1;s+=2){let a=t[s];const A=t[s+1];Array.isArray(a)||(a=[a]);const l=e.concat(s);if(0===a.length)return l.error("Expected at least one branch label.");for(const t of a){if("number"!=typeof t&&"string"!=typeof t)return l.error("Branch labels must be numbers or strings.");if("number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return l.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof t&&Math.floor(t)!==t)return l.error("Numeric branch labels must be integer values.");if(n){if(l.checkSubtype(n,ie(t)))return null}else n=ie(t);if(void 0!==r[String(t)])return l.error("Branch labels must be unique.");r[String(t)]=o.length}const c=e.parse(A,s,i);if(!c)return null;i=i||c.type,o.push(c)}const s=e.parse(t[1],1,dt);if(!s)return null;const a=e.parse(t[t.length-1],t.length-1,i);return a?"value"!==s.type.kind&&e.concat(1).checkSubtype(n,s.type)?null:new ye(n,i,s,r,o,a):null}evaluate(t){const e=this.input.evaluate(t);return(ie(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}}class Ce{constructor(t,e,n){this.type=t,this.branches=e,this.otherwise=n}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);const i=[];for(let r=1;r<t.length-1;r+=2){const o=e.parse(t[r],r,ut);if(!o)return null;const s=e.parse(t[r+1],r+1,n);if(!s)return null;i.push([o,s]),n=n||s.type}const r=e.parse(t[t.length-1],t.length-1,n);if(!r)return null;if(!n)throw new Error("Can't infer output type");return new Ce(n,i,r)}evaluate(t){for(const[e,n]of this.branches)if(e.evaluate(t))return n.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,n]of this.branches)t(e),t(n);t(this.otherwise)}outputDefined(){return this.branches.every((([t,e])=>e.outputDefined()))&&this.otherwise.outputDefined()}}class Ee{constructor(t,e,n,i){this.type=t,this.input=e,this.beginIndex=n,this.endIndex=i}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,dt),i=e.parse(t[2],2,lt);if(!n||!i)return null;if(!Bt(n.type,[Ct(dt),ct,dt]))return e.error(`Expected first argument to be of type array or string, but found ${Et(n.type)} instead`);if(4===t.length){const r=e.parse(t[3],3,lt);return r?new Ee(n.type,n,i,r):null}return new Ee(n.type,n,i)}evaluate(t){const e=this.input.evaluate(t),n=this.beginIndex.evaluate(t);let i;if(this.endIndex&&(i=this.endIndex.evaluate(t)),wt(e,["string"]))return[...e].slice(n,i).join("");if(wt(e,["array"]))return e.slice(n,i);throw new se(`Expected first argument to be of type array or string, but found ${Et(ie(e))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function _e(t,e){const n=t.length-1;let i,r,o=0,s=n,a=0;for(;o<=s;)if(a=Math.floor((o+s)/2),i=t[a],r=t[a+1],i<=e){if(a===n||e<r)return a;o=a+1}else{if(!(i>e))throw new se("Input is not a number.");s=a-1}return 0}class ve{constructor(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[t,e]of n)this.labels.push(t),this.outputs.push(e)}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const n=e.parse(t[1],1,lt);if(!n)return null;const i=[];let r=null;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(let n=1;n<t.length;n+=2){const o=1===n?-1/0:t[n],s=t[n+1],a=n,A=n+1;if("number"!=typeof o)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',a);if(i.length&&i[i.length-1][0]>=o)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',a);const l=e.parse(s,A,r);if(!l)return null;r=r||l.type,i.push([o,l])}return new ve(r,n,i)}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const i=this.input.evaluate(t);if(i<=e[0])return n[0].evaluate(t);const r=e.length;return i>=e[r-1]?n[r-1].evaluate(t):n[_e(e,i)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}}function Be(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var we=be;function be(t,e,n,i){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(i-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=n,this.p2y=i}be.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(void 0===e&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var n=t,i=0;i<8;i++){var r=this.sampleCurveX(n)-t;if(Math.abs(r)<e)return n;var o=this.sampleCurveDerivativeX(n);if(Math.abs(o)<1e-6)break;n-=r/o}var s=0,a=1;for(n=t,i=0;i<20&&(r=this.sampleCurveX(n),!(Math.abs(r-t)<e));i++)t>r?s=n:a=n,n=.5*(a-s)+s;return n},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}};var Qe=Be(we);function xe(t,e,n){return t+n*(e-t)}function De(t,e,n){return t.map(((t,i)=>xe(t,e[i],n)))}const Se={number:xe,color:function(t,e,n,i="rgb"){switch(i){case"rgb":{const[i,r,o,s]=De(t.rgb,e.rgb,n);return new qt(i,r,o,s,!1)}case"hcl":{const[i,r,o,s]=t.hcl,[a,A,l,c]=e.hcl;let u,h;if(isNaN(i)||isNaN(a))isNaN(i)?isNaN(a)?u=NaN:(u=a,1!==o&&0!==o||(h=A)):(u=i,1!==l&&0!==l||(h=r));else{let t=a-i;a>i&&t>180?t-=360:a<i&&i-a>180&&(t+=360),u=i+n*t}const[g,d,p,f]=function([t,e,n,i]){return t=isNaN(t)?0:t*Rt,Ot([n,Math.cos(t)*e,Math.sin(t)*e,i])}([u,null!=h?h:xe(r,A,n),xe(o,l,n),xe(s,c,n)]);return new qt(g,d,p,f,!1)}case"lab":{const[i,r,o,s]=Ot(De(t.lab,e.lab,n));return new qt(i,r,o,s,!1)}}},array:De,padding:function(t,e,n){return new Zt(De(t.values,e.values,n))},variableAnchorOffsetCollection:function(t,e,n){const i=t.values,r=e.values;if(i.length!==r.length)throw new se(`Cannot interpolate values of different length. from: ${t.toString()}, to: ${e.toString()}`);const o=[];for(let t=0;t<i.length;t+=2){if(i[t]!==r[t])throw new se(`Cannot interpolate values containing mismatched anchors. from[${t}]: ${i[t]}, to[${t}]: ${r[t]}`);o.push(i[t]);const[e,s]=i[t+1],[a,A]=r[t+1];o.push([xe(e,a,n),xe(s,A,n)])}return new $t(o)}};class Me{constructor(t,e,n,i,r){this.type=t,this.operator=e,this.interpolation=n,this.input=i,this.labels=[],this.outputs=[];for(const[t,e]of r)this.labels.push(t),this.outputs.push(e)}static interpolationFactor(t,e,n,i){let r=0;if("exponential"===t.name)r=ke(e,t.base,n,i);else if("linear"===t.name)r=ke(e,1,n,i);else if("cubic-bezier"===t.name){const o=t.controlPoints;r=new Qe(o[0],o[1],o[2],o[3]).solve(ke(e,1,n,i))}return r}static parse(t,e){let[n,i,r,...o]=t;if(!Array.isArray(i)||0===i.length)return e.error("Expected an interpolation type expression.",1);if("linear"===i[0])i={name:"linear"};else if("exponential"===i[0]){const t=i[1];if("number"!=typeof t)return e.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:t}}else{if("cubic-bezier"!==i[0])return e.error(`Unknown interpolation type ${String(i[0])}`,1,0);{const t=i.slice(1);if(4!==t.length||t.some((t=>"number"!=typeof t||t<0||t>1)))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:t}}}if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(r=e.parse(r,2,lt),!r)return null;const s=[];let a=null;"interpolate-hcl"===n||"interpolate-lab"===n?a=ht:e.expectedType&&"value"!==e.expectedType.kind&&(a=e.expectedType);for(let t=0;t<o.length;t+=2){const n=o[t],i=o[t+1],r=t+3,A=t+4;if("number"!=typeof n)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',r);if(s.length&&s[s.length-1][0]>=n)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',r);const l=e.parse(i,A,a);if(!l)return null;a=a||l.type,s.push([n,l])}return bt(a,lt)||bt(a,ht)||bt(a,mt)||bt(a,yt)||bt(a,Ct(lt))?new Me(a,n,i,r,s):e.error(`Type ${Et(a)} is not interpolatable.`)}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const i=this.input.evaluate(t);if(i<=e[0])return n[0].evaluate(t);const r=e.length;if(i>=e[r-1])return n[r-1].evaluate(t);const o=_e(e,i),s=Me.interpolationFactor(this.interpolation,i,e[o],e[o+1]),a=n[o].evaluate(t),A=n[o+1].evaluate(t);switch(this.operator){case"interpolate":return Se[this.type.kind](a,A,s);case"interpolate-hcl":return Se.color(a,A,s,"hcl");case"interpolate-lab":return Se.color(a,A,s,"lab")}}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}}function ke(t,e,n,i){const r=i-n,o=t-n;return 0===r?0:1===e?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}class Re{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let n=null;const i=e.expectedType;i&&"value"!==i.kind&&(n=i);const r=[];for(const i of t.slice(1)){const t=e.parse(i,1+r.length,n,void 0,{typeAnnotation:"omit"});if(!t)return null;n=n||t.type,r.push(t)}if(!n)throw new Error("No output type");const o=i&&r.some((t=>vt(i,t.type)));return new Re(o?dt:n,r)}evaluate(t){let e,n=null,i=0;for(const r of this.args)if(i++,n=r.evaluate(t),n&&n instanceof te&&!n.available&&(e||(e=n.name),n=null,i===this.args.length&&(n=e)),null!==n)break;return n}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}function Ne(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function Pe(t,e,n,i){return 0===i.compare(e,n)}function Te(t,e,n){const i="=="!==t&&"!="!==t;return class r{constructor(t,e,n){this.type=ut,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");const n=t[0];let o=e.parse(t[1],1,dt);if(!o)return null;if(!Ne(n,o.type))return e.concat(1).error(`"${n}" comparisons are not supported for type '${Et(o.type)}'.`);let s=e.parse(t[2],2,dt);if(!s)return null;if(!Ne(n,s.type))return e.concat(2).error(`"${n}" comparisons are not supported for type '${Et(s.type)}'.`);if(o.type.kind!==s.type.kind&&"value"!==o.type.kind&&"value"!==s.type.kind)return e.error(`Cannot compare types '${Et(o.type)}' and '${Et(s.type)}'.`);i&&("value"===o.type.kind&&"value"!==s.type.kind?o=new Ae(s.type,[o]):"value"!==o.type.kind&&"value"===s.type.kind&&(s=new Ae(o.type,[s])));let a=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==s.type.kind&&"value"!==o.type.kind&&"value"!==s.type.kind)return e.error("Cannot use collator to compare non-string types.");if(a=e.parse(t[3],3,pt),!a)return null}return new r(o,s,a)}evaluate(r){const o=this.lhs.evaluate(r),s=this.rhs.evaluate(r);if(i&&this.hasUntypedArgument){const e=ie(o),n=ie(s);if(e.kind!==n.kind||"string"!==e.kind&&"number"!==e.kind)throw new se(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${e.kind}, ${n.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const t=ie(o),n=ie(s);if("string"!==t.kind||"string"!==n.kind)return e(r,o,s)}return this.collator?n(r,o,s,this.collator.evaluate(r)):e(r,o,s)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}outputDefined(){return!0}}}const Le=Te("==",(function(t,e,n){return e===n}),Pe),Fe=Te("!=",(function(t,e,n){return e!==n}),(function(t,e,n,i){return!Pe(0,e,n,i)})),Oe=Te("<",(function(t,e,n){return e<n}),(function(t,e,n,i){return i.compare(e,n)<0})),Ge=Te(">",(function(t,e,n){return e>n}),(function(t,e,n,i){return i.compare(e,n)>0})),Ue=Te("<=",(function(t,e,n){return e<=n}),(function(t,e,n,i){return i.compare(e,n)<=0})),je=Te(">=",(function(t,e,n){return e>=n}),(function(t,e,n,i){return i.compare(e,n)>=0}));class Ye{constructor(t,e,n){this.type=pt,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");const i=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,ut);if(!i)return null;const r=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,ut);if(!r)return null;let o=null;return n.locale&&(o=e.parse(n.locale,1,ct),!o)?null:new Ye(i,r,o)}evaluate(t){return new Ht(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class Ke{constructor(t,e,n,i,r){this.type=ct,this.number=t,this.locale=e,this.currency=n,this.minFractionDigits=i,this.maxFractionDigits=r}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,lt);if(!n)return null;const i=t[2];if("object"!=typeof i||Array.isArray(i))return e.error("NumberFormat options argument must be an object.");let r=null;if(i.locale&&(r=e.parse(i.locale,1,ct),!r))return null;let o=null;if(i.currency&&(o=e.parse(i.currency,1,ct),!o))return null;let s=null;if(i["min-fraction-digits"]&&(s=e.parse(i["min-fraction-digits"],1,lt),!s))return null;let a=null;return i["max-fraction-digits"]&&(a=e.parse(i["max-fraction-digits"],1,lt),!a)?null:new Ke(n,r,o,s,a)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class ze{constructor(t){this.type=ft,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[1];if(!Array.isArray(n)&&"object"==typeof n)return e.error("First argument must be an image or text section.");const i=[];let r=!1;for(let n=1;n<=t.length-1;++n){const o=t[n];if(r&&"object"==typeof o&&!Array.isArray(o)){r=!1;let t=null;if(o["font-scale"]&&(t=e.parse(o["font-scale"],1,lt),!t))return null;let n=null;if(o["text-font"]&&(n=e.parse(o["text-font"],1,Ct(ct)),!n))return null;let s=null;if(o["text-color"]&&(s=e.parse(o["text-color"],1,ht),!s))return null;const a=i[i.length-1];a.scale=t,a.font=n,a.textColor=s}else{const o=e.parse(t[n],1,dt);if(!o)return null;const s=o.type.kind;if("string"!==s&&"value"!==s&&"null"!==s&&"resolvedImage"!==s)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");r=!0,i.push({content:o,scale:null,font:null,textColor:null})}}return new ze(i)}evaluate(t){return new Wt(this.sections.map((e=>{const n=e.content.evaluate(t);return ie(n)===It?new Vt("",n,null,null,null):new Vt(re(n),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}}class Je{constructor(t){this.type=It,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,ct);return n?new Je(n):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),n=te.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n}eachChild(t){t(this.input)}outputDefined(){return!1}}class qe{constructor(t){this.type=lt,this.input=t}static parse(t,e){if(2!==t.length)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error(`Expected argument of type string or array, but found ${Et(n.type)} instead.`):new qe(n):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return[...e].length;if(Array.isArray(e))return e.length;throw new se(`Expected value to be of type string or array, but found ${Et(ie(e))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const He=8192;function Ve(t,e){const n=(180+t[0])/360,i=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,r=Math.pow(2,e.z);return[Math.round(n*r*He),Math.round(i*r*He)]}function We(t,e){const n=Math.pow(2,e.z);return[(r=(t[0]/He+e.x)/n,360*r-180),(i=(t[1]/He+e.y)/n,360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90)];var i,r}function Ze(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function Xe(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function $e(t,e,n){const i=t[0]-e[0],r=t[1]-e[1],o=t[0]-n[0],s=t[1]-n[1];return i*s-o*r==0&&i*o<=0&&r*s<=0}function tn(t,e,n,i){return 0!=(r=[i[0]-n[0],i[1]-n[1]])[0]*(o=[e[0]-t[0],e[1]-t[1]])[1]-r[1]*o[0]&&!(!an(t,e,n,i)||!an(n,i,t,e));var r,o}function en(t,e,n){for(const i of n)for(let n=0;n<i.length-1;++n)if(tn(t,e,i[n],i[n+1]))return!0;return!1}function nn(t,e,n=!1){let i=!1;for(const a of e)for(let e=0;e<a.length-1;e++){if($e(t,a[e],a[e+1]))return n;(o=a[e])[1]>(r=t)[1]!=(s=a[e+1])[1]>r[1]&&r[0]<(s[0]-o[0])*(r[1]-o[1])/(s[1]-o[1])+o[0]&&(i=!i)}var r,o,s;return i}function rn(t,e){for(const n of e)if(nn(t,n))return!0;return!1}function on(t,e){for(const n of t)if(!nn(n,e))return!1;for(let n=0;n<t.length-1;++n)if(en(t[n],t[n+1],e))return!1;return!0}function sn(t,e){for(const n of e)if(on(t,n))return!0;return!1}function an(t,e,n,i){const r=i[0]-n[0],o=i[1]-n[1],s=(t[0]-n[0])*o-r*(t[1]-n[1]),a=(e[0]-n[0])*o-r*(e[1]-n[1]);return s>0&&a<0||s<0&&a>0}function An(t,e,n){const i=[];for(let r=0;r<t.length;r++){const o=[];for(let i=0;i<t[r].length;i++){const s=Ve(t[r][i],n);Ze(e,s),o.push(s)}i.push(o)}return i}function ln(t,e,n){const i=[];for(let r=0;r<t.length;r++){const o=An(t[r],e,n);i.push(o)}return i}function cn(t,e,n,i){if(t[0]<n[0]||t[0]>n[2]){const e=.5*i;let r=t[0]-n[0]>e?-i:n[0]-t[0]>e?i:0;0===r&&(r=t[0]-n[2]>e?-i:n[2]-t[0]>e?i:0),t[0]+=r}Ze(e,t)}function un(t,e,n,i){const r=Math.pow(2,i.z)*He,o=[i.x*He,i.y*He],s=[];for(const i of t)for(const t of i){const i=[t.x+o[0],t.y+o[1]];cn(i,e,n,r),s.push(i)}return s}function hn(t,e,n,i){const r=Math.pow(2,i.z)*He,o=[i.x*He,i.y*He],s=[];for(const n of t){const t=[];for(const i of n){const n=[i.x+o[0],i.y+o[1]];Ze(e,n),t.push(n)}s.push(t)}if(e[2]-e[0]<=r/2){(a=e)[0]=a[1]=1/0,a[2]=a[3]=-1/0;for(const t of s)for(const i of t)cn(i,e,n,r)}var a;return s}class gn{constructor(t,e){this.type=ut,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(ne(t[1])){const e=t[1];if("FeatureCollection"===e.type){const t=[];for(const n of e.features){const{type:e,coordinates:i}=n.geometry;"Polygon"===e&&t.push(i),"MultiPolygon"===e&&t.push(...i)}if(t.length)return new gn(e,{type:"MultiPolygon",coordinates:t})}else if("Feature"===e.type){const t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new gn(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new gn(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=t.canonicalID();if("Polygon"===e.type){const o=An(e.coordinates,i,r),s=un(t.geometry(),n,i,r);if(!Xe(n,i))return!1;for(const t of s)if(!nn(t,o))return!1}if("MultiPolygon"===e.type){const o=ln(e.coordinates,i,r),s=un(t.geometry(),n,i,r);if(!Xe(n,i))return!1;for(const t of s)if(!rn(t,o))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=t.canonicalID();if("Polygon"===e.type){const o=An(e.coordinates,i,r),s=hn(t.geometry(),n,i,r);if(!Xe(n,i))return!1;for(const t of s)if(!on(t,o))return!1}if("MultiPolygon"===e.type){const o=ln(e.coordinates,i,r),s=hn(t.geometry(),n,i,r);if(!Xe(n,i))return!1;for(const t of s)if(!sn(t,o))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let dn=class{constructor(t=[],e=(t,e)=>t<e?-1:t>e?1:0){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let t=(this.length>>1)-1;t>=0;t--)this._down(t)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return--this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:n}=this,i=e[t];for(;t>0;){const r=t-1>>1,o=e[r];if(n(i,o)>=0)break;e[t]=o,t=r}e[t]=i}_down(t){const{data:e,compare:n}=this,i=this.length>>1,r=e[t];for(;t<i;){let i=1+(t<<1);const o=i+1;if(o<this.length&&n(e[o],e[i])<0&&(i=o),n(e[i],r)>=0)break;e[t]=e[i],t=i}e[t]=r}};function pn(t,e,n,i,r){fn(t,e,n,i||t.length-1,r||In)}function fn(t,e,n,i,r){for(;i>n;){if(i-n>600){var o=i-n+1,s=e-n+1,a=Math.log(o),A=.5*Math.exp(2*a/3),l=.5*Math.sqrt(a*A*(o-A)/o)*(s-o/2<0?-1:1);fn(t,e,Math.max(n,Math.floor(e-s*A/o+l)),Math.min(i,Math.floor(e+(o-s)*A/o+l)),r)}var c=t[e],u=n,h=i;for(mn(t,n,e),r(t[i],c)>0&&mn(t,n,i);u<h;){for(mn(t,u,h),u++,h--;r(t[u],c)<0;)u++;for(;r(t[h],c)>0;)h--}0===r(t[n],c)?mn(t,n,h):mn(t,++h,i),h<=e&&(n=h+1),e<=h&&(i=h-1)}}function mn(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function In(t,e){return t<e?-1:t>e?1:0}function yn(t,e){if(t.length<=1)return[t];const n=[];let i,r;for(const e of t){const t=En(e);0!==t&&(e.area=Math.abs(t),void 0===r&&(r=t<0),r===t<0?(i&&n.push(i),i=[e]):i.push(e))}if(i&&n.push(i),e>1)for(let t=0;t<n.length;t++)n[t].length<=e||(pn(n[t],e,1,n[t].length-1,Cn),n[t]=n[t].slice(0,e));return n}function Cn(t,e){return e.area-t.area}function En(t){let e=0;for(let n,i,r=0,o=t.length,s=o-1;r<o;s=r++)n=t[r],i=t[s],e+=(i.x-n.x)*(n.y+i.y);return e}const _n=1/298.257223563,vn=_n*(2-_n),Bn=Math.PI/180;class wn{constructor(t){const e=6378.137*Bn*1e3,n=Math.cos(t*Bn),i=1/(1-vn*(1-n*n)),r=Math.sqrt(i);this.kx=e*r*n,this.ky=e*r*i*(1-vn)}distance(t,e){const n=this.wrap(t[0]-e[0])*this.kx,i=(t[1]-e[1])*this.ky;return Math.sqrt(n*n+i*i)}pointOnLine(t,e){let n,i,r,o,s=1/0;for(let a=0;a<t.length-1;a++){let A=t[a][0],l=t[a][1],c=this.wrap(t[a+1][0]-A)*this.kx,u=(t[a+1][1]-l)*this.ky,h=0;0===c&&0===u||(h=(this.wrap(e[0]-A)*this.kx*c+(e[1]-l)*this.ky*u)/(c*c+u*u),h>1?(A=t[a+1][0],l=t[a+1][1]):h>0&&(A+=c/this.kx*h,l+=u/this.ky*h)),c=this.wrap(e[0]-A)*this.kx,u=(e[1]-l)*this.ky;const g=c*c+u*u;g<s&&(s=g,n=A,i=l,r=a,o=h)}return{point:[n,i],index:r,t:Math.max(0,Math.min(1,o))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}function bn(t,e){return e[0]-t[0]}function Qn(t){return t[1]-t[0]+1}function xn(t,e){return t[1]>=t[0]&&t[1]<e}function Dn(t,e){if(t[0]>t[1])return[null,null];const n=Qn(t);if(e){if(2===n)return[t,null];const e=Math.floor(n/2);return[[t[0],t[0]+e],[t[0]+e,t[1]]]}if(1===n)return[t,null];const i=Math.floor(n/2)-1;return[[t[0],t[0]+i],[t[0]+i+1,t[1]]]}function Sn(t,e){if(!xn(e,t.length))return[1/0,1/0,-1/0,-1/0];const n=[1/0,1/0,-1/0,-1/0];for(let i=e[0];i<=e[1];++i)Ze(n,t[i]);return n}function Mn(t){const e=[1/0,1/0,-1/0,-1/0];for(const n of t)for(const t of n)Ze(e,t);return e}function kn(t){return t[0]!==-1/0&&t[1]!==-1/0&&t[2]!==1/0&&t[3]!==1/0}function Rn(t,e,n){if(!kn(t)||!kn(e))return NaN;let i=0,r=0;return t[2]<e[0]&&(i=e[0]-t[2]),t[0]>e[2]&&(i=t[0]-e[2]),t[1]>e[3]&&(r=t[1]-e[3]),t[3]<e[1]&&(r=e[1]-t[3]),n.distance([0,0],[i,r])}function Nn(t,e,n){const i=n.pointOnLine(e,t);return n.distance(t,i.point)}function Pn(t,e,n,i,r){const o=Math.min(Nn(t,[n,i],r),Nn(e,[n,i],r)),s=Math.min(Nn(n,[t,e],r),Nn(i,[t,e],r));return Math.min(o,s)}function Tn(t,e,n,i,r){if(!xn(e,t.length)||!xn(i,n.length))return 1/0;let o=1/0;for(let s=e[0];s<e[1];++s){const e=t[s],a=t[s+1];for(let t=i[0];t<i[1];++t){const i=n[t],s=n[t+1];if(tn(e,a,i,s))return 0;o=Math.min(o,Pn(e,a,i,s,r))}}return o}function Ln(t,e,n,i,r){if(!xn(e,t.length)||!xn(i,n.length))return NaN;let o=1/0;for(let s=e[0];s<=e[1];++s)for(let e=i[0];e<=i[1];++e)if(o=Math.min(o,r.distance(t[s],n[e])),0===o)return o;return o}function Fn(t,e,n){if(nn(t,e,!0))return 0;let i=1/0;for(const r of e){const e=r[0],o=r[r.length-1];if(e!==o&&(i=Math.min(i,Nn(t,[o,e],n)),0===i))return i;const s=n.pointOnLine(r,t);if(i=Math.min(i,n.distance(t,s.point)),0===i)return i}return i}function On(t,e,n,i){if(!xn(e,t.length))return NaN;for(let i=e[0];i<=e[1];++i)if(nn(t[i],n,!0))return 0;let r=1/0;for(let o=e[0];o<e[1];++o){const e=t[o],s=t[o+1];for(const t of n)for(let n=0,o=t.length,a=o-1;n<o;a=n++){const o=t[a],A=t[n];if(tn(e,s,o,A))return 0;r=Math.min(r,Pn(e,s,o,A,i))}}return r}function Gn(t,e){for(const n of t)for(const t of n)if(nn(t,e,!0))return!0;return!1}function Un(t,e,n,i=1/0){const r=Mn(t),o=Mn(e);if(i!==1/0&&Rn(r,o,n)>=i)return i;if(Xe(r,o)){if(Gn(t,e))return 0}else if(Gn(e,t))return 0;let s=1/0;for(const i of t)for(let t=0,r=i.length,o=r-1;t<r;o=t++){const r=i[o],a=i[t];for(const t of e)for(let e=0,i=t.length,o=i-1;e<i;o=e++){const i=t[o],A=t[e];if(tn(r,a,i,A))return 0;s=Math.min(s,Pn(r,a,i,A,n))}}return s}function jn(t,e,n,i,r,o){if(!o)return;const s=Rn(Sn(i,o),r,n);s<e&&t.push([s,o,[0,0]])}function Yn(t,e,n,i,r,o,s){if(!o||!s)return;const a=Rn(Sn(i,o),Sn(r,s),n);a<e&&t.push([a,o,s])}function Kn(t,e,n,i,r=1/0){let o=Math.min(i.distance(t[0],n[0][0]),r);if(0===o)return o;const s=new dn([[0,[0,t.length-1],[0,0]]],bn),a=Mn(n);for(;s.length>0;){const r=s.pop();if(r[0]>=o)continue;const A=r[1],l=e?50:100;if(Qn(A)<=l){if(!xn(A,t.length))return NaN;if(e){const e=On(t,A,n,i);if(isNaN(e)||0===e)return e;o=Math.min(o,e)}else for(let e=A[0];e<=A[1];++e){const r=Fn(t[e],n,i);if(o=Math.min(o,r),0===o)return 0}}else{const n=Dn(A,e);jn(s,o,i,t,a,n[0]),jn(s,o,i,t,a,n[1])}}return o}function zn(t,e,n,i,r,o=1/0){let s=Math.min(o,r.distance(t[0],n[0]));if(0===s)return s;const a=new dn([[0,[0,t.length-1],[0,n.length-1]]],bn);for(;a.length>0;){const o=a.pop();if(o[0]>=s)continue;const A=o[1],l=o[2],c=e?50:100,u=i?50:100;if(Qn(A)<=c&&Qn(l)<=u){if(!xn(A,t.length)&&xn(l,n.length))return NaN;let o;if(e&&i)o=Tn(t,A,n,l,r),s=Math.min(s,o);else if(e&&!i){const e=t.slice(A[0],A[1]+1);for(let t=l[0];t<=l[1];++t)if(o=Nn(n[t],e,r),s=Math.min(s,o),0===s)return s}else if(!e&&i){const e=n.slice(l[0],l[1]+1);for(let n=A[0];n<=A[1];++n)if(o=Nn(t[n],e,r),s=Math.min(s,o),0===s)return s}else o=Ln(t,A,n,l,r),s=Math.min(s,o)}else{const o=Dn(A,e),c=Dn(l,i);Yn(a,s,r,t,n,o[0],c[0]),Yn(a,s,r,t,n,o[0],c[1]),Yn(a,s,r,t,n,o[1],c[0]),Yn(a,s,r,t,n,o[1],c[1])}}return s}function Jn(t){return"MultiPolygon"===t.type?t.coordinates.map((t=>({type:"Polygon",coordinates:t}))):"MultiLineString"===t.type?t.coordinates.map((t=>({type:"LineString",coordinates:t}))):"MultiPoint"===t.type?t.coordinates.map((t=>({type:"Point",coordinates:t}))):[t]}class qn{constructor(t,e){this.type=lt,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(ne(t[1])){const e=t[1];if("FeatureCollection"===e.type)return new qn(e,e.features.map((t=>Jn(t.geometry))).flat());if("Feature"===e.type)return new qn(e,Jn(e.geometry));if("type"in e&&"coordinates"in e)return new qn(e,Jn(e))}return e.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const n=t.geometry(),i=n.flat().map((e=>We([e.x,e.y],t.canonical)));if(0===n.length)return NaN;const r=new wn(i[0][1]);let o=1/0;for(const t of e){switch(t.type){case"Point":o=Math.min(o,zn(i,!1,[t.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,zn(i,!1,t.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,Kn(i,!1,t.coordinates,r,o))}if(0===o)return o}return o}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const n=t.geometry(),i=n.flat().map((e=>We([e.x,e.y],t.canonical)));if(0===n.length)return NaN;const r=new wn(i[0][1]);let o=1/0;for(const t of e){switch(t.type){case"Point":o=Math.min(o,zn(i,!0,[t.coordinates],!1,r,o));break;case"LineString":o=Math.min(o,zn(i,!0,t.coordinates,!0,r,o));break;case"Polygon":o=Math.min(o,Kn(i,!0,t.coordinates,r,o))}if(0===o)return o}return o}(t,this.geometries);if("Polygon"===t.geometryType())return function(t,e){const n=t.geometry();if(0===n.length||0===n[0].length)return NaN;const i=yn(n,0).map((e=>e.map((e=>e.map((e=>We([e.x,e.y],t.canonical))))))),r=new wn(i[0][0][0][1]);let o=1/0;for(const t of e)for(const e of i){switch(t.type){case"Point":o=Math.min(o,Kn([t.coordinates],!1,e,r,o));break;case"LineString":o=Math.min(o,Kn(t.coordinates,!0,e,r,o));break;case"Polygon":o=Math.min(o,Un(e,t.coordinates,r,o))}if(0===o)return o}return o}(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Hn={"==":Le,"!=":Fe,">":Ge,"<":Oe,">=":je,"<=":Ue,array:Ae,at:fe,boolean:Ae,case:Ce,coalesce:Re,collator:Ye,format:ze,image:Je,in:me,"index-of":Ie,interpolate:Me,"interpolate-hcl":Me,"interpolate-lab":Me,length:qe,let:de,literal:oe,match:ye,number:Ae,"number-format":Ke,object:Ae,slice:Ee,step:ve,string:Ae,"to-boolean":ce,"to-color":ce,"to-number":ce,"to-string":ce,var:pe,within:gn,distance:qn};class Vn{constructor(t,e,n,i){this.name=t,this.type=e,this._evaluate=n,this.args=i}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,e){const n=t[0],i=Vn.definitions[n];if(!i)return e.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const r=Array.isArray(i)?i[0]:i.type,o=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,s=o.filter((([e])=>!Array.isArray(e)||e.length===t.length-1));let a=null;for(const[i,o]of s){a=new ge(e.registry,ti,e.path,null,e.scope);const s=[];let A=!1;for(let e=1;e<t.length;e++){const n=t[e],r=Array.isArray(i)?i[e-1]:i.type,o=a.parse(n,1+s.length,r);if(!o){A=!0;break}s.push(o)}if(!A)if(Array.isArray(i)&&i.length!==s.length)a.error(`Expected ${i.length} arguments, but found ${s.length} instead.`);else{for(let t=0;t<s.length;t++){const e=Array.isArray(i)?i[t]:i.type,n=s[t];a.concat(t+1).checkSubtype(e,n.type)}if(0===a.errors.length)return new Vn(n,r,o,s)}}if(1===s.length)e.errors.push(...a.errors);else{const n=(s.length?s:o).map((([t])=>{return e=t,Array.isArray(e)?`(${e.map(Et).join(", ")})`:`(${Et(e.type)}...)`;var e})).join(" | "),i=[];for(let n=1;n<t.length;n++){const r=e.parse(t[n],1+i.length);if(!r)return null;i.push(Et(r.type))}e.error(`Expected arguments of type ${n}, but found (${i.join(", ")}) instead.`)}return null}static register(t,e){Vn.definitions=e;for(const n in e)t[n]=Vn}}function Wn(t,[e,n,i,r]){e=e.evaluate(t),n=n.evaluate(t),i=i.evaluate(t);const o=r?r.evaluate(t):1,s=ee(e,n,i,o);if(s)throw new se(s);return new qt(e/255,n/255,i/255,o,!1)}function Zn(t,e){return t in e}function Xn(t,e){const n=e[t];return void 0===n?null:n}function $n(t){return{type:t}}function ti(t){if(t instanceof pe)return ti(t.boundExpression);if(t instanceof Vn&&"error"===t.name)return!1;if(t instanceof Ye)return!1;if(t instanceof gn)return!1;if(t instanceof qn)return!1;const e=t instanceof ce||t instanceof Ae;let n=!0;return t.eachChild((t=>{n=e?n&&ti(t):n&&t instanceof oe})),!!n&&ei(t)&&ii(t,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function ei(t){if(t instanceof Vn){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof gn)return!1;if(t instanceof qn)return!1;let e=!0;return t.eachChild((t=>{e&&!ei(t)&&(e=!1)})),e}function ni(t){if(t instanceof Vn&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild((t=>{e&&!ni(t)&&(e=!1)})),e}function ii(t,e){if(t instanceof Vn&&e.indexOf(t.name)>=0)return!1;let n=!0;return t.eachChild((t=>{n&&!ii(t,e)&&(n=!1)})),n}function ri(t){return{result:"success",value:t}}function oi(t){return{result:"error",value:t}}function si(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function ai(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Ai(t){return!!t.expression&&t.expression.interpolated}function li(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function ci(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function ui(t){return t}function hi(t,e){const n="color"===e.type,i=t.stops&&"object"==typeof t.stops[0][0],r=i||!(i||void 0!==t.property),o=t.type||(Ai(e)?"exponential":"interval");if(n||"padding"===e.type){const i=n?qt.parse:Zt.parse;(t=ot({},t)).stops&&(t.stops=t.stops.map((t=>[t[0],i(t[1])]))),t.default=i(t.default?t.default:e.default)}if(t.colorSpace&&"rgb"!==(s=t.colorSpace)&&"hcl"!==s&&"lab"!==s)throw new Error(`Unknown color space: "${t.colorSpace}"`);var s;let a,A,l;if("exponential"===o)a=fi;else if("interval"===o)a=pi;else if("categorical"===o){a=di,A=Object.create(null);for(const e of t.stops)A[e[0]]=e[1];l=typeof t.stops[0][0]}else{if("identity"!==o)throw new Error(`Unknown function type "${o}"`);a=mi}if(i){const n={},i=[];for(let e=0;e<t.stops.length;e++){const r=t.stops[e],o=r[0].zoom;void 0===n[o]&&(n[o]={zoom:o,type:t.type,property:t.property,default:t.default,stops:[]},i.push(o)),n[o].stops.push([r[0].value,r[1]])}const r=[];for(const t of i)r.push([n[t].zoom,hi(n[t],e)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:Me.interpolationFactor.bind(void 0,o),zoomStops:r.map((t=>t[0])),evaluate:({zoom:n},i)=>fi({stops:r,base:t.base},e,n).evaluate(n,i)}}if(r){const n="exponential"===o?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:n,interpolationFactor:Me.interpolationFactor.bind(void 0,n),zoomStops:t.stops.map((t=>t[0])),evaluate:({zoom:n})=>a(t,e,n,A,l)}}return{kind:"source",evaluate(n,i){const r=i&&i.properties?i.properties[t.property]:void 0;return void 0===r?gi(t.default,e.default):a(t,e,r,A,l)}}}function gi(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function di(t,e,n,i,r){return gi(typeof n===r?i[n]:void 0,t.default,e.default)}function pi(t,e,n){if("number"!==li(n))return gi(t.default,e.default);const i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];const r=_e(t.stops.map((t=>t[0])),n);return t.stops[r][1]}function fi(t,e,n){const i=void 0!==t.base?t.base:1;if("number"!==li(n))return gi(t.default,e.default);const r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];const o=_e(t.stops.map((t=>t[0])),n),s=function(t,e,n,i){const r=i-n,o=t-n;return 0===r?0:1===e?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}(n,i,t.stops[o][0],t.stops[o+1][0]),a=t.stops[o][1],A=t.stops[o+1][1],l=Se[e.type]||ui;return"function"==typeof a.evaluate?{evaluate(...e){const n=a.evaluate.apply(void 0,e),i=A.evaluate.apply(void 0,e);if(void 0!==n&&void 0!==i)return l(n,i,s,t.colorSpace)}}:l(a,A,s,t.colorSpace)}function mi(t,e,n){switch(e.type){case"color":n=qt.parse(n);break;case"formatted":n=Wt.fromString(n.toString());break;case"resolvedImage":n=te.fromString(n.toString());break;case"padding":n=Zt.parse(n);break;default:li(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0)}return gi(n,t.default,e.default)}Vn.register(Hn,{error:[{kind:"error"},[ct],(t,[e])=>{throw new se(e.evaluate(t))}],typeof:[ct,[dt],(t,[e])=>Et(ie(e.evaluate(t)))],"to-rgba":[Ct(lt,4),[ht],(t,[e])=>{const[n,i,r,o]=e.evaluate(t).rgb;return[255*n,255*i,255*r,o]}],rgb:[ht,[lt,lt,lt],Wn],rgba:[ht,[lt,lt,lt,lt],Wn],has:{type:ut,overloads:[[[ct],(t,[e])=>Zn(e.evaluate(t),t.properties())],[[ct,gt],(t,[e,n])=>Zn(e.evaluate(t),n.evaluate(t))]]},get:{type:dt,overloads:[[[ct],(t,[e])=>Xn(e.evaluate(t),t.properties())],[[ct,gt],(t,[e,n])=>Xn(e.evaluate(t),n.evaluate(t))]]},"feature-state":[dt,[ct],(t,[e])=>Xn(e.evaluate(t),t.featureState||{})],properties:[gt,[],t=>t.properties()],"geometry-type":[ct,[],t=>t.geometryType()],id:[dt,[],t=>t.id()],zoom:[lt,[],t=>t.globals.zoom],"heatmap-density":[lt,[],t=>t.globals.heatmapDensity||0],"line-progress":[lt,[],t=>t.globals.lineProgress||0],accumulated:[dt,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[lt,$n(lt),(t,e)=>{let n=0;for(const i of e)n+=i.evaluate(t);return n}],"*":[lt,$n(lt),(t,e)=>{let n=1;for(const i of e)n*=i.evaluate(t);return n}],"-":{type:lt,overloads:[[[lt,lt],(t,[e,n])=>e.evaluate(t)-n.evaluate(t)],[[lt],(t,[e])=>-e.evaluate(t)]]},"/":[lt,[lt,lt],(t,[e,n])=>e.evaluate(t)/n.evaluate(t)],"%":[lt,[lt,lt],(t,[e,n])=>e.evaluate(t)%n.evaluate(t)],ln2:[lt,[],()=>Math.LN2],pi:[lt,[],()=>Math.PI],e:[lt,[],()=>Math.E],"^":[lt,[lt,lt],(t,[e,n])=>Math.pow(e.evaluate(t),n.evaluate(t))],sqrt:[lt,[lt],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[lt,[lt],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[lt,[lt],(t,[e])=>Math.log(e.evaluate(t))],log2:[lt,[lt],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[lt,[lt],(t,[e])=>Math.sin(e.evaluate(t))],cos:[lt,[lt],(t,[e])=>Math.cos(e.evaluate(t))],tan:[lt,[lt],(t,[e])=>Math.tan(e.evaluate(t))],asin:[lt,[lt],(t,[e])=>Math.asin(e.evaluate(t))],acos:[lt,[lt],(t,[e])=>Math.acos(e.evaluate(t))],atan:[lt,[lt],(t,[e])=>Math.atan(e.evaluate(t))],min:[lt,$n(lt),(t,e)=>Math.min(...e.map((e=>e.evaluate(t))))],max:[lt,$n(lt),(t,e)=>Math.max(...e.map((e=>e.evaluate(t))))],abs:[lt,[lt],(t,[e])=>Math.abs(e.evaluate(t))],round:[lt,[lt],(t,[e])=>{const n=e.evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[lt,[lt],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[lt,[lt],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[ut,[ct,dt],(t,[e,n])=>t.properties()[e.value]===n.value],"filter-id-==":[ut,[dt],(t,[e])=>t.id()===e.value],"filter-type-==":[ut,[ct],(t,[e])=>t.geometryType()===e.value],"filter-<":[ut,[ct,dt],(t,[e,n])=>{const i=t.properties()[e.value],r=n.value;return typeof i==typeof r&&i<r}],"filter-id-<":[ut,[dt],(t,[e])=>{const n=t.id(),i=e.value;return typeof n==typeof i&&n<i}],"filter->":[ut,[ct,dt],(t,[e,n])=>{const i=t.properties()[e.value],r=n.value;return typeof i==typeof r&&i>r}],"filter-id->":[ut,[dt],(t,[e])=>{const n=t.id(),i=e.value;return typeof n==typeof i&&n>i}],"filter-<=":[ut,[ct,dt],(t,[e,n])=>{const i=t.properties()[e.value],r=n.value;return typeof i==typeof r&&i<=r}],"filter-id-<=":[ut,[dt],(t,[e])=>{const n=t.id(),i=e.value;return typeof n==typeof i&&n<=i}],"filter->=":[ut,[ct,dt],(t,[e,n])=>{const i=t.properties()[e.value],r=n.value;return typeof i==typeof r&&i>=r}],"filter-id->=":[ut,[dt],(t,[e])=>{const n=t.id(),i=e.value;return typeof n==typeof i&&n>=i}],"filter-has":[ut,[dt],(t,[e])=>e.value in t.properties()],"filter-has-id":[ut,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[ut,[Ct(ct)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[ut,[Ct(dt)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[ut,[ct,Ct(dt)],(t,[e,n])=>n.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[ut,[ct,Ct(dt)],(t,[e,n])=>function(t,e,n,i){for(;n<=i;){const r=n+i>>1;if(e[r]===t)return!0;e[r]>t?i=r-1:n=r+1}return!1}(t.properties()[e.value],n.value,0,n.value.length-1)],all:{type:ut,overloads:[[[ut,ut],(t,[e,n])=>e.evaluate(t)&&n.evaluate(t)],[$n(ut),(t,e)=>{for(const n of e)if(!n.evaluate(t))return!1;return!0}]]},any:{type:ut,overloads:[[[ut,ut],(t,[e,n])=>e.evaluate(t)||n.evaluate(t)],[$n(ut),(t,e)=>{for(const n of e)if(n.evaluate(t))return!0;return!1}]]},"!":[ut,[ut],(t,[e])=>!e.evaluate(t)],"is-supported-script":[ut,[ct],(t,[e])=>{const n=t.globals&&t.globals.isSupportedScript;return!n||n(e.evaluate(t))}],upcase:[ct,[ct],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[ct,[ct],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[ct,$n(dt),(t,e)=>e.map((e=>re(e.evaluate(t)))).join("")],"resolved-locale":[ct,[pt],(t,[e])=>e.evaluate(t).resolvedLocale()]});class Ii{constructor(t,e){var n;this.expression=t,this._warningHistory={},this._evaluator=new he,this._defaultValue=e?"color"===(n=e).type&&ci(n.default)?new qt(0,0,0,0):"color"===n.type?qt.parse(n.default)||null:"padding"===n.type?Zt.parse(n.default)||null:"variableAnchorOffsetCollection"===n.type?$t.parse(n.default)||null:void 0===n.default?null:n.default:null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,n,i,r,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=i,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}evaluate(t,e,n,i,r,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=i,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=o||null;try{const t=this.expression.evaluate(this._evaluator);if(null==t||"number"==typeof t&&t!=t)return this._defaultValue;if(this._enumValues&&!(t in this._enumValues))throw new se(`Expected value to be one of ${Object.keys(this._enumValues).map((t=>JSON.stringify(t))).join(", ")}, but found ${JSON.stringify(t)} instead.`);return t}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}function yi(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Hn}function Ci(t,e){const n=new ge(Hn,ti,[],e?function(t){const e={color:ht,string:ct,number:lt,enum:ct,boolean:ut,formatted:ft,padding:mt,resolvedImage:It,variableAnchorOffsetCollection:yt};return"array"===t.type?Ct(e[t.value]||dt,t.length):e[t.type]}(e):void 0),i=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return i?ri(new Ii(i,e)):oi(n.errors)}class Ei{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!ni(e.expression)}evaluateWithoutErrorHandling(t,e,n,i,r,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,i,r,o)}evaluate(t,e,n,i,r,o){return this._styleExpression.evaluate(t,e,n,i,r,o)}}class _i{constructor(t,e,n,i){this.kind=t,this.zoomStops=n,this._styleExpression=e,this.isStateDependent="camera"!==t&&!ni(e.expression),this.interpolationType=i}evaluateWithoutErrorHandling(t,e,n,i,r,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,i,r,o)}evaluate(t,e,n,i,r,o){return this._styleExpression.evaluate(t,e,n,i,r,o)}interpolationFactor(t,e,n){return this.interpolationType?Me.interpolationFactor(this.interpolationType,t,e,n):0}}function vi(t,e){const n=Ci(t,e);if("error"===n.result)return n;const i=n.value.expression,r=ei(i);if(!r&&!si(e))return oi([new st("","data expressions not supported")]);const o=ii(i,["zoom"]);if(!o&&!ai(e))return oi([new st("","zoom expressions not supported")]);const s=wi(i);return s||o?s instanceof st?oi([s]):s instanceof Me&&!Ai(e)?oi([new st("",'"interpolate" expressions cannot be used with this property')]):ri(s?new _i(r?"camera":"composite",n.value,s.labels,s instanceof Me?s.interpolation:void 0):new Ei(r?"constant":"source",n.value)):oi([new st("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Bi{constructor(t,e){this._parameters=t,this._specification=e,ot(this,hi(this._parameters,this._specification))}static deserialize(t){return new Bi(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function wi(t){let e=null;if(t instanceof de)e=wi(t.result);else if(t instanceof Re){for(const n of t.args)if(e=wi(n),e)break}else(t instanceof ve||t instanceof Me)&&t.input instanceof Vn&&"zoom"===t.input.name&&(e=t);return e instanceof st||t.eachChild((t=>{const n=wi(t);n instanceof st?e=n:!e&&n?e=new st("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&n&&e!==n&&(e=new st("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}function bi(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!bi(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}const Qi={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function xi(t){if(null==t)return{filter:()=>!0,needGeometry:!1};bi(t)||(t=Mi(t));const e=Ci(t,Qi);if("error"===e.result)throw new Error(e.value.map((t=>`${t.key}: ${t.message}`)).join(", "));return{filter:(t,n,i)=>e.value.evaluate(t,n,{},i),needGeometry:Si(t)}}function Di(t,e){return t<e?-1:t>e?1:0}function Si(t){if(!Array.isArray(t))return!1;if("within"===t[0]||"distance"===t[0])return!0;for(let e=1;e<t.length;e++)if(Si(t[e]))return!0;return!1}function Mi(t){if(!t)return!0;const e=t[0];return t.length<=1?"any"!==e:"=="===e?ki(t[1],t[2],"=="):"!="===e?Pi(ki(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?ki(t[1],t[2],e):"any"===e?(n=t.slice(1),["any"].concat(n.map(Mi))):"all"===e?["all"].concat(t.slice(1).map(Mi)):"none"===e?["all"].concat(t.slice(1).map(Mi).map(Pi)):"in"===e?Ri(t[1],t.slice(2)):"!in"===e?Pi(Ri(t[1],t.slice(2))):"has"===e?Ni(t[1]):"!has"!==e||Pi(Ni(t[1]));var n}function ki(t,e,n){switch(t){case"$type":return[`filter-type-${n}`,e];case"$id":return[`filter-id-${n}`,e];default:return[`filter-${n}`,t,e]}}function Ri(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((t=>typeof t!=typeof e[0]))?["filter-in-large",t,["literal",e.sort(Di)]]:["filter-in-small",t,["literal",e]]}}function Ni(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Pi(t){return["!",t]}function Ti(t){const e=typeof t;if("number"===e||"boolean"===e||"string"===e||null==t)return JSON.stringify(t);if(Array.isArray(t)){let e="[";for(const n of t)e+=`${Ti(n)},`;return`${e}]`}const n=Object.keys(t).sort();let i="{";for(let e=0;e<n.length;e++)i+=`${JSON.stringify(n[e])}:${Ti(t[n[e]])},`;return`${i}}`}function Li(t){let e="";for(const n of q)e+=`/${Ti(t[n])}`;return e}function Fi(t){const e=t.value;return e?[new rt(t.key,e,"constants have been deprecated as of v8")]:[]}function Oi(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Gi(t){if(Array.isArray(t))return t.map(Gi);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const n in t)e[n]=Gi(t[n]);return e}return Oi(t)}function Ui(t){const e=t.key,n=t.value,i=t.valueSpec||{},r=t.objectElementValidators||{},o=t.style,s=t.styleSpec,a=t.validateSpec;let A=[];const l=li(n);if("object"!==l)return[new rt(e,n,`object expected, ${l} found`)];for(const t in n){const l=t.split(".")[0],c=i[l]||i["*"];let u;if(r[l])u=r[l];else if(i[l])u=a;else if(r["*"])u=r["*"];else{if(!i["*"]){A.push(new rt(e,n[t],`unknown property "${t}"`));continue}u=a}A=A.concat(u({key:(e?`${e}.`:e)+t,value:n[t],valueSpec:c,style:o,styleSpec:s,object:n,objectKey:t,validateSpec:a},n))}for(const t in i)r[t]||i[t].required&&void 0===i[t].default&&void 0===n[t]&&A.push(new rt(e,n,`missing required property "${t}"`));return A}function ji(t){const e=t.value,n=t.valueSpec,i=t.style,r=t.styleSpec,o=t.key,s=t.arrayElementValidator||t.validateSpec;if("array"!==li(e))return[new rt(o,e,`array expected, ${li(e)} found`)];if(n.length&&e.length!==n.length)return[new rt(o,e,`array length ${n.length} expected, length ${e.length} found`)];if(n["min-length"]&&e.length<n["min-length"])return[new rt(o,e,`array length at least ${n["min-length"]} expected, length ${e.length} found`)];let a={type:n.value,values:n.values};r.$version<7&&(a.function=n.function),"object"===li(n.value)&&(a=n.value);let A=[];for(let n=0;n<e.length;n++)A=A.concat(s({array:e,arrayIndex:n,value:e[n],valueSpec:a,validateSpec:t.validateSpec,style:i,styleSpec:r,key:`${o}[${n}]`}));return A}function Yi(t){const e=t.key,n=t.value,i=t.valueSpec;let r=li(n);return"number"===r&&n!=n&&(r="NaN"),"number"!==r?[new rt(e,n,`number expected, ${r} found`)]:"minimum"in i&&n<i.minimum?[new rt(e,n,`${n} is less than the minimum value ${i.minimum}`)]:"maximum"in i&&n>i.maximum?[new rt(e,n,`${n} is greater than the maximum value ${i.maximum}`)]:[]}function Ki(t){const e=t.valueSpec,n=Oi(t.value.type);let i,r,o,s={};const a="categorical"!==n&&void 0===t.value.property,A=!a,l="array"===li(t.value.stops)&&"array"===li(t.value.stops[0])&&"object"===li(t.value.stops[0][0]),c=Ui({key:t.key,value:t.value,valueSpec:t.styleSpec.function,validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===n)return[new rt(t.key,t.value,'identity function may not have a "stops" property')];let e=[];const i=t.value;return e=e.concat(ji({key:t.key,value:i,valueSpec:t.valueSpec,validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:u})),"array"===li(i)&&0===i.length&&e.push(new rt(t.key,i,"array must have at least one stop")),e},default:function(t){return t.validateSpec({key:t.key,value:t.value,valueSpec:e,validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===n&&a&&c.push(new rt(t.key,t.value,'missing required property "property"')),"identity"===n||t.value.stops||c.push(new rt(t.key,t.value,'missing required property "stops"')),"exponential"===n&&t.valueSpec.expression&&!Ai(t.valueSpec)&&c.push(new rt(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(A&&!si(t.valueSpec)?c.push(new rt(t.key,t.value,"property functions not supported")):a&&!ai(t.valueSpec)&&c.push(new rt(t.key,t.value,"zoom functions not supported"))),"categorical"!==n&&!l||void 0!==t.value.property||c.push(new rt(t.key,t.value,'"property" property is required')),c;function u(t){let n=[];const i=t.value,a=t.key;if("array"!==li(i))return[new rt(a,i,`array expected, ${li(i)} found`)];if(2!==i.length)return[new rt(a,i,`array length 2 expected, length ${i.length} found`)];if(l){if("object"!==li(i[0]))return[new rt(a,i,`object expected, ${li(i[0])} found`)];if(void 0===i[0].zoom)return[new rt(a,i,"object stop key must have zoom")];if(void 0===i[0].value)return[new rt(a,i,"object stop key must have value")];if(o&&o>Oi(i[0].zoom))return[new rt(a,i[0].zoom,"stop zoom values must appear in ascending order")];Oi(i[0].zoom)!==o&&(o=Oi(i[0].zoom),r=void 0,s={}),n=n.concat(Ui({key:`${a}[0]`,value:i[0],valueSpec:{zoom:{}},validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:Yi,value:h}}))}else n=n.concat(h({key:`${a}[0]`,value:i[0],valueSpec:{},validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec},i));return yi(Gi(i[1]))?n.concat([new rt(`${a}[1]`,i[1],"expressions are not allowed in function stops.")]):n.concat(t.validateSpec({key:`${a}[1]`,value:i[1],valueSpec:e,validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec}))}function h(t,o){const a=li(t.value),A=Oi(t.value),l=null!==t.value?t.value:o;if(i){if(a!==i)return[new rt(t.key,l,`${a} stop domain type must match previous stop domain type ${i}`)]}else i=a;if("number"!==a&&"string"!==a&&"boolean"!==a)return[new rt(t.key,l,"stop domain value must be a number, string, or boolean")];if("number"!==a&&"categorical"!==n){let i=`number expected, ${a} found`;return si(e)&&void 0===n&&(i+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new rt(t.key,l,i)]}return"categorical"!==n||"number"!==a||isFinite(A)&&Math.floor(A)===A?"categorical"!==n&&"number"===a&&void 0!==r&&A<r?[new rt(t.key,l,"stop domain values must appear in ascending order")]:(r=A,"categorical"===n&&A in s?[new rt(t.key,l,"stop domain values must be unique")]:(s[A]=!0,[])):[new rt(t.key,l,`integer expected, found ${A}`)]}}function zi(t){const e=("property"===t.expressionContext?vi:Ci)(Gi(t.value),t.valueSpec);if("error"===e.result)return e.value.map((e=>new rt(`${t.key}${e.key}`,t.value,e.message)));const n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!n.outputDefined())return[new rt(t.key,t.value,`Invalid data expression for "${t.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===t.expressionContext&&"layout"===t.propertyType&&!ni(n))return[new rt(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!ni(n))return[new rt(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!ii(n,["zoom","feature-state"]))return[new rt(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!ei(n))return[new rt(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ji(t){const e=t.key,n=t.value,i=t.valueSpec,r=[];return Array.isArray(i.values)?-1===i.values.indexOf(Oi(n))&&r.push(new rt(e,n,`expected one of [${i.values.join(", ")}], ${JSON.stringify(n)} found`)):-1===Object.keys(i.values).indexOf(Oi(n))&&r.push(new rt(e,n,`expected one of [${Object.keys(i.values).join(", ")}], ${JSON.stringify(n)} found`)),r}function qi(t){return bi(Gi(t.value))?zi(ot({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Hi(t)}function Hi(t){const e=t.value,n=t.key;if("array"!==li(e))return[new rt(n,e,`array expected, ${li(e)} found`)];const i=t.styleSpec;let r,o=[];if(e.length<1)return[new rt(n,e,"filter array must have at least 1 element")];switch(o=o.concat(Ji({key:`${n}[0]`,value:e[0],valueSpec:i.filter_operator,style:t.style,styleSpec:t.styleSpec})),Oi(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===Oi(e[1])&&o.push(new rt(n,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":3!==e.length&&o.push(new rt(n,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(r=li(e[1]),"string"!==r&&o.push(new rt(`${n}[1]`,e[1],`string expected, ${r} found`)));for(let s=2;s<e.length;s++)r=li(e[s]),"$type"===Oi(e[1])?o=o.concat(Ji({key:`${n}[${s}]`,value:e[s],valueSpec:i.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&o.push(new rt(`${n}[${s}]`,e[s],`string, number, or boolean expected, ${r} found`));break;case"any":case"all":case"none":for(let i=1;i<e.length;i++)o=o.concat(Hi({key:`${n}[${i}]`,value:e[i],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":r=li(e[1]),2!==e.length?o.push(new rt(n,e,`filter array for "${e[0]}" operator must have 2 elements`)):"string"!==r&&o.push(new rt(`${n}[1]`,e[1],`string expected, ${r} found`))}return o}function Vi(t,e){const n=t.key,i=t.validateSpec,r=t.style,o=t.styleSpec,s=t.value,a=t.objectKey,A=o[`${e}_${t.layerType}`];if(!A)return[];const l=a.match(/^(.*)-transition$/);if("paint"===e&&l&&A[l[1]]&&A[l[1]].transition)return i({key:n,value:s,valueSpec:o.transition,style:r,styleSpec:o});const c=t.valueSpec||A[a];if(!c)return[new rt(n,s,`unknown property "${a}"`)];let u;if("string"===li(s)&&si(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(s)))return[new rt(n,s,`"${a}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(u[1])} }\`.`)];const h=[];return"symbol"===t.layerType&&("text-field"===a&&r&&!r.glyphs&&h.push(new rt(n,s,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&ci(Gi(s))&&"identity"===Oi(s.type)&&h.push(new rt(n,s,'"text-font" does not support identity functions'))),h.concat(i({key:t.key,value:s,valueSpec:c,style:r,styleSpec:o,expressionContext:"property",propertyType:e,propertyKey:a}))}function Wi(t){return Vi(t,"paint")}function Zi(t){return Vi(t,"layout")}function Xi(t){let e=[];const n=t.value,i=t.key,r=t.style,o=t.styleSpec;n.type||n.ref||e.push(new rt(i,n,'either "type" or "ref" is required'));let s=Oi(n.type);const a=Oi(n.ref);if(n.id){const o=Oi(n.id);for(let s=0;s<t.arrayIndex;s++){const t=r.layers[s];Oi(t.id)===o&&e.push(new rt(i,n.id,`duplicate layer id "${n.id}", previously used at line ${t.id.__line__}`))}}if("ref"in n){let t;["type","source","source-layer","filter","layout"].forEach((t=>{t in n&&e.push(new rt(i,n[t],`"${t}" is prohibited for ref layers`))})),r.layers.forEach((e=>{Oi(e.id)===a&&(t=e)})),t?t.ref?e.push(new rt(i,n.ref,"ref cannot reference another ref layer")):s=Oi(t.type):e.push(new rt(i,n.ref,`ref layer "${a}" not found`))}else if("background"!==s)if(n.source){const t=r.sources&&r.sources[n.source],o=t&&Oi(t.type);t?"vector"===o&&"raster"===s?e.push(new rt(i,n.source,`layer "${n.id}" requires a raster source`)):"raster-dem"!==o&&"hillshade"===s?e.push(new rt(i,n.source,`layer "${n.id}" requires a raster-dem source`)):"raster"===o&&"raster"!==s?e.push(new rt(i,n.source,`layer "${n.id}" requires a vector source`)):"vector"!==o||n["source-layer"]?"raster-dem"===o&&"hillshade"!==s?e.push(new rt(i,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===o&&t.lineMetrics||e.push(new rt(i,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new rt(i,n,`layer "${n.id}" must specify a "source-layer"`)):e.push(new rt(i,n.source,`source "${n.source}" not found`))}else e.push(new rt(i,n,'missing required property "source"'));return e=e.concat(Ui({key:i,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,validateSpec:t.validateSpec,objectElementValidators:{"*":()=>[],type:()=>t.validateSpec({key:`${i}.type`,value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,validateSpec:t.validateSpec,object:n,objectKey:"type"}),filter:qi,layout:t=>Ui({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,validateSpec:t.validateSpec,objectElementValidators:{"*":t=>Zi(ot({layerType:s},t))}}),paint:t=>Ui({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,validateSpec:t.validateSpec,objectElementValidators:{"*":t=>Wi(ot({layerType:s},t))}})}})),e}function $i(t){const e=t.value,n=t.key,i=li(e);return"string"!==i?[new rt(n,e,`string expected, ${i} found`)]:[]}const tr={promoteId:function({key:t,value:e}){if("string"===li(e))return $i({key:t,value:e});{const n=[];for(const i in e)n.push(...$i({key:`${t}.${i}`,value:e[i]}));return n}}};function er(t){const e=t.value,n=t.key,i=t.styleSpec,r=t.style,o=t.validateSpec;if(!e.type)return[new rt(n,e,'"type" is required')];const s=Oi(e.type);let a;switch(s){case"vector":case"raster":return a=Ui({key:n,value:e,valueSpec:i[`source_${s.replace("-","_")}`],style:t.style,styleSpec:i,objectElementValidators:tr,validateSpec:o}),a;case"raster-dem":return a=function(t){var e;const n=null!==(e=t.sourceName)&&void 0!==e?e:"",i=t.value,r=t.styleSpec,o=r.source_raster_dem,s=t.style;let a=[];const A=li(i);if(void 0===i)return a;if("object"!==A)return a.push(new rt("source_raster_dem",i,`object expected, ${A} found`)),a;const l="custom"===Oi(i.encoding),c=["redFactor","greenFactor","blueFactor","baseShift"],u=t.value.encoding?`"${t.value.encoding}"`:"Default";for(const e in i)!l&&c.includes(e)?a.push(new rt(e,i[e],`In "${n}": "${e}" is only valid when "encoding" is set to "custom". ${u} encoding found`)):o[e]?a=a.concat(t.validateSpec({key:e,value:i[e],valueSpec:o[e],validateSpec:t.validateSpec,style:s,styleSpec:r})):a.push(new rt(e,i[e],`unknown property "${e}"`));return a}({sourceName:n,value:e,style:t.style,styleSpec:i,validateSpec:o}),a;case"geojson":if(a=Ui({key:n,value:e,valueSpec:i.source_geojson,style:r,styleSpec:i,validateSpec:o,objectElementValidators:tr}),e.cluster)for(const t in e.clusterProperties){const[i,r]=e.clusterProperties[t],s="string"==typeof i?[i,["accumulated"],["get",t]]:i;a.push(...zi({key:`${n}.${t}.map`,value:r,validateSpec:o,expressionContext:"cluster-map"})),a.push(...zi({key:`${n}.${t}.reduce`,value:s,validateSpec:o,expressionContext:"cluster-reduce"}))}return a;case"video":return Ui({key:n,value:e,valueSpec:i.source_video,style:r,validateSpec:o,styleSpec:i});case"image":return Ui({key:n,value:e,valueSpec:i.source_image,style:r,validateSpec:o,styleSpec:i});case"canvas":return[new rt(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ji({key:`${n}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:r,validateSpec:o,styleSpec:i})}}function nr(t){const e=t.value,n=t.styleSpec,i=n.light,r=t.style;let o=[];const s=li(e);if(void 0===e)return o;if("object"!==s)return o=o.concat([new rt("light",e,`object expected, ${s} found`)]),o;for(const s in e){const a=s.match(/^(.*)-transition$/);o=o.concat(a&&i[a[1]]&&i[a[1]].transition?t.validateSpec({key:s,value:e[s],valueSpec:n.transition,validateSpec:t.validateSpec,style:r,styleSpec:n}):i[s]?t.validateSpec({key:s,value:e[s],valueSpec:i[s],validateSpec:t.validateSpec,style:r,styleSpec:n}):[new rt(s,e[s],`unknown property "${s}"`)])}return o}function ir(t){const e=t.value,n=t.styleSpec,i=n.sky,r=t.style,o=li(e);if(void 0===e)return[];if("object"!==o)return[new rt("sky",e,`object expected, ${o} found`)];let s=[];for(const o in e)s=s.concat(i[o]?t.validateSpec({key:o,value:e[o],valueSpec:i[o],style:r,styleSpec:n}):[new rt(o,e[o],`unknown property "${o}"`)]);return s}function rr(t){const e=t.value,n=t.styleSpec,i=n.terrain,r=t.style;let o=[];const s=li(e);if(void 0===e)return o;if("object"!==s)return o=o.concat([new rt("terrain",e,`object expected, ${s} found`)]),o;for(const s in e)o=o.concat(i[s]?t.validateSpec({key:s,value:e[s],valueSpec:i[s],validateSpec:t.validateSpec,style:r,styleSpec:n}):[new rt(s,e[s],`unknown property "${s}"`)]);return o}function or(t){let e=[];const n=t.value,i=t.key;if(Array.isArray(n)){const r=[],o=[];for(const s in n)n[s].id&&r.includes(n[s].id)&&e.push(new rt(i,n,`all the sprites' ids must be unique, but ${n[s].id} is duplicated`)),r.push(n[s].id),n[s].url&&o.includes(n[s].url)&&e.push(new rt(i,n,`all the sprites' URLs must be unique, but ${n[s].url} is duplicated`)),o.push(n[s].url),e=e.concat(Ui({key:`${i}[${s}]`,value:n[s],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:t.validateSpec}));return e}return $i({key:i,value:n})}const sr={"*":()=>[],array:ji,boolean:function(t){const e=t.value,n=t.key,i=li(e);return"boolean"!==i?[new rt(n,e,`boolean expected, ${i} found`)]:[]},number:Yi,color:function(t){const e=t.key,n=t.value,i=li(n);return"string"!==i?[new rt(e,n,`color expected, ${i} found`)]:qt.parse(String(n))?[]:[new rt(e,n,`color expected, "${n}" found`)]},constants:Fi,enum:Ji,filter:qi,function:Ki,layer:Xi,object:Ui,source:er,light:nr,sky:ir,terrain:rr,projection:function(t){const e=t.value,n=t.styleSpec,i=n.projection,r=t.style,o=li(e);if(void 0===e)return[];if("object"!==o)return[new rt("projection",e,`object expected, ${o} found`)];let s=[];for(const o in e)s=s.concat(i[o]?t.validateSpec({key:o,value:e[o],valueSpec:i[o],style:r,styleSpec:n}):[new rt(o,e[o],`unknown property "${o}"`)]);return s},string:$i,formatted:function(t){return 0===$i(t).length?[]:zi(t)},resolvedImage:function(t){return 0===$i(t).length?[]:zi(t)},padding:function(t){const e=t.key,n=t.value;if("array"===li(n)){if(n.length<1||n.length>4)return[new rt(e,n,`padding requires 1 to 4 values; ${n.length} values found`)];const i={type:"number"};let r=[];for(let o=0;o<n.length;o++)r=r.concat(t.validateSpec({key:`${e}[${o}]`,value:n[o],validateSpec:t.validateSpec,valueSpec:i}));return r}return Yi({key:e,value:n,valueSpec:{}})},variableAnchorOffsetCollection:function(t){const e=t.key,n=t.value,i=li(n),r=t.styleSpec;if("array"!==i||n.length<1||n.length%2!=0)return[new rt(e,n,"variableAnchorOffsetCollection requires a non-empty array of even length")];let o=[];for(let i=0;i<n.length;i+=2)o=o.concat(Ji({key:`${e}[${i}]`,value:n[i],valueSpec:r.layout_symbol["text-anchor"]})),o=o.concat(ji({key:`${e}[${i+1}]`,value:n[i+1],valueSpec:{length:2,value:"number"},validateSpec:t.validateSpec,style:t.style,styleSpec:r}));return o},sprite:or};function ar(t){const e=t.value,n=t.valueSpec,i=t.styleSpec;return t.validateSpec=ar,n.expression&&ci(Oi(e))?Ki(t):n.expression&&yi(Gi(e))?zi(t):n.type&&sr[n.type]?sr[n.type](t):Ui(ot({},t,{valueSpec:n.type?i[n.type]:n}))}function Ar(t){const e=t.value,n=t.key,i=$i(t);return i.length||(-1===e.indexOf("{fontstack}")&&i.push(new rt(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&i.push(new rt(n,e,'"glyphs" url must include a "{range}" token'))),i}function lr(t,e=J){let n=[];return n=n.concat(ar({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,validateSpec:ar,objectElementValidators:{glyphs:Ar,"*":()=>[]}})),t.constants&&(n=n.concat(Fi({key:"constants",value:t.constants,style:t,styleSpec:e,validateSpec:ar}))),ur(n)}function cr(t){return function(e){return t({...e,validateSpec:ar})}}function ur(t){return[].concat(t).sort(((t,e)=>t.line-e.line))}function hr(t){return function(...e){return ur(t.apply(this,e))}}lr.source=hr(cr(er)),lr.sprite=hr(cr(or)),lr.glyphs=hr(cr(Ar)),lr.light=hr(cr(nr)),lr.sky=hr(cr(ir)),lr.terrain=hr(cr(rr)),lr.layer=hr(cr(Xi)),lr.filter=hr(cr(qi)),lr.paintProperty=hr(cr(Wi)),lr.layoutProperty=hr(cr(Zi));const gr=lr,dr=gr.light,pr=gr.sky,fr=gr.paintProperty,mr=gr.layoutProperty;function Ir(t,e){let n=!1;if(e&&e.length)for(const i of e)t.fire(new K(new Error(i.message))),n=!0;return n}class yr{constructor(t,e,n){const i=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const r=new Int32Array(this.arrayBuffer);t=r[0],this.d=(e=r[1])+2*(n=r[2]);for(let t=0;t<this.d*this.d;t++){const e=r[3+t],n=r[3+t+1];i.push(e===n?null:r.subarray(e,n))}const o=r[3+i.length+1];this.keys=r.subarray(r[3+i.length],o),this.bboxes=r.subarray(o),this.insert=this._insertReadonly}else{this.d=e+2*n;for(let t=0;t<this.d*this.d;t++)i.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;const r=n/e*t;this.min=-r,this.max=t+r}insert(t,e,n,i,r){this._forEachCell(e,n,i,r,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,e,n,i,r,o){this.cells[r].push(o)}query(t,e,n,i,r){const o=this.min,s=this.max;if(t<=o&&e<=o&&s<=n&&s<=i&&!r)return Array.prototype.slice.call(this.keys);{const o=[];return this._forEachCell(t,e,n,i,this._queryCell,o,{},r),o}}_queryCell(t,e,n,i,r,o,s,a){const A=this.cells[r];if(null!==A){const r=this.keys,l=this.bboxes;for(let c=0;c<A.length;c++){const u=A[c];if(void 0===s[u]){const A=4*u;(a?a(l[A+0],l[A+1],l[A+2],l[A+3]):t<=l[A+2]&&e<=l[A+3]&&n>=l[A+0]&&i>=l[A+1])?(s[u]=!0,o.push(r[u])):s[u]=!1}}}}_forEachCell(t,e,n,i,r,o,s,a){const A=this._convertToCellCoord(t),l=this._convertToCellCoord(e),c=this._convertToCellCoord(n),u=this._convertToCellCoord(i);for(let h=A;h<=c;h++)for(let A=l;A<=u;A++){const l=this.d*A+h;if((!a||a(this._convertFromCellCoord(h),this._convertFromCellCoord(A),this._convertFromCellCoord(h+1),this._convertFromCellCoord(A+1)))&&r.call(this,t,e,n,i,l,o,s,a))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,e=3+this.cells.length+1+1;let n=0;for(let t=0;t<this.cells.length;t++)n+=this.cells[t].length;const i=new Int32Array(e+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;let r=e;for(let e=0;e<t.length;e++){const n=t[e];i[3+e]=r,i.set(n,r),r+=n.length}return i[3+t.length]=r,i.set(this.keys,r),r+=this.keys.length,i[3+t.length+1]=r,i.set(this.bboxes,r),r+=this.bboxes.length,i.buffer}static serialize(t,e){const n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}}static deserialize(t){return new yr(t.buffer)}}const Cr={};function Er(t,e,n={}){if(Cr[t])throw new Error(`${t} is already registered.`);Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Cr[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}Er("Object",Object),Er("TransferableGridIndex",yr),Er("Color",qt),Er("Error",Error),Er("AJAXError",L),Er("ResolvedImage",te),Er("StylePropertyFunction",Bi),Er("StyleExpression",Ii,{omit:["_evaluator"]}),Er("ZoomDependentExpression",_i),Er("ZoomConstantExpression",Ei),Er("CompoundExpression",Vn,{omit:["_evaluate"]});for(const t in Hn)Hn[t]._classRegistryKey||Er(`Expression_${t}`,Hn[t]);function _r(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function vr(t){return t.$name||t.constructor._classRegistryKey}function Br(t){return!function(t){if(null===t||"object"!=typeof t)return!1;const e=vr(t);return!(!e||"Object"===e)}(t)&&(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof Blob||t instanceof Error||_r(t)||Q(t)||ArrayBuffer.isView(t)||t instanceof ImageData)}function wr(t,e){if(Br(t))return(_r(t)||Q(t))&&e&&e.push(t),ArrayBuffer.isView(t)&&e&&e.push(t.buffer),t instanceof ImageData&&e&&e.push(t.data.buffer),t;if(Array.isArray(t)){const n=[];for(const i of t)n.push(wr(i,e));return n}if("object"!=typeof t)throw new Error("can't serialize object of type "+typeof t);const n=vr(t);if(!n)throw new Error(`can't serialize object of unregistered class ${t.constructor.name}`);if(!Cr[n])throw new Error(`${n} is not registered.`);const{klass:i}=Cr[n],r=i.serialize?i.serialize(t,e):{};if(i.serialize){if(e&&r===e[e.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const i in t){if(!t.hasOwnProperty(i))continue;if(Cr[n].omit.indexOf(i)>=0)continue;const o=t[i];r[i]=Cr[n].shallow.indexOf(i)>=0?o:wr(o,e)}t instanceof Error&&(r.message=t.message)}if(r.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==n&&(r.$name=n),r}function br(t){if(Br(t))return t;if(Array.isArray(t))return t.map(br);if("object"!=typeof t)throw new Error("can't deserialize object of type "+typeof t);const e=vr(t)||"Object";if(!Cr[e])throw new Error(`can't deserialize unregistered class ${e}`);const{klass:n}=Cr[e];if(!n)throw new Error(`can't deserialize unregistered class ${e}`);if(n.deserialize)return n.deserialize(t);const i=Object.create(n.prototype);for(const n of Object.keys(t)){if("$name"===n)continue;const r=t[n];i[n]=Cr[e].shallow.indexOf(n)>=0?r:br(r)}return i}class Qr{constructor(){this.first=!0}update(t,e){const n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))}}const xr={"Latin-1 Supplement":t=>t>=128&&t<=255,"Hangul Jamo":t=>t>=4352&&t<=4607,Khmer:t=>t>=6016&&t<=6143,"General Punctuation":t=>t>=8192&&t<=8303,"Letterlike Symbols":t=>t>=8448&&t<=8527,"Number Forms":t=>t>=8528&&t<=8591,"Miscellaneous Technical":t=>t>=8960&&t<=9215,"Control Pictures":t=>t>=9216&&t<=9279,"Optical Character Recognition":t=>t>=9280&&t<=9311,"Enclosed Alphanumerics":t=>t>=9312&&t<=9471,"Geometric Shapes":t=>t>=9632&&t<=9727,"Miscellaneous Symbols":t=>t>=9728&&t<=9983,"Miscellaneous Symbols and Arrows":t=>t>=11008&&t<=11263,"Ideographic Description Characters":t=>t>=12272&&t<=12287,"CJK Symbols and Punctuation":t=>t>=12288&&t<=12351,Katakana:t=>t>=12448&&t<=12543,Kanbun:t=>t>=12688&&t<=12703,"CJK Strokes":t=>t>=12736&&t<=12783,"Enclosed CJK Letters and Months":t=>t>=12800&&t<=13055,"CJK Compatibility":t=>t>=13056&&t<=13311,"Yijing Hexagram Symbols":t=>t>=19904&&t<=19967,"Private Use Area":t=>t>=57344&&t<=63743,"Vertical Forms":t=>t>=65040&&t<=65055,"CJK Compatibility Forms":t=>t>=65072&&t<=65103,"Small Form Variants":t=>t>=65104&&t<=65135,"Halfwidth and Fullwidth Forms":t=>t>=65280&&t<=65519};function Dr(t){for(const e of t)if(Pr(e.charCodeAt(0)))return!0;return!1}function Sr(t){for(const e of t)if(!Rr(e.charCodeAt(0)))return!1;return!0}function Mr(t){const e=t.map((t=>{try{return new RegExp(`\\p{sc=${t}}`,"u").source}catch(t){return null}})).filter((t=>t));return new RegExp(e.join("|"),"u")}const kr=Mr(["Arab","Dupl","Mong","Ougr","Syrc"]);function Rr(t){return!kr.test(String.fromCodePoint(t))}const Nr=Mr(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Pr(t){return!(746!==t&&747!==t&&(t<4352||!(xr["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||xr["CJK Compatibility"](t)||xr["CJK Strokes"](t)||!(!xr["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||xr["Enclosed CJK Letters and Months"](t)||xr["Ideographic Description Characters"](t)||xr.Kanbun(t)||xr.Katakana(t)&&12540!==t||!(!xr["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!xr["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||xr["Vertical Forms"](t)||xr["Yijing Hexagram Symbols"](t)||/\p{sc=Cans}/u.test(String.fromCodePoint(t))||/\p{sc=Hang}/u.test(String.fromCodePoint(t))||Nr.test(String.fromCodePoint(t)))))}function Tr(t){return!(Pr(t)||function(t){return!!(xr["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||xr["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||xr["Letterlike Symbols"](t)||xr["Number Forms"](t)||xr["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||xr["Control Pictures"](t)&&9251!==t||xr["Optical Character Recognition"](t)||xr["Enclosed Alphanumerics"](t)||xr["Geometric Shapes"](t)||xr["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||xr["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||xr["CJK Symbols and Punctuation"](t)||xr.Katakana(t)||xr["Private Use Area"](t)||xr["CJK Compatibility Forms"](t)||xr["Small Form Variants"](t)||xr["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}const Lr=Mr(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Fr(t){return Lr.test(String.fromCodePoint(t))}function Or(t,e){return!(!e&&Fr(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||xr.Khmer(t))}function Gr(t){for(const e of t)if(Fr(e.charCodeAt(0)))return!0;return!1}const Ur=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(t){this.pluginStatus=t.pluginStatus,this.pluginURL=t.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(t){this.applyArabicShaping=t.applyArabicShaping,this.processBidirectionalText=t.processBidirectionalText,this.processStyledBidirectionalText=t.processStyledBidirectionalText}isParsed(){return null!=this.applyArabicShaping&&null!=this.processBidirectionalText&&null!=this.processStyledBidirectionalText}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class jr{constructor(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Qr,this.transition={})}isSupportedScript(t){return function(t,e){for(const n of t)if(!Or(n.charCodeAt(0),e))return!1;return!0}(t,"loaded"===Ur.getRTLTextPluginStatus())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,e=t-Math.floor(t),n=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*e}}}class Yr{constructor(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(ci(t))return new Bi(t,e);if(yi(t)){const n=vi(t,e);if("error"===n.result)throw new Error(n.value.map((t=>`${t.key}: ${t.message}`)).join(", "));return n.value}{let n=t;return"color"===e.type&&"string"==typeof t?n=qt.parse(t):"padding"!==e.type||"number"!=typeof t&&!Array.isArray(t)?"variableAnchorOffsetCollection"===e.type&&Array.isArray(t)&&(n=$t.parse(t)):n=Zt.parse(t),{kind:"constant",evaluate:()=>n}}}(void 0===e?t.specification.default:e,t.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(t,e,n){return this.property.possiblyEvaluate(this,t,e,n)}}class Kr{constructor(t){this.property=t,this.value=new Yr(t,void 0)}transitioned(t,e){return new Jr(this.property,this.value,e,m({},t.transition,this.transition),t.now)}untransitioned(){return new Jr(this.property,this.value,null,{},0)}}class zr{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return E(this._values[t].value.value)}setValue(t,e){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Kr(this._values[t].property)),this._values[t].value=new Yr(this._values[t].property,null===e?void 0:E(e))}getTransition(t){return E(this._values[t].transition)}setTransition(t,e){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Kr(this._values[t].property)),this._values[t].transition=E(e)||void 0}serialize(){const t={};for(const e of Object.keys(this._values)){const n=this.getValue(e);void 0!==n&&(t[e]=n);const i=this.getTransition(e);void 0!==i&&(t[`${e}-transition`]=i)}return t}transitioned(t,e){const n=new qr(this._properties);for(const i of Object.keys(this._values))n._values[i]=this._values[i].transitioned(t,e._values[i]);return n}untransitioned(){const t=new qr(this._properties);for(const e of Object.keys(this._values))t._values[e]=this._values[e].untransitioned();return t}}class Jr{constructor(t,e,n,i,r){this.property=t,this.value=e,this.begin=r+i.delay||0,this.end=this.begin+i.duration||0,t.specification.transition&&(i.delay||i.duration)&&(this.prior=n)}possiblyEvaluate(t,e,n){const i=t.now||0,r=this.value.possiblyEvaluate(t,e,n),o=this.prior;if(o){if(i>this.end)return this.prior=null,r;if(this.value.isDataDriven())return this.prior=null,r;if(i<this.begin)return o.possiblyEvaluate(t,e,n);{const s=(i-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,n),r,function(t){if(t<=0)return 0;if(t>=1)return 1;const e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}(s))}}return r}}class qr{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,e,n){const i=new Wr(this._properties);for(const r of Object.keys(this._values))i._values[r]=this._values[r].possiblyEvaluate(t,e,n);return i}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class Hr{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}hasValue(t){return void 0!==this._values[t].value}getValue(t){return E(this._values[t].value)}setValue(t,e){this._values[t]=new Yr(this._values[t].property,null===e?void 0:E(e))}serialize(){const t={};for(const e of Object.keys(this._values)){const n=this.getValue(e);void 0!==n&&(t[e]=n)}return t}possiblyEvaluate(t,e,n){const i=new Wr(this._properties);for(const r of Object.keys(this._values))i._values[r]=this._values[r].possiblyEvaluate(t,e,n);return i}}class Vr{constructor(t,e,n){this.property=t,this.value=e,this.parameters=n}isConstant(){return"constant"===this.value.kind}constantOr(t){return"constant"===this.value.kind?this.value.value:t}evaluate(t,e,n,i){return this.property.evaluate(this.value,this.parameters,t,e,n,i)}}class Wr{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class Zr{constructor(t){this.specification=t}possiblyEvaluate(t,e){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(e)}interpolate(t,e,n){const i=Se[this.specification.type];return i?i(t,e,n):t}}class Xr{constructor(t,e){this.specification=t,this.overrides=e}possiblyEvaluate(t,e,n,i){return new Vr(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},n,i)}:t.expression,e)}interpolate(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new Vr(this,{kind:"constant",value:void 0},t.parameters);const i=Se[this.specification.type];if(i){const r=i(t.value.value,e.value.value,n);return new Vr(this,{kind:"constant",value:r},t.parameters)}return t}evaluate(t,e,n,i,r,o){return"constant"===t.kind?t.value:t.evaluate(e,n,i,r,o)}}class $r extends Xr{possiblyEvaluate(t,e,n,i){if(void 0===t.value)return new Vr(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){const r=t.expression.evaluate(e,null,{},n,i),o="resolvedImage"===t.property.specification.type&&"string"!=typeof r?r.name:r,s=this._calculate(o,o,o,e);return new Vr(this,{kind:"constant",value:s},e)}if("camera"===t.expression.kind){const n=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new Vr(this,{kind:"constant",value:n},e)}return new Vr(this,t.expression,e)}evaluate(t,e,n,i,r,o){if("source"===t.kind){const s=t.evaluate(e,n,i,r,o);return this._calculate(s,s,s,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},n,i),t.evaluate({zoom:Math.floor(e.zoom)},n,i),t.evaluate({zoom:Math.floor(e.zoom)+1},n,i),e):t.value}_calculate(t,e,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}}interpolate(t){return t}}class to{constructor(t){this.specification=t}possiblyEvaluate(t,e,n,i){if(void 0!==t.value){if("constant"===t.expression.kind){const r=t.expression.evaluate(e,null,{},n,i);return this._calculate(r,r,r,e)}return this._calculate(t.expression.evaluate(new jr(Math.floor(e.zoom-1),e)),t.expression.evaluate(new jr(Math.floor(e.zoom),e)),t.expression.evaluate(new jr(Math.floor(e.zoom+1),e)),e)}}_calculate(t,e,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}}interpolate(t){return t}}class eo{constructor(t){this.specification=t}possiblyEvaluate(t,e,n,i){return!!t.expression.evaluate(e,null,{},n,i)}interpolate(){return!1}}class no{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const e in t){const n=t[e];n.specification.overridable&&this.overridableProperties.push(e);const i=this.defaultPropertyValues[e]=new Yr(n,void 0),r=this.defaultTransitionablePropertyValues[e]=new Kr(n);this.defaultTransitioningPropertyValues[e]=r.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=i.possiblyEvaluate({})}}}Er("DataDrivenProperty",Xr),Er("DataConstantProperty",Zr),Er("CrossFadedDataDrivenProperty",$r),Er("CrossFadedProperty",to),Er("ColorRampProperty",eo);const io="-transition";class ro extends z{constructor(t,e){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==t.type&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),e.layout&&(this._unevaluatedLayout=new Hr(e.layout)),e.paint)){this._transitionablePaint=new zr(e.paint);for(const e in t.paint)this.setPaintProperty(e,t.paint[e],{validate:!1});for(const e in t.layout)this.setLayoutProperty(e,t.layout[e],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Wr(e.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,e,n={}){null!=e&&this._validate(mr,`layers.${this.id}.layout.${t}`,t,e,n)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)}getPaintProperty(t){return t.endsWith(io)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,e,n={}){if(null!=e&&this._validate(fr,`layers.${this.id}.paint.${t}`,t,e,n))return!1;if(t.endsWith(io))return this._transitionablePaint.setTransition(t.slice(0,-11),e||void 0),!1;{const n=this._transitionablePaint._values[t],i="cross-faded-data-driven"===n.property.specification["property-type"],r=n.value.isDataDriven(),o=n.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);const s=this._transitionablePaint._values[t].value;return s.isDataDriven()||r||i||this._handleOverridablePaintPropertyUpdate(t,o,s)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,e,n){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),C(t,((t,e)=>!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)))}_validate(t,e,n,i,r={}){return(!r||!1!==r.validate)&&Ir(this,t.call(gr,{key:e,layerType:this.type,objectKey:n,value:i,styleSpec:J,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const e=this.paint.get(t);if(e instanceof Vr&&si(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1}}const oo={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class so{constructor(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ao{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Ao(t,e=1){let n=0,i=0;return{members:t.map((t=>{const r=oo[t.type].BYTES_PER_ELEMENT,o=n=lo(n,Math.max(e,r)),s=t.components||1;return i=Math.max(i,r),n+=r*s,{name:t.name,type:t.type,components:s,offset:o}})),size:lo(n,Math.max(i,e)),alignment:e}}function lo(t,e){return Math.ceil(t/e)*e}class co extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const i=2*t;return this.int16[i+0]=e,this.int16[i+1]=n,t}}co.prototype.bytesPerElement=4,Er("StructArrayLayout2i4",co);class uo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)}emplace(t,e,n,i){const r=3*t;return this.int16[r+0]=e,this.int16[r+1]=n,this.int16[r+2]=i,t}}uo.prototype.bytesPerElement=6,Er("StructArrayLayout3i6",uo);class ho extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)}emplace(t,e,n,i,r){const o=4*t;return this.int16[o+0]=e,this.int16[o+1]=n,this.int16[o+2]=i,this.int16[o+3]=r,t}}ho.prototype.bytesPerElement=8,Er("StructArrayLayout4i8",ho);class go extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,n,i,r,o)}emplace(t,e,n,i,r,o,s){const a=6*t;return this.int16[a+0]=e,this.int16[a+1]=n,this.int16[a+2]=i,this.int16[a+3]=r,this.int16[a+4]=o,this.int16[a+5]=s,t}}go.prototype.bytesPerElement=12,Er("StructArrayLayout2i4i12",go);class po extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,n,i,r,o)}emplace(t,e,n,i,r,o,s){const a=4*t,A=8*t;return this.int16[a+0]=e,this.int16[a+1]=n,this.uint8[A+4]=i,this.uint8[A+5]=r,this.uint8[A+6]=o,this.uint8[A+7]=s,t}}po.prototype.bytesPerElement=8,Er("StructArrayLayout2i4ub8",po);class fo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const i=2*t;return this.float32[i+0]=e,this.float32[i+1]=n,t}}fo.prototype.bytesPerElement=8,Er("StructArrayLayout2f8",fo);class mo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o,s,a,A,l){const c=this.length;return this.resize(c+1),this.emplace(c,t,e,n,i,r,o,s,a,A,l)}emplace(t,e,n,i,r,o,s,a,A,l,c){const u=10*t;return this.uint16[u+0]=e,this.uint16[u+1]=n,this.uint16[u+2]=i,this.uint16[u+3]=r,this.uint16[u+4]=o,this.uint16[u+5]=s,this.uint16[u+6]=a,this.uint16[u+7]=A,this.uint16[u+8]=l,this.uint16[u+9]=c,t}}mo.prototype.bytesPerElement=20,Er("StructArrayLayout10ui20",mo);class Io extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o,s,a,A,l,c,u){const h=this.length;return this.resize(h+1),this.emplace(h,t,e,n,i,r,o,s,a,A,l,c,u)}emplace(t,e,n,i,r,o,s,a,A,l,c,u,h){const g=12*t;return this.int16[g+0]=e,this.int16[g+1]=n,this.int16[g+2]=i,this.int16[g+3]=r,this.uint16[g+4]=o,this.uint16[g+5]=s,this.uint16[g+6]=a,this.uint16[g+7]=A,this.int16[g+8]=l,this.int16[g+9]=c,this.int16[g+10]=u,this.int16[g+11]=h,t}}Io.prototype.bytesPerElement=24,Er("StructArrayLayout4i4ui4i24",Io);class yo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)}emplace(t,e,n,i){const r=3*t;return this.float32[r+0]=e,this.float32[r+1]=n,this.float32[r+2]=i,t}}yo.prototype.bytesPerElement=12,Er("StructArrayLayout3f12",yo);class Co extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint32[1*t+0]=e,t}}Co.prototype.bytesPerElement=4,Er("StructArrayLayout1ul4",Co);class Eo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o,s,a,A){const l=this.length;return this.resize(l+1),this.emplace(l,t,e,n,i,r,o,s,a,A)}emplace(t,e,n,i,r,o,s,a,A,l){const c=10*t,u=5*t;return this.int16[c+0]=e,this.int16[c+1]=n,this.int16[c+2]=i,this.int16[c+3]=r,this.int16[c+4]=o,this.int16[c+5]=s,this.uint32[u+3]=a,this.uint16[c+8]=A,this.uint16[c+9]=l,t}}Eo.prototype.bytesPerElement=20,Er("StructArrayLayout6i1ul2ui20",Eo);class _o extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,n,i,r,o)}emplace(t,e,n,i,r,o,s){const a=6*t;return this.int16[a+0]=e,this.int16[a+1]=n,this.int16[a+2]=i,this.int16[a+3]=r,this.int16[a+4]=o,this.int16[a+5]=s,t}}_o.prototype.bytesPerElement=12,Er("StructArrayLayout2i2i2i12",_o);class vo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,i,r)}emplace(t,e,n,i,r,o){const s=4*t,a=8*t;return this.float32[s+0]=e,this.float32[s+1]=n,this.float32[s+2]=i,this.int16[a+6]=r,this.int16[a+7]=o,t}}vo.prototype.bytesPerElement=16,Er("StructArrayLayout2f1f2i16",vo);class Bo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,n,i,r,o)}emplace(t,e,n,i,r,o,s){const a=16*t,A=4*t,l=8*t;return this.uint8[a+0]=e,this.uint8[a+1]=n,this.float32[A+1]=i,this.float32[A+2]=r,this.int16[l+6]=o,this.int16[l+7]=s,t}}Bo.prototype.bytesPerElement=16,Er("StructArrayLayout2ub2f2i16",Bo);class wo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)}emplace(t,e,n,i){const r=3*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,this.uint16[r+2]=i,t}}wo.prototype.bytesPerElement=6,Er("StructArrayLayout3ui6",wo);class bo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o,s,a,A,l,c,u,h,g,d,p,f){const m=this.length;return this.resize(m+1),this.emplace(m,t,e,n,i,r,o,s,a,A,l,c,u,h,g,d,p,f)}emplace(t,e,n,i,r,o,s,a,A,l,c,u,h,g,d,p,f,m){const I=24*t,y=12*t,C=48*t;return this.int16[I+0]=e,this.int16[I+1]=n,this.uint16[I+2]=i,this.uint16[I+3]=r,this.uint32[y+2]=o,this.uint32[y+3]=s,this.uint32[y+4]=a,this.uint16[I+10]=A,this.uint16[I+11]=l,this.uint16[I+12]=c,this.float32[y+7]=u,this.float32[y+8]=h,this.uint8[C+36]=g,this.uint8[C+37]=d,this.uint8[C+38]=p,this.uint32[y+10]=f,this.int16[I+22]=m,t}}bo.prototype.bytesPerElement=48,Er("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",bo);class Qo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o,s,a,A,l,c,u,h,g,d,p,f,m,I,y,C,E,_,v,B,w,b,Q){const x=this.length;return this.resize(x+1),this.emplace(x,t,e,n,i,r,o,s,a,A,l,c,u,h,g,d,p,f,m,I,y,C,E,_,v,B,w,b,Q)}emplace(t,e,n,i,r,o,s,a,A,l,c,u,h,g,d,p,f,m,I,y,C,E,_,v,B,w,b,Q,x){const D=32*t,S=16*t;return this.int16[D+0]=e,this.int16[D+1]=n,this.int16[D+2]=i,this.int16[D+3]=r,this.int16[D+4]=o,this.int16[D+5]=s,this.int16[D+6]=a,this.int16[D+7]=A,this.uint16[D+8]=l,this.uint16[D+9]=c,this.uint16[D+10]=u,this.uint16[D+11]=h,this.uint16[D+12]=g,this.uint16[D+13]=d,this.uint16[D+14]=p,this.uint16[D+15]=f,this.uint16[D+16]=m,this.uint16[D+17]=I,this.uint16[D+18]=y,this.uint16[D+19]=C,this.uint16[D+20]=E,this.uint16[D+21]=_,this.uint16[D+22]=v,this.uint32[S+12]=B,this.float32[S+13]=w,this.float32[S+14]=b,this.uint16[D+30]=Q,this.uint16[D+31]=x,t}}Qo.prototype.bytesPerElement=64,Er("StructArrayLayout8i15ui1ul2f2ui64",Qo);class xo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.float32[1*t+0]=e,t}}xo.prototype.bytesPerElement=4,Er("StructArrayLayout1f4",xo);class Do extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)}emplace(t,e,n,i){const r=3*t;return this.uint16[6*t+0]=e,this.float32[r+1]=n,this.float32[r+2]=i,t}}Do.prototype.bytesPerElement=12,Er("StructArrayLayout1ui2f12",Do);class So extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)}emplace(t,e,n,i){const r=4*t;return this.uint32[2*t+0]=e,this.uint16[r+2]=n,this.uint16[r+3]=i,t}}So.prototype.bytesPerElement=8,Er("StructArrayLayout1ul2ui8",So);class Mo extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const i=2*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,t}}Mo.prototype.bytesPerElement=4,Er("StructArrayLayout2ui4",Mo);class ko extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint16[1*t+0]=e,t}}ko.prototype.bytesPerElement=2,Er("StructArrayLayout1ui2",ko);class Ro extends ao{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)}emplace(t,e,n,i,r){const o=4*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=i,this.float32[o+3]=r,t}}Ro.prototype.bytesPerElement=16,Er("StructArrayLayout4f16",Ro);class No extends so{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new o(this.anchorPointX,this.anchorPointY)}}No.prototype.size=20;class Po extends Eo{get(t){return new No(this,t)}}Er("CollisionBoxArray",Po);class To extends so{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}To.prototype.size=48;class Lo extends bo{get(t){return new To(this,t)}}Er("PlacedSymbolArray",Lo);class Fo extends so{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Fo.prototype.size=64;class Oo extends Qo{get(t){return new Fo(this,t)}}Er("SymbolInstanceArray",Oo);class Go extends xo{getoffsetX(t){return this.float32[1*t+0]}}Er("GlyphOffsetArray",Go);class Uo extends uo{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}Er("SymbolLineVertexArray",Uo);class jo extends so{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}jo.prototype.size=12;class Yo extends Do{get(t){return new jo(this,t)}}Er("TextAnchorOffsetArray",Yo);class Ko extends so{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ko.prototype.size=8;class zo extends So{get(t){return new Ko(this,t)}}Er("FeatureIndexArray",zo);class Jo extends co{}class qo extends co{}class Ho extends co{}class Vo extends go{}class Wo extends po{}class Zo extends fo{}class Xo extends mo{}class $o extends Io{}class ts extends yo{}class es extends Co{}class ns extends _o{}class is extends Bo{}class rs extends wo{}class os extends Mo{}const ss=Ao([{name:"a_pos",components:2,type:"Int16"}],4),{members:as}=ss;class As{constructor(t=[]){this.segments=t}prepareSegment(t,e,n,i){let r=this.segments[this.segments.length-1];return t>As.MAX_VERTEX_ARRAY_LENGTH&&v(`Max vertices per segment is ${As.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!r||r.vertexLength+t>As.MAX_VERTEX_ARRAY_LENGTH||r.sortKey!==i)&&(r={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==i&&(r.sortKey=i),this.segments.push(r)),r}get(){return this.segments}destroy(){for(const t of this.segments)for(const e in t.vaos)t.vaos[e].destroy()}static simpleSegment(t,e,n,i){return new As([{vertexOffset:t,primitiveOffset:e,vertexLength:n,primitiveLength:i,vaos:{},sortKey:0}])}}function ls(t,e){return 256*(t=p(Math.floor(t),0,255))+p(Math.floor(e),0,255)}As.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Er("SegmentVector",As);const cs=Ao([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var us={exports:{}},hs={exports:function(t,e){var n,i,r,o,s,a,A,l;for(i=t.length-(n=3&t.length),r=e,s=3432918353,a=461845907,l=0;l<i;)A=255&t.charCodeAt(l)|(255&t.charCodeAt(++l))<<8|(255&t.charCodeAt(++l))<<16|(255&t.charCodeAt(++l))<<24,++l,r=27492+(65535&(o=5*(65535&(r=(r^=A=(65535&(A=(A=(65535&A)*s+(((A>>>16)*s&65535)<<16)&4294967295)<<15|A>>>17))*a+(((A>>>16)*a&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(A=0,n){case 3:A^=(255&t.charCodeAt(l+2))<<16;case 2:A^=(255&t.charCodeAt(l+1))<<8;case 1:r^=A=(65535&(A=(A=(65535&(A^=255&t.charCodeAt(l)))*s+(((A>>>16)*s&65535)<<16)&4294967295)<<15|A>>>17))*a+(((A>>>16)*a&65535)<<16)&4294967295}return r^=t.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0}},gs={exports:function(t,e){for(var n,i=t.length,r=e^i,o=0;i>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),i-=4,++o;switch(i){case 3:r^=(255&t.charCodeAt(o+2))<<16;case 2:r^=(255&t.charCodeAt(o+1))<<8;case 1:r=1540483477*(65535&(r^=255&t.charCodeAt(o)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0}},ds=hs.exports,ps=gs.exports;us.exports=ds,us.exports.murmur3=ds,us.exports.murmur2=ps;var fs=n(us.exports);class ms{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,e,n,i){this.ids.push(Is(t)),this.positions.push(e,n,i)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const e=Is(t);let n=0,i=this.ids.length-1;for(;n<i;){const t=n+i>>1;this.ids[t]>=e?i=t:n=t+1}const r=[];for(;this.ids[n]===e;)r.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return r}static serialize(t,e){const n=new Float64Array(t.ids),i=new Uint32Array(t.positions);return ys(n,i,0,n.length-1),e&&e.push(n.buffer,i.buffer),{ids:n,positions:i}}static deserialize(t){const e=new ms;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e}}function Is(t){const e=+t;return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:fs(String(t))}function ys(t,e,n,i){for(;n<i;){const r=t[n+i>>1];let o=n-1,s=i+1;for(;;){do{o++}while(t[o]<r);do{s--}while(t[s]>r);if(o>=s)break;Cs(t,o,s),Cs(e,3*o,3*s),Cs(e,3*o+1,3*s+1),Cs(e,3*o+2,3*s+2)}s-n<i-s?(ys(t,e,n,s),n=s+1):(ys(t,e,s+1,i),i=s)}}function Cs(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}Er("FeaturePositionMap",ms);class Es{constructor(t,e){this.gl=t.gl,this.location=e}}class _s extends Es{constructor(t,e){super(t,e),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class vs extends Es{constructor(t,e){super(t,e),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class Bs extends Es{constructor(t,e){super(t,e),this.current=qt.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const ws=new Float32Array(16);function bs(t){return[ls(255*t.r,255*t.g),ls(255*t.b,255*t.a)]}class Qs{constructor(t,e,n){this.value=t,this.uniformNames=e.map((t=>`u_${t}`)),this.type=n}setUniform(t,e,n){t.set(n.constantOr(this.value))}getBinding(t,e,n){return"color"===this.type?new Bs(t,e):new _s(t,e)}}class xs{constructor(t,e){this.uniformNames=e.map((t=>`u_${t}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr}setUniform(t,e,n,i){const r="u_pattern_to"===i?this.patternTo:"u_pattern_from"===i?this.patternFrom:"u_pixel_ratio_to"===i?this.pixelRatioTo:"u_pixel_ratio_from"===i?this.pixelRatioFrom:null;r&&t.set(r)}getBinding(t,e,n){return"u_pattern"===n.substr(0,9)?new vs(t,e):new _s(t,e)}}class Ds{constructor(t,e,n,i){this.expression=t,this.type=n,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:"Float32",components:"color"===n?2:1,offset:0}))),this.paintVertexArray=new i}populatePaintArray(t,e,n,i,r){const o=this.paintVertexArray.length,s=this.expression.evaluate(new jr(0),e,{},i,[],r);this.paintVertexArray.resize(t),this._setPaintValue(o,t,s)}updatePaintArray(t,e,n,i){const r=this.expression.evaluate({zoom:0},n,i);this._setPaintValue(t,e,r)}_setPaintValue(t,e,n){if("color"===this.type){const i=bs(n);for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,i[0],i[1])}else{for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ss{constructor(t,e,n,i,r,o){this.expression=t,this.uniformNames=e.map((t=>`u_${t}_t`)),this.type=n,this.useIntegerZoom=i,this.zoom=r,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:"Float32",components:"color"===n?4:2,offset:0}))),this.paintVertexArray=new o}populatePaintArray(t,e,n,i,r){const o=this.expression.evaluate(new jr(this.zoom),e,{},i,[],r),s=this.expression.evaluate(new jr(this.zoom+1),e,{},i,[],r),a=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(a,t,o,s)}updatePaintArray(t,e,n,i){const r=this.expression.evaluate({zoom:this.zoom},n,i),o=this.expression.evaluate({zoom:this.zoom+1},n,i);this._setPaintValue(t,e,r,o)}_setPaintValue(t,e,n,i){if("color"===this.type){const r=bs(n),o=bs(i);for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,r[0],r[1],o[0],o[1])}else{for(let r=t;r<e;r++)this.paintVertexArray.emplace(r,n,i);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(i))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,e){const n=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,i=p(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);t.set(i)}getBinding(t,e,n){return new _s(t,e)}}class Ms{constructor(t,e,n,i,r,o){this.expression=t,this.type=e,this.useIntegerZoom=n,this.zoom=i,this.layerId=o,this.zoomInPaintVertexArray=new r,this.zoomOutPaintVertexArray=new r}populatePaintArray(t,e,n){const i=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(i,t,e.patterns&&e.patterns[this.layerId],n)}updatePaintArray(t,e,n,i,r){this._setPaintValues(t,e,n.patterns&&n.patterns[this.layerId],r)}_setPaintValues(t,e,n,i){if(!i||!n)return;const{min:r,mid:o,max:s}=n,a=i[r],A=i[o],l=i[s];if(a&&A&&l)for(let n=t;n<e;n++)this.zoomInPaintVertexArray.emplace(n,A.tl[0],A.tl[1],A.br[0],A.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1],A.pixelRatio,a.pixelRatio),this.zoomOutPaintVertexArray.emplace(n,A.tl[0],A.tl[1],A.br[0],A.br[1],l.tl[0],l.tl[1],l.br[0],l.br[1],A.pixelRatio,l.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,cs.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,cs.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ks{constructor(t,e,n){this.binders={},this._buffers=[];const i=[];for(const r in t.paint._values){if(!n(r))continue;const o=t.paint.get(r);if(!(o instanceof Vr&&si(o.property.specification)))continue;const s=Ns(r,t.type),a=o.value,A=o.property.specification.type,l=o.property.useIntegerZoom,c=o.property.specification["property-type"],u="cross-faded"===c||"cross-faded-data-driven"===c;if("constant"===a.kind)this.binders[r]=u?new xs(a.value,s):new Qs(a.value,s,A),i.push(`/u_${r}`);else if("source"===a.kind||u){const n=Ps(r,A,"source");this.binders[r]=u?new Ms(a,A,l,e,n,t.id):new Ds(a,s,A,n),i.push(`/a_${r}`)}else{const t=Ps(r,A,"composite");this.binders[r]=new Ss(a,s,A,l,e,t),i.push(`/z_${r}`)}}this.cacheKey=i.sort().join("")}getMaxValue(t){const e=this.binders[t];return e instanceof Ds||e instanceof Ss?e.maxValue:0}populatePaintArrays(t,e,n,i,r){for(const o in this.binders){const s=this.binders[o];(s instanceof Ds||s instanceof Ss||s instanceof Ms)&&s.populatePaintArray(t,e,n,i,r)}}setConstantPatternPositions(t,e){for(const n in this.binders){const i=this.binders[n];i instanceof xs&&i.setConstantPatternPositions(t,e)}}updatePaintArrays(t,e,n,i,r){let o=!1;for(const s in t){const a=e.getPositions(s);for(const e of a){const a=n.feature(e.index);for(const n in this.binders){const A=this.binders[n];if((A instanceof Ds||A instanceof Ss||A instanceof Ms)&&!0===A.expression.isStateDependent){const l=i.paint.get(n);A.expression=l.value,A.updatePaintArray(e.start,e.end,a,t[s],r),o=!0}}}}return o}defines(){const t=[];for(const e in this.binders){const n=this.binders[e];(n instanceof Qs||n instanceof xs)&&t.push(...n.uniformNames.map((t=>`#define HAS_UNIFORM_${t}`)))}return t}getBinderAttributes(){const t=[];for(const e in this.binders){const n=this.binders[e];if(n instanceof Ds||n instanceof Ss)for(let e=0;e<n.paintVertexAttributes.length;e++)t.push(n.paintVertexAttributes[e].name);else if(n instanceof Ms)for(let e=0;e<cs.members.length;e++)t.push(cs.members[e].name)}return t}getBinderUniforms(){const t=[];for(const e in this.binders){const n=this.binders[e];if(n instanceof Qs||n instanceof xs||n instanceof Ss)for(const e of n.uniformNames)t.push(e)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,e){const n=[];for(const i in this.binders){const r=this.binders[i];if(r instanceof Qs||r instanceof xs||r instanceof Ss)for(const o of r.uniformNames)if(e[o]){const s=r.getBinding(t,e[o],o);n.push({name:o,property:i,binding:s})}}return n}setUniforms(t,e,n,i){for(const{name:t,property:r,binding:o}of e)this.binders[r].setUniform(o,i,n.get(r),t)}updatePaintBuffers(t){this._buffers=[];for(const e in this.binders){const n=this.binders[e];if(t&&n instanceof Ms){const e=2===t.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;e&&this._buffers.push(e)}else(n instanceof Ds||n instanceof Ss)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}upload(t){for(const e in this.binders){const n=this.binders[e];(n instanceof Ds||n instanceof Ss||n instanceof Ms)&&n.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const e=this.binders[t];(e instanceof Ds||e instanceof Ss||e instanceof Ms)&&e.destroy()}}}class Rs{constructor(t,e,n=()=>!0){this.programConfigurations={};for(const i of t)this.programConfigurations[i.id]=new ks(i,e,n);this.needsUpload=!1,this._featureMap=new ms,this._bufferOffset=0}populatePaintArrays(t,e,n,i,r,o){for(const n in this.programConfigurations)this.programConfigurations[n].populatePaintArrays(t,e,i,r,o);void 0!==e.id&&this._featureMap.add(e.id,n,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,e,n,i){for(const r of n)this.needsUpload=this.programConfigurations[r.id].updatePaintArrays(t,this._featureMap,e,r,i)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function Ns(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace(`${e}-`,"").replace(/-/g,"_")]}function Ps(t,e,n){const i={color:{source:fo,composite:Ro},number:{source:xo,composite:fo}},r=function(t){return{"line-pattern":{source:Xo,composite:Xo},"fill-pattern":{source:Xo,composite:Xo},"fill-extrusion-pattern":{source:Xo,composite:Xo}}[t]}(t);return r&&r[n]||i[e][n]}Er("ConstantBinder",Qs),Er("CrossFadedConstantBinder",xs),Er("SourceExpressionBinder",Ds),Er("CrossFadedCompositeBinder",Ms),Er("CompositeExpressionBinder",Ss),Er("ProgramConfiguration",ks,{omit:["_buffers"]}),Er("ProgramConfigurationSet",Rs);const Ts=8192,Ls=Math.pow(2,14)-1,Fs=-Ls-1;function Os(t){const e=Ts/t.extent,n=t.loadGeometry();for(let t=0;t<n.length;t++){const i=n[t];for(let t=0;t<i.length;t++){const n=i[t],r=Math.round(n.x*e),o=Math.round(n.y*e);n.x=p(r,Fs,Ls),n.y=p(o,Fs,Ls),(r<n.x||r>n.x+1||o<n.y||o>n.y+1)&&v("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return n}function Gs(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?Os(t):[]}}function Us(t,e,n,i,r){t.emplaceBack(2*e+(i+1)/2,2*n+(r+1)/2)}class js{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new qo,this.indexArray=new rs,this.segments=new As,this.programConfigurations=new Rs(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n){const i=this.layers[0],r=[];let o=null,s=!1;"circle"===i.type&&(o=i.layout.get("circle-sort-key"),s=!o.isConstant());for(const{feature:e,id:i,index:a,sourceLayerIndex:A}of t){const t=this.layers[0]._featureFilter.needGeometry,l=Gs(e,t);if(!this.layers[0]._featureFilter.filter(new jr(this.zoom),l,n))continue;const c=s?o.evaluate(l,{},n):void 0,u={id:i,properties:e.properties,type:e.type,sourceLayerIndex:A,index:a,geometry:t?l.geometry:Os(e),patterns:{},sortKey:c};r.push(u)}s&&r.sort(((t,e)=>t.sortKey-e.sortKey));for(const i of r){const{geometry:r,index:o,sourceLayerIndex:s}=i,a=t[o].feature;this.addFeature(i,r,o,n),e.featureIndex.insert(a,r,o,s,this.index)}}update(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,as),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,e,n,i){for(const n of e)for(const e of n){const n=e.x,i=e.y;if(n<0||n>=Ts||i<0||i>=Ts)continue;const r=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),o=r.vertexLength;Us(this.layoutVertexArray,n,i,-1,-1),Us(this.layoutVertexArray,n,i,1,-1),Us(this.layoutVertexArray,n,i,1,1),Us(this.layoutVertexArray,n,i,-1,1),this.indexArray.emplaceBack(o,o+1,o+2),this.indexArray.emplaceBack(o,o+3,o+2),r.vertexLength+=4,r.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{},i)}}function Ys(t,e){for(let n=0;n<t.length;n++)if(Xs(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(Xs(t,e[n]))return!0;return!!qs(t,e)}function Ks(t,e,n){return!!Xs(t,e)||!!Vs(e,t,n)}function zs(t,e){if(1===t.length)return Zs(e,t[0]);for(let n=0;n<e.length;n++){const i=e[n];for(let e=0;e<i.length;e++)if(Xs(t,i[e]))return!0}for(let n=0;n<t.length;n++)if(Zs(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(qs(t,e[n]))return!0;return!1}function Js(t,e,n){if(t.length>1){if(qs(t,e))return!0;for(let i=0;i<e.length;i++)if(Vs(e[i],t,n))return!0}for(let i=0;i<t.length;i++)if(Vs(t[i],e,n))return!0;return!1}function qs(t,e){if(0===t.length||0===e.length)return!1;for(let n=0;n<t.length-1;n++){const i=t[n],r=t[n+1];for(let t=0;t<e.length-1;t++)if(Hs(i,r,e[t],e[t+1]))return!0}return!1}function Hs(t,e,n,i){return B(t,n,i)!==B(e,n,i)&&B(t,e,n)!==B(t,e,i)}function Vs(t,e,n){const i=n*n;if(1===e.length)return t.distSqr(e[0])<i;for(let n=1;n<e.length;n++)if(Ws(t,e[n-1],e[n])<i)return!0;return!1}function Ws(t,e,n){const i=e.distSqr(n);if(0===i)return t.distSqr(e);const r=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/i;return t.distSqr(r<0?e:r>1?n:n.sub(e)._mult(r)._add(e))}function Zs(t,e){let n,i,r,o=!1;for(let s=0;s<t.length;s++){n=t[s];for(let t=0,s=n.length-1;t<n.length;s=t++)i=n[t],r=n[s],i.y>e.y!=r.y>e.y&&e.x<(r.x-i.x)*(e.y-i.y)/(r.y-i.y)+i.x&&(o=!o)}return o}function Xs(t,e){let n=!1;for(let i=0,r=t.length-1;i<t.length;r=i++){const o=t[i],s=t[r];o.y>e.y!=s.y>e.y&&e.x<(s.x-o.x)*(e.y-o.y)/(s.y-o.y)+o.x&&(n=!n)}return n}function $s(t,e,n){const i=n[0],r=n[2];if(t.x<i.x&&e.x<i.x||t.x>r.x&&e.x>r.x||t.y<i.y&&e.y<i.y||t.y>r.y&&e.y>r.y)return!1;const o=B(t,e,n[0]);return o!==B(t,e,n[1])||o!==B(t,e,n[2])||o!==B(t,e,n[3])}function ta(t,e,n){const i=e.paint.get(t).value;return"constant"===i.kind?i.value:n.programConfigurations.get(e.id).getMaxValue(t)}function ea(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function na(t,e,n,i,r){if(!e[0]&&!e[1])return t;const s=o.convert(e)._mult(r);"viewport"===n&&s._rotate(-i);const a=[];for(let e=0;e<t.length;e++)a.push(t[e].sub(s));return a}let ia,ra;Er("CircleBucket",js,{omit:["layers"]});var oa={get paint(){return ra=ra||new no({"circle-radius":new Xr(J.paint_circle["circle-radius"]),"circle-color":new Xr(J.paint_circle["circle-color"]),"circle-blur":new Xr(J.paint_circle["circle-blur"]),"circle-opacity":new Xr(J.paint_circle["circle-opacity"]),"circle-translate":new Zr(J.paint_circle["circle-translate"]),"circle-translate-anchor":new Zr(J.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Zr(J.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Zr(J.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Xr(J.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Xr(J.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Xr(J.paint_circle["circle-stroke-opacity"])})},get layout(){return ia=ia||new no({"circle-sort-key":new Xr(J.layout_circle["circle-sort-key"])})}},sa=1e-6,aa="undefined"!=typeof Float32Array?Float32Array:Array;function Aa(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function la(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],A=e[5],l=e[6],c=e[7],u=e[8],h=e[9],g=e[10],d=e[11],p=e[12],f=e[13],m=e[14],I=e[15],y=n[0],C=n[1],E=n[2],_=n[3];return t[0]=y*i+C*a+E*u+_*p,t[1]=y*r+C*A+E*h+_*f,t[2]=y*o+C*l+E*g+_*m,t[3]=y*s+C*c+E*d+_*I,t[4]=(y=n[4])*i+(C=n[5])*a+(E=n[6])*u+(_=n[7])*p,t[5]=y*r+C*A+E*h+_*f,t[6]=y*o+C*l+E*g+_*m,t[7]=y*s+C*c+E*d+_*I,t[8]=(y=n[8])*i+(C=n[9])*a+(E=n[10])*u+(_=n[11])*p,t[9]=y*r+C*A+E*h+_*f,t[10]=y*o+C*l+E*g+_*m,t[11]=y*s+C*c+E*d+_*I,t[12]=(y=n[12])*i+(C=n[13])*a+(E=n[14])*u+(_=n[15])*p,t[13]=y*r+C*A+E*h+_*f,t[14]=y*o+C*l+E*g+_*m,t[15]=y*s+C*c+E*d+_*I,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var ca,ua=la;function ha(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*s,t[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*s,t[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*s,t[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*s,t}ca=new aa(4),aa!=Float32Array&&(ca[0]=0,ca[1]=0,ca[2]=0,ca[3]=0);class ga extends ro{constructor(t){super(t,oa)}createBucket(t){return new js(t)}queryRadius(t){const e=t;return ta("circle-radius",this,e)+ta("circle-stroke-width",this,e)+ea(this.paint.get("circle-translate"))}queryIntersectsFeature(t,e,n,i,r,o,s,a){const A=na(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,s),l=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n),c="map"===this.paint.get("circle-pitch-alignment"),u=c?A:function(t,e){return t.map((t=>da(t,e)))}(A,a),h=c?l*s:l;for(const t of i)for(const e of t){const t=c?e:da(e,a);let n=h;const i=ha([],[e.x,e.y,0,1],a);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?n*=i[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(n*=o.cameraToCenterDistance/i[3]),Ks(u,t,n))return!0}return!1}}function da(t,e){const n=ha([],[t.x,t.y,0,1],e);return new o(n[0]/n[3],n[1]/n[3])}class pa extends js{}let fa;Er("HeatmapBucket",pa,{omit:["layers"]});var ma={get paint(){return fa=fa||new no({"heatmap-radius":new Xr(J.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Xr(J.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Zr(J.paint_heatmap["heatmap-intensity"]),"heatmap-color":new eo(J.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Zr(J.paint_heatmap["heatmap-opacity"])})}};function Ia(t,{width:e,height:n},i,r){if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==e*n*i)throw new RangeError(`mismatched image size. expected: ${r.length} but got: ${e*n*i}`)}else r=new Uint8Array(e*n*i);return t.width=e,t.height=n,t.data=r,t}function ya(t,{width:e,height:n},i){if(e===t.width&&n===t.height)return;const r=Ia({},{width:e,height:n},i);Ca(t,r,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,e),height:Math.min(t.height,n)},i),t.width=e,t.height=n,t.data=r.data}function Ca(t,e,n,i,r,o){if(0===r.width||0===r.height)return e;if(r.width>t.width||r.height>t.height||n.x>t.width-r.width||n.y>t.height-r.height)throw new RangeError("out of range source coordinates for image copy");if(r.width>e.width||r.height>e.height||i.x>e.width-r.width||i.y>e.height-r.height)throw new RangeError("out of range destination coordinates for image copy");const s=t.data,a=e.data;if(s===a)throw new Error("srcData equals dstData, so image is already copied");for(let A=0;A<r.height;A++){const l=((n.y+A)*t.width+n.x)*o,c=((i.y+A)*e.width+i.x)*o;for(let t=0;t<r.width*o;t++)a[c+t]=s[l+t]}return e}class Ea{constructor(t,e){Ia(this,t,1,e)}resize(t){ya(this,t,1)}clone(){return new Ea({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,n,i,r){Ca(t,e,n,i,r,1)}}class _a{constructor(t,e){Ia(this,t,4,e)}resize(t){ya(this,t,4)}replace(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new _a({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,n,i,r){Ca(t,e,n,i,r,4)}}function va(t){const e={},n=t.resolution||256,i=t.clips?t.clips.length:1,r=t.image||new _a({width:n,height:i});if(Math.log(n)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${n}`);const o=(n,i,o)=>{e[t.evaluationKey]=o;const s=t.expression.evaluate(e);r.data[n+i+0]=Math.floor(255*s.r/s.a),r.data[n+i+1]=Math.floor(255*s.g/s.a),r.data[n+i+2]=Math.floor(255*s.b/s.a),r.data[n+i+3]=Math.floor(255*s.a)};if(t.clips)for(let e=0,r=0;e<i;++e,r+=4*n)for(let i=0,s=0;i<n;i++,s+=4){const a=i/(n-1),{start:A,end:l}=t.clips[e];o(r,s,A*(1-a)+l*a)}else for(let t=0,e=0;t<n;t++,e+=4)o(0,e,t/(n-1));return r}Er("AlphaImage",Ea),Er("RGBAImage",_a);class Ba extends ro{createBucket(t){return new pa(t)}constructor(t){super(t,ma),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"heatmap-color"===t&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=va({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}}let wa;var ba={get paint(){return wa=wa||new no({"hillshade-illumination-direction":new Zr(J.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Zr(J.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Zr(J.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Zr(J.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Zr(J.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Zr(J.paint_hillshade["hillshade-accent-color"])})}};class Qa extends ro{constructor(t){super(t,ba)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}}const xa=Ao([{name:"a_pos",components:2,type:"Int16"}],4),{members:Da}=xa;function Sa(t,e,n=2){const i=e&&e.length,r=i?e[0]*n:t.length;let o=Ma(t,0,r,n,!0);const s=[];if(!o||o.next===o.prev)return s;let a,A,l;if(i&&(o=function(t,e,n,i){const r=[];for(let n=0,o=e.length;n<o;n++){const s=Ma(t,e[n]*i,n<o-1?e[n+1]*i:t.length,i,!1);s===s.next&&(s.steiner=!0),r.push(ja(s))}r.sort(Fa);for(let t=0;t<r.length;t++)n=Oa(r[t],n);return n}(t,e,o,n)),t.length>80*n){a=1/0,A=1/0;let e=-1/0,i=-1/0;for(let o=n;o<r;o+=n){const n=t[o],r=t[o+1];n<a&&(a=n),r<A&&(A=r),n>e&&(e=n),r>i&&(i=r)}l=Math.max(e-a,i-A),l=0!==l?32767/l:0}return Ra(o,s,n,a,A,l,0),s}function Ma(t,e,n,i,r){let o;if(r===function(t,e,n,i){let r=0;for(let o=e,s=n-i;o<n;o+=i)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}(t,e,n,i)>0)for(let r=e;r<n;r+=i)o=Xa(r/i|0,t[r],t[r+1],o);else for(let r=n-i;r>=e;r-=i)o=Xa(r/i|0,t[r],t[r+1],o);return o&&Ja(o,o.next)&&($a(o),o=o.next),o}function ka(t,e){if(!t)return t;e||(e=t);let n,i=t;do{if(n=!1,i.steiner||!Ja(i,i.next)&&0!==za(i.prev,i,i.next))i=i.next;else{if($a(i),i=e=i.prev,i===i.next)break;n=!0}}while(n||i!==e);return e}function Ra(t,e,n,i,r,o,s){if(!t)return;!s&&o&&function(t,e,n,i){let r=t;do{0===r.z&&(r.z=Ua(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){let e,n=1;do{let i,r=t;t=null;let o=null;for(e=0;r;){e++;let s=r,a=0;for(let t=0;t<n&&(a++,s=s.nextZ,s);t++);let A=n;for(;a>0||A>0&&s;)0!==a&&(0===A||!s||r.z<=s.z)?(i=r,r=r.nextZ,a--):(i=s,s=s.nextZ,A--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;r=s}o.nextZ=null,n*=2}while(e>1)}(r)}(t,i,r,o);let a=t;for(;t.prev!==t.next;){const A=t.prev,l=t.next;if(o?Pa(t,i,r,o):Na(t))e.push(A.i,t.i,l.i),$a(t),t=l.next,a=l.next;else if((t=l)===a){s?1===s?Ra(t=Ta(ka(t),e),e,n,i,r,o,2):2===s&&La(t,e,n,i,r,o):Ra(ka(t),e,n,i,r,o,1);break}}}function Na(t){const e=t.prev,n=t,i=t.next;if(za(e,n,i)>=0)return!1;const r=e.x,o=n.x,s=i.x,a=e.y,A=n.y,l=i.y,c=r<o?r<s?r:s:o<s?o:s,u=a<A?a<l?a:l:A<l?A:l,h=r>o?r>s?r:s:o>s?o:s,g=a>A?a>l?a:l:A>l?A:l;let d=i.next;for(;d!==e;){if(d.x>=c&&d.x<=h&&d.y>=u&&d.y<=g&&Ya(r,a,o,A,s,l,d.x,d.y)&&za(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}function Pa(t,e,n,i){const r=t.prev,o=t,s=t.next;if(za(r,o,s)>=0)return!1;const a=r.x,A=o.x,l=s.x,c=r.y,u=o.y,h=s.y,g=a<A?a<l?a:l:A<l?A:l,d=c<u?c<h?c:h:u<h?u:h,p=a>A?a>l?a:l:A>l?A:l,f=c>u?c>h?c:h:u>h?u:h,m=Ua(g,d,e,n,i),I=Ua(p,f,e,n,i);let y=t.prevZ,C=t.nextZ;for(;y&&y.z>=m&&C&&C.z<=I;){if(y.x>=g&&y.x<=p&&y.y>=d&&y.y<=f&&y!==r&&y!==s&&Ya(a,c,A,u,l,h,y.x,y.y)&&za(y.prev,y,y.next)>=0)return!1;if(y=y.prevZ,C.x>=g&&C.x<=p&&C.y>=d&&C.y<=f&&C!==r&&C!==s&&Ya(a,c,A,u,l,h,C.x,C.y)&&za(C.prev,C,C.next)>=0)return!1;C=C.nextZ}for(;y&&y.z>=m;){if(y.x>=g&&y.x<=p&&y.y>=d&&y.y<=f&&y!==r&&y!==s&&Ya(a,c,A,u,l,h,y.x,y.y)&&za(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;C&&C.z<=I;){if(C.x>=g&&C.x<=p&&C.y>=d&&C.y<=f&&C!==r&&C!==s&&Ya(a,c,A,u,l,h,C.x,C.y)&&za(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function Ta(t,e){let n=t;do{const i=n.prev,r=n.next.next;!Ja(i,r)&&qa(i,n,n.next,r)&&Wa(i,r)&&Wa(r,i)&&(e.push(i.i,n.i,r.i),$a(n),$a(n.next),n=t=r),n=n.next}while(n!==t);return ka(n)}function La(t,e,n,i,r,o){let s=t;do{let t=s.next.next;for(;t!==s.prev;){if(s.i!==t.i&&Ka(s,t)){let a=Za(s,t);return s=ka(s,s.next),a=ka(a,a.next),Ra(s,e,n,i,r,o,0),void Ra(a,e,n,i,r,o,0)}t=t.next}s=s.next}while(s!==t)}function Fa(t,e){return t.x-e.x}function Oa(t,e){const n=function(t,e){let n=e;const i=t.x,r=t.y;let o,s=-1/0;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const t=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=i&&t>s&&(s=t,o=n.x<n.next.x?n:n.next,t===i))return o}n=n.next}while(n!==e);if(!o)return null;const a=o,A=o.x,l=o.y;let c=1/0;n=o;do{if(i>=n.x&&n.x>=A&&i!==n.x&&Ya(r<l?i:s,r,A,l,r<l?s:i,r,n.x,n.y)){const e=Math.abs(r-n.y)/(i-n.x);Wa(n,t)&&(e<c||e===c&&(n.x>o.x||n.x===o.x&&Ga(o,n)))&&(o=n,c=e)}n=n.next}while(n!==a);return o}(t,e);if(!n)return e;const i=Za(n,t);return ka(i,i.next),ka(n,n.next)}function Ga(t,e){return za(t.prev,t,e.prev)<0&&za(e.next,t,t.next)<0}function Ua(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ja(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Ya(t,e,n,i,r,o,s,a){return(r-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(i-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(r-s)*(i-a)}function Ka(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&qa(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(Wa(t,e)&&Wa(e,t)&&function(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(za(t.prev,t,e.prev)||za(t,e.prev,e))||Ja(t,e)&&za(t.prev,t,t.next)>0&&za(e.prev,e,e.next)>0)}function za(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Ja(t,e){return t.x===e.x&&t.y===e.y}function qa(t,e,n,i){const r=Va(za(t,e,n)),o=Va(za(t,e,i)),s=Va(za(n,i,t)),a=Va(za(n,i,e));return r!==o&&s!==a||!(0!==r||!Ha(t,n,e))||!(0!==o||!Ha(t,i,e))||!(0!==s||!Ha(n,t,i))||!(0!==a||!Ha(n,e,i))}function Ha(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Va(t){return t>0?1:t<0?-1:0}function Wa(t,e){return za(t.prev,t,t.next)<0?za(t,e,t.next)>=0&&za(t,t.prev,e)>=0:za(t,e,t.prev)<0||za(t,t.next,e)<0}function Za(t,e){const n=tA(t.i,t.x,t.y),i=tA(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function Xa(t,e,n,i){const r=tA(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function $a(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function tA(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function eA(t,e,n){const i=n.patternDependencies;let r=!1;for(const n of e){const e=n.paint.get(`${t}-pattern`);e.isConstant()||(r=!0);const o=e.constantOr(null);o&&(r=!0,i[o.to]=!0,i[o.from]=!0)}return r}function nA(t,e,n,i,r){const o=r.patternDependencies;for(const s of e){const e=s.paint.get(`${t}-pattern`).value;if("constant"!==e.kind){let t=e.evaluate({zoom:i-1},n,{},r.availableImages),a=e.evaluate({zoom:i},n,{},r.availableImages),A=e.evaluate({zoom:i+1},n,{},r.availableImages);t=t&&t.name?t.name:t,a=a&&a.name?a.name:a,A=A&&A.name?A.name:A,o[t]=!0,o[a]=!0,o[A]=!0,n.patterns[s.id]={min:t,mid:a,max:A}}}return n}class iA{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ho,this.indexArray=new rs,this.indexArray2=new os,this.programConfigurations=new Rs(t.layers,t.zoom),this.segments=new As,this.segments2=new As,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n){this.hasPattern=eA("fill",this.layers,e);const i=this.layers[0].layout.get("fill-sort-key"),r=!i.isConstant(),o=[];for(const{feature:s,id:a,index:A,sourceLayerIndex:l}of t){const t=this.layers[0]._featureFilter.needGeometry,c=Gs(s,t);if(!this.layers[0]._featureFilter.filter(new jr(this.zoom),c,n))continue;const u=r?i.evaluate(c,{},n,e.availableImages):void 0,h={id:a,properties:s.properties,type:s.type,sourceLayerIndex:l,index:A,geometry:t?c.geometry:Os(s),patterns:{},sortKey:u};o.push(h)}r&&o.sort(((t,e)=>t.sortKey-e.sortKey));for(const i of o){const{geometry:r,index:o,sourceLayerIndex:s}=i;if(this.hasPattern){const t=nA("fill",this.layers,i,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(i,r,o,n,{});e.featureIndex.insert(t[o].feature,r,o,s,this.index)}}update(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}addFeatures(t,e,n){for(const t of this.patternFeatures)this.addFeature(t,t.geometry,t.index,e,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Da),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,e,n,i,r){for(const t of yn(e,500)){let e=0;for(const n of t)e+=n.length;const n=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray),i=n.vertexLength,r=[],o=[];for(const e of t){if(0===e.length)continue;e!==t[0]&&o.push(r.length/2);const n=this.segments2.prepareSegment(e.length,this.layoutVertexArray,this.indexArray2),i=n.vertexLength;this.layoutVertexArray.emplaceBack(e[0].x,e[0].y),this.indexArray2.emplaceBack(i+e.length-1,i),r.push(e[0].x),r.push(e[0].y);for(let t=1;t<e.length;t++)this.layoutVertexArray.emplaceBack(e[t].x,e[t].y),this.indexArray2.emplaceBack(i+t-1,i+t),r.push(e[t].x),r.push(e[t].y);n.vertexLength+=e.length,n.primitiveLength+=e.length}const s=Sa(r,o);for(let t=0;t<s.length;t+=3)this.indexArray.emplaceBack(i+s[t],i+s[t+1],i+s[t+2]);n.vertexLength+=e,n.primitiveLength+=s.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,r,i)}}let rA,oA;Er("FillBucket",iA,{omit:["layers","patternFeatures"]});var sA={get paint(){return oA=oA||new no({"fill-antialias":new Zr(J.paint_fill["fill-antialias"]),"fill-opacity":new Xr(J.paint_fill["fill-opacity"]),"fill-color":new Xr(J.paint_fill["fill-color"]),"fill-outline-color":new Xr(J.paint_fill["fill-outline-color"]),"fill-translate":new Zr(J.paint_fill["fill-translate"]),"fill-translate-anchor":new Zr(J.paint_fill["fill-translate-anchor"]),"fill-pattern":new $r(J.paint_fill["fill-pattern"])})},get layout(){return rA=rA||new no({"fill-sort-key":new Xr(J.layout_fill["fill-sort-key"])})}};class aA extends ro{constructor(t){super(t,sA)}recalculate(t,e){super.recalculate(t,e);const n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new iA(t)}queryRadius(){return ea(this.paint.get("fill-translate"))}queryIntersectsFeature(t,e,n,i,r,o,s){return zs(na(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,s),i)}isTileClipped(){return!0}}const AA=Ao([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),lA=Ao([{name:"a_centroid",components:2,type:"Int16"}],4),{members:cA}=AA;var uA={},hA=i,gA=dA;function dA(t,e,n,i,r){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=i,this._values=r,t.readFields(pA,this,e)}function pA(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var i=e._keys[t.readVarint()],r=e._values[t.readVarint()];e.properties[i]=r}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function fA(t){for(var e,n,i=0,r=0,o=t.length,s=o-1;r<o;s=r++)i+=((n=t[s]).x-(e=t[r]).x)*(e.y+n.y);return i}dA.types=["Unknown","Point","LineString","Polygon"],dA.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,i=1,r=0,o=0,s=0,a=[];t.pos<n;){if(r<=0){var A=t.readVarint();i=7&A,r=A>>3}if(r--,1===i||2===i)o+=t.readSVarint(),s+=t.readSVarint(),1===i&&(e&&a.push(e),e=[]),e.push(new hA(o,s));else{if(7!==i)throw new Error("unknown command "+i);e&&e.push(e[0].clone())}}return e&&a.push(e),a},dA.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,i=0,r=0,o=0,s=1/0,a=-1/0,A=1/0,l=-1/0;t.pos<e;){if(i<=0){var c=t.readVarint();n=7&c,i=c>>3}if(i--,1===n||2===n)(r+=t.readSVarint())<s&&(s=r),r>a&&(a=r),(o+=t.readSVarint())<A&&(A=o),o>l&&(l=o);else if(7!==n)throw new Error("unknown command "+n)}return[s,A,a,l]},dA.prototype.toGeoJSON=function(t,e,n){var i,r,o=this.extent*Math.pow(2,n),s=this.extent*t,a=this.extent*e,A=this.loadGeometry(),l=dA.types[this.type];function c(t){for(var e=0;e<t.length;e++){var n=t[e];t[e]=[360*(n.x+s)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+a)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var u=[];for(i=0;i<A.length;i++)u[i]=A[i][0];c(A=u);break;case 2:for(i=0;i<A.length;i++)c(A[i]);break;case 3:for(A=function(t){var e=t.length;if(e<=1)return[t];for(var n,i,r=[],o=0;o<e;o++){var s=fA(t[o]);0!==s&&(void 0===i&&(i=s<0),i===s<0?(n&&r.push(n),n=[t[o]]):n.push(t[o]))}return n&&r.push(n),r}(A),i=0;i<A.length;i++)for(r=0;r<A[i].length;r++)c(A[i][r])}1===A.length?A=A[0]:l="Multi"+l;var h={type:"Feature",geometry:{type:l,coordinates:A},properties:this.properties};return"id"in this&&(h.id=this.id),h};var mA=gA,IA=yA;function yA(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(CA,this,e),this.length=this._features.length}function CA(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var i=t.readVarint()>>3;e=1===i?t.readString():2===i?t.readFloat():3===i?t.readDouble():4===i?t.readVarint64():5===i?t.readVarint():6===i?t.readSVarint():7===i?t.readBoolean():null}return e}(n))}yA.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new mA(this._pbf,e,this.extent,this._keys,this._values)};var EA=IA;function _A(t,e,n){if(3===t){var i=new EA(n,n.readVarint()+n.pos);i.length&&(e[i.name]=i)}}uA.VectorTile=function(t,e){this.layers=t.readFields(_A,{},e)},uA.VectorTileFeature=gA,uA.VectorTileLayer=IA;const vA=uA.VectorTileFeature.types,BA=Math.pow(2,13);function wA(t,e,n,i,r,o,s,a){t.emplaceBack(e,n,2*Math.floor(i*BA)+s,r*BA*2,o*BA*2,Math.round(a))}class bA{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Vo,this.centroidVertexArray=new Jo,this.indexArray=new rs,this.programConfigurations=new Rs(t.layers,t.zoom),this.segments=new As,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n){this.features=[],this.hasPattern=eA("fill-extrusion",this.layers,e);for(const{feature:i,id:r,index:o,sourceLayerIndex:s}of t){const t=this.layers[0]._featureFilter.needGeometry,a=Gs(i,t);if(!this.layers[0]._featureFilter.filter(new jr(this.zoom),a,n))continue;const A={id:r,sourceLayerIndex:s,index:o,geometry:t?a.geometry:Os(i),properties:i.properties,type:i.type,patterns:{}};this.hasPattern?this.features.push(nA("fill-extrusion",this.layers,A,this.zoom,e)):this.addFeature(A,A.geometry,o,n,{}),e.featureIndex.insert(i,A.geometry,o,s,this.index,!0)}}addFeatures(t,e,n){for(const t of this.features){const{geometry:i}=t;this.addFeature(t,i,t.index,e,n)}}update(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,cA),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,lA.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,e,n,i,r){for(const n of yn(e,500)){const e={x:0,y:0,vertexCount:0};let i=0;for(const t of n)i+=t.length;let r=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const t of n){if(0===t.length)continue;if(xA(t))continue;let n=0;for(let i=0;i<t.length;i++){const o=t[i];if(i>=1){const s=t[i-1];if(!QA(o,s)){r.vertexLength+4>As.MAX_VERTEX_ARRAY_LENGTH&&(r=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const t=o.sub(s)._perp()._unit(),i=s.dist(o);n+i>32768&&(n=0),wA(this.layoutVertexArray,o.x,o.y,t.x,t.y,0,0,n),wA(this.layoutVertexArray,o.x,o.y,t.x,t.y,0,1,n),e.x+=2*o.x,e.y+=2*o.y,e.vertexCount+=2,n+=i,wA(this.layoutVertexArray,s.x,s.y,t.x,t.y,0,0,n),wA(this.layoutVertexArray,s.x,s.y,t.x,t.y,0,1,n),e.x+=2*s.x,e.y+=2*s.y,e.vertexCount+=2;const a=r.vertexLength;this.indexArray.emplaceBack(a,a+2,a+1),this.indexArray.emplaceBack(a+1,a+2,a+3),r.vertexLength+=4,r.primitiveLength+=2}}}}if(r.vertexLength+i>As.MAX_VERTEX_ARRAY_LENGTH&&(r=this.segments.prepareSegment(i,this.layoutVertexArray,this.indexArray)),"Polygon"!==vA[t.type])continue;const o=[],s=[],a=r.vertexLength;for(const t of n)if(0!==t.length){t!==n[0]&&s.push(o.length/2);for(let n=0;n<t.length;n++){const i=t[n];wA(this.layoutVertexArray,i.x,i.y,0,0,1,1,0),e.x+=i.x,e.y+=i.y,e.vertexCount+=1,o.push(i.x),o.push(i.y)}}const A=Sa(o,s);for(let t=0;t<A.length;t+=3)this.indexArray.emplaceBack(a+A[t],a+A[t+2],a+A[t+1]);r.primitiveLength+=A.length/3,r.vertexLength+=i;for(let t=0;t<e.vertexCount;t++){const t=Math.floor(e.x/e.vertexCount),n=Math.floor(e.y/e.vertexCount);this.centroidVertexArray.emplaceBack(t,n)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,r,i)}}function QA(t,e){return t.x===e.x&&(t.x<0||t.x>Ts)||t.y===e.y&&(t.y<0||t.y>Ts)}function xA(t){return t.every((t=>t.x<0))||t.every((t=>t.x>Ts))||t.every((t=>t.y<0))||t.every((t=>t.y>Ts))}let DA;Er("FillExtrusionBucket",bA,{omit:["layers","features"]});var SA={get paint(){return DA=DA||new no({"fill-extrusion-opacity":new Zr(J["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Xr(J["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Zr(J["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Zr(J["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new $r(J["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Xr(J["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Xr(J["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Zr(J["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class MA extends ro{constructor(t){super(t,SA)}createBucket(t){return new bA(t)}queryRadius(){return ea(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(t,e,n,i,r,s,a,A){const l=na(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),s.angle,a),c=this.paint.get("fill-extrusion-height").evaluate(e,n),u=this.paint.get("fill-extrusion-base").evaluate(e,n),h=function(t,e){const n=[];for(const i of t){const t=[i.x,i.y,0,1];ha(t,t,e),n.push(new o(t[0]/t[3],t[1]/t[3]))}return n}(l,A),g=function(t,e,n,i){const r=[],s=[],a=i[8]*e,A=i[9]*e,l=i[10]*e,c=i[11]*e,u=i[8]*n,h=i[9]*n,g=i[10]*n,d=i[11]*n;for(const e of t){const t=[],n=[];for(const r of e){const e=r.x,s=r.y,p=i[0]*e+i[4]*s+i[12],f=i[1]*e+i[5]*s+i[13],m=i[2]*e+i[6]*s+i[14],I=i[3]*e+i[7]*s+i[15],y=m+l,C=I+c,E=p+u,_=f+h,v=m+g,B=I+d,w=new o((p+a)/C,(f+A)/C);w.z=y/C,t.push(w);const b=new o(E/B,_/B);b.z=v/B,n.push(b)}r.push(t),s.push(n)}return[r,s]}(i,u,c,A);return function(t,e,n){let i=1/0;zs(n,e)&&(i=RA(n,e[0]));for(let r=0;r<e.length;r++){const o=e[r],s=t[r];for(let t=0;t<o.length-1;t++){const e=o[t],r=[e,o[t+1],s[t+1],s[t],e];Ys(n,r)&&(i=Math.min(i,RA(n,r)))}}return i!==1/0&&i}(g[0],g[1],h)}}function kA(t,e){return t.x*e.x+t.y*e.y}function RA(t,e){if(1===t.length){let n=0;const i=e[n++];let r;for(;!r||i.equals(r);)if(r=e[n++],!r)return 1/0;for(;n<e.length;n++){const o=e[n],s=t[0],a=r.sub(i),A=o.sub(i),l=s.sub(i),c=kA(a,a),u=kA(a,A),h=kA(A,A),g=kA(l,a),d=kA(l,A),p=c*h-u*u,f=(h*g-u*d)/p,m=(c*d-u*g)/p,I=i.z*(1-f-m)+r.z*f+o.z*m;if(isFinite(I))return I}return 1/0}{let t=1/0;for(const n of e)t=Math.min(t,n.z);return t}}const NA=Ao([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:PA}=NA,TA=Ao([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:LA}=TA,FA=uA.VectorTileFeature.types,OA=Math.cos(Math.PI/180*37.5),GA=Math.pow(2,14)/.5;class UA{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((t=>{this.gradients[t.id]={}})),this.layoutVertexArray=new Wo,this.layoutVertexArray2=new Zo,this.indexArray=new rs,this.programConfigurations=new Rs(t.layers,t.zoom),this.segments=new As,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n){this.hasPattern=eA("line",this.layers,e);const i=this.layers[0].layout.get("line-sort-key"),r=!i.isConstant(),o=[];for(const{feature:e,id:s,index:a,sourceLayerIndex:A}of t){const t=this.layers[0]._featureFilter.needGeometry,l=Gs(e,t);if(!this.layers[0]._featureFilter.filter(new jr(this.zoom),l,n))continue;const c=r?i.evaluate(l,{},n):void 0,u={id:s,properties:e.properties,type:e.type,sourceLayerIndex:A,index:a,geometry:t?l.geometry:Os(e),patterns:{},sortKey:c};o.push(u)}r&&o.sort(((t,e)=>t.sortKey-e.sortKey));for(const i of o){const{geometry:r,index:o,sourceLayerIndex:s}=i;if(this.hasPattern){const t=nA("line",this.layers,i,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(i,r,o,n,{});e.featureIndex.insert(t[o].feature,r,o,s,this.index)}}update(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}addFeatures(t,e,n){for(const t of this.patternFeatures)this.addFeature(t,t.geometry,t.index,e,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,LA)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,PA),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,e,n,i,r){const o=this.layers[0].layout,s=o.get("line-join").evaluate(t,{}),a=o.get("line-cap"),A=o.get("line-miter-limit"),l=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const n of e)this.addLine(n,t,s,a,A,l);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,r,i)}addLine(t,e,n,i,r,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let e=0;e<t.length-1;e++)this.totalDistance+=t[e].dist(t[e+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const s="Polygon"===FA[e.type];let a=t.length;for(;a>=2&&t[a-1].equals(t[a-2]);)a--;let A=0;for(;A<a-1&&t[A].equals(t[A+1]);)A++;if(a<(s?3:2))return;"bevel"===n&&(r=1.05);const l=this.overscaling<=16?15*Ts/(512*this.overscaling):0,c=this.segments.prepareSegment(10*a,this.layoutVertexArray,this.indexArray);let u,h,g,d,p;this.e1=this.e2=-1,s&&(u=t[a-2],p=t[A].sub(u)._unit()._perp());for(let e=A;e<a;e++){if(g=e===a-1?s?t[A+1]:void 0:t[e+1],g&&t[e].equals(g))continue;p&&(d=p),u&&(h=u),u=t[e],p=g?g.sub(u)._unit()._perp():d,d=d||p;let f=d.add(p);0===f.x&&0===f.y||f._unit();const m=d.x*p.x+d.y*p.y,I=f.x*p.x+f.y*p.y,y=0!==I?1/I:1/0,C=2*Math.sqrt(2-2*I),E=I<OA&&h&&g,_=d.x*p.y-d.y*p.x>0;if(E&&e>A){const t=u.dist(h);if(t>2*l){const e=u.sub(u.sub(h)._mult(l/t)._round());this.updateDistance(h,e),this.addCurrentVertex(e,d,0,0,c),h=e}}const v=h&&g;let B=v?n:s?"butt":i;if(v&&"round"===B&&(y<o?B="miter":y<=2&&(B="fakeround")),"miter"===B&&y>r&&(B="bevel"),"bevel"===B&&(y>2&&(B="flipbevel"),y<r&&(B="miter")),h&&this.updateDistance(h,u),"miter"===B)f._mult(y),this.addCurrentVertex(u,f,0,0,c);else if("flipbevel"===B){if(y>100)f=p.mult(-1);else{const t=y*d.add(p).mag()/d.sub(p).mag();f._perp()._mult(t*(_?-1:1))}this.addCurrentVertex(u,f,0,0,c),this.addCurrentVertex(u,f.mult(-1),0,0,c)}else if("bevel"===B||"fakeround"===B){const t=-Math.sqrt(y*y-1),e=_?t:0,n=_?0:t;if(h&&this.addCurrentVertex(u,d,e,n,c),"fakeround"===B){const t=Math.round(180*C/Math.PI/20);for(let e=1;e<t;e++){let n=e/t;if(.5!==n){const t=n-.5;n+=n*t*(n-1)*((1.0904+m*(m*(3.55645-1.43519*m)-3.2452))*t*t+(.848013+m*(.215638*m-1.06021)))}const i=p.sub(d)._mult(n)._add(d)._unit()._mult(_?-1:1);this.addHalfVertex(u,i.x,i.y,!1,_,0,c)}}g&&this.addCurrentVertex(u,p,-e,-n,c)}else if("butt"===B)this.addCurrentVertex(u,f,0,0,c);else if("square"===B){const t=h?1:-1;this.addCurrentVertex(u,f,t,t,c)}else"round"===B&&(h&&(this.addCurrentVertex(u,d,0,0,c),this.addCurrentVertex(u,d,1,1,c,!0)),g&&(this.addCurrentVertex(u,p,-1,-1,c,!0),this.addCurrentVertex(u,p,0,0,c)));if(E&&e<a-1){const t=u.dist(g);if(t>2*l){const e=u.add(g.sub(u)._mult(l/t)._round());this.updateDistance(u,e),this.addCurrentVertex(e,p,0,0,c),u=e}}}}addCurrentVertex(t,e,n,i,r,o=!1){const s=e.y*i-e.x,a=-e.y-e.x*i;this.addHalfVertex(t,e.x+e.y*n,e.y-e.x*n,o,!1,n,r),this.addHalfVertex(t,s,a,o,!0,-i,r),this.distance>GA/2&&0===this.totalDistance&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(t,e,n,i,r,o))}addHalfVertex({x:t,y:e},n,i,r,o,s,a){const A=.5*(this.lineClips?this.scaledDistance*(GA-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(r?1:0),(e<<1)+(o?1:0),Math.round(63*n)+128,Math.round(63*i)+128,1+(0===s?0:s<0?-1:1)|(63&A)<<2,A>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const l=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),a.primitiveLength++),o?this.e2=l:this.e1=l}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,e){this.distance+=t.dist(e),this.updateScaledDistance()}}let jA,YA;Er("LineBucket",UA,{omit:["layers","patternFeatures"]});var KA={get paint(){return YA=YA||new no({"line-opacity":new Xr(J.paint_line["line-opacity"]),"line-color":new Xr(J.paint_line["line-color"]),"line-translate":new Zr(J.paint_line["line-translate"]),"line-translate-anchor":new Zr(J.paint_line["line-translate-anchor"]),"line-width":new Xr(J.paint_line["line-width"]),"line-gap-width":new Xr(J.paint_line["line-gap-width"]),"line-offset":new Xr(J.paint_line["line-offset"]),"line-blur":new Xr(J.paint_line["line-blur"]),"line-dasharray":new to(J.paint_line["line-dasharray"]),"line-pattern":new $r(J.paint_line["line-pattern"]),"line-gradient":new eo(J.paint_line["line-gradient"])})},get layout(){return jA=jA||new no({"line-cap":new Zr(J.layout_line["line-cap"]),"line-join":new Xr(J.layout_line["line-join"]),"line-miter-limit":new Zr(J.layout_line["line-miter-limit"]),"line-round-limit":new Zr(J.layout_line["line-round-limit"]),"line-sort-key":new Xr(J.layout_line["line-sort-key"])})}};class zA extends Xr{possiblyEvaluate(t,e){return e=new jr(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(t,e)}evaluate(t,e,n,i){return e=m({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(t,e,n,i)}}let JA;class qA extends ro{constructor(t){super(t,KA),this.gradientVersion=0,JA||(JA=new zA(KA.paint.properties["line-width"].specification),JA.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(t){if("line-gradient"===t){const t=this.gradientExpression();this.stepInterpolant=!!function(t){return void 0!==t._styleExpression}(t)&&t._styleExpression.expression instanceof ve,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,e){super.recalculate(t,e),this.paint._values["line-floorwidth"]=JA.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new UA(t)}queryRadius(t){const e=t,n=HA(ta("line-width",this,e),ta("line-gap-width",this,e)),i=ta("line-offset",this,e);return n/2+Math.abs(i)+ea(this.paint.get("line-translate"))}queryIntersectsFeature(t,e,n,i,r,s,a){const A=na(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),s.angle,a),l=a/2*HA(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),c=this.paint.get("line-offset").evaluate(e,n);return c&&(i=function(t,e){const n=[];for(let i=0;i<t.length;i++){const r=t[i],s=[];for(let t=0;t<r.length;t++){const n=r[t-1],i=r[t],a=r[t+1],A=0===t?new o(0,0):i.sub(n)._unit()._perp(),l=t===r.length-1?new o(0,0):a.sub(i)._unit()._perp(),c=A._add(l)._unit(),u=c.x*l.x+c.y*l.y;0!==u&&c._mult(1/u),s.push(c._mult(e)._add(i))}n.push(s)}return n}(i,c*a)),function(t,e,n){for(let i=0;i<e.length;i++){const r=e[i];if(t.length>=3)for(let e=0;e<r.length;e++)if(Xs(t,r[e]))return!0;if(Js(t,r,n))return!0}return!1}(A,i,l)}isTileClipped(){return!0}}function HA(t,e){return e>0?e+2*t:t}const VA=Ao([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),WA=Ao([{name:"a_projected_pos",components:3,type:"Float32"}],4);Ao([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const ZA=Ao([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Ao([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const XA=Ao([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),$A=Ao([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function tl(t,e,n){return t.sections.forEach((t=>{t.text=function(t,e,n){const i=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===i?t=t.toLocaleUpperCase():"lowercase"===i&&(t=t.toLocaleLowerCase()),Ur.applyArabicShaping&&(t=Ur.applyArabicShaping(t)),t}(t.text,e,n)})),t}Ao([{name:"triangle",components:3,type:"Uint16"}]),Ao([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ao([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Ao([{type:"Float32",name:"offsetX"}]),Ao([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Ao([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const el={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var nl=24,il=sl,rl=function(t,e,n,i,r){var o,s,a=8*r-i-1,A=(1<<a)-1,l=A>>1,c=-7,u=n?r-1:0,h=n?-1:1,g=t[e+u];for(u+=h,o=g&(1<<-c)-1,g>>=-c,c+=a;c>0;o=256*o+t[e+u],u+=h,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=i;c>0;s=256*s+t[e+u],u+=h,c-=8);if(0===o)o=1-l;else{if(o===A)return s?NaN:1/0*(g?-1:1);s+=Math.pow(2,i),o-=l}return(g?-1:1)*s*Math.pow(2,o-i)},ol=function(t,e,n,i,r,o){var s,a,A,l=8*o-r-1,c=(1<<l)-1,u=c>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,g=i?0:o-1,d=i?1:-1,p=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(A=Math.pow(2,-s))<1&&(s--,A*=2),(e+=s+u>=1?h/A:h*Math.pow(2,1-u))*A>=2&&(s++,A/=2),s+u>=c?(a=0,s=c):s+u>=1?(a=(e*A-1)*Math.pow(2,r),s+=u):(a=e*Math.pow(2,u-1)*Math.pow(2,r),s=0));r>=8;t[n+g]=255&a,g+=d,a/=256,r-=8);for(s=s<<r|a,l+=r;l>0;t[n+g]=255&s,g+=d,s/=256,l-=8);t[n+g-d]|=128*p};function sl(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}sl.Varint=0,sl.Fixed64=1,sl.Bytes=2,sl.Fixed32=5;var al=4294967296,Al=1/al,ll="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8");function cl(t){return t.type===sl.Bytes?t.readVarint()+t.pos:t.pos+1}function ul(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function hl(t,e,n){var i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(i);for(var r=n.pos-1;r>=t;r--)n.buf[r+i]=n.buf[r]}function gl(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function dl(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function pl(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function fl(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function ml(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function Il(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function yl(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function Cl(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function El(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function _l(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function vl(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function Bl(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}sl.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var i=this.readVarint(),r=i>>3,o=this.pos;this.type=7&i,t(r,e,this),this.pos===o&&this.skip(i)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=_l(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Bl(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=_l(this.buf,this.pos)+_l(this.buf,this.pos+4)*al;return this.pos+=8,t},readSFixed64:function(){var t=_l(this.buf,this.pos)+Bl(this.buf,this.pos+4)*al;return this.pos+=8,t},readFloat:function(){var t=rl(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=rl(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,i=this.buf;return e=127&(n=i[this.pos++]),n<128?e:(e|=(127&(n=i[this.pos++]))<<7,n<128?e:(e|=(127&(n=i[this.pos++]))<<14,n<128?e:(e|=(127&(n=i[this.pos++]))<<21,n<128?e:function(t,e,n){var i,r,o=n.buf;if(i=(112&(r=o[n.pos++]))>>4,r<128)return ul(t,i,e);if(i|=(127&(r=o[n.pos++]))<<3,r<128)return ul(t,i,e);if(i|=(127&(r=o[n.pos++]))<<10,r<128)return ul(t,i,e);if(i|=(127&(r=o[n.pos++]))<<17,r<128)return ul(t,i,e);if(i|=(127&(r=o[n.pos++]))<<24,r<128)return ul(t,i,e);if(i|=(1&(r=o[n.pos++]))<<31,r<128)return ul(t,i,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=i[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&ll?function(t,e,n){return ll.decode(t.subarray(e,n))}(this.buf,e,t):function(t,e,n){for(var i="",r=e;r<n;){var o,s,a,A=t[r],l=null,c=A>239?4:A>223?3:A>191?2:1;if(r+c>n)break;1===c?A<128&&(l=A):2===c?128==(192&(o=t[r+1]))&&(l=(31&A)<<6|63&o)<=127&&(l=null):3===c?(s=t[r+2],128==(192&(o=t[r+1]))&&128==(192&s)&&((l=(15&A)<<12|(63&o)<<6|63&s)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(s=t[r+2],a=t[r+3],128==(192&(o=t[r+1]))&&128==(192&s)&&128==(192&a)&&((l=(15&A)<<18|(63&o)<<12|(63&s)<<6|63&a)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,i+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),i+=String.fromCharCode(l),r+=c}return i}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==sl.Bytes)return t.push(this.readVarint(e));var n=cl(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==sl.Bytes)return t.push(this.readSVarint());var e=cl(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==sl.Bytes)return t.push(this.readBoolean());var e=cl(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==sl.Bytes)return t.push(this.readFloat());var e=cl(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==sl.Bytes)return t.push(this.readDouble());var e=cl(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==sl.Bytes)return t.push(this.readFixed32());var e=cl(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==sl.Bytes)return t.push(this.readSFixed32());var e=cl(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==sl.Bytes)return t.push(this.readFixed64());var e=cl(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==sl.Bytes)return t.push(this.readSFixed64());var e=cl(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===sl.Varint)for(;this.buf[this.pos++]>127;);else if(e===sl.Bytes)this.pos=this.readVarint()+this.pos;else if(e===sl.Fixed32)this.pos+=4;else{if(e!==sl.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),vl(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),vl(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),vl(this.buf,-1&t,this.pos),vl(this.buf,Math.floor(t*Al),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),vl(this.buf,-1&t,this.pos),vl(this.buf,Math.floor(t*Al),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,i;if(t>=0?(n=t%4294967296|0,i=t/4294967296|0):(i=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,i=i+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,n.buf[n.pos]=127&(t>>>=7)}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(i,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var i,r,o=0;o<e.length;o++){if((i=e.charCodeAt(o))>55295&&i<57344){if(!r){i>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):r=i;continue}if(i<56320){t[n++]=239,t[n++]=191,t[n++]=189,r=i;continue}i=r-55296<<10|i-56320|65536,r=null}else r&&(t[n++]=239,t[n++]=191,t[n++]=189,r=null);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(i<65536?t[n++]=i>>12|224:(t[n++]=i>>18|240,t[n++]=i>>12&63|128),t[n++]=i>>6&63|128),t[n++]=63&i|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&hl(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),ol(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),ol(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var i=this.pos-n;i>=128&&hl(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeMessage:function(t,e,n){this.writeTag(t,sl.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,gl,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,dl,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,ml,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,pl,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,fl,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,Il,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,yl,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,Cl,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,El,e)},writeBytesField:function(t,e){this.writeTag(t,sl.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,sl.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,sl.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,sl.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,sl.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,sl.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,sl.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,sl.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,sl.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,sl.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var wl=n(il);const bl=3;function Ql(t,e,n){1===t&&n.readMessage(xl,e)}function xl(t,e,n){if(3===t){const{id:t,bitmap:i,width:r,height:o,left:s,top:a,advance:A}=n.readMessage(Dl,{});e.push({id:t,bitmap:new Ea({width:r+2*bl,height:o+2*bl},i),metrics:{width:r,height:o,left:s,top:a,advance:A}})}}function Dl(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}const Sl=bl;function Ml(t){let e=0,n=0;for(const i of t)e+=i.w*i.h,n=Math.max(n,i.w);t.sort(((t,e)=>e.h-t.h));const i=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}];let r=0,o=0;for(const e of t)for(let t=i.length-1;t>=0;t--){const n=i[t];if(!(e.w>n.w||e.h>n.h)){if(e.x=n.x,e.y=n.y,o=Math.max(o,e.y+e.h),r=Math.max(r,e.x+e.w),e.w===n.w&&e.h===n.h){const e=i.pop();t<i.length&&(i[t]=e)}else e.h===n.h?(n.x+=e.w,n.w-=e.w):e.w===n.w?(n.y+=e.h,n.h-=e.h):(i.push({x:n.x+e.w,y:n.y,w:n.w-e.w,h:e.h}),n.y+=e.h,n.h-=e.h);break}}return{w:r,h:o,fill:e/(r*o)||0}}const kl=1;class Rl{constructor(t,{pixelRatio:e,version:n,stretchX:i,stretchY:r,content:o,textFitWidth:s,textFitHeight:a}){this.paddedRect=t,this.pixelRatio=e,this.stretchX=i,this.stretchY=r,this.content=o,this.version=n,this.textFitWidth=s,this.textFitHeight=a}get tl(){return[this.paddedRect.x+kl,this.paddedRect.y+kl]}get br(){return[this.paddedRect.x+this.paddedRect.w-kl,this.paddedRect.y+this.paddedRect.h-kl]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*kl)/this.pixelRatio,(this.paddedRect.h-2*kl)/this.pixelRatio]}}class Nl{constructor(t,e){const n={},i={};this.haveRenderCallbacks=[];const r=[];this.addImages(t,n,r),this.addImages(e,i,r);const{w:o,h:s}=Ml(r),a=new _a({width:o||1,height:s||1});for(const e in t){const i=t[e],r=n[e].paddedRect;_a.copy(i.data,a,{x:0,y:0},{x:r.x+kl,y:r.y+kl},i.data)}for(const t in e){const n=e[t],r=i[t].paddedRect,o=r.x+kl,s=r.y+kl,A=n.data.width,l=n.data.height;_a.copy(n.data,a,{x:0,y:0},{x:o,y:s},n.data),_a.copy(n.data,a,{x:0,y:l-1},{x:o,y:s-1},{width:A,height:1}),_a.copy(n.data,a,{x:0,y:0},{x:o,y:s+l},{width:A,height:1}),_a.copy(n.data,a,{x:A-1,y:0},{x:o-1,y:s},{width:1,height:l}),_a.copy(n.data,a,{x:0,y:0},{x:o+A,y:s},{width:1,height:l})}this.image=a,this.iconPositions=n,this.patternPositions=i}addImages(t,e,n){for(const i in t){const r=t[i],o={x:0,y:0,w:r.data.width+2*kl,h:r.data.height+2*kl};n.push(o),e[i]=new Rl(o,r),r.hasRenderCallback&&this.haveRenderCallbacks.push(i)}}patchUpdatedImages(t,e){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const n in t.updatedImages)this.patchUpdatedImage(this.iconPositions[n],t.getImage(n),e),this.patchUpdatedImage(this.patternPositions[n],t.getImage(n),e)}patchUpdatedImage(t,e,n){if(!t||!e)return;if(t.version===e.version)return;t.version=e.version;const[i,r]=t.tl;n.update(e.data,void 0,{x:i,y:r})}}var Pl;Er("ImagePosition",Rl),Er("ImageAtlas",Nl),t.ah=void 0,(Pl=t.ah||(t.ah={}))[Pl.none=0]="none",Pl[Pl.horizontal=1]="horizontal",Pl[Pl.vertical=2]="vertical",Pl[Pl.horizontalOnly=3]="horizontalOnly";const Tl=-17;class Ll{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,e){const n=new Ll;return n.scale=t||1,n.fontStack=e,n}static forImage(t){const e=new Ll;return e.imageName=t,e}}class Fl{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,e){const n=new Fl;for(let i=0;i<t.sections.length;i++){const r=t.sections[i];r.image?n.addImageSection(r):n.addTextSection(r,e)}return n}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let e="";for(let n=0;n<t.length;n++){const i=t.charCodeAt(n+1)||null,r=t.charCodeAt(n-1)||null;e+=i&&Tr(i)&&!el[t[n+1]]||r&&Tr(r)&&!el[t[n-1]]||!el[t[n]]?t[n]:el[t[n]]}return e}(this.text)}trim(){let t=0;for(let e=0;e<this.text.length&&Gl[this.text.charCodeAt(e)];e++)t++;let e=this.text.length;for(let n=this.text.length-1;n>=0&&n>=t&&Gl[this.text.charCodeAt(n)];n--)e--;this.text=this.text.substring(t,e),this.sectionIndex=this.sectionIndex.slice(t,e)}substring(t,e){const n=new Fl;return n.text=this.text.substring(t,e),n.sectionIndex=this.sectionIndex.slice(t,e),n.sections=this.sections,n}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((t,e)=>Math.max(t,this.sections[e].scale)),0)}addTextSection(t,e){this.text+=t.text,this.sections.push(Ll.forText(t.scale,t.fontStack||e));const n=this.sections.length-1;for(let e=0;e<t.text.length;++e)this.sectionIndex.push(n)}addImageSection(t){const e=t.image?t.image.name:"";if(0===e.length)return void v("Can't add FormattedSection with an empty image.");const n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(Ll.forImage(e)),this.sectionIndex.push(this.sections.length-1)):v("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Ol(e,n,i,r,o,s,a,A,l,c,u,h,g,d,p){const f=Fl.fromFeature(e,o);let m;h===t.ah.vertical&&f.verticalizePunctuation();const{processBidirectionalText:I,processStyledBidirectionalText:y}=Ur;if(I&&1===f.sections.length){m=[];const t=I(f.toString(),Hl(f,c,s,n,r,d));for(const e of t){const t=new Fl;t.text=e,t.sections=f.sections;for(let n=0;n<e.length;n++)t.sectionIndex.push(0);m.push(t)}}else if(y){m=[];const t=y(f.text,f.sectionIndex,Hl(f,c,s,n,r,d));for(const e of t){const t=new Fl;t.text=e[0],t.sectionIndex=e[1],t.sections=f.sections,m.push(t)}}else m=function(t,e){const n=[],i=t.text;let r=0;for(const i of e)n.push(t.substring(r,i)),r=i;return r<i.length&&n.push(t.substring(r,i.length)),n}(f,Hl(f,c,s,n,r,d));const C=[],E={positionedLines:C,text:f.toString(),top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:h,iconsInText:!1,verticalizable:!1};return function(e,n,i,r,o,s,a,A,l,c,u,h){let g=0,d=Tl,p=0,f=0;const m="right"===A?1:"left"===A?0:.5;let I=0;for(const a of o){a.trim();const o=a.getMaxScale(),A=(o-1)*nl,C={positionedGlyphs:[],lineOffset:0};e.positionedLines[I]=C;const E=C.positionedGlyphs;let _=0;if(!a.length()){d+=s,++I;continue}for(let s=0;s<a.length();s++){const p=a.getSection(s),f=a.getSectionIndex(s),m=a.getCharCode(s);let I=0,C=null,v=null,B=null,w=nl;const b=!(l===t.ah.horizontal||!u&&!Pr(m)||u&&(Gl[m]||(y=m,/\p{sc=Arab}/u.test(String.fromCodePoint(y)))));if(p.imageName){const t=r[p.imageName];if(!t)continue;B=p.imageName,e.iconsInText=e.iconsInText||!0,v=t.paddedRect;const n=t.displaySize;p.scale=p.scale*nl/h,C={width:n[0],height:n[1],left:kl,top:-Sl,advance:b?n[1]:n[0]},I=A+(nl-n[1]*p.scale),w=C.advance;const i=b?n[0]*p.scale-nl*o:n[1]*p.scale-nl*o;i>0&&i>_&&(_=i)}else{const t=i[p.fontStack],e=t&&t[m];if(e&&e.rect)v=e.rect,C=e.metrics;else{const t=n[p.fontStack],e=t&&t[m];if(!e)continue;C=e.metrics}I=(o-p.scale)*nl}b?(e.verticalizable=!0,E.push({glyph:m,imageName:B,x:g,y:d+I,vertical:b,scale:p.scale,fontStack:p.fontStack,sectionIndex:f,metrics:C,rect:v}),g+=w*p.scale+c):(E.push({glyph:m,imageName:B,x:g,y:d+I,vertical:b,scale:p.scale,fontStack:p.fontStack,sectionIndex:f,metrics:C,rect:v}),g+=C.advance*p.scale+c)}0!==E.length&&(p=Math.max(g-c,p),Wl(E,0,E.length-1,m,_)),g=0;const v=s*o+_;C.lineOffset=Math.max(_,A),d+=v,f=Math.max(v,f),++I}var y;const C=d-Tl,{horizontalAlign:E,verticalAlign:_}=Vl(a);(function(t,e,n,i,r,o,s,a,A){const l=(e-n)*r;let c=0;c=o!==s?-a*i-Tl:(-i*A+.5)*s;for(const e of t)for(const t of e.positionedGlyphs)t.x+=l,t.y+=c})(e.positionedLines,m,E,_,p,f,s,C,o.length),e.top+=-_*C,e.bottom=e.top+C,e.left+=-E*p,e.right=e.left+p}(E,n,i,r,m,a,A,l,h,c,g,p),!function(t){for(const e of t)if(0!==e.positionedGlyphs.length)return!1;return!0}(C)&&E}const Gl={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ul={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},jl={40:!0};function Yl(t,e,n,i,r,o){if(e.imageName){const t=i[e.imageName];return t?t.displaySize[0]*e.scale*nl/o+r:0}{const i=n[e.fontStack],o=i&&i[t];return o?o.metrics.advance*e.scale+r:0}}function Kl(t,e,n,i){const r=Math.pow(t-e,2);return i?t<e?r/2:2*r:r+Math.abs(n)*n}function zl(t,e,n){let i=0;return 10===t&&(i-=1e4),n&&(i+=150),40!==t&&65288!==t||(i+=50),41!==e&&65289!==e||(i+=50),i}function Jl(t,e,n,i,r,o){let s=null,a=Kl(e,n,r,o);for(const t of i){const i=Kl(e-t.x,n,r,o)+t.badness;i<=a&&(s=t,a=i)}return{index:t,x:e,priorBreak:s,badness:a}}function ql(t){return t?ql(t.priorBreak).concat(t.index):[]}function Hl(t,e,n,i,r,o){if(!t)return[];const s=[],a=function(t,e,n,i,r,o){let s=0;for(let n=0;n<t.length();n++){const a=t.getSection(n);s+=Yl(t.getCharCode(n),a,i,r,e,o)}return s/Math.max(1,Math.ceil(s/n))}(t,e,n,i,r,o),A=t.text.indexOf("")>=0;let l=0;for(let n=0;n<t.length();n++){const u=t.getSection(n),h=t.getCharCode(n);if(Gl[h]||(l+=Yl(h,u,i,r,e,o)),n<t.length()-1){const e=!((c=h)<11904)&&(!!xr["CJK Compatibility Forms"](c)||!!xr["CJK Compatibility"](c)||!!xr["CJK Strokes"](c)||!!xr["CJK Symbols and Punctuation"](c)||!!xr["Enclosed CJK Letters and Months"](c)||!!xr["Halfwidth and Fullwidth Forms"](c)||!!xr["Ideographic Description Characters"](c)||!!xr["Vertical Forms"](c)||Nr.test(String.fromCodePoint(c)));(Ul[h]||e||u.imageName||n!==t.length()-2&&jl[t.getCharCode(n+1)])&&s.push(Jl(n+1,l,a,s,zl(h,t.getCharCode(n+1),e&&A),!1))}}var c;return ql(Jl(t.length(),l,a,s,0,!0))}function Vl(t){let e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function Wl(t,e,n,i,r){if(!i&&!r)return;const o=t[n],s=(t[n].x+o.metrics.advance*o.scale)*i;for(let i=e;i<=n;i++)t[i].x-=s,t[i].y+=r}function Zl(t,e,n){const{horizontalAlign:i,verticalAlign:r}=Vl(n),o=e[0]-t.displaySize[0]*i,s=e[1]-t.displaySize[1]*r;return{image:t,top:s,bottom:s+t.displaySize[1],left:o,right:o+t.displaySize[0]}}function Xl(t){var e,n;let i=t.left,r=t.top,o=t.right-i,s=t.bottom-r;const a=null!==(e=t.image.textFitWidth)&&void 0!==e?e:"stretchOrShrink",A=null!==(n=t.image.textFitHeight)&&void 0!==n?n:"stretchOrShrink",l=(t.image.content[2]-t.image.content[0])/(t.image.content[3]-t.image.content[1]);if("proportional"===A){if("stretchOnly"===a&&o/s<l||"proportional"===a){const t=Math.ceil(s*l);i*=t/o,o=t}}else if("proportional"===a&&"stretchOnly"===A&&0!==l&&o/s>l){const t=Math.ceil(o/l);r*=t/s,s=t}return{x1:i,y1:r,x2:i+o,y2:r+s}}function $l(t,e,n,i,r,o){const s=t.image;let a;if(s.content){const t=s.content,e=s.pixelRatio||1;a=[t[0]/e,t[1]/e,s.displaySize[0]-t[2]/e,s.displaySize[1]-t[3]/e]}const A=e.left*o,l=e.right*o;let c,u,h,g;"width"===n||"both"===n?(g=r[0]+A-i[3],u=r[0]+l+i[1]):(g=r[0]+(A+l-s.displaySize[0])/2,u=g+s.displaySize[0]);const d=e.top*o,p=e.bottom*o;return"height"===n||"both"===n?(c=r[1]+d-i[0],h=r[1]+p+i[2]):(c=r[1]+(d+p-s.displaySize[1])/2,h=c+s.displaySize[1]),{image:s,top:c,right:u,bottom:h,left:g,collisionPadding:a}}const tc=255,ec=128,nc=tc*ec;function ic(t,e){const{expression:n}=e;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new jr(t+1))};if("source"===n.kind)return{kind:"source"};{const{zoomStops:e,interpolationType:i}=n;let r=0;for(;r<e.length&&e[r]<=t;)r++;r=Math.max(0,r-1);let o=r;for(;o<e.length&&e[o]<t+1;)o++;o=Math.min(e.length-1,o);const s=e[r],a=e[o];return"composite"===n.kind?{kind:"composite",minZoom:s,maxZoom:a,interpolationType:i}:{kind:"camera",minZoom:s,maxZoom:a,minSize:n.evaluate(new jr(s)),maxSize:n.evaluate(new jr(a)),interpolationType:i}}}function rc(t,e,n){let i="never";const r=t.get(e);return r?i=r:t.get(n)&&(i="always"),i}const oc=uA.VectorTileFeature.types,sc=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ac(t,e,n,i,r,o,s,a,A,l,c,u,h){const g=a?Math.min(nc,Math.round(a[0])):0,d=a?Math.min(nc,Math.round(a[1])):0;t.emplaceBack(e,n,Math.round(32*i),Math.round(32*r),o,s,(g<<1)+(A?1:0),d,16*l,16*c,256*u,256*h)}function Ac(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)}function lc(t){for(const e of t.sections)if(Gr(e.text))return!0;return!1}class cc{constructor(t){this.layoutVertexArray=new $o,this.indexArray=new rs,this.programConfigurations=t,this.segments=new As,this.dynamicLayoutVertexArray=new ts,this.opacityVertexArray=new es,this.hasVisibleVertices=!1,this.placedSymbolArray=new Lo}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(t,e,n,i){this.isEmpty()||(n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,VA.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,WA.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,sc,!0),this.opacityVertexBuffer.itemSize=1),(n||i)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Er("SymbolBuffers",cc);class uc{constructor(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new As,this.collisionVertexArray=new is}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,ZA.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Er("CollisionBuffers",uc);class hc{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Aa([]),this.placementViewportMatrix=Aa([]);const n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ic(this.zoom,n["text-size"]),this.iconSizeData=ic(this.zoom,n["icon-size"]);const i=this.layers[0].layout,r=i.get("symbol-sort-key"),o=i.get("symbol-z-order");this.canOverlap="never"!==rc(i,"text-overlap","text-allow-overlap")||"never"!==rc(i,"icon-overlap","icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==o&&!r.isConstant(),this.sortFeaturesByY=("viewport-y"===o||"auto"===o&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===i.get("symbol-placement")&&(this.writingModes=i.get("text-writing-mode").map((e=>t.ah[e]))),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.sourceID=e.sourceID}createArrays(){this.text=new cc(new Rs(this.layers,this.zoom,(t=>/^text/.test(t)))),this.icon=new cc(new Rs(this.layers,this.zoom,(t=>/^icon/.test(t)))),this.glyphOffsetArray=new Go,this.lineVertexArray=new Uo,this.symbolInstances=new Oo,this.textAnchorOffsets=new Yo}calculateGlyphDependencies(t,e,n,i,r){for(let o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,(n||i)&&r){const n=el[t.charAt(o)];n&&(e[n.charCodeAt(0)]=!0)}}populate(e,n,i){const r=this.layers[0],o=r.layout,s=o.get("text-font"),a=o.get("text-field"),A=o.get("icon-image"),l=("constant"!==a.value.kind||a.value.value instanceof Wt&&!a.value.value.isEmpty()||a.value.value.toString().length>0)&&("constant"!==s.value.kind||s.value.value.length>0),c="constant"!==A.value.kind||!!A.value.value||Object.keys(A.parameters).length>0,u=o.get("symbol-sort-key");if(this.features=[],!l&&!c)return;const h=n.iconDependencies,g=n.glyphDependencies,d=n.availableImages,p=new jr(this.zoom);for(const{feature:n,id:a,index:A,sourceLayerIndex:f}of e){const e=r._featureFilter.needGeometry,m=Gs(n,e);if(!r._featureFilter.filter(p,m,i))continue;let I,y;if(e||(m.geometry=Os(n)),l){const t=r.getValueAndResolveTokens("text-field",m,i,d),e=Wt.factory(t),n=this.hasRTLText=this.hasRTLText||lc(e);(!n||"unavailable"===Ur.getRTLTextPluginStatus()||n&&Ur.isParsed())&&(I=tl(e,r,m))}if(c){const t=r.getValueAndResolveTokens("icon-image",m,i,d);y=t instanceof te?t:te.fromString(t)}if(!I&&!y)continue;const C=this.sortFeaturesByKey?u.evaluate(m,{},i):void 0;if(this.features.push({id:a,text:I,icon:y,index:A,sourceLayerIndex:f,geometry:m.geometry,properties:n.properties,type:oc[n.type],sortKey:C}),y&&(h[y.name]=!0),I){const e=s.evaluate(m,{},i).join(","),n="viewport"!==o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(t.ah.vertical)>=0;for(const t of I.sections)if(t.image)h[t.image.name]=!0;else{const i=Dr(I.toString()),r=t.fontStack||e,o=g[r]=g[r]||{};this.calculateGlyphDependencies(t.text,o,n,this.allowVerticalPlacement,i)}}}"line"===o.get("symbol-placement")&&(this.features=function(t){const e={},n={},i=[];let r=0;function o(e){i.push(t[e]),r++}function s(t,e,r){const o=n[t];return delete n[t],n[e]=o,i[o].geometry[0].pop(),i[o].geometry[0]=i[o].geometry[0].concat(r[0]),o}function a(t,n,r){const o=e[n];return delete e[n],e[t]=o,i[o].geometry[0].shift(),i[o].geometry[0]=r[0].concat(i[o].geometry[0]),o}function A(t,e,n){const i=n?e[0][e[0].length-1]:e[0][0];return`${t}:${i.x}:${i.y}`}for(let l=0;l<t.length;l++){const c=t[l],u=c.geometry,h=c.text?c.text.toString():null;if(!h){o(l);continue}const g=A(h,u),d=A(h,u,!0);if(g in n&&d in e&&n[g]!==e[d]){const t=a(g,d,u),r=s(g,d,i[t].geometry);delete e[g],delete n[d],n[A(h,i[r].geometry,!0)]=r,i[t].geometry=null}else g in n?s(g,d,u):d in e?a(g,d,u):(o(l),e[g]=r-1,n[d]=r-1)}return i.filter((t=>t.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((t,e)=>t.sortKey-e.sortKey))}update(t,e,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,e){const n=this.lineVertexArray.length;if(void 0!==t.segment){let n=t.dist(e[t.segment+1]),i=t.dist(e[t.segment]);const r={};for(let i=t.segment+1;i<e.length;i++)r[i]={x:e[i].x,y:e[i].y,tileUnitDistanceFromAnchor:n},i<e.length-1&&(n+=e[i+1].dist(e[i]));for(let n=t.segment||0;n>=0;n--)r[n]={x:e[n].x,y:e[n].y,tileUnitDistanceFromAnchor:i},n>0&&(i+=e[n-1].dist(e[n]));for(let t=0;t<e.length;t++){const e=r[t];this.lineVertexArray.emplaceBack(e.x,e.y,e.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}addSymbols(e,n,i,r,o,s,a,A,l,c,u,h){const g=e.indexArray,d=e.layoutVertexArray,p=e.segments.prepareSegment(4*n.length,d,g,this.canOverlap?s.sortKey:void 0),f=this.glyphOffsetArray.length,m=p.vertexLength,I=this.allowVerticalPlacement&&a===t.ah.vertical?Math.PI/2:0,y=s.text&&s.text.sections;for(let t=0;t<n.length;t++){const{tl:r,tr:o,bl:a,br:l,tex:c,pixelOffsetTL:u,pixelOffsetBR:f,minFontScaleX:m,minFontScaleY:C,glyphOffset:E,isSDF:_,sectionIndex:v}=n[t],B=p.vertexLength,w=E[1];ac(d,A.x,A.y,r.x,w+r.y,c.x,c.y,i,_,u.x,u.y,m,C),ac(d,A.x,A.y,o.x,w+o.y,c.x+c.w,c.y,i,_,f.x,u.y,m,C),ac(d,A.x,A.y,a.x,w+a.y,c.x,c.y+c.h,i,_,u.x,f.y,m,C),ac(d,A.x,A.y,l.x,w+l.y,c.x+c.w,c.y+c.h,i,_,f.x,f.y,m,C),Ac(e.dynamicLayoutVertexArray,A,I),g.emplaceBack(B,B+1,B+2),g.emplaceBack(B+1,B+2,B+3),p.vertexLength+=4,p.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(E[0]),t!==n.length-1&&v===n[t+1].sectionIndex||e.programConfigurations.populatePaintArrays(d.length,s,s.index,{},h,y&&y[v])}e.placedSymbolArray.emplaceBack(A.x,A.y,f,this.glyphOffsetArray.length-f,m,l,c,A.segment,i?i[0]:0,i?i[1]:0,r[0],r[1],a,0,!1,0,u)}_addCollisionDebugVertex(t,e,n,i,r,o){return e.emplaceBack(0,0),t.emplaceBack(n.x,n.y,i,r,Math.round(o.x),Math.round(o.y))}addCollisionDebugVertices(t,e,n,i,r,s,a){const A=r.segments.prepareSegment(4,r.layoutVertexArray,r.indexArray),l=A.vertexLength,c=r.layoutVertexArray,u=r.collisionVertexArray,h=a.anchorX,g=a.anchorY;this._addCollisionDebugVertex(c,u,s,h,g,new o(t,e)),this._addCollisionDebugVertex(c,u,s,h,g,new o(n,e)),this._addCollisionDebugVertex(c,u,s,h,g,new o(n,i)),this._addCollisionDebugVertex(c,u,s,h,g,new o(t,i)),A.vertexLength+=4;const d=r.indexArray;d.emplaceBack(l,l+1),d.emplaceBack(l+1,l+2),d.emplaceBack(l+2,l+3),d.emplaceBack(l+3,l),A.primitiveLength+=4}addDebugCollisionBoxes(t,e,n,i){for(let r=t;r<e;r++){const t=this.collisionBoxArray.get(r);this.addCollisionDebugVertices(t.x1,t.y1,t.x2,t.y2,i?this.textCollisionBox:this.iconCollisionBox,t.anchorPoint,n)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new uc(ns,XA.members,os),this.iconCollisionBox=new uc(ns,XA.members,os);for(let t=0;t<this.symbolInstances.length;t++){const e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}}_deserializeCollisionBoxesForSymbol(t,e,n,i,r,o,s,a,A){const l={};for(let i=e;i<n;i++){const e=t.get(i);l.textBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},l.textFeatureIndex=e.featureIndex;break}for(let e=i;e<r;e++){const n=t.get(e);l.verticalTextBox={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,anchorPointX:n.anchorPointX,anchorPointY:n.anchorPointY},l.verticalTextFeatureIndex=n.featureIndex;break}for(let e=o;e<s;e++){const n=t.get(e);l.iconBox={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,anchorPointX:n.anchorPointX,anchorPointY:n.anchorPointY},l.iconFeatureIndex=n.featureIndex;break}for(let e=a;e<A;e++){const n=t.get(e);l.verticalIconBox={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,anchorPointX:n.anchorPointX,anchorPointY:n.anchorPointY},l.verticalIconFeatureIndex=n.featureIndex;break}return l}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let e=0;e<this.symbolInstances.length;e++){const n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,e){const n=t.placedSymbolArray.get(e),i=n.vertexStartIndex+4*n.numGlyphs;for(let e=n.vertexStartIndex;e<i;e+=4)t.indexArray.emplaceBack(e,e+1,e+2),t.indexArray.emplaceBack(e+1,e+2,e+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const e=Math.sin(t),n=Math.cos(t),i=[],r=[],o=[];for(let t=0;t<this.symbolInstances.length;++t){o.push(t);const s=this.symbolInstances.get(t);i.push(0|Math.round(e*s.anchorX+n*s.anchorY)),r.push(s.featureIndex)}return o.sort(((t,e)=>i[t]-i[e]||r[e]-r[t])),o}addToSortKeyRanges(t,e){const n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===e?n.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const t of this.symbolInstanceIndexes){const e=this.symbolInstances.get(t);this.featureSortOrder.push(e.featureIndex),[e.rightJustifiedTextSymbolIndex,e.centerJustifiedTextSymbolIndex,e.leftJustifiedTextSymbolIndex].forEach(((t,e,n)=>{t>=0&&n.indexOf(t)===e&&this.addIndicesForPlacedSymbol(this.text,t)})),e.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,e.verticalPlacedTextSymbolIndex),e.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.placedIconSymbolIndex),e.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let gc,dc;Er("SymbolBucket",hc,{omit:["layers","collisionBoxArray","features","compareText"]}),hc.MAX_GLYPHS=65535,hc.addDynamicAttributes=Ac;var pc={get paint(){return dc=dc||new no({"icon-opacity":new Xr(J.paint_symbol["icon-opacity"]),"icon-color":new Xr(J.paint_symbol["icon-color"]),"icon-halo-color":new Xr(J.paint_symbol["icon-halo-color"]),"icon-halo-width":new Xr(J.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Xr(J.paint_symbol["icon-halo-blur"]),"icon-translate":new Zr(J.paint_symbol["icon-translate"]),"icon-translate-anchor":new Zr(J.paint_symbol["icon-translate-anchor"]),"text-opacity":new Xr(J.paint_symbol["text-opacity"]),"text-color":new Xr(J.paint_symbol["text-color"],{runtimeType:ht,getOverride:t=>t.textColor,hasOverride:t=>!!t.textColor}),"text-halo-color":new Xr(J.paint_symbol["text-halo-color"]),"text-halo-width":new Xr(J.paint_symbol["text-halo-width"]),"text-halo-blur":new Xr(J.paint_symbol["text-halo-blur"]),"text-translate":new Zr(J.paint_symbol["text-translate"]),"text-translate-anchor":new Zr(J.paint_symbol["text-translate-anchor"])})},get layout(){return gc=gc||new no({"symbol-placement":new Zr(J.layout_symbol["symbol-placement"]),"symbol-spacing":new Zr(J.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Zr(J.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Xr(J.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Zr(J.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Zr(J.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Zr(J.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Zr(J.layout_symbol["icon-ignore-placement"]),"icon-optional":new Zr(J.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Zr(J.layout_symbol["icon-rotation-alignment"]),"icon-size":new Xr(J.layout_symbol["icon-size"]),"icon-text-fit":new Zr(J.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Zr(J.layout_symbol["icon-text-fit-padding"]),"icon-image":new Xr(J.layout_symbol["icon-image"]),"icon-rotate":new Xr(J.layout_symbol["icon-rotate"]),"icon-padding":new Xr(J.layout_symbol["icon-padding"]),"icon-keep-upright":new Zr(J.layout_symbol["icon-keep-upright"]),"icon-offset":new Xr(J.layout_symbol["icon-offset"]),"icon-anchor":new Xr(J.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Zr(J.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Zr(J.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Zr(J.layout_symbol["text-rotation-alignment"]),"text-field":new Xr(J.layout_symbol["text-field"]),"text-font":new Xr(J.layout_symbol["text-font"]),"text-size":new Xr(J.layout_symbol["text-size"]),"text-max-width":new Xr(J.layout_symbol["text-max-width"]),"text-line-height":new Zr(J.layout_symbol["text-line-height"]),"text-letter-spacing":new Xr(J.layout_symbol["text-letter-spacing"]),"text-justify":new Xr(J.layout_symbol["text-justify"]),"text-radial-offset":new Xr(J.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Zr(J.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Xr(J.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Xr(J.layout_symbol["text-anchor"]),"text-max-angle":new Zr(J.layout_symbol["text-max-angle"]),"text-writing-mode":new Zr(J.layout_symbol["text-writing-mode"]),"text-rotate":new Xr(J.layout_symbol["text-rotate"]),"text-padding":new Zr(J.layout_symbol["text-padding"]),"text-keep-upright":new Zr(J.layout_symbol["text-keep-upright"]),"text-transform":new Xr(J.layout_symbol["text-transform"]),"text-offset":new Xr(J.layout_symbol["text-offset"]),"text-allow-overlap":new Zr(J.layout_symbol["text-allow-overlap"]),"text-overlap":new Zr(J.layout_symbol["text-overlap"]),"text-ignore-placement":new Zr(J.layout_symbol["text-ignore-placement"]),"text-optional":new Zr(J.layout_symbol["text-optional"])})}};class fc{constructor(t){if(void 0===t.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:At,this.defaultValue=t}evaluate(t){if(t.formattedSection){const e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Er("FormatSectionOverride",fc,{omit:["defaultValue"]});class mc extends ro{constructor(t){super(t,pc)}recalculate(t,e){if(super.recalculate(t,e),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const t=this.layout.get("text-writing-mode");if(t){const e=[];for(const n of t)e.indexOf(n)<0&&e.push(n);this.layout._values["text-writing-mode"]=e}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,e,n,i){const r=this.layout.get(t).evaluate(e,{},n,i),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||yi(o.value)||!r?r:function(t,e){return e.replace(/{([^{}]+)}/g,((e,n)=>t&&n in t?String(t[n]):""))}(e.properties,r)}createBucket(t){return new hc(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of pc.paint.overridableProperties){if(!mc.hasPaintOverride(this.layout,t))continue;const e=this.paint.get(t),n=new fc(e),i=new Ii(n,e.property.specification);let r=null;r="constant"===e.value.kind||"source"===e.value.kind?new Ei("source",i):new _i("composite",i,e.value.zoomStops),this.paint._values[t]=new Vr(e.property,r,e.parameters)}}_handleOverridablePaintPropertyUpdate(t,e,n){return!(!this.layout||e.isDataDriven()||n.isDataDriven())&&mc.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,e){const n=t.get("text-field"),i=pc.paint.properties[e];let r=!1;const o=t=>{for(const e of t)if(i.overrides&&i.overrides.hasOverride(e))return void(r=!0)};if("constant"===n.value.kind&&n.value.value instanceof Wt)o(n.value.value.sections);else if("source"===n.value.kind){const t=e=>{r||(e instanceof oe&&ie(e.value)===ft?o(e.value.sections):e instanceof ze?o(e.sections):e.eachChild(t))},e=n.value;e._styleExpression&&t(e._styleExpression.expression)}return r}}let Ic;var yc={get paint(){return Ic=Ic||new no({"background-color":new Zr(J.paint_background["background-color"]),"background-pattern":new to(J.paint_background["background-pattern"]),"background-opacity":new Zr(J.paint_background["background-opacity"])})}};class Cc extends ro{constructor(t){super(t,yc)}}let Ec;var _c={get paint(){return Ec=Ec||new no({"raster-opacity":new Zr(J.paint_raster["raster-opacity"]),"raster-hue-rotate":new Zr(J.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Zr(J.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Zr(J.paint_raster["raster-brightness-max"]),"raster-saturation":new Zr(J.paint_raster["raster-saturation"]),"raster-contrast":new Zr(J.paint_raster["raster-contrast"]),"raster-resampling":new Zr(J.paint_raster["raster-resampling"]),"raster-fade-duration":new Zr(J.paint_raster["raster-fade-duration"])})}};class vc extends ro{constructor(t){super(t,_c)}}class Bc extends ro{constructor(t){super(t,{}),this.onAdd=t=>{this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},this.onRemove=t=>{this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},this.implementation=t}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class wc{constructor(t){this._methodToThrottle=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const bc=6371008.8;class Qc{constructor(t,e){if(isNaN(t)||isNaN(e))throw new Error(`Invalid LngLat object: (${t}, ${e})`);if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Qc(f(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const e=Math.PI/180,n=this.lat*e,i=t.lat*e,r=Math.sin(n)*Math.sin(i)+Math.cos(n)*Math.cos(i)*Math.cos((t.lng-this.lng)*e);return bc*Math.acos(Math.min(r,1))}static convert(t){if(t instanceof Qc)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Qc(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Qc(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const xc=2*Math.PI*bc;function Dc(t){return xc*Math.cos(t*Math.PI/180)}function Sc(t){return(180+t)/360}function Mc(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function kc(t,e){return t/Dc(e)}function Rc(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}class Nc{constructor(t,e,n=0){this.x=+t,this.y=+e,this.z=+n}static fromLngLat(t,e=0){const n=Qc.convert(t);return new Nc(Sc(n.lng),Mc(n.lat),kc(e,n.lat))}toLngLat(){return new Qc(360*this.x-180,Rc(this.y))}toAltitude(){return this.z*Dc(Rc(this.y))}meterInMercatorCoordinateUnits(){return 1/xc*(t=Rc(this.y),1/Math.cos(t*Math.PI/180));var t}}function Pc(t,e,n){var i=2*Math.PI*6378137/256/Math.pow(2,n);return[t*i-2*Math.PI*6378137/2,e*i-2*Math.PI*6378137/2]}class Tc{constructor(t,e,n){if(!function(t,e,n){return!(t<0||t>25||n<0||n>=Math.pow(2,t)||e<0||e>=Math.pow(2,t))}(t,e,n))throw new Error(`x=${e}, y=${n}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=e,this.y=n,this.key=Oc(0,t,t,e,n)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,e,n){const i=(o=this.y,s=this.z,a=Pc(256*(r=this.x),256*(o=Math.pow(2,s)-o-1),s),A=Pc(256*(r+1),256*(o+1),s),a[0]+","+a[1]+","+A[0]+","+A[1]);var r,o,s,a,A;const l=function(t,e,n){let i,r="";for(let o=t;o>0;o--)i=1<<o-1,r+=(e&i?1:0)+(n&i?2:0);return r}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===n?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,e>1?"@2x":"").replace(/{quadkey}/g,l).replace(/{bbox-epsg-3857}/g,i)}isChildOf(t){const e=this.z-t.z;return e>0&&t.x===this.x>>e&&t.y===this.y>>e}getTilePoint(t){const e=Math.pow(2,this.z);return new o((t.x*e-this.x)*Ts,(t.y*e-this.y)*Ts)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Lc{constructor(t,e){this.wrap=t,this.canonical=e,this.key=Oc(t,e.z,e.z,e.x,e.y)}}class Fc{constructor(t,e,n,i,r){if(t<n)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${n}`);this.overscaledZ=t,this.wrap=e,this.canonical=new Tc(n,+i,+r),this.key=Oc(e,t,n,i,r)}clone(){return new Fc(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const e=this.canonical.z-t;return t>this.canonical.z?new Fc(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Fc(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)}calculateScaledKey(t,e){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const n=this.canonical.z-t;return t>this.canonical.z?Oc(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):Oc(this.wrap*+e,t,t,this.canonical.x>>n,this.canonical.y>>n)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e}children(t){if(this.overscaledZ>=t)return[new Fc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const e=this.canonical.z+1,n=2*this.canonical.x,i=2*this.canonical.y;return[new Fc(e,this.wrap,e,n,i),new Fc(e,this.wrap,e,n+1,i),new Fc(e,this.wrap,e,n,i+1),new Fc(e,this.wrap,e,n+1,i+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Fc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Fc(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Lc(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new Nc(t.x-this.wrap,t.y))}}function Oc(t,e,n,i,r){(t*=2)<0&&(t=-1*t-1);const o=1<<n;return(o*o*t+o*r+i).toString(36)+n.toString(36)+e.toString(36)}Er("CanonicalTileID",Tc),Er("OverscaledTileID",Fc,{omit:["posMatrix"]});class Gc{constructor(t,e,n,i=1,r=1,o=1,s=0){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(n&&!["mapbox","terrarium","custom"].includes(n))return void v(`"${n}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=e.height;const a=this.dim=e.height-2;switch(this.data=new Uint32Array(e.data.buffer),n){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=i,this.greenFactor=r,this.blueFactor=o,this.baseShift=s;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let t=0;t<a;t++)this.data[this._idx(-1,t)]=this.data[this._idx(0,t)],this.data[this._idx(a,t)]=this.data[this._idx(a-1,t)],this.data[this._idx(t,-1)]=this.data[this._idx(t,0)],this.data[this._idx(t,a)]=this.data[this._idx(t,a-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(a,-1)]=this.data[this._idx(a-1,0)],this.data[this._idx(-1,a)]=this.data[this._idx(0,a-1)],this.data[this._idx(a,a)]=this.data[this._idx(a-1,a-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let t=0;t<a;t++)for(let e=0;e<a;e++){const n=this.get(t,e);n>this.max&&(this.max=n),n<this.min&&(this.min=n)}}get(t,e){const n=new Uint8Array(this.data.buffer),i=4*this._idx(t,e);return this.unpack(n[i],n[i+1],n[i+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)}unpack(t,e,n){return t*this.redFactor+e*this.greenFactor+n*this.blueFactor-this.baseShift}getPixels(){return new _a({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,e,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let i=e*this.dim,r=e*this.dim+this.dim,o=n*this.dim,s=n*this.dim+this.dim;switch(e){case-1:i=r-1;break;case 1:r=i+1}switch(n){case-1:o=s-1;break;case 1:s=o+1}const a=-e*this.dim,A=-n*this.dim;for(let e=o;e<s;e++)for(let n=i;n<r;n++)this.data[this._idx(n,e)]=t.data[this._idx(n+a,e+A)]}}Er("DEMData",Gc);class Uc{constructor(t){this._stringToNumber={},this._numberToString=[];for(let e=0;e<t.length;e++){const n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class jc{constructor(t,e,n,i,r){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=i,this.properties=t.properties,this.id=r}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t}}class Yc{constructor(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new yr(Ts,16,0),this.grid3D=new yr(Ts,16,0),this.featureIndexArray=new zo,this.promoteId=e}insert(t,e,n,i,r,o){const s=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,i,r);const a=o?this.grid3D:this.grid;for(let t=0;t<e.length;t++){const n=e[t],i=[1/0,1/0,-1/0,-1/0];for(let t=0;t<n.length;t++){const e=n[t];i[0]=Math.min(i[0],e.x),i[1]=Math.min(i[1],e.y),i[2]=Math.max(i[2],e.x),i[3]=Math.max(i[3],e.y)}i[0]<Ts&&i[1]<Ts&&i[2]>=0&&i[3]>=0&&a.insert(s,i[0],i[1],i[2],i[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new uA.VectorTile(new wl(this.rawTileData)).layers,this.sourceLayerCoder=new Uc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,e,n,i){this.loadVTLayers();const r=t.params||{},s=Ts/t.tileSize/t.scale,a=xi(r.filter),A=t.queryGeometry,l=t.queryPadding*s,c=zc(A),u=this.grid.query(c.minX-l,c.minY-l,c.maxX+l,c.maxY+l),h=zc(t.cameraQueryGeometry),g=this.grid3D.query(h.minX-l,h.minY-l,h.maxX+l,h.maxY+l,((e,n,i,r)=>function(t,e,n,i,r){for(const o of t)if(e<=o.x&&n<=o.y&&i>=o.x&&r>=o.y)return!0;const s=[new o(e,n),new o(e,r),new o(i,r),new o(i,n)];if(t.length>2)for(const e of s)if(Xs(t,e))return!0;for(let e=0;e<t.length-1;e++)if($s(t[e],t[e+1],s))return!0;return!1}(t.cameraQueryGeometry,e-l,n-l,i+l,r+l)));for(const t of g)u.push(t);u.sort(Jc);const d={};let p;for(let o=0;o<u.length;o++){const l=u[o];if(l===p)continue;p=l;const c=this.featureIndexArray.get(l);let h=null;this.loadMatchingFeature(d,c.bucketIndex,c.sourceLayerIndex,c.featureIndex,a,r.layers,r.availableImages,e,n,i,((e,n,i)=>(h||(h=Os(e)),n.queryIntersectsFeature(A,e,i,h,this.z,t.transform,s,t.pixelPosMatrix))))}return d}loadMatchingFeature(t,e,n,i,r,o,s,a,A,l,c){const u=this.bucketLayerIDs[e];if(o&&!function(t,e){for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(o,u))return;const h=this.sourceLayerCoder.decode(n),g=this.vtLayers[h].feature(i);if(r.needGeometry){const t=Gs(g,!0);if(!r.filter(new jr(this.tileID.overscaledZ),t,this.tileID.canonical))return}else if(!r.filter(new jr(this.tileID.overscaledZ),g))return;const d=this.getId(g,h);for(let e=0;e<u.length;e++){const n=u[e];if(o&&o.indexOf(n)<0)continue;const r=a[n];if(!r)continue;let h={};d&&l&&(h=l.getState(r.sourceLayer||"_geojsonTileLayer",d));const p=m({},A[n]);p.paint=Kc(p.paint,r.paint,g,h,s),p.layout=Kc(p.layout,r.layout,g,h,s);const f=!c||c(g,r,h);if(!f)continue;const I=new jc(g,this.z,this.x,this.y,d);I.layer=p;let y=t[n];void 0===y&&(y=t[n]=[]),y.push({featureIndex:i,feature:I,intersectionZ:f})}}lookupSymbolFeatures(t,e,n,i,r,o,s,a){const A={};this.loadVTLayers();const l=xi(r);for(const r of t)this.loadMatchingFeature(A,n,i,r,l,o,s,a,e);return A}hasLayer(t){for(const e of this.bucketLayerIDs)for(const n of e)if(t===n)return!0;return!1}getId(t,e){let n=t.id;return this.promoteId&&(n=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]],"boolean"==typeof n&&(n=Number(n))),n}}function Kc(t,e,n,i,r){return y(t,((t,o)=>{const s=e instanceof Wr?e.get(o):null;return s&&s.evaluate?s.evaluate(n,i,r):s}))}function zc(t){let e=1/0,n=1/0,i=-1/0,r=-1/0;for(const o of t)e=Math.min(e,o.x),n=Math.min(n,o.y),i=Math.max(i,o.x),r=Math.max(r,o.y);return{minX:e,minY:n,maxX:i,maxY:r}}function Jc(t,e){return e-t}function qc(t,e,n,i,r){const s=[];for(let a=0;a<t.length;a++){const A=t[a];let l;for(let t=0;t<A.length-1;t++){let a=A[t],c=A[t+1];a.x<e&&c.x<e||(a.x<e?a=new o(e,a.y+(e-a.x)/(c.x-a.x)*(c.y-a.y))._round():c.x<e&&(c=new o(e,a.y+(e-a.x)/(c.x-a.x)*(c.y-a.y))._round()),a.y<n&&c.y<n||(a.y<n?a=new o(a.x+(n-a.y)/(c.y-a.y)*(c.x-a.x),n)._round():c.y<n&&(c=new o(a.x+(n-a.y)/(c.y-a.y)*(c.x-a.x),n)._round()),a.x>=i&&c.x>=i||(a.x>=i?a=new o(i,a.y+(i-a.x)/(c.x-a.x)*(c.y-a.y))._round():c.x>=i&&(c=new o(i,a.y+(i-a.x)/(c.x-a.x)*(c.y-a.y))._round()),a.y>=r&&c.y>=r||(a.y>=r?a=new o(a.x+(r-a.y)/(c.y-a.y)*(c.x-a.x),r)._round():c.y>=r&&(c=new o(a.x+(r-a.y)/(c.y-a.y)*(c.x-a.x),r)._round()),l&&a.equals(l[l.length-1])||(l=[a],s.push(l)),l.push(c)))))}}return s}Er("FeatureIndex",Yc,{omit:["rawTileData","sourceLayerCoder"]});class Hc extends o{constructor(t,e,n,i){super(t,e),this.angle=n,void 0!==i&&(this.segment=i)}clone(){return new Hc(this.x,this.y,this.angle,this.segment)}}function Vc(t,e,n,i,r){if(void 0===e.segment||0===n)return!0;let o=e,s=e.segment+1,a=0;for(;a>-n/2;){if(s--,s<0)return!1;a-=t[s].dist(o),o=t[s]}a+=t[s].dist(t[s+1]),s++;const A=[];let l=0;for(;a<n/2;){const e=t[s],n=t[s+1];if(!n)return!1;let o=t[s-1].angleTo(e)-e.angleTo(n);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),A.push({distance:a,angleDelta:o}),l+=o;a-A[0].distance>i;)l-=A.shift().angleDelta;if(l>r)return!1;s++,a+=e.dist(n)}return!0}function Wc(t){let e=0;for(let n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function Zc(t,e,n){return t?.6*e*n:0}function Xc(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function $c(t,e,n,i,r,o){const s=Zc(n,r,o),a=Xc(n,i)*o;let A=0;const l=Wc(t)/2;for(let n=0;n<t.length-1;n++){const i=t[n],r=t[n+1],o=i.dist(r);if(A+o>l){const c=(l-A)/o,u=Se.number(i.x,r.x,c),h=Se.number(i.y,r.y,c),g=new Hc(u,h,r.angleTo(i),n);return g._round(),!s||Vc(t,g,a,s,e)?g:void 0}A+=o}}function tu(t,e,n,i,r,o,s,a,A){const l=Zc(i,o,s),c=Xc(i,r),u=c*s,h=0===t[0].x||t[0].x===A||0===t[0].y||t[0].y===A;return e-u<e/4&&(e=u+e/4),eu(t,h?e/2*a%e:(c/2+2*o)*s*a%e,e,l,n,u,h,!1,A)}function eu(t,e,n,i,r,o,s,a,A){const l=o/2,c=Wc(t);let u=0,h=e-n,g=[];for(let e=0;e<t.length-1;e++){const s=t[e],a=t[e+1],d=s.dist(a),p=a.angleTo(s);for(;h+n<u+d;){h+=n;const f=(h-u)/d,m=Se.number(s.x,a.x,f),I=Se.number(s.y,a.y,f);if(m>=0&&m<A&&I>=0&&I<A&&h-l>=0&&h+l<=c){const n=new Hc(m,I,p,e);n._round(),i&&!Vc(t,n,o,i,r)||g.push(n)}}u+=d}return a||g.length||s||(g=eu(t,u/2,n,i,r,o,s,!0,A)),g}Er("Anchor",Hc);const nu=kl;function iu(t,e,n,i){const r=[],s=t.image,a=s.pixelRatio,A=s.paddedRect.w-2*nu,l=s.paddedRect.h-2*nu;let c={x1:t.left,y1:t.top,x2:t.right,y2:t.bottom};const u=s.stretchX||[[0,A]],h=s.stretchY||[[0,l]],g=(t,e)=>t+e[1]-e[0],d=u.reduce(g,0),p=h.reduce(g,0),f=A-d,m=l-p;let I=0,y=d,C=0,E=p,_=0,v=f,B=0,w=m;if(s.content&&i){const e=s.content,n=e[2]-e[0],i=e[3]-e[1];(s.textFitWidth||s.textFitHeight)&&(c=Xl(t)),I=ru(u,0,e[0]),C=ru(h,0,e[1]),y=ru(u,e[0],e[2]),E=ru(h,e[1],e[3]),_=e[0]-I,B=e[1]-C,v=n-y,w=i-E}const b=c.x1,Q=c.y1,x=c.x2-b,D=c.y2-Q,S=(t,i,r,A)=>{const l=su(t.stretch-I,y,x,b),c=au(t.fixed-_,v,t.stretch,d),u=su(i.stretch-C,E,D,Q),h=au(i.fixed-B,w,i.stretch,p),g=su(r.stretch-I,y,x,b),f=au(r.fixed-_,v,r.stretch,d),m=su(A.stretch-C,E,D,Q),S=au(A.fixed-B,w,A.stretch,p),M=new o(l,u),k=new o(g,u),R=new o(g,m),N=new o(l,m),P=new o(c/a,h/a),T=new o(f/a,S/a),L=e*Math.PI/180;if(L){const t=Math.sin(L),e=Math.cos(L),n=[e,-t,t,e];M._matMult(n),k._matMult(n),N._matMult(n),R._matMult(n)}const F=t.stretch+t.fixed,O=i.stretch+i.fixed;return{tl:M,tr:k,bl:N,br:R,tex:{x:s.paddedRect.x+nu+F,y:s.paddedRect.y+nu+O,w:r.stretch+r.fixed-F,h:A.stretch+A.fixed-O},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:P,pixelOffsetBR:T,minFontScaleX:v/a/x,minFontScaleY:w/a/D,isSDF:n}};if(i&&(s.stretchX||s.stretchY)){const t=ou(u,f,d),e=ou(h,m,p);for(let n=0;n<t.length-1;n++){const i=t[n],o=t[n+1];for(let t=0;t<e.length-1;t++)r.push(S(i,e[t],o,e[t+1]))}}else r.push(S({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:A+1},{fixed:0,stretch:l+1}));return r}function ru(t,e,n){let i=0;for(const r of t)i+=Math.max(e,Math.min(n,r[1]))-Math.max(e,Math.min(n,r[0]));return i}function ou(t,e,n){const i=[{fixed:-nu,stretch:0}];for(const[e,n]of t){const t=i[i.length-1];i.push({fixed:e-t.stretch,stretch:t.stretch}),i.push({fixed:e-t.stretch,stretch:t.stretch+(n-e)})}return i.push({fixed:e+nu,stretch:n}),i}function su(t,e,n,i){return t/e*n+i}function au(t,e,n,i){return t-e*n/i}class Au{constructor(t,e,n,i,r,s,a,A,l,c){var u;if(this.boxStartIndex=t.length,l){let t=s.top,e=s.bottom;const n=s.collisionPadding;n&&(t-=n[1],e+=n[3]);let i=e-t;i>0&&(i=Math.max(10,i),this.circleDiameter=i)}else{const l=(null===(u=s.image)||void 0===u?void 0:u.content)&&(s.image.textFitWidth||s.image.textFitHeight)?Xl(s):{x1:s.left,y1:s.top,x2:s.right,y2:s.bottom};l.y1=l.y1*a-A[0],l.y2=l.y2*a+A[2],l.x1=l.x1*a-A[3],l.x2=l.x2*a+A[1];const h=s.collisionPadding;if(h&&(l.x1-=h[0]*a,l.y1-=h[1]*a,l.x2+=h[2]*a,l.y2+=h[3]*a),c){const t=new o(l.x1,l.y1),e=new o(l.x2,l.y1),n=new o(l.x1,l.y2),i=new o(l.x2,l.y2),r=c*Math.PI/180;t._rotate(r),e._rotate(r),n._rotate(r),i._rotate(r),l.x1=Math.min(t.x,e.x,n.x,i.x),l.x2=Math.max(t.x,e.x,n.x,i.x),l.y1=Math.min(t.y,e.y,n.y,i.y),l.y2=Math.max(t.y,e.y,n.y,i.y)}t.emplaceBack(e.x,e.y,l.x1,l.y1,l.x2,l.y2,n,i,r)}this.boxEndIndex=t.length}}class lu{constructor(t=[],e=(t,e)=>t<e?-1:t>e?1:0){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let t=(this.length>>1)-1;t>=0;t--)this._down(t)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return--this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:n}=this,i=e[t];for(;t>0;){const r=t-1>>1,o=e[r];if(n(i,o)>=0)break;e[t]=o,t=r}e[t]=i}_down(t){const{data:e,compare:n}=this,i=this.length>>1,r=e[t];for(;t<i;){let i=1+(t<<1);const o=i+1;if(o<this.length&&n(e[o],e[i])<0&&(i=o),n(e[i],r)>=0)break;e[t]=e[i],t=i}e[t]=r}}function cu(t,e=1,n=!1){let i=1/0,r=1/0,s=-1/0,a=-1/0;const A=t[0];for(let t=0;t<A.length;t++){const e=A[t];(!t||e.x<i)&&(i=e.x),(!t||e.y<r)&&(r=e.y),(!t||e.x>s)&&(s=e.x),(!t||e.y>a)&&(a=e.y)}const l=Math.min(s-i,a-r);let c=l/2;const u=new lu([],uu);if(0===l)return new o(i,r);for(let e=i;e<s;e+=l)for(let n=r;n<a;n+=l)u.push(new hu(e+c,n+c,c,t));let h=function(t){let e=0,n=0,i=0;const r=t[0];for(let t=0,o=r.length,s=o-1;t<o;s=t++){const o=r[t],a=r[s],A=o.x*a.y-a.x*o.y;n+=(o.x+a.x)*A,i+=(o.y+a.y)*A,e+=3*A}return new hu(n/e,i/e,0,t)}(t),g=u.length;for(;u.length;){const i=u.pop();(i.d>h.d||!h.d)&&(h=i,n&&console.log("found best %d after %d probes",Math.round(1e4*i.d)/1e4,g)),i.max-h.d<=e||(c=i.h/2,u.push(new hu(i.p.x-c,i.p.y-c,c,t)),u.push(new hu(i.p.x+c,i.p.y-c,c,t)),u.push(new hu(i.p.x-c,i.p.y+c,c,t)),u.push(new hu(i.p.x+c,i.p.y+c,c,t)),g+=4)}return n&&(console.log(`num probes: ${g}`),console.log(`best distance: ${h.d}`)),h.p}function uu(t,e){return e.max-t.max}function hu(t,e,n,i){this.p=new o(t,e),this.h=n,this.d=function(t,e){let n=!1,i=1/0;for(let r=0;r<e.length;r++){const o=e[r];for(let e=0,r=o.length,s=r-1;e<r;s=e++){const r=o[e],a=o[s];r.y>t.y!=a.y>t.y&&t.x<(a.x-r.x)*(t.y-r.y)/(a.y-r.y)+r.x&&(n=!n),i=Math.min(i,Ws(t,r,a))}}return(n?1:-1)*Math.sqrt(i)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}var gu;t.aq=void 0,(gu=t.aq||(t.aq={}))[gu.center=1]="center",gu[gu.left=2]="left",gu[gu.right=3]="right",gu[gu.top=4]="top",gu[gu.bottom=5]="bottom",gu[gu["top-left"]=6]="top-left",gu[gu["top-right"]=7]="top-right",gu[gu["bottom-left"]=8]="bottom-left",gu[gu["bottom-right"]=9]="bottom-right";const du=7,pu=Number.POSITIVE_INFINITY;function fu(t,e){return e[1]!==pu?function(t,e,n){let i=0,r=0;switch(e=Math.abs(e),n=Math.abs(n),t){case"top-right":case"top-left":case"top":r=n-du;break;case"bottom-right":case"bottom-left":case"bottom":r=-n+du}switch(t){case"top-right":case"bottom-right":case"right":i=-e;break;case"top-left":case"bottom-left":case"left":i=e}return[i,r]}(t,e[0],e[1]):function(t,e){let n=0,i=0;e<0&&(e=0);const r=e/Math.SQRT2;switch(t){case"top-right":case"top-left":i=r-du;break;case"bottom-right":case"bottom-left":i=-r+du;break;case"bottom":i=-e+du;break;case"top":i=e-du}switch(t){case"top-right":case"bottom-right":n=-r;break;case"top-left":case"bottom-left":n=r;break;case"left":n=e;break;case"right":n=-e}return[n,i]}(t,e[0])}function mu(t,e,n){var i;const r=t.layout,o=null===(i=r.get("text-variable-anchor-offset"))||void 0===i?void 0:i.evaluate(e,{},n);if(o){const t=o.values,e=[];for(let n=0;n<t.length;n+=2){const i=e[n]=t[n],r=t[n+1].map((t=>t*nl));i.startsWith("top")?r[1]-=du:i.startsWith("bottom")&&(r[1]+=du),e[n+1]=r}return new $t(e)}const s=r.get("text-variable-anchor");if(s){let i;i=void 0!==t._unevaluatedLayout.getValue("text-radial-offset")?[r.get("text-radial-offset").evaluate(e,{},n)*nl,pu]:r.get("text-offset").evaluate(e,{},n).map((t=>t*nl));const o=[];for(const t of s)o.push(t,fu(t,i));return new $t(o)}return null}function Iu(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function yu(e,n,i,r,o,s,a,A,l,c,u){let h=s.textMaxSize.evaluate(n,{});void 0===h&&(h=a);const g=e.layers[0].layout,d=g.get("icon-offset").evaluate(n,{},u),p=Eu(i.horizontal),f=a/24,m=e.tilePixelRatio*f,I=e.tilePixelRatio*h/24,y=e.tilePixelRatio*A,C=e.tilePixelRatio*g.get("symbol-spacing"),E=g.get("text-padding")*e.tilePixelRatio,_=function(t,e,n,i=1){const r=t.get("icon-padding").evaluate(e,{},n),o=r&&r.values;return[o[0]*i,o[1]*i,o[2]*i,o[3]*i]}(g,n,u,e.tilePixelRatio),B=g.get("text-max-angle")/180*Math.PI,w="viewport"!==g.get("text-rotation-alignment")&&"point"!==g.get("symbol-placement"),b="map"===g.get("icon-rotation-alignment")&&"point"!==g.get("symbol-placement"),Q=g.get("symbol-placement"),x=C/2,D=g.get("icon-text-fit");let S;r&&"none"!==D&&(e.allowVerticalPlacement&&i.vertical&&(S=$l(r,i.vertical,D,g.get("icon-text-fit-padding"),d,f)),p&&(r=$l(r,p,D,g.get("icon-text-fit-padding"),d,f)));const M=(A,h)=>{h.x<0||h.x>=Ts||h.y<0||h.y>=Ts||function(e,n,i,r,o,s,a,A,l,c,u,h,g,d,p,f,m,I,y,C,E,_,B,w,b){const Q=e.addToLineVertexArray(n,i);let x,D,S,M,k=0,R=0,N=0,P=0,T=-1,L=-1;const F={};let O=fs("");if(e.allowVerticalPlacement&&r.vertical){const t=A.layout.get("text-rotate").evaluate(E,{},w)+90;S=new Au(l,n,c,u,h,r.vertical,g,d,p,t),a&&(M=new Au(l,n,c,u,h,a,m,I,p,t))}if(o){const i=A.layout.get("icon-rotate").evaluate(E,{}),r="none"!==A.layout.get("icon-text-fit"),s=iu(o,i,B,r),g=a?iu(a,i,B,r):void 0;D=new Au(l,n,c,u,h,o,m,I,!1,i),k=4*s.length;const d=e.iconSizeData;let p=null;"source"===d.kind?(p=[ec*A.layout.get("icon-size").evaluate(E,{})],p[0]>nc&&v(`${e.layerIds[0]}: Value for "icon-size" is >= ${tc}. Reduce your "icon-size".`)):"composite"===d.kind&&(p=[ec*_.compositeIconSizes[0].evaluate(E,{},w),ec*_.compositeIconSizes[1].evaluate(E,{},w)],(p[0]>nc||p[1]>nc)&&v(`${e.layerIds[0]}: Value for "icon-size" is >= ${tc}. Reduce your "icon-size".`)),e.addSymbols(e.icon,s,p,C,y,E,t.ah.none,n,Q.lineStartIndex,Q.lineLength,-1,w),T=e.icon.placedSymbolArray.length-1,g&&(R=4*g.length,e.addSymbols(e.icon,g,p,C,y,E,t.ah.vertical,n,Q.lineStartIndex,Q.lineLength,-1,w),L=e.icon.placedSymbolArray.length-1)}const G=Object.keys(r.horizontal);for(const i of G){const o=r.horizontal[i];if(!x){O=fs(o.text);const t=A.layout.get("text-rotate").evaluate(E,{},w);x=new Au(l,n,c,u,h,o,g,d,p,t)}const a=1===o.positionedLines.length;if(N+=Cu(e,n,o,s,A,p,E,f,Q,r.vertical?t.ah.horizontal:t.ah.horizontalOnly,a?G:[i],F,T,_,w),a)break}r.vertical&&(P+=Cu(e,n,r.vertical,s,A,p,E,f,Q,t.ah.vertical,["vertical"],F,L,_,w));const U=x?x.boxStartIndex:e.collisionBoxArray.length,j=x?x.boxEndIndex:e.collisionBoxArray.length,Y=S?S.boxStartIndex:e.collisionBoxArray.length,K=S?S.boxEndIndex:e.collisionBoxArray.length,z=D?D.boxStartIndex:e.collisionBoxArray.length,J=D?D.boxEndIndex:e.collisionBoxArray.length,q=M?M.boxStartIndex:e.collisionBoxArray.length,H=M?M.boxEndIndex:e.collisionBoxArray.length;let V=-1;const W=(t,e)=>t&&t.circleDiameter?Math.max(t.circleDiameter,e):e;V=W(x,V),V=W(S,V),V=W(D,V),V=W(M,V);const Z=V>-1?1:0;Z&&(V*=b/nl),e.glyphOffsetArray.length>=hc.MAX_GLYPHS&&v("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==E.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,E.sortKey);const X=mu(A,E,w),[$,tt]=function(e,n){const i=e.length,r=null==n?void 0:n.values;if((null==r?void 0:r.length)>0)for(let n=0;n<r.length;n+=2){const i=r[n+1];e.emplaceBack(t.aq[r[n]],i[0],i[1])}return[i,e.length]}(e.textAnchorOffsets,X);e.symbolInstances.emplaceBack(n.x,n.y,F.right>=0?F.right:-1,F.center>=0?F.center:-1,F.left>=0?F.left:-1,F.vertical||-1,T,L,O,U,j,Y,K,z,J,q,H,c,N,P,k,R,Z,0,g,V,$,tt)}(e,h,A,i,r,o,S,e.layers[0],e.collisionBoxArray,n.index,n.sourceLayerIndex,e.index,m,[E,E,E,E],w,l,y,_,b,d,n,s,c,u,a)};if("line"===Q)for(const t of qc(n.geometry,0,0,Ts,Ts)){const n=tu(t,C,B,i.vertical||p,r,24,I,e.overscaling,Ts);for(const i of n)p&&_u(e,p.text,x,i)||M(t,i)}else if("line-center"===Q){for(const t of n.geometry)if(t.length>1){const e=$c(t,B,i.vertical||p,r,24,I);e&&M(t,e)}}else if("Polygon"===n.type)for(const t of yn(n.geometry,0)){const e=cu(t,16);M(t[0],new Hc(e.x,e.y,0))}else if("LineString"===n.type)for(const t of n.geometry)M(t,new Hc(t[0].x,t[0].y,0));else if("Point"===n.type)for(const t of n.geometry)for(const e of t)M([e],new Hc(e.x,e.y,0))}function Cu(t,e,n,i,r,s,a,A,l,c,u,h,g,d,p){const f=function(t,e,n,i,r,s,a,A){const l=i.layout.get("text-rotate").evaluate(s,{})*Math.PI/180,c=[];for(const t of e.positionedLines)for(const i of t.positionedGlyphs){if(!i.rect)continue;const s=i.rect||{};let u=Sl+1,h=!0,g=1,d=0;const p=(r||A)&&i.vertical,f=i.metrics.advance*i.scale/2;if(A&&e.verticalizable&&(d=t.lineOffset/2-(i.imageName?-(nl-i.metrics.width*i.scale)/2:(i.scale-1)*nl)),i.imageName){const t=a[i.imageName];h=t.sdf,g=t.pixelRatio,u=kl/g}const m=r?[i.x+f,i.y]:[0,0];let I=r?[0,0]:[i.x+f+n[0],i.y+n[1]-d],y=[0,0];p&&(y=I,I=[0,0]);const C=i.metrics.isDoubleResolution?2:1,E=(i.metrics.left-u)*i.scale-f+I[0],_=(-i.metrics.top-u)*i.scale+I[1],v=E+s.w/C*i.scale/g,B=_+s.h/C*i.scale/g,w=new o(E,_),b=new o(v,_),Q=new o(E,B),x=new o(v,B);if(p){const t=new o(-f,f-Tl),e=-Math.PI/2,n=nl/2-f,r=new o(5-Tl-n,-(i.imageName?n:0)),s=new o(...y);w._rotateAround(e,t)._add(r)._add(s),b._rotateAround(e,t)._add(r)._add(s),Q._rotateAround(e,t)._add(r)._add(s),x._rotateAround(e,t)._add(r)._add(s)}if(l){const t=Math.sin(l),e=Math.cos(l),n=[e,-t,t,e];w._matMult(n),b._matMult(n),Q._matMult(n),x._matMult(n)}const D=new o(0,0),S=new o(0,0);c.push({tl:w,tr:b,bl:Q,br:x,tex:s,writingMode:e.writingMode,glyphOffset:m,sectionIndex:i.sectionIndex,isSDF:h,pixelOffsetTL:D,pixelOffsetBR:S,minFontScaleX:0,minFontScaleY:0})}return c}(0,n,A,r,s,a,i,t.allowVerticalPlacement),m=t.textSizeData;let I=null;"source"===m.kind?(I=[ec*r.layout.get("text-size").evaluate(a,{})],I[0]>nc&&v(`${t.layerIds[0]}: Value for "text-size" is >= ${tc}. Reduce your "text-size".`)):"composite"===m.kind&&(I=[ec*d.compositeTextSizes[0].evaluate(a,{},p),ec*d.compositeTextSizes[1].evaluate(a,{},p)],(I[0]>nc||I[1]>nc)&&v(`${t.layerIds[0]}: Value for "text-size" is >= ${tc}. Reduce your "text-size".`)),t.addSymbols(t.text,f,I,A,s,a,c,e,l.lineStartIndex,l.lineLength,g,p);for(const e of u)h[e]=t.text.placedSymbolArray.length-1;return 4*f.length}function Eu(t){for(const e in t)return t[e];return null}function _u(t,e,n,i){const r=t.compareText;if(e in r){const t=r[e];for(let e=t.length-1;e>=0;e--)if(i.dist(t[e])<n)return!0}else r[e]=[];return r[e].push(i),!1}const vu=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Bu{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[e,n]=new Uint8Array(t,0,2);if(219!==e)throw new Error("Data does not appear to be in a KDBush format.");const i=n>>4;if(1!==i)throw new Error(`Got v${i} data when expected v1.`);const r=vu[15&n];if(!r)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(t,2,1),[s]=new Uint32Array(t,4,1);return new Bu(s,o,r,t)}constructor(t,e=64,n=Float64Array,i){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+e,2),65535),this.ArrayType=n,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const r=vu.indexOf(this.ArrayType),o=2*t*this.ArrayType.BYTES_PER_ELEMENT,s=t*this.IndexArrayType.BYTES_PER_ELEMENT,a=(8-s%8)%8;if(r<0)throw new Error(`Unexpected typed array class: ${n}.`);i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+s+a,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+o+s+a),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+s+a,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+r]),new Uint16Array(this.data,2,1)[0]=e,new Uint32Array(this.data,4,1)[0]=t)}add(t,e){const n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=t,this.coords[this._pos++]=e,n}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return wu(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,e,n,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:o,nodeSize:s}=this,a=[0,r.length-1,0],A=[];for(;a.length;){const l=a.pop()||0,c=a.pop()||0,u=a.pop()||0;if(c-u<=s){for(let s=u;s<=c;s++){const a=o[2*s],l=o[2*s+1];a>=t&&a<=n&&l>=e&&l<=i&&A.push(r[s])}continue}const h=u+c>>1,g=o[2*h],d=o[2*h+1];g>=t&&g<=n&&d>=e&&d<=i&&A.push(r[h]),(0===l?t<=g:e<=d)&&(a.push(u),a.push(h-1),a.push(1-l)),(0===l?n>=g:i>=d)&&(a.push(h+1),a.push(c),a.push(1-l))}return A}within(t,e,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:r,nodeSize:o}=this,s=[0,i.length-1,0],a=[],A=n*n;for(;s.length;){const l=s.pop()||0,c=s.pop()||0,u=s.pop()||0;if(c-u<=o){for(let n=u;n<=c;n++)Du(r[2*n],r[2*n+1],t,e)<=A&&a.push(i[n]);continue}const h=u+c>>1,g=r[2*h],d=r[2*h+1];Du(g,d,t,e)<=A&&a.push(i[h]),(0===l?t-n<=g:e-n<=d)&&(s.push(u),s.push(h-1),s.push(1-l)),(0===l?t+n>=g:e+n>=d)&&(s.push(h+1),s.push(c),s.push(1-l))}return a}}function wu(t,e,n,i,r,o){if(r-i<=n)return;const s=i+r>>1;bu(t,e,s,i,r,o),wu(t,e,n,i,s-1,1-o),wu(t,e,n,s+1,r,1-o)}function bu(t,e,n,i,r,o){for(;r>i;){if(r-i>600){const s=r-i+1,a=n-i+1,A=Math.log(s),l=.5*Math.exp(2*A/3),c=.5*Math.sqrt(A*l*(s-l)/s)*(a-s/2<0?-1:1);bu(t,e,n,Math.max(i,Math.floor(n-a*l/s+c)),Math.min(r,Math.floor(n+(s-a)*l/s+c)),o)}const s=e[2*n+o];let a=i,A=r;for(Qu(t,e,i,n),e[2*r+o]>s&&Qu(t,e,i,r);a<A;){for(Qu(t,e,a,A),a++,A--;e[2*a+o]<s;)a++;for(;e[2*A+o]>s;)A--}e[2*i+o]===s?Qu(t,e,i,A):(A++,Qu(t,e,A,r)),A<=n&&(i=A+1),n<=A&&(r=A-1)}}function Qu(t,e,n,i){xu(t,n,i),xu(e,2*n,2*i),xu(e,2*n+1,2*i+1)}function xu(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function Du(t,e,n,i){const r=t-n,o=e-i;return r*r+o*o}var Su;t.bf=void 0,(Su=t.bf||(t.bf={})).create="create",Su.load="load",Su.fullLoad="fullLoad";let Mu=null,ku=[];const Ru=1e3/60,Nu="loadTime",Pu="fullLoadTime",Tu={mark(t){performance.mark(t)},frame(t){const e=t;null!=Mu&&ku.push(e-Mu),Mu=e},clearMetrics(){Mu=null,ku=[],performance.clearMeasures(Nu),performance.clearMeasures(Pu);for(const e in t.bf)performance.clearMarks(t.bf[e])},getPerformanceMetrics(){performance.measure(Nu,t.bf.create,t.bf.load),performance.measure(Pu,t.bf.create,t.bf.fullLoad);const e=performance.getEntriesByName(Nu)[0].duration,n=performance.getEntriesByName(Pu)[0].duration,i=ku.length,r=1/(ku.reduce(((t,e)=>t+e),0)/i/1e3),o=ku.filter((t=>t>Ru)).reduce(((t,e)=>t+(e-Ru)/Ru),0);return{loadTime:e,fullLoadTime:n,fps:r,percentDroppedFrames:o/(i+o)*100,totalFrames:i}}};t.$=class extends ho{},t.A=aa,t.B=pr,t.C=function(t){if(null==b){const e=t.navigator?t.navigator.userAgent:null;b=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return b},t.D=Zr,t.E=z,t.F=class{constructor(t,e){this.target=t,this.mapId=e,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new wc((()=>this.process())),this.subscription=function(t,e,n){return t.addEventListener(e,n,!1),{unsubscribe:()=>{t.removeEventListener(e,n,!1)}}}(this.target,"message",(t=>this.receive(t))),this.globalScope=w(self)?t:window}registerMessageHandler(t,e){this.messageHandlers[t]=e}sendAsync(t,e){return new Promise(((n,i)=>{const r=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[r]={resolve:n,reject:i},e&&e.signal.addEventListener("abort",(()=>{delete this.resolveRejects[r];const e={id:r,type:"<cancel>",origin:location.origin,targetMapId:t.targetMapId,sourceMapId:this.mapId};this.target.postMessage(e)}),{once:!0});const o=[],s=Object.assign(Object.assign({},t),{id:r,sourceMapId:this.mapId,origin:location.origin,data:wr(t.data,o)});this.target.postMessage(s,{transfer:o})}))}receive(t){const e=t.data,n=e.id;if(!("file://"!==e.origin&&"file://"!==location.origin&&"resource://android"!==e.origin&&"resource://android"!==location.origin&&e.origin!==location.origin||e.targetMapId&&this.mapId!==e.targetMapId)){if("<cancel>"===e.type){delete this.tasks[n];const t=this.abortControllers[n];return delete this.abortControllers[n],void(t&&t.abort())}if(w(self)||e.mustQueue)return this.tasks[n]=e,this.taskQueue.push(n),void this.invoker.trigger();this.processTask(n,e)}}process(){if(0===this.taskQueue.length)return;const t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length>0&&this.invoker.trigger(),e&&this.processTask(t,e)}processTask(t,n){return e(this,void 0,void 0,(function*(){if("<response>"===n.type){const e=this.resolveRejects[t];if(delete this.resolveRejects[t],!e)return;return void(n.error?e.reject(br(n.error)):e.resolve(br(n.data)))}if(!this.messageHandlers[n.type])return void this.completeTask(t,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const e=br(n.data),i=new AbortController;this.abortControllers[t]=i;try{const r=yield this.messageHandlers[n.type](n.sourceMapId,e,i);this.completeTask(t,null,r)}catch(e){this.completeTask(t,e)}}))}completeTask(t,e,n){const i=[];delete this.abortControllers[t];const r={id:t,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:e?wr(e):null,data:wr(n,i)};this.target.postMessage(r,{transfer:i})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},t.G=T,t.H=function(){var t=new aa(16);return aa!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.I=Rl,t.J=function(t,e,n){var i,r,o,s,a,A,l,c,u,h,g,d,p=n[0],f=n[1],m=n[2];return e===t?(t[12]=e[0]*p+e[4]*f+e[8]*m+e[12],t[13]=e[1]*p+e[5]*f+e[9]*m+e[13],t[14]=e[2]*p+e[6]*f+e[10]*m+e[14],t[15]=e[3]*p+e[7]*f+e[11]*m+e[15]):(r=e[1],o=e[2],s=e[3],a=e[4],A=e[5],l=e[6],c=e[7],u=e[8],h=e[9],g=e[10],d=e[11],t[0]=i=e[0],t[1]=r,t[2]=o,t[3]=s,t[4]=a,t[5]=A,t[6]=l,t[7]=c,t[8]=u,t[9]=h,t[10]=g,t[11]=d,t[12]=i*p+a*f+u*m+e[12],t[13]=r*p+A*f+h*m+e[13],t[14]=o*p+l*f+g*m+e[14],t[15]=s*p+c*f+d*m+e[15]),t},t.K=function(t,e,n){var i=n[0],r=n[1],o=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.L=la,t.M=function(t,e){const n={};for(let i=0;i<e.length;i++){const r=e[i];r in t&&(n[r]=t[r])}return n},t.N=Qc,t.O=Sc,t.P=o,t.Q=Mc,t.R=_a,t.S=Fc,t.T=zr,t.U=u,t.V=h,t.W=D,t.X=Ts,t.Y=Ao,t.Z=Nc,t._=e,t.a=N,t.a$=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.a0=As,t.a1=Tc,t.a2=rt,t.a3=t=>{const e=window.document.createElement("video");return e.muted=!0,new Promise((n=>{e.onloadstart=()=>{n(e)};for(const n of t){const t=window.document.createElement("source");G(n)||(e.crossOrigin="Anonymous"),t.src=n,e.appendChild(t)}}))},t.a4=function(){return I++},t.a5=Po,t.a6=hc,t.a7=xi,t.a8=Gs,t.a9=jc,t.aA=function(t){if("custom"===t.type)return new Bc(t);switch(t.type){case"background":return new Cc(t);case"circle":return new ga(t);case"fill":return new aA(t);case"fill-extrusion":return new MA(t);case"heatmap":return new Ba(t);case"hillshade":return new Qa(t);case"line":return new qA(t);case"raster":return new vc(t);case"symbol":return new mc(t)}},t.aB=E,t.aC=function(t,e){if(!t)return[{command:"setStyle",args:[e]}];let n=[];try{if(!V(t.version,e.version))return[{command:"setStyle",args:[e]}];V(t.center,e.center)||n.push({command:"setCenter",args:[e.center]}),V(t.zoom,e.zoom)||n.push({command:"setZoom",args:[e.zoom]}),V(t.bearing,e.bearing)||n.push({command:"setBearing",args:[e.bearing]}),V(t.pitch,e.pitch)||n.push({command:"setPitch",args:[e.pitch]}),V(t.sprite,e.sprite)||n.push({command:"setSprite",args:[e.sprite]}),V(t.glyphs,e.glyphs)||n.push({command:"setGlyphs",args:[e.glyphs]}),V(t.transition,e.transition)||n.push({command:"setTransition",args:[e.transition]}),V(t.light,e.light)||n.push({command:"setLight",args:[e.light]}),V(t.terrain,e.terrain)||n.push({command:"setTerrain",args:[e.terrain]}),V(t.sky,e.sky)||n.push({command:"setSky",args:[e.sky]}),V(t.projection,e.projection)||n.push({command:"setProjection",args:[e.projection]});const i={},r=[];!function(t,e,n,i){let r;for(r in e=e||{},t=t||{})Object.prototype.hasOwnProperty.call(t,r)&&(Object.prototype.hasOwnProperty.call(e,r)||X(r,n,i));for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(Object.prototype.hasOwnProperty.call(t,r)?V(t[r],e[r])||("geojson"===t[r].type&&"geojson"===e[r].type&&tt(t,e,r)?W(n,{command:"setGeoJSONSourceData",args:[r,e[r].data]}):$(r,e,n,i)):Z(r,e,n))}(t.sources,e.sources,r,i);const o=[];t.layers&&t.layers.forEach((t=>{"source"in t&&i[t.source]?n.push({command:"removeLayer",args:[t.id]}):o.push(t)})),n=n.concat(r),function(t,e,n){e=e||[];const i=(t=t||[]).map(nt),r=e.map(nt),o=t.reduce(it,{}),s=e.reduce(it,{}),a=i.slice(),A=Object.create(null);let l,c,u,h,g;for(let t=0,e=0;t<i.length;t++)l=i[t],Object.prototype.hasOwnProperty.call(s,l)?e++:(W(n,{command:"removeLayer",args:[l]}),a.splice(a.indexOf(l,e),1));for(let t=0,e=0;t<r.length;t++)l=r[r.length-1-t],a[a.length-1-t]!==l&&(Object.prototype.hasOwnProperty.call(o,l)?(W(n,{command:"removeLayer",args:[l]}),a.splice(a.lastIndexOf(l,a.length-e),1)):e++,h=a[a.length-t],W(n,{command:"addLayer",args:[s[l],h]}),a.splice(a.length-t,0,l),A[l]=!0);for(let t=0;t<r.length;t++)if(l=r[t],c=o[l],u=s[l],!A[l]&&!V(c,u))if(V(c.source,u.source)&&V(c["source-layer"],u["source-layer"])&&V(c.type,u.type)){for(g in et(c.layout,u.layout,n,l,null,"setLayoutProperty"),et(c.paint,u.paint,n,l,null,"setPaintProperty"),V(c.filter,u.filter)||W(n,{command:"setFilter",args:[l,u.filter]}),V(c.minzoom,u.minzoom)&&V(c.maxzoom,u.maxzoom)||W(n,{command:"setLayerZoomRange",args:[l,u.minzoom,u.maxzoom]}),c)Object.prototype.hasOwnProperty.call(c,g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?et(c[g],u[g],n,l,g.slice(6),"setPaintProperty"):V(c[g],u[g])||W(n,{command:"setLayerProperty",args:[l,g,u[g]]}));for(g in u)Object.prototype.hasOwnProperty.call(u,g)&&!Object.prototype.hasOwnProperty.call(c,g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?et(c[g],u[g],n,l,g.slice(6),"setPaintProperty"):V(c[g],u[g])||W(n,{command:"setLayerProperty",args:[l,g,u[g]]}))}else W(n,{command:"removeLayer",args:[l]}),h=a[a.lastIndexOf(l)+1],W(n,{command:"addLayer",args:[u,h]})}(o,e.layers,n)}catch(t){console.warn("Unable to compute style diff:",t),n=[{command:"setStyle",args:[e]}]}return n},t.aD=function(t){const e=[],n=t.id;return void 0===n&&e.push({message:`layers.${n}: missing required property "id"`}),void 0===t.render&&e.push({message:`layers.${n}: missing required method "render"`}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),e},t.aE=function t(e,n){if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(!t(e[i],n[i]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const i in e)if(!t(e[i],n[i]))return!1;return!0}return e===n},t.aF=y,t.aG=C,t.aH=class extends Es{constructor(t,e){super(t,e),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))}},t.aI=_s,t.aJ=class extends Es{constructor(t,e){super(t,e),this.current=ws}set(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(let e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}}},t.aK=vs,t.aL=Bs,t.aM=qt,t.aN=class extends Es{constructor(t,e){super(t,e),this.current=[0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))}},t.aO=class extends Es{constructor(t,e){super(t,e),this.current=[0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))}},t.aP=function(t,e,n,i,r,o,s){var a=1/(e-n),A=1/(i-r),l=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*A,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*a,t[13]=(r+i)*A,t[14]=(s+o)*l,t[15]=1,t},t.aQ=ua,t.aR=class extends vo{},t.aS=$A,t.aT=class extends wo{},t.aU=function(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},t.aV=va,t.aW=Jo,t.aX=rs,t.aY=class extends ko{},t.aZ=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},t.a_=function(t,e){var n=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],A=t[6],l=t[7],c=t[8],u=t[9],h=t[10],g=t[11],d=t[12],p=t[13],f=t[14],m=t[15],I=e[0],y=e[1],C=e[2],E=e[3],_=e[4],v=e[5],B=e[6],w=e[7],b=e[8],Q=e[9],x=e[10],D=e[11],S=e[12],M=e[13],k=e[14],R=e[15];return Math.abs(n-I)<=sa*Math.max(1,Math.abs(n),Math.abs(I))&&Math.abs(i-y)<=sa*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(r-C)<=sa*Math.max(1,Math.abs(r),Math.abs(C))&&Math.abs(o-E)<=sa*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(s-_)<=sa*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(a-v)<=sa*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(A-B)<=sa*Math.max(1,Math.abs(A),Math.abs(B))&&Math.abs(l-w)<=sa*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(c-b)<=sa*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(u-Q)<=sa*Math.max(1,Math.abs(u),Math.abs(Q))&&Math.abs(h-x)<=sa*Math.max(1,Math.abs(h),Math.abs(x))&&Math.abs(g-D)<=sa*Math.max(1,Math.abs(g),Math.abs(D))&&Math.abs(d-S)<=sa*Math.max(1,Math.abs(d),Math.abs(S))&&Math.abs(p-M)<=sa*Math.max(1,Math.abs(p),Math.abs(M))&&Math.abs(f-k)<=sa*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(m-R)<=sa*Math.max(1,Math.abs(m),Math.abs(R))},t.aa=function(t){const e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((t,n,i,r)=>{const o=i||r;return e[n]=!o||o.toLowerCase(),""})),e["max-age"]){const t=parseInt(e["max-age"],10);isNaN(t)?delete e["max-age"]:e["max-age"]=t}return e},t.ab=function(t,e){const n=[];for(const i in t)i in e||n.push(i);return n},t.ac=p,t.ad=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],s=e[1],a=e[2],A=e[3],l=e[4],c=e[5],u=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+l*i,t[1]=s*r+c*i,t[2]=a*r+u*i,t[3]=A*r+h*i,t[4]=l*r-o*i,t[5]=c*r-s*i,t[6]=u*r-a*i,t[7]=h*r-A*i,t},t.ae=function(t){var e=new aa(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.af=ha,t.ag=function(t,e){let n=0,i=0;if("constant"===t.kind)i=t.layoutSize;else if("source"!==t.kind){const{interpolationType:r,minZoom:o,maxZoom:s}=t,a=r?p(Me.interpolationFactor(r,e,o,s),0,1):0;"camera"===t.kind?i=Se.number(t.minSize,t.maxSize,a):n=a}return{uSizeT:n,uSize:i}},t.ai=function(t,{uSize:e,uSizeT:n},{lowerSize:i,upperSize:r}){return"source"===t.kind?i/ec:"composite"===t.kind?Se.number(i/ec,r/ec,n):e},t.aj=Ac,t.ak=function(t,e,n,i){const r=e.y-t.y,s=e.x-t.x,a=i.y-n.y,A=i.x-n.x,l=a*s-A*r;if(0===l)return null;const c=(A*(t.y-n.y)-a*(t.x-n.x))/l;return new o(t.x+c*s,t.y+c*r)},t.al=qc,t.am=Ys,t.an=Aa,t.ao=function(t){let e=1/0,n=1/0,i=-1/0,r=-1/0;for(const o of t)e=Math.min(e,o.x),n=Math.min(n,o.y),i=Math.max(i,o.x),r=Math.max(r,o.y);return[e,n,i,r]},t.ap=nl,t.ar=rc,t.as=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],A=e[6],l=e[7],c=e[8],u=e[9],h=e[10],g=e[11],d=e[12],p=e[13],f=e[14],m=e[15],I=n*a-i*s,y=n*A-r*s,C=n*l-o*s,E=i*A-r*a,_=i*l-o*a,v=r*l-o*A,B=c*p-u*d,w=c*f-h*d,b=c*m-g*d,Q=u*f-h*p,x=u*m-g*p,D=h*m-g*f,S=I*D-y*x+C*Q+E*b-_*w+v*B;return S?(t[0]=(a*D-A*x+l*Q)*(S=1/S),t[1]=(r*x-i*D-o*Q)*S,t[2]=(p*v-f*_+m*E)*S,t[3]=(h*_-u*v-g*E)*S,t[4]=(A*b-s*D-l*w)*S,t[5]=(n*D-r*b+o*w)*S,t[6]=(f*C-d*v-m*y)*S,t[7]=(c*v-h*C+g*y)*S,t[8]=(s*x-a*b+l*B)*S,t[9]=(i*b-n*x-o*B)*S,t[10]=(d*_-p*C+m*I)*S,t[11]=(u*C-c*_-g*I)*S,t[12]=(a*w-s*Q-A*B)*S,t[13]=(n*Q-i*w+r*B)*S,t[14]=(p*y-d*E-f*I)*S,t[15]=(c*E-u*y+h*I)*S,t):null},t.at=Iu,t.au=Vl,t.av=Bu,t.aw=function(){const t={},e=J.$version;for(const n in J.$root){const i=J.$root[n];if(i.required){let r=null;r="version"===n?e:"array"===i.type?[]:{},null!=r&&(t[n]=r)}}return t},t.ax=Qr,t.ay=F,t.az=function(t){t=t.slice();const e=Object.create(null);for(let n=0;n<t.length;n++)e[t[n].id]=t[n];for(let n=0;n<t.length;n++)"ref"in t[n]&&(t[n]=H(t[n],e[t[n].ref]));return t},t.b=Q,t.b0=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t},t.b1=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},t.b2=f,t.b3=Lc,t.b4=kc,t.b5=function(t,e,n,i,r){var o,s=1/Math.tan(e/2);return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(t[10]=(r+i)*(o=1/(i-r)),t[14]=2*r*i*o):(t[10]=-1,t[14]=-2*i),t},t.b6=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[4],s=e[5],a=e[6],A=e[7],l=e[8],c=e[9],u=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+l*i,t[5]=s*r+c*i,t[6]=a*r+u*i,t[7]=A*r+h*i,t[8]=l*r-o*i,t[9]=c*r-s*i,t[10]=u*r-a*i,t[11]=h*r-A*i,t},t.b7=g,t.b8=d,t.b9=function(t){return t*Math.PI/180},t.bA=function(t){return t.message===k},t.bB=Ci,t.bC=Ur,t.ba=function(t,e){const{x:n,y:i}=Nc.fromLngLat(e);return!(t<0||t>25||i<0||i>=1||n<0||n>=1)},t.bb=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.bc=class extends uo{},t.bd=bc,t.be=Tu,t.bg=L,t.bh=function(t,e){N.REGISTERED_PROTOCOLS[t]=e},t.bi=function(t){delete N.REGISTERED_PROTOCOLS[t]},t.bj=function(t,e){const n={};for(let i=0;i<t.length;i++){const r=e&&e[t[i].id]||Li(t[i]);e&&(e[t[i].id]=r);let o=n[r];o||(o=n[r]=[]),o.push(t[i])}const i=[];for(const t in n)i.push(n[t]);return i},t.bk=Er,t.bl=Uc,t.bm=Yc,t.bn=Nl,t.bo=function(e){e.bucket.createArrays(),e.bucket.tilePixelRatio=Ts/(512*e.bucket.overscaling),e.bucket.compareText={},e.bucket.iconsNeedLinear=!1;const n=e.bucket.layers[0],i=n.layout,r=n._unevaluatedLayout._values,o={layoutIconSize:r["icon-size"].possiblyEvaluate(new jr(e.bucket.zoom+1),e.canonical),layoutTextSize:r["text-size"].possiblyEvaluate(new jr(e.bucket.zoom+1),e.canonical),textMaxSize:r["text-size"].possiblyEvaluate(new jr(18))};if("composite"===e.bucket.textSizeData.kind){const{minZoom:t,maxZoom:n}=e.bucket.textSizeData;o.compositeTextSizes=[r["text-size"].possiblyEvaluate(new jr(t),e.canonical),r["text-size"].possiblyEvaluate(new jr(n),e.canonical)]}if("composite"===e.bucket.iconSizeData.kind){const{minZoom:t,maxZoom:n}=e.bucket.iconSizeData;o.compositeIconSizes=[r["icon-size"].possiblyEvaluate(new jr(t),e.canonical),r["icon-size"].possiblyEvaluate(new jr(n),e.canonical)]}const s=i.get("text-line-height")*nl,a="viewport"!==i.get("text-rotation-alignment")&&"point"!==i.get("symbol-placement"),A=i.get("text-keep-upright"),l=i.get("text-size");for(const r of e.bucket.features){const c=i.get("text-font").evaluate(r,{},e.canonical).join(","),u=l.evaluate(r,{},e.canonical),h=o.layoutTextSize.evaluate(r,{},e.canonical),g=o.layoutIconSize.evaluate(r,{},e.canonical),d={horizontal:{},vertical:void 0},p=r.text;let f,m=[0,0];if(p){const o=p.toString(),l=i.get("text-letter-spacing").evaluate(r,{},e.canonical)*nl,g=Sr(o)?l:0,f=i.get("text-anchor").evaluate(r,{},e.canonical),I=mu(n,r,e.canonical);if(!I){const t=i.get("text-radial-offset").evaluate(r,{},e.canonical);m=t?fu(f,[t*nl,pu]):i.get("text-offset").evaluate(r,{},e.canonical).map((t=>t*nl))}let y=a?"center":i.get("text-justify").evaluate(r,{},e.canonical);const C="point"===i.get("symbol-placement")?i.get("text-max-width").evaluate(r,{},e.canonical)*nl:1/0,E=()=>{e.bucket.allowVerticalPlacement&&Dr(o)&&(d.vertical=Ol(p,e.glyphMap,e.glyphPositions,e.imagePositions,c,C,s,f,"left",g,m,t.ah.vertical,!0,h,u))};if(!a&&I){const n=new Set;if("auto"===y)for(let t=0;t<I.values.length;t+=2)n.add(Iu(I.values[t]));else n.add(y);let i=!1;for(const r of n)if(!d.horizontal[r])if(i)d.horizontal[r]=d.horizontal[0];else{const n=Ol(p,e.glyphMap,e.glyphPositions,e.imagePositions,c,C,s,"center",r,g,m,t.ah.horizontal,!1,h,u);n&&(d.horizontal[r]=n,i=1===n.positionedLines.length)}E()}else{"auto"===y&&(y=Iu(f));const n=Ol(p,e.glyphMap,e.glyphPositions,e.imagePositions,c,C,s,f,y,g,m,t.ah.horizontal,!1,h,u);n&&(d.horizontal[y]=n),E(),Dr(o)&&a&&A&&(d.vertical=Ol(p,e.glyphMap,e.glyphPositions,e.imagePositions,c,C,s,f,y,g,m,t.ah.vertical,!1,h,u))}}let I=!1;if(r.icon&&r.icon.name){const t=e.imageMap[r.icon.name];t&&(f=Zl(e.imagePositions[r.icon.name],i.get("icon-offset").evaluate(r,{},e.canonical),i.get("icon-anchor").evaluate(r,{},e.canonical)),I=!!t.sdf,void 0===e.bucket.sdfIcons?e.bucket.sdfIcons=I:e.bucket.sdfIcons!==I&&v("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(t.pixelRatio!==e.bucket.pixelRatio||0!==i.get("icon-rotate").constantOr(1))&&(e.bucket.iconsNeedLinear=!0))}const y=Eu(d.horizontal)||d.vertical;e.bucket.iconsInText=!!y&&y.iconsInText,(y||f)&&yu(e.bucket,r,d,f,e.imageMap,o,h,g,m,I,e.canonical)}e.showCollisionBoxes&&e.bucket.generateCollisionDebugBuffers()},t.bp=UA,t.bq=iA,t.br=bA,t.bs=uA,t.bt=wl,t.bu=class{constructor(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let t=performance.getEntriesByName(this._marks.measure);return 0===t.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),t=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),t}},t.bv=function(t,n,i,r,o){return e(this,void 0,void 0,(function*(){if(h())try{return yield D(t,n,i,r,o)}catch(t){}return function(t,e,n,i,r){const o=t.width,s=t.height;S&&M||(S=new OffscreenCanvas(o,s),M=S.getContext("2d",{willReadFrequently:!0})),S.width=o,S.height=s,M.drawImage(t,0,0,o,s);const a=M.getImageData(e,n,i,r);return M.clearRect(0,0,o,s),a.data}(t,n,i,r,o)}))},t.bw=Gc,t.bx=n,t.by=i,t.bz=il,t.c=R,t.d=t=>e(void 0,void 0,void 0,(function*(){if(0===t.byteLength)return createImageBitmap(new ImageData(1,1));const e=new Blob([new Uint8Array(t)],{type:"image/png"});try{return createImageBitmap(e)}catch(t){throw new Error(`Could not load image because of ${t.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),t.e=m,t.f=t=>new Promise(((e,n)=>{const i=new Image;i.onload=()=>{e(i),URL.revokeObjectURL(i.src),i.onload=null,window.requestAnimationFrame((()=>{i.src=x}))},i.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const r=new Blob([new Uint8Array(t)],{type:"image/png"});i.src=t.byteLength?URL.createObjectURL(r):x})),t.g=P,t.h=(t,e)=>O(m(t,{type:"json"}),e),t.i=w,t.j=K,t.k=Y,t.l=(t,e)=>O(m(t,{type:"arrayBuffer"}),e),t.m=O,t.n=function(t){return new wl(t).readFields(Ql,[])},t.o=Ea,t.p=Ml,t.q=no,t.r=dr,t.s=G,t.t=Ir,t.u=gr,t.v=J,t.w=v,t.x=function([t,e,n]){return e+=90,e*=Math.PI/180,n*=Math.PI/180,{x:t*Math.cos(e)*Math.sin(n),y:t*Math.sin(e)*Math.sin(n),z:t*Math.cos(n)}},t.y=Se,t.z=jr})),n("worker",["./shared"],(function(t){class e{constructor(t){this.keyCache={},t&&this.replace(t)}replace(t){this._layerConfigs={},this._layers={},this.update(t,[])}update(e,n){for(const n of e){this._layerConfigs[n.id]=n;const e=this._layers[n.id]=t.aA(n);e._featureFilter=t.a7(e.filter),this.keyCache[n.id]&&delete this.keyCache[n.id]}for(const t of n)delete this.keyCache[t],delete this._layerConfigs[t],delete this._layers[t];this.familiesBySource={};const i=t.bj(Object.values(this._layerConfigs),this.keyCache);for(const t of i){const e=t.map((t=>this._layers[t.id])),n=e[0];if("none"===n.visibility)continue;const i=n.source||"";let r=this.familiesBySource[i];r||(r=this.familiesBySource[i]={});const o=n.sourceLayer||"_geojsonTileLayer";let s=r[o];s||(s=r[o]=[]),s.push(e)}}}class n{constructor(e){const n={},i=[];for(const t in e){const r=e[t],o=n[t]={};for(const t in r){const e=r[+t];if(!e||0===e.bitmap.width||0===e.bitmap.height)continue;const n={x:0,y:0,w:e.bitmap.width+2,h:e.bitmap.height+2};i.push(n),o[t]={rect:n,metrics:e.metrics}}}const{w:r,h:o}=t.p(i),s=new t.o({width:r||1,height:o||1});for(const i in e){const r=e[i];for(const e in r){const o=r[+e];if(!o||0===o.bitmap.width||0===o.bitmap.height)continue;const a=n[i][e].rect;t.o.copy(o.bitmap,s,{x:0,y:0},{x:a.x+1,y:a.y+1},o.bitmap)}}this.image=s,this.positions=n}}t.bk("GlyphAtlas",n);class i{constructor(e){this.tileID=new t.S(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.inFlightDependencies=[]}parse(e,i,o,s){return t._(this,void 0,void 0,(function*(){this.status="parsing",this.data=e,this.collisionBoxArray=new t.a5;const a=new t.bl(Object.keys(e.layers).sort()),A=new t.bm(this.tileID,this.promoteId);A.bucketLayerIDs=[];const l={},c={featureIndex:A,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:o},u=i.familiesBySource[this.source];for(const n in u){const i=e.layers[n];if(!i)continue;1===i.version&&t.w(`Vector tile source "${this.source}" layer "${n}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const s=a.encode(n),h=[];for(let t=0;t<i.length;t++){const e=i.feature(t),r=A.getId(e,n);h.push({feature:e,id:r,index:t,sourceLayerIndex:s})}for(const e of u[n]){const n=e[0];n.source!==this.source&&t.w(`layer.source = ${n.source} does not equal this.source = ${this.source}`),n.minzoom&&this.zoom<Math.floor(n.minzoom)||n.maxzoom&&this.zoom>=n.maxzoom||"none"!==n.visibility&&(r(e,this.zoom,o),(l[n.id]=n.createBucket({index:A.bucketLayerIDs.length,layers:e,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:s,sourceID:this.source})).populate(h,c,this.tileID.canonical),A.bucketLayerIDs.push(e.map((t=>t.id))))}}const h=t.aF(c.glyphDependencies,(t=>Object.keys(t).map(Number)));this.inFlightDependencies.forEach((t=>null==t?void 0:t.abort())),this.inFlightDependencies=[];let g=Promise.resolve({});if(Object.keys(h).length){const t=new AbortController;this.inFlightDependencies.push(t),g=s.sendAsync({type:"GG",data:{stacks:h,source:this.source,tileID:this.tileID,type:"glyphs"}},t)}const d=Object.keys(c.iconDependencies);let p=Promise.resolve({});if(d.length){const t=new AbortController;this.inFlightDependencies.push(t),p=s.sendAsync({type:"GI",data:{icons:d,source:this.source,tileID:this.tileID,type:"icons"}},t)}const f=Object.keys(c.patternDependencies);let m=Promise.resolve({});if(f.length){const t=new AbortController;this.inFlightDependencies.push(t),m=s.sendAsync({type:"GI",data:{icons:f,source:this.source,tileID:this.tileID,type:"patterns"}},t)}const[I,y,C]=yield Promise.all([g,p,m]),E=new n(I),_=new t.bn(y,C);for(const e in l){const n=l[e];n instanceof t.a6?(r(n.layers,this.zoom,o),t.bo({bucket:n,glyphMap:I,glyphPositions:E.positions,imageMap:y,imagePositions:_.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):n.hasPattern&&(n instanceof t.bp||n instanceof t.bq||n instanceof t.br)&&(r(n.layers,this.zoom,o),n.addFeatures(c,this.tileID.canonical,_.patternPositions))}return this.status="done",{buckets:Object.values(l).filter((t=>!t.isEmpty())),featureIndex:A,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:E.image,imageAtlas:_,glyphMap:this.returnDependencies?I:null,iconMap:this.returnDependencies?y:null,glyphPositions:this.returnDependencies?E.positions:null}}))}}function r(e,n,i){const r=new t.z(n);for(const t of e)t.recalculate(r,i)}class o{constructor(t,e,n){this.actor=t,this.layerIndex=e,this.availableImages=n,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(e,n){return t._(this,void 0,void 0,(function*(){const i=yield t.l(e.request,n);try{return{vectorTile:new t.bs.VectorTile(new t.bt(i.data)),rawData:i.data,cacheControl:i.cacheControl,expires:i.expires}}catch(t){const n=new Uint8Array(i.data);let r=`Unable to parse the tile at ${e.request.url}, `;throw r+=31===n[0]&&139===n[1]?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${t.message}`,new Error(r)}}))}loadTile(e){return t._(this,void 0,void 0,(function*(){const n=e.uid,r=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.bu(e.request),o=new i(e);this.loading[n]=o;const s=new AbortController;o.abort=s;try{const i=yield this.loadVectorTile(e,s);if(delete this.loading[n],!i)return null;const a=i.rawData,A={};i.expires&&(A.expires=i.expires),i.cacheControl&&(A.cacheControl=i.cacheControl);const l={};if(r){const t=r.finish();t&&(l.resourceTiming=JSON.parse(JSON.stringify(t)))}o.vectorTile=i.vectorTile;const c=o.parse(i.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[n]=o,this.fetching[n]={rawTileData:a,cacheControl:A,resourceTiming:l};try{const e=yield c;return t.e({rawTileData:a.slice(0)},e,A,l)}finally{delete this.fetching[n]}}catch(t){throw delete this.loading[n],o.status="done",this.loaded[n]=o,t}}))}reloadTile(e){return t._(this,void 0,void 0,(function*(){const n=e.uid;if(!this.loaded||!this.loaded[n])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const i=this.loaded[n];if(i.showCollisionBoxes=e.showCollisionBoxes,"parsing"===i.status){const e=yield i.parse(i.vectorTile,this.layerIndex,this.availableImages,this.actor);let r;if(this.fetching[n]){const{rawTileData:i,cacheControl:o,resourceTiming:s}=this.fetching[n];delete this.fetching[n],r=t.e({rawTileData:i.slice(0)},e,o,s)}else r=e;return r}if("done"===i.status&&i.vectorTile)return i.parse(i.vectorTile,this.layerIndex,this.availableImages,this.actor)}))}abortTile(e){return t._(this,void 0,void 0,(function*(){const t=this.loading,n=e.uid;t&&t[n]&&t[n].abort&&(t[n].abort.abort(),delete t[n])}))}removeTile(e){return t._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[e.uid]&&delete this.loaded[e.uid]}))}}class s{constructor(){this.loaded={}}loadTile(e){return t._(this,void 0,void 0,(function*(){const{uid:n,encoding:i,rawImageData:r,redFactor:o,greenFactor:s,blueFactor:a,baseShift:A}=e,l=r.width+2,c=r.height+2,u=t.b(r)?new t.R({width:l,height:c},yield t.bv(r,-1,-1,l,c)):r,h=new t.bw(n,u,i,o,s,a,A);return this.loaded=this.loaded||{},this.loaded[n]=h,h}))}removeTile(t){const e=this.loaded,n=t.uid;e&&e[n]&&delete e[n]}}function a(t,e){if(0!==t.length){A(t[0],e);for(var n=1;n<t.length;n++)A(t[n],!e)}}function A(t,e){for(var n=0,i=0,r=0,o=t.length,s=o-1;r<o;s=r++){var a=(t[r][0]-t[s][0])*(t[s][1]+t[r][1]),A=n+a;i+=Math.abs(n)>=Math.abs(a)?n-A+a:a-A+n,n=A}n+i>=0!=!!e&&t.reverse()}var l=t.bx((function t(e,n){var i,r=e&&e.type;if("FeatureCollection"===r)for(i=0;i<e.features.length;i++)t(e.features[i],n);else if("GeometryCollection"===r)for(i=0;i<e.geometries.length;i++)t(e.geometries[i],n);else if("Feature"===r)t(e.geometry,n);else if("Polygon"===r)a(e.coordinates,n);else if("MultiPolygon"===r)for(i=0;i<e.coordinates.length;i++)a(e.coordinates[i],n);return e}));const c=t.bs.VectorTileFeature.prototype.toGeoJSON;var u={exports:{}},h=t.by,g=t.bs.VectorTileFeature,d=p;function p(t,e){this.options=e||{},this.features=t,this.length=t.length}function f(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}p.prototype.feature=function(t){return new f(this.features[t],this.options.extent)},f.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var n=t[e],i=[],r=0;r<n.length;r++)i.push(new h(n[r][0],n[r][1]));this.geometry.push(i)}return this.geometry},f.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,i=1/0,r=-1/0,o=0;o<t.length;o++)for(var s=t[o],a=0;a<s.length;a++){var A=s[a];e=Math.min(e,A.x),n=Math.max(n,A.x),i=Math.min(i,A.y),r=Math.max(r,A.y)}return[e,i,n,r]},f.prototype.toGeoJSON=g.prototype.toGeoJSON;var m=t.bz,I=d;function y(t){var e=new m;return function(t,e){for(var n in t.layers)e.writeMessage(3,C,t.layers[n])}(t,e),e.finish()}function C(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var i={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)i.feature=t.feature(n),e.writeMessage(2,E,i);var r=i.keys;for(n=0;n<r.length;n++)e.writeStringField(3,r[n]);var o=i.values;for(n=0;n<o.length;n++)e.writeMessage(4,b,o[n])}function E(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,_,t),e.writeVarintField(3,n.type),e.writeMessage(4,w,n)}function _(t,e){var n=t.feature,i=t.keys,r=t.values,o=t.keycache,s=t.valuecache;for(var a in n.properties){var A=n.properties[a],l=o[a];if(null!==A){void 0===l&&(i.push(a),o[a]=l=i.length-1),e.writeVarint(l);var c=typeof A;"string"!==c&&"boolean"!==c&&"number"!==c&&(A=JSON.stringify(A));var u=c+":"+A,h=s[u];void 0===h&&(r.push(A),s[u]=h=r.length-1),e.writeVarint(h)}}}function v(t,e){return(e<<3)+(7&t)}function B(t){return t<<1^t>>31}function w(t,e){for(var n=t.loadGeometry(),i=t.type,r=0,o=0,s=n.length,a=0;a<s;a++){var A=n[a],l=1;1===i&&(l=A.length),e.writeVarint(v(1,l));for(var c=3===i?A.length-1:A.length,u=0;u<c;u++){1===u&&1!==i&&e.writeVarint(v(2,c-1));var h=A[u].x-r,g=A[u].y-o;e.writeVarint(B(h)),e.writeVarint(B(g)),r+=h,o+=g}3===i&&e.writeVarint(v(7,1))}}function b(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}u.exports=y,u.exports.fromVectorTileJs=y,u.exports.fromGeojsonVt=function(t,e){e=e||{};var n={};for(var i in t)n[i]=new I(t[i].features,e),n[i].name=i,n[i].version=e.version,n[i].extent=e.extent;return y({layers:n})},u.exports.GeoJSONWrapper=I;var Q=t.bx(u.exports);const x={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},D=Math.fround||(S=new Float32Array(1),t=>(S[0]=+t,S[0]));var S;const M=3,k=5,R=6;class N{constructor(t){this.options=Object.assign(Object.create(x),t),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(t){const{log:e,minZoom:n,maxZoom:i}=this.options;e&&console.time("total time");const r=`prepare ${t.length} points`;e&&console.time(r),this.points=t;const o=[];for(let e=0;e<t.length;e++){const n=t[e];if(!n.geometry)continue;const[i,r]=n.geometry.coordinates,s=D(L(i)),a=D(F(r));o.push(s,a,1/0,e,-1,1),this.options.reduce&&o.push(0)}let s=this.trees[i+1]=this._createTree(o);e&&console.timeEnd(r);for(let t=i;t>=n;t--){const n=+Date.now();s=this.trees[t]=this._createTree(this._cluster(s,t)),e&&console.log("z%d: %d clusters in %dms",t,s.numItems,+Date.now()-n)}return e&&console.timeEnd("total time"),this}getClusters(t,e){let n=((t[0]+180)%360+360)%360-180;const i=Math.max(-90,Math.min(90,t[1]));let r=180===t[2]?180:((t[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,r=180;else if(n>r){const t=this.getClusters([n,i,180,o],e),s=this.getClusters([-180,i,r,o],e);return t.concat(s)}const s=this.trees[this._limitZoom(e)],a=s.range(L(n),F(o),L(r),F(i)),A=s.data,l=[];for(const t of a){const e=this.stride*t;l.push(A[e+k]>1?P(A,e,this.clusterProps):this.points[A[e+M]])}return l}getChildren(t){const e=this._getOriginId(t),n=this._getOriginZoom(t),i="No cluster with the specified id.",r=this.trees[n];if(!r)throw new Error(i);const o=r.data;if(e*this.stride>=o.length)throw new Error(i);const s=this.options.radius/(this.options.extent*Math.pow(2,n-1)),a=r.within(o[e*this.stride],o[e*this.stride+1],s),A=[];for(const e of a){const n=e*this.stride;o[n+4]===t&&A.push(o[n+k]>1?P(o,n,this.clusterProps):this.points[o[n+M]])}if(0===A.length)throw new Error(i);return A}getLeaves(t,e,n){const i=[];return this._appendLeaves(i,t,e=e||10,n=n||0,0),i}getTile(t,e,n){const i=this.trees[this._limitZoom(t)],r=Math.pow(2,t),{extent:o,radius:s}=this.options,a=s/o,A=(n-a)/r,l=(n+1+a)/r,c={features:[]};return this._addTileFeatures(i.range((e-a)/r,A,(e+1+a)/r,l),i.data,e,n,r,c),0===e&&this._addTileFeatures(i.range(1-a/r,A,1,l),i.data,r,n,r,c),e===r-1&&this._addTileFeatures(i.range(0,A,a/r,l),i.data,-1,n,r,c),c.features.length?c:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){const n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e}_appendLeaves(t,e,n,i,r){const o=this.getChildren(e);for(const e of o){const o=e.properties;if(o&&o.cluster?r+o.point_count<=i?r+=o.point_count:r=this._appendLeaves(t,o.cluster_id,n,i,r):r<i?r++:t.push(e),t.length===n)break}return r}_createTree(e){const n=new t.av(e.length/this.stride|0,this.options.nodeSize,Float32Array);for(let t=0;t<e.length;t+=this.stride)n.add(e[t],e[t+1]);return n.finish(),n.data=e,n}_addTileFeatures(t,e,n,i,r,o){for(const s of t){const t=s*this.stride,a=e[t+k]>1;let A,l,c;if(a)A=T(e,t,this.clusterProps),l=e[t],c=e[t+1];else{const n=this.points[e[t+M]];A=n.properties;const[i,r]=n.geometry.coordinates;l=L(i),c=F(r)}const u={type:1,geometry:[[Math.round(this.options.extent*(l*r-n)),Math.round(this.options.extent*(c*r-i))]],tags:A};let h;h=a||this.options.generateId?e[t+M]:this.points[e[t+M]].id,void 0!==h&&(u.id=h),o.features.push(u)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,e){const{radius:n,extent:i,reduce:r,minPoints:o}=this.options,s=n/(i*Math.pow(2,e)),a=t.data,A=[],l=this.stride;for(let n=0;n<a.length;n+=l){if(a[n+2]<=e)continue;a[n+2]=e;const i=a[n],c=a[n+1],u=t.within(a[n],a[n+1],s),h=a[n+k];let g=h;for(const t of u){const n=t*l;a[n+2]>e&&(g+=a[n+k])}if(g>h&&g>=o){let t,o=i*h,s=c*h,d=-1;const p=(n/l<<5)+(e+1)+this.points.length;for(const i of u){const A=i*l;if(a[A+2]<=e)continue;a[A+2]=e;const c=a[A+k];o+=a[A]*c,s+=a[A+1]*c,a[A+4]=p,r&&(t||(t=this._map(a,n,!0),d=this.clusterProps.length,this.clusterProps.push(t)),r(t,this._map(a,A)))}a[n+4]=p,A.push(o/g,s/g,1/0,p,-1,g),r&&A.push(d)}else{for(let t=0;t<l;t++)A.push(a[n+t]);if(g>1)for(const t of u){const n=t*l;if(!(a[n+2]<=e)){a[n+2]=e;for(let t=0;t<l;t++)A.push(a[n+t])}}}}return A}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e,n){if(t[e+k]>1){const i=this.clusterProps[t[e+R]];return n?Object.assign({},i):i}const i=this.points[t[e+M]].properties,r=this.options.map(i);return n&&r===i?Object.assign({},r):r}}function P(t,e,n){return{type:"Feature",id:t[e+M],properties:T(t,e,n),geometry:{type:"Point",coordinates:[(i=t[e],360*(i-.5)),O(t[e+1])]}};var i}function T(t,e,n){const i=t[e+k],r=i>=1e4?`${Math.round(i/1e3)}k`:i>=1e3?Math.round(i/100)/10+"k":i,o=t[e+R],s=-1===o?{}:Object.assign({},n[o]);return Object.assign(s,{cluster:!0,cluster_id:t[e+M],point_count:i,point_count_abbreviated:r})}function L(t){return t/360+.5}function F(t){const e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function O(t){const e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function G(t,e,n,i){let r=i;const o=e+(n-e>>1);let s,a=n-e;const A=t[e],l=t[e+1],c=t[n],u=t[n+1];for(let i=e+3;i<n;i+=3){const e=U(t[i],t[i+1],A,l,c,u);if(e>r)s=i,r=e;else if(e===r){const t=Math.abs(i-o);t<a&&(s=i,a=t)}}r>i&&(s-e>3&&G(t,e,s,i),t[s+2]=r,n-s>3&&G(t,s,n,i))}function U(t,e,n,i,r,o){let s=r-n,a=o-i;if(0!==s||0!==a){const A=((t-n)*s+(e-i)*a)/(s*s+a*a);A>1?(n=r,i=o):A>0&&(n+=s*A,i+=a*A)}return s=t-n,a=e-i,s*s+a*a}function j(t,e,n,i){const r={id:null==t?null:t,type:e,geometry:n,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if("Point"===e||"MultiPoint"===e||"LineString"===e)Y(r,n);else if("Polygon"===e)Y(r,n[0]);else if("MultiLineString"===e)for(const t of n)Y(r,t);else if("MultiPolygon"===e)for(const t of n)Y(r,t[0]);return r}function Y(t,e){for(let n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function K(t,e,n,i){if(!e.geometry)return;const r=e.geometry.coordinates;if(r&&0===r.length)return;const o=e.geometry.type,s=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2);let a=[],A=e.id;if(n.promoteId?A=e.properties[n.promoteId]:n.generateId&&(A=i||0),"Point"===o)z(r,a);else if("MultiPoint"===o)for(const t of r)z(t,a);else if("LineString"===o)J(r,a,s,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(const n of r)a=[],J(n,a,s,!1),t.push(j(A,"LineString",a,e.properties));return}q(r,a,s,!1)}else if("Polygon"===o)q(r,a,s,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(const r of e.geometry.geometries)K(t,{id:A,geometry:r,properties:e.properties},n,i);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const t of r){const e=[];q(t,e,s,!0),a.push(e)}}t.push(j(A,o,a,e.properties))}function z(t,e){e.push(H(t[0]),V(t[1]),0)}function J(t,e,n,i){let r,o,s=0;for(let n=0;n<t.length;n++){const a=H(t[n][0]),A=V(t[n][1]);e.push(a,A,0),n>0&&(s+=i?(r*A-a*o)/2:Math.sqrt(Math.pow(a-r,2)+Math.pow(A-o,2))),r=a,o=A}const a=e.length-3;e[2]=1,G(e,0,a,n),e[a+2]=1,e.size=Math.abs(s),e.start=0,e.end=e.size}function q(t,e,n,i){for(let r=0;r<t.length;r++){const o=[];J(t[r],o,n,i),e.push(o)}}function H(t){return t/360+.5}function V(t){const e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function W(t,e,n,i,r,o,s,a){if(i/=e,o>=(n/=e)&&s<i)return t;if(s<n||o>=i)return null;const A=[];for(const e of t){const t=e.geometry;let o=e.type;const s=0===r?e.minX:e.minY,l=0===r?e.maxX:e.maxY;if(s>=n&&l<i){A.push(e);continue}if(l<n||s>=i)continue;let c=[];if("Point"===o||"MultiPoint"===o)Z(t,c,n,i,r);else if("LineString"===o)X(t,c,n,i,r,!1,a.lineMetrics);else if("MultiLineString"===o)tt(t,c,n,i,r,!1);else if("Polygon"===o)tt(t,c,n,i,r,!0);else if("MultiPolygon"===o)for(const e of t){const t=[];tt(e,t,n,i,r,!0),t.length&&c.push(t)}if(c.length){if(a.lineMetrics&&"LineString"===o){for(const t of c)A.push(j(e.id,o,t,e.tags));continue}"LineString"!==o&&"MultiLineString"!==o||(1===c.length?(o="LineString",c=c[0]):o="MultiLineString"),"Point"!==o&&"MultiPoint"!==o||(o=3===c.length?"Point":"MultiPoint"),A.push(j(e.id,o,c,e.tags))}}return A.length?A:null}function Z(t,e,n,i,r){for(let o=0;o<t.length;o+=3){const s=t[o+r];s>=n&&s<=i&&et(e,t[o],t[o+1],t[o+2])}}function X(t,e,n,i,r,o,s){let a=$(t);const A=0===r?nt:it;let l,c,u=t.start;for(let h=0;h<t.length-3;h+=3){const g=t[h],d=t[h+1],p=t[h+2],f=t[h+3],m=t[h+4],I=0===r?g:d,y=0===r?f:m;let C=!1;s&&(l=Math.sqrt(Math.pow(g-f,2)+Math.pow(d-m,2))),I<n?y>n&&(c=A(a,g,d,f,m,n),s&&(a.start=u+l*c)):I>i?y<i&&(c=A(a,g,d,f,m,i),s&&(a.start=u+l*c)):et(a,g,d,p),y<n&&I>=n&&(c=A(a,g,d,f,m,n),C=!0),y>i&&I<=i&&(c=A(a,g,d,f,m,i),C=!0),!o&&C&&(s&&(a.end=u+l*c),e.push(a),a=$(t)),s&&(u+=l)}let h=t.length-3;const g=t[h],d=t[h+1],p=0===r?g:d;p>=n&&p<=i&&et(a,g,d,t[h+2]),h=a.length-3,o&&h>=3&&(a[h]!==a[0]||a[h+1]!==a[1])&&et(a,a[0],a[1],a[2]),a.length&&e.push(a)}function $(t){const e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function tt(t,e,n,i,r,o){for(const s of t)X(s,e,n,i,r,o,!1)}function et(t,e,n,i){t.push(e,n,i)}function nt(t,e,n,i,r,o){const s=(o-e)/(i-e);return et(t,o,n+(r-n)*s,1),s}function it(t,e,n,i,r,o){const s=(o-n)/(r-n);return et(t,e+(i-e)*s,o,1),s}function rt(t,e){const n=[];for(let i=0;i<t.length;i++){const r=t[i],o=r.type;let s;if("Point"===o||"MultiPoint"===o||"LineString"===o)s=ot(r.geometry,e);else if("MultiLineString"===o||"Polygon"===o){s=[];for(const t of r.geometry)s.push(ot(t,e))}else if("MultiPolygon"===o){s=[];for(const t of r.geometry){const n=[];for(const i of t)n.push(ot(i,e));s.push(n)}}n.push(j(r.id,o,s,r.tags))}return n}function ot(t,e){const n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(let i=0;i<t.length;i+=3)n.push(t[i]+e,t[i+1],t[i+2]);return n}function st(t,e){if(t.transformed)return t;const n=1<<t.z,i=t.x,r=t.y;for(const o of t.features){const t=o.geometry,s=o.type;if(o.geometry=[],1===s)for(let s=0;s<t.length;s+=2)o.geometry.push(at(t[s],t[s+1],e,n,i,r));else for(let s=0;s<t.length;s++){const a=[];for(let o=0;o<t[s].length;o+=2)a.push(at(t[s][o],t[s][o+1],e,n,i,r));o.geometry.push(a)}}return t.transformed=!0,t}function at(t,e,n,i,r,o){return[Math.round(n*(t*i-r)),Math.round(n*(e*i-o))]}function At(t,e,n,i,r){const o=e===r.maxZoom?0:r.tolerance/((1<<e)*r.extent),s={features:[],numPoints:0,numSimplified:0,numFeatures:t.length,source:null,x:n,y:i,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const e of t)lt(s,e,o,r);return s}function lt(t,e,n,i){const r=e.geometry,o=e.type,s=[];if(t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),"Point"===o||"MultiPoint"===o)for(let e=0;e<r.length;e+=3)s.push(r[e],r[e+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)ct(s,r,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(let e=0;e<r.length;e++)ct(s,r[e],t,n,"Polygon"===o,0===e);else if("MultiPolygon"===o)for(let e=0;e<r.length;e++){const i=r[e];for(let e=0;e<i.length;e++)ct(s,i[e],t,n,!0,0===e)}if(s.length){let n=e.tags||null;if("LineString"===o&&i.lineMetrics){n={};for(const t in e.tags)n[t]=e.tags[t];n.mapbox_clip_start=r.start/r.size,n.mapbox_clip_end=r.end/r.size}const a={geometry:s,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:n};null!==e.id&&(a.id=e.id),t.features.push(a)}}function ct(t,e,n,i,r,o){const s=i*i;if(i>0&&e.size<(r?s:i))return void(n.numPoints+=e.length/3);const a=[];for(let t=0;t<e.length;t+=3)(0===i||e[t+2]>s)&&(n.numSimplified++,a.push(e[t],e[t+1])),n.numPoints++;r&&function(t,e){let n=0;for(let e=0,i=t.length,r=i-2;e<i;r=e,e+=2)n+=(t[e]-t[r])*(t[e+1]+t[r+1]);if(n>0===e)for(let e=0,n=t.length;e<n/2;e+=2){const i=t[e],r=t[e+1];t[e]=t[n-2-e],t[e+1]=t[n-1-e],t[n-2-e]=i,t[n-1-e]=r}}(a,o),t.push(a)}const ut={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class ht{constructor(t,e){const n=(e=this.options=function(t,e){for(const n in e)t[n]=e[n];return t}(Object.create(ut),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");let i=function(t,e){const n=[];if("FeatureCollection"===t.type)for(let i=0;i<t.features.length;i++)K(n,t.features[i],e,i);else K(n,"Feature"===t.type?t:{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),i=function(t,e){const n=e.buffer/e.extent;let i=t;const r=W(t,1,-1-n,n,0,-1,2,e),o=W(t,1,1-n,2+n,0,-1,2,e);return(r||o)&&(i=W(t,1,-n,1+n,0,-1,2,e)||[],r&&(i=rt(r,1).concat(i)),o&&(i=i.concat(rt(o,-1)))),i}(i,e),i.length&&this.splitTile(i,0,0,0),n&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(t,e,n,i,r,o,s){const a=[t,e,n,i],A=this.options,l=A.debug;for(;a.length;){i=a.pop(),n=a.pop(),e=a.pop(),t=a.pop();const c=1<<e,u=gt(e,n,i);let h=this.tiles[u];if(!h&&(l>1&&console.time("creation"),h=this.tiles[u]=At(t,e,n,i,A),this.tileCoords.push({z:e,x:n,y:i}),l)){l>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,i,h.numFeatures,h.numPoints,h.numSimplified),console.timeEnd("creation"));const t=`z${e}`;this.stats[t]=(this.stats[t]||0)+1,this.total++}if(h.source=t,null==r){if(e===A.indexMaxZoom||h.numPoints<=A.indexMaxPoints)continue}else{if(e===A.maxZoom||e===r)continue;if(null!=r){const t=r-e;if(n!==o>>t||i!==s>>t)continue}}if(h.source=null,0===t.length)continue;l>1&&console.time("clipping");const g=.5*A.buffer/A.extent,d=.5-g,p=.5+g,f=1+g;let m=null,I=null,y=null,C=null,E=W(t,c,n-g,n+p,0,h.minX,h.maxX,A),_=W(t,c,n+d,n+f,0,h.minX,h.maxX,A);t=null,E&&(m=W(E,c,i-g,i+p,1,h.minY,h.maxY,A),I=W(E,c,i+d,i+f,1,h.minY,h.maxY,A),E=null),_&&(y=W(_,c,i-g,i+p,1,h.minY,h.maxY,A),C=W(_,c,i+d,i+f,1,h.minY,h.maxY,A),_=null),l>1&&console.timeEnd("clipping"),a.push(m||[],e+1,2*n,2*i),a.push(I||[],e+1,2*n,2*i+1),a.push(y||[],e+1,2*n+1,2*i),a.push(C||[],e+1,2*n+1,2*i+1)}}getTile(t,e,n){t=+t,e=+e,n=+n;const i=this.options,{extent:r,debug:o}=i;if(t<0||t>24)return null;const s=1<<t,a=gt(t,e=e+s&s-1,n);if(this.tiles[a])return st(this.tiles[a],r);o>1&&console.log("drilling down to z%d-%d-%d",t,e,n);let A,l=t,c=e,u=n;for(;!A&&l>0;)l--,c>>=1,u>>=1,A=this.tiles[gt(l,c,u)];return A&&A.source?(o>1&&(console.log("found parent tile z%d-%d-%d",l,c,u),console.time("drilling down")),this.splitTile(A.source,l,c,u,t,e,n),o>1&&console.timeEnd("drilling down"),this.tiles[a]?st(this.tiles[a],r):null):null}}function gt(t,e,n){return 32*((1<<t)*n+e)+t}function dt(t,e){return e?t.properties[e]:t.id}function pt(t,e){if(null==t)return!0;if("Feature"===t.type)return null!=dt(t,e);if("FeatureCollection"===t.type){const n=new Set;for(const i of t.features){const t=dt(i,e);if(null==t)return!1;if(n.has(t))return!1;n.add(t)}return!0}return!1}function ft(t,e){const n=new Map;if(null==t);else if("Feature"===t.type)n.set(dt(t,e),t);else for(const i of t.features)n.set(dt(i,e),i);return n}class mt extends o{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(e,n){return t._(this,void 0,void 0,(function*(){const n=e.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const i=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!i)return null;const r=new class{constructor(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.X,this.length=e.length,this._features=e}feature(e){return new class{constructor(e){this._feature=e,this.extent=t.X,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))}loadGeometry(){if(1===this._feature.type){const e=[];for(const n of this._feature.geometry)e.push([new t.P(n[0],n[1])]);return e}{const e=[];for(const n of this._feature.geometry){const i=[];for(const e of n)i.push(new t.P(e[0],e[1]));e.push(i)}return e}}toGeoJSON(t,e,n){return c.call(this,t,e,n)}}(this._features[e])}}(i.features);let o=Q(r);return 0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),{vectorTile:r,rawData:o.buffer}}))}loadData(e){return t._(this,void 0,void 0,(function*(){var n;null===(n=this._pendingRequest)||void 0===n||n.abort();const i=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.bu(e.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(e,this._pendingRequest),this._geoJSONIndex=e.cluster?new N(function({superclusterOptions:e,clusterProperties:n}){if(!n||!e)return e;const i={},r={},o={accumulated:null,zoom:0},s={properties:null},a=Object.keys(n);for(const e of a){const[o,s]=n[e],a=t.bB(s),A=t.bB("string"==typeof o?[o,["accumulated"],["get",e]]:o);i[e]=a.value,r[e]=A.value}return e.map=t=>{s.properties=t;const e={};for(const t of a)e[t]=i[t].evaluate(o,s);return e},e.reduce=(t,e)=>{s.properties=e;for(const e of a)o.accumulated=t[e],t[e]=r[e].evaluate(o,s)},e}(e)).load((yield this._pendingData).features):(r=yield this._pendingData,new ht(r,e.geojsonVtOptions)),this.loaded={};const n={};if(i){const t=i.finish();t&&(n.resourceTiming={},n.resourceTiming[e.source]=JSON.parse(JSON.stringify(t)))}return n}catch(e){if(delete this._pendingRequest,t.bA(e))return{abandoned:!0};throw e}var r}))}getData(){return t._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(t){const e=this.loaded;return e&&e[t.uid]?super.reloadTile(t):this.loadTile(t)}loadAndProcessGeoJSON(e,n){return t._(this,void 0,void 0,(function*(){let i=yield this.loadGeoJSON(e,n);if(delete this._pendingRequest,"object"!=typeof i)throw new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`);if(l(i,!0),e.filter){const n=t.bB(e.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===n.result)throw new Error(n.value.map((t=>`${t.key}: ${t.message}`)).join(", "));const r=i.features.filter((t=>n.value.evaluate({zoom:0},t)));i={type:"FeatureCollection",features:r}}return i}))}loadGeoJSON(e,n){return t._(this,void 0,void 0,(function*(){const{promoteId:i}=e;if(e.request){const r=yield t.h(e.request,n);return this._dataUpdateable=pt(r.data,i)?ft(r.data,i):void 0,r.data}if("string"==typeof e.data)try{const t=JSON.parse(e.data);return this._dataUpdateable=pt(t,i)?ft(t,i):void 0,t}catch(t){throw new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`)}if(!e.dataDiff)throw new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${e.source}`);return function(t,e,n){var i,r,o,s;if(e.removeAll&&t.clear(),e.remove)for(const n of e.remove)t.delete(n);if(e.add)for(const i of e.add){const e=dt(i,n);null!=e&&t.set(e,i)}if(e.update)for(const n of e.update){let e=t.get(n.id);if(null==e)continue;const a=!n.removeAllProperties&&((null===(i=n.removeProperties)||void 0===i?void 0:i.length)>0||(null===(r=n.addOrUpdateProperties)||void 0===r?void 0:r.length)>0);if((n.newGeometry||n.removeAllProperties||a)&&(e=Object.assign({},e),t.set(n.id,e),a&&(e.properties=Object.assign({},e.properties))),n.newGeometry&&(e.geometry=n.newGeometry),n.removeAllProperties)e.properties={};else if((null===(o=n.removeProperties)||void 0===o?void 0:o.length)>0)for(const t of n.removeProperties)Object.prototype.hasOwnProperty.call(e.properties,t)&&delete e.properties[t];if((null===(s=n.addOrUpdateProperties)||void 0===s?void 0:s.length)>0)for(const{key:t,value:i}of n.addOrUpdateProperties)e.properties[t]=i}}(this._dataUpdateable,e.dataDiff,i),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(e){return t._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(t){return this._geoJSONIndex.getClusterExpansionZoom(t.clusterId)}getClusterChildren(t){return this._geoJSONIndex.getChildren(t.clusterId)}getClusterLeaves(t){return this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset)}}class It{constructor(e){this.self=e,this.actor=new t.F(e),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(t,e)=>{if(this.externalWorkerSourceTypes[t])throw new Error(`Worker source with name "${t}" already registered.`);this.externalWorkerSourceTypes[t]=e},this.self.addProtocol=t.bh,this.self.removeProtocol=t.bi,this.self.registerRTLTextPlugin=e=>{if(t.bC.isParsed())throw new Error("RTL text plugin already registered.");t.bC.setMethods(e)},this.actor.registerMessageHandler("LDT",((t,e)=>this._getDEMWorkerSource(t,e.source).loadTile(e))),this.actor.registerMessageHandler("RDT",((e,n)=>t._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(e,n.source).removeTile(n)})))),this.actor.registerMessageHandler("GCEZ",((e,n)=>t._(this,void 0,void 0,(function*(){return this._getWorkerSource(e,n.type,n.source).getClusterExpansionZoom(n)})))),this.actor.registerMessageHandler("GCC",((e,n)=>t._(this,void 0,void 0,(function*(){return this._getWorkerSource(e,n.type,n.source).getClusterChildren(n)})))),this.actor.registerMessageHandler("GCL",((e,n)=>t._(this,void 0,void 0,(function*(){return this._getWorkerSource(e,n.type,n.source).getClusterLeaves(n)})))),this.actor.registerMessageHandler("LD",((t,e)=>this._getWorkerSource(t,e.type,e.source).loadData(e))),this.actor.registerMessageHandler("GD",((t,e)=>this._getWorkerSource(t,e.type,e.source).getData())),this.actor.registerMessageHandler("LT",((t,e)=>this._getWorkerSource(t,e.type,e.source).loadTile(e))),this.actor.registerMessageHandler("RT",((t,e)=>this._getWorkerSource(t,e.type,e.source).reloadTile(e))),this.actor.registerMessageHandler("AT",((t,e)=>this._getWorkerSource(t,e.type,e.source).abortTile(e))),this.actor.registerMessageHandler("RMT",((t,e)=>this._getWorkerSource(t,e.type,e.source).removeTile(e))),this.actor.registerMessageHandler("RS",((e,n)=>t._(this,void 0,void 0,(function*(){if(!this.workerSources[e]||!this.workerSources[e][n.type]||!this.workerSources[e][n.type][n.source])return;const t=this.workerSources[e][n.type][n.source];delete this.workerSources[e][n.type][n.source],void 0!==t.removeSource&&t.removeSource(n)})))),this.actor.registerMessageHandler("RM",(e=>t._(this,void 0,void 0,(function*(){delete this.layerIndexes[e],delete this.availableImages[e],delete this.workerSources[e],delete this.demWorkerSources[e]})))),this.actor.registerMessageHandler("SR",((e,n)=>t._(this,void 0,void 0,(function*(){this.referrer=n})))),this.actor.registerMessageHandler("SRPS",((t,e)=>this._syncRTLPluginState(t,e))),this.actor.registerMessageHandler("IS",((e,n)=>t._(this,void 0,void 0,(function*(){this.self.importScripts(n)})))),this.actor.registerMessageHandler("SI",((t,e)=>this._setImages(t,e))),this.actor.registerMessageHandler("UL",((e,n)=>t._(this,void 0,void 0,(function*(){this._getLayerIndex(e).update(n.layers,n.removedIds)})))),this.actor.registerMessageHandler("SL",((e,n)=>t._(this,void 0,void 0,(function*(){this._getLayerIndex(e).replace(n)}))))}_setImages(e,n){return t._(this,void 0,void 0,(function*(){this.availableImages[e]=n;for(const t in this.workerSources[e]){const i=this.workerSources[e][t];for(const t in i)i[t].availableImages=n}}))}_syncRTLPluginState(e,n){return t._(this,void 0,void 0,(function*(){if(t.bC.isParsed())return t.bC.getState();if("loading"!==n.pluginStatus)return t.bC.setState(n),n;const e=n.pluginURL;if(this.self.importScripts(e),t.bC.isParsed()){const n={pluginStatus:"loaded",pluginURL:e};return t.bC.setState(n),n}throw t.bC.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${e}`)}))}_getAvailableImages(t){let e=this.availableImages[t];return e||(e=[]),e}_getLayerIndex(t){let n=this.layerIndexes[t];return n||(n=this.layerIndexes[t]=new e),n}_getWorkerSource(t,e,n){if(this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),!this.workerSources[t][e][n]){const i={sendAsync:(e,n)=>(e.targetMapId=t,this.actor.sendAsync(e,n))};switch(e){case"vector":this.workerSources[t][e][n]=new o(i,this._getLayerIndex(t),this._getAvailableImages(t));break;case"geojson":this.workerSources[t][e][n]=new mt(i,this._getLayerIndex(t),this._getAvailableImages(t));break;default:this.workerSources[t][e][n]=new this.externalWorkerSourceTypes[e](i,this._getLayerIndex(t),this._getAvailableImages(t))}}return this.workerSources[t][e][n]}_getDEMWorkerSource(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new s),this.demWorkerSources[t][e]}}return t.i(self)&&(self.worker=new It(self)),It})),n("index",["exports","./shared"],(function(t,e){var n="4.6.0";let i,r;const o={now:"undefined"!=typeof performance&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:t=>new Promise(((n,i)=>{const r=requestAnimationFrame(n);t.signal.addEventListener("abort",(()=>{cancelAnimationFrame(r),i(e.c())}))})),getImageData(t,e=0){return this.getImageCanvasContext(t).getImageData(-e,-e,t.width+2*e,t.height+2*e)},getImageCanvasContext(t){const e=window.document.createElement("canvas"),n=e.getContext("2d",{willReadFrequently:!0});if(!n)throw new Error("failed to create canvas 2d context");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0,t.width,t.height),n},resolveURL:t=>(i||(i=document.createElement("a")),i.href=t,i.href),hardwareConcurrency:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==r&&(r=matchMedia("(prefers-reduced-motion: reduce)")),r.matches)}};class s{static testProp(t){if(!s.docStyle)return t[0];for(let e=0;e<t.length;e++)if(t[e]in s.docStyle)return t[e];return t[0]}static create(t,e,n){const i=window.document.createElement(t);return void 0!==e&&(i.className=e),n&&n.appendChild(i),i}static createNS(t,e){return window.document.createElementNS(t,e)}static disableDrag(){s.docStyle&&s.selectProp&&(s.userSelect=s.docStyle[s.selectProp],s.docStyle[s.selectProp]="none")}static enableDrag(){s.docStyle&&s.selectProp&&(s.docStyle[s.selectProp]=s.userSelect)}static setTransform(t,e){t.style[s.transformProp]=e}static addEventListener(t,e,n,i={}){t.addEventListener(e,n,"passive"in i?i:i.capture)}static removeEventListener(t,e,n,i={}){t.removeEventListener(e,n,"passive"in i?i:i.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",s.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",s.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",s.suppressClickInternal,!0)}),0)}static getScale(t){const e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}static getPoint(t,n,i){const r=n.boundingClientRect;return new e.P((i.clientX-r.left)/n.x-t.clientLeft,(i.clientY-r.top)/n.y-t.clientTop)}static mousePos(t,e){const n=s.getScale(t);return s.getPoint(t,n,e)}static touchPos(t,e){const n=[],i=s.getScale(t);for(let r=0;r<e.length;r++)n.push(s.getPoint(t,i,e[r]));return n}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}}s.docStyle="undefined"!=typeof window&&window.document&&window.document.documentElement.style,s.selectProp=s.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),s.transformProp=s.testProp(["transform","WebkitTransform"]);const a={supported:!1,testSupport:function(t){!c&&l&&(u?h(t):A=t)}};let A,l,c=!1,u=!1;function h(t){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,l),t.isContextLost())return;a.supported=!0}catch(t){}t.deleteTexture(e),c=!0}var g;"undefined"!=typeof document&&(l=document.createElement("img"),l.onload=()=>{A&&h(A),A=null,u=!0},l.onerror=()=>{c=!0,A=null},l.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(t){let n,i,r,o;t.resetRequestQueue=()=>{n=[],i=0,r=0,o={}},t.addThrottleControl=t=>{const e=r++;return o[e]=t,e},t.removeThrottleControl=t=>{delete o[t],A()},t.getImage=(t,i,r=!0)=>new Promise(((o,s)=>{a.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),e.e(t,{type:"image"}),n.push({abortController:i,requestParameters:t,supportImageRefresh:r,state:"queued",onError:t=>{s(t)},onSuccess:t=>{o(t)}}),A()}));const s=t=>e._(this,void 0,void 0,(function*(){t.state="running";const{requestParameters:n,supportImageRefresh:r,onError:o,onSuccess:s,abortController:a}=t,c=!1===r&&!e.i(self)&&!e.g(n.url)&&(!n.headers||Object.keys(n.headers).reduce(((t,e)=>t&&"accept"===e),!0));i++;const u=c?l(n,a):e.m(n,a);try{const n=yield u;delete t.abortController,t.state="completed",n.data instanceof HTMLImageElement||e.b(n.data)?s(n):n.data&&s({data:yield(h=n.data,"function"==typeof createImageBitmap?e.d(h):e.f(h)),cacheControl:n.cacheControl,expires:n.expires})}catch(e){delete t.abortController,o(e)}finally{i--,A()}var h})),A=()=>{const t=(()=>{for(const t of Object.keys(o))if(o[t]())return!0;return!1})()?e.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:e.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let e=i;e<t&&n.length>0;e++){const t=n.shift();t.abortController.signal.aborted?e--:s(t)}},l=(t,n)=>new Promise(((i,r)=>{const o=new Image,s=t.url,a=t.credentials;a&&"include"===a?o.crossOrigin="use-credentials":(a&&"same-origin"===a||!e.s(s))&&(o.crossOrigin="anonymous"),n.signal.addEventListener("abort",(()=>{o.src="",r(e.c())})),o.fetchPriority="high",o.onload=()=>{o.onerror=o.onload=null,i({data:o})},o.onerror=()=>{o.onerror=o.onload=null,n.signal.aborted||r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},o.src=s}))}(g||(g={})),g.resetRequestQueue();class d{constructor(t){this._transformRequestFn=t}transformRequest(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}}setTransformRequest(t){this._transformRequestFn=t}}function p(t){var n=new e.A(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n}var f,m=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t};f=new e.A(3),e.A!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0);var I=function(t){var e=t[0],n=t[1];return e*e+n*n};function y(t){const e=[];if("string"==typeof t)e.push({id:"default",url:t});else if(t&&t.length>0){const n=[];for(const{id:i,url:r}of t){const t=`${i}${r}`;-1===n.indexOf(t)&&(n.push(t),e.push({id:i,url:r}))}}return e}function C(t,e,n){const i=t.split("?");return i[0]+=`${e}${n}`,i.join("?")}!function(){var t=new e.A(2);e.A!=Float32Array&&(t[0]=0,t[1]=0)}();class E{constructor(t,e,n,i){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,i)}update(t,n,i){const{width:r,height:o}=t,s=!(this.size&&this.size[0]===r&&this.size[1]===o||i),{context:a}=this,{gl:A}=a;if(this.useMipmap=Boolean(n&&n.useMipmap),A.bindTexture(A.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===A.RGBA&&(!n||!1!==n.premultiply)),s)this.size=[r,o],t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||e.b(t)?A.texImage2D(A.TEXTURE_2D,0,this.format,this.format,A.UNSIGNED_BYTE,t):A.texImage2D(A.TEXTURE_2D,0,this.format,r,o,0,this.format,A.UNSIGNED_BYTE,t.data);else{const{x:n,y:s}=i||{x:0,y:0};t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||e.b(t)?A.texSubImage2D(A.TEXTURE_2D,0,n,s,A.RGBA,A.UNSIGNED_BYTE,t):A.texSubImage2D(A.TEXTURE_2D,0,n,s,r,o,A.RGBA,A.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&A.generateMipmap(A.TEXTURE_2D)}bind(t,e,n){const{context:i}=this,{gl:r}=i;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}function _(t){const{userImage:e}=t;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}class v extends e.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:t,promiseResolve:e}of this.requestors)e(this._getImagesForIds(t));this.requestors=[]}}getImage(t){const n=this.images[t];if(n&&!n.data&&n.spriteData){const t=n.spriteData;n.data=new e.R({width:t.width,height:t.height},t.context.getImageData(t.x,t.y,t.width,t.height).data),n.spriteData=null}return n}addImage(t,e){if(this.images[t])throw new Error(`Image id ${t} already exist, use updateImage instead`);this._validate(t,e)&&(this.images[t]=e)}_validate(t,n){let i=!0;const r=n.data||n.spriteData;return this._validateStretch(n.stretchX,r&&r.width)||(this.fire(new e.j(new Error(`Image "${t}" has invalid "stretchX" value`))),i=!1),this._validateStretch(n.stretchY,r&&r.height)||(this.fire(new e.j(new Error(`Image "${t}" has invalid "stretchY" value`))),i=!1),this._validateContent(n.content,n)||(this.fire(new e.j(new Error(`Image "${t}" has invalid "content" value`))),i=!1),i}_validateStretch(t,e){if(!t)return!0;let n=0;for(const i of t){if(i[0]<n||i[1]<i[0]||e<i[1])return!1;n=i[1]}return!0}_validateContent(t,e){if(!t)return!0;if(4!==t.length)return!1;const n=e.spriteData,i=n&&n.width||e.data.width,r=n&&n.height||e.data.height;return!(t[0]<0||i<t[0]||t[1]<0||r<t[1]||t[2]<0||i<t[2]||t[3]<0||r<t[3]||t[2]<t[0]||t[3]<t[1])}updateImage(t,e,n=!0){const i=this.getImage(t);if(n&&(i.data.width!==e.data.width||i.data.height!==e.data.height))throw new Error(`size mismatch between old image (${i.data.width}x${i.data.height}) and new image (${e.data.width}x${e.data.height}).`);e.version=i.version+1,this.images[t]=e,this.updatedImages[t]=!0}removeImage(t){const e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t){return new Promise(((e,n)=>{let i=!0;if(!this.isLoaded())for(const e of t)this.images[e]||(i=!1);this.isLoaded()||i?e(this._getImagesForIds(t)):this.requestors.push({ids:t,promiseResolve:e})}))}_getImagesForIds(t){const n={};for(const i of t){let t=this.getImage(i);t||(this.fire(new e.k("styleimagemissing",{id:i})),t=this.getImage(i)),t?n[i]={data:t.data.clone(),pixelRatio:t.pixelRatio,sdf:t.sdf,version:t.version,stretchX:t.stretchX,stretchY:t.stretchY,content:t.content,textFitWidth:t.textFitWidth,textFitHeight:t.textFitHeight,hasRenderCallback:Boolean(t.userImage&&t.userImage.render)}:e.w(`Image "${i}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return n}getPixelSize(){const{width:t,height:e}=this.atlasImage;return{width:t,height:e}}getPattern(t){const n=this.patterns[t],i=this.getImage(t);if(!i)return null;if(n&&n.position.version===i.version)return n.position;if(n)n.position.version=i.version;else{const n={w:i.data.width+2,h:i.data.height+2,x:0,y:0},r=new e.I(n,i);this.patterns[t]={bin:n,position:r}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const e=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new E(t,this.atlasImage,e.RGBA),this.atlasTexture.bind(e.LINEAR,e.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const e in this.patterns)t.push(this.patterns[e].bin);const{w:n,h:i}=e.p(t),r=this.atlasImage;r.resize({width:n||1,height:i||1});for(const t in this.patterns){const{bin:n}=this.patterns[t],i=n.x+1,o=n.y+1,s=this.getImage(t).data,a=s.width,A=s.height;e.R.copy(s,r,{x:0,y:0},{x:i,y:o},{width:a,height:A}),e.R.copy(s,r,{x:0,y:A-1},{x:i,y:o-1},{width:a,height:1}),e.R.copy(s,r,{x:0,y:0},{x:i,y:o+A},{width:a,height:1}),e.R.copy(s,r,{x:a-1,y:0},{x:i-1,y:o},{width:1,height:A}),e.R.copy(s,r,{x:0,y:0},{x:i+a,y:o},{width:1,height:A})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const n of t){if(this.callbackDispatchedThisFrame[n])continue;this.callbackDispatchedThisFrame[n]=!0;const t=this.getImage(n);t||e.w(`Image with ID: "${n}" was not found`),_(t)&&this.updateImage(n,t)}}}const B=1e20;function w(t,e,n,i,r,o,s,a,A){for(let l=e;l<e+i;l++)b(t,n*o+l,o,r,s,a,A);for(let l=n;l<n+r;l++)b(t,l*o+e,1,i,s,a,A)}function b(t,e,n,i,r,o,s){o[0]=0,s[0]=-B,s[1]=B,r[0]=t[e];for(let a=1,A=0,l=0;a<i;a++){r[a]=t[e+a*n];const i=a*a;do{const t=o[A];l=(r[a]-r[t]+i-t*t)/(a-t)/2}while(l<=s[A]&&--A>-1);A++,o[A]=a,s[A]=l,s[A+1]=B}for(let a=0,A=0;a<i;a++){for(;s[A+1]<a;)A++;const i=o[A],l=a-i;t[e+a*n]=r[i]+l*l}}class Q{constructor(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}}setURL(t){this.url=t}getGlyphs(t){return e._(this,void 0,void 0,(function*(){const e=[];for(const n in t)for(const i of t[n])e.push(this._getAndCacheGlyphsPromise(n,i));const n=yield Promise.all(e),i={};for(const{stack:t,id:e,glyph:r}of n)i[t]||(i[t]={}),i[t][e]=r&&{id:r.id,bitmap:r.bitmap.clone(),metrics:r.metrics};return i}))}_getAndCacheGlyphsPromise(t,n){return e._(this,void 0,void 0,(function*(){let e=this.entries[t];e||(e=this.entries[t]={glyphs:{},requests:{},ranges:{}});let i=e.glyphs[n];if(void 0!==i)return{stack:t,id:n,glyph:i};if(i=this._tinySDF(e,t,n),i)return e.glyphs[n]=i,{stack:t,id:n,glyph:i};const r=Math.floor(n/256);if(256*r>65535)throw new Error("glyphs > 65535 not supported");if(e.ranges[r])return{stack:t,id:n,glyph:i};if(!this.url)throw new Error("glyphsUrl is not set");if(!e.requests[r]){const n=Q.loadGlyphRange(t,r,this.url,this.requestManager);e.requests[r]=n}const o=yield e.requests[r];for(const t in o)this._doesCharSupportLocalGlyph(+t)||(e.glyphs[+t]=o[+t]);return e.ranges[r]=!0,{stack:t,id:n,glyph:o[n]||null}}))}_doesCharSupportLocalGlyph(t){return!!this.localIdeographFontFamily&&/\p{Ideo}|\p{sc=Hang}|\p{sc=Hira}|\p{sc=Kana}/u.test(String.fromCodePoint(t))}_tinySDF(t,n,i){const r=this.localIdeographFontFamily;if(!r)return;if(!this._doesCharSupportLocalGlyph(i))return;let o=t.tinySDF;if(!o){let e="400";/bold/i.test(n)?e="900":/medium/i.test(n)?e="500":/light/i.test(n)&&(e="200"),o=t.tinySDF=new Q.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:r,fontWeight:e})}const s=o.draw(String.fromCharCode(i));return{id:i,bitmap:new e.o({width:s.width||60,height:s.height||60},s.data),metrics:{width:s.glyphWidth/2||24,height:s.glyphHeight/2||24,left:s.glyphLeft/2+.5||0,top:s.glyphTop/2-27.5||-8,advance:s.glyphAdvance/2||24,isDoubleResolution:!0}}}}Q.loadGlyphRange=function(t,n,i,r){return e._(this,void 0,void 0,(function*(){const o=256*n,s=o+255,a=r.transformRequest(i.replace("{fontstack}",t).replace("{range}",`${o}-${s}`),"Glyphs"),A=yield e.l(a,new AbortController);if(!A||!A.data)throw new Error(`Could not load glyph range. range: ${n}, ${o}-${s}`);const l={};for(const t of e.n(A.data))l[t.id]=t;return l}))},Q.TinySDF=class{constructor({fontSize:t=24,buffer:e=3,radius:n=8,cutoff:i=.25,fontFamily:r="sans-serif",fontWeight:o="normal",fontStyle:s="normal"}={}){this.buffer=e,this.cutoff=i,this.radius=n;const a=this.size=t+4*e,A=this._createCanvas(a),l=this.ctx=A.getContext("2d",{willReadFrequently:!0});l.font=`${s} ${o} ${t}px ${r}`,l.textBaseline="alphabetic",l.textAlign="left",l.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Uint16Array(a)}_createCanvas(t){const e=document.createElement("canvas");return e.width=e.height=t,e}draw(t){const{width:e,actualBoundingBoxAscent:n,actualBoundingBoxDescent:i,actualBoundingBoxLeft:r,actualBoundingBoxRight:o}=this.ctx.measureText(t),s=Math.ceil(n),a=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-r))),A=Math.min(this.size-this.buffer,s+Math.ceil(i)),l=a+2*this.buffer,c=A+2*this.buffer,u=Math.max(l*c,0),h=new Uint8ClampedArray(u),g={data:h,width:l,height:c,glyphWidth:a,glyphHeight:A,glyphTop:s,glyphLeft:0,glyphAdvance:e};if(0===a||0===A)return g;const{ctx:d,buffer:p,gridInner:f,gridOuter:m}=this;d.clearRect(p,p,a,A),d.fillText(t,p,p+s);const I=d.getImageData(p,p,a,A);m.fill(B,0,u),f.fill(0,0,u);for(let t=0;t<A;t++)for(let e=0;e<a;e++){const n=I.data[4*(t*a+e)+3]/255;if(0===n)continue;const i=(t+p)*l+e+p;if(1===n)m[i]=0,f[i]=B;else{const t=.5-n;m[i]=t>0?t*t:0,f[i]=t<0?t*t:0}}w(m,0,0,l,c,l,this.f,this.v,this.z),w(f,p,p,a,A,l,this.f,this.v,this.z);for(let t=0;t<u;t++){const e=Math.sqrt(m[t])-Math.sqrt(f[t]);h[t]=Math.round(255-255*(e/this.radius+this.cutoff))}return g}};class x{constructor(){this.specification=e.v.light.position}possiblyEvaluate(t,n){return e.x(t.expression.evaluate(n))}interpolate(t,n,i){return{x:e.y.number(t.x,n.x,i),y:e.y.number(t.y,n.y,i),z:e.y.number(t.z,n.z,i)}}}let D;class S extends e.E{constructor(t){super(),D=D||new e.q({anchor:new e.D(e.v.light.anchor),position:new x,color:new e.D(e.v.light.color),intensity:new e.D(e.v.light.intensity)}),this._transitionable=new e.T(D),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,n={}){if(!this._validate(e.r,t,n))for(const e in t){const n=t[e];e.endsWith("-transition")?this._transitionable.setTransition(e.slice(0,-11),n):this._transitionable.setValue(e,n)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,n,i){return(!i||!1!==i.validate)&&e.t(this,t.call(e.u,{value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.v}))}}const M=new e.q({"sky-color":new e.D(e.v.sky["sky-color"]),"horizon-color":new e.D(e.v.sky["horizon-color"]),"fog-color":new e.D(e.v.sky["fog-color"]),"fog-ground-blend":new e.D(e.v.sky["fog-ground-blend"]),"horizon-fog-blend":new e.D(e.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new e.D(e.v.sky["sky-horizon-blend"]),"atmosphere-blend":new e.D(e.v.sky["atmosphere-blend"])});class k extends e.E{constructor(t){super(),this._transitionable=new e.T(M),this.setSky(t),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new e.z(0))}setSky(t,n={}){if(!this._validate(e.B,t,n)){t||(t={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent"});for(const e in t){const n=t[e];e.endsWith("-transition")?this._transitionable.setTransition(e.slice(0,-11),n):this._transitionable.setValue(e,n)}}}getSky(){return this._transitionable.serialize()}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,n,i={}){return!1!==(null==i?void 0:i.validate)&&e.t(this,t.call(e.u,e.e({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.v})))}calculateFogBlendOpacity(t){return t<60?0:t<70?(t-60)/10:1}}class R{constructor(t,e){this.width=t,this.height=e,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,e){const n=t.join(",")+String(e);return this.dashEntry[n]||(this.dashEntry[n]=this.addDash(t,e)),this.dashEntry[n]}getDashRanges(t,e,n){const i=[];let r=t.length%2==1?-t[t.length-1]*n:0,o=t[0]*n,s=!0;i.push({left:r,right:o,isDash:s,zeroLength:0===t[0]});let a=t[0];for(let e=1;e<t.length;e++){s=!s;const A=t[e];r=a*n,a+=A,o=a*n,i.push({left:r,right:o,isDash:s,zeroLength:0===A})}return i}addRoundDash(t,e,n){const i=e/2;for(let e=-n;e<=n;e++){const r=this.width*(this.nextRow+n+e);let o=0,s=t[o];for(let a=0;a<this.width;a++){a/s.right>1&&(s=t[++o]);const A=Math.abs(a-s.left),l=Math.abs(a-s.right),c=Math.min(A,l);let u;const h=e/n*(i+1);if(s.isDash){const t=i-Math.abs(h);u=Math.sqrt(c*c+t*t)}else u=i-Math.sqrt(c*c+h*h);this.data[r+a]=Math.max(0,Math.min(255,u+128))}}}addRegularDash(t){for(let e=t.length-1;e>=0;--e){const n=t[e],i=t[e+1];n.zeroLength?t.splice(e,1):i&&i.isDash===n.isDash&&(i.left=n.left,t.splice(e,1))}const e=t[0],n=t[t.length-1];e.isDash===n.isDash&&(e.left=n.left-this.width,n.right=e.right+this.width);const i=this.width*this.nextRow;let r=0,o=t[r];for(let e=0;e<this.width;e++){e/o.right>1&&(o=t[++r]);const n=Math.abs(e-o.left),s=Math.abs(e-o.right),a=Math.min(n,s);this.data[i+e]=Math.max(0,Math.min(255,(o.isDash?a:-a)+128))}}addDash(t,n){const i=n?7:0,r=2*i+1;if(this.nextRow+r>this.height)return e.w("LineAtlas out of space"),null;let o=0;for(let e=0;e<t.length;e++)o+=t[e];if(0!==o){const e=this.width/o,r=this.getDashRanges(t,this.width,e);n?this.addRoundDash(r,e,i):this.addRegularDash(r)}const s={y:(this.nextRow+i+.5)/this.height,height:2*i/this.height,width:o};return this.nextRow+=r,this.dirty=!0,s}bind(t){const e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))}}const N="maplibre_preloaded_worker_pool";class P{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<P.workerCount;)this.workers.push(new Worker(e.a.WORKER_URL));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((t=>{t.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[N]}numActive(){return Object.keys(this.active).length}}const T=Math.floor(o.hardwareConcurrency/2);let L,F;function O(){return L||(L=new P),L}P.workerCount=e.C(globalThis)?Math.max(Math.min(T,3),1):1;class G{constructor(t,n){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=n;const i=this.workerPool.acquire(n);for(let t=0;t<i.length;t++){const r=new e.F(i[t],n);r.name=`Worker ${t}`,this.actors.push(r)}if(!this.actors.length)throw new Error("No actors found")}broadcast(t,e){const n=[];for(const i of this.actors)n.push(i.sendAsync({type:t,data:e}));return Promise.all(n)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(t=!0){this.actors.forEach((t=>{t.remove()})),this.actors=[],t&&this.workerPool.release(this.id)}registerMessageHandler(t,e){for(const n of this.actors)n.registerMessageHandler(t,e)}}function U(){return F||(F=new G(O(),e.G),F.registerMessageHandler("GR",((t,n,i)=>e.m(n,i)))),F}function j(t,n){const i=e.H();return e.J(i,i,[1,1,0]),e.K(i,i,[.5*t.width,.5*t.height,1]),e.L(i,i,t.calculatePosMatrix(n.toUnwrapped()))}function Y(t,e,n,i,r,o){const s=function(t,e,n){if(t)for(const i of t){const t=e[i];if(t&&t.source===n&&"fill-extrusion"===t.type)return!0}else for(const t in e){const i=e[t];if(i.source===n&&"fill-extrusion"===i.type)return!0}return!1}(r&&r.layers,e,t.id),a=o.maxPitchScaleFactor(),A=t.tilesIn(i,a,s);A.sort(K);const l=[];for(const i of A)l.push({wrappedTileID:i.tileID.wrapped().key,queryResults:i.tile.queryRenderedFeatures(e,n,t._state,i.queryGeometry,i.cameraQueryGeometry,i.scale,r,o,a,j(t.transform,i.tileID))});const c=function(t){const e={},n={};for(const i of t){const t=i.queryResults,r=i.wrappedTileID,o=n[r]=n[r]||{};for(const n in t){const i=t[n],r=o[n]=o[n]||{},s=e[n]=e[n]||[];for(const t of i)r[t.featureIndex]||(r[t.featureIndex]=!0,s.push(t))}}return e}(l);for(const e in c)c[e].forEach((e=>{const n=e.feature,i=t.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=i}));return c}function K(t,e){const n=t.tileID,i=e.tileID;return n.overscaledZ-i.overscaledZ||n.canonical.y-i.canonical.y||n.wrap-i.wrap||n.canonical.x-i.canonical.x}function z(t,n,i){return e._(this,void 0,void 0,(function*(){let r=t;if(t.url?r=(yield e.h(n.transformRequest(t.url,"Source"),i)).data:yield o.frameAsync(i),!r)return null;const s=e.M(e.e(r,t),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in r&&r.vector_layers&&(s.vectorLayerIds=r.vector_layers.map((t=>t.id))),s}))}class J{constructor(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):Array.isArray(t)&&(4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1])))}setNorthEast(t){return this._ne=t instanceof e.N?new e.N(t.lng,t.lat):e.N.convert(t),this}setSouthWest(t){return this._sw=t instanceof e.N?new e.N(t.lng,t.lat):e.N.convert(t),this}extend(t){const n=this._sw,i=this._ne;let r,o;if(t instanceof e.N)r=t,o=t;else{if(!(t instanceof J))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(J.convert(t)):this.extend(e.N.convert(t)):t&&("lng"in t||"lon"in t)&&"lat"in t?this.extend(e.N.convert(t)):this;if(r=t._sw,o=t._ne,!r||!o)return this}return n||i?(n.lng=Math.min(r.lng,n.lng),n.lat=Math.min(r.lat,n.lat),i.lng=Math.max(o.lng,i.lng),i.lat=Math.max(o.lat,i.lat)):(this._sw=new e.N(r.lng,r.lat),this._ne=new e.N(o.lng,o.lat)),this}getCenter(){return new e.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new e.N(this.getWest(),this.getNorth())}getSouthEast(){return new e.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:n,lat:i}=e.N.convert(t);let r=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=i&&i<=this._ne.lat&&r}static convert(t){return t instanceof J?t:t?new J(t):t}static fromLngLat(t,n=0){const i=360*n/40075017,r=i/Math.cos(Math.PI/180*t.lat);return new J(new e.N(t.lng-r,t.lat-i),new e.N(t.lng+r,t.lat+i))}}class q{constructor(t,e,n){this.bounds=J.convert(this.validateBounds(t)),this.minzoom=e||0,this.maxzoom=n||24}validateBounds(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(t){const n=Math.pow(2,t.z),i=Math.floor(e.O(this.bounds.getWest())*n),r=Math.floor(e.Q(this.bounds.getNorth())*n),o=Math.ceil(e.O(this.bounds.getEast())*n),s=Math.ceil(e.Q(this.bounds.getSouth())*n);return t.x>=i&&t.x<o&&t.y>=r&&t.y<s}}class H extends e.E{constructor(t,n,i,r){if(super(),this.id=t,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.e(this,e.M(n,["url","scheme","tileSize","promoteId"])),this._options=e.e({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(r)}load(){return e._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new e.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const t=yield z(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),t&&(e.e(this,t),t.bounds&&(this.tileBounds=new q(t.bounds,this.minzoom,this.maxzoom)),this.fire(new e.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.k("data",{dataType:"source",sourceDataType:"content"})))}catch(t){this._tileJSONRequest=null,this.fire(new e.j(t))}}))}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.abort(),t(),this.load()}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return e.e({},this._options)}loadTile(t){return e._(this,void 0,void 0,(function*(){const e=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),n={request:this.map._requestManager.transformRequest(e,"Tile"),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};n.request.collectResourceTiming=this._collectResourceTiming;let i="RT";if(t.actor&&"expired"!==t.state){if("loading"===t.state)return new Promise(((e,n)=>{t.reloadPromise={resolve:e,reject:n}}))}else t.actor=this.dispatcher.getActor(),i="LT";t.abortController=new AbortController;try{const e=yield t.actor.sendAsync({type:i,data:n},t.abortController);if(delete t.abortController,t.aborted)return;this._afterTileLoadWorkerResponse(t,e)}catch(e){if(delete t.abortController,t.aborted)return;if(e&&404!==e.status)throw e;this._afterTileLoadWorkerResponse(t,null)}}))}_afterTileLoadWorkerResponse(t,e){if(e&&e.resourceTiming&&(t.resourceTiming=e.resourceTiming),e&&this.map._refreshExpiredTiles&&t.setExpiryData(e),t.loadVectorData(e,this.map.painter),t.reloadPromise){const e=t.reloadPromise;t.reloadPromise=null,this.loadTile(t).then(e.resolve).catch(e.reject)}}abortTile(t){return e._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.actor&&(yield t.actor.sendAsync({type:"AT",data:{uid:t.uid,type:this.type,source:this.id}}))}))}unloadTile(t){return e._(this,void 0,void 0,(function*(){t.unloadVectorData(),t.actor&&(yield t.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class V extends e.E{constructor(t,n,i,r){super(),this.id=t,this.dispatcher=i,this.setEventedParent(r),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.e({type:"raster"},n),e.e(this,e.M(n,["url","scheme","tileSize"]))}load(){return e._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new e.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const t=yield z(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,t&&(e.e(this,t),t.bounds&&(this.tileBounds=new q(t.bounds,this.minzoom,this.maxzoom)),this.fire(new e.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.k("data",{dataType:"source",sourceDataType:"content"})))}catch(t){this._tileJSONRequest=null,this.fire(new e.j(t))}}))}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(t){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),t(),this.load()}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}serialize(){return e.e({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(t){return e._(this,void 0,void 0,(function*(){const e=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);t.abortController=new AbortController;try{const n=yield g.getImage(this.map._requestManager.transformRequest(e,"Tile"),t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(n&&n.data){this.map._refreshExpiredTiles&&n.cacheControl&&n.expires&&t.setExpiryData({cacheControl:n.cacheControl,expires:n.expires});const e=this.map.painter.context,i=e.gl,r=n.data;t.texture=this.map.painter.getTileTexture(r.width),t.texture?t.texture.update(r,{useMipmap:!0}):(t.texture=new E(e,r,i.RGBA,{useMipmap:!0}),t.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE,i.LINEAR_MIPMAP_NEAREST)),t.state="loaded"}}catch(e){if(delete t.abortController,t.aborted)t.state="unloaded";else if(e)throw t.state="errored",e}}))}abortTile(t){return e._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController)}))}unloadTile(t){return e._(this,void 0,void 0,(function*(){t.texture&&this.map.painter.saveTileTexture(t.texture)}))}hasTransition(){return!1}}class W extends V{constructor(t,n,i,r){super(t,n,i,r),this.type="raster-dem",this.maxzoom=22,this._options=e.e({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox",this.redFactor=n.redFactor,this.greenFactor=n.greenFactor,this.blueFactor=n.blueFactor,this.baseShift=n.baseShift}loadTile(t){return e._(this,void 0,void 0,(function*(){const n=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),i=this.map._requestManager.transformRequest(n,"Tile");t.neighboringTiles=this._getNeighboringTiles(t.tileID),t.abortController=new AbortController;try{const n=yield g.getImage(i,t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(n&&n.data){const i=n.data;this.map._refreshExpiredTiles&&n.cacheControl&&n.expires&&t.setExpiryData({cacheControl:n.cacheControl,expires:n.expires});const r=e.b(i)&&e.U()?i:yield this.readImageNow(i),o={type:this.type,uid:t.uid,source:this.id,rawImageData:r,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!t.actor||"expired"===t.state){t.actor=this.dispatcher.getActor();const e=yield t.actor.sendAsync({type:"LDT",data:o});t.dem=e,t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0,t.state="loaded"}}}catch(e){if(delete t.abortController,t.aborted)t.state="unloaded";else if(e)throw t.state="errored",e}}))}readImageNow(t){return e._(this,void 0,void 0,(function*(){if("undefined"!=typeof VideoFrame&&e.V()){const n=t.width+2,i=t.height+2;try{return new e.R({width:n,height:i},yield e.W(t,-1,-1,n,i))}catch(t){}}return o.getImageData(t,1)}))}_getNeighboringTiles(t){const n=t.canonical,i=Math.pow(2,n.z),r=(n.x-1+i)%i,o=0===n.x?t.wrap-1:t.wrap,s=(n.x+1+i)%i,a=n.x+1===i?t.wrap+1:t.wrap,A={};return A[new e.S(t.overscaledZ,o,n.z,r,n.y).key]={backfilled:!1},A[new e.S(t.overscaledZ,a,n.z,s,n.y).key]={backfilled:!1},n.y>0&&(A[new e.S(t.overscaledZ,o,n.z,r,n.y-1).key]={backfilled:!1},A[new e.S(t.overscaledZ,t.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},A[new e.S(t.overscaledZ,a,n.z,s,n.y-1).key]={backfilled:!1}),n.y+1<i&&(A[new e.S(t.overscaledZ,o,n.z,r,n.y+1).key]={backfilled:!1},A[new e.S(t.overscaledZ,t.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},A[new e.S(t.overscaledZ,a,n.z,s,n.y+1).key]={backfilled:!1}),A}unloadTile(t){return e._(this,void 0,void 0,(function*(){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&(yield t.actor.sendAsync({type:"RDT",data:{type:this.type,uid:t.uid,source:this.id}}))}))}}class Z extends e.E{constructor(t,n,i,r){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=i.getActor(),this.setEventedParent(r),this._data=n.data,this._options=e.e({},n),this._collectResourceTiming=n.collectResourceTiming,void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId;const o=e.X/this.tileSize;this.workerOptions=e.e({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*o,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*o,extent:e.X,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?n.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:e.X,radius:(n.clusterRadius||50)*o,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions),"string"==typeof this.promoteId&&(this.workerOptions.promoteId=this.promoteId)}load(){return e._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(t){this.map=t,this.load()}setData(t){return this._data=t,this._updateWorkerData(),this}updateData(t){return this._updateWorkerData(t),this}getData(){return e._(this,void 0,void 0,(function*(){const t=e.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:t})}))}setClusterOptions(t){return this.workerOptions.cluster=t.cluster,t&&(void 0!==t.clusterRadius&&(this.workerOptions.superclusterOptions.radius=t.clusterRadius),void 0!==t.clusterMaxZoom&&(this.workerOptions.superclusterOptions.maxZoom=t.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(t){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:t,source:this.id}})}getClusterChildren(t){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:t,source:this.id}})}getClusterLeaves(t,e,n){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:t,limit:e,offset:n}})}_updateWorkerData(t){return e._(this,void 0,void 0,(function*(){const n=e.e({type:this.type},this.workerOptions);t?n.dataDiff=t:"string"==typeof this._data?(n.request=this.map._requestManager.transformRequest(o.resolveURL(this._data),"Source"),n.request.collectResourceTiming=this._collectResourceTiming):n.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new e.k("dataloading",{dataType:"source"}));try{const t=yield this.actor.sendAsync({type:"LD",data:n});if(this._pendingLoads--,this._removed||t.abandoned)return void this.fire(new e.k("dataabort",{dataType:"source"}));let i=null;t.resourceTiming&&t.resourceTiming[this.id]&&(i=t.resourceTiming[this.id].slice(0));const r={dataType:"source"};this._collectResourceTiming&&i&&i.length>0&&e.e(r,{resourceTiming:i}),this.fire(new e.k("data",Object.assign(Object.assign({},r),{sourceDataType:"metadata"}))),this.fire(new e.k("data",Object.assign(Object.assign({},r),{sourceDataType:"content"})))}catch(t){if(this._pendingLoads--,this._removed)return void this.fire(new e.k("dataabort",{dataType:"source"}));this.fire(new e.j(t))}}))}loaded(){return 0===this._pendingLoads}loadTile(t){return e._(this,void 0,void 0,(function*(){const e=t.actor?"RT":"LT";t.actor=this.actor;const n={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};t.abortController=new AbortController;const i=yield this.actor.sendAsync({type:e,data:n},t.abortController);delete t.abortController,t.unloadVectorData(),t.aborted||t.loadVectorData(i,this.map.painter,"RT"===e)}))}abortTile(t){return e._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.aborted=!0}))}unloadTile(t){return e._(this,void 0,void 0,(function*(){t.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return e.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var X=e.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class $ extends e.E{constructor(t,e,n,i){super(),this.id=t,this.dispatcher=n,this.coordinates=e.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(i),this.options=e}load(t){return e._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new e.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const e=yield g.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,e&&e.data&&(this.image=e.data,t&&(this.coordinates=t),this._finishLoading())}catch(t){this._request=null,this._loaded=!0,this.fire(new e.j(t))}}))}loaded(){return this._loaded}updateImage(t){return t.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=t.url,this.load(t.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(t){this.coordinates=t;const n=t.map(e.Z.fromLngLat);this.tileID=function(t){let n=1/0,i=1/0,r=-1/0,o=-1/0;for(const e of t)n=Math.min(n,e.x),i=Math.min(i,e.y),r=Math.max(r,e.x),o=Math.max(o,e.y);const s=Math.max(r-n,o-i),a=Math.max(0,Math.floor(-Math.log(s)/Math.LN2)),A=Math.pow(2,a);return new e.a1(a,Math.floor((n+r)/2*A),Math.floor((i+o)/2*A))}(n),this.minzoom=this.maxzoom=this.tileID.z;const i=n.map((t=>this.tileID.getTilePoint(t)._round()));return this._boundsArray=new e.$,this._boundsArray.emplaceBack(i[0].x,i[0].y,0,0),this._boundsArray.emplaceBack(i[1].x,i[1].y,e.X,0),this._boundsArray.emplaceBack(i[3].x,i[3].y,0,e.X),this._boundsArray.emplaceBack(i[2].x,i[2].y,e.X,e.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const t=this.map.painter.context,n=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=e.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new E(t,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));let i=!1;for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture,i=!0)}i&&this.fire(new e.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(t){return e._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={}):t.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class tt extends ${constructor(t,e,n,i){super(t,e,n,i),this.roundZoom=!0,this.type="video",this.options=e}load(){return e._(this,void 0,void 0,(function*(){this._loaded=!1;const t=this.options;this.urls=[];for(const e of t.urls)this.urls.push(this.map._requestManager.transformRequest(e,"Source").url);try{const t=yield e.a3(this.urls);if(this._loaded=!0,!t)return;this.video=t,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(t){this.fire(new e.j(t))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const n=this.video.seekable;t<n.start(0)||t>n.end(0)?this.fire(new e.j(new e.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${n.start(0)} and ${n.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const t=this.map.painter.context,n=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=e.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new E(t,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));let i=!1;for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture,i=!0)}i&&this.fire(new e.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class et extends ${constructor(t,n,i,r){super(t,n,i,r),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some((t=>!Array.isArray(t)||2!==t.length||t.some((t=>"number"!=typeof t))))||this.fire(new e.j(new e.a2(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.j(new e.a2(`sources.${t}`,null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new e.j(new e.a2(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof HTMLCanvasElement||this.fire(new e.j(new e.a2(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.j(new e.a2(`sources.${t}`,null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}load(){return e._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const n=this.map.painter.context,i=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=e.a0.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new E(n,this.canvas,i.RGBA,{premultiply:!0});let r=!1;for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture,r=!0)}r&&this.fire(new e.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}const nt={},it=t=>{switch(t){case"geojson":return Z;case"image":return $;case"raster":return V;case"raster-dem":return W;case"vector":return H;case"video":return tt;case"canvas":return et}return nt[t]},rt="RTLPluginLoaded";class ot extends e.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=U()}_syncState(t){return this.status=t,this.dispatcher.broadcast("SRPS",{pluginStatus:t,pluginURL:this.url}).catch((t=>{throw this.status="error",t}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(t){return e._(this,arguments,void 0,(function*(t,e=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=o.resolveURL(t),!this.url)throw new Error(`requested url ${t} is invalid`);if("unavailable"===this.status){if(!e)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if("requested"===this.status)return this._requestImport()}))}_requestImport(){return e._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new e.k(rt))}))}lazyLoad(){"unavailable"===this.status?this.status="requested":"deferred"===this.status&&this._requestImport()}}let st=null;function at(){return st||(st=new ot),st}class At{constructor(t,n){this.timeAdded=0,this.fadeEndTime=0,this.tileID=t,this.uid=e.a4(),this.uses=0,this.tileSize=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(t){const e=t+this.timeAdded;e<this.fadeEndTime||(this.fadeEndTime=e)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(t){this.demTexture&&t.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(t,n,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){const n={};if(!e)return n;for(const i of t){const t=i.layerIds.map((t=>e.getLayer(t))).filter(Boolean);if(0!==t.length){i.layers=t,i.stateDependentLayerIds&&(i.stateDependentLayers=i.stateDependentLayerIds.map((e=>t.filter((t=>t.id===e))[0])));for(const e of t)n[e.id]=i}}return n}(t.buckets,n.style),this.hasSymbolBuckets=!1;for(const t in this.buckets){const n=this.buckets[t];if(n instanceof e.a6){if(this.hasSymbolBuckets=!0,!i)break;n.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const t in this.buckets){const n=this.buckets[t];if(n instanceof e.a6&&n.hasRTLText){this.hasRTLText=!0,at().lazyLoad();break}}this.queryPadding=0;for(const t in this.buckets){const e=this.buckets[t];this.queryPadding=Math.max(this.queryPadding,n.style.getLayer(t).queryRadius(e))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new e.a5}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const e in this.buckets){const n=this.buckets[e];n.uploadPending()&&n.upload(t)}const e=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new E(t,this.imageAtlas.image,e.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new E(t,this.glyphAtlasImage,e.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,e,n,i,r,o,s,a,A,l){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:i,cameraQueryGeometry:r,scale:o,tileSize:this.tileSize,pixelPosMatrix:l,transform:a,params:s,queryPadding:this.queryPadding*A},t,e,n):{}}querySourceFeatures(t,n){const i=this.latestFeatureIndex;if(!i||!i.rawTileData)return;const r=i.loadVTLayers(),o=n&&n.sourceLayer?n.sourceLayer:"",s=r._geojsonTileLayer||r[o];if(!s)return;const a=e.a7(n&&n.filter),{z:A,x:l,y:c}=this.tileID.canonical,u={z:A,x:l,y:c};for(let n=0;n<s.length;n++){const r=s.feature(n);if(a.needGeometry){const t=e.a8(r,!0);if(!a.filter(new e.z(this.tileID.overscaledZ),t,this.tileID.canonical))continue}else if(!a.filter(new e.z(this.tileID.overscaledZ),r))continue;const h=i.getId(r,o),g=new e.a9(r,A,l,c,h);g.tile=u,t.push(g)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const n=this.expirationTime;if(t.cacheControl){const n=e.aa(t.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const t=Date.now();let e=!1;if(this.expirationTime>t)e=!1;else if(n)if(this.expirationTime<n)e=!0;else{const i=this.expirationTime-n;i?this.expirationTime=t+Math.max(i,3e4):e=!0}else e=!0;e?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(t,e){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(t).length)return;const n=this.latestFeatureIndex.loadVTLayers();for(const i in this.buckets){if(!e.style.hasLayer(i))continue;const r=this.buckets[i],o=r.layers[0].sourceLayer||"_geojsonTileLayer",s=n[o],a=t[o];if(!s||!a||0===Object.keys(a).length)continue;r.update(a,s,this.imageAtlas&&this.imageAtlas.patternPositions||{});const A=e&&e.style&&e.style.getLayer(i);A&&(this.queryPadding=Math.max(this.queryPadding,A.queryRadius(r)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<o.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=o.now()+t}setDependencies(t,e){const n={};for(const t of e)n[t]=!0;this.dependencies[t]=n}hasDependency(t,e){for(const n of t){const t=this.dependencies[n];if(t)for(const n of e)if(t[n])return!0}return!1}}class lt{constructor(t,e){this.max=t,this.onRemove=e,this.reset()}reset(){for(const t in this.data)for(const e of this.data[t])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(t,e,n){const i=t.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);const r={value:e,timeout:void 0};if(void 0!==n&&(r.timeout=setTimeout((()=>{this.remove(t,r)}),n)),this.data[i].push(r),this.order.push(i),this.order.length>this.max){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value}getByKey(t){const e=this.data[t];return e?e[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,e){if(!this.has(t))return this;const n=t.wrapped().key,i=void 0===e?0:this.data[n].indexOf(e),r=this.data[n][i];return this.data[n].splice(i,1),r.timeout&&clearTimeout(r.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(r.value),this.order.splice(this.order.indexOf(n),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}filter(t){const e=[];for(const n in this.data)for(const i of this.data[n])t(i.value)||e.push(i);for(const t of e)this.remove(t.value.tileID,t)}}class ct{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,n,i){const r=String(n);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][r]=this.stateChanges[t][r]||{},e.e(this.stateChanges[t][r],i),null===this.deletedStates[t]){this.deletedStates[t]={};for(const e in this.state[t])e!==r&&(this.deletedStates[t][e]=null)}else if(this.deletedStates[t]&&null===this.deletedStates[t][r]){this.deletedStates[t][r]={};for(const e in this.state[t][r])i[e]||(this.deletedStates[t][r][e]=null)}else for(const e in i)this.deletedStates[t]&&this.deletedStates[t][r]&&null===this.deletedStates[t][r][e]&&delete this.deletedStates[t][r][e]}removeFeatureState(t,e,n){if(null===this.deletedStates[t])return;const i=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},n&&void 0!==e)null!==this.deletedStates[t][i]&&(this.deletedStates[t][i]=this.deletedStates[t][i]||{},this.deletedStates[t][i][n]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][i])for(n in this.deletedStates[t][i]={},this.stateChanges[t][i])this.deletedStates[t][i][n]=null;else this.deletedStates[t][i]=null;else this.deletedStates[t]=null}getState(t,n){const i=String(n),r=e.e({},(this.state[t]||{})[i],(this.stateChanges[t]||{})[i]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){const e=this.deletedStates[t][n];if(null===e)return{};for(const t in e)delete r[t]}return r}initializeTileState(t,e){t.setFeatureState(this.state,e)}coalesceChanges(t,n){const i={};for(const t in this.stateChanges){this.state[t]=this.state[t]||{};const n={};for(const i in this.stateChanges[t])this.state[t][i]||(this.state[t][i]={}),e.e(this.state[t][i],this.stateChanges[t][i]),n[i]=this.state[t][i];i[t]=n}for(const t in this.deletedStates){this.state[t]=this.state[t]||{};const n={};if(null===this.deletedStates[t])for(const e in this.state[t])n[e]={},this.state[t][e]={};else for(const e in this.deletedStates[t]){if(null===this.deletedStates[t][e])this.state[t][e]={};else for(const n of Object.keys(this.deletedStates[t][e]))delete this.state[t][e][n];n[e]=this.state[t][e]}i[t]=i[t]||{},e.e(i[t],n)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(i).length)for(const e in t)t[e].setFeatureState(i,n)}}class ut extends e.E{constructor(t,e,n){super(),this.id=t,this.dispatcher=n,this.on("data",(t=>this._dataHandler(t))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((t,e,n,i)=>{const r=new(it(e.type))(t,e,n,i);if(r.id!==t)throw new Error(`Expected Source id to be ${t} instead of ${r.id}`);return r})(t,e,n,this),this._tiles={},this._cache=new lt(0,(t=>this._unloadTile(t))),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ct,this._didEmitContent=!1,this._updated=!1}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._maxTileCacheZoomLevels=t?t._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;if(!(void 0===this.used&&void 0===this.usedForTerrain||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const t in this._tiles){const e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(t,n,i){return e._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(t),this._tileLoaded(t,n,i)}catch(n){t.state="errored",404!==n.status?this._source.fire(new e.j(n,{tile:t})):this.update(this.transform,this.terrain)}}))}_unloadTile(t){this._source.unloadTile&&this._source.unloadTile(t)}_abortTile(t){this._source.abortTile&&this._source.abortTile(t),this._source.fire(new e.k("dataabort",{tile:t,coord:t.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const e in this._tiles){const n=this._tiles[e];n.upload(t),n.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((t=>t.tileID)).sort(ht).map((t=>t.key))}getRenderableIds(t){const n=[];for(const e in this._tiles)this._isIdRenderable(e,t)&&n.push(this._tiles[e]);return t?n.sort(((t,n)=>{const i=t.tileID,r=n.tileID,o=new e.P(i.canonical.x,i.canonical.y)._rotate(this.transform.angle),s=new e.P(r.canonical.x,r.canonical.y)._rotate(this.transform.angle);return i.overscaledZ-r.overscaledZ||s.y-o.y||s.x-o.x})).map((t=>t.tileID.key)):n.map((t=>t.tileID)).sort(ht).map((t=>t.key))}hasRenderableParent(t){const e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)}_isIdRenderable(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")}}_reloadTile(t,n){return e._(this,void 0,void 0,(function*(){const e=this._tiles[t];e&&("loading"!==e.state&&(e.state=n),yield this._loadTile(e,t,n))}))}_tileLoaded(t,n,i){t.timeAdded=o.now(),"expired"===i&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(n,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),t.aborted||this._source.fire(new e.k("data",{dataType:"source",tile:t,coord:t.tileID}))}_backfillDEM(t){const e=this.getRenderableIds();for(let i=0;i<e.length;i++){const r=e[i];if(t.neighboringTiles&&t.neighboringTiles[r]){const e=this.getTileByID(r);n(t,e),n(e,t)}}function n(t,e){t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0;let n=e.tileID.canonical.x-t.tileID.canonical.x;const i=e.tileID.canonical.y-t.tileID.canonical.y,r=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===n&&0===i||Math.abs(i)>1||(Math.abs(n)>1&&(1===Math.abs(n+r)?n+=r:1===Math.abs(n-r)&&(n-=r)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,i),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,e,n,i){for(const r in this._tiles){let o=this._tiles[r];if(i[r]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>n)continue;let s=o.tileID;for(;o&&o.tileID.overscaledZ>e+1;){const t=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[t.key],o&&o.hasData()&&(s=t)}let a=s;for(;a.overscaledZ>e;)if(a=a.scaledTo(a.overscaledZ-1),t[a.key]){i[s.key]=s;break}}}findLoadedParent(t,e){if(t.key in this._loadedParentTiles){const n=this._loadedParentTiles[t.key];return n&&n.tileID.overscaledZ>=e?n:null}for(let n=t.overscaledZ-1;n>=e;n--){const e=t.scaledTo(n),i=this._getLoadedTile(e);if(i)return i}}findLoadedSibling(t){return this._getLoadedTile(t)}_getLoadedTile(t){const e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)}updateCacheSize(t){const n=Math.ceil(t.width/this._source.tileSize)+1,i=Math.ceil(t.height/this._source.tileSize)+1,r=Math.floor(n*i*(null===this._maxTileCacheZoomLevels?e.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(o)}handleWrapJump(t){const e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){const t={};for(const n in this._tiles){const i=this._tiles[n];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+e),t[i.tileID.key]=i}this._tiles=t;for(const t in this._timers)clearTimeout(this._timers[t]),delete this._timers[t];for(const t in this._tiles)this._setTileReloadTimer(t,this._tiles[t])}}_updateCoveredAndRetainedTiles(t,e,n,i,r,s){const a={},A={},l=Object.keys(t),c=o.now();for(const n of l){const i=t[n],r=this._tiles[n];if(!r||0!==r.fadeEndTime&&r.fadeEndTime<=c)continue;const o=this.findLoadedParent(i,e),s=this.findLoadedSibling(i),l=o||s||null;l&&(this._addTile(l.tileID),a[l.tileID.key]=l.tileID),A[n]=i}this._retainLoadedChildren(A,i,n,t);for(const e in a)t[e]||(this._coveredTiles[e]=!0,t[e]=a[e]);if(s){const e={},n={};for(const t of r)this._tiles[t.key].hasData()?e[t.key]=t:n[t.key]=t;for(const i in n){const r=n[i].children(this._source.maxzoom);this._tiles[r[0].key]&&this._tiles[r[1].key]&&this._tiles[r[2].key]&&this._tiles[r[3].key]&&(e[r[0].key]=t[r[0].key]=r[0],e[r[1].key]=t[r[1].key]=r[1],e[r[2].key]=t[r[2].key]=r[2],e[r[3].key]=t[r[3].key]=r[3],delete n[i])}for(const i in n){const r=n[i],o=this.findLoadedParent(r,this._source.minzoom),s=this.findLoadedSibling(r),a=o||s||null;if(a){e[a.tileID.key]=t[a.tileID.key]=a.tileID;for(const t in e)e[t].isChildOf(a.tileID)&&delete e[t]}}for(const t in this._tiles)e[t]||(this._coveredTiles[t]=!0)}}update(t,n){if(!this._sourceLoaded||this._paused)return;let i;this.transform=t,this.terrain=n,this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?i=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((t=>new e.S(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y))):(i=t.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:n}),this._source.hasTile&&(i=i.filter((t=>this._source.hasTile(t))))):i=[];const r=t.coveringZoomLevel(this._source),o=Math.max(r-ut.maxOverzooming,this._source.minzoom),s=Math.max(r+ut.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const t={};for(const e of i)if(e.canonical.z>this._source.minzoom){const n=e.scaledTo(e.canonical.z-1);t[n.key]=n;const i=e.scaledTo(Math.max(this._source.minzoom,Math.min(e.canonical.z,5)));t[i.key]=i}i=i.concat(Object.values(t))}const a=0===i.length&&!this._updated&&this._didEmitContent;this._updated=!0,a&&this.fire(new e.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const A=this._updateRetainedTiles(i,r);gt(this._source.type)&&this._updateCoveredAndRetainedTiles(A,o,s,r,i,n);for(const t in A)this._tiles[t].clearFadeHold();const l=e.ab(this._tiles,A);for(const t of l){const e=this._tiles[t];e.hasSymbolBuckets&&!e.holdingForFade()?e.setHoldDuration(this.map._fadeDuration):e.hasSymbolBuckets&&!e.symbolFadeFinished()||this._removeTile(t)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)}_updateRetainedTiles(t,e){var n;const i={},r={},o=Math.max(e-ut.maxOverzooming,this._source.minzoom),s=Math.max(e+ut.maxUnderzooming,this._source.minzoom),a={};for(const n of t){const t=this._addTile(n);i[n.key]=n,t.hasData()||e<this._source.maxzoom&&(a[n.key]=n)}this._retainLoadedChildren(a,e,s,i);for(const s of t){let t=this._tiles[s.key];if(t.hasData())continue;if(e+1>this._source.maxzoom){const t=s.children(this._source.maxzoom)[0],e=this.getTile(t);if(e&&e.hasData()){i[t.key]=t;continue}}else{const t=s.children(this._source.maxzoom);if(i[t[0].key]&&i[t[1].key]&&i[t[2].key]&&i[t[3].key])continue}let a=t.wasRequested();for(let e=s.overscaledZ-1;e>=o;--e){const o=s.scaledTo(e);if(r[o.key])break;if(r[o.key]=!0,t=this.getTile(o),!t&&a&&(t=this._addTile(o)),t){const e=t.hasData();if((e||!(null===(n=this.map)||void 0===n?void 0:n.cancelPendingTileRequestsWhileZooming)||a)&&(i[o.key]=o),a=t.wasRequested(),e)break}}}return i}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const e=[];let n,i=this._tiles[t].tileID;for(;i.overscaledZ>0;){if(i.key in this._loadedParentTiles){n=this._loadedParentTiles[i.key];break}e.push(i.key);const t=i.scaledTo(i.overscaledZ-1);if(n=this._getLoadedTile(t),n)break;i=t}for(const t of e)this._loadedParentTiles[t]=n}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const t in this._tiles){const e=this._tiles[t].tileID,n=this._getLoadedTile(e);this._loadedSiblingTiles[e.key]=n}}_addTile(t){let n=this._tiles[t.key];if(n)return n;n=this._cache.getAndRemove(t),n&&(this._setTileReloadTimer(t.key,n),n.tileID=t,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,n)));const i=n;return n||(n=new At(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(n,t.key,n.state)),n.uses++,this._tiles[t.key]=n,i||this._source.fire(new e.k("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n}_setTileReloadTimer(t,e){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const n=e.getExpiryTimeout();n&&(this._timers[t]=setTimeout((()=>{this._reloadTile(t,"expired"),delete this._timers[t]}),n))}_removeTile(t){const e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))}_dataHandler(t){const e=t.sourceDataType;"source"===t.dataType&&"metadata"===e&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===t.dataType&&"content"===e&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(t);this._cache.reset()}tilesIn(t,n,i){const r=[],o=this.transform;if(!o)return r;const s=i?o.getCameraQueryGeometry(t):t,a=t.map((t=>o.pointCoordinate(t,this.terrain))),A=s.map((t=>o.pointCoordinate(t,this.terrain))),l=this.getIds();let c=1/0,u=1/0,h=-1/0,g=-1/0;for(const t of A)c=Math.min(c,t.x),u=Math.min(u,t.y),h=Math.max(h,t.x),g=Math.max(g,t.y);for(let t=0;t<l.length;t++){const i=this._tiles[l[t]];if(i.holdingForFade())continue;const s=i.tileID,d=Math.pow(2,o.zoom-i.tileID.overscaledZ),p=n*i.queryPadding*e.X/i.tileSize/d,f=[s.getTilePoint(new e.Z(c,u)),s.getTilePoint(new e.Z(h,g))];if(f[0].x-p<e.X&&f[0].y-p<e.X&&f[1].x+p>=0&&f[1].y+p>=0){const t=a.map((t=>s.getTilePoint(t))),e=A.map((t=>s.getTilePoint(t)));r.push({tile:i,tileID:s,queryGeometry:t,cameraQueryGeometry:e,scale:d})}}return r}getVisibleCoordinates(t){const e=this.getRenderableIds(t).map((t=>this._tiles[t].tileID));for(const t of e)t.posMatrix=this.transform.calculatePosMatrix(t.toUnwrapped());return e}hasTransition(){if(this._source.hasTransition())return!0;if(gt(this._source.type)){const t=o.now();for(const e in this._tiles)if(this._tiles[e].fadeEndTime>=t)return!0}return!1}setFeatureState(t,e,n){this._state.updateState(t=t||"_geojsonTileLayer",e,n)}removeFeatureState(t,e,n){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,n)}getFeatureState(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)}setDependencies(t,e,n){const i=this._tiles[t];i&&i.setDependencies(e,n)}reloadTilesForDependencies(t,e){for(const n in this._tiles)this._tiles[n].hasDependency(t,e)&&this._reloadTile(n,"reloading");this._cache.filter((n=>!n.hasDependency(t,e)))}}function ht(t,e){const n=Math.abs(2*t.wrap)-+(t.wrap<0),i=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||i-n||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function gt(t){return"raster"===t||"image"===t||"video"===t}ut.maxOverzooming=10,ut.maxUnderzooming=3;class dt{constructor(t,e){this.reset(t,e)}reset(t,e){this.points=t||[],this._distances=[0];for(let t=1;t<this.points.length;t++)this._distances[t]=this._distances[t-1]+this.points[t].dist(this.points[t-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(1===this.points.length)return this.points[0];t=e.ac(t,0,1);let n=1,i=this._distances[n];const r=t*this.paddedLength+this.padding;for(;i<r&&n<this._distances.length;)i=this._distances[++n];const o=n-1,s=this._distances[o],a=i-s,A=a>0?(r-s)/a:0;return this.points[o].mult(1-A).add(this.points[n].mult(A))}}function pt(t,e){let n=!0;return"always"===t||"never"!==t&&"never"!==e||(n=!1),n}class ft{constructor(t,e,n){const i=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(let t=0;t<this.xCellCount*this.yCellCount;t++)i.push([]),r.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,e,n,i,r){this._forEachCell(e,n,i,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)}insertCircle(t,e,n,i){this._forEachCell(e-i,n-i,e+i,n+i,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(i)}_insertBoxCell(t,e,n,i,r,o){this.boxCells[r].push(o)}_insertCircleCell(t,e,n,i,r,o){this.circleCells[r].push(o)}_query(t,e,n,i,r,o,s){if(n<0||t>this.width||i<0||e>this.height)return[];const a=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=i){if(r)return[{key:null,x1:t,y1:e,x2:n,y2:i}];for(let t=0;t<this.boxKeys.length;t++)a.push({key:this.boxKeys[t],x1:this.bboxes[4*t],y1:this.bboxes[4*t+1],x2:this.bboxes[4*t+2],y2:this.bboxes[4*t+3]});for(let t=0;t<this.circleKeys.length;t++){const e=this.circles[3*t],n=this.circles[3*t+1],i=this.circles[3*t+2];a.push({key:this.circleKeys[t],x1:e-i,y1:n-i,x2:e+i,y2:n+i})}}else this._forEachCell(t,e,n,i,this._queryCell,a,{hitTest:r,overlapMode:o,seenUids:{box:{},circle:{}}},s);return a}query(t,e,n,i){return this._query(t,e,n,i,!1,null)}hitTest(t,e,n,i,r,o){return this._query(t,e,n,i,!0,r,o).length>0}hitTestCircle(t,e,n,i,r){const o=t-n,s=t+n,a=e-n,A=e+n;if(s<0||o>this.width||A<0||a>this.height)return!1;const l=[];return this._forEachCell(o,a,s,A,this._queryCellCircle,l,{hitTest:!0,overlapMode:i,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}},r),l.length>0}_queryCell(t,e,n,i,r,o,s,a){const{seenUids:A,hitTest:l,overlapMode:c}=s,u=this.boxCells[r];if(null!==u){const r=this.bboxes;for(const s of u)if(!A.box[s]){A.box[s]=!0;const u=4*s,h=this.boxKeys[s];if(t<=r[u+2]&&e<=r[u+3]&&n>=r[u+0]&&i>=r[u+1]&&(!a||a(h))&&(!l||!pt(c,h.overlapMode))&&(o.push({key:h,x1:r[u],y1:r[u+1],x2:r[u+2],y2:r[u+3]}),l))return!0}}const h=this.circleCells[r];if(null!==h){const r=this.circles;for(const s of h)if(!A.circle[s]){A.circle[s]=!0;const u=3*s,h=this.circleKeys[s];if(this._circleAndRectCollide(r[u],r[u+1],r[u+2],t,e,n,i)&&(!a||a(h))&&(!l||!pt(c,h.overlapMode))){const t=r[u],e=r[u+1],n=r[u+2];if(o.push({key:h,x1:t-n,y1:e-n,x2:t+n,y2:e+n}),l)return!0}}}return!1}_queryCellCircle(t,e,n,i,r,o,s,a){const{circle:A,seenUids:l,overlapMode:c}=s,u=this.boxCells[r];if(null!==u){const t=this.bboxes;for(const e of u)if(!l.box[e]){l.box[e]=!0;const n=4*e,i=this.boxKeys[e];if(this._circleAndRectCollide(A.x,A.y,A.radius,t[n+0],t[n+1],t[n+2],t[n+3])&&(!a||a(i))&&!pt(c,i.overlapMode))return o.push(!0),!0}}const h=this.circleCells[r];if(null!==h){const t=this.circles;for(const e of h)if(!l.circle[e]){l.circle[e]=!0;const n=3*e,i=this.circleKeys[e];if(this._circlesCollide(t[n],t[n+1],t[n+2],A.x,A.y,A.radius)&&(!a||a(i))&&!pt(c,i.overlapMode))return o.push(!0),!0}}}_forEachCell(t,e,n,i,r,o,s,a){const A=this._convertToXCellCoord(t),l=this._convertToYCellCoord(e),c=this._convertToXCellCoord(n),u=this._convertToYCellCoord(i);for(let h=A;h<=c;h++)for(let A=l;A<=u;A++)if(r.call(this,t,e,n,i,this.xCellCount*A+h,o,s,a))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,e,n,i,r,o){const s=i-t,a=r-e,A=n+o;return A*A>s*s+a*a}_circleAndRectCollide(t,e,n,i,r,o,s){const a=(o-i)/2,A=Math.abs(t-(i+a));if(A>a+n)return!1;const l=(s-r)/2,c=Math.abs(e-(r+l));if(c>l+n)return!1;if(A<=a||c<=l)return!0;const u=A-a,h=c-l;return u*u+h*h<=n*n}}function mt(t,n,i,r,o){const s=e.H();return n?(e.K(s,s,[1/o,1/o,1]),i||e.ad(s,s,r.angle)):e.L(s,r.labelPlaneMatrix,t),s}function It(t,n,i,r,o){if(n){const n=e.ae(t);return e.K(n,n,[o,o,1]),i||e.ad(n,n,-r.angle),n}return r.glCoordMatrix}function yt(t,n,i){let r;i?(r=[t.x,t.y,i(t.x,t.y),1],e.af(r,r,n)):(r=[t.x,t.y,0,1],function(t,e,n){const i=e[0],r=e[1];t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t[3]=n[3]*i+n[7]*r+n[15]}(r,r,n));const o=r[3];return{point:new e.P(r[0]/o,r[1]/o),signedDistanceFromCamera:o,isOccluded:!1}}function Ct(t,e){return.5+t/e*.5}function Et(t,e){return t.x>=-e[0]&&t.x<=e[0]&&t.y>=-e[1]&&t.y<=e[1]}function _t(t,n,i,r,o,s,a,A,l,c,u,h,g,d,p){const f=r?t.textSizeData:t.iconSizeData,m=e.ag(f,i.transform.zoom),I=[256/i.width*2+1,256/i.height*2+1],y=r?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;y.clear();const C=t.lineVertexArray,E=r?t.text.placedSymbolArray:t.icon.placedSymbolArray,_=i.transform.width/i.transform.height;let v=!1;for(let r=0;r<E.length;r++){const B=E.get(r);if(B.hidden||B.writingMode===e.ah.vertical&&!v){Rt(B.numGlyphs,y);continue}v=!1;const w=yt(new e.P(B.anchorX,B.anchorY),n,p);if(!Et(w.point,I)){Rt(B.numGlyphs,y);continue}const b=Ct(i.transform.cameraToCenterDistance,w.signedDistanceFromCamera),Q=e.ai(f,m,B),x=a?Q/b:Q*b,D={getElevation:p,labelPlaneMatrix:o,lineVertexArray:C,pitchWithMap:a,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:c,tileAnchorPoint:new e.P(B.anchorX,B.anchorY),unwrappedTileID:u,width:h,height:g,translation:d},S=wt(D,B,x,!1,A,n,s,t.glyphOffsetArray,y,_,l);v=S.useVertical,(S.notEnoughRoom||v||S.needsFlipping&&wt(D,B,x,!0,A,n,s,t.glyphOffsetArray,y,_,l).notEnoughRoom)&&Rt(B.numGlyphs,y)}r?t.text.dynamicLayoutVertexBuffer.updateData(y):t.icon.dynamicLayoutVertexBuffer.updateData(y)}function vt(t,e,n,i,r,o,s,a){const A=o.glyphStartIndex+o.numGlyphs,l=o.lineStartIndex,c=o.lineStartIndex+o.lineLength,u=e.getoffsetX(o.glyphStartIndex),h=e.getoffsetX(A-1),g=Mt(t*u,n,i,r,o.segment,l,c,a,s);if(!g)return null;const d=Mt(t*h,n,i,r,o.segment,l,c,a,s);return d?a.projectionCache.anyProjectionOccluded?null:{first:g,last:d}:null}function Bt(t,n,i,r){return t===e.ah.horizontal&&Math.abs(i.y-n.y)>Math.abs(i.x-n.x)*r?{useVertical:!0}:(t===e.ah.vertical?n.y<i.y:n.x>i.x)?{needsFlipping:!0}:null}function wt(t,n,i,r,o,s,a,A,l,c,u){const h=i/24,g=n.lineOffsetX*h,d=n.lineOffsetY*h;let p;if(n.numGlyphs>1){const e=n.glyphStartIndex+n.numGlyphs,i=n.lineStartIndex,s=n.lineStartIndex+n.lineLength,l=vt(h,A,g,d,r,n,u,t);if(!l)return{notEnoughRoom:!0};const f=yt(l.first.point,a,t.getElevation).point,m=yt(l.last.point,a,t.getElevation).point;if(o&&!r){const t=Bt(n.writingMode,f,m,c);if(t)return t}p=[l.first];for(let o=n.glyphStartIndex+1;o<e-1;o++)p.push(Mt(h*A.getoffsetX(o),g,d,r,n.segment,i,s,t,u));p.push(l.last)}else{if(o&&!r){const i=yt(t.tileAnchorPoint,s,t.getElevation).point,r=n.lineStartIndex+n.segment+1,o=new e.P(t.lineVertexArray.getx(r),t.lineVertexArray.gety(r)),a=yt(o,s,t.getElevation),A=a.signedDistanceFromCamera>0?a.point:function(t,e,n,i,r,o){return bt(t,e,n,1,r,o)}(t.tileAnchorPoint,o,i,0,s,t),l=Bt(n.writingMode,i,A,c);if(l)return l}const i=Mt(h*A.getoffsetX(n.glyphStartIndex),g,d,r,n.segment,n.lineStartIndex,n.lineStartIndex+n.lineLength,t,u);if(!i||t.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};p=[i]}for(const t of p)e.aj(l,t.point,t.angle);return{}}function bt(t,e,n,i,r,o){const s=t.add(t.sub(e)._unit()),a=void 0!==r?yt(s,r,o.getElevation).point:xt(s.x,s.y,o).point,A=n.sub(a);return n.add(A._mult(i/A.mag()))}function Qt(t,n,i){const r=n.projectionCache;if(r.projections[t])return r.projections[t];const o=new e.P(n.lineVertexArray.getx(t),n.lineVertexArray.gety(t)),s=xt(o.x,o.y,n);if(s.signedDistanceFromCamera>0)return r.projections[t]=s.point,r.anyProjectionOccluded=r.anyProjectionOccluded||s.isOccluded,s.point;const a=t-i.direction;return function(t,e,n,i,r){return bt(t,e,n,i,void 0,r)}(0===i.distanceFromAnchor?n.tileAnchorPoint:new e.P(n.lineVertexArray.getx(a),n.lineVertexArray.gety(a)),o,i.previousVertex,i.absOffsetX-i.distanceFromAnchor+1,n)}function xt(t,n,i){const r=t+i.translation[0],o=n+i.translation[1];let s;return!i.pitchWithMap&&i.projection.useSpecialProjectionForSymbols?(s=i.projection.projectTileCoordinates(r,o,i.unwrappedTileID,i.getElevation),s.point.x=(.5*s.point.x+.5)*i.width,s.point.y=(.5*-s.point.y+.5)*i.height):(s=yt(new e.P(r,o),i.labelPlaneMatrix,i.getElevation),s.isOccluded=!1),s}function Dt(t,e,n){return t._unit()._perp()._mult(e*n)}function St(t,n,i,r,o,s,a,A,l){if(A.projectionCache.offsets[t])return A.projectionCache.offsets[t];const c=i.add(n);if(t+l.direction<r||t+l.direction>=o)return A.projectionCache.offsets[t]=c,c;const u=Qt(t+l.direction,A,l),h=Dt(u.sub(i),a,l.direction),g=i.add(h),d=u.add(h);return A.projectionCache.offsets[t]=e.ak(s,c,g,d)||c,A.projectionCache.offsets[t]}function Mt(t,e,n,i,r,o,s,a,A){const l=i?t-e:t+e;let c=l>0?1:-1,u=0;i&&(c*=-1,u=Math.PI),c<0&&(u+=Math.PI);let h,g=c>0?o+r:o+r+1;a.projectionCache.cachedAnchorPoint?h=a.projectionCache.cachedAnchorPoint:(h=xt(a.tileAnchorPoint.x,a.tileAnchorPoint.y,a).point,a.projectionCache.cachedAnchorPoint=h);let d,p,f=h,m=h,I=0,y=0;const C=Math.abs(l),E=[];let _;for(;I+y<=C;){if(g+=c,g<o||g>=s)return null;I+=y,m=f,p=d;const t={absOffsetX:C,direction:c,distanceFromAnchor:I,previousVertex:m};if(f=Qt(g,a,t),0===n)E.push(m),_=f.sub(m);else{let e;const i=f.sub(m);e=0===i.mag()?Dt(Qt(g+c,a,t).sub(f),n,c):Dt(i,n,c),p||(p=m.add(e)),d=St(g,e,f,o,s,p,n,a,t),E.push(p),_=d.sub(p)}y=_.mag()}const v=_._mult((C-I)/y)._add(p||m),B=u+Math.atan2(f.y-m.y,f.x-m.x);return E.push(v),{point:v,angle:A?B:0,path:E}}const kt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Rt(t,e){for(let n=0;n<t;n++){const t=e.length;e.resize(t+4),e.float32.set(kt,3*t)}}const Nt=100;class Pt{constructor(t,e,n=new ft(t.width+200,t.height+200,25),i=new ft(t.width+200,t.height+200,25)){this.transform=t,this.mapProjection=e,this.grid=n,this.ignoredGrid=i,this.pitchFactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+Nt,this.screenBottomBoundary=t.height+Nt,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(t,e,n,i,r,o,s,a,A,l,c){const u=t.anchorPointX+a[0],h=t.anchorPointY+a[1],g=this.projectAndGetPerspectiveRatio(i,u,h,r,l),d=this._projectCollisionBox(t,n,i,r,o,s,a,g,l,c),[p,f,m,I]=d.box;return this.mapProjection.useSpecialProjectionForSymbols&&(o?d.allPointsOccluded:this.mapProjection.isOccluded(u,h,r))||g.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(p,f,m,I)||"always"!==e&&this.grid.hitTest(p,f,m,I,e,A)?{box:[p,f,m,I],placeable:!1,offscreen:!1}:{box:[p,f,m,I],placeable:!0,offscreen:this.isOffscreen(p,f,m,I)}}placeCollisionCircles(t,n,i,r,o,s,a,A,l,c,u,h,g,d,p,f){const m=[],I=new e.P(n.anchorX,n.anchorY),y=this.getPerspectiveRatio(s,I.x,I.y,a,f),C=(u?o/y:o*y)/e.ap,E={getElevation:f,labelPlaneMatrix:A,lineVertexArray:i,pitchWithMap:u,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:I,unwrappedTileID:a,width:this.transform.width,height:this.transform.height,translation:p},_=vt(C,r,n.lineOffsetX*C,n.lineOffsetY*C,!1,n,!1,E);let v=!1,B=!1,w=!0;if(_){const n=.5*g*y+d,i=new e.P(-100,-100),r=new e.P(this.screenRightBoundary,this.screenBottomBoundary),o=new dt,s=_.first,a=_.last;let A=[];for(let t=s.path.length-1;t>=1;t--)A.push(s.path[t]);for(let t=1;t<a.path.length;t++)A.push(a.path[t]);const u=2.5*n;if(l){const t=this.projectPathToScreenSpace(A,E,l);A=t.some((t=>t.signedDistanceFromCamera<=0))?[]:t.map((t=>t.point))}let p=[];if(A.length>0){const t=A[0].clone(),n=A[0].clone();for(let e=1;e<A.length;e++)t.x=Math.min(t.x,A[e].x),t.y=Math.min(t.y,A[e].y),n.x=Math.max(n.x,A[e].x),n.y=Math.max(n.y,A[e].y);p=t.x>=i.x&&n.x<=r.x&&t.y>=i.y&&n.y<=r.y?[A]:n.x<i.x||t.x>r.x||n.y<i.y||t.y>r.y?[]:e.al([A],i.x,i.y,r.x,r.y)}for(const e of p){o.reset(e,.25*n);let i=0;i=o.length<=.5*n?1:Math.ceil(o.paddedLength/u)+1;for(let e=0;e<i;e++){const r=e/Math.max(i-1,1),s=o.lerp(r),a=s.x+Nt,A=s.y+Nt;m.push(a,A,n,0);const l=a-n,u=A-n,g=a+n,d=A+n;if(w=w&&this.isOffscreen(l,u,g,d),B=B||this.isInsideGrid(l,u,g,d),"always"!==t&&this.grid.hitTestCircle(a,A,n,t,h)&&(v=!0,!c))return{circles:[],offscreen:!1,collisionDetected:v}}}}return{circles:!c&&v||!B||y<this.perspectiveRatioCutoff?[]:m,offscreen:w,collisionDetected:v}}projectPathToScreenSpace(t,e,n){return t.map((t=>yt(t,n,e.getElevation)))}queryRenderedSymbols(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const n=[];let i=1/0,r=1/0,o=-1/0,s=-1/0;for(const a of t){const t=new e.P(a.x+Nt,a.y+Nt);i=Math.min(i,t.x),r=Math.min(r,t.y),o=Math.max(o,t.x),s=Math.max(s,t.y),n.push(t)}const a=this.grid.query(i,r,o,s).concat(this.ignoredGrid.query(i,r,o,s)),A={},l={};for(const t of a){const i=t.key;if(void 0===A[i.bucketInstanceId]&&(A[i.bucketInstanceId]={}),A[i.bucketInstanceId][i.featureIndex])continue;const r=[new e.P(t.x1,t.y1),new e.P(t.x2,t.y1),new e.P(t.x2,t.y2),new e.P(t.x1,t.y2)];e.am(n,r)&&(A[i.bucketInstanceId][i.featureIndex]=!0,void 0===l[i.bucketInstanceId]&&(l[i.bucketInstanceId]=[]),l[i.bucketInstanceId].push(i.featureIndex))}return l}insertCollisionBox(t,e,n,i,r,o){(n?this.ignoredGrid:this.grid).insert({bucketInstanceId:i,featureIndex:r,collisionGroupID:o,overlapMode:e},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,e,n,i,r,o){const s=n?this.ignoredGrid:this.grid,a={bucketInstanceId:i,featureIndex:r,collisionGroupID:o,overlapMode:e};for(let e=0;e<t.length;e+=4)s.insertCircle(a,t[e],t[e+1],t[e+2])}projectAndGetPerspectiveRatio(t,n,i,r,o){const s=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(n,i,r,o):yt(new e.P(n,i),t,o);return{point:new e.P((s.point.x+1)/2*this.transform.width+Nt,(1-s.point.y)/2*this.transform.height+Nt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/s.signedDistanceFromCamera*.5,isOccluded:s.isOccluded,signedDistanceFromCamera:s.signedDistanceFromCamera}}getPerspectiveRatio(t,n,i,r,o){const s=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(n,i,r,o):yt(new e.P(n,i),t,o);return.5+this.transform.cameraToCenterDistance/s.signedDistanceFromCamera*.5}isOffscreen(t,e,n,i){return n<Nt||t>=this.screenRightBoundary||i<Nt||e>this.screenBottomBoundary}isInsideGrid(t,e,n,i){return n>=0&&t<this.gridRightBoundary&&i>=0&&e<this.gridBottomBoundary}getViewportMatrix(){const t=e.an([]);return e.J(t,t,[-100,-100,0]),t}_projectCollisionBox(t,n,i,r,o,s,a,A,l,c){const u=n*A.perspectiveRatio;let h=new e.P(1,0),g=new e.P(0,1);const d=new e.P(t.anchorPointX+a[0],t.anchorPointY+a[1]);if(s&&!o){const t=this.projectAndGetPerspectiveRatio(i,d.x+1,d.y,r,l).point.sub(A.point).unit(),n=Math.atan(t.y/t.x)+(t.x<0?Math.PI:0),o=Math.sin(n),s=Math.cos(n);h=new e.P(s,o),g=new e.P(-o,s)}else if(!s&&o){const t=-this.transform.angle,n=Math.sin(t),i=Math.cos(t);h=new e.P(i,n),g=new e.P(-n,i)}let p=A.point,f=u;if(o){p=d;const t=this.transform.zoom-Math.floor(this.transform.zoom);f=Math.pow(2,-t),f*=this.mapProjection.getPitchedTextCorrection(this.transform,d,r),c||(f*=e.ac(.5+A.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}c&&(p=p.add(h.mult(c.x*f)).add(g.mult(c.y*f)));const m=t.x1*f,I=t.x2*f,y=(m+I)/2,C=t.y1*f,E=t.y2*f,_=(C+E)/2,v=[{offsetX:m,offsetY:C},{offsetX:y,offsetY:C},{offsetX:I,offsetY:C},{offsetX:I,offsetY:_},{offsetX:I,offsetY:E},{offsetX:y,offsetY:E},{offsetX:m,offsetY:E},{offsetX:m,offsetY:_}];let B=[];for(const{offsetX:t,offsetY:n}of v)B.push(new e.P(p.x+h.x*t+g.x*n,p.y+h.y*t+g.y*n));let w=!1;if(o){const t=B.map((t=>this.projectAndGetPerspectiveRatio(i,t.x,t.y,r,l)));w=t.some((t=>!t.isOccluded)),B=t.map((t=>t.point))}else w=!0;return{box:e.ao(B),allPointsOccluded:!w}}}function Tt(t,n,i){return n*(e.X/(t.tileSize*Math.pow(2,i-t.tileID.overscaledZ)))}class Lt{constructor(t,e,n,i){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):i&&n?1:0,this.placed=n}isHidden(){return 0===this.opacity&&!this.placed}}class Ft{constructor(t,e,n,i,r){this.text=new Lt(t?t.text:null,e,n,r),this.icon=new Lt(t?t.icon:null,e,i,r)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ot{constructor(t,e,n){this.text=t,this.icon=e,this.skipFade=n}}class Gt{constructor(){this.invProjMatrix=e.H(),this.viewportMatrix=e.H(),this.circles=[]}}class Ut{constructor(t,e,n,i,r){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=i,this.tileID=r}}class jt{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:t=>t.collisionGroupID===e}}return this.collisionGroups[t]}}function Yt(t,n,i,r,o){const{horizontalAlign:s,verticalAlign:a}=e.au(t);return new e.P(-(s-.5)*n+r[0]*o,-(a-.5)*i+r[1]*o)}class Kt{constructor(t,e,n,i,r,o){this.transform=t.clone(),this.terrain=n,this.collisionIndex=new Pt(this.transform,e),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=i,this.retainedQueryData={},this.collisionGroups=new jt(r),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=o,o&&(o.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(t){const e=this.terrain;return e?(n,i)=>e.getElevation(t,n,i):null}getBucketParts(t,n,i,r){const o=i.getBucket(n),s=i.latestFeatureIndex;if(!o||!s||n.id!==o.layerIds[0])return;const a=i.collisionBoxArray,A=o.layers[0].layout,l=o.layers[0].paint,c=Math.pow(2,this.transform.zoom-i.tileID.overscaledZ),u=i.tileSize/e.X,h=i.tileID.toUnwrapped(),g=this.transform.calculatePosMatrix(h),d="map"===A.get("text-pitch-alignment"),p="map"===A.get("text-rotation-alignment"),f=Tt(i,1,this.transform.zoom),m=this.collisionIndex.mapProjection.translatePosition(this.transform,i,l.get("text-translate"),l.get("text-translate-anchor")),I=this.collisionIndex.mapProjection.translatePosition(this.transform,i,l.get("icon-translate"),l.get("icon-translate-anchor")),y=mt(g,d,p,this.transform,f);let C=null;if(d){const t=It(g,d,p,this.transform,f);C=e.L([],this.transform.labelPlaneMatrix,t)}this.retainedQueryData[o.bucketInstanceId]=new Ut(o.bucketInstanceId,s,o.sourceLayerIndex,o.index,i.tileID);const E={bucket:o,layout:A,translationText:m,translationIcon:I,posMatrix:g,unwrappedTileID:h,textLabelPlaneMatrix:y,labelToScreenMatrix:C,scale:c,textPixelRatio:u,holdingForFade:i.holdingForFade(),collisionBoxArray:a,partiallyEvaluatedTextSize:e.ag(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(r)for(const e of o.sortKeyRanges){const{sortKey:n,symbolInstanceStart:i,symbolInstanceEnd:r}=e;t.push({sortKey:n,symbolInstanceStart:i,symbolInstanceEnd:r,parameters:E})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:E})}attemptAnchorPlacement(t,n,i,r,o,s,a,A,l,c,u,h,g,d,p,f,m,I,y){const C=e.aq[t.textAnchor],E=[t.textOffset0,t.textOffset1],_=Yt(C,i,r,E,o),v=this.collisionIndex.placeCollisionBox(n,h,A,l,c,a,s,f,u.predicate,y,_);if((!I||this.collisionIndex.placeCollisionBox(I,h,A,l,c,a,s,m,u.predicate,y,_).placeable)&&v.placeable){let t;if(this.prevPlacement&&this.prevPlacement.variableOffsets[g.crossTileID]&&this.prevPlacement.placements[g.crossTileID]&&this.prevPlacement.placements[g.crossTileID].text&&(t=this.prevPlacement.variableOffsets[g.crossTileID].anchor),0===g.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[g.crossTileID]={textOffset:E,width:i,height:r,anchor:C,textBoxScale:o,prevAnchor:t},this.markUsedJustification(d,C,g,p),d.allowVerticalPlacement&&(this.markUsedOrientation(d,p,g),this.placedOrientations[g.crossTileID]=p),{shift:_,placedGlyphBoxes:v}}}placeLayerBucketPart(t,n,i){const{bucket:r,layout:o,translationText:s,translationIcon:a,posMatrix:A,unwrappedTileID:l,textLabelPlaneMatrix:c,labelToScreenMatrix:u,textPixelRatio:h,holdingForFade:g,collisionBoxArray:d,partiallyEvaluatedTextSize:p,collisionGroup:f}=t.parameters,m=o.get("text-optional"),I=o.get("icon-optional"),y=e.ar(o,"text-overlap","text-allow-overlap"),C="always"===y,E=e.ar(o,"icon-overlap","icon-allow-overlap"),_="always"===E,v="map"===o.get("text-rotation-alignment"),B="map"===o.get("text-pitch-alignment"),w="none"!==o.get("icon-text-fit"),b="viewport-y"===o.get("symbol-z-order"),Q=C&&(_||!r.hasIconData()||I),x=_&&(C||!r.hasTextData()||m);!r.collisionArrays&&d&&r.deserializeCollisionBoxes(d);const D=this._getTerrainElevationFunc(this.retainedQueryData[r.bucketInstanceId].tileID),S=(t,d,_)=>{var b,S;if(n[t.crossTileID])return;if(g)return void(this.placements[t.crossTileID]=new Ot(!1,!1,!1));let M=!1,k=!1,R=!0,N=null,P={box:null,placeable:!1,offscreen:null},T={box:null,placeable:!1,offscreen:null},L=null,F=null,O=null,G=0,U=0,j=0;d.textFeatureIndex?G=d.textFeatureIndex:t.useRuntimeCollisionCircles&&(G=t.featureIndex),d.verticalTextFeatureIndex&&(U=d.verticalTextFeatureIndex);const Y=d.textBox;if(Y){const n=n=>{let i=e.ah.horizontal;if(r.allowVerticalPlacement&&!n&&this.prevPlacement){const e=this.prevPlacement.placedOrientations[t.crossTileID];e&&(this.placedOrientations[t.crossTileID]=e,i=e,this.markUsedOrientation(r,i,t))}return i},o=(n,i)=>{if(r.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&d.verticalTextBox){for(const t of r.writingModes)if(t===e.ah.vertical?(P=i(),T=P):P=n(),P&&P.placeable)break}else P=n()},c=t.textAnchorOffsetStartIndex,u=t.textAnchorOffsetEndIndex;if(u===c){const i=(e,n)=>{const i=this.collisionIndex.placeCollisionBox(e,y,h,A,l,B,v,s,f.predicate,D);return i&&i.placeable&&(this.markUsedOrientation(r,n,t),this.placedOrientations[t.crossTileID]=n),i};o((()=>i(Y,e.ah.horizontal)),(()=>{const n=d.verticalTextBox;return r.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&n?i(n,e.ah.vertical):{box:null,offscreen:null}})),n(P&&P.placeable)}else{let g=e.aq[null===(S=null===(b=this.prevPlacement)||void 0===b?void 0:b.variableOffsets[t.crossTileID])||void 0===S?void 0:S.anchor];const p=(n,o,d)=>{const p=n.x2-n.x1,m=n.y2-n.y1,I=t.textBoxScale,C=w&&"never"===E?o:null;let _=null,b="never"===y?1:2,Q="never";g&&b++;for(let e=0;e<b;e++){for(let e=c;e<u;e++){const i=r.textAnchorOffsets.get(e);if(g&&i.textAnchor!==g)continue;const o=this.attemptAnchorPlacement(i,n,p,m,I,v,B,h,A,l,f,Q,t,r,d,s,a,C,D);if(o&&(_=o.placedGlyphBoxes,_&&_.placeable))return M=!0,N=o.shift,_}g?g=null:Q=y}return i&&!_&&(_={box:this.collisionIndex.placeCollisionBox(Y,"always",h,A,l,B,v,s,f.predicate,D,new e.P(0,0)).box,offscreen:!1,placeable:!1}),_};o((()=>p(Y,d.iconBox,e.ah.horizontal)),(()=>{const n=d.verticalTextBox;return r.allowVerticalPlacement&&(!P||!P.placeable)&&t.numVerticalGlyphVertices>0&&n?p(n,d.verticalIconBox,e.ah.vertical):{box:null,occluded:!0,offscreen:null}})),P&&(M=P.placeable,R=P.offscreen);const m=n(P&&P.placeable);if(!M&&this.prevPlacement){const e=this.prevPlacement.variableOffsets[t.crossTileID];e&&(this.variableOffsets[t.crossTileID]=e,this.markUsedJustification(r,e.anchor,t,m))}}}if(L=P,M=L&&L.placeable,R=L&&L.offscreen,t.useRuntimeCollisionCircles){const n=r.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex),a=e.ai(r.textSizeData,p,n),h=o.get("text-padding");F=this.collisionIndex.placeCollisionCircles(y,n,r.lineVertexArray,r.glyphOffsetArray,a,A,l,c,u,i,B,f.predicate,t.collisionCircleDiameter,h,s,D),F.circles.length&&F.collisionDetected&&!i&&e.w("Collisions detected, but collision boxes are not shown"),M=C||F.circles.length>0&&!F.collisionDetected,R=R&&F.offscreen}if(d.iconFeatureIndex&&(j=d.iconFeatureIndex),d.iconBox){const t=t=>this.collisionIndex.placeCollisionBox(t,E,h,A,l,B,v,a,f.predicate,D,w&&N?N:void 0);T&&T.placeable&&d.verticalIconBox?(O=t(d.verticalIconBox),k=O.placeable):(O=t(d.iconBox),k=O.placeable),R=R&&O.offscreen}const K=m||0===t.numHorizontalGlyphVertices&&0===t.numVerticalGlyphVertices,z=I||0===t.numIconVertices;K||z?z?K||(k=k&&M):M=k&&M:k=M=k&&M;const J=k&&O.placeable;if(M&&L.placeable&&this.collisionIndex.insertCollisionBox(L.box,y,o.get("text-ignore-placement"),r.bucketInstanceId,T&&T.placeable&&U?U:G,f.ID),J&&this.collisionIndex.insertCollisionBox(O.box,E,o.get("icon-ignore-placement"),r.bucketInstanceId,j,f.ID),F&&M&&this.collisionIndex.insertCollisionCircles(F.circles,y,o.get("text-ignore-placement"),r.bucketInstanceId,G,f.ID),i&&this.storeCollisionData(r.bucketInstanceId,_,d,L,O,F),0===t.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===r.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[t.crossTileID]=new Ot(M||Q,k||x,R||r.justReloaded),n[t.crossTileID]=!0};if(b){if(0!==t.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const e=r.getSortedSymbolIndexes(this.transform.angle);for(let t=e.length-1;t>=0;--t){const n=e[t];S(r.symbolInstances.get(n),r.collisionArrays[n],n)}}else for(let e=t.symbolInstanceStart;e<t.symbolInstanceEnd;e++)S(r.symbolInstances.get(e),r.collisionArrays[e],e);if(i&&r.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[r.bucketInstanceId];e.as(t.invProjMatrix,A),t.viewportMatrix=this.collisionIndex.getViewportMatrix()}r.justReloaded=!1}storeCollisionData(t,e,n,i,r,o){if(n.textBox||n.iconBox){let o,s;this.collisionBoxArrays.has(t)?o=this.collisionBoxArrays.get(t):(o=new Map,this.collisionBoxArrays.set(t,o)),o.has(e)?s=o.get(e):(s={text:null,icon:null},o.set(e,s)),n.textBox&&(s.text=i.box),n.iconBox&&(s.icon=r.box)}if(o){let e=this.collisionCircleArrays[t];void 0===e&&(e=this.collisionCircleArrays[t]=new Gt);for(let t=0;t<o.circles.length;t+=4)e.circles.push(o.circles[t+0]),e.circles.push(o.circles[t+1]),e.circles.push(o.circles[t+2]),e.circles.push(o.collisionDetected?1:0)}}markUsedJustification(t,n,i,r){let o;o=r===e.ah.vertical?i.verticalPlacedTextSymbolIndex:{left:i.leftJustifiedTextSymbolIndex,center:i.centerJustifiedTextSymbolIndex,right:i.rightJustifiedTextSymbolIndex}[e.at(n)];const s=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex,i.verticalPlacedTextSymbolIndex];for(const e of s)e>=0&&(t.text.placedSymbolArray.get(e).crossTileID=o>=0&&e!==o?0:i.crossTileID)}markUsedOrientation(t,n,i){const r=n===e.ah.horizontal||n===e.ah.horizontalOnly?n:0,o=n===e.ah.vertical?n:0,s=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex];for(const e of s)t.text.placedSymbolArray.get(e).placedOrientation=r;i.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).placedOrientation=o)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const e=this.prevPlacement;let n=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;const i=e?e.symbolFadeChange(t):1,r=e?e.opacities:{},o=e?e.variableOffsets:{},s=e?e.placedOrientations:{};for(const t in this.placements){const e=this.placements[t],o=r[t];o?(this.opacities[t]=new Ft(o,i,e.text,e.icon),n=n||e.text!==o.text.placed||e.icon!==o.icon.placed):(this.opacities[t]=new Ft(null,i,e.text,e.icon,e.skipFade),n=n||e.text||e.icon)}for(const t in r){const e=r[t];if(!this.opacities[t]){const r=new Ft(e,i,!1,!1);r.isHidden()||(this.opacities[t]=r,n=n||e.text.placed||e.icon.placed)}}for(const t in o)this.variableOffsets[t]||!this.opacities[t]||this.opacities[t].isHidden()||(this.variableOffsets[t]=o[t]);for(const t in s)this.placedOrientations[t]||!this.opacities[t]||this.opacities[t].isHidden()||(this.placedOrientations[t]=s[t]);if(e&&void 0===e.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");n?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)}updateLayerOpacities(t,e){const n={};for(const i of e){const e=i.getBucket(t);e&&i.latestFeatureIndex&&t.id===e.layerIds[0]&&this.updateBucketOpacities(e,i.tileID,n,i.collisionBoxArray)}}updateBucketOpacities(t,n,i,r){t.hasTextData()&&(t.text.opacityVertexArray.clear(),t.text.hasVisibleVertices=!1),t.hasIconData()&&(t.icon.opacityVertexArray.clear(),t.icon.hasVisibleVertices=!1),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const o=t.layers[0],s=o.layout,a=new Ft(null,0,!1,!1,!0),A=s.get("text-allow-overlap"),l=s.get("icon-allow-overlap"),c=o._unevaluatedLayout.hasValue("text-variable-anchor")||o._unevaluatedLayout.hasValue("text-variable-anchor-offset"),u="map"===s.get("text-rotation-alignment"),h="map"===s.get("text-pitch-alignment"),g="none"!==s.get("icon-text-fit"),d=new Ft(null,0,A&&(l||!t.hasIconData()||s.get("icon-optional")),l&&(A||!t.hasTextData()||s.get("text-optional")),!0);!t.collisionArrays&&r&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(r);const p=(t,e,n)=>{for(let i=0;i<e/4;i++)t.opacityVertexArray.emplaceBack(n);t.hasVisibleVertices=t.hasVisibleVertices||n!==te},f=this.collisionBoxArrays.get(t.bucketInstanceId);for(let n=0;n<t.symbolInstances.length;n++){const r=t.symbolInstances.get(n),{numHorizontalGlyphVertices:o,numVerticalGlyphVertices:s,crossTileID:A}=r;let l=this.opacities[A];i[A]?l=a:l||(l=d,this.opacities[A]=l),i[A]=!0;const m=r.numIconVertices>0,I=this.placedOrientations[r.crossTileID],y=I===e.ah.vertical,C=I===e.ah.horizontal||I===e.ah.horizontalOnly;if(o>0||s>0){const e=$t(l.text);p(t.text,o,y?te:e),p(t.text,s,C?te:e);const n=l.text.isHidden();[r.rightJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.leftJustifiedTextSymbolIndex].forEach((e=>{e>=0&&(t.text.placedSymbolArray.get(e).hidden=n||y?1:0)})),r.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).hidden=n||C?1:0);const i=this.variableOffsets[r.crossTileID];i&&this.markUsedJustification(t,i.anchor,r,I);const a=this.placedOrientations[r.crossTileID];a&&(this.markUsedJustification(t,"left",r,a),this.markUsedOrientation(t,a,r))}if(m){const e=$t(l.icon),n=!(g&&r.verticalPlacedIconSymbolIndex&&y);r.placedIconSymbolIndex>=0&&(p(t.icon,r.numIconVertices,n?e:te),t.icon.placedSymbolArray.get(r.placedIconSymbolIndex).hidden=l.icon.isHidden()),r.verticalPlacedIconSymbolIndex>=0&&(p(t.icon,r.numVerticalIconVertices,n?te:e),t.icon.placedSymbolArray.get(r.verticalPlacedIconSymbolIndex).hidden=l.icon.isHidden())}const E=f&&f.has(n)?f.get(n):{text:null,icon:null};if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const i=t.collisionArrays[n];if(i){let n=new e.P(0,0);if(i.textBox||i.verticalTextBox){let e=!0;if(c){const t=this.variableOffsets[A];t?(n=Yt(t.anchor,t.width,t.height,t.textOffset,t.textBoxScale),u&&n._rotate(h?this.transform.angle:-this.transform.angle)):e=!1}if(i.textBox||i.verticalTextBox){let r;i.textBox&&(r=y),i.verticalTextBox&&(r=C),zt(t.textCollisionBox.collisionVertexArray,l.text.placed,!e||r,E.text,n.x,n.y)}}if(i.iconBox||i.verticalIconBox){const e=Boolean(!C&&i.verticalIconBox);let r;i.iconBox&&(r=e),i.verticalIconBox&&(r=!e),zt(t.iconCollisionBox.collisionVertexArray,l.icon.placed,r,E.icon,g?n.x:0,g?n.y:0)}}}}if(t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.text.opacityVertexArray.length!==t.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${t.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${t.text.layoutVertexArray.length}) / 4`);if(t.icon.opacityVertexArray.length!==t.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${t.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${t.icon.layoutVertexArray.length}) / 4`);if(t.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=e.invProjMatrix,t.placementViewportMatrix=e.viewportMatrix,t.collisionCircleArray=e.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,e){const n=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*n>t}setStale(){this.stale=!0}}function zt(t,e,n,i,r,o){i&&0!==i.length||(i=[0,0,0,0]);const s=i[0]-Nt,a=i[1]-Nt,A=i[2]-Nt,l=i[3]-Nt;t.emplaceBack(e?1:0,n?1:0,r||0,o||0,s,a),t.emplaceBack(e?1:0,n?1:0,r||0,o||0,A,a),t.emplaceBack(e?1:0,n?1:0,r||0,o||0,A,l),t.emplaceBack(e?1:0,n?1:0,r||0,o||0,s,l)}const Jt=Math.pow(2,25),qt=Math.pow(2,24),Ht=Math.pow(2,17),Vt=Math.pow(2,16),Wt=Math.pow(2,9),Zt=Math.pow(2,8),Xt=Math.pow(2,1);function $t(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;const e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*Jt+e*qt+n*Ht+e*Vt+n*Wt+e*Zt+n*Xt+e}const te=0;function ee(){return{isOccluded:(t,e,n)=>!1,getPitchedTextCorrection:(t,e,n)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(t,e,n,i){throw new Error("Not implemented.")},translatePosition:(t,e,n,i)=>function(t,e,n,i,r=!1){if(!n[0]&&!n[1])return[0,0];const o=r?"map"===i?t.angle:0:"viewport"===i?-t.angle:0;if(o){const t=Math.sin(o),e=Math.cos(o);n=[n[0]*e-n[1]*t,n[0]*t+n[1]*e]}return[r?n[0]:Tt(e,n[0],t.zoom),r?n[1]:Tt(e,n[1],t.zoom)]}(t,e,n,i),getCircleRadiusCorrection:t=>1}}class ne{constructor(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,e,n,i,r){const o=this._bucketParts;for(;this._currentTileIndex<t.length;)if(e.getBucketParts(o,i,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,r())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(((t,e)=>t.sortKey-e.sortKey)));this._currentPartIndex<o.length;)if(e.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,n),this._currentPartIndex++,r())return!0;return!1}}class ie{constructor(t,e,n,i,r,o,s,a){this.placement=new Kt(t,ee(),e,o,s,a),this._currentPlacementIndex=n.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=r,this._done=!1}isDone(){return this._done}continuePlacement(t,e,n){const i=o.now(),r=()=>!this._forceFullPlacement&&o.now()-i>2;for(;this._currentPlacementIndex>=0;){const i=e[t[this._currentPlacementIndex]],o=this.placement.collisionIndex.transform.zoom;if("symbol"===i.type&&(!i.minzoom||i.minzoom<=o)&&(!i.maxzoom||i.maxzoom>o)){if(this._inProgressLayer||(this._inProgressLayer=new ne(i)),this._inProgressLayer.continuePlacement(n[i.source],this.placement,this._showCollisionBoxes,i,r))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const re=512/e.X/2;class oe{constructor(t,n,i){this.tileID=t,this.bucketInstanceId=i,this._symbolsByKey={};const r=new Map;for(let t=0;t<n.length;t++){const e=n.get(t),i=e.key,o=r.get(i);o?o.push(e):r.set(i,[e])}for(const[t,n]of r){const i={positions:n.map((t=>({x:Math.floor(t.anchorX*re),y:Math.floor(t.anchorY*re)}))),crossTileIDs:n.map((t=>t.crossTileID))};if(i.positions.length>128){const t=new e.av(i.positions.length,16,Uint16Array);for(const{x:e,y:n}of i.positions)t.add(e,n);t.finish(),delete i.positions,i.index=t}this._symbolsByKey[t]=i}}getScaledCoordinates(t,n){const{x:i,y:r,z:o}=this.tileID.canonical,{x:s,y:a,z:A}=n.canonical,l=re/Math.pow(2,A-o),c=(a*e.X+t.anchorY)*l,u=r*e.X*re;return{x:Math.floor((s*e.X+t.anchorX)*l-i*e.X*re),y:Math.floor(c-u)}}findMatches(t,e,n){const i=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z);for(let r=0;r<t.length;r++){const o=t.get(r);if(o.crossTileID)continue;const s=this._symbolsByKey[o.key];if(!s)continue;const a=this.getScaledCoordinates(o,e);if(s.index){const t=s.index.range(a.x-i,a.y-i,a.x+i,a.y+i).sort();for(const e of t){const t=s.crossTileIDs[e];if(!n[t]){n[t]=!0,o.crossTileID=t;break}}}else if(s.positions)for(let t=0;t<s.positions.length;t++){const e=s.positions[t],r=s.crossTileIDs[t];if(Math.abs(e.x-a.x)<=i&&Math.abs(e.y-a.y)<=i&&!n[r]){n[r]=!0,o.crossTileID=r;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:t})=>t))}}class se{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ae{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const e=Math.round((t-this.lng)/360);if(0!==e)for(const t in this.indexes){const n=this.indexes[t],i={};for(const t in n){const r=n[t];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+e),i[r.tileID.key]=r}this.indexes[t]=i}this.lng=t}addBucket(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let t=0;t<e.symbolInstances.length;t++)e.symbolInstances.get(t).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const i=this.usedCrossTileIDs[t.overscaledZ];for(const n in this.indexes){const r=this.indexes[n];if(Number(n)>t.overscaledZ)for(const n in r){const o=r[n];o.tileID.isChildOf(t)&&o.findMatches(e.symbolInstances,t,i)}else{const o=r[t.scaledTo(Number(n)).key];o&&o.findMatches(e.symbolInstances,t,i)}}for(let t=0;t<e.symbolInstances.length;t++){const r=e.symbolInstances.get(t);r.crossTileID||(r.crossTileID=n.generate(),i[r.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new oe(t,e.symbolInstances,e.bucketInstanceId),!0}removeBucketCrossTileIDs(t,e){for(const n of e.getCrossTileIDsLists())for(const e of n)delete this.usedCrossTileIDs[t][e]}removeStaleBuckets(t){let e=!1;for(const n in this.indexes){const i=this.indexes[n];for(const r in i)t[i[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,i[r]),delete i[r],e=!0)}return e}}class Ae{constructor(){this.layerIndexes={},this.crossTileIDs=new se,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,e,n){let i=this.layerIndexes[t.id];void 0===i&&(i=this.layerIndexes[t.id]=new ae);let r=!1;const o={};i.handleWrapJump(n);for(const n of e){const e=n.getBucket(t);e&&t.id===e.layerIds[0]&&(e.bucketInstanceId||(e.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(n.tileID,e,this.crossTileIDs)&&(r=!0),o[e.bucketInstanceId]=!0)}return i.removeStaleBuckets(o)&&(r=!0),r}pruneUnusedLayers(t){const e={};t.forEach((t=>{e[t]=!0}));for(const t in this.layerIndexes)e[t]||delete this.layerIndexes[t]}}const le=(t,n)=>e.t(t,n&&n.filter((t=>"source.canvas"!==t.identifier))),ce=e.aw();class ue extends e.E{constructor(t,n={}){super(),this._rtlPluginLoaded=()=>{for(const t in this.sourceCaches){const e=this.sourceCaches[t].getSource().type;"vector"!==e&&"geojson"!==e||this.sourceCaches[t].reload()}},this.map=t,this.dispatcher=new G(O(),t._getMapId()),this.dispatcher.registerMessageHandler("GG",((t,e)=>this.getGlyphs(t,e))),this.dispatcher.registerMessageHandler("GI",((t,e)=>this.getImages(t,e))),this.imageManager=new v,this.imageManager.setEventedParent(this),this.glyphManager=new Q(t._requestManager,n.localIdeographFontFamily),this.lineAtlas=new R(256,512),this.crossTileSymbolIndex=new Ae,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",e.ay()),at().on(rt,this._rtlPluginLoaded),this.on("data",(t=>{if("source"!==t.dataType||"metadata"!==t.sourceDataType)return;const e=this.sourceCaches[t.sourceId];if(!e)return;const n=e.getSource();if(n&&n.vectorLayerIds)for(const t in this._layers){const e=this._layers[t];e.source===n.id&&this._validateLayer(e)}}))}loadURL(t,n={},i){this.fire(new e.k("dataloading",{dataType:"style"})),n.validate="boolean"!=typeof n.validate||n.validate;const r=this.map._requestManager.transformRequest(t,"Style");this._loadStyleRequest=new AbortController;const o=this._loadStyleRequest;e.h(r,this._loadStyleRequest).then((t=>{this._loadStyleRequest=null,this._load(t.data,n,i)})).catch((t=>{this._loadStyleRequest=null,t&&!o.signal.aborted&&this.fire(new e.j(t))}))}loadJSON(t,n={},i){this.fire(new e.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,o.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,n.validate=!1!==n.validate,this._load(t,n,i)})).catch((()=>{}))}loadEmpty(){this.fire(new e.k("dataloading",{dataType:"style"})),this._load(ce,{validate:!1})}_load(t,n,i){var r;const o=n.transformStyle?n.transformStyle(i,t):t;if(!n.validate||!le(this,e.u(o))){this._loaded=!0,this.stylesheet=o;for(const t in o.sources)this.addSource(t,o.sources[t],{validate:!1});o.sprite?this._loadSprite(o.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(o.glyphs),this._createLayers(),this.light=new S(this.stylesheet.light),this.sky=new k(this.stylesheet.sky),this.map.setTerrain(null!==(r=this.stylesheet.terrain)&&void 0!==r?r:null),this.fire(new e.k("data",{dataType:"style"})),this.fire(new e.k("style.load"))}}_createLayers(){const t=e.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",t),this._order=t.map((t=>t.id)),this._layers={},this._serializedLayers=null;for(const n of t){const t=e.aA(n);t.setEventedParent(this,{layer:{id:n.id}}),this._layers[n.id]=t}}_loadSprite(t,n=!1,i=void 0){let r;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(t,n,i,r){return e._(this,void 0,void 0,(function*(){const s=y(t),a=i>1?"@2x":"",A={},l={};for(const{id:t,url:i}of s){const o=n.transformRequest(C(i,a,".json"),"SpriteJSON");A[t]=e.h(o,r);const s=n.transformRequest(C(i,a,".png"),"SpriteImage");l[t]=g.getImage(s,r)}return yield Promise.all([...Object.values(A),...Object.values(l)]),function(t,n){return e._(this,void 0,void 0,(function*(){const e={};for(const i in t){e[i]={};const r=o.getImageCanvasContext((yield n[i]).data),s=(yield t[i]).data;for(const t in s){const{width:n,height:o,x:a,y:A,sdf:l,pixelRatio:c,stretchX:u,stretchY:h,content:g,textFitWidth:d,textFitHeight:p}=s[t];e[i][t]={data:null,pixelRatio:c,sdf:l,stretchX:u,stretchY:h,content:g,textFitWidth:d,textFitHeight:p,spriteData:{width:n,height:o,x:a,y:A,context:r}}}}return e}))}(A,l)}))}(t,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((t=>{if(this._spriteRequest=null,t)for(const e in t){this._spritesImagesIds[e]=[];const i=this._spritesImagesIds[e]?this._spritesImagesIds[e].filter((e=>!(e in t))):[];for(const t of i)this.imageManager.removeImage(t),this._changedImages[t]=!0;for(const i in t[e]){const r="default"===e?i:`${e}:${i}`;this._spritesImagesIds[e].push(r),r in this.imageManager.images?this.imageManager.updateImage(r,t[e][i],!1):this.imageManager.addImage(r,t[e][i]),n&&(this._changedImages[r]=!0)}}})).catch((t=>{this._spriteRequest=null,r=t,this.fire(new e.j(r))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),n&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new e.k("data",{dataType:"style"})),i&&i(r)}))}_unloadSprite(){for(const t of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(t),this._changedImages[t]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new e.k("data",{dataType:"style"}))}_validateLayer(t){const n=this.sourceCaches[t.source];if(!n)return;const i=t.sourceLayer;if(!i)return;const r=n.getSource();("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(i))&&this.fire(new e.j(new Error(`Source layer "${i}" does not exist on source "${r.id}" as specified by style layer "${t.id}".`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(t,n=!1){const i=this._serializedAllLayers();if(!t||0===t.length)return Object.values(n?e.aB(i):i);const r=[];for(const o of t)if(i[o]){const t=n?e.aB(i[o]):i[o];r.push(t)}return r}_serializedAllLayers(){let t=this._serializedLayers;if(t)return t;t=this._serializedLayers={};const e=Object.keys(this._layers);for(const n of e){const e=this._layers[n];"custom"!==e.type&&(t[n]=e.serialize())}return t}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;if(this.sky&&this.sky.hasTransition())return!0;for(const t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(t){if(!this._loaded)return;const n=this._changed;if(n){const e=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);(e.length||n.length)&&this._updateWorkerLayers(e,n);for(const t in this._updatedSources){const e=this._updatedSources[t];if("reload"===e)this._reloadSource(t);else{if("clear"!==e)throw new Error(`Invalid action ${e}`);this._clearSource(t)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const e in this._updatedPaintProps)this._layers[e].updateTransitions(t);this.light.updateTransitions(t),this.sky.updateTransitions(t),this._resetUpdates()}const i={};for(const t in this.sourceCaches){const e=this.sourceCaches[t];i[t]=e.used,e.used=!1}for(const e of this._order){const n=this._layers[e];n.recalculate(t,this._availableImages),!n.isHidden(t.zoom)&&n.source&&(this.sourceCaches[n.source].used=!0)}for(const t in i){const n=this.sourceCaches[t];!!i[t]!=!!n.used&&n.fire(new e.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:t}))}this.light.recalculate(t),this.sky.recalculate(t),this.z=t.zoom,n&&this.fire(new e.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(t,e){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(t,!1),removedIds:e})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(t,n={}){var i;this._checkLoaded();const r=this.serialize();if(t=n.transformStyle?n.transformStyle(r,t):t,(null===(i=n.validate)||void 0===i||i)&&le(this,e.u(t)))return!1;(t=e.aB(t)).layers=e.az(t.layers);const o=e.aC(r,t),s=this._getOperationsToPerform(o);if(s.unimplemented.length>0)throw new Error(`Unimplemented: ${s.unimplemented.join(", ")}.`);if(0===s.operations.length)return!1;for(const t of s.operations)t();return this.stylesheet=t,this._serializedLayers=null,!0}_getOperationsToPerform(t){const e=[],n=[];for(const i of t)switch(i.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":e.push((()=>this.addLayer.apply(this,i.args)));break;case"removeLayer":e.push((()=>this.removeLayer.apply(this,i.args)));break;case"setPaintProperty":e.push((()=>this.setPaintProperty.apply(this,i.args)));break;case"setLayoutProperty":e.push((()=>this.setLayoutProperty.apply(this,i.args)));break;case"setFilter":e.push((()=>this.setFilter.apply(this,i.args)));break;case"addSource":e.push((()=>this.addSource.apply(this,i.args)));break;case"removeSource":e.push((()=>this.removeSource.apply(this,i.args)));break;case"setLayerZoomRange":e.push((()=>this.setLayerZoomRange.apply(this,i.args)));break;case"setLight":e.push((()=>this.setLight.apply(this,i.args)));break;case"setGeoJSONSourceData":e.push((()=>this.setGeoJSONSourceData.apply(this,i.args)));break;case"setGlyphs":e.push((()=>this.setGlyphs.apply(this,i.args)));break;case"setSprite":e.push((()=>this.setSprite.apply(this,i.args)));break;case"setSky":e.push((()=>this.setSky.apply(this,i.args)));break;case"setTerrain":e.push((()=>this.map.setTerrain.apply(this,i.args)));break;case"setTransition":e.push((()=>{}));break;default:n.push(i.command)}return{operations:e,unimplemented:n}}addImage(t,n){if(this.getImage(t))return this.fire(new e.j(new Error(`An image named "${t}" already exists.`)));this.imageManager.addImage(t,n),this._afterImageUpdated(t)}updateImage(t,e){this.imageManager.updateImage(t,e)}getImage(t){return this.imageManager.getImage(t)}removeImage(t){if(!this.getImage(t))return this.fire(new e.j(new Error(`An image named "${t}" does not exist.`)));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new e.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,n,i={}){if(this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error(`Source "${t}" already exists.`);if(!n.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(n).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(e.u.source,`sources.${t}`,n,null,i))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);const r=this.sourceCaches[t]=new ut(t,n,this.dispatcher);r.style=this,r.setEventedParent(this,(()=>({isSourceLoaded:r.loaded(),source:r.serialize(),sourceId:t}))),r.onAdd(this.map),this._changed=!0}removeSource(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");for(const n in this._layers)if(this._layers[n].source===t)return this.fire(new e.j(new Error(`Source "${t}" cannot be removed while layer "${n}" is using it.`)));const n=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],n.fire(new e.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),n.setEventedParent(null),n.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,e){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error(`There is no source with this ID=${t}`);const n=this.sourceCaches[t].getSource();if("geojson"!==n.type)throw new Error(`geojsonSource.type is ${n.type}, which is !== 'geojson`);n.setData(e),this._changed=!0}getSource(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()}addLayer(t,n,i={}){this._checkLoaded();const r=t.id;if(this.getLayer(r))return void this.fire(new e.j(new Error(`Layer "${r}" already exists on this map.`)));let o;if("custom"===t.type){if(le(this,e.aD(t)))return;o=e.aA(t)}else{if("source"in t&&"object"==typeof t.source&&(this.addSource(r,t.source),t=e.aB(t),t=e.e(t,{source:r})),this._validate(e.u.layer,`layers.${r}`,t,{arrayIndex:-1},i))return;o=e.aA(t),this._validateLayer(o),o.setEventedParent(this,{layer:{id:r}})}const s=n?this._order.indexOf(n):this._order.length;if(n&&-1===s)this.fire(new e.j(new Error(`Cannot add layer "${r}" before non-existing layer "${n}".`)));else{if(this._order.splice(s,0,r),this._layerOrderChanged=!0,this._layers[r]=o,this._removedLayers[r]&&o.source&&"custom"!==o.type){const t=this._removedLayers[r];delete this._removedLayers[r],t.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}moveLayer(t,n){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new e.j(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===n)return;const i=this._order.indexOf(t);this._order.splice(i,1);const r=n?this._order.indexOf(n):this._order.length;n&&-1===r?this.fire(new e.j(new Error(`Cannot move layer "${t}" before non-existing layer "${n}".`))):(this._order.splice(r,0,t),this._layerOrderChanged=!0)}removeLayer(t){this._checkLoaded();const n=this._layers[t];if(!n)return void this.fire(new e.j(new Error(`Cannot remove non-existing layer "${t}".`)));n.setEventedParent(null);const i=this._order.indexOf(t);this._order.splice(i,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=n,delete this._layers[t],this._serializedLayers&&delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],n.onRemove&&n.onRemove(this.map)}getLayer(t){return this._layers[t]}getLayersOrder(){return[...this._order]}hasLayer(t){return t in this._layers}setLayerZoomRange(t,n,i){this._checkLoaded();const r=this.getLayer(t);r?r.minzoom===n&&r.maxzoom===i||(null!=n&&(r.minzoom=n),null!=i&&(r.maxzoom=i),this._updateLayer(r)):this.fire(new e.j(new Error(`Cannot set the zoom range of non-existing layer "${t}".`)))}setFilter(t,n,i={}){this._checkLoaded();const r=this.getLayer(t);if(r){if(!e.aE(r.filter,n))return null==n?(r.filter=void 0,void this._updateLayer(r)):void(this._validate(e.u.filter,`layers.${r.id}.filter`,n,null,i)||(r.filter=e.aB(n),this._updateLayer(r)))}else this.fire(new e.j(new Error(`Cannot filter non-existing layer "${t}".`)))}getFilter(t){return e.aB(this.getLayer(t).filter)}setLayoutProperty(t,n,i,r={}){this._checkLoaded();const o=this.getLayer(t);o?e.aE(o.getLayoutProperty(n),i)||(o.setLayoutProperty(n,i,r),this._updateLayer(o)):this.fire(new e.j(new Error(`Cannot style non-existing layer "${t}".`)))}getLayoutProperty(t,n){const i=this.getLayer(t);if(i)return i.getLayoutProperty(n);this.fire(new e.j(new Error(`Cannot get style of non-existing layer "${t}".`)))}setPaintProperty(t,n,i,r={}){this._checkLoaded();const o=this.getLayer(t);o?e.aE(o.getPaintProperty(n),i)||(o.setPaintProperty(n,i,r)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[t]=!0,this._serializedLayers=null):this.fire(new e.j(new Error(`Cannot style non-existing layer "${t}".`)))}getPaintProperty(t,e){return this.getLayer(t).getPaintProperty(e)}setFeatureState(t,n){this._checkLoaded();const i=t.source,r=t.sourceLayer,o=this.sourceCaches[i];if(void 0===o)return void this.fire(new e.j(new Error(`The source '${i}' does not exist in the map's style.`)));const s=o.getSource().type;"geojson"===s&&r?this.fire(new e.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==s||r?(void 0===t.id&&this.fire(new e.j(new Error("The feature id parameter must be provided."))),o.setFeatureState(r,t.id,n)):this.fire(new e.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(t,n){this._checkLoaded();const i=t.source,r=this.sourceCaches[i];if(void 0===r)return void this.fire(new e.j(new Error(`The source '${i}' does not exist in the map's style.`)));const o=r.getSource().type,s="vector"===o?t.sourceLayer:void 0;"vector"!==o||s?n&&"string"!=typeof t.id&&"number"!=typeof t.id?this.fire(new e.j(new Error("A feature id is required to remove its specific state property."))):r.removeFeatureState(s,t.id,n):this.fire(new e.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(t){this._checkLoaded();const n=t.source,i=t.sourceLayer,r=this.sourceCaches[n];if(void 0!==r)return"vector"!==r.getSource().type||i?(void 0===t.id&&this.fire(new e.j(new Error("The feature id parameter must be provided."))),r.getFeatureState(i,t.id)):void this.fire(new e.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new e.j(new Error(`The source '${n}' does not exist in the map's style.`)))}getTransition(){return e.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const t=e.aF(this.sourceCaches,(t=>t.serialize())),n=this._serializeByIds(this._order,!0),i=this.map.getTerrain()||void 0,r=this.stylesheet;return e.aG({version:r.version,name:r.name,metadata:r.metadata,light:r.light,sky:r.sky,center:r.center,zoom:r.zoom,bearing:r.bearing,pitch:r.pitch,sprite:r.sprite,glyphs:r.glyphs,transition:r.transition,sources:t,layers:n,terrain:i},(t=>void 0!==t))}_updateLayer(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(t){const e=t=>"fill-extrusion"===this._layers[t].type,n={},i=[];for(let r=this._order.length-1;r>=0;r--){const o=this._order[r];if(e(o)){n[o]=r;for(const e of t){const t=e[o];if(t)for(const e of t)i.push(e)}}}i.sort(((t,e)=>e.intersectionZ-t.intersectionZ));const r=[];for(let o=this._order.length-1;o>=0;o--){const s=this._order[o];if(e(s))for(let t=i.length-1;t>=0;t--){const e=i[t].feature;if(n[e.layer.id]<o)break;r.push(e),i.pop()}else for(const e of t){const t=e[s];if(t)for(const e of t)r.push(e.feature)}}return r}queryRenderedFeatures(t,n,i){n&&n.filter&&this._validate(e.u.filter,"queryRenderedFeatures.filter",n.filter,null,n);const r={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new e.j(new Error("parameters.layers must be an Array."))),[];for(const t of n.layers){const n=this._layers[t];if(!n)return this.fire(new e.j(new Error(`The layer '${t}' does not exist in the map's style and cannot be queried for features.`))),[];r[n.source]=!0}}const o=[];n.availableImages=this._availableImages;const s=this._serializedAllLayers();for(const e in this.sourceCaches)n.layers&&!r[e]||o.push(Y(this.sourceCaches[e],this._layers,s,t,n,i));return this.placement&&o.push(function(t,e,n,i,r,o,s){const a={},A=o.queryRenderedSymbols(i),l=[];for(const t of Object.keys(A).map(Number))l.push(s[t]);l.sort(K);for(const n of l){const i=n.featureIndex.lookupSymbolFeatures(A[n.bucketInstanceId],e,n.bucketIndex,n.sourceLayerIndex,r.filter,r.layers,r.availableImages,t);for(const t in i){const e=a[t]=a[t]||[],r=i[t];r.sort(((t,e)=>{const i=n.featureSortOrder;if(i){const n=i.indexOf(t.featureIndex);return i.indexOf(e.featureIndex)-n}return e.featureIndex-t.featureIndex}));for(const t of r)e.push(t)}}for(const e in a)a[e].forEach((i=>{const r=i.feature,o=n[t[e].source].getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=o}));return a}(this._layers,s,this.sourceCaches,t,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(t,n){n&&n.filter&&this._validate(e.u.filter,"querySourceFeatures.filter",n.filter,null,n);const i=this.sourceCaches[t];return i?function(t,e){const n=t.getRenderableIds().map((e=>t.getTileByID(e))),i=[],r={};for(let t=0;t<n.length;t++){const o=n[t],s=o.tileID.canonical.key;r[s]||(r[s]=!0,o.querySourceFeatures(i,e))}return i}(i,n):[]}getLight(){return this.light.getLight()}setLight(t,n={}){this._checkLoaded();const i=this.light.getLight();let r=!1;for(const n in t)if(!e.aE(t[n],i[n])){r=!0;break}if(!r)return;const s={now:o.now(),transition:e.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,n),this.light.updateTransitions(s)}getSky(){var t;return null===(t=this.stylesheet)||void 0===t?void 0:t.sky}setSky(t,n={}){const i=this.getSky();let r=!1;if(!t&&!i)return;if(t&&!i)r=!0;else if(!t&&i)r=!0;else for(const n in t)if(!e.aE(t[n],i[n])){r=!0;break}if(!r)return;const s={now:o.now(),transition:e.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=t,this.sky.setSky(t,n),this.sky.updateTransitions(s)}_validate(t,n,i,r,o={}){return(!o||!1!==o.validate)&&le(this,t.call(e.u,e.e({key:n,style:this.serialize(),value:i,styleSpec:e.v},r)))}_remove(t=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),at().off(rt,this._rtlPluginLoaded);for(const t in this._layers)this._layers[t].setEventedParent(null);for(const t in this.sourceCaches){const e=this.sourceCaches[t];e.setEventedParent(null),e.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),t&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(t)}_clearSource(t){this.sourceCaches[t].clearTiles()}_reloadSource(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()}_updateSources(t){for(const e in this.sourceCaches)this.sourceCaches[e].update(t,this.map.terrain)}_generateCollisionBoxes(){for(const t in this.sourceCaches)this._reloadSource(t)}_updatePlacement(t,e,n,i,r=!1){let s=!1,a=!1;const A={};for(const e of this._order){const n=this._layers[e];if("symbol"!==n.type)continue;if(!A[n.source]){const t=this.sourceCaches[n.source];A[n.source]=t.getRenderableIds(!0).map((e=>t.getTileByID(e))).sort(((t,e)=>e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)))}const i=this.crossTileSymbolIndex.addLayer(n,A[n.source],t.center.lng);s=s||i}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((r=r||this._layerOrderChanged||0===n)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.now(),t.zoom))&&(this.pauseablePlacement=new ie(t,this.map.terrain,this._order,r,e,n,i,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,A),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.now()),a=!0),s&&this.pauseablePlacement.placement.setStale()),a||s)for(const t of this._order){const e=this._layers[t];"symbol"===e.type&&this.placement.updateLayerOpacities(e,A[e.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.now())}_releaseSymbolFadeTiles(){for(const t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,n){return e._(this,void 0,void 0,(function*(){const t=yield this.imageManager.getImages(n.icons);this._updateTilesForChangedImages();const e=this.sourceCaches[n.source];return e&&e.setDependencies(n.tileID.key,n.type,n.icons),t}))}getGlyphs(t,n){return e._(this,void 0,void 0,(function*(){const t=yield this.glyphManager.getGlyphs(n.stacks),e=this.sourceCaches[n.source];return e&&e.setDependencies(n.tileID.key,n.type,[""]),t}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(t,n={}){this._checkLoaded(),t&&this._validate(e.u.glyphs,"glyphs",t,null,n)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=t,this.glyphManager.entries={},this.glyphManager.setURL(t))}addSprite(t,n,i={},r){this._checkLoaded();const o=[{id:t,url:n}],s=[...y(this.stylesheet.sprite),...o];this._validate(e.u.sprite,"sprite",s,null,i)||(this.stylesheet.sprite=s,this._loadSprite(o,!0,r))}removeSprite(t){this._checkLoaded();const n=y(this.stylesheet.sprite);if(n.find((e=>e.id===t))){if(this._spritesImagesIds[t])for(const e of this._spritesImagesIds[t])this.imageManager.removeImage(e),this._changedImages[e]=!0;n.splice(n.findIndex((e=>e.id===t)),1),this.stylesheet.sprite=n.length>0?n:void 0,delete this._spritesImagesIds[t],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new e.k("data",{dataType:"style"}))}else this.fire(new e.j(new Error(`Sprite "${t}" doesn't exists on this map.`)))}getSprite(){return y(this.stylesheet.sprite)}setSprite(t,n={},i){this._checkLoaded(),t&&this._validate(e.u.sprite,"sprite",t,null,n)||(this.stylesheet.sprite=t,t?this._loadSprite(t,!0,i):(this._unloadSprite(),i&&i(null)))}}var he=e.Y([{name:"a_pos",type:"Int16",components:2}]);const ge={prelude:de("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\n","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:de("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:de("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:de("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:de("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:de("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:de("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:de("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:de("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:de("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:de("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:de("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:de("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:de("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:de("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:de("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:de("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:de("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:de("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:de("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:de("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:de("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:de("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:de("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:de("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:de("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:de("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:de("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:de("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:de("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function de(t,e){const n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,i=e.match(/attribute ([\w]+) ([\w]+)/g),r=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),s=o?o.concat(r):r,a={};return{fragmentSource:t=t.replace(n,((t,e,n,i,r)=>(a[r]=!0,"define"===e?`\n#ifndef HAS_UNIFORM_u_${r}\nvarying ${n} ${i} ${r};\n#else\nuniform ${n} ${i} u_${r};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${r}\n    ${n} ${i} ${r} = u_${r};\n#endif\n`))),vertexSource:e=e.replace(n,((t,e,n,i,r)=>{const o="float"===i?"vec2":"vec4",s=r.match(/color/)?"color":o;return a[r]?"define"===e?`\n#ifndef HAS_UNIFORM_u_${r}\nuniform lowp float u_${r}_t;\nattribute ${n} ${o} a_${r};\nvarying ${n} ${i} ${r};\n#else\nuniform ${n} ${i} u_${r};\n#endif\n`:"vec4"===s?`\n#ifndef HAS_UNIFORM_u_${r}\n    ${r} = a_${r};\n#else\n    ${n} ${i} ${r} = u_${r};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${r}\n    ${r} = unpack_mix_${s}(a_${r}, u_${r}_t);\n#else\n    ${n} ${i} ${r} = u_${r};\n#endif\n`:"define"===e?`\n#ifndef HAS_UNIFORM_u_${r}\nuniform lowp float u_${r}_t;\nattribute ${n} ${o} a_${r};\n#else\nuniform ${n} ${i} u_${r};\n#endif\n`:"vec4"===s?`\n#ifndef HAS_UNIFORM_u_${r}\n    ${n} ${i} ${r} = a_${r};\n#else\n    ${n} ${i} ${r} = u_${r};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${r}\n    ${n} ${i} ${r} = unpack_mix_${s}(a_${r}, u_${r}_t);\n#else\n    ${n} ${i} ${r} = u_${r};\n#endif\n`})),staticAttributes:i,staticUniforms:s}}class pe{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,e,n,i,r,o,s,a,A){this.context=t;let l=this.boundPaintVertexBuffers.length!==i.length;for(let t=0;!l&&t<i.length;t++)this.boundPaintVertexBuffers[t]!==i[t]&&(l=!0);!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==n||l||this.boundIndexBuffer!==r||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==s||this.boundDynamicVertexBuffer2!==a||this.boundDynamicVertexBuffer3!==A?this.freshBind(e,n,i,r,o,s,a,A):(t.bindVertexArray.set(this.vao),s&&s.bind(),r&&r.dynamicDraw&&r.bind(),a&&a.bind(),A&&A.bind())}freshBind(t,e,n,i,r,o,s,a){const A=t.numAttributes,l=this.context,c=l.gl;this.vao&&this.destroy(),this.vao=l.createVertexArray(),l.bindVertexArray.set(this.vao),this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=i,this.boundVertexOffset=r,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=s,this.boundDynamicVertexBuffer3=a,e.enableAttributes(c,t);for(const e of n)e.enableAttributes(c,t);o&&o.enableAttributes(c,t),s&&s.enableAttributes(c,t),a&&a.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,r);for(const e of n)e.bind(),e.setVertexAttribPointers(c,t,r);o&&(o.bind(),o.setVertexAttribPointers(c,t,r)),i&&i.bind(),s&&(s.bind(),s.setVertexAttribPointers(c,t,r)),a&&(a.bind(),a.setVertexAttribPointers(c,t,r)),l.currentNumAttributes=A}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const fe=(t,n,i,r,o)=>({u_matrix:t,u_texture:0,u_ele_delta:n,u_fog_matrix:i,u_fog_color:r?r.properties.get("fog-color"):e.aM.white,u_fog_ground_blend:r?r.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:r?r.calculateFogBlendOpacity(o):0,u_horizon_color:r?r.properties.get("horizon-color"):e.aM.white,u_horizon_fog_blend:r?r.properties.get("horizon-fog-blend"):1});function me(t){const e=[];for(let n=0;n<t.length;n++){if(null===t[n])continue;const i=t[n].split(" ");e.push(i.pop())}return e}class Ie{constructor(t,n,i,r,o,s){const a=t.gl;this.program=a.createProgram();const A=me(n.staticAttributes),l=i?i.getBinderAttributes():[],c=A.concat(l),u=ge.prelude.staticUniforms?me(ge.prelude.staticUniforms):[],h=n.staticUniforms?me(n.staticUniforms):[],g=i?i.getBinderUniforms():[],d=u.concat(h).concat(g),p=[];for(const t of d)p.indexOf(t)<0&&p.push(t);const f=i?i.defines():[];o&&f.push("#define OVERDRAW_INSPECTOR;"),s&&f.push("#define TERRAIN3D;");const m=f.concat(ge.prelude.fragmentSource,n.fragmentSource).join("\n"),I=f.concat(ge.prelude.vertexSource,n.vertexSource).join("\n"),y=a.createShader(a.FRAGMENT_SHADER);if(a.isContextLost())return void(this.failedToCreate=!0);if(a.shaderSource(y,m),a.compileShader(y),!a.getShaderParameter(y,a.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${a.getShaderInfoLog(y)}`);a.attachShader(this.program,y);const C=a.createShader(a.VERTEX_SHADER);if(a.isContextLost())return void(this.failedToCreate=!0);if(a.shaderSource(C,I),a.compileShader(C),!a.getShaderParameter(C,a.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${a.getShaderInfoLog(C)}`);a.attachShader(this.program,C),this.attributes={};const E={};this.numAttributes=c.length;for(let t=0;t<this.numAttributes;t++)c[t]&&(a.bindAttribLocation(this.program,t,c[t]),this.attributes[c[t]]=t);if(a.linkProgram(this.program),!a.getProgramParameter(this.program,a.LINK_STATUS))throw new Error(`Program failed to link: ${a.getProgramInfoLog(this.program)}`);a.deleteShader(C),a.deleteShader(y);for(let t=0;t<p.length;t++){const e=p[t];if(e&&!E[e]){const t=a.getUniformLocation(this.program,e);t&&(E[e]=t)}}this.fixedUniforms=r(t,E),this.terrainUniforms=((t,n)=>({u_depth:new e.aH(t,n.u_depth),u_terrain:new e.aH(t,n.u_terrain),u_terrain_dim:new e.aI(t,n.u_terrain_dim),u_terrain_matrix:new e.aJ(t,n.u_terrain_matrix),u_terrain_unpack:new e.aK(t,n.u_terrain_unpack),u_terrain_exaggeration:new e.aI(t,n.u_terrain_exaggeration)}))(t,E),this.binderUniforms=i?i.getUniforms(t,E):[]}draw(t,e,n,i,r,o,s,a,A,l,c,u,h,g,d,p,f,m){const I=t.gl;if(this.failedToCreate)return;if(t.program.set(this.program),t.setDepthMode(n),t.setStencilMode(i),t.setColorMode(r),t.setCullFace(o),a){t.activeTexture.set(I.TEXTURE2),I.bindTexture(I.TEXTURE_2D,a.depthTexture),t.activeTexture.set(I.TEXTURE3),I.bindTexture(I.TEXTURE_2D,a.texture);for(const t in this.terrainUniforms)this.terrainUniforms[t].set(a[t])}for(const t in this.fixedUniforms)this.fixedUniforms[t].set(s[t]);d&&d.setUniforms(t,this.binderUniforms,h,{zoom:g});let y=0;switch(e){case I.LINES:y=2;break;case I.TRIANGLES:y=3;break;case I.LINE_STRIP:y=1}for(const n of u.get()){const i=n.vaos||(n.vaos={});(i[A]||(i[A]=new pe)).bind(t,this,l,d?d.getPaintVertexBuffers():[],c,n.vertexOffset,p,f,m),I.drawElements(e,n.primitiveLength*y,I.UNSIGNED_SHORT,n.primitiveOffset*y*2)}}}function ye(t,e,n){const i=1/Tt(n,1,e.transform.tileZoom),r=Math.pow(2,n.tileID.overscaledZ),o=n.tileSize*Math.pow(2,e.transform.tileZoom)/r,s=o*(n.tileID.canonical.x+n.tileID.wrap*r),a=o*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[i,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[s>>16,a>>16],u_pixel_coord_lower:[65535&s,65535&a]}}const Ce=(t,n,i,r)=>{const o=n.style.light,s=o.properties.get("position"),a=[s.x,s.y,s.z],A=function(){var t=new e.A(9);return e.A!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}();"viewport"===o.properties.get("anchor")&&function(t,e){var n=Math.sin(e),i=Math.cos(e);t[0]=i,t[1]=n,t[2]=0,t[3]=-n,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1}(A,-n.transform.angle),function(t,e,n){var i=e[0],r=e[1],o=e[2];t[0]=i*n[0]+r*n[3]+o*n[6],t[1]=i*n[1]+r*n[4]+o*n[7],t[2]=i*n[2]+r*n[5]+o*n[8]}(a,a,A);const l=o.properties.get("color");return{u_matrix:t,u_lightpos:a,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[l.r,l.g,l.b],u_vertical_gradient:+i,u_opacity:r}},Ee=(t,n,i,r,o,s,a)=>e.e(Ce(t,n,i,r),ye(s,n,a),{u_height_factor:-Math.pow(2,o.overscaledZ)/a.tileSize/8}),_e=t=>({u_matrix:t}),ve=(t,n,i,r)=>e.e(_e(t),ye(i,n,r)),Be=(t,e)=>({u_matrix:t,u_world:e}),we=(t,n,i,r,o)=>e.e(ve(t,n,i,r),{u_world:o}),be=(t,e,n,i)=>{const r=t.transform;let o,s;if("map"===i.paint.get("circle-pitch-alignment")){const t=Tt(n,1,r.zoom);o=!0,s=[t,t]}else o=!1,s=r.pixelsToGLUnits;return{u_camera_to_center_distance:r.cameraToCenterDistance,u_scale_with_map:+("map"===i.paint.get("circle-pitch-scale")),u_matrix:t.translatePosMatrix(e.posMatrix,n,i.paint.get("circle-translate"),i.paint.get("circle-translate-anchor")),u_pitch_with_map:+o,u_device_pixel_ratio:t.pixelRatio,u_extrude_scale:s}},Qe=(t,e,n)=>({u_matrix:t,u_inv_matrix:e,u_camera_to_center_distance:n.cameraToCenterDistance,u_viewport_size:[n.width,n.height]}),xe=(t,e,n=1)=>({u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:n}),De=t=>({u_matrix:t}),Se=(t,e,n,i)=>({u_matrix:t,u_extrude_scale:Tt(e,1,n),u_intensity:i});function Me(t,n){const i=Math.pow(2,n.canonical.z),r=n.canonical.y;return[new e.Z(0,r/i).toLngLat().lat,new e.Z(0,(r+1)/i).toLngLat().lat]}const ke=(t,e,n,i)=>{const r=t.transform;return{u_matrix:Le(t,e,n,i),u_ratio:1/Tt(e,1,r.zoom),u_device_pixel_ratio:t.pixelRatio,u_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}},Re=(t,n,i,r,o)=>e.e(ke(t,n,i,o),{u_image:0,u_image_height:r}),Ne=(t,e,n,i,r)=>{const o=t.transform,s=Te(e,o);return{u_matrix:Le(t,e,n,r),u_texsize:e.imageAtlasTexture.size,u_ratio:1/Tt(e,1,o.zoom),u_device_pixel_ratio:t.pixelRatio,u_image:0,u_scale:[s,i.fromScale,i.toScale],u_fade:i.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},Pe=(t,n,i,r,o,s)=>{const a=t.lineAtlas,A=Te(n,t.transform),l="round"===i.layout.get("line-cap"),c=a.getDash(r.from,l),u=a.getDash(r.to,l),h=c.width*o.fromScale,g=u.width*o.toScale;return e.e(ke(t,n,i,s),{u_patternscale_a:[A/h,-c.height/2],u_patternscale_b:[A/g,-u.height/2],u_sdfgamma:a.width/(256*Math.min(h,g)*t.pixelRatio)/2,u_image:0,u_tex_y_a:c.y,u_tex_y_b:u.y,u_mix:o.t})};function Te(t,e){return 1/Tt(t,1,e.tileZoom)}function Le(t,e,n,i){return t.translatePosMatrix(i?i.posMatrix:e.tileID.posMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}const Fe=(t,e,n,i,r)=>{return{u_matrix:t,u_tl_parent:e,u_scale_parent:n,u_buffer_scale:1,u_fade_t:i.mix,u_opacity:i.opacity*r.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:r.paint.get("raster-brightness-min"),u_brightness_high:r.paint.get("raster-brightness-max"),u_saturation_factor:(s=r.paint.get("raster-saturation"),s>0?1-1/(1.001-s):-s),u_contrast_factor:(o=r.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:Oe(r.paint.get("raster-hue-rotate"))};var o,s};function Oe(t){t*=Math.PI/180;const e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}const Ge=(t,e,n,i,r,o,s,a,A,l,c,u,h,g)=>{const d=s.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:d.cameraToCenterDistance,u_pitch:d.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:d.width/d.height,u_fade_change:s.options.fadeDuration?s.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:A,u_coord_matrix:l,u_is_text:+u,u_pitch_with_map:+i,u_is_along_line:r,u_is_variable_anchor:o,u_texsize:h,u_texture:0,u_translation:c,u_pitched_scale:g}},Ue=(t,n,i,r,o,s,a,A,l,c,u,h,g,d,p)=>{const f=a.transform;return e.e(Ge(t,n,i,r,o,s,a,A,l,c,u,h,g,p),{u_gamma_scale:r?Math.cos(f._pitch)*f.cameraToCenterDistance:1,u_device_pixel_ratio:a.pixelRatio,u_is_halo:+d})},je=(t,n,i,r,o,s,a,A,l,c,u,h,g,d)=>e.e(Ue(t,n,i,r,o,s,a,A,l,c,u,!0,h,!0,d),{u_texsize_icon:g,u_texture_icon:1}),Ye=(t,e,n)=>({u_matrix:t,u_opacity:e,u_color:n}),Ke=(t,n,i,r,o,s)=>e.e(function(t,e,n,i){const r=n.imageManager.getPattern(t.from.toString()),o=n.imageManager.getPattern(t.to.toString()),{width:s,height:a}=n.imageManager.getPixelSize(),A=Math.pow(2,i.tileID.overscaledZ),l=i.tileSize*Math.pow(2,n.transform.tileZoom)/A,c=l*(i.tileID.canonical.x+i.tileID.wrap*A),u=l*i.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:r.tl,u_pattern_br_a:r.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[s,a],u_mix:e.t,u_pattern_size_a:r.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/Tt(i,1,n.transform.tileZoom),u_pixel_coord_upper:[c>>16,u>>16],u_pixel_coord_lower:[65535&c,65535&u]}}(r,s,i,o),{u_matrix:t,u_opacity:n}),ze={fillExtrusion:(t,n)=>({u_matrix:new e.aJ(t,n.u_matrix),u_lightpos:new e.aN(t,n.u_lightpos),u_lightintensity:new e.aI(t,n.u_lightintensity),u_lightcolor:new e.aN(t,n.u_lightcolor),u_vertical_gradient:new e.aI(t,n.u_vertical_gradient),u_opacity:new e.aI(t,n.u_opacity)}),fillExtrusionPattern:(t,n)=>({u_matrix:new e.aJ(t,n.u_matrix),u_lightpos:new e.aN(t,n.u_lightpos),u_lightintensity:new e.aI(t,n.u_lightintensity),u_lightcolor:new e.aN(t,n.u_lightcolor),u_vertical_gradient:new e.aI(t,n.u_vertical_gradient),u_height_factor:new e.aI(t,n.u_height_factor),u_image:new e.aH(t,n.u_image),u_texsize:new e.aO(t,n.u_texsize),u_pixel_coord_upper:new e.aO(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.aO(t,n.u_pixel_coord_lower),u_scale:new e.aN(t,n.u_scale),u_fade:new e.aI(t,n.u_fade),u_opacity:new e.aI(t,n.u_opacity)}),fill:(t,n)=>({u_matrix:new e.aJ(t,n.u_matrix)}),fillPattern:(t,n)=>({u_matrix:new e.aJ(t,n.u_matrix),u_image:new e.aH(t,n.u_image),u_texsize:new e.aO(t,n.u_texsize),u_pixel_coord_upper:new e.aO(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.aO(t,n.u_pixel_coord_lower),u_scale:new e.aN(t,n.u_scale),u_fade:new e.aI(t,n.u_fade)}),fillOutline:(t,n)=>({u_matrix:new e.aJ(t,n.u_matrix),u_world:new e.aO(t,n.u_world)}),fillOutlinePattern:(t,n)=>({u_matrix:new e.aJ(t,n.u_matrix),u_world:new e.aO(t,n.u_world),u_image:new e.aH(t,n.u_image),u_texsize:new e.aO(t,n.u_texsize),u_pixel_coord_upper:new e.aO(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.aO(t,n.u_pixel_coord_lower),u_scale:new e.aN(t,n.u_scale),u_fade:new e.aI(t,n.u_fade)}),circle:(t,n)=>({u_camera_to_center_distance:new e.aI(t,n.u_camera_to_center_distance),u_scale_with_map:new e.aH(t,n.u_scale_with_map),u_pitch_with_map:new e.aH(t,n.u_pitch_with_map),u_extrude_scale:new e.aO(t,n.u_extrude_scale),u_device_pixel_ratio:new e.aI(t,n.u_device_pixel_ratio),u_matrix:new e.aJ(t,n.u_matrix)}),collisionBox:(t,n)=>({u_matrix:new e.aJ(t,n.u_matrix),u_pixel_extrude_scale:new e.aO(t,n.u_pixel_extrude_scale)}),collisionCircle:(t,n)=>({u_matrix:new e.aJ(t,n.u_matrix),u_inv_matrix:new e.aJ(t,n.u_inv_matrix),u_camera_to_center_distance:new e.aI(t,n.u_camera_to_center_distance),u_viewport_size:new e.aO(t,n.u_viewport_size)}),debug:(t,n)=>({u_color:new e.aL(t,n.u_color),u_matrix:new e.aJ(t,n.u_matrix),u_overlay:new e.aH(t,n.u_overlay),u_overlay_scale:new e.aI(t,n.u_overlay_scale)}),clippingMask:(t,n)=>({u_matrix:new e.aJ(t,n.u_matrix)}),heatmap:(t,n)=>({u_extrude_scale:new e.aI(t,n.u_extrude_scale),u_intensity:new e.aI(t,n.u_intensity),u_matrix:new e.aJ(t,n.u_matrix)}),heatmapTexture:(t,n)=>({u_matrix:new e.aJ(t,n.u_matrix),u_world:new e.aO(t,n.u_world),u_image:new e.aH(t,n.u_image),u_color_ramp:new e.aH(t,n.u_color_ramp),u_opacity:new e.aI(t,n.u_opacity)}),hillshade:(t,n)=>({u_matrix:new e.aJ(t,n.u_matrix),u_image:new e.aH(t,n.u_image),u_latrange:new e.aO(t,n.u_latrange),u_light:new e.aO(t,n.u_light),u_shadow:new e.aL(t,n.u_shadow),u_highlight:new e.aL(t,n.u_highlight),u_accent:new e.aL(t,n.u_accent)}),hillshadePrepare:(t,n)=>({u_matrix:new e.aJ(t,n.u_matrix),u_image:new e.aH(t,n.u_image),u_dimension:new e.aO(t,n.u_dimension),u_zoom:new e.aI(t,n.u_zoom),u_unpack:new e.aK(t,n.u_unpack)}),line:(t,n)=>({u_matrix:new e.aJ(t,n.u_matrix),u_ratio:new e.aI(t,n.u_ratio),u_device_pixel_ratio:new e.aI(t,n.u_device_pixel_ratio),u_units_to_pixels:new e.aO(t,n.u_units_to_pixels)}),lineGradient:(t,n)=>({u_matrix:new e.aJ(t,n.u_matrix),u_ratio:new e.aI(t,n.u_ratio),u_device_pixel_ratio:new e.aI(t,n.u_device_pixel_ratio),u_units_to_pixels:new e.aO(t,n.u_units_to_pixels),u_image:new e.aH(t,n.u_image),u_image_height:new e.aI(t,n.u_image_height)}),linePattern:(t,n)=>({u_matrix:new e.aJ(t,n.u_matrix),u_texsize:new e.aO(t,n.u_texsize),u_ratio:new e.aI(t,n.u_ratio),u_device_pixel_ratio:new e.aI(t,n.u_device_pixel_ratio),u_image:new e.aH(t,n.u_image),u_units_to_pixels:new e.aO(t,n.u_units_to_pixels),u_scale:new e.aN(t,n.u_scale),u_fade:new e.aI(t,n.u_fade)}),lineSDF:(t,n)=>({u_matrix:new e.aJ(t,n.u_matrix),u_ratio:new e.aI(t,n.u_ratio),u_device_pixel_ratio:new e.aI(t,n.u_device_pixel_ratio),u_units_to_pixels:new e.aO(t,n.u_units_to_pixels),u_patternscale_a:new e.aO(t,n.u_patternscale_a),u_patternscale_b:new e.aO(t,n.u_patternscale_b),u_sdfgamma:new e.aI(t,n.u_sdfgamma),u_image:new e.aH(t,n.u_image),u_tex_y_a:new e.aI(t,n.u_tex_y_a),u_tex_y_b:new e.aI(t,n.u_tex_y_b),u_mix:new e.aI(t,n.u_mix)}),raster:(t,n)=>({u_matrix:new e.aJ(t,n.u_matrix),u_tl_parent:new e.aO(t,n.u_tl_parent),u_scale_parent:new e.aI(t,n.u_scale_parent),u_buffer_scale:new e.aI(t,n.u_buffer_scale),u_fade_t:new e.aI(t,n.u_fade_t),u_opacity:new e.aI(t,n.u_opacity),u_image0:new e.aH(t,n.u_image0),u_image1:new e.aH(t,n.u_image1),u_brightness_low:new e.aI(t,n.u_brightness_low),u_brightness_high:new e.aI(t,n.u_brightness_high),u_saturation_factor:new e.aI(t,n.u_saturation_factor),u_contrast_factor:new e.aI(t,n.u_contrast_factor),u_spin_weights:new e.aN(t,n.u_spin_weights)}),symbolIcon:(t,n)=>({u_is_size_zoom_constant:new e.aH(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.aH(t,n.u_is_size_feature_constant),u_size_t:new e.aI(t,n.u_size_t),u_size:new e.aI(t,n.u_size),u_camera_to_center_distance:new e.aI(t,n.u_camera_to_center_distance),u_pitch:new e.aI(t,n.u_pitch),u_rotate_symbol:new e.aH(t,n.u_rotate_symbol),u_aspect_ratio:new e.aI(t,n.u_aspect_ratio),u_fade_change:new e.aI(t,n.u_fade_change),u_matrix:new e.aJ(t,n.u_matrix),u_label_plane_matrix:new e.aJ(t,n.u_label_plane_matrix),u_coord_matrix:new e.aJ(t,n.u_coord_matrix),u_is_text:new e.aH(t,n.u_is_text),u_pitch_with_map:new e.aH(t,n.u_pitch_with_map),u_is_along_line:new e.aH(t,n.u_is_along_line),u_is_variable_anchor:new e.aH(t,n.u_is_variable_anchor),u_texsize:new e.aO(t,n.u_texsize),u_texture:new e.aH(t,n.u_texture),u_translation:new e.aO(t,n.u_translation),u_pitched_scale:new e.aI(t,n.u_pitched_scale)}),symbolSDF:(t,n)=>({u_is_size_zoom_constant:new e.aH(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.aH(t,n.u_is_size_feature_constant),u_size_t:new e.aI(t,n.u_size_t),u_size:new e.aI(t,n.u_size),u_camera_to_center_distance:new e.aI(t,n.u_camera_to_center_distance),u_pitch:new e.aI(t,n.u_pitch),u_rotate_symbol:new e.aH(t,n.u_rotate_symbol),u_aspect_ratio:new e.aI(t,n.u_aspect_ratio),u_fade_change:new e.aI(t,n.u_fade_change),u_matrix:new e.aJ(t,n.u_matrix),u_label_plane_matrix:new e.aJ(t,n.u_label_plane_matrix),u_coord_matrix:new e.aJ(t,n.u_coord_matrix),u_is_text:new e.aH(t,n.u_is_text),u_pitch_with_map:new e.aH(t,n.u_pitch_with_map),u_is_along_line:new e.aH(t,n.u_is_along_line),u_is_variable_anchor:new e.aH(t,n.u_is_variable_anchor),u_texsize:new e.aO(t,n.u_texsize),u_texture:new e.aH(t,n.u_texture),u_gamma_scale:new e.aI(t,n.u_gamma_scale),u_device_pixel_ratio:new e.aI(t,n.u_device_pixel_ratio),u_is_halo:new e.aH(t,n.u_is_halo),u_translation:new e.aO(t,n.u_translation),u_pitched_scale:new e.aI(t,n.u_pitched_scale)}),symbolTextAndIcon:(t,n)=>({u_is_size_zoom_constant:new e.aH(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.aH(t,n.u_is_size_feature_constant),u_size_t:new e.aI(t,n.u_size_t),u_size:new e.aI(t,n.u_size),u_camera_to_center_distance:new e.aI(t,n.u_camera_to_center_distance),u_pitch:new e.aI(t,n.u_pitch),u_rotate_symbol:new e.aH(t,n.u_rotate_symbol),u_aspect_ratio:new e.aI(t,n.u_aspect_ratio),u_fade_change:new e.aI(t,n.u_fade_change),u_matrix:new e.aJ(t,n.u_matrix),u_label_plane_matrix:new e.aJ(t,n.u_label_plane_matrix),u_coord_matrix:new e.aJ(t,n.u_coord_matrix),u_is_text:new e.aH(t,n.u_is_text),u_pitch_with_map:new e.aH(t,n.u_pitch_with_map),u_is_along_line:new e.aH(t,n.u_is_along_line),u_is_variable_anchor:new e.aH(t,n.u_is_variable_anchor),u_texsize:new e.aO(t,n.u_texsize),u_texsize_icon:new e.aO(t,n.u_texsize_icon),u_texture:new e.aH(t,n.u_texture),u_texture_icon:new e.aH(t,n.u_texture_icon),u_gamma_scale:new e.aI(t,n.u_gamma_scale),u_device_pixel_ratio:new e.aI(t,n.u_device_pixel_ratio),u_is_halo:new e.aH(t,n.u_is_halo),u_translation:new e.aO(t,n.u_translation),u_pitched_scale:new e.aI(t,n.u_pitched_scale)}),background:(t,n)=>({u_matrix:new e.aJ(t,n.u_matrix),u_opacity:new e.aI(t,n.u_opacity),u_color:new e.aL(t,n.u_color)}),backgroundPattern:(t,n)=>({u_matrix:new e.aJ(t,n.u_matrix),u_opacity:new e.aI(t,n.u_opacity),u_image:new e.aH(t,n.u_image),u_pattern_tl_a:new e.aO(t,n.u_pattern_tl_a),u_pattern_br_a:new e.aO(t,n.u_pattern_br_a),u_pattern_tl_b:new e.aO(t,n.u_pattern_tl_b),u_pattern_br_b:new e.aO(t,n.u_pattern_br_b),u_texsize:new e.aO(t,n.u_texsize),u_mix:new e.aI(t,n.u_mix),u_pattern_size_a:new e.aO(t,n.u_pattern_size_a),u_pattern_size_b:new e.aO(t,n.u_pattern_size_b),u_scale_a:new e.aI(t,n.u_scale_a),u_scale_b:new e.aI(t,n.u_scale_b),u_pixel_coord_upper:new e.aO(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.aO(t,n.u_pixel_coord_lower),u_tile_units_to_pixels:new e.aI(t,n.u_tile_units_to_pixels)}),terrain:(t,n)=>({u_matrix:new e.aJ(t,n.u_matrix),u_texture:new e.aH(t,n.u_texture),u_ele_delta:new e.aI(t,n.u_ele_delta),u_fog_matrix:new e.aJ(t,n.u_fog_matrix),u_fog_color:new e.aL(t,n.u_fog_color),u_fog_ground_blend:new e.aI(t,n.u_fog_ground_blend),u_fog_ground_blend_opacity:new e.aI(t,n.u_fog_ground_blend_opacity),u_horizon_color:new e.aL(t,n.u_horizon_color),u_horizon_fog_blend:new e.aI(t,n.u_horizon_fog_blend)}),terrainDepth:(t,n)=>({u_matrix:new e.aJ(t,n.u_matrix),u_ele_delta:new e.aI(t,n.u_ele_delta)}),terrainCoords:(t,n)=>({u_matrix:new e.aJ(t,n.u_matrix),u_texture:new e.aH(t,n.u_texture),u_terrain_coords_id:new e.aI(t,n.u_terrain_coords_id),u_ele_delta:new e.aI(t,n.u_ele_delta)}),sky:(t,n)=>({u_sky_color:new e.aL(t,n.u_sky_color),u_horizon_color:new e.aL(t,n.u_horizon_color),u_horizon:new e.aI(t,n.u_horizon),u_sky_horizon_blend:new e.aI(t,n.u_sky_horizon_blend)})};class Je{constructor(t,e,n){this.context=t;const i=t.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const qe={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class He{constructor(t,e,n,i){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=i,this.context=t;const r=t.gl;this.buffer=r.createBuffer(),t.bindVertexBuffer.set(this.buffer),r.bufferData(r.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){if(t.length!==this.length)throw new Error(`Length of new data is ${t.length}, which doesn't match current length of ${this.length}`);const e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,e){for(let n=0;n<this.attributes.length;n++){const i=e.attributes[this.attributes[n].name];void 0!==i&&t.enableVertexAttribArray(i)}}setVertexAttribPointers(t,e,n){for(let i=0;i<this.attributes.length;i++){const r=this.attributes[i],o=e.attributes[r.name];void 0!==o&&t.vertexAttribPointer(o,r.components,t[qe[r.type]],!1,this.itemSize,r.offset+this.itemSize*(n||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ve=new WeakMap;function We(t){var e;if(Ve.has(t))return Ve.get(t);{const n=null===(e=t.getParameter(t.VERSION))||void 0===e?void 0:e.startsWith("WebGL 2.0");return Ve.set(t,n),n}}class Ze{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Xe extends Ze{getDefault(){return e.aM.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class $e extends Ze{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class tn extends Ze{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class en extends Ze{getDefault(){return[!0,!0,!0,!0]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class nn extends Ze{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class rn extends Ze{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class on extends Ze{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class sn extends Ze{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class an extends Ze{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}}class An extends Ze{getDefault(){return[0,1]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class ln extends Ze{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}}class cn extends Ze{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class un extends Ze{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}}class hn extends Ze{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class gn extends Ze{getDefault(){return e.aM.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class dn extends Ze{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class pn extends Ze{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}}class fn extends Ze{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class mn extends Ze{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class In extends Ze{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class yn extends Ze{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class Cn extends Ze{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class En extends Ze{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class _n extends Ze{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class vn extends Ze{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class Bn extends Ze{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class wn extends Ze{getDefault(){return null}set(t){const e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class bn extends Ze{getDefault(){return null}set(t){var e;if(t===this.current&&!this.dirty)return;const n=this.gl;We(n)?n.bindVertexArray(t):null===(e=n.getExtension("OES_vertex_array_object"))||void 0===e||e.bindVertexArrayOES(t),this.current=t,this.dirty=!1}}class Qn extends Ze{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class xn extends Ze{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class Dn extends Ze{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class Sn extends Ze{constructor(t,e){super(t),this.context=t,this.parent=e}getDefault(){return null}}class Mn extends Sn{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class kn extends Sn{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class Rn extends Sn{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class Nn{constructor(t,e,n,i,r){this.context=t,this.width=e,this.height=n;const o=t.gl,s=this.framebuffer=o.createFramebuffer();if(this.colorAttachment=new Mn(t,s),i)this.depthAttachment=r?new Rn(t,s):new kn(t,s);else if(r)throw new Error("Stencil cannot be set without depth");if(o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){const e=this.depthAttachment.get();e&&t.deleteRenderbuffer(e)}t.deleteFramebuffer(this.framebuffer)}}class Pn{constructor(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n}}Pn.Replace=[1,0],Pn.disabled=new Pn(Pn.Replace,e.aM.transparent,[!1,!1,!1,!1]),Pn.unblended=new Pn(Pn.Replace,e.aM.transparent,[!0,!0,!0,!0]),Pn.alphaBlended=new Pn([1,771],e.aM.transparent,[!0,!0,!0,!0]);class Tn{constructor(t){var e,n;if(this.gl=t,this.clearColor=new Xe(this),this.clearDepth=new $e(this),this.clearStencil=new tn(this),this.colorMask=new en(this),this.depthMask=new nn(this),this.stencilMask=new rn(this),this.stencilFunc=new on(this),this.stencilOp=new sn(this),this.stencilTest=new an(this),this.depthRange=new An(this),this.depthTest=new ln(this),this.depthFunc=new cn(this),this.blend=new un(this),this.blendFunc=new hn(this),this.blendColor=new gn(this),this.blendEquation=new dn(this),this.cullFace=new pn(this),this.cullFaceSide=new fn(this),this.frontFace=new mn(this),this.program=new In(this),this.activeTexture=new yn(this),this.viewport=new Cn(this),this.bindFramebuffer=new En(this),this.bindRenderbuffer=new _n(this),this.bindTexture=new vn(this),this.bindVertexBuffer=new Bn(this),this.bindElementBuffer=new wn(this),this.bindVertexArray=new bn(this),this.pixelStoreUnpack=new Qn(this),this.pixelStoreUnpackPremultiplyAlpha=new xn(this),this.pixelStoreUnpackFlipY=new Dn(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),We(t)){this.HALF_FLOAT=t.HALF_FLOAT;const i=t.getExtension("EXT_color_buffer_half_float");this.RGBA16F=null!==(e=t.RGBA16F)&&void 0!==e?e:null==i?void 0:i.RGBA16F_EXT,this.RGB16F=null!==(n=t.RGB16F)&&void 0!==n?n:null==i?void 0:i.RGB16F_EXT,t.getExtension("EXT_color_buffer_float")}else{t.getExtension("EXT_color_buffer_half_float"),t.getExtension("OES_texture_half_float_linear");const e=t.getExtension("OES_texture_half_float");this.HALF_FLOAT=null==e?void 0:e.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,e){return new Je(this,t,e)}createVertexBuffer(t,e,n){return new He(this,t,e,n)}createRenderbuffer(t,e,n){const i=this.gl,r=i.createRenderbuffer();return this.bindRenderbuffer.set(r),i.renderbufferStorage(i.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),r}createFramebuffer(t,e,n,i){return new Nn(this,t,e,n,i)}clear({color:t,depth:e,stencil:n}){const i=this.gl;let r=0;t&&(r|=i.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==e&&(r|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(e),this.depthMask.set(!0)),void 0!==n&&(r|=i.STENCIL_BUFFER_BIT,this.clearStencil.set(n),this.stencilMask.set(255)),i.clear(r)}setCullFace(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){e.aE(t.blendFunction,Pn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}createVertexArray(){var t;return We(this.gl)?this.gl.createVertexArray():null===(t=this.gl.getExtension("OES_vertex_array_object"))||void 0===t?void 0:t.createVertexArrayOES()}deleteVertexArray(t){var e;return We(this.gl)?this.gl.deleteVertexArray(t):null===(e=this.gl.getExtension("OES_vertex_array_object"))||void 0===e?void 0:e.deleteVertexArrayOES(t)}unbindVAO(){this.bindVertexArray.set(null)}}class Ln{constructor(t,e,n){this.func=t,this.mask=e,this.range=n}}Ln.ReadOnly=!1,Ln.ReadWrite=!0,Ln.disabled=new Ln(519,Ln.ReadOnly,[0,1]);const Fn=7680;class On{constructor(t,e,n,i,r,o){this.test=t,this.ref=e,this.mask=n,this.fail=i,this.depthFail=r,this.pass=o}}On.disabled=new On({func:519,mask:0},0,0,Fn,Fn,Fn);class Gn{constructor(t,e,n){this.enable=t,this.mode=e,this.frontFace=n}}let Un;function jn(t,n,i,r,o){const s=t.context,a=s.gl,A=t.useProgram("collisionBox"),l=[];let c=0,u=0;for(let g=0;g<r.length;g++){const d=r[g],p=n.getTile(d).getBucket(i);if(!p)continue;const f=o?p.textCollisionBox:p.iconCollisionBox,m=p.collisionCircleArray;if(m.length>0){const n=e.H();e.aQ(n,p.placementInvProjMatrix,t.transform.glCoordMatrix),e.aQ(n,n,p.placementViewportMatrix),l.push({circleArray:m,circleOffset:u,transform:d.posMatrix,invTransform:n,coord:d}),c+=m.length/4,u=c}f&&A.draw(s,a.LINES,Ln.disabled,On.disabled,t.colorModeForRenderPass(),Gn.disabled,{u_matrix:d.posMatrix,u_pixel_extrude_scale:[1/(h=t.transform).width,1/h.height]},t.style.map.terrain&&t.style.map.terrain.getTerrainData(d),i.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,null,t.transform.zoom,null,null,f.collisionVertexBuffer)}var h;if(!o||!l.length)return;const g=t.useProgram("collisionCircle"),d=new e.aR;d.resize(4*c),d._trim();let p=0;for(const t of l)for(let e=0;e<t.circleArray.length/4;e++){const n=4*e,i=t.circleArray[n+0],r=t.circleArray[n+1],o=t.circleArray[n+2],s=t.circleArray[n+3];d.emplace(p++,i,r,o,s,0),d.emplace(p++,i,r,o,s,1),d.emplace(p++,i,r,o,s,2),d.emplace(p++,i,r,o,s,3)}(!Un||Un.length<2*c)&&(Un=function(t){const n=2*t,i=new e.aT;i.resize(n),i._trim();for(let t=0;t<n;t++){const e=6*t;i.uint16[e+0]=4*t+0,i.uint16[e+1]=4*t+1,i.uint16[e+2]=4*t+2,i.uint16[e+3]=4*t+2,i.uint16[e+4]=4*t+3,i.uint16[e+5]=4*t+0}return i}(c));const f=s.createIndexBuffer(Un,!0),m=s.createVertexBuffer(d,e.aS.members,!0);for(const n of l){const r=Qe(n.transform,n.invTransform,t.transform);g.draw(s,a.TRIANGLES,Ln.disabled,On.disabled,t.colorModeForRenderPass(),Gn.disabled,r,t.style.map.terrain&&t.style.map.terrain.getTerrainData(n.coord),i.id,m,f,e.a0.simpleSegment(0,2*n.circleOffset,n.circleArray.length,n.circleArray.length/2),null,t.transform.zoom,null,null,null)}m.destroy(),f.destroy()}Gn.disabled=new Gn(!1,1029,2305),Gn.backCCW=new Gn(!0,1029,2305);const Yn=e.an(new Float32Array(16));function Kn(t,n,i,r,o,s){const{horizontalAlign:a,verticalAlign:A}=e.au(t);return new e.P((-(a-.5)*n/o+r[0])*s,(-(A-.5)*i/o+r[1])*s)}function zn(t,n,i,r,o,s){const a=n.tileAnchorPoint.add(new e.P(n.translation[0],n.translation[1]));if(n.pitchWithMap){let t=r.mult(s);return i||(t=t.rotate(-o)),yt(a.add(t),n.labelPlaneMatrix,n.getElevation).point}if(i){const e=xt(n.tileAnchorPoint.x+1,n.tileAnchorPoint.y,n).point.sub(t),i=Math.atan(e.y/e.x)+(e.x<0?Math.PI:0);return t.add(r.rotate(i))}return t.add(r)}function Jn(t,n,i,r,o,s,a,A,l,c,u,h,g,d){const p=t.text.placedSymbolArray,f=t.text.dynamicLayoutVertexArray,m=t.icon.dynamicLayoutVertexArray,I={};f.clear();for(let m=0;m<p.length;m++){const y=p.get(m),C=y.hidden||!y.crossTileID||t.allowVerticalPlacement&&!y.placedOrientation?null:r[y.crossTileID];if(C){const r=new e.P(y.anchorX,y.anchorY),p={getElevation:d,width:o.width,height:o.height,labelPlaneMatrix:s,lineVertexArray:null,pitchWithMap:i,projection:u,projectionCache:null,tileAnchorPoint:r,translation:h,unwrappedTileID:g},m=i?yt(r,a,d):xt(r.x,r.y,p),E=Ct(o.cameraToCenterDistance,m.signedDistanceFromCamera);let _=e.ai(t.textSizeData,l,y)*E/e.ap;i&&(_*=t.tilePixelRatio/A);const{width:v,height:B,anchor:w,textOffset:b,textBoxScale:Q}=C,x=Kn(w,v,B,b,Q,_),D=u.getPitchedTextCorrection(o,r.add(new e.P(h[0],h[1])),g),S=zn(m.point,p,n,x,o.angle,D),M=t.allowVerticalPlacement&&y.placedOrientation===e.ah.vertical?Math.PI/2:0;for(let t=0;t<y.numGlyphs;t++)e.aj(f,S,M);c&&y.associatedIconIndex>=0&&(I[y.associatedIconIndex]={shiftedAnchor:S,angle:M})}else Rt(y.numGlyphs,f)}if(c){m.clear();const n=t.icon.placedSymbolArray;for(let t=0;t<n.length;t++){const i=n.get(t);if(i.hidden)Rt(i.numGlyphs,m);else{const n=I[t];if(n)for(let t=0;t<i.numGlyphs;t++)e.aj(m,n.shiftedAnchor,n.angle);else Rt(i.numGlyphs,m)}}t.icon.dynamicLayoutVertexBuffer.updateData(m)}t.text.dynamicLayoutVertexBuffer.updateData(f)}function qn(t,e,n){return n.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function Hn(t,n,i,r,o,s,a,A,l,c,u,h){const g=t.context,d=g.gl,p=t.transform,f=ee(),m="map"===A,I="map"===l,y="viewport"!==A&&"point"!==i.layout.get("symbol-placement"),C=m&&!I&&!y,E=!I&&y,_=!i.layout.get("symbol-sort-key").isConstant();let v=!1;const B=t.depthModeForSublayer(0,Ln.ReadOnly),w=i._unevaluatedLayout.hasValue("text-variable-anchor")||i._unevaluatedLayout.hasValue("text-variable-anchor-offset"),b=[],Q=f.getCircleRadiusCorrection(p);for(const A of r){const r=n.getTile(A),l=r.getBucket(i);if(!l)continue;const u=o?l.text:l.icon;if(!u||!u.segments.get().length||!u.hasVisibleVertices)continue;const h=u.programConfigurations.get(i.id),g=o||l.sdfIcons,B=o?l.textSizeData:l.iconSizeData,x=I||0!==p.pitch,D=t.useProgram(qn(g,o,l),h),S=e.ag(B,p.zoom),M=t.style.map.terrain&&t.style.map.terrain.getTerrainData(A);let k,R,N,P,T=[0,0],L=null;if(o)R=r.glyphAtlasTexture,N=d.LINEAR,k=r.glyphAtlasTexture.size,l.iconsInText&&(T=r.imageAtlasTexture.size,L=r.imageAtlasTexture,P=x||t.options.rotating||t.options.zooming||"composite"===B.kind||"camera"===B.kind?d.LINEAR:d.NEAREST);else{const e=1!==i.layout.get("icon-size").constantOr(0)||l.iconsNeedLinear;R=r.imageAtlasTexture,N=g||t.options.rotating||t.options.zooming||e||x?d.LINEAR:d.NEAREST,k=r.imageAtlasTexture.size}const F=Tt(r,1,t.transform.zoom),O=E?A.posMatrix:Yn,G=mt(O,I,m,t.transform,F),U=It(O,I,m,t.transform,F),j=It(A.posMatrix,I,m,t.transform,F),Y=f.translatePosition(t.transform,r,s,a),K=w&&l.hasTextData(),z="none"!==i.layout.get("icon-text-fit")&&K&&l.hasIconData();if(y){const e=t.style.map.terrain?(e,n)=>t.style.map.terrain.getElevation(A,e,n):null,n="map"===i.layout.get("text-rotation-alignment");_t(l,A.posMatrix,t,o,G,j,I,c,n,f,A.toUnwrapped(),p.width,p.height,Y,e)}const J=A.posMatrix,q=o&&w||z,H=y||q?Yn:G,V=U,W=g&&0!==i.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let Z;Z=g?l.iconsInText?je(B.kind,S,C,I,y,q,t,J,H,V,Y,k,T,Q):Ue(B.kind,S,C,I,y,q,t,J,H,V,Y,o,k,!0,Q):Ge(B.kind,S,C,I,y,q,t,J,H,V,Y,o,k,Q);const X={program:D,buffers:u,uniformValues:Z,atlasTexture:R,atlasTextureIcon:L,atlasInterpolation:N,atlasInterpolationIcon:P,isSDF:g,hasHalo:W};if(_&&l.canOverlap){v=!0;const t=u.segments.get();for(const n of t)b.push({segments:new e.a0([n]),sortKey:n.sortKey,state:X,terrainData:M})}else b.push({segments:u.segments,sortKey:0,state:X,terrainData:M})}v&&b.sort(((t,e)=>t.sortKey-e.sortKey));for(const e of b){const n=e.state;if(g.activeTexture.set(d.TEXTURE0),n.atlasTexture.bind(n.atlasInterpolation,d.CLAMP_TO_EDGE),n.atlasTextureIcon&&(g.activeTexture.set(d.TEXTURE1),n.atlasTextureIcon&&n.atlasTextureIcon.bind(n.atlasInterpolationIcon,d.CLAMP_TO_EDGE)),n.isSDF){const r=n.uniformValues;n.hasHalo&&(r.u_is_halo=1,Vn(n.buffers,e.segments,i,t,n.program,B,u,h,r,e.terrainData)),r.u_is_halo=0}Vn(n.buffers,e.segments,i,t,n.program,B,u,h,n.uniformValues,e.terrainData)}}function Vn(t,e,n,i,r,o,s,a,A,l){const c=i.context;r.draw(c,c.gl.TRIANGLES,o,s,a,Gn.disabled,A,l,n.id,t.layoutVertexBuffer,t.indexBuffer,e,n.paint,i.transform.zoom,t.programConfigurations.get(n.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function Wn(t,e,n,i,r){if(!n||!i||!i.imageAtlas)return;const o=i.imageAtlas.patternPositions;let s=o[n.to.toString()],a=o[n.from.toString()];if(!s&&a&&(s=a),!a&&s&&(a=s),!s||!a){const t=r.getPaintProperty(e);s=o[t],a=o[t]}s&&a&&t.setConstantPatternPositions(s,a)}function Zn(t,e,n,i,r,o,s){const a=t.context.gl,A="fill-pattern",l=n.paint.get(A),c=l&&l.constantOr(1),u=n.getCrossfadeParameters();let h,g,d,p,f;s?(g=c&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",h=a.LINES):(g=c?"fillPattern":"fill",h=a.TRIANGLES);const m=l.constantOr(null);for(const l of i){const i=e.getTile(l);if(c&&!i.patternsLoaded())continue;const I=i.getBucket(n);if(!I)continue;const y=I.programConfigurations.get(n.id),C=t.useProgram(g,y),E=t.style.map.terrain&&t.style.map.terrain.getTerrainData(l);c&&(t.context.activeTexture.set(a.TEXTURE0),i.imageAtlasTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE),y.updatePaintBuffers(u)),Wn(y,A,m,i,n);const _=E?l:null,v=t.translatePosMatrix(_?_.posMatrix:l.posMatrix,i,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(s){p=I.indexBuffer2,f=I.segments2;const e=[a.drawingBufferWidth,a.drawingBufferHeight];d="fillOutlinePattern"===g&&c?we(v,t,u,i,e):Be(v,e)}else p=I.indexBuffer,f=I.segments,d=c?ve(v,t,u,i):_e(v);C.draw(t.context,h,r,t.stencilModeForClipping(l),o,Gn.disabled,d,E,n.id,I.layoutVertexBuffer,p,f,n.paint,t.transform.zoom,y)}}function Xn(t,e,n,i,r,o,s){const a=t.context,A=a.gl,l="fill-extrusion-pattern",c=n.paint.get(l),u=c.constantOr(1),h=n.getCrossfadeParameters(),g=n.paint.get("fill-extrusion-opacity"),d=c.constantOr(null);for(const c of i){const i=e.getTile(c),p=i.getBucket(n);if(!p)continue;const f=t.style.map.terrain&&t.style.map.terrain.getTerrainData(c),m=p.programConfigurations.get(n.id),I=t.useProgram(u?"fillExtrusionPattern":"fillExtrusion",m);u&&(t.context.activeTexture.set(A.TEXTURE0),i.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),m.updatePaintBuffers(h)),Wn(m,l,d,i,n);const y=t.translatePosMatrix(c.posMatrix,i,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),C=n.paint.get("fill-extrusion-vertical-gradient"),E=u?Ee(y,t,C,g,c,h,i):Ce(y,t,C,g);I.draw(a,a.gl.TRIANGLES,r,o,s,Gn.backCCW,E,f,n.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,n.paint,t.transform.zoom,m,t.style.map.terrain&&p.centroidVertexBuffer)}}function $n(t,e,n,i,r,o,s){const a=t.context,A=a.gl,l=n.fbo;if(!l)return;const c=t.useProgram("hillshade"),u=t.style.map.terrain&&t.style.map.terrain.getTerrainData(e);a.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,l.colorAttachment.get()),c.draw(a,A.TRIANGLES,r,o,s,Gn.disabled,((t,e,n,i)=>{const r=n.paint.get("hillshade-shadow-color"),o=n.paint.get("hillshade-highlight-color"),s=n.paint.get("hillshade-accent-color");let a=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(a-=t.transform.angle);const A=!t.options.moving;return{u_matrix:i?i.posMatrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped(),A),u_image:0,u_latrange:Me(0,e.tileID),u_light:[n.paint.get("hillshade-exaggeration"),a],u_shadow:r,u_highlight:o,u_accent:s}})(t,n,i,u?e:null),u,i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}function ti(t,n,i,r,o,s){const a=t.context,A=a.gl,l=n.dem;if(l&&l.data){const c=l.dim,u=l.stride,h=l.getPixels();if(a.activeTexture.set(A.TEXTURE1),a.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||t.getTileTexture(u),n.demTexture){const t=n.demTexture;t.update(h,{premultiply:!1}),t.bind(A.NEAREST,A.CLAMP_TO_EDGE)}else n.demTexture=new E(a,h,A.RGBA,{premultiply:!1}),n.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);a.activeTexture.set(A.TEXTURE0);let g=n.fbo;if(!g){const t=new E(a,{width:c,height:c,data:null},A.RGBA);t.bind(A.LINEAR,A.CLAMP_TO_EDGE),g=n.fbo=a.createFramebuffer(c,c,!0,!1),g.colorAttachment.set(t.texture)}a.bindFramebuffer.set(g.framebuffer),a.viewport.set([0,0,c,c]),t.useProgram("hillshadePrepare").draw(a,A.TRIANGLES,r,o,s,Gn.disabled,((t,n)=>{const i=n.stride,r=e.H();return e.aP(r,0,e.X,-e.X,0,0,1),e.J(r,r,[0,-e.X,0]),{u_matrix:r,u_image:1,u_dimension:[i,i],u_zoom:t.overscaledZ,u_unpack:n.getUnpackVector()}})(n.tileID,l),null,i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function ei(t,n,i,r,s,a){const A=r.paint.get("raster-fade-duration");if(!a&&A>0){const r=o.now(),a=(r-t.timeAdded)/A,l=n?(r-n.timeAdded)/A:-1,c=i.getSource(),u=s.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!n||Math.abs(n.tileID.overscaledZ-u)>Math.abs(t.tileID.overscaledZ-u),g=h&&t.refreshedUponExpiration?1:e.ac(h?a:1-l,0,1);return t.refreshedUponExpiration&&a>=1&&(t.refreshedUponExpiration=!1),n?{opacity:1,mix:1-g}:{opacity:g,mix:0}}return{opacity:1,mix:0}}const ni=new e.aM(1,0,0,1),ii=new e.aM(0,1,0,1),ri=new e.aM(0,0,1,1),oi=new e.aM(1,0,1,1),si=new e.aM(0,1,1,1);function ai(t,e,n,i){li(t,0,e+n/2,t.transform.width,n,i)}function Ai(t,e,n,i){li(t,e-n/2,0,n,t.transform.height,i)}function li(t,e,n,i,r,o){const s=t.context,a=s.gl;a.enable(a.SCISSOR_TEST),a.scissor(e*t.pixelRatio,n*t.pixelRatio,i*t.pixelRatio,r*t.pixelRatio),s.clear({color:o}),a.disable(a.SCISSOR_TEST)}function ci(t,n,i){const r=t.context,o=r.gl,s=i.posMatrix,a=t.useProgram("debug"),A=Ln.disabled,l=On.disabled,c=t.colorModeForRenderPass(),u="$debug",h=t.style.map.terrain&&t.style.map.terrain.getTerrainData(i);r.activeTexture.set(o.TEXTURE0);const g=n.getTileByID(i.key).latestRawTileData,d=Math.floor((g&&g.byteLength||0)/1024),p=n.getTile(i).tileSize,f=512/Math.min(p,512)*(i.overscaledZ/t.transform.zoom)*.5;let m=i.canonical.toString();i.overscaledZ!==i.canonical.z&&(m+=` => ${i.overscaledZ}`),function(t,e){t.initDebugOverlayCanvas();const n=t.debugOverlayCanvas,i=t.context.gl,r=t.debugOverlayCanvas.getContext("2d");r.clearRect(0,0,n.width,n.height),r.shadowColor="white",r.shadowBlur=2,r.lineWidth=1.5,r.strokeStyle="white",r.textBaseline="top",r.font="bold 36px Open Sans, sans-serif",r.fillText(e,5,5),r.strokeText(e,5,5),t.debugOverlayTexture.update(n),t.debugOverlayTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)}(t,`${m} ${d}kB`),a.draw(r,o.TRIANGLES,A,l,Pn.alphaBlended,Gn.disabled,xe(s,e.aM.transparent,f),null,u,t.debugBuffer,t.quadTriangleIndexBuffer,t.debugSegments),a.draw(r,o.LINE_STRIP,A,l,c,Gn.disabled,xe(s,e.aM.red),h,u,t.debugBuffer,t.tileBorderIndexBuffer,t.debugSegments)}function ui(t,e,n){const i=t.context,r=i.gl,o=t.colorModeForRenderPass(),s=new Ln(r.LEQUAL,Ln.ReadWrite,t.depthRangeFor3D),a=t.useProgram("terrain"),A=e.getTerrainMesh();i.bindFramebuffer.set(null),i.viewport.set([0,0,t.width,t.height]);for(const l of n){const n=t.renderToTexture.getTexture(l),c=e.getTerrainData(l.tileID);i.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,n.texture);const u=t.transform.calculatePosMatrix(l.tileID.toUnwrapped()),h=e.getMeshFrameDelta(t.transform.zoom),g=t.transform.calculateFogMatrix(l.tileID.toUnwrapped()),d=fe(u,h,g,t.style.sky,t.transform.pitch);a.draw(i,r.TRIANGLES,s,On.disabled,o,Gn.backCCW,d,c,"terrain",A.vertexBuffer,A.indexBuffer,A.segments)}}class hi{constructor(t,e,n){this.vertexBuffer=t,this.indexBuffer=e,this.segments=n}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class gi{constructor(t,n){this.context=new Tn(t),this.transform=n,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:e.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=ut.maxUnderzooming+ut.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ae}resize(t,e,n){if(this.width=Math.floor(t*n),this.height=Math.floor(e*n),this.pixelRatio=n,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const t of this.style._order)this.style._layers[t].resize()}setup(){const t=this.context,n=new e.aW;n.emplaceBack(0,0),n.emplaceBack(e.X,0),n.emplaceBack(0,e.X),n.emplaceBack(e.X,e.X),this.tileExtentBuffer=t.createVertexBuffer(n,he.members),this.tileExtentSegments=e.a0.simpleSegment(0,0,4,2);const i=new e.aW;i.emplaceBack(0,0),i.emplaceBack(e.X,0),i.emplaceBack(0,e.X),i.emplaceBack(e.X,e.X),this.debugBuffer=t.createVertexBuffer(i,he.members),this.debugSegments=e.a0.simpleSegment(0,0,4,5);const r=new e.$;r.emplaceBack(0,0,0,0),r.emplaceBack(e.X,0,e.X,0),r.emplaceBack(0,e.X,0,e.X),r.emplaceBack(e.X,e.X,e.X,e.X),this.rasterBoundsBuffer=t.createVertexBuffer(r,X.members),this.rasterBoundsSegments=e.a0.simpleSegment(0,0,4,2);const o=new e.aW;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(o,he.members),this.viewportSegments=e.a0.simpleSegment(0,0,4,2);const s=new e.aY;s.emplaceBack(0),s.emplaceBack(1),s.emplaceBack(3),s.emplaceBack(2),s.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(s);const a=new e.aX;a.emplaceBack(0,1,2),a.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(a);const A=this.context.gl;this.stencilClearMode=new On({func:A.ALWAYS,mask:0},0,255,A.ZERO,A.ZERO,A.ZERO)}clearStencil(){const t=this.context,n=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const i=e.H();e.aP(i,0,this.width,this.height,0,0,1),e.K(i,i,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,n.TRIANGLES,Ln.disabled,this.stencilClearMode,Pn.disabled,Gn.disabled,De(i),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,e){if(this.currentStencilSource===t.source||!t.isTileClipped()||!e||!e.length)return;this.currentStencilSource=t.source;const n=this.context,i=n.gl;this.nextStencilID+e.length>256&&this.clearStencil(),n.setColorMode(Pn.disabled),n.setDepthMode(Ln.disabled);const r=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const t of e){const e=this._tileClippingMaskIDs[t.key]=this.nextStencilID++,o=this.style.map.terrain&&this.style.map.terrain.getTerrainData(t);r.draw(n,i.TRIANGLES,Ln.disabled,new On({func:i.ALWAYS,mask:0},e,255,i.KEEP,i.KEEP,i.REPLACE),Pn.disabled,Gn.disabled,De(t.posMatrix),o,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,e=this.context.gl;return new On({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)}stencilModeForClipping(t){const e=this.context.gl;return new On({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)}stencilConfigForOverlap(t){const e=this.context.gl,n=t.sort(((t,e)=>e.overscaledZ-t.overscaledZ)),i=n[n.length-1].overscaledZ,r=n[0].overscaledZ-i+1;if(r>1){this.currentStencilSource=void 0,this.nextStencilID+r>256&&this.clearStencil();const t={};for(let n=0;n<r;n++)t[n+i]=new On({func:e.GEQUAL,mask:255},n+this.nextStencilID,255,e.KEEP,e.KEEP,e.REPLACE);return this.nextStencilID+=r,[t,n]}return[{[i]:On.disabled},n]}colorModeForRenderPass(){const t=this.context.gl;if(this._showOverdrawInspector){const n=1/8;return new Pn([t.CONSTANT_COLOR,t.ONE],new e.aM(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?Pn.unblended:Pn.alphaBlended}depthModeForSublayer(t,e,n){if(!this.opaquePassEnabledForLayer())return Ln.disabled;const i=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new Ln(n||this.context.gl.LEQUAL,e,[i,i])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,n){this.style=t,this.options=n,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(o.now()),this.imageManager.beginFrame();const i=this.style._order,r=this.style.sourceCaches,s={},a={},A={};for(const t in r){const e=r[t];e.used&&e.prepare(this.context),s[t]=e.getVisibleCoordinates(),a[t]=s[t].slice().reverse(),A[t]=e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let t=0;t<i.length;t++)if(this.style._layers[i[t]].is3D()){this.opaquePassCutoff=t;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const t of i){const e=this.style._layers[t];if(!e.hasOffscreenPass()||e.isHidden(this.transform.zoom))continue;const n=a[e.source];("custom"===e.type||n.length)&&this.renderLayer(this,r[e.source],e,n)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?e.aM.black:e.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(t,n){const i=t.context,r=i.gl,o=((t,e,n)=>({u_sky_color:t.properties.get("sky-color"),u_horizon_color:t.properties.get("horizon-color"),u_horizon:(e.height/2+e.getHorizon())*n,u_sky_horizon_blend:t.properties.get("sky-horizon-blend")*e.height/2*n}))(n,t.style.map.transform,t.pixelRatio),s=new Ln(r.LEQUAL,Ln.ReadWrite,[0,1]),a=On.disabled,A=t.colorModeForRenderPass(),l=t.useProgram("sky");if(!n.mesh){const t=new e.aW;t.emplaceBack(-1,-1),t.emplaceBack(1,-1),t.emplaceBack(1,1),t.emplaceBack(-1,1);const r=new e.aX;r.emplaceBack(0,1,2),r.emplaceBack(0,2,3),n.mesh=new hi(i.createVertexBuffer(t,he.members),i.createIndexBuffer(r),e.a0.simpleSegment(0,0,t.length,r.length))}l.draw(i,r.TRIANGLES,s,a,A,Gn.disabled,o,void 0,"sky",n.mesh.vertexBuffer,n.mesh.indexBuffer,n.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=i.length-1;this.currentLayer>=0;this.currentLayer--){const t=this.style._layers[i[this.currentLayer]],e=r[t.source],n=s[t.source];this._renderTileClippingMasks(t,n),this.renderLayer(this,e,t,n)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<i.length;this.currentLayer++){const t=this.style._layers[i[this.currentLayer]],e=r[t.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(t))continue;const n=("symbol"===t.type?A:a)[t.source];this._renderTileClippingMasks(t,s[t.source]),this.renderLayer(this,e,t,n)}if(this.options.showTileBoundaries){const t=function(t,e){let n=null;const i=Object.values(t._layers).flatMap((n=>n.source&&!n.isHidden(e)?[t.sourceCaches[n.source]]:[])),r=i.filter((t=>"vector"===t.getSource().type)),o=i.filter((t=>"vector"!==t.getSource().type)),s=t=>{(!n||n.getSource().maxzoom<t.getSource().maxzoom)&&(n=t)};return r.forEach((t=>s(t))),n||o.forEach((t=>s(t))),n}(this.style,this.transform.zoom);t&&function(t,e,n){for(let i=0;i<n.length;i++)ci(t,e,n[i])}(this,t,t.getVisibleCoordinates())}this.options.showPadding&&function(t){const e=t.transform.padding;ai(t,t.transform.height-(e.top||0),3,ni),ai(t,e.bottom||0,3,ii),Ai(t,e.left||0,3,ri),Ai(t,t.transform.width-(e.right||0),3,oi);const n=t.transform.centerPoint;!function(t,e,n,i){li(t,e-1,n-10,2,20,i),li(t,e-10,n-1,20,2,i)}(t,n.x,t.transform.height-n.y,si)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(t){if(!this.style||!this.style.map||!this.style.map.terrain)return;const n=this.terrainFacilitator.matrix,i=this.transform.modelViewProjectionMatrix;let r=this.terrainFacilitator.dirty;r||(r=t?!e.aZ(n,i):!e.a_(n,i)),r||(r=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),r&&(e.a$(n,i),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(t,n){const i=t.context,r=i.gl,o=Pn.unblended,s=new Ln(r.LEQUAL,Ln.ReadWrite,[0,1]),a=n.getTerrainMesh(),A=n.sourceCache.getRenderableTiles(),l=t.useProgram("terrainDepth");i.bindFramebuffer.set(n.getFramebuffer("depth").framebuffer),i.viewport.set([0,0,t.width/devicePixelRatio,t.height/devicePixelRatio]),i.clear({color:e.aM.transparent,depth:1});for(const e of A){const A=n.getTerrainData(e.tileID),c={u_matrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped()),u_ele_delta:n.getMeshFrameDelta(t.transform.zoom)};l.draw(i,r.TRIANGLES,s,On.disabled,o,Gn.backCCW,c,A,"terrain",a.vertexBuffer,a.indexBuffer,a.segments)}i.bindFramebuffer.set(null),i.viewport.set([0,0,t.width,t.height])}(this,this.style.map.terrain),function(t,n){const i=t.context,r=i.gl,o=Pn.unblended,s=new Ln(r.LEQUAL,Ln.ReadWrite,[0,1]),a=n.getTerrainMesh(),A=n.getCoordsTexture(),l=n.sourceCache.getRenderableTiles(),c=t.useProgram("terrainCoords");i.bindFramebuffer.set(n.getFramebuffer("coords").framebuffer),i.viewport.set([0,0,t.width/devicePixelRatio,t.height/devicePixelRatio]),i.clear({color:e.aM.transparent,depth:1}),n.coordsIndex=[];for(const e of l){const l=n.getTerrainData(e.tileID);i.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,A.texture);const u={u_matrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped()),u_terrain_coords_id:(255-n.coordsIndex.length)/255,u_texture:0,u_ele_delta:n.getMeshFrameDelta(t.transform.zoom)};c.draw(i,r.TRIANGLES,s,On.disabled,o,Gn.backCCW,u,l,"terrain",a.vertexBuffer,a.indexBuffer,a.segments),n.coordsIndex.push(e.tileID.key)}i.bindFramebuffer.set(null),i.viewport.set([0,0,t.width,t.height])}(this,this.style.map.terrain))}renderLayer(t,n,i,r){if(!i.isHidden(this.transform.zoom)&&("background"===i.type||"custom"===i.type||(r||[]).length))switch(this.id=i.id,i.type){case"symbol":!function(t,n,i,r,o){if("translucent"!==t.renderPass)return;const s=On.disabled,a=t.colorModeForRenderPass();(i._unevaluatedLayout.hasValue("text-variable-anchor")||i._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(t,n,i,r,o,s,a,A,l){const c=n.transform,u=ee(),h="map"===o,g="map"===s;for(const o of t){const t=r.getTile(o),s=t.getBucket(i);if(!s||!s.text||!s.text.segments.get().length)continue;const d=e.ag(s.textSizeData,c.zoom),p=Tt(t,1,n.transform.zoom),f=mt(o.posMatrix,g,h,n.transform,p),m="none"!==i.layout.get("icon-text-fit")&&s.hasIconData();if(d){const e=Math.pow(2,c.zoom-t.tileID.overscaledZ),i=n.style.map.terrain?(t,e)=>n.style.map.terrain.getElevation(o,t,e):null,r=u.translatePosition(c,t,a,A);Jn(s,h,g,l,c,f,o.posMatrix,e,d,m,u,r,o.toUnwrapped(),i)}}}(r,t,i,n,i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),o),0!==i.paint.get("icon-opacity").constantOr(1)&&Hn(t,n,i,r,!1,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),i.layout.get("icon-rotation-alignment"),i.layout.get("icon-pitch-alignment"),i.layout.get("icon-keep-upright"),s,a),0!==i.paint.get("text-opacity").constantOr(1)&&Hn(t,n,i,r,!0,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.layout.get("text-keep-upright"),s,a),n.map.showCollisionBoxes&&(jn(t,n,i,r,!0),jn(t,n,i,r,!1))}(t,n,i,r,this.style.placement.variableOffsets);break;case"circle":!function(t,n,i,r){if("translucent"!==t.renderPass)return;const o=i.paint.get("circle-opacity"),s=i.paint.get("circle-stroke-width"),a=i.paint.get("circle-stroke-opacity"),A=!i.layout.get("circle-sort-key").isConstant();if(0===o.constantOr(1)&&(0===s.constantOr(1)||0===a.constantOr(1)))return;const l=t.context,c=l.gl,u=t.depthModeForSublayer(0,Ln.ReadOnly),h=On.disabled,g=t.colorModeForRenderPass(),d=[];for(let o=0;o<r.length;o++){const s=r[o],a=n.getTile(s),l=a.getBucket(i);if(!l)continue;const c=l.programConfigurations.get(i.id),u=t.useProgram("circle",c),h=l.layoutVertexBuffer,g=l.indexBuffer,p=t.style.map.terrain&&t.style.map.terrain.getTerrainData(s),f={programConfiguration:c,program:u,layoutVertexBuffer:h,indexBuffer:g,uniformValues:be(t,s,a,i),terrainData:p};if(A){const t=l.segments.get();for(const n of t)d.push({segments:new e.a0([n]),sortKey:n.sortKey,state:f})}else d.push({segments:l.segments,sortKey:0,state:f})}A&&d.sort(((t,e)=>t.sortKey-e.sortKey));for(const e of d){const{programConfiguration:n,program:r,layoutVertexBuffer:o,indexBuffer:s,uniformValues:a,terrainData:A}=e.state;r.draw(l,c.TRIANGLES,u,h,g,Gn.disabled,a,A,i.id,o,s,e.segments,i.paint,t.transform.zoom,n)}}(t,n,i,r);break;case"heatmap":!function(t,n,i,r){if(0!==i.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){const o=t.context,s=o.gl,a=On.disabled,A=new Pn([s.ONE,s.ONE],e.aM.transparent,[!0,!0,!0,!0]);!function(t,e,n){const i=t.gl;t.activeTexture.set(i.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);let r=n.heatmapFbo;if(r)i.bindTexture(i.TEXTURE_2D,r.colorAttachment.get()),t.bindFramebuffer.set(r.framebuffer);else{const o=i.createTexture();i.bindTexture(i.TEXTURE_2D,o),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),r=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1,!1),function(t,e,n,i){var r,o;const s=t.gl,a=null!==(r=t.HALF_FLOAT)&&void 0!==r?r:s.UNSIGNED_BYTE,A=null!==(o=t.RGBA16F)&&void 0!==o?o:s.RGBA;s.texImage2D(s.TEXTURE_2D,0,A,e.width/4,e.height/4,0,s.RGBA,a,null),i.colorAttachment.set(n)}(t,e,o,r)}}(o,t,i),o.clear({color:e.aM.transparent});for(let e=0;e<r.length;e++){const l=r[e];if(n.hasRenderableParent(l))continue;const c=n.getTile(l),u=c.getBucket(i);if(!u)continue;const h=u.programConfigurations.get(i.id),g=t.useProgram("heatmap",h),{zoom:d}=t.transform;g.draw(o,s.TRIANGLES,Ln.disabled,a,A,Gn.disabled,Se(l.posMatrix,c,d,i.paint.get("heatmap-intensity")),null,i.id,u.layoutVertexBuffer,u.indexBuffer,u.segments,i.paint,t.transform.zoom,h)}o.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,n){const i=t.context,r=i.gl,o=n.heatmapFbo;if(!o)return;i.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,o.colorAttachment.get()),i.activeTexture.set(r.TEXTURE1);let s=n.colorRampTexture;s||(s=n.colorRampTexture=new E(i,n.colorRamp,r.RGBA)),s.bind(r.LINEAR,r.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(i,r.TRIANGLES,Ln.disabled,On.disabled,t.colorModeForRenderPass(),Gn.disabled,((t,n)=>{const i=e.H();e.aP(i,0,t.width,t.height,0,0,1);const r=t.context.gl;return{u_matrix:i,u_world:[r.drawingBufferWidth,r.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:n.paint.get("heatmap-opacity")}})(t,n),null,n.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,n.paint,t.transform.zoom)}(t,i))}(t,n,i,r);break;case"line":!function(t,n,i,r){if("translucent"!==t.renderPass)return;const o=i.paint.get("line-opacity"),s=i.paint.get("line-width");if(0===o.constantOr(1)||0===s.constantOr(1))return;const a=t.depthModeForSublayer(0,Ln.ReadOnly),A=t.colorModeForRenderPass(),l=i.paint.get("line-dasharray"),c=i.paint.get("line-pattern"),u=c.constantOr(1),h=i.paint.get("line-gradient"),g=i.getCrossfadeParameters(),d=u?"linePattern":l?"lineSDF":h?"lineGradient":"line",p=t.context,f=p.gl;let m=!0;for(const o of r){const r=n.getTile(o);if(u&&!r.patternsLoaded())continue;const s=r.getBucket(i);if(!s)continue;const I=s.programConfigurations.get(i.id),y=t.context.program.get(),C=t.useProgram(d,I),_=m||C.program!==y,v=t.style.map.terrain&&t.style.map.terrain.getTerrainData(o),B=c.constantOr(null);if(B&&r.imageAtlas){const t=r.imageAtlas,e=t.patternPositions[B.to.toString()],n=t.patternPositions[B.from.toString()];e&&n&&I.setConstantPatternPositions(e,n)}const w=v?o:null,b=u?Ne(t,r,i,g,w):l?Pe(t,r,i,l,g,w):h?Re(t,r,i,s.lineClipsArray.length,w):ke(t,r,i,w);if(u)p.activeTexture.set(f.TEXTURE0),r.imageAtlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE),I.updatePaintBuffers(g);else if(l&&(_||t.lineAtlas.dirty))p.activeTexture.set(f.TEXTURE0),t.lineAtlas.bind(p);else if(h){const r=s.gradients[i.id];let a=r.texture;if(i.gradientVersion!==r.version){let A=256;if(i.stepInterpolant){const i=n.getSource().maxzoom,r=o.canonical.z===i?Math.ceil(1<<t.transform.maxZoom-o.canonical.z):1;A=e.ac(e.aU(s.maxLineLength/e.X*1024*r),256,p.maxTextureSize)}r.gradient=e.aV({expression:i.gradientExpression(),evaluationKey:"lineProgress",resolution:A,image:r.gradient||void 0,clips:s.lineClipsArray}),r.texture?r.texture.update(r.gradient):r.texture=new E(p,r.gradient,f.RGBA),r.version=i.gradientVersion,a=r.texture}p.activeTexture.set(f.TEXTURE0),a.bind(i.stepInterpolant?f.NEAREST:f.LINEAR,f.CLAMP_TO_EDGE)}C.draw(p,f.TRIANGLES,a,t.stencilModeForClipping(o),A,Gn.disabled,b,v,i.id,s.layoutVertexBuffer,s.indexBuffer,s.segments,i.paint,t.transform.zoom,I,s.layoutVertexBuffer2),m=!1}}(t,n,i,r);break;case"fill":!function(t,n,i,r){const o=i.paint.get("fill-color"),s=i.paint.get("fill-opacity");if(0===s.constantOr(1))return;const a=t.colorModeForRenderPass(),A=i.paint.get("fill-pattern"),l=t.opaquePassEnabledForLayer()&&!A.constantOr(1)&&1===o.constantOr(e.aM.transparent).a&&1===s.constantOr(0)?"opaque":"translucent";if(t.renderPass===l){const e=t.depthModeForSublayer(1,"opaque"===t.renderPass?Ln.ReadWrite:Ln.ReadOnly);Zn(t,n,i,r,e,a,!1)}if("translucent"===t.renderPass&&i.paint.get("fill-antialias")){const e=t.depthModeForSublayer(i.getPaintProperty("fill-outline-color")?2:0,Ln.ReadOnly);Zn(t,n,i,r,e,a,!0)}}(t,n,i,r);break;case"fill-extrusion":!function(t,e,n,i){const r=n.paint.get("fill-extrusion-opacity");if(0!==r&&"translucent"===t.renderPass){const o=new Ln(t.context.gl.LEQUAL,Ln.ReadWrite,t.depthRangeFor3D);if(1!==r||n.paint.get("fill-extrusion-pattern").constantOr(1))Xn(t,e,n,i,o,On.disabled,Pn.disabled),Xn(t,e,n,i,o,t.stencilModeFor3D(),t.colorModeForRenderPass());else{const r=t.colorModeForRenderPass();Xn(t,e,n,i,o,On.disabled,r)}}}(t,n,i,r);break;case"hillshade":!function(t,e,n,i){if("offscreen"!==t.renderPass&&"translucent"!==t.renderPass)return;const r=t.context,o=t.depthModeForSublayer(0,Ln.ReadOnly),s=t.colorModeForRenderPass(),[a,A]="translucent"===t.renderPass?t.stencilConfigForOverlap(i):[{},i];for(const i of A){const r=e.getTile(i);void 0!==r.needsHillshadePrepare&&r.needsHillshadePrepare&&"offscreen"===t.renderPass?ti(t,r,n,o,On.disabled,s):"translucent"===t.renderPass&&$n(t,i,r,n,o,a[i.overscaledZ],s)}r.viewport.set([0,0,t.width,t.height])}(t,n,i,r);break;case"raster":!function(t,e,n,i){if("translucent"!==t.renderPass)return;if(0===n.paint.get("raster-opacity"))return;if(!i.length)return;const r=t.context,o=r.gl,s=e.getSource(),a=t.useProgram("raster"),A=t.colorModeForRenderPass(),[l,c]=s instanceof $?[{},i]:t.stencilConfigForOverlap(i),u=c[c.length-1].overscaledZ,h=!t.options.moving;for(const i of c){const c=t.depthModeForSublayer(i.overscaledZ-u,1===n.paint.get("raster-opacity")?Ln.ReadWrite:Ln.ReadOnly,o.LESS),g=e.getTile(i);g.registerFadeDuration(n.paint.get("raster-fade-duration"));const d=e.findLoadedParent(i,0),p=e.findLoadedSibling(i),f=ei(g,d||p||null,e,n,t.transform,t.style.map.terrain);let m,I;const y="nearest"===n.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;r.activeTexture.set(o.TEXTURE0),g.texture.bind(y,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),r.activeTexture.set(o.TEXTURE1),d?(d.texture.bind(y,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),m=Math.pow(2,d.tileID.overscaledZ-g.tileID.overscaledZ),I=[g.tileID.canonical.x*m%1,g.tileID.canonical.y*m%1]):g.texture.bind(y,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),g.texture.useMipmap&&r.extTextureFilterAnisotropic&&t.transform.pitch>20&&o.texParameterf(o.TEXTURE_2D,r.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,r.extTextureFilterAnisotropicMax);const C=t.style.map.terrain&&t.style.map.terrain.getTerrainData(i),E=C?i:null,_=E?E.posMatrix:t.transform.calculatePosMatrix(i.toUnwrapped(),h),v=Fe(_,I||[0,0],m||1,f,n);s instanceof $?a.draw(r,o.TRIANGLES,c,On.disabled,A,Gn.disabled,v,C,n.id,s.boundsBuffer,t.quadTriangleIndexBuffer,s.boundsSegments):a.draw(r,o.TRIANGLES,c,l[i.overscaledZ],A,Gn.disabled,v,C,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}(t,n,i,r);break;case"background":!function(t,e,n,i){const r=n.paint.get("background-color"),o=n.paint.get("background-opacity");if(0===o)return;const s=t.context,a=s.gl,A=t.transform,l=A.tileSize,c=n.paint.get("background-pattern");if(t.isPatternMissing(c))return;const u=!c&&1===r.a&&1===o&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass!==u)return;const h=On.disabled,g=t.depthModeForSublayer(0,"opaque"===u?Ln.ReadWrite:Ln.ReadOnly),d=t.colorModeForRenderPass(),p=t.useProgram(c?"backgroundPattern":"background"),f=i||A.coveringTiles({tileSize:l,terrain:t.style.map.terrain});c&&(s.activeTexture.set(a.TEXTURE0),t.imageManager.bind(t.context));const m=n.getCrossfadeParameters();for(const e of f){const A=i?e.posMatrix:t.transform.calculatePosMatrix(e.toUnwrapped()),u=c?Ke(A,o,t,c,{tileID:e,tileSize:l},m):Ye(A,o,r),f=t.style.map.terrain&&t.style.map.terrain.getTerrainData(e);p.draw(s,a.TRIANGLES,g,h,d,Gn.disabled,u,f,n.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}(t,0,i,r);break;case"custom":!function(t,e,n){const i=t.context,r=n.implementation;if("offscreen"===t.renderPass){const e=r.prerender;e&&(t.setCustomLayerDefaults(),i.setColorMode(t.colorModeForRenderPass()),e.call(r,i.gl,t.transform.customLayerMatrix()),i.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),i.setColorMode(t.colorModeForRenderPass()),i.setStencilMode(On.disabled);const e="3d"===r.renderingMode?new Ln(t.context.gl.LEQUAL,Ln.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,Ln.ReadOnly);i.setDepthMode(e),r.render(i.gl,t.transform.customLayerMatrix(),{farZ:t.transform.farZ,nearZ:t.transform.nearZ,fov:t.transform._fov,modelViewProjectionMatrix:t.transform.modelViewProjectionMatrix,projectionMatrix:t.transform.projectionMatrix}),i.setDirty(),t.setBaseState(),i.bindFramebuffer.set(null)}}(t,0,i)}}translatePosMatrix(t,n,i,r,o){if(!i[0]&&!i[1])return t;const s=o?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(s){const t=Math.sin(s),e=Math.cos(s);i=[i[0]*e-i[1]*t,i[0]*t+i[1]*e]}const a=[o?i[0]:Tt(n,i[0],this.transform.zoom),o?i[1]:Tt(n,i[1],this.transform.zoom),0],A=new Float32Array(16);return e.J(A,t,a),A}saveTileTexture(t){const e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const e=this._tileTextures[t];return e&&e.length>0?e.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const e=this.imageManager.getPattern(t.from.toString()),n=this.imageManager.getPattern(t.to.toString());return!e||!n}useProgram(t,e){this.cache=this.cache||{};const n=t+(e?e.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[n]||(this.cache[n]=new Ie(this.context,ge[t],e,ze[t],this._showOverdrawInspector,this.style.map.terrain)),this.cache[n]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new E(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:t,drawingBufferHeight:e}=this.context.gl;return this.width!==t||this.height!==e}}class di{constructor(t,e){this.points=t,this.planes=e}static fromInvProjectionMatrix(t,n,i){const r=Math.pow(2,i),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((i=>{const o=1/(i=e.af([],i,t))[3]/n*r;return e.b0(i,i,[o,o,1/i[3],o])})),s=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((t=>{const e=function(t,e){var n=e[0],i=e[1],r=e[2],o=n*n+i*i+r*r;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}([],function(t,e,n){var i=e[0],r=e[1],o=e[2],s=n[0],a=n[1],A=n[2];return t[0]=r*A-o*a,t[1]=o*s-i*A,t[2]=i*a-r*s,t}([],m([],o[t[0]],o[t[1]]),m([],o[t[2]],o[t[1]]))),n=-((i=e)[0]*(r=o[t[1]])[0]+i[1]*r[1]+i[2]*r[2]);var i,r;return e.concat(n)}));return new di(o,s)}}class pi{constructor(t,e){this.min=t,this.max=e,this.center=function(t,e){return t[0]=.5*e[0],t[1]=.5*e[1],t[2]=.5*e[2],t}([],function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}([],this.min,this.max))}quadrant(t){const e=[t%2==0,t<2],n=p(this.min),i=p(this.max);for(let t=0;t<e.length;t++)n[t]=e[t]?this.min[t]:this.center[t],i[t]=e[t]?this.center[t]:this.max[t];return i[2]=this.max[2],new pi(n,i)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}intersects(t){const n=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let i=!0;for(let r=0;r<t.planes.length;r++){const o=t.planes[r];let s=0;for(let t=0;t<n.length;t++)e.b1(o,n[t])>=0&&s++;if(0===s)return 0;s!==n.length&&(i=!1)}if(i)return 2;for(let e=0;e<3;e++){let n=Number.MAX_VALUE,i=-Number.MAX_VALUE;for(let r=0;r<t.points.length;r++){const o=t.points[r][e]-this.min[e];n=Math.min(n,o),i=Math.max(i,o)}if(i<0||n>this.max[e]-this.min[e])return 0}return 1}}class fi{constructor(t=0,e=0,n=0,i=0){if(isNaN(t)||t<0||isNaN(e)||e<0||isNaN(n)||n<0||isNaN(i)||i<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=n,this.right=i}interpolate(t,n,i){return null!=n.top&&null!=t.top&&(this.top=e.y.number(t.top,n.top,i)),null!=n.bottom&&null!=t.bottom&&(this.bottom=e.y.number(t.bottom,n.bottom,i)),null!=n.left&&null!=t.left&&(this.left=e.y.number(t.left,n.left,i)),null!=n.right&&null!=t.right&&(this.right=e.y.number(t.right,n.right,i)),this}getCenter(t,n){const i=e.ac((this.left+t-this.right)/2,0,t),r=e.ac((this.top+n-this.bottom)/2,0,n);return new e.P(i,r)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new fi(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const mi=85.051129;class Ii{constructor(t,n,i,r,o){this.tileSize=512,this._renderWorldCopies=void 0===o||!!o,this._minZoom=t||0,this._maxZoom=n||22,this._minPitch=null==i?0:i,this._maxPitch=null==r?60:r,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new fi,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const t=new Ii(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.apply(this),t}apply(t){this.tileSize=t.tileSize,this.latRange=t.latRange,this.width=t.width,this.height=t.height,this._center=t._center,this._elevation=t._elevation,this.minElevationForCurrentTile=t.minElevationForCurrentTile,this.zoom=t.zoom,this.angle=t.angle,this._fov=t._fov,this._pitch=t._pitch,this._unmodified=t._unmodified,this._edgeInsets=t._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new e.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(t){const n=-e.b2(t,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=function(){var t=new e.A(4);return e.A!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}(),function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),A=Math.cos(n);t[0]=i*A+o*a,t[1]=r*A+s*a,t[2]=i*-a+o*A,t[3]=r*-a+s*A}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const n=e.ac(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(t){const e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.tileZoom=Math.max(0,Math.floor(e)),this.scale=this.zoomScale(e),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(t){t!==this._elevation&&(this._elevation=t,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,e,n){this._unmodified=!1,this._edgeInsets.interpolate(t,e,n),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)}getVisibleUnwrappedCoordinates(t){const n=[new e.b3(0,t)];if(this._renderWorldCopies){const i=this.pointCoordinate(new e.P(0,0)),r=this.pointCoordinate(new e.P(this.width,0)),o=this.pointCoordinate(new e.P(this.width,this.height)),s=this.pointCoordinate(new e.P(0,this.height)),a=Math.floor(Math.min(i.x,r.x,o.x,s.x)),A=Math.floor(Math.max(i.x,r.x,o.x,s.x)),l=1;for(let i=a-l;i<=A+l;i++)0!==i&&n.push(new e.b3(i,t))}return n}coveringTiles(t){var n,i;let r=this.coveringZoomLevel(t);const o=r;if(void 0!==t.minzoom&&r<t.minzoom)return[];void 0!==t.maxzoom&&r>t.maxzoom&&(r=t.maxzoom);const s=this.pointCoordinate(this.getCameraPoint()),a=e.Z.fromLngLat(this.center),A=Math.pow(2,r),l=[A*s.x,A*s.y,0],c=[A*a.x,A*a.y,0],u=di.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,r);let h=t.minzoom||0;!t.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(h=r);const g=t.terrain?2/Math.min(this.tileSize,t.tileSize)*this.tileSize:3,d=t=>({aabb:new pi([t*A,0,0],[(t+1)*A,A,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}),p=[],f=[],m=r,y=t.reparseOverscaled?o:r;if(this._renderWorldCopies)for(let t=1;t<=3;t++)p.push(d(-t)),p.push(d(t));for(p.push(d(0));p.length>0;){const r=p.pop(),o=r.x,s=r.y;let a=r.fullyVisible;if(!a){const t=r.aabb.intersects(u);if(0===t)continue;a=2===t}const A=t.terrain?l:c,d=r.aabb.distanceX(A),C=r.aabb.distanceY(A),E=Math.max(Math.abs(d),Math.abs(C));if(r.zoom===m||E>g+(1<<m-r.zoom)-2&&r.zoom>=h){const t=m-r.zoom,n=l[0]-.5-(o<<t),i=l[1]-.5-(s<<t);f.push({tileID:new e.S(r.zoom===m?y:r.zoom,r.wrap,r.zoom,o,s),distanceSq:I([c[0]-.5-o,c[1]-.5-s]),tileDistanceToCamera:Math.sqrt(n*n+i*i)})}else for(let A=0;A<4;A++){const l=(o<<1)+A%2,c=(s<<1)+(A>>1),u=r.zoom+1;let h=r.aabb.quadrant(A);if(t.terrain){const o=new e.S(u,r.wrap,u,l,c),s=t.terrain.getMinMaxElevation(o),a=null!==(n=s.minElevation)&&void 0!==n?n:this.elevation,A=null!==(i=s.maxElevation)&&void 0!==i?i:this.elevation;h=new pi([h.min[0],h.min[1],a],[h.max[0],h.max[1],A])}p.push({aabb:h,zoom:u,x:l,y:c,wrap:r.wrap,fullyVisible:a})}}return f.sort(((t,e)=>t.distanceSq-e.distanceSq)).map((t=>t.tileID))}resize(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(t){const n=e.ac(t.lat,-85.051129,mi);return new e.P(e.O(t.lng)*this.worldSize,e.Q(n)*this.worldSize)}unproject(t){return new e.Z(t.x/this.worldSize,t.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(t){const n=this.elevation,i=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,r=this.pointLocation(this.centerPoint,t),o=t.getElevationForLngLatZoom(r,this.tileZoom);if(!(this.elevation-o))return;const s=i+n-o,a=Math.cos(this._pitch)*this.cameraToCenterDistance/s/e.b4(1,r.lat),A=this.scaleZoom(a/this.tileSize);this._elevation=o,this._center=r,this.zoom=A}setLocationAtPoint(t,n){const i=this.pointCoordinate(n),r=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(t),s=new e.Z(o.x-(i.x-r.x),o.y-(i.y-r.y));this.center=this.coordinateLocation(s),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(t,e){return e?this.coordinatePoint(this.locationCoordinate(t),e.getElevationForLngLatZoom(t,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(t))}pointLocation(t,e){return this.coordinateLocation(this.pointCoordinate(t,e))}locationCoordinate(t){return e.Z.fromLngLat(t)}coordinateLocation(t){return t&&t.toLngLat()}pointCoordinate(t,n){if(n){const e=n.pointCoordinate(t);if(null!=e)return e}const i=[t.x,t.y,0,1],r=[t.x,t.y,1,1];e.af(i,i,this.pixelMatrixInverse),e.af(r,r,this.pixelMatrixInverse);const o=i[3],s=r[3],a=i[1]/o,A=r[1]/s,l=i[2]/o,c=r[2]/s,u=l===c?0:(0-l)/(c-l);return new e.Z(e.y.number(i[0]/o,r[0]/s,u)/this.worldSize,e.y.number(a,A,u)/this.worldSize)}coordinatePoint(t,n=0,i=this.pixelMatrix){const r=[t.x*this.worldSize,t.y*this.worldSize,n,1];return e.af(r,r,i),new e.P(r[0]/r[3],r[1]/r[3])}getBounds(){const t=Math.max(0,this.height/2-this.getHorizon());return(new J).extend(this.pointLocation(new e.P(0,t))).extend(this.pointLocation(new e.P(this.width,t))).extend(this.pointLocation(new e.P(this.width,this.height))).extend(this.pointLocation(new e.P(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new J([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,mi])}calculateTileMatrix(t){const n=t.canonical,i=this.worldSize/this.zoomScale(n.z),r=n.x+Math.pow(2,n.z)*t.wrap,o=e.an(new Float64Array(16));return e.J(o,o,[r*i,n.y*i,0]),e.K(o,o,[i/e.X,i/e.X,1]),o}calculatePosMatrix(t,n=!1){const i=t.key,r=n?this._alignedPosMatrixCache:this._posMatrixCache;if(r[i])return r[i];const o=this.calculateTileMatrix(t);return e.L(o,n?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,o),r[i]=new Float32Array(o),r[i]}calculateFogMatrix(t){const n=t.key,i=this._fogMatrixCache;if(i[n])return i[n];const r=this.calculateTileMatrix(t);return e.L(r,this.fogMatrix,r),i[n]=new Float32Array(r),i[n]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(t,n){n=e.ac(+n,this.minZoom,this.maxZoom);const i={center:new e.N(t.lng,t.lat),zoom:n};let r=this.lngRange;if(!this._renderWorldCopies&&null===r){const t=180-1e-10;r=[-t,t]}const o=this.tileSize*this.zoomScale(i.zoom);let s=0,a=o,A=0,l=o,c=0,u=0;const{x:h,y:g}=this.size;if(this.latRange){const t=this.latRange;s=e.Q(t[1])*o,a=e.Q(t[0])*o,a-s<g&&(c=g/(a-s))}r&&(A=e.b2(e.O(r[0])*o,0,o),l=e.b2(e.O(r[1])*o,0,o),l<A&&(l+=o),l-A<h&&(u=h/(l-A)));const{x:d,y:p}=this.project.call({worldSize:o},t);let f,m;const I=Math.max(u||0,c||0);if(I){const t=new e.P(u?(l+A)/2:d,c?(a+s)/2:p);return i.center=this.unproject.call({worldSize:o},t).wrap(),i.zoom+=this.scaleZoom(I),i}if(this.latRange){const t=g/2;p-t<s&&(m=s+t),p+t>a&&(m=a-t)}if(r){const t=(A+l)/2;let n=d;this._renderWorldCopies&&(n=e.b2(d,t-o/2,t+o/2));const i=h/2;n-i<A&&(f=A+i),n+i>l&&(f=l-i)}if(void 0!==f||void 0!==m){const t=new e.P(null!=f?f:d,null!=m?m:p);i.center=this.unproject.call({worldSize:o},t).wrap()}return i}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const t=this._unmodified,{center:e,zoom:n}=this.getConstrained(this.center,this.zoom);this.center=e,this.zoom=n,this._unmodified=t,this._constraining=!1}_calcMatrices(){if(!this.height)return;const t=this.centerOffset,n=this.point.x,i=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=e.b4(1,this.center.lat)*this.worldSize;let r=e.an(new Float64Array(16));e.K(r,r,[this.width/2,-this.height/2,1]),e.J(r,r,[1,-1,0]),this.labelPlaneMatrix=r,r=e.an(new Float64Array(16)),e.K(r,r,[1,-1,1]),e.J(r,r,[-1,-1,0]),e.K(r,r,[2/this.width,2/this.height,1]),this.glCoordMatrix=r;const o=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),s=Math.min(this.elevation,this.minElevationForCurrentTile),a=o-s*this._pixelPerMeter/Math.cos(this._pitch),A=s<0?a:o,l=Math.PI/2+this._pitch,c=this._fov*(.5+t.y/this.height),u=Math.sin(c)*A/Math.sin(e.ac(Math.PI-l-c,.01,Math.PI-.01)),h=this.getHorizon(),g=2*Math.atan(h/this.cameraToCenterDistance)*(.5+t.y/(2*h)),d=Math.sin(g)*A/Math.sin(e.ac(Math.PI-l-g,.01,Math.PI-.01)),p=Math.min(u,d);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*p+A),this.nearZ=this.height/50,r=new Float64Array(16),e.b5(r,this._fov,this.width/this.height,this.nearZ,this.farZ),r[8]=2*-t.x/this.width,r[9]=2*t.y/this.height,this.projectionMatrix=e.ae(r),e.K(r,r,[1,-1,1]),e.J(r,r,[0,0,-this.cameraToCenterDistance]),e.b6(r,r,this._pitch),e.ad(r,r,this.angle),e.J(r,r,[-n,-i,0]),this.mercatorMatrix=e.K([],r,[this.worldSize,this.worldSize,this.worldSize]),e.K(r,r,[1,1,this._pixelPerMeter]),this.pixelMatrix=e.L(new Float64Array(16),this.labelPlaneMatrix,r),e.J(r,r,[0,0,-this.elevation]),this.modelViewProjectionMatrix=r,this.invModelViewProjectionMatrix=e.as([],r),this.fogMatrix=new Float64Array(16),e.b5(this.fogMatrix,this._fov,this.width/this.height,o,this.farZ),this.fogMatrix[8]=2*-t.x/this.width,this.fogMatrix[9]=2*t.y/this.height,e.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),e.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),e.b6(this.fogMatrix,this.fogMatrix,this._pitch),e.ad(this.fogMatrix,this.fogMatrix,this.angle),e.J(this.fogMatrix,this.fogMatrix,[-n,-i,0]),e.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),e.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=e.L(new Float64Array(16),this.labelPlaneMatrix,r);const f=this.width%2/2,m=this.height%2/2,I=Math.cos(this.angle),y=Math.sin(this.angle),C=n-Math.round(n)+I*f+y*m,E=i-Math.round(i)+I*m+y*f,_=new Float64Array(r);if(e.J(_,_,[C>.5?C-1:C,E>.5?E-1:E,0]),this.alignedModelViewProjectionMatrix=_,r=e.as(new Float64Array(16),this.pixelMatrix),!r)throw new Error("failed to invert matrix");this.pixelMatrixInverse=r,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const t=this.pointCoordinate(new e.P(0,0)),n=[t.x*this.worldSize,t.y*this.worldSize,0,1];return e.af(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.P(0,t))}getCameraQueryGeometry(t){const n=this.getCameraPoint();if(1===t.length)return[t[0],n];{let i=n.x,r=n.y,o=n.x,s=n.y;for(const e of t)i=Math.min(i,e.x),r=Math.min(r,e.y),o=Math.max(o,e.x),s=Math.max(s,e.y);return[new e.P(i,r),new e.P(o,r),new e.P(o,s),new e.P(i,s),new e.P(i,r)]}}lngLatToCameraDepth(t,n){const i=this.locationCoordinate(t),r=[i.x*this.worldSize,i.y*this.worldSize,n,1];return e.af(r,r,this.modelViewProjectionMatrix),r[2]/r[3]}}function yi(t,e){let n,i=!1,r=null,o=null;const s=()=>{r=null,i&&(t.apply(o,n),r=setTimeout(s,e),i=!1)};return(...t)=>(i=!0,o=this,n=t,r||s(),r)}class Ci{constructor(t){this._getCurrentHash=()=>{const t=window.location.hash.replace("#","");if(this._hashName){let e;return t.split("&").map((t=>t.split("="))).forEach((t=>{t[0]===this._hashName&&(e=t)})),(e&&e[1]||"").split("/")}return t.split("/")},this._onHashChange=()=>{const t=this._getCurrentHash();if(t.length>=3&&!t.some((t=>isNaN(t)))){const e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const t=window.location.href.replace(/(#.+)?$/,this.getHashString());window.history.replaceState(window.history.state,null,t)},this._removeHash=()=>{const t=this._getCurrentHash();if(0===t.length)return;const e=t.join("/");let n=e;n.split("&").length>0&&(n=n.split("&")[0]),this._hashName&&(n=`${this._hashName}=${e}`);let i=window.location.hash.replace(n,"");i.startsWith("#&")?i=i.slice(0,1)+i.slice(2):"#"===i&&(i="");let r=window.location.href.replace(/(#.+)?$/,i);r=r.replace("&&","&"),window.history.replaceState(window.history.state,null,r)},this._updateHash=yi(this._updateHashUnthrottled,300),this._hashName=t&&encodeURIComponent(t)}addTo(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(t){const e=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,i=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),r=Math.pow(10,i),o=Math.round(e.lng*r)/r,s=Math.round(e.lat*r)/r,a=this._map.getBearing(),A=this._map.getPitch();let l="";if(l+=t?`/${o}/${s}/${n}`:`${n}/${s}/${o}`,(a||A)&&(l+="/"+Math.round(10*a)/10),A&&(l+=`/${Math.round(A)}`),this._hashName){const t=this._hashName;let e=!1;const n=window.location.hash.slice(1).split("&").map((n=>{const i=n.split("=")[0];return i===t?(e=!0,`${i}=${l}`):n})).filter((t=>t));return e||n.push(`${t}=${l}`),`#${n.join("&")}`}return`#${l}`}}const Ei={linearity:.3,easing:e.b7(0,0,.3,1)},_i=e.e({deceleration:2500,maxSpeed:1400},Ei),vi=e.e({deceleration:20,maxSpeed:1400},Ei),Bi=e.e({deceleration:1e3,maxSpeed:360},Ei),wi=e.e({deceleration:1e3,maxSpeed:90},Ei);class bi{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,e=o.now();for(;t.length>0&&e-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const n={zoom:0,bearing:0,pitch:0,pan:new e.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:t}of this._inertiaBuffer)n.zoom+=t.zoomDelta||0,n.bearing+=t.bearingDelta||0,n.pitch+=t.pitchDelta||0,t.panDelta&&n.pan._add(t.panDelta),t.around&&(n.around=t.around),t.pinchAround&&(n.pinchAround=t.pinchAround);const i=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,r={};if(n.pan.mag()){const o=xi(n.pan.mag(),i,e.e({},_i,t||{}));r.offset=n.pan.mult(o.amount/n.pan.mag()),r.center=this._map.transform.center,Qi(r,o)}if(n.zoom){const t=xi(n.zoom,i,vi);r.zoom=this._map.transform.zoom+t.amount,Qi(r,t)}if(n.bearing){const t=xi(n.bearing,i,Bi);r.bearing=this._map.transform.bearing+e.ac(t.amount,-179,179),Qi(r,t)}if(n.pitch){const t=xi(n.pitch,i,wi);r.pitch=this._map.transform.pitch+t.amount,Qi(r,t)}if(r.zoom||r.bearing){const t=void 0===n.pinchAround?n.around:n.pinchAround;r.around=t?this._map.unproject(t):this._map.getCenter()}return this.clear(),e.e(r,{noMoveStart:!0})}}function Qi(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function xi(t,n,i){const{maxSpeed:r,linearity:o,deceleration:s}=i,a=e.ac(t*o/(n/1e3),-r,r),A=Math.abs(a)/(s*o);return{easing:i.easing,duration:1e3*A,amount:a*(A/2)}}class Di extends e.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,n,i,r={}){const o=s.mousePos(n.getCanvas(),i),a=n.unproject(o);super(t,e.e({point:o,lngLat:a,originalEvent:i},r)),this._defaultPrevented=!1,this.target=n}}class Si extends e.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,n,i){const r="touchend"===t?i.changedTouches:i.touches,o=s.touchPos(n.getCanvasContainer(),r),a=o.map((t=>n.unproject(t))),A=o.reduce(((t,e,n,i)=>t.add(e.div(i.length))),new e.P(0,0));super(t,{points:o,point:A,lngLats:a,lngLat:n.unproject(A),originalEvent:i}),this._defaultPrevented=!1}}class Mi extends e.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,e,n){super(t,{originalEvent:n}),this._defaultPrevented=!1}}class ki{constructor(t,e){this._map=t,this._clickTolerance=e.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new Mi(t.type,this._map,t))}mousedown(t,e){return this._mousedownPos=e,this._firePreventable(new Di(t.type,this._map,t))}mouseup(t){this._map.fire(new Di(t.type,this._map,t))}click(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new Di(t.type,this._map,t))}dblclick(t){return this._firePreventable(new Di(t.type,this._map,t))}mouseover(t){this._map.fire(new Di(t.type,this._map,t))}mouseout(t){this._map.fire(new Di(t.type,this._map,t))}touchstart(t){return this._firePreventable(new Si(t.type,this._map,t))}touchmove(t){this._map.fire(new Si(t.type,this._map,t))}touchend(t){this._map.fire(new Si(t.type,this._map,t))}touchcancel(t){this._map.fire(new Si(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ri{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(t){this._map.fire(new Di(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Di("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._ignoreContextMenu||this._map.fire(new Di(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ni{constructor(t){this._map=t}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(t){return this.transform.pointLocation(e.P.convert(t),this._map.terrain)}}class Pi{constructor(t,e){this._map=t,this._tr=new Ni(t),this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(s.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)}mousemoveWindow(t,e){if(!this._active)return;const n=e;if(this._lastPos.equals(n)||!this._box&&n.dist(this._startPos)<this._clickTolerance)return;const i=this._startPos;this._lastPos=n,this._box||(this._box=s.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",t));const r=Math.min(i.x,n.x),o=Math.max(i.x,n.x),a=Math.min(i.y,n.y),A=Math.max(i.y,n.y);s.setTransform(this._box,`translate(${r}px,${a}px)`),this._box.style.width=o-r+"px",this._box.style.height=A-a+"px"}mouseupWindow(t,n){if(!this._active)return;if(0!==t.button)return;const i=this._startPos,r=n;if(this.reset(),s.suppressClick(),i.x!==r.x||i.y!==r.y)return this._map.fire(new e.k("boxzoomend",{originalEvent:t})),{cameraAnimation:t=>t.fitScreenCoordinates(i,r,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",t)}keydown(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(s.remove(this._box),this._box=null),s.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,n){return this._map.fire(new e.k(t,{originalEvent:n}))}}function Ti(t,e){if(t.length!==e.length)throw new Error(`The number of touches and points are not equal - touches ${t.length}, points ${e.length}`);const n={};for(let i=0;i<t.length;i++)n[t[i].identifier]=e[i];return n}class Li{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,n,i){(this.centroid||i.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=t.timeStamp),i.length===this.numTouches&&(this.centroid=function(t){const n=new e.P(0,0);for(const e of t)n._add(e);return n.div(t.length)}(n),this.touches=Ti(i,n)))}touchmove(t,e,n){if(this.aborted||!this.centroid)return;const i=Ti(n,e);for(const t in this.touches){const e=i[t];(!e||e.dist(this.touches[t])>30)&&(this.aborted=!0)}}touchend(t,e,n){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){const t=!this.aborted&&this.centroid;if(this.reset(),t)return t}}}class Fi{constructor(t){this.singleTap=new Li(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,e,n){this.singleTap.touchstart(t,e,n)}touchmove(t,e,n){this.singleTap.touchmove(t,e,n)}touchend(t,e,n){const i=this.singleTap.touchend(t,e,n);if(i){const e=t.timeStamp-this.lastTime<500,n=!this.lastTap||this.lastTap.dist(i)<30;if(e&&n||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=i,this.count===this.numTaps)return this.reset(),i}}}class Oi{constructor(t){this._tr=new Ni(t),this._zoomIn=new Fi({numTouches:1,numTaps:2}),this._zoomOut=new Fi({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,e,n){this._zoomIn.touchstart(t,e,n),this._zoomOut.touchstart(t,e,n)}touchmove(t,e,n){this._zoomIn.touchmove(t,e,n),this._zoomOut.touchmove(t,e,n)}touchend(t,e,n){const i=this._zoomIn.touchend(t,e,n),r=this._zoomOut.touchend(t,e,n),o=this._tr;return i?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:o.zoom+1,around:o.unproject(i)},{originalEvent:t})}):r?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:o.zoom-1,around:o.unproject(r)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gi{constructor(t){this._enabled=!!t.enable,this._moveStateManager=t.moveStateManager,this._clickTolerance=t.clickTolerance||1,this._moveFunction=t.move,this._activateOnStart=!!t.activateOnStart,t.assignEvents(this),this.reset()}reset(t){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(t)}_move(...t){const e=this._moveFunction(...t);if(e.bearingDelta||e.pitchDelta||e.around||e.panDelta)return this._active=!0,e}dragStart(t,e){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(t)&&(this._moveStateManager.startMove(t),this._lastPoint=e.length?e[0]:e,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(t,e){if(!this.isEnabled())return;const n=this._lastPoint;if(!n)return;if(t.preventDefault(),!this._moveStateManager.isValidMoveEvent(t))return void this.reset(t);const i=e.length?e[0]:e;return!this._moved&&i.dist(n)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=i,this._move(n,i))}dragEnd(t){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(t)&&(this._moved&&s.suppressClick(),this.reset(t))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Ui={0:1,2:2};class ji{constructor(t){this._correctEvent=t.checkCorrectEvent}startMove(t){const e=s.mouseButton(t);this._eventButton=e}endMove(t){delete this._eventButton}isValidStartEvent(t){return this._correctEvent(t)}isValidMoveEvent(t){return!function(t,e){const n=Ui[e];return void 0===t.buttons||(t.buttons&n)!==n}(t,this._eventButton)}isValidEndEvent(t){return s.mouseButton(t)===this._eventButton}}class Yi{constructor(){this._firstTouch=void 0}_isOneFingerTouch(t){return 1===t.targetTouches.length}_isSameTouchEvent(t){return t.targetTouches[0].identifier===this._firstTouch}startMove(t){this._firstTouch=t.targetTouches[0].identifier}endMove(t){delete this._firstTouch}isValidStartEvent(t){return this._isOneFingerTouch(t)}isValidMoveEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}isValidEndEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}}const Ki=t=>{t.mousedown=t.dragStart,t.mousemoveWindow=t.dragMove,t.mouseup=t.dragEnd,t.contextmenu=t=>{t.preventDefault()}},zi=({enable:t,clickTolerance:e,bearingDegreesPerPixelMoved:n=.8})=>{const i=new ji({checkCorrectEvent:t=>0===s.mouseButton(t)&&t.ctrlKey||2===s.mouseButton(t)});return new Gi({clickTolerance:e,move:(t,e)=>({bearingDelta:(e.x-t.x)*n}),moveStateManager:i,enable:t,assignEvents:Ki})},Ji=({enable:t,clickTolerance:e,pitchDegreesPerPixelMoved:n=-.5})=>{const i=new ji({checkCorrectEvent:t=>0===s.mouseButton(t)&&t.ctrlKey||2===s.mouseButton(t)});return new Gi({clickTolerance:e,move:(t,e)=>({pitchDelta:(e.y-t.y)*n}),moveStateManager:i,enable:t,assignEvents:Ki})};class qi{constructor(t,e){this._clickTolerance=t.clickTolerance||1,this._map=e,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new e.P(0,0)}_shouldBePrevented(t){return t<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(t,e,n){return this._calculateTransform(t,e,n)}touchmove(t,e,n){if(this._active){if(!this._shouldBePrevented(n.length))return t.preventDefault(),this._calculateTransform(t,e,n);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",t)}}touchend(t,e,n){this._calculateTransform(t,e,n),this._active&&this._shouldBePrevented(n.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,n,i){i.length>0&&(this._active=!0);const r=Ti(i,n),o=new e.P(0,0),s=new e.P(0,0);let a=0;for(const t in r){const e=r[t],n=this._touches[t];n&&(o._add(e),s._add(e.sub(n)),a++,r[t]=e)}if(this._touches=r,this._shouldBePrevented(a)||!s.mag())return;const A=s.div(a);return this._sum._add(A),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(a),panDelta:A}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hi{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(t,e,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([e[0],e[1]]))}touchmove(t,e,n){if(!this._firstTwoTouches)return;t.preventDefault();const[i,r]=this._firstTwoTouches,o=Vi(n,e,i),s=Vi(n,e,r);if(!o||!s)return;const a=this._aroundCenter?null:o.add(s).div(2);return this._move([o,s],a,t)}touchend(t,e,n){if(!this._firstTwoTouches)return;const[i,r]=this._firstTwoTouches,o=Vi(n,e,i),a=Vi(n,e,r);o&&a||(this._active&&s.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Vi(t,e,n){for(let i=0;i<t.length;i++)if(t[i].identifier===n)return e[i]}function Wi(t,e){return Math.log(t/e)/Math.LN2}class Zi extends Hi{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,e){const n=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Wi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Wi(this._distance,n),pinchAround:e}}}function Xi(t,e){return 180*t.angleWith(e)/Math.PI}class $i extends Hi{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,e,n){const i=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Xi(this._vector,i),pinchAround:e}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const e=25/(Math.PI*this._minDiameter)*360,n=Xi(t,this._startVector);return Math.abs(n)<e}}function tr(t){return Math.abs(t.y)>Math.abs(t.x)}class er extends Hi{constructor(t){super(),this._currentTouchCount=0,this._map=t}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(t,e,n){super.touchstart(t,e,n),this._currentTouchCount=n.length}_start(t){this._lastPoints=t,tr(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,e,n){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const i=t[0].sub(this._lastPoints[0]),r=t[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(i,r,n.timeStamp),this._valid?(this._lastPoints=t,this._active=!0,{pitchDelta:(i.y+r.y)/2*-.5}):void 0}gestureBeginsVertically(t,e,n){if(void 0!==this._valid)return this._valid;const i=t.mag()>=2,r=e.mag()>=2;if(!i&&!r)return;if(!i||!r)return void 0===this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;const o=t.y>0==e.y>0;return tr(t)&&tr(e)&&o}}const nr={panStep:100,bearingStep:15,pitchStep:10};class ir{constructor(t){this._tr=new Ni(t);const e=nr;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let e=0,n=0,i=0,r=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),r=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),r=1);break;case 38:t.shiftKey?i=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?i=-1:(t.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(n=0,i=0),{cameraAnimation:s=>{const a=this._tr;s.easeTo({duration:300,easeId:"keyboardHandler",easing:rr,zoom:e?Math.round(a.zoom)+e*(t.shiftKey?2:1):a.zoom,bearing:a.bearing+n*this._bearingStep,pitch:a.pitch+i*this._pitchStep,offset:[-r*this._panStep,-o*this._panStep],center:a.center},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function rr(t){return t*(2-t)}const or=4.000244140625;class sr{constructor(t,e){this._onTimeout=t=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)},this._map=t,this._tr=new Ni(t),this._triggerRenderFrame=e,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around)}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(t){return!!this._map.cooperativeGestures.isEnabled()&&!(t.ctrlKey||this._map.cooperativeGestures.isBypassed(t))}wheel(t){if(!this.isEnabled())return;if(this._shouldBePrevented(t))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",t);let e=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const n=o.now(),i=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==e&&e%or==0?this._type="wheel":0!==e&&Math.abs(e)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=e,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(i*e)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,e+=this._lastValue)),t.shiftKey&&e&&(e/=4),this._type&&(this._lastWheelEvent=t,this._delta-=e,this._active||this._start(t)),t.preventDefault()}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const n=s.mousePos(this._map.getCanvas(),t),i=this._tr;this._around=n.y>i.transform.height/2-i.transform.getHorizon()?e.N.convert(this._aroundCenter?i.center:i.unproject(n)):e.N.convert(i.center),this._aroundPoint=i.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const t=this._tr.transform;if(0!==this._delta){const e="wheel"===this._type&&Math.abs(this._delta)>or?this._wheelZoomRate:this._defaultZoomRate;let n=2/(1+Math.exp(-Math.abs(this._delta*e)));this._delta<0&&0!==n&&(n=1/n);const i="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):t.scale;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(i*n))),"wheel"===this._type&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const n="number"==typeof this._targetZoom?this._targetZoom:t.zoom,i=this._startZoom,r=this._easing;let s,a=!1;const A=o.now()-this._lastWheelEventTime;if("wheel"===this._type&&i&&r&&A){const t=Math.min(A/200,1),o=r(t);s=e.y.number(i,n,o),t<1?this._frameId||(this._frameId=!0):a=!0}else s=n,a=!0;return this._active=!0,a&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!a,zoomDelta:s-t.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let n=e.b8;if(this._prevEase){const t=this._prevEase,i=(o.now()-t.start)/t.duration,r=t.easing(i+.01)-t.easing(i),s=.27/Math.sqrt(r*r+1e-4)*.01,a=Math.sqrt(.0729-s*s);n=e.b7(s,a,.25,1)}return this._prevEase={start:o.now(),duration:t,easing:n},n}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class ar{constructor(t,e){this._clickZoom=t,this._tapZoom=e}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ar{constructor(t){this._tr=new Ni(t),this.reset()}reset(){this._active=!1}dblclick(t,e){return t.preventDefault(),{cameraAnimation:n=>{n.easeTo({duration:300,zoom:this._tr.zoom+(t.shiftKey?-1:1),around:this._tr.unproject(e)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class lr{constructor(){this._tap=new Fi({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(t,e,n){if(!this._swipePoint)if(this._tapTime){const i=e[0],r=t.timeStamp-this._tapTime<500,o=this._tapPoint.dist(i)<30;r&&o?n.length>0&&(this._swipePoint=i,this._swipeTouch=n[0].identifier):this.reset()}else this._tap.touchstart(t,e,n)}touchmove(t,e,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;const i=e[0],r=i.y-this._swipePoint.y;return this._swipePoint=i,t.preventDefault(),this._active=!0,{zoomDelta:r/128}}}else this._tap.touchmove(t,e,n)}touchend(t,e,n){if(this._tapTime)this._swipePoint&&0===n.length&&this.reset();else{const i=this._tap.touchend(t,e,n);i&&(this._tapTime=t.timeStamp,this._tapPoint=i)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class cr{constructor(t,e,n){this._el=t,this._mousePan=e,this._touchPan=n}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ur{constructor(t,e,n){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=n}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class hr{constructor(t,e,n,i){this._el=t,this._touchZoom=e,this._touchRotate=n,this._tapDragZoom=i,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class gr{constructor(t,e){this._bypassKey=-1!==navigator.userAgent.indexOf("Mac")?"metaKey":"ctrlKey",this._map=t,this._options=e,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const t=this._map.getCanvasContainer();t.classList.add("maplibregl-cooperative-gestures"),this._container=s.create("div","maplibregl-cooperative-gesture-screen",t);let e=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");"metaKey"===this._bypassKey&&(e=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const n=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),i=document.createElement("div");i.className="maplibregl-desktop-message",i.textContent=e,this._container.appendChild(i);const r=document.createElement("div");r.className="maplibregl-mobile-message",r.textContent=n,this._container.appendChild(r),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(s.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(t){return t[this._bypassKey]}notifyGestureBlocked(t,n){this._enabled&&(this._map.fire(new e.k("cooperativegestureprevented",{gestureType:t,originalEvent:n})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const dr=t=>t.zoom||t.drag||t.pitch||t.rotate;class pr extends e.k{}function fr(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}class mr{constructor(t,e){this.handleWindowEvent=t=>{this.handleEvent(t,`${t.type}Window`)},this.handleEvent=(t,e)=>{if("blur"===t.type)return void this.stop(!0);this._updatingCamera=!0;const n="renderFrame"===t.type?void 0:t,i={needsRenderFrame:!1},r={},o={},a=t.touches,A=a?this._getMapTouches(a):void 0,l=A?s.touchPos(this._map.getCanvas(),A):s.mousePos(this._map.getCanvas(),t);for(const{handlerName:s,handler:a,allowed:c}of this._handlers){if(!a.isEnabled())continue;let u;this._blockedByActive(o,c,s)?a.reset():a[e||t.type]&&(u=a[e||t.type](t,l,A),this.mergeHandlerResult(i,r,u,s,n),u&&u.needsRenderFrame&&this._triggerRenderFrame()),(u||a.isActive())&&(o[s]=a)}const c={};for(const t in this._previousActiveHandlers)o[t]||(c[t]=n);this._previousActiveHandlers=o,(Object.keys(c).length||fr(i))&&(this._changes.push([i,r,c]),this._triggerRenderFrame()),(Object.keys(o).length||fr(i))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:u}=i;u&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],u(this._map))},this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new bi(t),this._bearingSnap=e.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(e);const n=this._el;this._listeners=[[n,"touchstart",{passive:!0}],[n,"touchmove",{passive:!1}],[n,"touchend",void 0],[n,"touchcancel",void 0],[n,"mousedown",void 0],[n,"mousemove",void 0],[n,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[n,"mouseover",void 0],[n,"mouseout",void 0],[n,"dblclick",void 0],[n,"click",void 0],[n,"keydown",{capture:!1}],[n,"keyup",void 0],[n,"wheel",{passive:!1}],[n,"contextmenu",void 0],[window,"blur",void 0]];for(const[t,e,n]of this._listeners)s.addEventListener(t,e,t===document?this.handleWindowEvent:this.handleEvent,n)}destroy(){for(const[t,e,n]of this._listeners)s.removeEventListener(t,e,t===document?this.handleWindowEvent:this.handleEvent,n)}_addDefaultHandlers(t){const e=this._map,n=e.getCanvasContainer();this._add("mapEvent",new ki(e,t));const i=e.boxZoom=new Pi(e,t);this._add("boxZoom",i),t.interactive&&t.boxZoom&&i.enable();const r=e.cooperativeGestures=new gr(e,t.cooperativeGestures);this._add("cooperativeGestures",r),t.cooperativeGestures&&r.enable();const o=new Oi(e),a=new Ar(e);e.doubleClickZoom=new ar(a,o),this._add("tapZoom",o),this._add("clickZoom",a),t.interactive&&t.doubleClickZoom&&e.doubleClickZoom.enable();const A=new lr;this._add("tapDragZoom",A);const l=e.touchPitch=new er(e);this._add("touchPitch",l),t.interactive&&t.touchPitch&&e.touchPitch.enable(t.touchPitch);const c=zi(t),u=Ji(t);e.dragRotate=new ur(t,c,u),this._add("mouseRotate",c,["mousePitch"]),this._add("mousePitch",u,["mouseRotate"]),t.interactive&&t.dragRotate&&e.dragRotate.enable();const h=(({enable:t,clickTolerance:e})=>{const n=new ji({checkCorrectEvent:t=>0===s.mouseButton(t)&&!t.ctrlKey});return new Gi({clickTolerance:e,move:(t,e)=>({around:e,panDelta:e.sub(t)}),activateOnStart:!0,moveStateManager:n,enable:t,assignEvents:Ki})})(t),g=new qi(t,e);e.dragPan=new cr(n,h,g),this._add("mousePan",h),this._add("touchPan",g,["touchZoom","touchRotate"]),t.interactive&&t.dragPan&&e.dragPan.enable(t.dragPan);const d=new $i,p=new Zi;e.touchZoomRotate=new hr(n,p,d,A),this._add("touchRotate",d,["touchPan","touchZoom"]),this._add("touchZoom",p,["touchPan","touchRotate"]),t.interactive&&t.touchZoomRotate&&e.touchZoomRotate.enable(t.touchZoomRotate);const f=e.scrollZoom=new sr(e,(()=>this._triggerRenderFrame()));this._add("scrollZoom",f,["mousePan"]),t.interactive&&t.scrollZoom&&e.scrollZoom.enable(t.scrollZoom);const m=e.keyboard=new ir(e);this._add("keyboard",m),t.interactive&&t.keyboard&&e.keyboard.enable(),this._add("blockableMapEvent",new Ri(e))}_add(t,e,n){this._handlers.push({handlerName:t,handler:e,allowed:n}),this._handlersById[t]=e}stop(t){if(!this._updatingCamera){for(const{handler:t}of this._handlers)t.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(dr(this._eventsInProgress))||this.isZooming()}_blockedByActive(t,e,n){for(const i in t)if(i!==n&&(!e||e.indexOf(i)<0))return!0;return!1}_getMapTouches(t){const e=[];for(const n of t)this._el.contains(n.target)&&e.push(n);return e}mergeHandlerResult(t,n,i,r,o){if(!i)return;e.e(t,i);const s={handlerName:r,originalEvent:i.originalEvent||o};void 0!==i.zoomDelta&&(n.zoom=s),void 0!==i.panDelta&&(n.drag=s),void 0!==i.pitchDelta&&(n.pitch=s),void 0!==i.bearingDelta&&(n.rotate=s)}_applyChanges(){const t={},n={},i={};for(const[r,o,s]of this._changes)r.panDelta&&(t.panDelta=(t.panDelta||new e.P(0,0))._add(r.panDelta)),r.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+r.zoomDelta),r.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+r.bearingDelta),r.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+r.pitchDelta),void 0!==r.around&&(t.around=r.around),void 0!==r.pinchAround&&(t.pinchAround=r.pinchAround),r.noInertia&&(t.noInertia=r.noInertia),e.e(n,o),e.e(i,s);this._updateMapTransform(t,n,i),this._changes=[]}_updateMapTransform(t,e,n){const i=this._map,r=i._getTransformForUpdate(),o=i.terrain;if(!(fr(t)||o&&this._terrainMovement))return this._fireEvents(e,n,!0);let{panDelta:s,zoomDelta:a,bearingDelta:A,pitchDelta:l,around:c,pinchAround:u}=t;void 0!==u&&(c=u),i._stop(!0),c=c||i.transform.centerPoint;const h=r.pointLocation(s?c.sub(s):c);A&&(r.bearing+=A),l&&(r.pitch+=l),a&&(r.zoom+=a),o?this._terrainMovement||!e.drag&&!e.zoom?e.drag&&this._terrainMovement?r.center=r.pointLocation(r.centerPoint.sub(s)):r.setLocationAtPoint(h,c):(this._terrainMovement=!0,this._map._elevationFreeze=!0,r.setLocationAtPoint(h,c)):r.setLocationAtPoint(h,c),i._applyUpdatedTransform(r),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(e,n,!0)}_fireEvents(t,n,i){const r=dr(this._eventsInProgress),s=dr(t),a={};for(const e in t){const{originalEvent:n}=t[e];this._eventsInProgress[e]||(a[`${e}start`]=n),this._eventsInProgress[e]=t[e]}!r&&s&&this._fireEvent("movestart",s.originalEvent);for(const t in a)this._fireEvent(t,a[t]);s&&this._fireEvent("move",s.originalEvent);for(const e in t){const{originalEvent:n}=t[e];this._fireEvent(e,n)}const A={};let l;for(const t in this._eventsInProgress){const{handlerName:e,originalEvent:i}=this._eventsInProgress[t];this._handlersById[e].isActive()||(delete this._eventsInProgress[t],l=n[e]||i,A[`${t}end`]=l)}for(const t in A)this._fireEvent(t,A[t]);const c=dr(this._eventsInProgress),u=(r||s)&&!c;if(u&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const t=this._map._getTransformForUpdate();t.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(t)}if(i&&u){this._updatingCamera=!0;const t=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),n=t=>0!==t&&-this._bearingSnap<t&&t<this._bearingSnap;!t||!t.essential&&o.prefersReducedMotion?(this._map.fire(new e.k("moveend",{originalEvent:l})),n(this._map.getBearing())&&this._map.resetNorth()):(n(t.bearing||this._map.getBearing())&&(t.bearing=0),t.freezeElevation=!0,this._map.easeTo(t,{originalEvent:l})),this._updatingCamera=!1}}_fireEvent(t,n){this._map.fire(new e.k(t,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((t=>{delete this._frameId,this.handleEvent(new pr("renderFrame",{timeStamp:t})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class Ir extends e.E{constructor(t,e){super(),this._renderFrameCallback=()=>{const t=Math.min((o.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=e.bearingSnap,this.on("moveend",(()=>{delete this._requestedCameraState}))}getCenter(){return new e.N(this.transform.center.lng,this.transform.center.lat)}setCenter(t,e){return this.jumpTo({center:t},e)}panBy(t,n,i){return t=e.P.convert(t).mult(-1),this.panTo(this.transform.center,e.e({offset:t},n),i)}panTo(t,n,i){return this.easeTo(e.e({center:t},n),i)}getZoom(){return this.transform.zoom}setZoom(t,e){return this.jumpTo({zoom:t},e),this}zoomTo(t,n,i){return this.easeTo(e.e({zoom:t},n),i)}zoomIn(t,e){return this.zoomTo(this.getZoom()+1,t,e),this}zoomOut(t,e){return this.zoomTo(this.getZoom()-1,t,e),this}getBearing(){return this.transform.bearing}setBearing(t,e){return this.jumpTo({bearing:t},e),this}getPadding(){return this.transform.padding}setPadding(t,e){return this.jumpTo({padding:t},e),this}rotateTo(t,n,i){return this.easeTo(e.e({bearing:t},n),i)}resetNorth(t,n){return this.rotateTo(0,e.e({duration:1e3},t),n),this}resetNorthPitch(t,n){return this.easeTo(e.e({bearing:0,pitch:0,duration:1e3},t),n),this}snapToNorth(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this}getPitch(){return this.transform.pitch}setPitch(t,e){return this.jumpTo({pitch:t},e),this}cameraForBounds(t,e){t=J.convert(t);const n=e&&e.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),n,e)}_cameraForBoxAndBearing(t,n,i,r){const o={top:0,bottom:0,right:0,left:0};if("number"==typeof(r=e.e({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},r)).padding){const t=r.padding;r.padding={top:t,bottom:t,right:t,left:t}}r.padding=e.e(o,r.padding);const s=this.transform,a=s.padding,A=new J(t,n),l=s.project(A.getNorthWest()),c=s.project(A.getNorthEast()),u=s.project(A.getSouthEast()),h=s.project(A.getSouthWest()),g=e.b9(-i),d=l.rotate(g),p=c.rotate(g),f=u.rotate(g),m=h.rotate(g),I=new e.P(Math.max(d.x,p.x,m.x,f.x),Math.max(d.y,p.y,m.y,f.y)),y=new e.P(Math.min(d.x,p.x,m.x,f.x),Math.min(d.y,p.y,m.y,f.y)),C=I.sub(y),E=(s.width-(a.left+a.right+r.padding.left+r.padding.right))/C.x,_=(s.height-(a.top+a.bottom+r.padding.top+r.padding.bottom))/C.y;if(_<0||E<0)return void e.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const v=Math.min(s.scaleZoom(s.scale*Math.min(E,_)),r.maxZoom),B=e.P.convert(r.offset),w=new e.P((r.padding.left-r.padding.right)/2,(r.padding.top-r.padding.bottom)/2).rotate(e.b9(i)),b=B.add(w).mult(s.scale/s.zoomScale(v));return{center:s.unproject(l.add(u).div(2).sub(b)),zoom:v,bearing:i}}fitBounds(t,e,n){return this._fitInternal(this.cameraForBounds(t,e),e,n)}fitScreenCoordinates(t,n,i,r,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.P.convert(t)),this.transform.pointLocation(e.P.convert(n)),i,r),r,o)}_fitInternal(t,n,i){return t?(delete(n=e.e(t,n)).padding,n.linear?this.easeTo(n,i):this.flyTo(n,i)):this}jumpTo(t,n){this.stop();const i=this._getTransformForUpdate();let r=!1,o=!1,s=!1;return"zoom"in t&&i.zoom!==+t.zoom&&(r=!0,i.zoom=+t.zoom),void 0!==t.center&&(i.center=e.N.convert(t.center)),"bearing"in t&&i.bearing!==+t.bearing&&(o=!0,i.bearing=+t.bearing),"pitch"in t&&i.pitch!==+t.pitch&&(s=!0,i.pitch=+t.pitch),null==t.padding||i.isPaddingEqual(t.padding)||(i.padding=t.padding),this._applyUpdatedTransform(i),this.fire(new e.k("movestart",n)).fire(new e.k("move",n)),r&&this.fire(new e.k("zoomstart",n)).fire(new e.k("zoom",n)).fire(new e.k("zoomend",n)),o&&this.fire(new e.k("rotatestart",n)).fire(new e.k("rotate",n)).fire(new e.k("rotateend",n)),s&&this.fire(new e.k("pitchstart",n)).fire(new e.k("pitch",n)).fire(new e.k("pitchend",n)),this.fire(new e.k("moveend",n))}calculateCameraOptionsFromTo(t,n,i,r=0){const o=e.Z.fromLngLat(t,n),s=e.Z.fromLngLat(i,r),a=s.x-o.x,A=s.y-o.y,l=s.z-o.z,c=Math.hypot(a,A,l);if(0===c)throw new Error("Can't calculate camera options with same From and To");const u=Math.hypot(a,A),h=this.transform.scaleZoom(this.transform.cameraToCenterDistance/c/this.transform.tileSize),g=180*Math.atan2(a,-A)/Math.PI;let d=180*Math.acos(u/c)/Math.PI;return d=l<0?90-d:90+d,{center:s.toLngLat(),zoom:h,pitch:d,bearing:g}}easeTo(t,n){var i;this._stop(!1,t.easeId),(!1===(t=e.e({offset:[0,0],duration:500,easing:e.b8},t)).animate||!t.essential&&o.prefersReducedMotion)&&(t.duration=0);const r=this._getTransformForUpdate(),s=r.zoom,a=r.bearing,A=r.pitch,l=r.padding,c="bearing"in t?this._normalizeBearing(t.bearing,a):a,u="pitch"in t?+t.pitch:A,h="padding"in t?t.padding:r.padding,g=e.P.convert(t.offset);let d=r.centerPoint.add(g);const p=r.pointLocation(d),{center:f,zoom:m}=r.getConstrained(e.N.convert(t.center||p),null!==(i=t.zoom)&&void 0!==i?i:s);this._normalizeCenter(f,r);const I=r.project(p),y=r.project(f).sub(I),C=r.zoomScale(m-s);let E,_;t.around&&(E=e.N.convert(t.around),_=r.locationPoint(E));const v={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||m!==s,this._rotating=this._rotating||a!==c,this._pitching=this._pitching||u!==A,this._padding=!r.isPaddingEqual(h),this._easeId=t.easeId,this._prepareEase(n,t.noMoveStart,v),this.terrain&&this._prepareElevation(f),this._ease((i=>{if(this._zooming&&(r.zoom=e.y.number(s,m,i)),this._rotating&&(r.bearing=e.y.number(a,c,i)),this._pitching&&(r.pitch=e.y.number(A,u,i)),this._padding&&(r.interpolatePadding(l,h,i),d=r.centerPoint.add(g)),this.terrain&&!t.freezeElevation&&this._updateElevation(i),E)r.setLocationAtPoint(E,_);else{const t=r.zoomScale(r.zoom-s),e=m>s?Math.min(2,C):Math.max(.5,C),n=Math.pow(e,1-i),o=r.unproject(I.add(y.mult(i*n)).mult(t));r.setLocationAtPoint(r.renderWorldCopies?o.wrap():o,d)}this._applyUpdatedTransform(r),this._fireMoveEvents(n)}),(e=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(n,e)}),t),this}_prepareEase(t,n,i={}){this._moving=!0,n||i.moving||this.fire(new e.k("movestart",t)),this._zooming&&!i.zooming&&this.fire(new e.k("zoomstart",t)),this._rotating&&!i.rotating&&this.fire(new e.k("rotatestart",t)),this._pitching&&!i.pitching&&this.fire(new e.k("pitchstart",t))}_prepareElevation(t){this._elevationCenter=t,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(t,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(t){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const n=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(t<1&&n!==this._elevationTarget){const e=this._elevationTarget-this._elevationStart;this._elevationStart+=t*(e-(n-(e*t+this._elevationStart))/(1-t)),this._elevationTarget=n}this.transform.elevation=e.y.number(this._elevationStart,this._elevationTarget,t)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(t){const e=t.getCameraPosition(),n=this.terrain.getElevationForLngLatZoom(e.lngLat,t.zoom);if(e.altitude<n){const i=this.calculateCameraOptionsFromTo(e.lngLat,n,t.center,t.elevation);return{pitch:i.pitch,zoom:i.zoom}}return{}}_applyUpdatedTransform(t){const e=[];if(this.terrain&&e.push((t=>this._elevateCameraIfInsideTerrain(t))),this.transformCameraUpdate&&e.push((t=>this.transformCameraUpdate(t))),!e.length)return;const n=t.clone();for(const t of e){const e=n.clone(),{center:i,zoom:r,pitch:o,bearing:s,elevation:a}=t(e);i&&(e.center=i),void 0!==r&&(e.zoom=r),void 0!==o&&(e.pitch=o),void 0!==s&&(e.bearing=s),void 0!==a&&(e.elevation=a),n.apply(e)}this.transform.apply(n)}_fireMoveEvents(t){this.fire(new e.k("move",t)),this._zooming&&this.fire(new e.k("zoom",t)),this._rotating&&this.fire(new e.k("rotate",t)),this._pitching&&this.fire(new e.k("pitch",t))}_afterEase(t,n){if(this._easeId&&n&&this._easeId===n)return;delete this._easeId;const i=this._zooming,r=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,i&&this.fire(new e.k("zoomend",t)),r&&this.fire(new e.k("rotateend",t)),o&&this.fire(new e.k("pitchend",t)),this.fire(new e.k("moveend",t))}flyTo(t,n){var i;if(!t.essential&&o.prefersReducedMotion){const i=e.M(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(i,n)}this.stop(),t=e.e({offset:[0,0],speed:1.2,curve:1.42,easing:e.b8},t);const r=this._getTransformForUpdate(),s=r.zoom,a=r.bearing,A=r.pitch,l=r.padding,c="bearing"in t?this._normalizeBearing(t.bearing,a):a,u="pitch"in t?+t.pitch:A,h="padding"in t?t.padding:r.padding,g=e.P.convert(t.offset);let d=r.centerPoint.add(g);const p=r.pointLocation(d),{center:f,zoom:m}=r.getConstrained(e.N.convert(t.center||p),null!==(i=t.zoom)&&void 0!==i?i:s);this._normalizeCenter(f,r);const I=r.zoomScale(m-s),y=r.project(p),C=r.project(f).sub(y);let E=t.curve;const _=Math.max(r.width,r.height),v=_/I,B=C.mag();if("minZoom"in t){const n=e.ac(Math.min(t.minZoom,s,m),r.minZoom,r.maxZoom),i=_/r.zoomScale(n-s);E=Math.sqrt(i/B*2)}const w=E*E;function b(t){const e=(v*v-_*_+(t?-1:1)*w*w*B*B)/(2*(t?v:_)*w*B);return Math.log(Math.sqrt(e*e+1)-e)}function Q(t){return(Math.exp(t)-Math.exp(-t))/2}function x(t){return(Math.exp(t)+Math.exp(-t))/2}const D=b(!1);let S=function(t){return x(D)/x(D+E*t)},M=function(t){return _*((x(D)*(Q(e=D+E*t)/x(e))-Q(D))/w)/B;var e},k=(b(!0)-D)/E;if(Math.abs(B)<1e-6||!isFinite(k)){if(Math.abs(_-v)<1e-6)return this.easeTo(t,n);const e=v<_?-1:1;k=Math.abs(Math.log(v/_))/E,M=()=>0,S=t=>Math.exp(e*E*t)}return t.duration="duration"in t?+t.duration:1e3*k/("screenSpeed"in t?+t.screenSpeed/E:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=a!==c,this._pitching=u!==A,this._padding=!r.isPaddingEqual(h),this._prepareEase(n,!1),this.terrain&&this._prepareElevation(f),this._ease((i=>{const o=i*k,p=1/S(o);r.zoom=1===i?m:s+r.scaleZoom(p),this._rotating&&(r.bearing=e.y.number(a,c,i)),this._pitching&&(r.pitch=e.y.number(A,u,i)),this._padding&&(r.interpolatePadding(l,h,i),d=r.centerPoint.add(g)),this.terrain&&!t.freezeElevation&&this._updateElevation(i);const I=1===i?f:r.unproject(y.add(C.mult(M(o))).mult(p));r.setLocationAtPoint(r.renderWorldCopies?I.wrap():I,d),this._applyUpdatedTransform(r),this._fireMoveEvents(n)}),(()=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(n)}),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,e){var n;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const t=this._onEaseEnd;delete this._onEaseEnd,t.call(this,e)}return t||null===(n=this.handlers)||void 0===n||n.stop(!1),this}_ease(t,e,n){!1===n.animate||0===n.duration?(t(1),e()):(this._easeStart=o.now(),this._easeOptions=n,this._onEaseFrame=t,this._onEaseEnd=e,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(t,n){t=e.b2(t,-180,180);const i=Math.abs(t-n);return Math.abs(t-360-n)<i&&(t-=360),Math.abs(t+360-n)<i&&(t+=360),t}_normalizeCenter(t,e){if(!e.renderWorldCopies||e.lngRange)return;const n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}queryTerrainElevation(t){return this.terrain?this.terrain.getElevationForLngLatZoom(e.N.convert(t),this.transform.tileZoom)-this.transform.elevation:null}}const yr={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Cr{constructor(t=yr){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=t=>{!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType&&"terrain"!==t.type||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=t}getDefaultPosition(){return"bottom-right"}onAdd(t){return this._map=t,this._compact=this.options.compact,this._container=s.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=s.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=s.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){s.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(t,e){const n=this._map._getUIString(`AttributionControl.${e}`);t.title=n,t.setAttribute("aria-label",n)}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((t=>"string"!=typeof t?"":t))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}const e=this._map.style.sourceCaches;for(const n in e){const i=e[n];if(i.used||i.usedForTerrain){const e=i.getSource();e.attribution&&t.indexOf(e.attribution)<0&&t.push(e.attribution)}}t=t.filter((t=>String(t).trim())),t.sort(((t,e)=>t.length-e.length)),t=t.filter(((e,n)=>{for(let i=n+1;i<t.length;i++)if(t[i].indexOf(e)>=0)return!1;return!0}));const n=t.join(" | ");n!==this._attribHTML&&(this._attribHTML=n,t.length?(this._innerContainer.innerHTML=n,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Er{constructor(t={}){this._updateCompact=()=>{const t=this._container.children;if(t.length){const e=t[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&e.classList.add("maplibregl-compact"):e.classList.remove("maplibregl-compact")}},this.options=t}getDefaultPosition(){return"bottom-left"}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=s.create("div","maplibregl-ctrl");const e=s.create("a","maplibregl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://maplibre.org/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){s.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class _r{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e}remove(t){const e=this._currentlyRunning,n=e?this._queue.concat(e):this._queue;for(const e of n)if(e.id===t)return void(e.cancelled=!0)}run(t=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const e=this._currentlyRunning=this._queue;this._queue=[];for(const n of e)if(!n.cancelled&&(n.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var vr=e.Y([{name:"a_pos3d",type:"Int16",components:3}]);class Br extends e.E{constructor(t){super(),this.sourceCache=t,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,t.usedForTerrain=!0,t.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(t,n){this.sourceCache.update(t,n),this._renderableTilesKeys=[];const i={};for(const r of t.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:n}))i[r.key]=!0,this._renderableTilesKeys.push(r.key),this._tiles[r.key]||(r.posMatrix=new Float64Array(16),e.aP(r.posMatrix,0,e.X,0,e.X,0,1),this._tiles[r.key]=new At(r,this.tileSize));for(const t in this._tiles)i[t]||delete this._tiles[t]}freeRtt(t){for(const e in this._tiles){const n=this._tiles[e];(!t||n.tileID.equals(t)||n.tileID.isChildOf(t)||t.isChildOf(n.tileID))&&(n.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((t=>this.getTileByID(t)))}getTileByID(t){return this._tiles[t]}getTerrainCoords(t){const n={};for(const i of this._renderableTilesKeys){const r=this._tiles[i].tileID;if(r.canonical.equals(t.canonical)){const r=t.clone();r.posMatrix=new Float64Array(16),e.aP(r.posMatrix,0,e.X,0,e.X,0,1),n[i]=r}else if(r.canonical.isChildOf(t.canonical)){const o=t.clone();o.posMatrix=new Float64Array(16);const s=r.canonical.z-t.canonical.z,a=r.canonical.x-(r.canonical.x>>s<<s),A=r.canonical.y-(r.canonical.y>>s<<s),l=e.X>>s;e.aP(o.posMatrix,0,l,0,l,0,1),e.J(o.posMatrix,o.posMatrix,[-a*l,-A*l,0]),n[i]=o}else if(t.canonical.isChildOf(r.canonical)){const o=t.clone();o.posMatrix=new Float64Array(16);const s=t.canonical.z-r.canonical.z,a=t.canonical.x-(t.canonical.x>>s<<s),A=t.canonical.y-(t.canonical.y>>s<<s),l=e.X>>s;e.aP(o.posMatrix,0,e.X,0,e.X,0,1),e.J(o.posMatrix,o.posMatrix,[a*l,A*l,0]),e.K(o.posMatrix,o.posMatrix,[1/2**s,1/2**s,0]),n[i]=o}}return n}getSourceTile(t,e){const n=this.sourceCache._source;let i=t.overscaledZ-this.deltaZoom;if(i>n.maxzoom&&(i=n.maxzoom),i<n.minzoom)return null;this._sourceTileCache[t.key]||(this._sourceTileCache[t.key]=t.scaledTo(i).key);let r=this.sourceCache.getTileByID(this._sourceTileCache[t.key]);if((!r||!r.dem)&&e)for(;i>=n.minzoom&&(!r||!r.dem);)r=this.sourceCache.getTileByID(t.scaledTo(i--).key);return r}tilesAfterTime(t=Date.now()){return Object.values(this._tiles).filter((e=>e.timeAdded>=t))}}class wr{constructor(t,e,n){this.painter=t,this.sourceCache=new Br(e),this.options=n,this.exaggeration="number"==typeof n.exaggeration?n.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(t,n,i,r=e.X){var o;if(!(n>=0&&n<r&&i>=0&&i<r))return 0;const s=this.getTerrainData(t),a=null===(o=s.tile)||void 0===o?void 0:o.dem;if(!a)return 0;const A=function(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t}([],[n/r*e.X,i/r*e.X],s.u_terrain_matrix),l=[A[0]*a.dim,A[1]*a.dim],c=Math.floor(l[0]),u=Math.floor(l[1]),h=l[0]-c,g=l[1]-u;return a.get(c,u)*(1-h)*(1-g)+a.get(c+1,u)*h*(1-g)+a.get(c,u+1)*(1-h)*g+a.get(c+1,u+1)*h*g}getElevationForLngLatZoom(t,n){if(!e.ba(n,t.wrap()))return 0;const{tileID:i,mercatorX:r,mercatorY:o}=this._getOverscaledTileIDFromLngLatZoom(t,n);return this.getElevation(i,r%e.X,o%e.X,e.X)}getElevation(t,n,i,r=e.X){return this.getDEMElevation(t,n,i,r)*this.exaggeration}getTerrainData(t){if(!this._emptyDemTexture){const t=this.painter.context,n=new e.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new E(t,n,t.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new E(t,new e.R({width:1,height:1}),t.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=e.an([])}const n=this.sourceCache.getSourceTile(t,!0);if(n&&n.dem&&(!n.demTexture||n.needsTerrainPrepare)){const t=this.painter.context;n.demTexture=this.painter.getTileTexture(n.dem.stride),n.demTexture?n.demTexture.update(n.dem.getPixels(),{premultiply:!1}):n.demTexture=new E(t,n.dem.getPixels(),t.gl.RGBA,{premultiply:!1}),n.demTexture.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),n.needsTerrainPrepare=!1}const i=n&&n+n.tileID.key+t.key;if(i&&!this._demMatrixCache[i]){const i=this.sourceCache.sourceCache._source.maxzoom;let r=t.canonical.z-n.tileID.canonical.z;t.overscaledZ>t.canonical.z&&(t.canonical.z>=i?r=t.canonical.z-i:e.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const o=t.canonical.x-(t.canonical.x>>r<<r),s=t.canonical.y-(t.canonical.y>>r<<r),a=e.bb(new Float64Array(16),[1/(e.X<<r),1/(e.X<<r),0]);e.J(a,a,[o*e.X,s*e.X,0]),this._demMatrixCache[t.key]={matrix:a,coord:t}}return{u_depth:2,u_terrain:3,u_terrain_dim:n&&n.dem&&n.dem.dim||1,u_terrain_matrix:i?this._demMatrixCache[t.key].matrix:this._emptyDemMatrix,u_terrain_unpack:n&&n.dem&&n.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(n&&n.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:n}}getFramebuffer(t){const e=this.painter,n=e.width/devicePixelRatio,i=e.height/devicePixelRatio;return!this._fbo||this._fbo.width===n&&this._fbo.height===i||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new E(e.context,{width:n,height:i,data:null},e.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(e.context.gl.NEAREST,e.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new E(e.context,{width:n,height:i,data:null},e.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(e.context.gl.NEAREST,e.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=e.context.createFramebuffer(n,i,!0,!1),this._fbo.depthAttachment.set(e.context.createRenderbuffer(e.context.gl.DEPTH_COMPONENT16,n,i))),this._fbo.colorAttachment.set("coords"===t?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const t=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const n=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let t=0,e=0;t<this._coordsTextureSize;t++)for(let i=0;i<this._coordsTextureSize;i++,e+=4)n[e+0]=255&i,n[e+1]=255&t,n[e+2]=i>>8<<4|t>>8,n[e+3]=0;const i=new e.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(n.buffer)),r=new E(t,i,t.gl.RGBA,{premultiply:!1});return r.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._coordsTexture=r,r}pointCoordinate(t){this.painter.maybeDrawDepthAndCoords(!0);const n=new Uint8Array(4),i=this.painter.context,r=i.gl,o=Math.round(t.x*this.painter.pixelRatio/devicePixelRatio),s=Math.round(t.y*this.painter.pixelRatio/devicePixelRatio),a=Math.round(this.painter.height/devicePixelRatio);i.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),r.readPixels(o,a-s-1,1,1,r.RGBA,r.UNSIGNED_BYTE,n),i.bindFramebuffer.set(null);const A=n[0]+(n[2]>>4<<8),l=n[1]+((15&n[2])<<8),c=this.coordsIndex[255-n[3]],u=c&&this.sourceCache.getTileByID(c);if(!u)return null;const h=this._coordsTextureSize,g=(1<<u.tileID.canonical.z)*h;return new e.Z((u.tileID.canonical.x*h+A)/g+u.tileID.wrap,(u.tileID.canonical.y*h+l)/g,this.getElevation(u.tileID,A,l,h))}depthAtPoint(t){const e=new Uint8Array(4),n=this.painter.context,i=n.gl;return n.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),i.readPixels(t.x,this.painter.height/devicePixelRatio-t.y-1,1,1,i.RGBA,i.UNSIGNED_BYTE,e),n.bindFramebuffer.set(null),(e[0]/16777216+e[1]/65536+e[2]/256+e[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const t=this.painter.context,n=new e.bc,i=new e.aX,r=this.meshSize,o=e.X/r,s=r*r;for(let t=0;t<=r;t++)for(let e=0;e<=r;e++)n.emplaceBack(e*o,t*o,0);for(let t=0;t<s;t+=r+1)for(let e=0;e<r;e++)i.emplaceBack(e+t,r+e+t+1,r+e+t+2),i.emplaceBack(e+t,r+e+t+2,e+t+1);const a=n.length,A=a+2*(r+1);for(const t of[0,1])for(let i=0;i<=r;i++)for(const r of[0,1])n.emplaceBack(i*o,t*e.X,r);for(let t=0;t<2*r;t+=2)i.emplaceBack(A+t,A+t+1,A+t+3),i.emplaceBack(A+t,A+t+3,A+t+2),i.emplaceBack(a+t,a+t+3,a+t+1),i.emplaceBack(a+t,a+t+2,a+t+3);const l=n.length,c=l+2*(r+1);for(const t of[0,1])for(let i=0;i<=r;i++)for(const r of[0,1])n.emplaceBack(t*e.X,i*o,r);for(let t=0;t<2*r;t+=2)i.emplaceBack(l+t,l+t+1,l+t+3),i.emplaceBack(l+t,l+t+3,l+t+2),i.emplaceBack(c+t,c+t+3,c+t+1),i.emplaceBack(c+t,c+t+2,c+t+3);return this._mesh=new hi(t.createVertexBuffer(n,vr.members),t.createIndexBuffer(i),e.a0.simpleSegment(0,0,n.length,i.length)),this._mesh}getMeshFrameDelta(t){return 2*Math.PI*e.bd/Math.pow(2,t)/5}getMinTileElevationForLngLatZoom(t,e){var n;const{tileID:i}=this._getOverscaledTileIDFromLngLatZoom(t,e);return null!==(n=this.getMinMaxElevation(i).minElevation)&&void 0!==n?n:0}getMinMaxElevation(t){const e=this.getTerrainData(t).tile,n={minElevation:null,maxElevation:null};return e&&e.dem&&(n.minElevation=e.dem.min*this.exaggeration,n.maxElevation=e.dem.max*this.exaggeration),n}_getOverscaledTileIDFromLngLatZoom(t,n){const i=e.Z.fromLngLat(t.wrap()),r=(1<<n)*e.X,o=i.x*r,s=i.y*r,a=Math.floor(o/e.X),A=Math.floor(s/e.X);return{tileID:new e.S(n,0,n,a,A),mercatorX:o,mercatorY:s}}}class br{constructor(t,e,n){this._context=t,this._size=e,this._tileSize=n,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const t of this._objects)t.texture.destroy(),t.fbo.destroy()}_createObject(t){const e=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),n=new E(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return n.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),e.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),e.colorAttachment.set(n.texture),{id:t,fbo:e,texture:n,stamp:-1,inUse:!1}}getObjectForId(t){return this._objects[t]}useObject(t){t.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((e=>t.id!==e)),this._recentlyUsed.push(t.id)}stampObject(t){t.stamp=++this._stamp}getOrCreateFreeObject(){for(const t of this._recentlyUsed)if(!this._objects[t].inUse)return this._objects[t];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const t=this._createObject(this._objects.length);return this._objects.push(t),t}freeObject(t){t.inUse=!1}freeAllObjects(){for(const t of this._objects)this.freeObject(t)}isFull(){return!(this._objects.length<this._size)&&!1===this._objects.some((t=>!t.inUse))}}const Qr={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class xr{constructor(t,e){this.painter=t,this.terrain=e,this.pool=new br(t.context,30,e.sourceCache.tileSize*e.qualityFactor)}destruct(){this.pool.destruct()}getTexture(t){return this.pool.getObjectForId(t.rtt[this._stacks.length-1].id).texture}prepareForRender(t,e){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=t._order.filter((n=>!t._layers[n].isHidden(e))),this._coordsDescendingInv={};for(const e in t.sourceCaches){this._coordsDescendingInv[e]={};const n=t.sourceCaches[e].getVisibleCoordinates();for(const t of n){const n=this.terrain.sourceCache.getTerrainCoords(t);for(const t in n)this._coordsDescendingInv[e][t]||(this._coordsDescendingInv[e][t]=[]),this._coordsDescendingInv[e][t].push(n[t])}}this._coordsDescendingInvStr={};for(const e of t._order){const n=t._layers[e],i=n.source;if(Qr[n.type]&&!this._coordsDescendingInvStr[i]){this._coordsDescendingInvStr[i]={};for(const t in this._coordsDescendingInv[i])this._coordsDescendingInvStr[i][t]=this._coordsDescendingInv[i][t].map((t=>t.key)).sort().join()}}for(const t of this._renderableTiles)for(const e in this._coordsDescendingInvStr){const n=this._coordsDescendingInvStr[e][t.tileID.key];n&&n!==t.rttCoords[e]&&(t.rtt=[])}}renderLayer(t){if(t.isHidden(this.painter.transform.zoom))return!1;const n=t.type,i=this.painter,r=this._renderableLayerIds[this._renderableLayerIds.length-1]===t.id;if(Qr[n]&&(this._prevType&&Qr[this._prevType]||this._stacks.push([]),this._prevType=n,this._stacks[this._stacks.length-1].push(t.id),!r))return!0;if(Qr[this._prevType]||Qr[n]&&r){this._prevType=n;const t=this._stacks.length-1,r=this._stacks[t]||[];for(const n of this._renderableTiles){if(this.pool.isFull()&&(ui(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(n),n.rtt[t]){const e=this.pool.getObjectForId(n.rtt[t].id);if(e.stamp===n.rtt[t].stamp){this.pool.useObject(e);continue}}const o=this.pool.getOrCreateFreeObject();this.pool.useObject(o),this.pool.stampObject(o),n.rtt[t]={id:o.id,stamp:o.stamp},i.context.bindFramebuffer.set(o.fbo.framebuffer),i.context.clear({color:e.aM.transparent,stencil:0}),i.currentStencilSource=void 0;for(let t=0;t<r.length;t++){const e=i.style._layers[r[t]],s=e.source?this._coordsDescendingInv[e.source][n.tileID.key]:[n.tileID];i.context.viewport.set([0,0,o.fbo.width,o.fbo.height]),i._renderTileClippingMasks(e,s),i.renderLayer(i,i.style.sourceCaches[e.source],e,s),e.source&&(n.rttCoords[e.source]=this._coordsDescendingInvStr[e.source][n.tileID.key])}}return ui(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Qr[n]}return!1}}const Dr={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Sr=n,Mr={hash:!1,interactive:!0,bearingSnap:7,attributionControl:yr,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:e.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},kr=t=>{t.touchstart=t.dragStart,t.touchmoveWindow=t.dragMove,t.touchend=t.dragEnd},Rr={showCompass:!0,showZoom:!0,visualizePitch:!1};class Nr{constructor(t,n,i=!1){this.mousedown=t=>{this.startMouse(e.e({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),s.mousePos(this.element,t)),s.addEventListener(window,"mousemove",this.mousemove),s.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=t=>{this.moveMouse(t,s.mousePos(this.element,t))},this.mouseup=t=>{this.mouseRotate.dragEnd(t),this.mousePitch&&this.mousePitch.dragEnd(t),this.offTemp()},this.touchstart=t=>{1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=s.touchPos(this.element,t.targetTouches)[0],this.startTouch(t,this._startPos),s.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),s.addEventListener(window,"touchend",this.touchend))},this.touchmove=t=>{1!==t.targetTouches.length?this.reset():(this._lastPos=s.touchPos(this.element,t.targetTouches)[0],this.moveTouch(t,this._lastPos))},this.touchend=t=>{0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const r=t.dragRotate._mouseRotate.getClickTolerance(),o=t.dragRotate._mousePitch.getClickTolerance();this.element=n,this.mouseRotate=zi({clickTolerance:r,enable:!0}),this.touchRotate=(({enable:t,clickTolerance:e,bearingDegreesPerPixelMoved:n=.8})=>{const i=new Yi;return new Gi({clickTolerance:e,move:(t,e)=>({bearingDelta:(e.x-t.x)*n}),moveStateManager:i,enable:t,assignEvents:kr})})({clickTolerance:r,enable:!0}),this.map=t,i&&(this.mousePitch=Ji({clickTolerance:o,enable:!0}),this.touchPitch=(({enable:t,clickTolerance:e,pitchDegreesPerPixelMoved:n=-.5})=>{const i=new Yi;return new Gi({clickTolerance:e,move:(t,e)=>({pitchDelta:(e.y-t.y)*n}),moveStateManager:i,enable:t,assignEvents:kr})})({clickTolerance:o,enable:!0})),s.addEventListener(n,"mousedown",this.mousedown),s.addEventListener(n,"touchstart",this.touchstart,{passive:!1}),s.addEventListener(n,"touchcancel",this.reset)}startMouse(t,e){this.mouseRotate.dragStart(t,e),this.mousePitch&&this.mousePitch.dragStart(t,e),s.disableDrag()}startTouch(t,e){this.touchRotate.dragStart(t,e),this.touchPitch&&this.touchPitch.dragStart(t,e),s.disableDrag()}moveMouse(t,e){const n=this.map,{bearingDelta:i}=this.mouseRotate.dragMove(t,e)||{};if(i&&n.setBearing(n.getBearing()+i),this.mousePitch){const{pitchDelta:i}=this.mousePitch.dragMove(t,e)||{};i&&n.setPitch(n.getPitch()+i)}}moveTouch(t,e){const n=this.map,{bearingDelta:i}=this.touchRotate.dragMove(t,e)||{};if(i&&n.setBearing(n.getBearing()+i),this.touchPitch){const{pitchDelta:i}=this.touchPitch.dragMove(t,e)||{};i&&n.setPitch(n.getPitch()+i)}}off(){const t=this.element;s.removeEventListener(t,"mousedown",this.mousedown),s.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),s.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),s.removeEventListener(window,"touchend",this.touchend),s.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){s.enableDrag(),s.removeEventListener(window,"mousemove",this.mousemove),s.removeEventListener(window,"mouseup",this.mouseup),s.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),s.removeEventListener(window,"touchend",this.touchend)}}let Pr;function Tr(t,n,i){const r=new e.N(t.lng,t.lat);if(t=new e.N(t.lng,t.lat),n){const r=new e.N(t.lng-360,t.lat),o=new e.N(t.lng+360,t.lat),s=i.locationPoint(t).distSqr(n);i.locationPoint(r).distSqr(n)<s?t=r:i.locationPoint(o).distSqr(n)<s&&(t=o)}for(;Math.abs(t.lng-i.center.lng)>180;){const e=i.locationPoint(t);if(e.x>=0&&e.y>=0&&e.x<=i.width&&e.y<=i.height)break;t.lng>i.center.lng?t.lng-=360:t.lng+=360}return t.lng!==r.lng&&i.locationPoint(t).y>i.height/2-i.getHorizon()?t:r}const Lr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Fr(t,e,n){const i=t.classList;for(const t in Lr)i.remove(`maplibregl-${n}-anchor-${t}`);i.add(`maplibregl-${n}-anchor-${e}`)}class Or extends e.E{constructor(t){if(super(),this._onKeyPress=t=>{const e=t.code,n=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==n&&13!==n||this.togglePopup()},this._onMapClick=t=>{const e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()},this._update=t=>{var e;if(!this._map)return;const n=this._map.loaded()&&!this._map.isMoving();("terrain"===(null==t?void 0:t.type)||"render"===(null==t?void 0:t.type)&&!n)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Tr(this._lngLat,this._flatPos,this._map.transform):null===(e=this._lngLat)||void 0===e?void 0:e.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let i="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?i=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(i=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let r="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?r="rotateX(0deg)":"map"===this._pitchAlignment&&(r=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||t&&"moveend"!==t.type||(this._pos=this._pos.round()),s.setTransform(this._element,`${Lr[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${r} ${i}`),o.frameAsync(new AbortController).then((()=>{this._updateOpacity(t&&"moveend"===t.type)})).catch((()=>{}))},this._onMove=t=>{if(!this._isDragging){const e=this._clickTolerance||this._map._clickTolerance;this._isDragging=t.point.dist(this._pointerdownPos)>=e}this._isDragging&&(this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.k("dragstart"))),this.fire(new e.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.k("dragend")),this._state="inactive"},this._addDragHandler=t=>{this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._pointerdownPos=t.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._subpixelPositioning=t&&t.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&"auto"!==t.pitchAlignment?t.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(null==t?void 0:t.opacity,null==t?void 0:t.opacityWhenCovered),t&&t.element)this._element=t.element,this._offset=e.P.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=s.create("div");const n=s.createNS("http://www.w3.org/2000/svg","svg"),i=41,r=27;n.setAttributeNS(null,"display","block"),n.setAttributeNS(null,"height",`${i}px`),n.setAttributeNS(null,"width",`${r}px`),n.setAttributeNS(null,"viewBox",`0 0 ${r} ${i}`);const o=s.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"stroke","none"),o.setAttributeNS(null,"stroke-width","1"),o.setAttributeNS(null,"fill","none"),o.setAttributeNS(null,"fill-rule","evenodd");const a=s.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"fill-rule","nonzero");const A=s.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"transform","translate(3.0, 29.0)"),A.setAttributeNS(null,"fill","#000000");const l=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const t of l){const e=s.createNS("http://www.w3.org/2000/svg","ellipse");e.setAttributeNS(null,"opacity","0.04"),e.setAttributeNS(null,"cx","10.5"),e.setAttributeNS(null,"cy","5.80029008"),e.setAttributeNS(null,"rx",t.rx),e.setAttributeNS(null,"ry",t.ry),A.appendChild(e)}const c=s.createNS("http://www.w3.org/2000/svg","g");c.setAttributeNS(null,"fill",this._color);const u=s.createNS("http://www.w3.org/2000/svg","path");u.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),c.appendChild(u);const h=s.createNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"opacity","0.25"),h.setAttributeNS(null,"fill","#000000");const g=s.createNS("http://www.w3.org/2000/svg","path");g.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),h.appendChild(g);const d=s.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"transform","translate(6.0, 7.0)"),d.setAttributeNS(null,"fill","#FFFFFF");const p=s.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"transform","translate(8.0, 8.0)");const f=s.createNS("http://www.w3.org/2000/svg","circle");f.setAttributeNS(null,"fill","#000000"),f.setAttributeNS(null,"opacity","0.25"),f.setAttributeNS(null,"cx","5.5"),f.setAttributeNS(null,"cy","5.5"),f.setAttributeNS(null,"r","5.4999962");const m=s.createNS("http://www.w3.org/2000/svg","circle");m.setAttributeNS(null,"fill","#FFFFFF"),m.setAttributeNS(null,"cx","5.5"),m.setAttributeNS(null,"cy","5.5"),m.setAttributeNS(null,"r","5.4999962"),p.appendChild(f),p.appendChild(m),a.appendChild(A),a.appendChild(c),a.appendChild(h),a.appendChild(d),a.appendChild(p),n.appendChild(a),n.setAttributeNS(null,"height",i*this._scale+"px"),n.setAttributeNS(null,"width",r*this._scale+"px"),this._element.appendChild(n),this._offset=e.P.convert(t&&t.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(t=>{t.preventDefault()})),this._element.addEventListener("mousedown",(t=>{t.preventDefault()})),Fr(this._element,this._anchor,"marker"),t&&t.className)for(const e of t.className.split(" "))this._element.classList.add(e);this._popup=null}addTo(t){return this.remove(),this._map=t,this._element.setAttribute("aria-label",t._getUIString("Marker.Title")),t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),t.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),s.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.N.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const e=38.1,n=13.5,i=Math.abs(n)/Math.SQRT2;t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-e],"bottom-left":[i,-1*(e-n+i)],"bottom-right":[-i,-1*(e-n+i)],left:[n,-1*(e-n)],right:[-n,-1*(e-n)]}:this._offset}this._popup=t,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(t){return this._subpixelPositioning=t,this}getPopup(){return this._popup}togglePopup(){const t=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:t?(t.isOpen()?t.remove():(t.setLngLat(this._lngLat),t.addTo(this._map)),this):this}_updateOpacity(t=!1){var n,i;if(!(null===(n=this._map)||void 0===n?void 0:n.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(t)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const r=this._map,o=r.terrain.depthAtPoint(this._pos),s=r.terrain.getElevationForLngLatZoom(this._lngLat,r.transform.tileZoom);if(r.transform.lngLatToCameraDepth(this._lngLat,s)-o<.006)return void(this._element.style.opacity=this._opacity);const a=-this._offset.y/r.transform._pixelPerMeter,A=Math.sin(r.getPitch()*Math.PI/180)*a,l=r.terrain.depthAtPoint(new e.P(this._pos.x,this._pos.y-this._offset.y)),c=r.transform.lngLatToCameraDepth(this._lngLat,s+A)-l>.006;(null===(i=this._popup)||void 0===i?void 0:i.isOpen())&&c&&this._popup.remove(),this._element.style.opacity=c?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(t){return this._offset=e.P.convert(t),this._update(),this}addClassName(t){this._element.classList.add(t)}removeClassName(t){this._element.classList.remove(t)}toggleClassName(t){return this._element.classList.toggle(t)}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(t,e){return void 0===t&&void 0===e&&(this._opacity="1",this._opacityWhenCovered="0.2"),void 0!==t&&(this._opacity=t),void 0!==e&&(this._opacityWhenCovered=e),this._map&&this._updateOpacity(!0),this}}const Gr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ur=0,jr=!1;const Yr={maxWidth:100,unit:"metric"};function Kr(t,e,n){const i=n&&n.maxWidth||100,r=t._container.clientHeight/2,o=t.unproject([0,r]),s=t.unproject([i,r]),a=o.distanceTo(s);if(n&&"imperial"===n.unit){const n=3.2808*a;n>5280?zr(e,i,n/5280,t._getUIString("ScaleControl.Miles")):zr(e,i,n,t._getUIString("ScaleControl.Feet"))}else n&&"nautical"===n.unit?zr(e,i,a/1852,t._getUIString("ScaleControl.NauticalMiles")):a>=1e3?zr(e,i,a/1e3,t._getUIString("ScaleControl.Kilometers")):zr(e,i,a,t._getUIString("ScaleControl.Meters"))}function zr(t,e,n,i){const r=function(t){const e=Math.pow(10,`${Math.floor(t)}`.length-1);let n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(t){const e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(n),e*n}(n);t.style.width=e*(r/n)+"px",t.innerHTML=`${r}&nbsp;${i}`}const Jr={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},qr=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Hr(t){if(t){if("number"==typeof t){const n=Math.round(Math.abs(t)/Math.SQRT2);return{center:new e.P(0,0),top:new e.P(0,t),"top-left":new e.P(n,n),"top-right":new e.P(-n,n),bottom:new e.P(0,-t),"bottom-left":new e.P(n,-n),"bottom-right":new e.P(-n,-n),left:new e.P(t,0),right:new e.P(-t,0)}}if(t instanceof e.P||Array.isArray(t)){const n=e.P.convert(t);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:e.P.convert(t.center||[0,0]),top:e.P.convert(t.top||[0,0]),"top-left":e.P.convert(t["top-left"]||[0,0]),"top-right":e.P.convert(t["top-right"]||[0,0]),bottom:e.P.convert(t.bottom||[0,0]),"bottom-left":e.P.convert(t["bottom-left"]||[0,0]),"bottom-right":e.P.convert(t["bottom-right"]||[0,0]),left:e.P.convert(t.left||[0,0]),right:e.P.convert(t.right||[0,0])}}return Hr(new e.P(0,0))}const Vr=n;t.AJAXError=e.bg,t.Evented=e.E,t.LngLat=e.N,t.MercatorCoordinate=e.Z,t.Point=e.P,t.addProtocol=e.bh,t.config=e.a,t.removeProtocol=e.bi,t.AttributionControl=Cr,t.BoxZoomHandler=Pi,t.CanvasSource=et,t.CooperativeGesturesHandler=gr,t.DoubleClickZoomHandler=ar,t.DragPanHandler=cr,t.DragRotateHandler=ur,t.EdgeInsets=fi,t.FullscreenControl=class extends e.E{constructor(t={}){super(),this._onFullscreenChange=()=>{var t;let e=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;null===(t=null==e?void 0:e.shadowRoot)||void 0===t?void 0:t.fullscreenElement;)e=e.shadowRoot.fullscreenElement;e===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,t&&t.container&&(t.container instanceof HTMLElement?this._container=t.container:e.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=s.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){s.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const t=this._fullscreenButton=s.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);s.create("span","maplibregl-ctrl-icon",t).setAttribute("aria-hidden","true"),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new e.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new e.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},t.GeoJSONSource=Z,t.GeolocateControl=class extends e.E{constructor(t){super(),this._onSuccess=t=>{if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.k("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new e.k("geolocate",t)),this._finish()}},this._updateCamera=t=>{const n=new e.N(t.coords.longitude,t.coords.latitude),i=t.coords.accuracy,r=this._map.getBearing(),o=e.e({bearing:r},this.options.fitBoundsOptions),s=J.fromLngLat(n,i);this._map.fitBounds(s,o,{geolocateSource:!0})},this._updateMarker=t=>{if(t){const n=new e.N(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=t=>{if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&jr)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new e.k("error",t)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this._geolocateButton=s.create("button","maplibregl-ctrl-geolocate",this._container),s.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=t=>{if(this._map){if(!1===t){e.w("Geolocation support is not available so the GeolocateControl will be disabled.");const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}else{const t=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=s.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Or({element:this._dotElement}),this._circleElement=s.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Or({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(t=>{t.geolocateSource||"ACTIVE_LOCK"!==this._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new e.k("trackuserlocationend")),this.fire(new e.k("userlocationlostfocus")))}))}},this.options=e.e({},Gr,t)}onAdd(t){return this._map=t,this._container=s.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return e._(this,arguments,void 0,(function*(t=!1){if(void 0!==Pr&&!t)return Pr;if(void 0===window.navigator.permissions)return Pr=!!window.navigator.geolocation,Pr;try{const t=yield window.navigator.permissions.query({name:"geolocation"});Pr="denied"!==t.state}catch(t){Pr=!!window.navigator.geolocation}return Pr}))}().then((t=>this._finishSetupUI(t))),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),s.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ur=0,jr=!1}_isOutOfMapMaxBounds(t){const e=this._map.getMaxBounds(),n=t.coords;return e&&(n.longitude<e.getWest()||n.longitude>e.getEast()||n.latitude<e.getSouth()||n.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const t=this._map.getBounds(),e=t.getSouthEast(),n=t.getNorthEast(),i=e.distanceTo(n),r=Math.ceil(this._accuracy/(i/this._map._container.clientHeight)*2);this._circleElement.style.width=`${r}px`,this._circleElement.style.height=`${r}px`}trigger(){if(!this._setup)return e.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ur--,jr=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new e.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.k("trackuserlocationstart")),this.fire(new e.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let t;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ur++,Ur>1?(t={maximumAge:6e5,timeout:0},jr=!0):(t=this.options.positionOptions,jr=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},t.Hash=Ci,t.ImageSource=$,t.KeyboardHandler=ir,t.LngLatBounds=J,t.LogoControl=Er,t.Map=class extends Ir{constructor(t){e.be.mark(e.bf.create);const n=Object.assign(Object.assign({},Mr),t);if(null!=n.minZoom&&null!=n.maxZoom&&n.minZoom>n.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=n.minPitch&&null!=n.maxPitch&&n.minPitch>n.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=n.minPitch&&n.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=n.maxPitch&&n.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ii(n.minZoom,n.maxZoom,n.minPitch,n.maxPitch,n.renderWorldCopies),{bearingSnap:n.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new _r,this._controls=[],this._mapId=e.a4(),this._contextLost=t=>{t.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new e.k("webglcontextlost",{originalEvent:t}))},this._contextRestored=t=>{this._setupPainter(),this.resize(),this._update(),this.fire(new e.k("webglcontextrestored",{originalEvent:t}))},this._onMapScroll=t=>{if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=n.interactive,this._maxTileCacheSize=n.maxTileCacheSize,this._maxTileCacheZoomLevels=n.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=!0===n.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=!0===n.preserveDrawingBuffer,this._antialias=!0===n.antialias,this._trackResize=!0===n.trackResize,this._bearingSnap=n.bearingSnap,this._refreshExpiredTiles=!0===n.refreshExpiredTiles,this._fadeDuration=n.fadeDuration,this._crossSourceCollisions=!0===n.crossSourceCollisions,this._collectResourceTiming=!0===n.collectResourceTiming,this._locale=Object.assign(Object.assign({},Dr),n.locale),this._clickTolerance=n.clickTolerance,this._overridePixelRatio=n.pixelRatio,this._maxCanvasSize=n.maxCanvasSize,this.transformCameraUpdate=n.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=!0===n.cancelPendingTileRequestsWhileZooming,this._imageQueueHandle=g.addThrottleControl((()=>this.isMoving())),this._requestManager=new d(n.transformRequest),"string"==typeof n.container){if(this._container=document.getElementById(n.container),!this._container)throw new Error(`Container '${n.container}' not found.`)}else{if(!(n.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=n.container}if(n.maxBounds&&this.setMaxBounds(n.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))).on("moveend",(()=>this._update(!1))).on("zoom",(()=>this._update(!0))).on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})).once("idle",(()=>{this._idleTriggered=!0})),"undefined"!=typeof window){addEventListener("online",this._onWindowOnline,!1);let t=!1;const e=yi((t=>{this._trackResize&&!this._removed&&this.resize(t)._update()}),50);this._resizeObserver=new ResizeObserver((n=>{t?e(n):t=!0})),this._resizeObserver.observe(this._container)}this.handlers=new mr(this,n),this._hash=n.hash&&new Ci("string"==typeof n.hash&&n.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:n.center,zoom:n.zoom,bearing:n.bearing,pitch:n.pitch}),n.bounds&&(this.resize(),this.fitBounds(n.bounds,e.e({},n.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=n.localIdeographFontFamily,this._validateStyle=n.validateStyle,n.style&&this.setStyle(n.style,{localIdeographFontFamily:n.localIdeographFontFamily}),n.attributionControl&&this.addControl(new Cr("boolean"==typeof n.attributionControl?void 0:n.attributionControl)),n.maplibreLogo&&this.addControl(new Er,n.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(t=>{this._update("style"===t.dataType),this.fire(new e.k(`${t.dataType}data`,t))})),this.on("dataloading",(t=>{this.fire(new e.k(`${t.dataType}dataloading`,t))})),this.on("dataabort",(t=>{this.fire(new e.k("sourcedataabort",t))}))}_getMapId(){return this._mapId}addControl(t,n){if(void 0===n&&(n=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const i=t.onAdd(this);this._controls.push(t);const r=this._controlPositions[n];return-1!==n.indexOf("bottom")?r.insertBefore(i,r.firstChild):r.appendChild(i),this}removeControl(t){if(!t||!t.onRemove)return this.fire(new e.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(t);return n>-1&&this._controls.splice(n,1),t.onRemove(this),this}hasControl(t){return this._controls.indexOf(t)>-1}calculateCameraOptionsFromTo(t,e,n,i){return null==i&&this.terrain&&(i=this.terrain.getElevationForLngLatZoom(n,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(t,e,n,i)}resize(t){var n;const i=this._containerDimensions(),r=i[0],o=i[1],s=this._getClampedPixelRatio(r,o);if(this._resizeCanvas(r,o,s),this.painter.resize(r,o,s),this.painter.overLimit()){const t=this.painter.context.gl;this._maxCanvasSize=[t.drawingBufferWidth,t.drawingBufferHeight];const e=this._getClampedPixelRatio(r,o);this._resizeCanvas(r,o,e),this.painter.resize(r,o,e)}this.transform.resize(r,o),null===(n=this._requestedCameraState)||void 0===n||n.resize(r,o);const a=!this._moving;return a&&(this.stop(),this.fire(new e.k("movestart",t)).fire(new e.k("move",t))),this.fire(new e.k("resize",t)),a&&this.fire(new e.k("moveend",t)),this}_getClampedPixelRatio(t,e){const{0:n,1:i}=this._maxCanvasSize,r=this.getPixelRatio(),o=t*r,s=e*r;return Math.min(o>n?n/o:1,s>i?i/s:1)*r}getPixelRatio(){var t;return null!==(t=this._overridePixelRatio)&&void 0!==t?t:devicePixelRatio}setPixelRatio(t){this._overridePixelRatio=t,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(t){return this.transform.setMaxBounds(J.convert(t)),this._update()}setMinZoom(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(t){if((t=null==t?60:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(t){return this.transform.renderWorldCopies=t,this._update()}project(t){return this.transform.locationPoint(e.N.convert(t),this.style&&this.terrain)}unproject(t){return this.transform.pointLocation(e.P.convert(t),this.terrain)}isMoving(){var t;return this._moving||(null===(t=this.handlers)||void 0===t?void 0:t.isMoving())}isZooming(){var t;return this._zooming||(null===(t=this.handlers)||void 0===t?void 0:t.isZooming())}isRotating(){var t;return this._rotating||(null===(t=this.handlers)||void 0===t?void 0:t.isRotating())}_createDelegatedListener(t,e,n){if("mouseenter"===t||"mouseover"===t){let i=!1;const r=r=>{const o=this.getLayer(e)?this.queryRenderedFeatures(r.point,{layers:[e]}):[];o.length?i||(i=!0,n.call(this,new Di(t,this,r.originalEvent,{features:o}))):i=!1};return{layer:e,listener:n,delegates:{mousemove:r,mouseout:()=>{i=!1}}}}if("mouseleave"===t||"mouseout"===t){let i=!1;const r=r=>{(this.getLayer(e)?this.queryRenderedFeatures(r.point,{layers:[e]}):[]).length?i=!0:i&&(i=!1,n.call(this,new Di(t,this,r.originalEvent)))},o=e=>{i&&(i=!1,n.call(this,new Di(t,this,e.originalEvent)))};return{layer:e,listener:n,delegates:{mousemove:r,mouseout:o}}}{const i=t=>{const i=this.getLayer(e)?this.queryRenderedFeatures(t.point,{layers:[e]}):[];i.length&&(t.features=i,n.call(this,t),delete t.features)};return{layer:e,listener:n,delegates:{[t]:i}}}}on(t,e,n){if(void 0===n)return super.on(t,e);const i=this._createDelegatedListener(t,e,n);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(i);for(const t in i.delegates)this.on(t,i.delegates[t]);return this}once(t,e,n){if(void 0===n)return super.once(t,e);const i=this._createDelegatedListener(t,e,n);for(const t in i.delegates)this.once(t,i.delegates[t]);return this}off(t,e,n){return void 0===n?super.off(t,e):(this._delegatedListeners&&this._delegatedListeners[t]&&(()=>{const i=this._delegatedListeners[t];for(let t=0;t<i.length;t++){const r=i[t];if(r.layer===e&&r.listener===n){for(const t in r.delegates)this.off(t,r.delegates[t]);return i.splice(t,1),this}}})(),this)}queryRenderedFeatures(t,n){if(!this.style)return[];let i;const r=t instanceof e.P||Array.isArray(t),o=r?t:[[0,0],[this.transform.width,this.transform.height]];if(n=n||(r?{}:t)||{},o instanceof e.P||"number"==typeof o[0])i=[e.P.convert(o)];else{const t=e.P.convert(o[0]),n=e.P.convert(o[1]);i=[t,new e.P(n.x,t.y),n,new e.P(t.x,n.y),t]}return this.style.queryRenderedFeatures(i,n,this.transform)}querySourceFeatures(t,e){return this.style.querySourceFeatures(t,e)}setStyle(t,n){return!1!==(n=e.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&t?(this._diffStyle(t,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(t,n))}setTransformRequest(t){return this._requestManager.setTransformRequest(t),this}_getUIString(t){const e=this._locale[t];if(null==e)throw new Error(`Missing UI string '${t}'`);return e}_updateStyle(t,e){if(e.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(t,e)));const n=this.style&&e.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!t)),t?(this.style=new ue(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t,e,n):this.style.loadJSON(t,e,n),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ue(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(t,n){if("string"==typeof t){const i=this._requestManager.transformRequest(t,"Style");e.h(i,new AbortController).then((t=>{this._updateDiff(t.data,n)})).catch((t=>{t&&this.fire(new e.j(t))}))}else"object"==typeof t&&this._updateDiff(t,n)}_updateDiff(t,n){try{this.style.setState(t,n)&&this._update(!0)}catch(i){e.w(`Unable to perform style diff: ${i.message||i.error||i}.  Rebuilding the style from scratch.`),this._updateStyle(t,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():e.w("There is no style added to the map.")}addSource(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)}isSourceLoaded(t){const n=this.style&&this.style.sourceCaches[t];if(void 0!==n)return n.loaded();this.fire(new e.j(new Error(`There is no source with ID '${t}'`)))}setTerrain(t){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),t){const n=this.style.sourceCaches[t.source];if(!n)throw new Error(`cannot load terrain, because there exists no source with ID: ${t.source}`);null===this.terrain&&n.reload();for(const n in this.style._layers){const i=this.style._layers[n];"hillshade"===i.type&&i.source===t.source&&e.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new wr(this.painter,n,t),this.painter.renderToTexture=new xr(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=e=>{"style"===e.dataType?this.terrain.sourceCache.freeRtt():"source"===e.dataType&&e.tile&&(e.sourceId!==t.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(e.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new e.k("terrain",{terrain:t})),this}getTerrain(){var t,e;return null!==(e=null===(t=this.terrain)||void 0===t?void 0:t.options)&&void 0!==e?e:null}areTilesLoaded(){const t=this.style&&this.style.sourceCaches;for(const e in t){const n=t[e]._tiles;for(const t in n){const e=n[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}}return!0}removeSource(t){return this.style.removeSource(t),this._update(!0)}getSource(t){return this.style.getSource(t)}addImage(t,n,i={}){const{pixelRatio:r=1,sdf:s=!1,stretchX:a,stretchY:A,content:l,textFitWidth:c,textFitHeight:u}=i;if(this._lazyInitEmptyStyle(),!(n instanceof HTMLImageElement||e.b(n))){if(void 0===n.width||void 0===n.height)return this.fire(new e.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:i,height:o,data:h}=n,g=n;return this.style.addImage(t,{data:new e.R({width:i,height:o},new Uint8Array(h)),pixelRatio:r,stretchX:a,stretchY:A,content:l,textFitWidth:c,textFitHeight:u,sdf:s,version:0,userImage:g}),g.onAdd&&g.onAdd(this,t),this}}{const{width:i,height:h,data:g}=o.getImageData(n);this.style.addImage(t,{data:new e.R({width:i,height:h},g),pixelRatio:r,stretchX:a,stretchY:A,content:l,textFitWidth:c,textFitHeight:u,sdf:s,version:0})}}updateImage(t,n){const i=this.style.getImage(t);if(!i)return this.fire(new e.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const r=n instanceof HTMLImageElement||e.b(n)?o.getImageData(n):n,{width:s,height:a,data:A}=r;if(void 0===s||void 0===a)return this.fire(new e.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(s!==i.data.width||a!==i.data.height)return this.fire(new e.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const l=!(n instanceof HTMLImageElement||e.b(n));return i.data.replace(A,l),this.style.updateImage(t,i),this}getImage(t){return this.style.getImage(t)}hasImage(t){return t?!!this.style.getImage(t):(this.fire(new e.j(new Error("Missing required image id"))),!1)}removeImage(t){this.style.removeImage(t)}loadImage(t){return g.getImage(this._requestManager.transformRequest(t,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)}moveLayer(t,e){return this.style.moveLayer(t,e),this._update(!0)}removeLayer(t){return this.style.removeLayer(t),this._update(!0)}getLayer(t){return this.style.getLayer(t)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0)}setFilter(t,e,n={}){return this.style.setFilter(t,e,n),this._update(!0)}getFilter(t){return this.style.getFilter(t)}setPaintProperty(t,e,n,i={}){return this.style.setPaintProperty(t,e,n,i),this._update(!0)}getPaintProperty(t,e){return this.style.getPaintProperty(t,e)}setLayoutProperty(t,e,n,i={}){return this.style.setLayoutProperty(t,e,n,i),this._update(!0)}getLayoutProperty(t,e){return this.style.getLayoutProperty(t,e)}setGlyphs(t,e={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(t,e),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(t,e,n={}){return this._lazyInitEmptyStyle(),this.style.addSprite(t,e,n,(t=>{t||this._update(!0)})),this}removeSprite(t){return this._lazyInitEmptyStyle(),this.style.removeSprite(t),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(t,e={}){return this._lazyInitEmptyStyle(),this.style.setSprite(t,e,(t=>{t||this._update(!0)})),this}setLight(t,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)}getLight(){return this.style.getLight()}setSky(t){return this._lazyInitEmptyStyle(),this.style.setSky(t),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(t,e){return this.style.setFeatureState(t,e),this._update()}removeFeatureState(t,e){return this.style.removeFeatureState(t,e),this._update()}getFeatureState(t){return this.style.getFeatureState(t)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]}_setupContainer(){const t=this._container;t.classList.add("maplibregl-map");const e=this._canvasContainer=s.create("div","maplibregl-canvas-container",t);this._interactive&&e.classList.add("maplibregl-interactive"),this._canvas=s.create("canvas","maplibregl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const n=this._containerDimensions(),i=this._getClampedPixelRatio(n[0],n[1]);this._resizeCanvas(n[0],n[1],i);const r=this._controlContainer=s.create("div","maplibregl-control-container",t),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((t=>{o[t]=s.create("div",`maplibregl-ctrl-${t} `,r)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(t,e,n){this._canvas.width=Math.floor(n*t),this._canvas.height=Math.floor(n*e),this._canvas.style.width=`${t}px`,this._canvas.style.height=`${e}px`}_setupPainter(){const t={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let e=null;this._canvas.addEventListener("webglcontextcreationerror",(n=>{e={requestedAttributes:t},n&&(e.statusMessage=n.statusMessage,e.type=n.type)}),{once:!0});const n=this._canvas.getContext("webgl2",t)||this._canvas.getContext("webgl",t);if(!n){const t="Failed to initialize WebGL";throw e?(e.message=t,new Error(JSON.stringify(e))):new Error(t)}this.painter=new gi(n,this.transform),a.testSupport(n)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(t){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(t){return this._update(),this._renderTaskQueue.add(t)}_cancelRenderFrame(t){this._renderTaskQueue.remove(t)}_render(t){const n=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(t),this._removed)return;let i=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const t=this.transform.zoom,r=o.now();this.style.zoomHistory.update(t,r);const s=new e.z(t,{now:r,fadeDuration:n,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),a=s.crossFadingFactor();1===a&&a===this._crossFadingFactor||(i=!0,this._crossFadingFactor=a),this.style.update(s)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,n,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:n,showPadding:this.showPadding}),this.fire(new e.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,e.be.mark(e.bf.load),this.fire(new e.k("load"))),this.style&&(this.style.hasTransitions()||i)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const r=this._sourcesDirty||this._styleDirty||this._placementDirty;return r||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new e.k("idle")),!this._loaded||this._fullyLoaded||r||(this._fullyLoaded=!0,e.be.mark(e.bf.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var t;this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),"undefined"!=typeof window&&removeEventListener("online",this._onWindowOnline,!1),g.removeThrottleControl(this._imageQueueHandle),null===(t=this._resizeObserver)||void 0===t||t.disconnect();const n=this.painter.context.gl.getExtension("WEBGL_lose_context");(null==n?void 0:n.loseContext)&&n.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),s.remove(this._canvasContainer),s.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),e.be.clearMetrics(),this._removed=!0,this.fire(new e.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,o.frameAsync(this._frameRequest).then((t=>{e.be.frame(t),this._frameRequest=null,this._render(t)})).catch((()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())}get showPadding(){return!!this._showPadding}set showPadding(t){this._showPadding!==t&&(this._showPadding=t,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())}get repaint(){return!!this._repaint}set repaint(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(t){this._vertices=t,this._update()}get version(){return Sr}getCameraTargetElevation(){return this.transform.elevation}},t.MapMouseEvent=Di,t.MapTouchEvent=Si,t.MapWheelEvent=Mi,t.Marker=Or,t.NavigationControl=class{constructor(t){this._updateZoomButtons=()=>{const t=this._map.getZoom(),e=t===this._map.getMaxZoom(),n=t===this._map.getMinZoom();this._zoomInButton.disabled=e,this._zoomOutButton.disabled=n,this._zoomInButton.setAttribute("aria-disabled",e.toString()),this._zoomOutButton.setAttribute("aria-disabled",n.toString())},this._rotateCompassArrow=()=>{const t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=t},this._setButtonTitle=(t,e)=>{const n=this._map._getUIString(`NavigationControl.${e}`);t.title=n,t.setAttribute("aria-label",n)},this.options=e.e({},Rr,t),this._container=s.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(t=>this._map.zoomIn({},{originalEvent:t}))),s.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(t=>this._map.zoomOut({},{originalEvent:t}))),s.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})})),this._compassIcon=s.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Nr(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){s.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(t,e){const n=s.create("button",t,this._container);return n.type="button",n.addEventListener("click",e),n}},t.Popup=class extends e.E{constructor(t){super(),this.remove=()=>(this._content&&s.remove(this._content),this._container&&(s.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new e.k("close"))),this),this._onMouseUp=t=>{this._update(t.point)},this._onMouseMove=t=>{this._update(t.point)},this._onDrag=t=>{this._update(t.point)},this._update=t=>{var e;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=s.create("div","maplibregl-popup",this._map.getContainer()),this._tip=s.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const t of this.options.className.split(" "))this._container.classList.add(t);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Tr(this._lngLat,this._flatPos,this._map.transform):null===(e=this._lngLat)||void 0===e?void 0:e.wrap(),this._trackPointer&&!t)return;const n=this._flatPos=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&t?t:this._map.transform.locationPoint(this._lngLat));let i=this.options.anchor;const r=Hr(this.options.offset);if(!i){const t=this._container.offsetWidth,e=this._container.offsetHeight;let o;o=n.y+r.bottom.y<e?["top"]:n.y>this._map.transform.height-e?["bottom"]:[],n.x<t/2?o.push("left"):n.x>this._map.transform.width-t/2&&o.push("right"),i=0===o.length?"bottom":o.join("-")}let o=n.add(r[i]);this.options.subpixelPositioning||(o=o.round()),s.setTransform(this._container,`${Lr[i]} translate(${o.x}px,${o.y}px)`),Fr(this._container,i,"popup")},this._onClose=()=>{this.remove()},this.options=e.e(Object.create(Jr),t)}addTo(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new e.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.N.convert(t),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(t){return this.setDOMContent(document.createTextNode(t))}setHTML(t){const e=document.createDocumentFragment(),n=document.createElement("body");let i;for(n.innerHTML=t;i=n.firstChild,i;)e.appendChild(i);return this.setDOMContent(e)}getMaxWidth(){var t;return null===(t=this._container)||void 0===t?void 0:t.style.maxWidth}setMaxWidth(t){return this.options.maxWidth=t,this._update(),this}setDOMContent(t){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=s.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(t),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(t){return this._container&&this._container.classList.add(t),this}removeClassName(t){return this._container&&this._container.classList.remove(t),this}setOffset(t){return this.options.offset=t,this._update(),this}toggleClassName(t){if(this._container)return this._container.classList.toggle(t)}setSubpixelPositioning(t){this.options.subpixelPositioning=t}_createCloseButton(){this.options.closeButton&&(this._closeButton=s.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const t=this._container.querySelector(qr);t&&t.focus()}},t.RasterDEMTileSource=W,t.RasterTileSource=V,t.ScaleControl=class{constructor(t){this._onMove=()=>{Kr(this._map,this._container,this.options)},this.setUnit=t=>{this.options.unit=t,Kr(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Yr),t)}getDefaultPosition(){return"bottom-left"}onAdd(t){return this._map=t,this._container=s.create("div","maplibregl-ctrl maplibregl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){s.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},t.ScrollZoomHandler=sr,t.Style=ue,t.TerrainControl=class{constructor(t){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=t}onAdd(t){return this._map=t,this._container=s.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=s.create("button","maplibregl-ctrl-terrain",this._container),s.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){s.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},t.TwoFingersTouchPitchHandler=er,t.TwoFingersTouchRotateHandler=$i,t.TwoFingersTouchZoomHandler=Zi,t.TwoFingersTouchZoomRotateHandler=hr,t.VectorTileSource=H,t.VideoSource=tt,t.addSourceType=(t,n)=>e._(void 0,void 0,void 0,(function*(){if(it(t))throw new Error(`A source type called "${t}" already exists.`);((t,e)=>{nt[t]=e})(t,n)})),t.clearPrewarmedResources=function(){const t=L;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(N),L=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},t.getMaxParallelImageRequests=function(){return e.a.MAX_PARALLEL_IMAGE_REQUESTS},t.getRTLTextPluginStatus=function(){return at().getRTLTextPluginStatus()},t.getVersion=function(){return Vr},t.getWorkerCount=function(){return P.workerCount},t.getWorkerUrl=function(){return e.a.WORKER_URL},t.importScriptInWorkers=function(t){return U().broadcast("IS",t)},t.prewarm=function(){O().acquire(N)},t.setMaxParallelImageRequests=function(t){e.a.MAX_PARALLEL_IMAGE_REQUESTS=t},t.setRTLTextPlugin=function(t,e){return at().setRTLTextPlugin(t,e)},t.setWorkerCount=function(t){P.workerCount=t},t.setWorkerUrl=function(t){e.a.WORKER_URL=t}})),t}()},8102:(t,e,n)=>{"use strict";function i(){return i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},i.apply(null,arguments)}n.d(e,{A:()=>i})},9257:(t,e,n)=>{"use strict";function i(t,e){if(null==t)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.includes(i))continue;n[i]=t[i]}return n}n.d(e,{A:()=>i})},1750:(t,e,n)=>{"use strict";function i(t){var e,n,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t)if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=i(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}n.d(e,{A:()=>r});const r=function(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=i(t))&&(r&&(r+=" "),r+=e);return r}}},h={};function g(t){var e=h[t];if(void 0!==e)return e.exports;var n=h[t]={id:t,loaded:!1,exports:{}};return u[t].call(n.exports,n,n.exports,g),n.loaded=!0,n.exports}g.m=u,g.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return g.d(e,{a:e}),e},c=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,g.t=function(t,e){if(1&e&&(t=this(t)),8&e)return t;if("object"==typeof t&&t){if(4&e&&t.__esModule)return t;if(16&e&&"function"==typeof t.then)return t}var n=Object.create(null);g.r(n);var i={};l=l||[null,c({}),c([]),c(c)];for(var r=2&e&&t;"object"==typeof r&&!~l.indexOf(r);r=c(r))Object.getOwnPropertyNames(r).forEach((e=>i[e]=()=>t[e]));return i.default=()=>t,g.d(n,i),n},g.d=(t,e)=>{for(var n in e)g.o(e,n)&&!g.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},g.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),g.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),g.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),g.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},g.b=document.baseURI||self.location.href,g.nc=void 0;var d={};return(()=>{"use strict";g.r(d),g.d(d,{plugin:()=>c3});var t,e=g(7781);!function(t){t.Zero="zero",t.Coordinates="coords",t.Auto="auto"}(t||(t={}));const n=new e.Registry((()=>[{id:"auto",name:"Fit to data"},{id:"zero",name:"(0, 0)",lat:0,lon:0},{id:"north-america",name:"North America",lat:40,lon:-100,zoom:4},{id:"europe",name:"Europe",lat:46,lon:14,zoom:4},{id:"west-asia",name:"West Asia",lat:26,lon:53,zoom:4},{id:"se-asia",name:"South-east Asia",lat:10,lon:106,zoom:4},{id:"coords",name:"Coordinates"}])),i={id:t.Zero,lat:0,lon:0,zoom:1};var r=g(5959),o=g.n(r),s=g(4123);var a=6371008.8,A={centimeters:100*a,centimetres:100*a,degrees:a/111325,feet:3.28084*a,inches:39.37*a,kilometers:a/1e3,kilometres:a/1e3,meters:a,metres:a,miles:a/1609.344,millimeters:1e3*a,millimetres:1e3*a,nauticalmiles:a/1852,radians:1,yards:1.0936*a};function l(t,e,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function c(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!v(t[0])||!v(t[1]))throw new Error("coordinates must contain numbers");return l({type:"Point",coordinates:t},e,n)}function u(t,e,n){void 0===n&&(n={});for(var i=0,r=t;i<r.length;i++){var o=r[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++)if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}return l({type:"Polygon",coordinates:t},e,n)}function h(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return l({type:"LineString",coordinates:t},e,n)}function p(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function f(t,e,n){return void 0===n&&(n={}),l({type:"MultiLineString",coordinates:t},e,n)}function m(t,e,n){return void 0===n&&(n={}),l({type:"MultiPolygon",coordinates:t},e,n)}function I(t,e){void 0===e&&(e="kilometers");var n=A[e];if(!n)throw new Error(e+" units is invalid");return t*n}function y(t,e){void 0===e&&(e="kilometers");var n=A[e];if(!n)throw new Error(e+" units is invalid");return t/n}function C(t){return 180*(t%(2*Math.PI))/Math.PI}function E(t){return t%360*Math.PI/180}function _(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return I(y(t,e),n)}function v(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function B(t){return!!t&&t.constructor===Object}function w(t,e,n){if(null!==t)for(var i,r,o,s,a,A,l,c,u=0,h=0,g=t.type,d="FeatureCollection"===g,p="Feature"===g,f=d?t.features.length:1,m=0;m<f;m++){a=(c=!!(l=d?t.features[m].geometry:p?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var I=0;I<a;I++){var y=0,C=0;if(null!==(s=c?l.geometries[I]:l)){A=s.coordinates;var E=s.type;switch(u=!n||"Polygon"!==E&&"MultiPolygon"!==E?0:1,E){case null:break;case"Point":if(!1===e(A,h,m,y,C))return!1;h++,y++;break;case"LineString":case"MultiPoint":for(i=0;i<A.length;i++){if(!1===e(A[i],h,m,y,C))return!1;h++,"MultiPoint"===E&&y++}"LineString"===E&&y++;break;case"Polygon":case"MultiLineString":for(i=0;i<A.length;i++){for(r=0;r<A[i].length-u;r++){if(!1===e(A[i][r],h,m,y,C))return!1;h++}"MultiLineString"===E&&y++,"Polygon"===E&&C++}"Polygon"===E&&y++;break;case"MultiPolygon":for(i=0;i<A.length;i++){for(C=0,r=0;r<A[i].length;r++){for(o=0;o<A[i][r].length-u;o++){if(!1===e(A[i][r][o],h,m,y,C))return!1;h++}C++}y++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===w(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function b(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function Q(t,e){var n,i,r,o,s,a,A,l,c,u,h=0,g="FeatureCollection"===t.type,d="Feature"===t.type,p=g?t.features.length:1;for(n=0;n<p;n++){for(a=g?t.features[n].geometry:d?t.geometry:t,l=g?t.features[n].properties:d?t.properties:{},c=g?t.features[n].bbox:d?t.bbox:void 0,u=g?t.features[n].id:d?t.id:void 0,s=(A=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<s;r++)if(null!==(o=A?a.geometries[r]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,h,l,c,u))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===e(o.geometries[i],h,l,c,u))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,h,l,c,u))return!1;h++}}function x(t,e){Q(t,(function(t,n,i,r,o){var s,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(l(t,i,{bbox:r,id:o}),n,0)&&void 0}switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var A=0;A<t.coordinates.length;A++){var c=t.coordinates[A];if(!1===e(l({type:s,coordinates:c},i),n,A))return!1}}))}function D(t,e){x(t,(function(t,n,i){var r=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var s,a=0,A=0,l=0;return!1!==w(t,(function(o,c,u,g,d){if(void 0===s||n>a||g>A||d>l)return s=o,a=n,A=g,l=d,void(r=0);var p=h([s,o],t.properties);if(!1===e(p,n,i,d,r))return!1;r++,s=o}))&&void 0}}}))}function S(t){var e=[1/0,1/0,-1/0,-1/0];return w(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}S.default=S;const M=S;function k(t,e){void 0===e&&(e={});var n=Number(t[0]),i=Number(t[1]),r=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[n,i];return u([[s,[r,i],[r,o],[n,o],s]],e.properties,{bbox:t,id:e.id})}function R(t){var e=[1/0,1/0,-1/0,-1/0];return w(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}R.default=R;const N=R;const P=function(t,e){void 0===e&&(e={});var n=N(t);return c([(n[0]+n[2])/2,(n[1]+n[3])/2],e.properties,e)};var T=g(7155);function L(){return new F}function F(){this.reset()}F.prototype={constructor:F,reset:function(){this.s=this.t=0},add:function(t){G(O,t,this.t),G(this,O.s,this.s),this.s?this.t+=O.t:this.s=O.t},valueOf:function(){return this.s}};var O=new F;function G(t,e,n){var i=t.s=e+n,r=i-e,o=i-r;t.t=e-o+(n-r)}var U=1e-6,j=Math.PI,Y=j/2,K=j/4,z=2*j,J=180/j,q=j/180,H=Math.abs,V=Math.atan,W=Math.atan2,Z=Math.cos,X=(Math.ceil,Math.exp),$=(Math.floor,Math.log),tt=(Math.pow,Math.sin),et=(Math.sign,Math.sqrt),nt=Math.tan;function it(t){return t>1?0:t<-1?j:Math.acos(t)}function rt(t){return t>1?Y:t<-1?-Y:Math.asin(t)}function ot(){}function st(t,e){t&&At.hasOwnProperty(t.type)&&At[t.type](t,e)}var at={Feature:function(t,e){st(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)st(n[i].geometry,e)}},At={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){lt(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)lt(n[i],e,0)},Polygon:function(t,e){ct(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)ct(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)st(n[i],e)}};function lt(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function ct(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)lt(t[n],e,1);e.polygonEnd()}function ut(t,e){t&&at.hasOwnProperty(t.type)?at[t.type](t,e):st(t,e)}L(),L();function ht(t){return[W(t[1],t[0]),rt(t[2])]}function gt(t){var e=t[0],n=t[1],i=Z(n);return[i*Z(e),i*tt(e),tt(n)]}function dt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function pt(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ft(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function mt(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function It(t){var e=et(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}L();function yt(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n}function Ct(t,e){return[t>j?t-z:t<-j?t+z:t,e]}function Et(t,e,n){return(t%=z)?e||n?yt(vt(t),Bt(e,n)):vt(t):e||n?Bt(e,n):Ct}function _t(t){return function(e,n){return[(e+=t)>j?e-z:e<-j?e+z:e,n]}}function vt(t){var e=_t(t);return e.invert=_t(-t),e}function Bt(t,e){var n=Z(t),i=tt(t),r=Z(e),o=tt(e);function s(t,e){var s=Z(e),a=Z(t)*s,A=tt(t)*s,l=tt(e),c=l*n+a*i;return[W(A*r-c*o,a*n-l*i),rt(c*r+A*o)]}return s.invert=function(t,e){var s=Z(e),a=Z(t)*s,A=tt(t)*s,l=tt(e),c=l*r-A*o;return[W(A*r+l*o,a*n+c*i),rt(c*n-a*i)]},s}function wt(t,e,n,i,r,o){if(n){var s=Z(e),a=tt(e),A=i*n;null==r?(r=e+i*z,o=e-A/2):(r=bt(s,r),o=bt(s,o),(i>0?r<o:r>o)&&(r+=i*z));for(var l,c=r;i>0?c>o:c<o;c-=A)l=ht([s,-a*Z(c),-a*tt(c)]),t.point(l[0],l[1])}}function bt(t,e){(e=gt(e))[0]-=t,It(e);var n=it(-e[1]);return((-e[2]<0?-n:n)+z-U)%z}function Qt(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:ot,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function xt(t,e){return H(t[0]-e[0])<U&&H(t[1]-e[1])<U}function Dt(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function St(t,e,n,i,r){var o,s,a=[],A=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],s=t[e];if(xt(i,s)){for(r.lineStart(),o=0;o<e;++o)r.point((i=t[o])[0],i[1]);r.lineEnd()}else a.push(n=new Dt(i,t,null,!0)),A.push(n.o=new Dt(i,null,n,!1)),a.push(n=new Dt(s,t,null,!1)),A.push(n.o=new Dt(s,null,n,!0))}})),a.length){for(A.sort(e),Mt(a),Mt(A),o=0,s=A.length;o<s;++o)A[o].e=n=!n;for(var l,c,u=a[0];;){for(var h=u,g=!0;h.v;)if((h=h.n)===u)return;l=h.z,r.lineStart();do{if(h.v=h.o.v=!0,h.e){if(g)for(o=0,s=l.length;o<s;++o)r.point((c=l[o])[0],c[1]);else i(h.x,h.n.x,1,r);h=h.n}else{if(g)for(l=h.p.z,o=l.length-1;o>=0;--o)r.point((c=l[o])[0],c[1]);else i(h.x,h.p.x,-1,r);h=h.p}l=(h=h.o).z,g=!g}while(!h.v);r.lineEnd()}}}function Mt(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function kt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}Ct.invert=Ct;var Rt=function(t){return 1===t.length&&(t=function(t){return function(e,n){return kt(t(e),n)}}(t)),{left:function(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){var o=i+r>>>1;t(e[o],n)<0?i=o+1:r=o}return i},right:function(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){var o=i+r>>>1;t(e[o],n)>0?r=o:i=o+1}return i}}}(kt);Rt.right,Rt.left;var Nt=Array.prototype;Nt.slice,Nt.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);function Pt(t){for(var e,n,i,r=t.length,o=-1,s=0;++o<r;)s+=t[o].length;for(n=new Array(s);--r>=0;)for(e=(i=t[r]).length;--e>=0;)n[--s]=i[e];return n}var Tt=1e9,Lt=-Tt;function Ft(t,e,n,i){function r(r,o){return t<=r&&r<=n&&e<=o&&o<=i}function o(r,o,a,l){var c=0,u=0;if(null==r||(c=s(r,a))!==(u=s(o,a))||A(r,o)<0^a>0)do{l.point(0===c||3===c?t:n,c>1?i:e)}while((c=(c+a+4)%4)!==u);else l.point(o[0],o[1])}function s(i,r){return H(i[0]-t)<U?r>0?0:3:H(i[0]-n)<U?r>0?2:1:H(i[1]-e)<U?r>0?1:0:r>0?3:2}function a(t,e){return A(t.x,e.x)}function A(t,e){var n=s(t,1),i=s(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){var A,l,c,u,h,g,d,p,f,m,I,y=s,C=Qt(),E={point:_,lineStart:function(){E.point=v,l&&l.push(c=[]);m=!0,f=!1,d=p=NaN},lineEnd:function(){A&&(v(u,h),g&&f&&C.rejoin(),A.push(C.result()));E.point=_,f&&y.lineEnd()},polygonStart:function(){y=C,A=[],l=[],I=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,r=l.length;n<r;++n)for(var o,s,a=l[n],A=1,c=a.length,u=a[0],h=u[0],g=u[1];A<c;++A)o=h,s=g,h=(u=a[A])[0],g=u[1],s<=i?g>i&&(h-o)*(i-s)>(g-s)*(t-o)&&++e:g<=i&&(h-o)*(i-s)<(g-s)*(t-o)&&--e;return e}(),n=I&&e,r=(A=Pt(A)).length;(n||r)&&(s.polygonStart(),n&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),r&&St(A,a,e,o,s),s.polygonEnd());y=s,A=l=c=null}};function _(t,e){r(t,e)&&y.point(t,e)}function v(o,s){var a=r(o,s);if(l&&c.push([o,s]),m)u=o,h=s,g=a,m=!1,a&&(y.lineStart(),y.point(o,s));else if(a&&f)y.point(o,s);else{var A=[d=Math.max(Lt,Math.min(Tt,d)),p=Math.max(Lt,Math.min(Tt,p))],C=[o=Math.max(Lt,Math.min(Tt,o)),s=Math.max(Lt,Math.min(Tt,s))];!function(t,e,n,i,r,o){var s,a=t[0],A=t[1],l=0,c=1,u=e[0]-a,h=e[1]-A;if(s=n-a,u||!(s>0)){if(s/=u,u<0){if(s<l)return;s<c&&(c=s)}else if(u>0){if(s>c)return;s>l&&(l=s)}if(s=r-a,u||!(s<0)){if(s/=u,u<0){if(s>c)return;s>l&&(l=s)}else if(u>0){if(s<l)return;s<c&&(c=s)}if(s=i-A,h||!(s>0)){if(s/=h,h<0){if(s<l)return;s<c&&(c=s)}else if(h>0){if(s>c)return;s>l&&(l=s)}if(s=o-A,h||!(s<0)){if(s/=h,h<0){if(s>c)return;s>l&&(l=s)}else if(h>0){if(s<l)return;s<c&&(c=s)}return l>0&&(t[0]=a+l*u,t[1]=A+l*h),c<1&&(e[0]=a+c*u,e[1]=A+c*h),!0}}}}}(A,C,t,e,n,i)?a&&(y.lineStart(),y.point(o,s),I=!1):(f||(y.lineStart(),y.point(A[0],A[1])),y.point(C[0],C[1]),a||y.lineEnd(),I=!1)}d=o,p=s,f=a}return E}}var Ot=L();function Gt(t,e){var n=e[0],i=e[1],r=[tt(n),-Z(n),0],o=0,s=0;Ot.reset();for(var a=0,A=t.length;a<A;++a)if(c=(l=t[a]).length)for(var l,c,u=l[c-1],h=u[0],g=u[1]/2+K,d=tt(g),p=Z(g),f=0;f<c;++f,h=I,d=C,p=E,u=m){var m=l[f],I=m[0],y=m[1]/2+K,C=tt(y),E=Z(y),_=I-h,v=_>=0?1:-1,B=v*_,w=B>j,b=d*C;if(Ot.add(W(b*v*tt(B),p*E+b*Z(B))),o+=w?_+v*z:_,w^h>=n^I>=n){var Q=pt(gt(u),gt(m));It(Q);var x=pt(r,Q);It(x);var D=(w^_>=0?-1:1)*rt(x[2]);(i>D||i===D&&(Q[0]||Q[1]))&&(s+=w^_>=0?1:-1)}}return(o<-U||o<U&&Ot<-U)^1&s}L();L(),L();var Ut=1/0,jt=Ut,Yt=-Ut,Kt=Yt,zt={point:function(t,e){t<Ut&&(Ut=t);t>Yt&&(Yt=t);e<jt&&(jt=e);e>Kt&&(Kt=e)},lineStart:ot,lineEnd:ot,polygonStart:ot,polygonEnd:ot,result:function(){var t=[[Ut,jt],[Yt,Kt]];return Yt=Kt=-(jt=Ut=1/0),t}};const Jt=zt;L();function qt(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Ht(t,e,n,i){return function(r,o){var s,a,A,l=e(o),c=r.invert(i[0],i[1]),u=Qt(),h=e(u),g=!1,d={point:p,lineStart:m,lineEnd:I,polygonStart:function(){d.point=y,d.lineStart=C,d.lineEnd=E,a=[],s=[]},polygonEnd:function(){d.point=p,d.lineStart=m,d.lineEnd=I,a=Pt(a);var t=Gt(s,c);a.length?(g||(o.polygonStart(),g=!0),St(a,Wt,t,n,o)):t&&(g||(o.polygonStart(),g=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),g&&(o.polygonEnd(),g=!1),a=s=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function p(e,n){var i=r(e,n);t(e=i[0],n=i[1])&&o.point(e,n)}function f(t,e){var n=r(t,e);l.point(n[0],n[1])}function m(){d.point=f,l.lineStart()}function I(){d.point=p,l.lineEnd()}function y(t,e){A.push([t,e]);var n=r(t,e);h.point(n[0],n[1])}function C(){h.lineStart(),A=[]}function E(){y(A[0][0],A[0][1]),h.lineEnd();var t,e,n,i,r=h.clean(),l=u.result(),c=l.length;if(A.pop(),s.push(A),A=null,c)if(1&r){if((e=(n=l[0]).length-1)>0){for(g||(o.polygonStart(),g=!0),o.lineStart(),t=0;t<e;++t)o.point((i=n[t])[0],i[1]);o.lineEnd()}}else c>1&&2&r&&l.push(l.pop().concat(l.shift())),a.push(l.filter(Vt))}return d}}function Vt(t){return t.length>1}function Wt(t,e){return((t=t.x)[0]<0?t[1]-Y-U:Y-t[1])-((e=e.x)[0]<0?e[1]-Y-U:Y-e[1])}qt(4.5);const Zt=Ht((function(){return!0}),(function(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?j:-j,A=H(o-n);H(A-j)<U?(t.point(n,i=(i+s)/2>0?Y:-Y),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),t.point(o,i),e=0):r!==a&&A>=j&&(H(n-r)<U&&(n-=r*U),H(o-a)<U&&(o-=a*U),i=function(t,e,n,i){var r,o,s=tt(t-n);return H(s)>U?V((tt(e)*(o=Z(i))*tt(n)-tt(i)*(r=Z(e))*tt(t))/(r*o*s)):(e+i)/2}(n,i,o,s),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),e=0),t.point(n=o,i=s),r=a},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}),(function(t,e,n,i){var r;if(null==t)r=n*Y,i.point(-j,r),i.point(0,r),i.point(j,r),i.point(j,0),i.point(j,-r),i.point(0,-r),i.point(-j,-r),i.point(-j,0),i.point(-j,r);else if(H(t[0]-e[0])>U){var o=t[0]<e[0]?j:-j;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}),[-j,-Y]);function Xt(t){return t}function $t(t){return function(e){var n=new te;for(var i in t)n[i]=t[i];return n.stream=e,n}}function te(){}function ee(t,e,n){var i=e[1][0]-e[0][0],r=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),ut(n,t.stream(Jt));var s=Jt.result(),a=Math.min(i/(s[1][0]-s[0][0]),r/(s[1][1]-s[0][1])),A=+e[0][0]+(i-a*(s[1][0]+s[0][0]))/2,l=+e[0][1]+(r-a*(s[1][1]+s[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([A,l])}te.prototype={constructor:te,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ne=16,ie=Z(30*q);function re(t,e){return+e?function(t,e){function n(i,r,o,s,a,A,l,c,u,h,g,d,p,f){var m=l-i,I=c-r,y=m*m+I*I;if(y>4*e&&p--){var C=s+h,E=a+g,_=A+d,v=et(C*C+E*E+_*_),B=rt(_/=v),w=H(H(_)-1)<U||H(o-u)<U?(o+u)/2:W(E,C),b=t(w,B),Q=b[0],x=b[1],D=Q-i,S=x-r,M=I*D-m*S;(M*M/y>e||H((m*D+I*S)/y-.5)>.3||s*h+a*g+A*d<ie)&&(n(i,r,o,s,a,A,Q,x,w,C/=v,E/=v,_,p,f),f.point(Q,x),n(Q,x,w,C,E,_,l,c,u,h,g,d,p,f))}}return function(e){var i,r,o,s,a,A,l,c,u,h,g,d,p={point:f,lineStart:m,lineEnd:y,polygonStart:function(){e.polygonStart(),p.lineStart=C},polygonEnd:function(){e.polygonEnd(),p.lineStart=m}};function f(n,i){n=t(n,i),e.point(n[0],n[1])}function m(){c=NaN,p.point=I,e.lineStart()}function I(i,r){var o=gt([i,r]),s=t(i,r);n(c,u,l,h,g,d,c=s[0],u=s[1],l=i,h=o[0],g=o[1],d=o[2],ne,e),e.point(c,u)}function y(){p.point=f,e.lineEnd()}function C(){m(),p.point=E,p.lineEnd=_}function E(t,e){I(i=t,e),r=c,o=u,s=h,a=g,A=d,p.point=I}function _(){n(c,u,l,h,g,d,r,o,i,s,a,A,ne,e),p.lineEnd=y,y()}return p}}(t,e):function(t){return $t({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var oe=$t({point:function(t,e){this.stream.point(t*q,e*q)}});function se(t){return function(t){var e,n,i,r,o,s,a,A,l,c,u=150,h=480,g=250,d=0,p=0,f=0,m=0,I=0,y=null,C=Zt,E=null,_=Xt,v=.5,B=re(Q,v);function w(t){return[(t=o(t[0]*q,t[1]*q))[0]*u+n,i-t[1]*u]}function b(t){return(t=o.invert((t[0]-n)/u,(i-t[1])/u))&&[t[0]*J,t[1]*J]}function Q(t,r){return[(t=e(t,r))[0]*u+n,i-t[1]*u]}function x(){o=yt(r=Et(f,m,I),e);var t=e(d,p);return n=h-t[0]*u,i=g+t[1]*u,D()}function D(){return l=c=null,w}return w.stream=function(t){return l&&c===t?l:l=oe(C(r,B(_(c=t))))},w.clipAngle=function(t){return arguments.length?(C=+t?function(t,e){var n=Z(t),i=n>0,r=H(n)>U;function o(t,e){return Z(t)*Z(e)>n}function s(t,e,i){var r=[1,0,0],o=pt(gt(t),gt(e)),s=dt(o,o),a=o[0],A=s-a*a;if(!A)return!i&&t;var l=n*s/A,c=-n*a/A,u=pt(r,o),h=mt(r,l);ft(h,mt(o,c));var g=u,d=dt(h,g),p=dt(g,g),f=d*d-p*(dt(h,h)-1);if(!(f<0)){var m=et(f),I=mt(g,(-d-m)/p);if(ft(I,h),I=ht(I),!i)return I;var y,C=t[0],E=e[0],_=t[1],v=e[1];E<C&&(y=C,C=E,E=y);var B=E-C,w=H(B-j)<U;if(!w&&v<_&&(y=_,_=v,v=y),w||B<U?w?_+v>0^I[1]<(H(I[0]-C)<U?_:v):_<=I[1]&&I[1]<=v:B>j^(C<=I[0]&&I[0]<=E)){var b=mt(g,(-d+m)/p);return ft(b,h),[I,ht(b)]}}}function a(e,n){var r=i?t:j-t,o=0;return e<-r?o|=1:e>r&&(o|=2),n<-r?o|=4:n>r&&(o|=8),o}return Ht(o,(function(t){var e,n,A,l,c;return{lineStart:function(){l=A=!1,c=1},point:function(u,h){var g,d=[u,h],p=o(u,h),f=i?p?0:a(u,h):p?a(u+(u<0?j:-j),h):0;if(!e&&(l=A=p)&&t.lineStart(),p!==A&&(!(g=s(e,d))||xt(e,g)||xt(d,g))&&(d[0]+=U,d[1]+=U,p=o(d[0],d[1])),p!==A)c=0,p?(t.lineStart(),g=s(d,e),t.point(g[0],g[1])):(g=s(e,d),t.point(g[0],g[1]),t.lineEnd()),e=g;else if(r&&e&&i^p){var m;f&n||!(m=s(d,e,!0))||(c=0,i?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!p||e&&xt(e,d)||t.point(d[0],d[1]),e=d,A=p,n=f},lineEnd:function(){A&&t.lineEnd(),e=null},clean:function(){return c|(l&&A)<<1}}}),(function(n,i,r,o){wt(o,t,e,r,n,i)}),i?[0,-t]:[-j,t-j])}(y=t*q,6*q):(y=null,Zt),D()):y*J},w.clipExtent=function(t){return arguments.length?(_=null==t?(E=s=a=A=null,Xt):Ft(E=+t[0][0],s=+t[0][1],a=+t[1][0],A=+t[1][1]),D()):null==E?null:[[E,s],[a,A]]},w.scale=function(t){return arguments.length?(u=+t,x()):u},w.translate=function(t){return arguments.length?(h=+t[0],g=+t[1],x()):[h,g]},w.center=function(t){return arguments.length?(d=t[0]%360*q,p=t[1]%360*q,x()):[d*J,p*J]},w.rotate=function(t){return arguments.length?(f=t[0]%360*q,m=t[1]%360*q,I=t.length>2?t[2]%360*q:0,x()):[f*J,m*J,I*J]},w.precision=function(t){return arguments.length?(B=re(Q,v=t*t),D()):et(v)},w.fitExtent=function(t,e){return ee(w,t,e)},w.fitSize=function(t,e){return function(t,e,n){return ee(t,[[0,0],e],n)}(w,t,e)},function(){return e=t.apply(this,arguments),w.invert=e.invert&&b,x()}}((function(){return t}))()}function ae(t){return function(e,n){var i=Z(e),r=Z(n),o=t(i*r);return[o*r*tt(e),o*tt(n)]}}function Ae(t){return function(e,n){var i=et(e*e+n*n),r=t(i),o=tt(r),s=Z(r);return[W(e*o,i*s),rt(i&&n*o/i)]}}var le=ae((function(t){return et(2/(1+t))}));le.invert=Ae((function(t){return 2*rt(t/2)}));var ce=ae((function(t){return(t=it(t))&&t/tt(t)}));function ue(t,e){return[t,$(nt((Y+e)/2))]}function he(t,e){return[t,e]}function ge(t,e){var n=Z(e),i=Z(t)*n;return[n*tt(t)/i,tt(e)/i]}function de(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791)),e*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))]}function pe(t,e){return[Z(e)*tt(t),tt(e)]}function fe(t,e){var n=Z(e),i=1+Z(t)*n;return[n*tt(t)/i,tt(e)/i]}function me(t,e){return[$(nt((Y+e)/2)),-t]}function Ie(t,e,n,i){var r=t.properties||{},o="Feature"===t.type?t.geometry:t;if("GeometryCollection"===o.type){var s=[];return Q(t,(function(t){var r=Ie(t,e,n,i);r&&s.push(r)})),p(s)}var A=function(t){var e=P(t).geometry.coordinates,n=[-e[0],-e[1]];return se(ce).scale(79.4188).clipAngle(179.999).rotate(n).scale(a)}(o),c={type:o.type,coordinates:Ce(o.coordinates,A)},u=(new T.GeoJSONReader).read(c),h=I(y(e,n),"meters"),g=T.BufferOp.bufferOp(u,h,i);if(!ye((g=(new T.GeoJSONWriter).write(g)).coordinates))return l({type:g.type,coordinates:Ee(g.coordinates,A)},r)}function ye(t){return Array.isArray(t[0])?ye(t[0]):isNaN(t[0])}function Ce(t,e){return"object"!=typeof t[0]?e(t):t.map((function(t){return Ce(t,e)}))}function Ee(t,e){return"object"!=typeof t[0]?e.invert(t):t.map((function(t){return Ee(t,e)}))}ce.invert=Ae((function(t){return t})),ue.invert=function(t,e){return[t,2*V(X(e))-Y]},he.invert=he,ge.invert=Ae(V),de.invert=function(t,e){var n,i=e,r=25;do{var o=i*i,s=o*o;i-=n=(i*(1.007226+o*(.015085+s*(.028874*o-.044475-.005916*s)))-e)/(1.007226+o*(.045255+s*(.259866*o-.311325-.005916*11*s)))}while(H(n)>U&&--r>0);return[t/(.8707+(o=i*i)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),i]},pe.invert=Ae(rt),fe.invert=Ae((function(t){return 2*V(t)})),me.invert=function(t,e){return[-e,2*V(X(t))-Y]};const _e=function(t,e,n){var i=(n=n||{}).units||"kilometers",r=n.steps||8;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(r<=0)throw new Error("steps must be greater than 0");var o=[];switch(t.type){case"GeometryCollection":return Q(t,(function(t){var n=Ie(t,e,i,r);n&&o.push(n)})),p(o);case"FeatureCollection":return b(t,(function(t){var n=Ie(t,e,i,r);n&&b(n,(function(t){t&&o.push(t)}))})),p(o)}return Ie(t,e,i,r)};var ve=g(1640);function Be(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function we(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function be(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function Qe(t){return"Feature"===t.type?t.geometry:t}const xe=function(t,e){var n=Qe(t),i=Qe(e),r=t.properties||{},o=ve.difference(n.coordinates,i.coordinates);return 0===o.length?null:1===o.length?u(o[0],r):m(o,r)};const De=function(t,e,n){void 0===n&&(n={});var i=Be(t),r=Be(e),o=E(r[1]-i[1]),s=E(r[0]-i[0]),a=E(i[1]),A=E(r[1]),l=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(a)*Math.cos(A);return I(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),n.units)};g(792);const Se={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Me;const ke=new Uint8Array(16);function Re(){if(!Me&&(Me="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Me))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Me(ke)}const Ne=[];for(let t=0;t<256;++t)Ne.push((t+256).toString(16).slice(1));function Pe(t,e=0){return(Ne[t[e+0]]+Ne[t[e+1]]+Ne[t[e+2]]+Ne[t[e+3]]+"-"+Ne[t[e+4]]+Ne[t[e+5]]+"-"+Ne[t[e+6]]+Ne[t[e+7]]+"-"+Ne[t[e+8]]+Ne[t[e+9]]+"-"+Ne[t[e+10]]+Ne[t[e+11]]+Ne[t[e+12]]+Ne[t[e+13]]+Ne[t[e+14]]+Ne[t[e+15]]).toLowerCase()}const Te=function(t,e,n){if(Se.randomUUID&&!e&&!t)return Se.randomUUID();const i=(t=t||{}).random||(t.rng||Re)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){n=n||0;for(let t=0;t<16;++t)e[n+t]=i[t];return e}return Pe(i)};function Le(t,e,n,i){void 0===i&&(i={});var r=Be(t),o=E(r[0]),s=E(r[1]),a=E(n),A=y(e,i.units),l=Math.asin(Math.sin(s)*Math.cos(A)+Math.cos(s)*Math.sin(A)*Math.cos(a));return c([C(o+Math.atan2(Math.sin(a)*Math.sin(A)*Math.cos(s),Math.cos(A)-Math.sin(s)*Math.sin(l))),C(l)],i.properties)}function Fe(t,e,n){if(void 0===n&&(n={}),!0===n.final)return function(t,e){var n=Fe(e,t);return n=(n+180)%360}(t,e);var i=Be(t),r=Be(e),o=E(i[0]),s=E(r[0]),a=E(i[1]),A=E(r[1]),l=Math.sin(s-o)*Math.cos(A),c=Math.cos(a)*Math.sin(A)-Math.sin(a)*Math.cos(A)*Math.cos(s-o);return C(Math.atan2(l,c))}const Oe=function(t,e,n){void 0===n&&(n={});var i=Be(t),r=Be(e);r[0]+=r[0]-i[0]>180?-360:i[0]-r[0]>180?360:0;var o=function(t,e,n){var i=n=void 0===n?a:Number(n),r=t[1]*Math.PI/180,o=e[1]*Math.PI/180,s=o-r,A=Math.abs(e[0]-t[0])*Math.PI/180;A>Math.PI&&(A-=2*Math.PI);var l=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(r/2+Math.PI/4)),c=Math.abs(l)>1e-11?s/l:Math.cos(r),u=Math.sqrt(s*s+c*c*A*A),h=u*i;return h}(i,r);return _(o,"meters",n.units)};function Ge(t,e){return t[0]*e[0]+t[1]*e[1]}function Ue(t,e,n){return"planar"===n.method?Oe(t,e,n):De(t,e,n)}const je=function(t,e,n){if(void 0===n&&(n={}),n.method||(n.method="geodesic"),n.units||(n.units="kilometers"),!t)throw new Error("pt is required");if(Array.isArray(t)?t=c(t):"Point"===t.type?t=l(t):be(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=h(e):"LineString"===e.type?e=l(e):be(e,"LineString","line");var i=1/0,r=t.geometry.coordinates;return D(e,(function(t){var e=t.geometry.coordinates[0],o=t.geometry.coordinates[1],s=function(t,e,n,i){var r=[n[0]-e[0],n[1]-e[1]],o=[t[0]-e[0],t[1]-e[1]],s=Ge(o,r);if(s<=0)return Ue(t,e,{method:i.method,units:"degrees"});var a=Ge(r,r);if(a<=s)return Ue(t,n,{method:i.method,units:"degrees"});var A=s/a,l=[e[0]+A*r[0],e[1]+A*r[1]];return Ue(t,l,{method:i.method,units:"degrees"})}(r,e,o,n);s<i&&(i=s)})),_(i,"degrees",n.units)};function Ye(t){return Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ye(t)}function Ke(t){var e=function(t,e){if("object"!=Ye(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=Ye(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ye(e)?e:e+""}function ze(t,e,n){return(e=Ke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Je=1e-6,qe="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var He,Ve;He=new qe(4),qe!=Float32Array&&(He[0]=0,He[1]=0,He[2]=0,He[3]=0),Ve=He;function We(t,e){const n=function(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*s,t[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*s,t[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*s,t[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*s,t}([],e,t);return function(t,e,n){t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n}(n,n,1/n[3]),n}function Ze(t,e,n){return t<e?e:t>n?n:t}const Xe=Math.log2||function(t){return Math.log(t)*Math.LOG2E};function $e(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],A=e[5],l=e[6],c=e[7],u=e[8],h=e[9],g=e[10],d=e[11],p=e[12],f=e[13],m=e[14],I=e[15],y=n[0],C=n[1],E=n[2],_=n[3];return t[0]=y*i+C*a+E*u+_*p,t[1]=y*r+C*A+E*h+_*f,t[2]=y*o+C*l+E*g+_*m,t[3]=y*s+C*c+E*d+_*I,y=n[4],C=n[5],E=n[6],_=n[7],t[4]=y*i+C*a+E*u+_*p,t[5]=y*r+C*A+E*h+_*f,t[6]=y*o+C*l+E*g+_*m,t[7]=y*s+C*c+E*d+_*I,y=n[8],C=n[9],E=n[10],_=n[11],t[8]=y*i+C*a+E*u+_*p,t[9]=y*r+C*A+E*h+_*f,t[10]=y*o+C*l+E*g+_*m,t[11]=y*s+C*c+E*d+_*I,y=n[12],C=n[13],E=n[14],_=n[15],t[12]=y*i+C*a+E*u+_*p,t[13]=y*r+C*A+E*h+_*f,t[14]=y*o+C*l+E*g+_*m,t[15]=y*s+C*c+E*d+_*I,t}function tn(t,e,n){var i,r,o,s,a,A,l,c,u,h,g,d,p=n[0],f=n[1],m=n[2];return e===t?(t[12]=e[0]*p+e[4]*f+e[8]*m+e[12],t[13]=e[1]*p+e[5]*f+e[9]*m+e[13],t[14]=e[2]*p+e[6]*f+e[10]*m+e[14],t[15]=e[3]*p+e[7]*f+e[11]*m+e[15]):(i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],A=e[5],l=e[6],c=e[7],u=e[8],h=e[9],g=e[10],d=e[11],t[0]=i,t[1]=r,t[2]=o,t[3]=s,t[4]=a,t[5]=A,t[6]=l,t[7]=c,t[8]=u,t[9]=h,t[10]=g,t[11]=d,t[12]=i*p+a*f+u*m+e[12],t[13]=r*p+A*f+h*m+e[13],t[14]=o*p+l*f+g*m+e[14],t[15]=s*p+c*f+d*m+e[15]),t}function en(t,e,n){var i=n[0],r=n[1],o=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}var nn=function(t,e,n,i,r){var o,s=1/Math.tan(e/2);return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(o=1/(i-r),t[10]=(r+i)*o,t[14]=2*r*i*o):(t[10]=-1,t[14]=-2*i),t};function rn(t,e){var n=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],A=t[6],l=t[7],c=t[8],u=t[9],h=t[10],g=t[11],d=t[12],p=t[13],f=t[14],m=t[15],I=e[0],y=e[1],C=e[2],E=e[3],_=e[4],v=e[5],B=e[6],w=e[7],b=e[8],Q=e[9],x=e[10],D=e[11],S=e[12],M=e[13],k=e[14],R=e[15];return Math.abs(n-I)<=Je*Math.max(1,Math.abs(n),Math.abs(I))&&Math.abs(i-y)<=Je*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(r-C)<=Je*Math.max(1,Math.abs(r),Math.abs(C))&&Math.abs(o-E)<=Je*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(s-_)<=Je*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(a-v)<=Je*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(A-B)<=Je*Math.max(1,Math.abs(A),Math.abs(B))&&Math.abs(l-w)<=Je*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(c-b)<=Je*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(u-Q)<=Je*Math.max(1,Math.abs(u),Math.abs(Q))&&Math.abs(h-x)<=Je*Math.max(1,Math.abs(h),Math.abs(x))&&Math.abs(g-D)<=Je*Math.max(1,Math.abs(g),Math.abs(D))&&Math.abs(d-S)<=Je*Math.max(1,Math.abs(d),Math.abs(S))&&Math.abs(p-M)<=Je*Math.max(1,Math.abs(p),Math.abs(M))&&Math.abs(f-k)<=Je*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(m-R)<=Je*Math.max(1,Math.abs(m),Math.abs(R))}function on(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function sn(t,e,n,i){var r=e[0],o=e[1];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t}!function(){var t=function(){var t=new qe(2);return qe!=Float32Array&&(t[0]=0,t[1]=0),t}()}();var an=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t};!function(){var t=function(){var t=new qe(3);return qe!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}()}();function An(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const ln=Math.PI,cn=ln/4,un=ln/180,hn=180/ln,gn=512,dn=4003e4,pn=85.051129,fn=1.5;function mn(t){const[e,n]=t;An(Number.isFinite(e)),An(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const i=n*un;return[gn*(e*un+ln)/(2*ln),gn*(ln+Math.log(Math.tan(cn+.5*i)))/(2*ln)]}function In(t){const[e,n]=t,i=e/gn*(2*ln)-ln,r=2*(Math.atan(Math.exp(n/gn*(2*ln)-ln))-cn);return[i*hn,r*hn]}function yn(t){const{latitude:e,longitude:n,highPrecision:i=!1}=t;An(Number.isFinite(e)&&Number.isFinite(n));const r=gn,o=Math.cos(e*un),s=r/360,a=s/o,A=r/dn/o,l={unitsPerMeter:[A,A,A],metersPerUnit:[1/A,1/A,1/A],unitsPerDegree:[s,a,A],degreesPerUnit:[1/s,1/a,1/A]};if(i){const t=un*Math.tan(e*un)/o,n=s*t/2,i=r/dn*t,c=i/a*A;l.unitsPerDegree2=[0,n,i],l.unitsPerMeter2=[c,0,c]}return l}function Cn(t){const{height:e,pitch:n,bearing:i,altitude:r,scale:o,center:s}=t,a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];tn(a,a,[0,0,-r]),function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[4],s=e[5],a=e[6],A=e[7],l=e[8],c=e[9],u=e[10],h=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+l*i,t[5]=s*r+c*i,t[6]=a*r+u*i,t[7]=A*r+h*i,t[8]=l*r-o*i,t[9]=c*r-s*i,t[10]=u*r-a*i,t[11]=h*r-A*i}(a,a,-n*un),function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],s=e[1],a=e[2],A=e[3],l=e[4],c=e[5],u=e[6],h=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+l*i,t[1]=s*r+c*i,t[2]=a*r+u*i,t[3]=A*r+h*i,t[4]=l*r-o*i,t[5]=c*r-s*i,t[6]=u*r-a*i,t[7]=h*r-A*i}(a,a,i*un);const A=o/e;return en(a,a,[A,A,A]),s&&tn(a,a,function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}([],s)),a}function En(t){const{fov:e,aspect:n,near:i,far:r}=function(t){const{width:e,height:n,altitude:i,pitch:r=0,offset:o,center:s,scale:a,nearZMultiplier:A=1,farZMultiplier:l=1}=t;let{fovy:c=_n(fn)}=t;void 0!==i&&(c=_n(i));const u=c*un,h=r*un,g=vn(c);let d=g;s&&(d+=s[2]*a/Math.cos(h)/n);const p=u*(.5+(o?o[1]:0)/n),f=Math.sin(p)*d/Math.sin(Ze(Math.PI/2-h-p,.01,Math.PI-.01)),m=Math.sin(h)*f+d,I=10*d;return{fov:u,aspect:e/n,focalDistance:g,near:A,far:Math.min(m*l,I)}}(t);return nn([],e,n,i,r)}function _n(t){return 2*Math.atan(.5/t)*hn}function vn(t){return.5/Math.tan(.5*t*un)}function Bn(t,e,n=0){const[i,r,o]=t;if(An(Number.isFinite(i)&&Number.isFinite(r),"invalid pixel coordinate"),Number.isFinite(o)){return We(e,[i,r,o,1])}const s=We(e,[i,r,0,1]),a=We(e,[i,r,1,1]),A=s[2],l=a[2];return sn([],s,a,A===l?0:((n||0)-A)/(l-A))}function wn(t){const{width:e,height:n,bounds:i,minExtent:r=0,maxZoom:o=24,offset:s=[0,0]}=t,[[a,A],[l,c]]=i,u=function(t=0){if("number"==typeof t)return{top:t,bottom:t,left:t,right:t};return An(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t}(t.padding),h=mn([a,Ze(c,-85.051129,pn)]),g=mn([l,Ze(A,-85.051129,pn)]),d=[Math.max(Math.abs(g[0]-h[0]),r),Math.max(Math.abs(g[1]-h[1]),r)],p=[e-u.left-u.right-2*Math.abs(s[0]),n-u.top-u.bottom-2*Math.abs(s[1])];An(p[0]>0&&p[1]>0);const f=p[0]/d[0],m=p[1]/d[1],I=(u.right-u.left)/2/f,y=(u.top-u.bottom)/2/m,C=In([(g[0]+h[0])/2+I,(g[1]+h[1])/2+y]),E=Math.min(o,Xe(Math.abs(Math.min(f,m))));return An(Number.isFinite(E)),{longitude:C[0],latitude:C[1],zoom:E}}const bn=Math.PI/180;function Qn(t,e,n){const{pixelUnprojectionMatrix:i}=t,r=We(i,[e,0,1,1]),o=We(i,[e,t.height,1,1]),s=In(sn([],r,o,(n*t.distanceScales.unitsPerMeter[2]-r[2])/(o[2]-r[2])));return s.push(n),s}class xn{constructor(t={width:1,height:1}){ze(this,"latitude",void 0),ze(this,"longitude",void 0),ze(this,"zoom",void 0),ze(this,"pitch",void 0),ze(this,"bearing",void 0),ze(this,"altitude",void 0),ze(this,"fovy",void 0),ze(this,"meterOffset",void 0),ze(this,"center",void 0),ze(this,"width",void 0),ze(this,"height",void 0),ze(this,"scale",void 0),ze(this,"distanceScales",void 0),ze(this,"viewMatrix",void 0),ze(this,"projectionMatrix",void 0),ze(this,"viewProjectionMatrix",void 0),ze(this,"pixelProjectionMatrix",void 0),ze(this,"pixelUnprojectionMatrix",void 0),ze(this,"equals",(t=>t instanceof xn&&(t.width===this.width&&t.height===this.height&&rn(t.projectionMatrix,this.projectionMatrix)&&rn(t.viewMatrix,this.viewMatrix)))),ze(this,"project",((t,e={})=>{const{topLeft:n=!0}=e,i=function(t,e){const[n,i,r=0]=t;return An(Number.isFinite(n)&&Number.isFinite(i)&&Number.isFinite(r)),We(e,[n,i,r,1])}(this.projectPosition(t),this.pixelProjectionMatrix),[r,o]=i,s=n?o:this.height-o;return 2===t.length?[r,s]:[r,s,i[2]]})),ze(this,"unproject",((t,e={})=>{const{topLeft:n=!0,targetZ:i}=e,[r,o,s]=t,a=n?o:this.height-o,A=i&&i*this.distanceScales.unitsPerMeter[2],l=Bn([r,a,s],this.pixelUnprojectionMatrix,A),[c,u,h]=this.unprojectPosition(l);return Number.isFinite(s)?[c,u,h]:Number.isFinite(i)?[c,u,i]:[c,u]})),ze(this,"projectPosition",(t=>{const[e,n]=mn(t);return[e,n,(t[2]||0)*this.distanceScales.unitsPerMeter[2]]})),ze(this,"unprojectPosition",(t=>{const[e,n]=In(t);return[e,n,(t[2]||0)*this.distanceScales.metersPerUnit[2]]}));let{width:e,height:n,altitude:i=null,fovy:r=null}=t;const{latitude:o=0,longitude:s=0,zoom:a=0,pitch:A=0,bearing:l=0,position:c=null,nearZMultiplier:u=.02,farZMultiplier:h=1.01}=t;e=e||1,n=n||1,null===r&&null===i?(i=fn,r=_n(i)):null===r?r=_n(i):null===i&&(i=vn(r));const g=function(t){return Math.pow(2,t)}(a);i=Math.max(.75,i);const d=yn({longitude:s,latitude:o}),p=mn([s,o]);p.push(0),c&&function(t,e,n){t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2]}(p,p,an([],c,d.unitsPerMeter)),this.projectionMatrix=En({width:e,height:n,scale:g,center:p,pitch:A,fovy:r,nearZMultiplier:u,farZMultiplier:h}),this.viewMatrix=Cn({height:n,scale:g,center:p,pitch:A,bearing:l,altitude:i}),this.width=e,this.height=n,this.scale=g,this.latitude=o,this.longitude=s,this.zoom=a,this.pitch=A,this.bearing=l,this.altitude=i,this.fovy=r,this.center=p,this.meterOffset=c||[0,0,0],this.distanceScales=d,this._initMatrices(),Object.freeze(this)}_initMatrices(){const{width:t,height:e,projectionMatrix:n,viewMatrix:i}=this,r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];$e(r,r,n),$e(r,r,i),this.viewProjectionMatrix=r;const o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];en(o,o,[t/2,-e/2,1]),tn(o,o,[1,-1,0]),$e(o,o,r);const s=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],A=e[6],l=e[7],c=e[8],u=e[9],h=e[10],g=e[11],d=e[12],p=e[13],f=e[14],m=e[15],I=n*a-i*s,y=n*A-r*s,C=n*l-o*s,E=i*A-r*a,_=i*l-o*a,v=r*l-o*A,B=c*p-u*d,w=c*f-h*d,b=c*m-g*d,Q=u*f-h*p,x=u*m-g*p,D=h*m-g*f,S=I*D-y*x+C*Q+E*b-_*w+v*B;return S?(S=1/S,t[0]=(a*D-A*x+l*Q)*S,t[1]=(r*x-i*D-o*Q)*S,t[2]=(p*v-f*_+m*E)*S,t[3]=(h*_-u*v-g*E)*S,t[4]=(A*b-s*D-l*w)*S,t[5]=(n*D-r*b+o*w)*S,t[6]=(f*C-d*v-m*y)*S,t[7]=(c*v-h*C+g*y)*S,t[8]=(s*x-a*b+l*B)*S,t[9]=(i*b-n*x-o*B)*S,t[10]=(d*_-p*C+m*I)*S,t[11]=(u*C-c*_-g*I)*S,t[12]=(a*w-s*Q-A*B)*S,t[13]=(n*Q-i*w+r*B)*S,t[14]=(p*y-d*E-f*I)*S,t[15]=(c*E-u*y+h*I)*S,t):null}([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],o);if(!s)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=o,this.pixelUnprojectionMatrix=s}projectFlat(t){return mn(t)}unprojectFlat(t){return In(t)}getMapCenterByLngLatPosition({lngLat:t,pos:e}){const n=Bn(e,this.pixelUnprojectionMatrix),i=on([],mn(t),function(t,e){return t[0]=-e[0],t[1]=-e[1],t}([],n));return In(on([],this.center,i))}fitBounds(t,e={}){const{width:n,height:i}=this,{longitude:r,latitude:o,zoom:s}=wn(Object.assign({width:n,height:i,bounds:t},e));return new xn({width:n,height:i,longitude:r,latitude:o,zoom:s})}getBounds(t){const e=this.getBoundingRegion(t),n=Math.min(...e.map((t=>t[0]))),i=Math.max(...e.map((t=>t[0]))),r=Math.min(...e.map((t=>t[1]))),o=Math.max(...e.map((t=>t[1])));return[[n,r],[i,o]]}getBoundingRegion(t={}){return function(t,e=0){const{width:n,height:i,unproject:r}=t,o={targetZ:e},s=r([0,i],o),a=r([n,i],o);let A,l;return(t.fovy?.5*t.fovy*bn:Math.atan(.5/t.altitude))>(90-t.pitch)*bn-.01?(A=Qn(t,0,e),l=Qn(t,n,e)):(A=r([0,0],o),l=r([n,0],o)),[s,a,l,A]}(this,t.z||0)}getLocationAtPoint({lngLat:t,pos:e}){return this.getMapCenterByLngLatPosition({lngLat:t,pos:e})}}const Dn={};function Sn(t="id"){Dn[t]=Dn[t]||1;return`${t}-${Dn[t]++}`}function Mn(t){let e=!0;for(const n in t){e=!1;break}return e}class kn{static defaultProps={id:"undefined",handle:void 0,userData:void 0};id;props;userData={};_device;destroyed=!1;allocatedBytes=0;_attachedResources=new Set;constructor(t,e,n){if(!t)throw new Error("no device");this._device=t,this.props=function(t,e){const n={...e};for(const e in t)void 0!==t[e]&&(n[e]=t[e]);return n}(e,n);const i="undefined"!==this.props.id?this.props.id:Sn(this[Symbol.toStringTag]);this.props.id=i,this.id=i,this.userData=this.props.userData||{},this.addStats()}destroy(){this.destroyResource()}delete(){return this.destroy(),this}toString(){return`${this[Symbol.toStringTag]||this.constructor.name}(${this.id})`}getProps(){return this.props}attachResource(t){this._attachedResources.add(t)}detachResource(t){this._attachedResources.delete(t)}destroyAttachedResource(t){this._attachedResources.delete(t)&&t.destroy()}destroyAttachedResources(){for(const t of Object.values(this._attachedResources))t.destroy();this._attachedResources=new Set}destroyResource(){this.destroyAttachedResources(),this.removeStats(),this.destroyed=!0}removeStats(){const t=this._device.statsManager.getStats("Resource Counts"),e=this[Symbol.toStringTag];t.get(`${e}s Active`).decrementCount()}trackAllocatedMemory(t,e=this[Symbol.toStringTag]){const n=this._device.statsManager.getStats("Resource Counts");n.get("GPU Memory").addCount(t),n.get(`${e} Memory`).addCount(t),this.allocatedBytes=t}trackDeallocatedMemory(t=this[Symbol.toStringTag]){const e=this._device.statsManager.getStats("Resource Counts");e.get("GPU Memory").subtractCount(this.allocatedBytes),e.get(`${t} Memory`).subtractCount(this.allocatedBytes),this.allocatedBytes=0}addStats(){const t=this._device.statsManager.getStats("Resource Counts"),e=this[Symbol.toStringTag];t.get("Resources Created").incrementCount(),t.get(`${e}s Created`).incrementCount(),t.get(`${e}s Active`).incrementCount()}}class Rn extends kn{static defaultProps={...kn.defaultProps,usage:0,byteLength:0,byteOffset:0,data:null,indexType:"uint16",mappedAtCreation:!1};static MAP_READ=1;static MAP_WRITE=2;static COPY_SRC=4;static COPY_DST=8;static INDEX=16;static VERTEX=32;static UNIFORM=64;static STORAGE=128;static INDIRECT=256;static QUERY_RESOLVE=512;get[Symbol.toStringTag](){return"Buffer"}usage;indexType;updateTimestamp;constructor(t,e){const n={...e};(e.usage||0)&Rn.INDEX&&!e.indexType&&(e.data instanceof Uint32Array?n.indexType="uint32":e.data instanceof Uint16Array&&(n.indexType="uint16")),super(t,n,Rn.defaultProps),this.usage=e.usage||0,this.indexType=n.indexType,this.updateTimestamp=t.incrementTimestamp()}readSyncWebGL(t,e){throw new Error("not implemented")}static DEBUG_DATA_MAX_LENGTH=32;debugData=new ArrayBuffer(0);_setDebugData(t,e,n){const i=ArrayBuffer.isView(t)?t.buffer:t,r=Math.min(t?t.byteLength:n,Rn.DEBUG_DATA_MAX_LENGTH);null===t?this.debugData=new ArrayBuffer(r):0===e&&n===t.byteLength?this.debugData=i.slice(0,r):this.debugData=i.slice(e,e+r)}}var Nn=g(8538);function Pn(t){if("undefined"!=typeof window&&"renderer"===window.process?.type)return!0;if(void 0!==Nn&&Boolean(Nn.versions?.electron))return!0;const e="undefined"!=typeof navigator&&navigator.userAgent,n=t||e;return Boolean(n&&n.indexOf("Electron")>=0)}var Tn=g(8538);function Ln(){return!("object"==typeof Tn&&"[object process]"===String(Tn)&&!Tn?.browser)||Pn()}const Fn="4.0.7";class On{constructor(t,e,n="sessionStorage"){this.storage=function(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch(t){return null}}(n),this.id=t,this.config=e,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){if(Object.assign(this.config,t),this.storage){const t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}}_loadConfiguration(){let t={};if(this.storage){const e=this.storage.getItem(this.id);t=e?JSON.parse(e):{}}return Object.assign(this.config,t),this}}var Gn;!function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"}(Gn||(Gn={}));const Un=10;function jn(t){return"string"!=typeof t?t:(t=t.toUpperCase(),Gn[t]||Gn.WHITE)}function Yn(t,e){if(!t)throw new Error(e||"Assertion failed")}const Kn=globalThis,zn=(globalThis.document,globalThis.process||{}),Jn=(globalThis.console,globalThis.navigator||{});function qn(){let t;if(Ln()&&Kn.performance)t=Kn?.performance?.now?.();else if("hrtime"in zn){const e=zn?.hrtime?.();t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}const Hn={debug:Ln()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Vn={enabled:!0,level:0};function Wn(){}const Zn={},Xn={once:!0};class $n{constructor({id:t}={id:""}){this.VERSION=Fn,this._startTs=qn(),this._deltaTs=qn(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=t,this.userData={},this._storage=new On(`__probe-${this.id}__`,Vn),this.timeStamp(`${this.id} started`),function(t,e=["constructor"]){const n=Object.getPrototypeOf(t),i=Object.getOwnPropertyNames(n),r=t;for(const n of i){const i=r[n];"function"==typeof i&&(e.find((t=>n===t))||(r[n]=i.bind(t)))}}(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((qn()-this._startTs).toPrecision(10))}getDelta(){return Number((qn()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(t=!0){return this._storage.setConfiguration({enabled:t}),this}setLevel(t){return this._storage.setConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,e){this._storage.setConfiguration({[t]:e})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,e){if(!t)throw new Error(e||"Assertion failed")}warn(t){return this._getLogFunction(0,t,Hn.warn,arguments,Xn)}error(t){return this._getLogFunction(0,t,Hn.error,arguments)}deprecated(t,e){return this.warn(`\`${t}\` is deprecated and will be removed in a later version. Use \`${e}\` instead`)}removed(t,e){return this.error(`\`${t}\` has been removed. Use \`${e}\` instead`)}probe(t,e){return this._getLogFunction(t,e,Hn.log,arguments,{time:!0,once:!0})}log(t,e){return this._getLogFunction(t,e,Hn.debug,arguments)}info(t,e){return this._getLogFunction(t,e,console.info,arguments)}once(t,e){return this._getLogFunction(t,e,Hn.debug||Hn.info,arguments,Xn)}table(t,e,n){return e?this._getLogFunction(t,e,console.table||Wn,n&&[n],{tag:ni(e)}):Wn}time(t,e){return this._getLogFunction(t,e,console.time?console.time:console.info)}timeEnd(t,e){return this._getLogFunction(t,e,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,e){return this._getLogFunction(t,e,console.timeStamp||Wn)}group(t,e,n={collapsed:!1}){const i=ei({logLevel:t,message:e,opts:n}),{collapsed:r}=n;return i.method=(r?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(t,e,n={}){return this.group(t,e,Object.assign({},n,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||Wn)}withGroup(t,e,n){this.group(t,e)();try{n()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=ti(t)}_getLogFunction(t,e,n,i,r){if(this._shouldLog(t)){r=ei({logLevel:t,message:e,args:i,opts:r}),Yn(n=n||r.method),r.total=this.getTotal(),r.delta=this.getDelta(),this._deltaTs=qn();const o=r.tag||r.message;if(r.once&&o){if(Zn[o])return Wn;Zn[o]=qn()}return e=function(t,e,n){if("string"==typeof e){const i=n.time?function(t,e=8){const n=Math.max(e-t.length,0);return`${" ".repeat(n)}${t}`}(function(t){let e;return e=t<10?`${t.toFixed(2)}ms`:t<100?`${t.toFixed(1)}ms`:t<1e3?`${t.toFixed(0)}ms`:`${(t/1e3).toFixed(2)}s`,e}(n.total)):"";e=function(t,e,n){Ln||"string"!=typeof t||(e&&(t=`[${jn(e)}m${t}[39m`),n&&(t=`[${jn(n)+Un}m${t}[49m`));return t}(e=n.time?`${t}: ${i}  ${e}`:`${t}: ${e}`,n.color,n.background)}return e}(this.id,r.message,r),n.bind(console,e,...r.args)}return Wn}}function ti(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return Yn(Number.isFinite(e)&&e>=0),e}function ei(t){const{logLevel:e,message:n}=t;t.logLevel=ti(e);const i=t.args?Array.from(t.args):[];for(;i.length&&i.shift()!==n;);switch(typeof e){case"string":case"function":void 0!==n&&i.unshift(n),t.message=e;break;case"object":Object.assign(t,e)}"function"==typeof t.message&&(t.message=t.message());const r=typeof t.message;return Yn("string"===r||"object"===r),Object.assign(t,{args:i},t.opts)}function ni(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}$n.VERSION=Fn;const ii=new $n({id:"deck"}),ri={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(ri,"IDENTITY",{get:()=>(ii.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const oi={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},si={common:0,meters:1,pixels:2},ai={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}};function Ai(t){const e=ArrayBuffer.isView(t)?t.constructor:t;switch(e){case Float32Array:return"float32";case Uint16Array:return"uint16";case Uint32Array:return"uint32";case Uint8Array:case Uint8ClampedArray:return"uint8";case Int8Array:return"sint8";case Int16Array:return"sint16";case Int32Array:return"sint32";default:throw new Error(e.constructor.name)}}function li(t){switch(t){case"float32":return Float32Array;case"uint32":return Uint32Array;case"sint32":return Int32Array;case"uint16":case"unorm16":return Uint16Array;case"sint16":case"snorm16":return Int16Array;case"uint8":case"unorm8":return Uint8Array;case"sint8":case"snorm8":return Int8Array;default:throw new Error(t)}}function ci(t,e,n){if(!e||e>4)throw new Error(`size ${e}`);const i=e;let r=Ai(t);if("uint8"===r&&n&&1===i)return"unorm8-webgl";if("uint8"===r&&n&&3===i)return"unorm8x3-webgl";if("uint8"===r||"sint8"===r){if(1===i||3===i)throw new Error(`size: ${e}`);return n&&(r=r.replace("int","norm")),`${r}x${i}`}if("uint16"===r||"sint16"===r){if(1===i||3===i)throw new Error(`size: ${e}`);return n&&(r=r.replace("int","norm")),`${r}x${i}`}return 1===i?r:`${r}x${i}`}const ui=Ai;function hi(t,e){return{attribute:t,format:e.size>1?`${e.type}x${e.size}`:e.type,byteOffset:e.offset||0}}function gi(t){return t.stride||t.size*t.bytesPerElement}const di=new class{constructor(t={}){this._pool=[],this.opts={overAlloc:2,poolSize:100},this.setOptions(t)}setOptions(t){Object.assign(this.opts,t)}allocate(t,e,{size:n=1,type:i,padding:r=0,copy:o=!1,initialize:s=!1,maxCount:a}){const A=i||t&&t.constructor||Float32Array,l=e*n+r;if(ArrayBuffer.isView(t)){if(l<=t.length)return t;if(l*t.BYTES_PER_ELEMENT<=t.buffer.byteLength)return new A(t.buffer,0,l)}let c=1/0;a&&(c=a*n+r);const u=this._allocate(A,l,s,c);return t&&o?u.set(t):s||u.fill(0,0,4),this._release(t),u}release(t){this._release(t)}_allocate(t,e,n,i){let r=Math.max(Math.ceil(e*this.opts.overAlloc),1);r>i&&(r=i);const o=this._pool,s=t.BYTES_PER_ELEMENT*r,a=o.findIndex((t=>t.byteLength>=s));if(a>=0){const e=new t(o.splice(a,1)[0],0,r);return n&&e.fill(0),e}return new t(r)}_release(t){if(!ArrayBuffer.isView(t))return;const e=this._pool,{buffer:n}=t,{byteLength:i}=n,r=e.findIndex((t=>t.byteLength>=i));r<0?e.push(n):(r>0||e.length<this.opts.poolSize)&&e.splice(r,0,n),e.length>this.opts.poolSize&&e.shift()}};Math.PI,Math.PI;globalThis.mathgl=globalThis.mathgl||{config:{EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0,_cartographicRadians:!1}};const pi=globalThis.mathgl.config;function fi(t,{precision:e=pi.precision}={}){return t=function(t){return Math.round(t/pi.EPSILON)*pi.EPSILON}(t),`${parseFloat(t.toPrecision(e))}`}function mi(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ii(t,e,n){return Ei(t,(t=>Math.max(e,Math.min(n,t))))}function yi(t,e,n){return mi(t)?t.map(((t,i)=>yi(t,e[i],n))):n*e+(1-n)*t}function Ci(t,e,n){const i=pi.EPSILON;n&&(pi.EPSILON=n);try{if(t===e)return!0;if(mi(t)&&mi(e)){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ci(t[n],e[n]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):"number"==typeof t&&"number"==typeof e&&Math.abs(t-e)<=pi.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{pi.EPSILON=i}}function Ei(t,e,n){if(mi(t)){const i=t;n=n||function(t){return t.clone?t.clone():new Array(t.length)}(i);for(let r=0;r<n.length&&r<i.length;++r){const i="number"==typeof t?t:t[r];n[r]=e(i,r,n)}return n}return e(t)}class _i extends Array{clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){for(let n=0;n<this.ELEMENTS;++n)this[n]=t[n+e];return this.check()}toArray(t=[],e=0){for(let n=0;n<this.ELEMENTS;++n)t[e+n]=this[n];return t}toObject(t){return t}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}to(t){return t===this?this:mi(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(pi)}formatString(t){let e="";for(let n=0;n<this.ELEMENTS;++n)e+=(n>0?", ":"")+fi(this[n],t);return`${t.printTypes?this.constructor.name:""}[${e}]`}equals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(!Ci(this[e],t[e]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,e,n){if(void 0===n)return this.lerp(this,t,e);for(let i=0;i<this.ELEMENTS;++i){const r=t[i],o="number"==typeof e?e:e[i];this[i]=r+n*(o-r)}return this.check()}min(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}max(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}clamp(t,e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),e[n]);return this.check()}add(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]+=e[t];return this.check()}subtract(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]-=e[t];return this.check()}scale(t){if("number"==typeof t)for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;else for(let e=0;e<this.ELEMENTS&&e<t.length;++e)this[e]*=t[e];return this.check()}multiplyByScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}check(){if(pi.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let t=this.length===this.ELEMENTS;for(let e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}sub(t){return this.subtract(t)}setScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}addScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}divideScalar(t){return this.multiplyByScalar(1/t)}clampScalar(t,e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),e);return this.check()}get elements(){return this}}function vi(t){if(!Number.isFinite(t))throw new Error(`Invalid number ${JSON.stringify(t)}`);return t}function Bi(t,e,n=""){if(pi.debug&&!function(t,e){if(t.length!==e)return!1;for(let e=0;e<t.length;++e)if(!Number.isFinite(t[e]))return!1;return!0}(t,e))throw new Error(`math.gl: ${n} some fields set to invalid numbers'`);return t}function wi(t,e){if(!t)throw new Error(`math.gl assertion ${e}`)}class bi extends _i{get x(){return this[0]}set x(t){this[0]=vi(t)}get y(){return this[1]}set y(t){this[1]=vi(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let e=0;for(let n=0;n<this.ELEMENTS;++n){const i=this[n]-t[n];e+=i*i}return vi(e)}dot(t){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*t[n];return vi(e)}normalize(){const t=this.magnitude();if(0!==t)for(let e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}multiply(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]*=e[t];return this.check()}divide(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e[t];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return wi(t>=0&&t<this.ELEMENTS,"index is out of range"),vi(this[t])}setComponent(t,e){return wi(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}addVectors(t,e){return this.copy(t).add(e)}subVectors(t,e){return this.copy(t).subtract(e)}multiplyVectors(t,e){return this.copy(t).multiply(e)}addScaledVector(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}}const Qi=1e-6;let xi="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function Di(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Si(t,e,n){const i=e[0],r=e[1],o=e[2];let s=n[3]*i+n[7]*r+n[11]*o+n[15];return s=s||1,t[0]=(n[0]*i+n[4]*r+n[8]*o+n[12])/s,t[1]=(n[1]*i+n[5]*r+n[9]*o+n[13])/s,t[2]=(n[2]*i+n[6]*r+n[10]*o+n[14])/s,t}const Mi=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},ki=function(t,e){const n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(n*n+i*i+r*r)},Ri=function(t){const e=t[0],n=t[1],i=t[2];return Math.sqrt(e*e+n*n+i*i)},Ni=function(t){const e=t[0],n=t[1],i=t[2];return e*e+n*n+i*i};!function(){const t=function(){const t=new xi(3);return xi!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}()}();function Pi(t,e,n){const i=e[0],r=e[1],o=n[3]*i+n[7]*r||1;return t[0]=(n[0]*i+n[4]*r)/o,t[1]=(n[1]*i+n[5]*r)/o,t}function Ti(t,e,n){const i=e[0],r=e[1],o=e[2],s=n[3]*i+n[7]*r+n[11]*o||1;return t[0]=(n[0]*i+n[4]*r+n[8]*o)/s,t[1]=(n[1]*i+n[5]*r+n[9]*o)/s,t[2]=(n[2]*i+n[6]*r+n[10]*o)/s,t}const Li=[0,0,0];let Fi;class Oi extends bi{static get ZERO(){return Fi||(Fi=new Oi(0,0,0),Object.freeze(Fi)),Fi}constructor(t=0,e=0,n=0){super(-0,-0,-0),1===arguments.length&&mi(t)?this.copy(t):(pi.debug&&(vi(t),vi(e),vi(n)),this[0]=t,this[1]=e,this[2]=n)}set(t,e,n){return this[0]=t,this[1]=e,this[2]=n,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return pi.debug&&(vi(t.x),vi(t.y),vi(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=vi(t)}angle(t){return function(t,e){const n=t[0],i=t[1],r=t[2],o=e[0],s=e[1],a=e[2],A=Math.sqrt((n*n+i*i+r*r)*(o*o+s*s+a*a)),l=A&&Di(t,e)/A;return Math.acos(Math.min(Math.max(l,-1),1))}(this,t)}cross(t){return function(t,e,n){const i=e[0],r=e[1],o=e[2],s=n[0],a=n[1],A=n[2];t[0]=r*A-o*a,t[1]=o*s-i*A,t[2]=i*a-r*s}(this,this,t),this.check()}rotateX({radians:t,origin:e=Li}){return function(t,e,n,i){const r=[],o=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[0],o[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),o[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,e,t),this.check()}rotateY({radians:t,origin:e=Li}){return function(t,e,n,i){const r=[],o=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),o[1]=r[1],o[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,e,t),this.check()}rotateZ({radians:t,origin:e=Li}){return function(t,e,n,i){const r=[],o=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),o[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),o[2]=r[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2]}(this,this,e,t),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return Si(this,this,t),this.check()}transformAsVector(t){return Ti(this,this,t),this.check()}transformByMatrix3(t){return function(t,e,n){const i=e[0],r=e[1],o=e[2];t[0]=i*n[0]+r*n[3]+o*n[6],t[1]=i*n[1]+r*n[4]+o*n[7],t[2]=i*n[2]+r*n[5]+o*n[8]}(this,this,t),this.check()}transformByMatrix2(t){return function(t,e,n){const i=e[0],r=e[1];t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t[2]=e[2]}(this,this,t),this.check()}transformByQuaternion(t){return function(t,e,n){const i=n[0],r=n[1],o=n[2],s=n[3],a=e[0],A=e[1],l=e[2];let c=r*l-o*A,u=o*a-i*l,h=i*A-r*a,g=r*h-o*u,d=o*c-i*h,p=i*u-r*c;const f=2*s;c*=f,u*=f,h*=f,g*=2,d*=2,p*=2,t[0]=a+c+g,t[1]=A+u+d,t[2]=l+h+p}(this,this,t),this.check()}}const Gi=new Oi;function Ui(t,e,n,i){Gi.set(t,e,n);const r=Gi.len();return{distance:i/r,normal:new Oi(-t/r,-e/r,-n/r)}}function ji(t){return t-Math.fround(t)}let Yi;function Ki(t,e){const{size:n=1,startIndex:i=0}=e,r=void 0!==e.endIndex?e.endIndex:t.length,o=(r-i)/n;Yi=di.allocate(Yi,o,{type:Float32Array,size:2*n});let s=i,a=0;for(;s<r;){for(let e=0;e<n;e++){const i=t[s++];Yi[a+e]=i,Yi[a+e+n]=ji(i)}a+=2*n}return Yi.subarray(0,o*n*2)}function zi(t){let e=null,n=!1;for(const i of t)i&&(e?(n||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],n=!0),e[0][0]=Math.min(e[0][0],i[0][0]),e[0][1]=Math.min(e[0][1],i[0][1]),e[1][0]=Math.max(e[1][0],i[1][0]),e[1][1]=Math.max(e[1][1],i[1][1])):e=i);return e}function Ji(t,e){e.offset&&ii.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=gi(t),i=(void 0!==e.vertexOffset?e.vertexOffset:t.vertexOffset||0)*n+(e.elementOffset||0)*t.bytesPerElement+(t.offset||0);return{...e,offset:i,stride:n}}class qi{constructor(t,e,n){this._buffer=null,this.device=t,this.id=e.id||"",this.size=e.size||1;const i=e.logicalType||e.type,r="float64"===i;let o,{defaultValue:s}=e;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0),o=r?"float32":!i&&e.isIndexed?"uint32":i||"float32";let a=function(t){switch(t){case"float64":return Float64Array;case"uint8":case"unorm8":return Uint8ClampedArray;default:return li(t)}}(i||o);this.doublePrecision=r,r&&!1===e.fp64&&(a=Float32Array),this.value=null,this.settings={...e,defaultType:a,defaultValue:s,logicalType:i,type:o,normalized:o.includes("norm"),size:this.size,bytesPerElement:a.BYTES_PER_ELEMENT},this.state={...n,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1}}get isConstant(){return this.state.constant}get buffer(){return this._buffer}get byteOffset(){const t=this.getAccessor();return t.vertexOffset?t.vertexOffset*gi(t):0}get numInstances(){return this.state.numInstances}set numInstances(t){this.state.numInstances=t}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),di.release(this.state.allocatedValue)}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(t=this.id,e=null){const n={};if(this.state.constant){const i=this.value;if(e){const r=Ji(this.getAccessor(),e),o=r.offset/i.BYTES_PER_ELEMENT,s=r.size||this.size;n[t]=i.subarray(o,o+s)}else n[t]=i}else n[t]=this.getBuffer();return this.doublePrecision&&(this.value instanceof Float64Array?n[`${t}64Low`]=n[t]:n[`${t}64Low`]=new Float32Array(this.size)),n}_getBufferLayout(t=this.id,e=null){const n=this.getAccessor(),i=[],r={name:this.id,byteStride:gi(n),attributes:i};if(this.doublePrecision){const r=function(t,e){const n=Ji(t,e);return{high:n,low:{...n,offset:n.offset+4*t.size}}}(n,e||{});i.push(hi(t,{...n,...r.high}),hi(`${t}64Low`,{...n,...r.low}))}else if(e){const r=Ji(n,e);i.push(hi(t,{...n,...r}))}else i.push(hi(t,n));return r}setAccessor(t){this.state.bufferAccessor=t}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let t=null;if(this.state.constant&&this.value){const e=Array.from(this.value);t=[e,e]}else{const{value:e,numInstances:n,size:i}=this,r=n*i;if(e&&r&&e.length>=r){const n=new Array(i).fill(1/0),o=new Array(i).fill(-1/0);for(let t=0;t<r;)for(let r=0;r<i;r++){const i=e[t++];i<n[r]&&(n[r]=i),i>o[r]&&(o[r]=i)}t=[n,o]}}return this.state.bounds=t,t}setData(t){const{state:e}=this;let n;n=ArrayBuffer.isView(t)?{value:t}:t instanceof Rn?{buffer:t}:t;const i={...this.settings,...n};if(ArrayBuffer.isView(n.value)){if(!n.type){if(this.doublePrecision&&n.value instanceof Float64Array)i.type="float32";else{const t=ui(n.value);i.type=i.normalized?t.replace("int","norm"):t}}i.bytesPerElement=n.value.BYTES_PER_ELEMENT,i.stride=gi(i)}if(e.bounds=null,n.constant){let t=n.value;t=this._normalizeValue(t,[],0),this.settings.normalized&&(t=this.normalizeConstant(t));if(!(!e.constant||!this._areValuesEqual(t,this.value)))return!1;e.externalBuffer=null,e.constant=!0,this.value=ArrayBuffer.isView(t)?t:new Float32Array(t)}else if(n.buffer){const t=n.buffer;e.externalBuffer=t,e.constant=!1,this.value=n.value||null}else if(n.value){this._checkExternalBuffer(n);let t=n.value;e.externalBuffer=null,e.constant=!1,this.value=t;let{buffer:r}=this;const o=gi(i),s=(i.vertexOffset||0)*o;if(this.doublePrecision&&t instanceof Float64Array&&(t=Ki(t,i)),this.settings.isIndexed){const e=this.settings.defaultType;t.constructor!==e&&(t=new e(t))}const a=t.byteLength+s+2*o;(!r||r.byteLength<a)&&(r=this._createBuffer(a)),r.write(t,s)}return this.setAccessor(i),!0}updateSubBuffer(t={}){this.state.bounds=null;const e=this.value,{startOffset:n=0,endOffset:i}=t;this.buffer.write(this.doublePrecision&&e instanceof Float64Array?Ki(e,{size:this.size,startIndex:n,endIndex:i}):e.subarray(n,i),n*e.BYTES_PER_ELEMENT+this.byteOffset)}allocate(t,e=!1){const{state:n}=this,i=n.allocatedValue,r=di.allocate(i,t+1,{size:this.size,type:this.settings.defaultType,copy:e});this.value=r;const{byteOffset:o}=this;let{buffer:s}=this;return(!s||s.byteLength<r.byteLength+o)&&(s=this._createBuffer(r.byteLength+o),e&&i&&s.write(i instanceof Float64Array?Ki(i,this):i,o)),n.allocatedValue=r,n.constant=!1,n.externalBuffer=null,this.setAccessor(this.settings),!0}_checkExternalBuffer(t){const{value:e}=t;if(!ArrayBuffer.isView(e))throw new Error(`Attribute ${this.id} value is not TypedArray`);const n=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=e.BYTES_PER_ELEMENT<4),i)throw new Error(`Attribute ${this.id} does not support ${e.constructor.name}`);e instanceof n||!this.settings.normalized||"normalized"in t||ii.warn(`Attribute ${this.id} is normalized`)()}normalizeConstant(t){switch(this.settings.type){case"snorm8":return new Float32Array(t).map((t=>(t+128)/255*2-1));case"snorm16":return new Float32Array(t).map((t=>(t+32768)/65535*2-1));case"unorm8":return new Float32Array(t).map((t=>t/255));case"unorm16":return new Float32Array(t).map((t=>t/65535));default:return t}}_normalizeValue(t,e,n){const{defaultValue:i,size:r}=this.settings;if(Number.isFinite(t))return e[n]=t,e;if(!t){let t=r;for(;--t>=0;)e[n+t]=i[t];return e}switch(r){case 4:e[n+3]=Number.isFinite(t[3])?t[3]:i[3];case 3:e[n+2]=Number.isFinite(t[2])?t[2]:i[2];case 2:e[n+1]=Number.isFinite(t[1])?t[1]:i[1];case 1:e[n+0]=Number.isFinite(t[0])?t[0]:i[0];break;default:let o=r;for(;--o>=0;)e[n+o]=Number.isFinite(t[o])?t[o]:i[o]}return e}_areValuesEqual(t,e){if(!t||!e)return!1;const{size:n}=this;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}_createBuffer(t){this._buffer&&this._buffer.destroy();const{isIndexed:e,type:n}=this.settings;return this._buffer=this.device.createBuffer({...this._buffer?.props,id:this.id,usage:e?Rn.INDEX:Rn.VERTEX,indexType:e?n:void 0,byteLength:t}),this._buffer}}function Hi(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}const Vi=[],Wi=[];function Zi(t,e=0,n=1/0){let i=Vi;const r={index:-1,data:t,target:[]};return t?"function"==typeof t[Symbol.iterator]?i=t:t.length>0&&(Wi.length=t.length,i=Wi):i=Vi,(e>0||Number.isFinite(n))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(e,n),r.index=e-1),{iterable:i,objectInfo:r}}function Xi(t){return t&&t[Symbol.asyncIterator]}function $i(t,e){const{size:n,stride:i,offset:r,startIndices:o,nested:s}=e,a=t.BYTES_PER_ELEMENT,A=i?i/a:n,l=r?r/a:0,c=Math.floor((t.length-l)/A);return(e,{index:i,target:r})=>{if(!o){const e=i*A+l;for(let i=0;i<n;i++)r[i]=t[e+i];return r}const a=o[i],u=o[i+1]||c;let h;if(s){h=new Array(u-a);for(let e=a;e<u;e++){const i=e*A+l;r=new Array(n);for(let e=0;e<n;e++)r[e]=t[i+e];h[e-a]=r}}else if(A===n)h=t.subarray(a*n+l,u*n+l);else{h=new t.constructor((u-a)*n);let e=0;for(let i=a;i<u;i++){const r=i*A+l;for(let i=0;i<n;i++)h[e++]=t[r+i]}}return h}}function tr(t,e=()=>!0){return Array.isArray(t)?er(t,e,[]):e(t)?[t]:[]}function er(t,e,n){let i=-1;for(;++i<t.length;){const r=t[i];Array.isArray(r)?er(r,e,n):e(r)&&n.push(r)}return n}function nr({target:t,source:e,start:n=0,count:i=1}){const r=e.length,o=i*r;let s=0;for(let i=n;s<r;s++)t[i++]=e[s];for(;s<o;)s<o-s?(t.copyWithin(n+s,n,n+s),s*=2):(t.copyWithin(n+s,n,n+o-s),s=o);return t}const ir=[],rr=[[0,1/0]];const or={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function sr(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...or[n],...e,...t,type:n}}class ar extends qi{constructor(t,e){super(t,e,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,layoutChanged:!1,updateRanges:rr}),this.constant=!1,this.settings.update=e.update||(e.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(t){this.state.startIndices=t}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:t=!1}={}){const e=this.state.needsRedraw;return this.state.needsRedraw=e&&!t,e}layoutChanged(){return this.state.layoutChanged}setAccessor(t){var e,n;this.state.layoutChanged||=(e=t,n=this.getAccessor(),!(e.type===n.type&&e.size===n.size&&gi(e)===gi(n)&&(e.offset||0)===(n.offset||0))),super.setAccessor(t)}getUpdateTriggers(){const{accessor:t}=this.settings;return[this.id].concat("function"!=typeof t&&t||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(t){if(!t||!this.supportsTransition())return null;const{accessor:e}=this.settings,n=this.settings.transition,i=Array.isArray(e)?t[e.find((e=>t[e]))]:t[e];return sr(i,n)}setNeedsUpdate(t=this.id,e){if(this.state.needsUpdate=this.state.needsUpdate||t,this.setNeedsRedraw(t),e){const{startRow:t=0,endRow:n=1/0}=e;this.state.updateRanges=function(t,e){if(t===rr)return t;if(e[0]<0&&(e[0]=0),e[0]>=e[1])return t;const n=[],i=t.length;let r=0;for(let o=0;o<i;o++){const i=t[o];i[1]<e[0]?(n.push(i),r=o+1):i[0]>e[1]?n.push(i):e=[Math.min(i[0],e[0]),Math.max(i[1],e[1])]}return n.splice(r,0,e),n}(this.state.updateRanges,[t,n])}else this.state.updateRanges=rr}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=ir}setNeedsRedraw(t=this.id){this.state.needsRedraw=this.state.needsRedraw||t}allocate(t){const{state:e,settings:n}=this;return!n.noAlloc&&(!!n.update&&(super.allocate(t,e.updateRanges!==rr),!0))}updateBuffer({numInstances:t,data:e,props:n,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:r},settings:{update:o,noAlloc:s}}=this;let a=!0;if(o){for(const[s,a]of r)o.call(i,this,{data:e,startRow:s,endRow:a,props:n,numInstances:t});if(this.value)if(this.constant||!this.buffer||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[e,n]of r){const i=Number.isFinite(e)?this.getVertexOffset(e):0,r=Number.isFinite(n)?this.getVertexOffset(n):s||!Number.isFinite(t)?this.value.length:t*this.size;super.updateSubBuffer({startOffset:i,endOffset:r})}else;this._checkAttributeArray()}else a=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),a}setConstantValue(t){if(void 0===t||"function"==typeof t)return!1;return this.setData({constant:!0,value:t})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0}setExternalBuffer(t){const{state:e}=this;return t?(this.clearNeedsUpdate(),e.lastExternalBuffer===t||(e.lastExternalBuffer=t,this.setNeedsRedraw(),this.setData(t)),!0):(e.lastExternalBuffer=null,!1)}setBinaryValue(t,e=null){const{state:n,settings:i}=this;if(!t)return n.binaryValue=null,n.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(n.binaryValue===t)return this.clearNeedsUpdate(),!0;n.binaryValue=t,this.setNeedsRedraw();if(i.transform||e!==this.startIndices){ArrayBuffer.isView(t)&&(t={value:t});const r=t;Hi(ArrayBuffer.isView(r.value),`invalid ${i.accessor}`);const o=Boolean(r.size)&&r.size!==this.size;return n.binaryAccessor=$i(r.value,{size:r.size||this.size,stride:r.stride,offset:r.offset,startIndices:e,nested:o}),!1}return this.clearNeedsUpdate(),this.setData(t),!0}getVertexOffset(t){const{startIndices:e}=this;return(e?t<e.length?e[t]:this.numInstances:t)*this.size}getValue(){const t=this.settings.shaderAttributes,e=super.getValue();if(!t)return e;for(const n in t)Object.assign(e,super.getValue(n,t[n]));return e}getBufferLayout(t){this.state.layoutChanged=!1;const e=this.settings.shaderAttributes,n=super._getBufferLayout(),{stepMode:i}=this.settings;if(n.stepMode="dynamic"===i?t?t.isInstanced?"instance":"vertex":"instance":i??"vertex",!e)return n;for(const t in e){const i=super._getBufferLayout(t,e[t]);n.attributes.push(...i.attributes)}return n}_autoUpdater(t,{data:e,startRow:n,endRow:i,props:r,numInstances:o}){if(t.constant)return;const{settings:s,state:a,value:A,size:l,startIndices:c}=t,{accessor:u,transform:h}=s,g=a.binaryAccessor||("function"==typeof u?u:r[u]);Hi("function"==typeof g,`accessor "${u}" is not a function`);let d=t.getVertexOffset(n);const{iterable:p,objectInfo:f}=Zi(e,n,i);for(const e of p){f.index++;let n=g(e,f);if(h&&(n=h.call(this,n)),c){const e=(f.index<c.length-1?c[f.index+1]:o)-c[f.index];if(n&&Array.isArray(n[0])){let e=d;for(const i of n)t._normalizeValue(i,A,e),e+=l}else n&&n.length>l?A.set(n,d):(t._normalizeValue(n,f.target,0),nr({target:A,source:f.target,start:d,count:e}));d+=e*l}else t._normalizeValue(n,A,d),d+=l}}_validateAttributeUpdaters(){const{settings:t}=this;if(!(t.noAlloc||"function"==typeof t.update))throw new Error(`Attribute ${this.id} missing update or accessor`)}_checkAttributeArray(){const{value:t}=this,e=Math.min(4,this.size);if(t&&t.length>=e){let n=!0;switch(e){case 4:n=n&&Number.isFinite(t[3]);case 3:n=n&&Number.isFinite(t[2]);case 2:n=n&&Number.isFinite(t[1]);case 1:n=n&&Number.isFinite(t[0]);break;default:n=!1}if(!n)throw new Error(`Illegal attribute generated for ${this.id}`)}}}function Ar(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}return!1}function lr(t){let e,n={};return i=>{for(const r in i)if(!Ar(i[r],n[r])){e=t(i),n=i;break}return e}}let cr={};function ur(t){cr=t}function hr(t,e,n,i){ii.level>0&&cr[t]&&cr[t].call(null,e,n,i)}function gr(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function dr(t){const{input:e,inputChannels:n,output:i}=t||{};if(!e)return"#version 300 es\nout vec4 transform_output;\nvoid main() {\ntransform_output = vec4(0);\n}";if(!n)throw new Error("inputChannels");return`#version 300 es\nin ${function(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error(`invalid channels: ${t}`)}}(n)} ${e};\nout vec4 ${i};\nvoid main() {\n  ${i} = ${function(t,e){switch(e){case 1:return`vec4(${t}, 0.0, 0.0, 1.0)`;case 2:return`vec4(${t}, 0.0, 1.0)`;case 3:return`vec4(${t}, 1.0)`;case 4:return t;default:throw new Error(`invalid channels: ${e}`)}}(e,n)};\n}`}class pr extends kn{static defaultProps={...kn.defaultProps,format:void 0,dimension:void 0,aspect:"all",baseMipLevel:0,mipLevelCount:void 0,baseArrayLayer:0,arrayLayerCount:void 0};get[Symbol.toStringTag](){return"TextureView"}constructor(t,e){super(t,e,pr.defaultProps)}}class fr extends kn{static defaultProps={...kn.defaultProps,data:null,dimension:"2d",format:"rgba8unorm",width:void 0,height:void 0,depth:1,mipmaps:!0,compressed:!1,usage:0,mipLevels:void 0,samples:void 0,type:void 0,sampler:{},view:void 0};static COPY_SRC=1;static COPY_DST=2;static TEXTURE_BINDING=4;static STORAGE_BINDING=8;static RENDER_ATTACHMENT=16;get[Symbol.toStringTag](){return"Texture"}dimension;format;width;height;depth;updateTimestamp;constructor(t,e,n=fr.defaultProps){super(t,e,n),this.dimension=this.props.dimension,this.format=this.props.format,this.width=this.props.width,this.height=this.props.height,this.depth=this.props.depth,this.updateTimestamp=t.incrementTimestamp()}}class mr extends kn{static defaultProps={...kn.defaultProps,type:"color-sampler",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",addressModeW:"clamp-to-edge",magFilter:"nearest",minFilter:"nearest",mipmapFilter:"nearest",lodMinClamp:0,lodMaxClamp:32,compare:"less-equal",maxAnisotropy:1};get[Symbol.toStringTag](){return"Sampler"}constructor(t,e){super(t,e,mr.defaultProps)}}class Ir extends kn{static defaultProps={...kn.defaultProps,vs:null,vertexEntryPoint:"vertexMain",vsConstants:{},fs:null,fragmentEntryPoint:"fragmentMain",fsConstants:{},shaderLayout:null,bufferLayout:[],topology:"triangle-list",parameters:{},bindings:{},uniforms:{}};get[Symbol.toStringTag](){return"RenderPipeline"}shaderLayout;bufferLayout;linkStatus="pending";hash="";constructor(t,e){super(t,e,Ir.defaultProps),this.shaderLayout=this.props.shaderLayout,this.bufferLayout=this.props.bufferLayout||[]}setUniformsWebGL(t){throw new Error("Use uniform blocks")}}function yr(t){return Array.isArray(t)?0===t.length||"number"==typeof t[0]?t:null:function(t){return!ArrayBuffer.isView(t)||t instanceof DataView?null:t}(t)}class Cr{name;uniforms={};modifiedUniforms={};modified=!0;bindingLayout={};needsRedraw="initialized";constructor(t){if(this.name=t?.name,t?.name&&t?.shaderLayout){const e=t?.shaderLayout.bindings?.find((e=>"uniform"===e.type&&e.name===t?.name));if(!e)throw new Error(t?.name);const n=e;for(const t of n.uniforms||[])this.bindingLayout[t.name]=t}}setUniforms(t){for(const[e,n]of Object.entries(t))this._setUniform(e,n),this.needsRedraw||this.setNeedsRedraw(`${this.name}.${e}=${n}`)}setNeedsRedraw(t){this.needsRedraw=this.needsRedraw||t}getAllUniforms(){return this.modifiedUniforms={},this.needsRedraw=!1,this.uniforms||{}}_setUniform(t,e){(function(t,e){if(t!==e)return!1;const n=yr(t);if(!n)return!1;const i=yr(e);if(i&&n.length===i.length)for(let t=0;t<n.length;++t)if(i[t]!==n[t])return!1;return!0})(this.uniforms[t],e)||(this.uniforms[t]=function(t){const e=yr(t);return e?e.slice():t}(e),this.modifiedUniforms[t]=!0,this.modified=!0)}}const Er={f32:{type:"f32",components:1},i32:{type:"i32",components:1},u32:{type:"u32",components:1},"vec2<f32>":{type:"f32",components:2},"vec3<f32>":{type:"f32",components:3},"vec4<f32>":{type:"f32",components:4},"vec2<i32>":{type:"i32",components:2},"vec3<i32>":{type:"i32",components:3},"vec4<i32>":{type:"i32",components:4},"vec2<u32>":{type:"u32",components:2},"vec3<u32>":{type:"u32",components:3},"vec4<u32>":{type:"u32",components:4},"mat2x2<f32>":{type:"f32",components:4},"mat2x3<f32>":{type:"f32",components:6},"mat2x4<f32>":{type:"f32",components:8},"mat3x2<f32>":{type:"f32",components:6},"mat3x3<f32>":{type:"f32",components:9},"mat3x4<f32>":{type:"f32",components:12},"mat4x2<f32>":{type:"f32",components:8},"mat4x3<f32>":{type:"f32",components:12},"mat4x4<f32>":{type:"f32",components:16}};function _r(t){const e=Er[t];return gr(t),e}function vr(t,e){switch(e){case 1:return t;case 2:return t+t%2;default:return t+(4-t%4)%4}}let Br;function wr(t){return(!Br||Br.byteLength<t)&&(Br=new ArrayBuffer(t)),Br}const br=new $n({id:"luma.gl"});class Qr{layout={};byteLength;constructor(t){let e=0;for(const[n,i]of Object.entries(t)){const t=_r(i),{type:r,components:o}=t;e=vr(e,o);const s=e;e+=o,this.layout[n]={type:r,size:o,offset:s}}e+=(4-e%4)%4;const n=4*e;this.byteLength=Math.max(n,1024)}getData(t){const e=wr(Math.max(this.byteLength,1024)),n={i32:new Int32Array(e),u32:new Uint32Array(e),f32:new Float32Array(e),f16:new Uint16Array(e)};for(const[e,i]of Object.entries(t)){const t=this.layout[e];if(!t){br.warn(`Supplied uniform value ${e} not present in uniform block layout`)();continue}const{type:r,size:o,offset:s}=t,a=n[r];if(1===o){if("number"!=typeof i&&"boolean"!=typeof i){br.warn(`Supplied value for single component uniform ${e} is not a number: ${i}`)();continue}a[s]=Number(i)}else{const t=yr(i);if(!t){br.warn(`Supplied value for multi component / array uniform ${e} is not a numeric array: ${i}`)();continue}a.set(t,s)}}return new Uint8Array(e)}has(t){return Boolean(this.layout[t])}get(t){return this.layout[t]}}class xr{uniformBlocks=new Map;uniformBufferLayouts=new Map;uniformBuffers=new Map;constructor(t){for(const[e,n]of Object.entries(t)){const t=e,i=new Qr(n.uniformTypes||{});this.uniformBufferLayouts.set(t,i);const r=new Cr({name:e});r.setUniforms(n.defaultUniforms||{}),this.uniformBlocks.set(t,r)}}destroy(){for(const t of this.uniformBuffers.values())t.destroy()}setUniforms(t){for(const[e,n]of Object.entries(t))this.uniformBlocks.get(e).setUniforms(n);this.updateUniformBuffers()}getUniformBufferByteLength(t){return this.uniformBufferLayouts.get(t).byteLength}getUniformBufferData(t){const e=this.uniformBlocks.get(t).getAllUniforms();return this.uniformBufferLayouts.get(t).getData(e)}createUniformBuffer(t,e,n){n&&this.setUniforms(n);const i=this.getUniformBufferByteLength(e),r=t.createBuffer({usage:Rn.UNIFORM|Rn.COPY_DST,byteLength:i}),o=this.getUniformBufferData(e);return r.write(o),r}getManagedUniformBuffer(t,e){if(!this.uniformBuffers.get(e)){const n=this.getUniformBufferByteLength(e),i=t.createBuffer({usage:Rn.UNIFORM|Rn.COPY_DST,byteLength:n});this.uniformBuffers.set(e,i)}return this.uniformBuffers.get(e)}updateUniformBuffers(){let t=!1;for(const e of this.uniformBlocks.keys()){const n=this.updateUniformBuffer(e);t||=n}return t&&br.log(3,`UniformStore.updateUniformBuffers(): ${t}`)(),t}updateUniformBuffer(t){const e=this.uniformBlocks.get(t);let n=!1;if(this.uniformBuffers.get(t)&&e.needsRedraw){n||=e.needsRedraw;const i=this.getUniformBufferData(t);this.uniformBuffers.get(t).write(i);const r=this.uniformBlocks.get(t).getAllUniforms();br.log(4,`Writing to uniform buffer ${String(t)}`,i,r)()}return n}}function Dr(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!Dr(t[i],e[i],n-1))return!1;return!0}if(Array.isArray(e))return!1;if("object"==typeof t&&"object"==typeof e){const i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(const r of i){if(!e.hasOwnProperty(r))return!1;if(!Dr(t[r],e[r],n-1))return!1}return!0}return!1}function Sr(t){const e={bindings:{},uniforms:{}};return Object.keys(t).forEach((n=>{const i=t[n];var r;null!==yr(r=i)||"number"==typeof r||"boolean"==typeof r?e.uniforms[n]=i:e.bindings[n]=i})),e}const Mr={f32:["f32",1],"vec2<f32>":["f32",2],"vec3<f32>":["f32",3],"vec4<f32>":["f32",4],f16:["f16",1],"vec2<f16>":["f16",2],"vec3<f16>":["f16",3],"vec4<f16>":["f16",4],i32:["i32",1],"vec2<i32>":["i32",2],"vec3<i32>":["i32",3],"vec4<i32>":["i32",4],u32:["u32",1],"vec2<u32>":["u32",2],"vec3<u32>":["u32",3],"vec4<u32>":["u32",4]},kr={f32:4,f16:2,i32:4,u32:4};function Rr(t){const e=function(t){const e=Pr[t];return e}(Nr[t]),n=t.includes("norm"),i=!n&&!t.startsWith("float"),r=t.startsWith("s");return{dataType:Nr[t],byteLength:e,integer:i,signed:r,normalized:n}}const Nr={uint8:"uint8",sint8:"sint8",unorm8:"uint8",snorm8:"sint8",uint16:"uint16",sint16:"sint16",unorm16:"uint16",snorm16:"sint16",float16:"float16",float32:"float32",uint32:"uint32",sint32:"sint32"},Pr={uint8:1,sint8:1,uint16:2,sint16:2,float16:2,float32:4,uint32:4,sint32:4};function Tr(t){let e;t.endsWith("-webgl")&&(t.replace("-webgl",""),e=!0);const[n,i]=t.split("x"),r=n,o=i?parseInt(i):1,s=Rr(r),a={type:r,components:o,byteLength:s.byteLength*o,integer:s.integer,signed:s.signed,normalized:s.normalized};return e&&(a.webglOnly=!0),a}function Lr(t,e){const n={};for(const i of t.attributes)n[i.name]=Fr(t,e,i.name);return n}function Fr(t,e,n){const i=function(t,e){const n=t.attributes.find((t=>t.name===e));n||br.warn(`shader layout attribute "${e}" not present in shader`);return n||null}(t,n),r=function(t,e){Or(t);let n=function(t,e){for(const n of t)if(n.format&&n.name===e)return{attributeName:n.name,bufferName:e,stepMode:n.stepMode,vertexFormat:n.format,byteOffset:0,byteStride:n.byteStride||0};return null}(t,e);if(n)return n;if(n=function(t,e){for(const n of t){let t=n.byteStride;if("number"!=typeof n.byteStride)for(const e of n.attributes||[]){t+=Tr(e.format).byteLength}const i=n.attributes?.find((t=>t.attribute===e));if(i)return{attributeName:i.attribute,bufferName:n.name,stepMode:n.stepMode,vertexFormat:i.format,byteOffset:i.byteOffset,byteStride:t}}return null}(t,e),n)return n;return br.warn(`layout for attribute "${e}" not present in buffer layout`),null}(e,n);if(!i)return null;const o=function(t){const[e,n]=Mr[t],i="i32"===e||"u32"===e,r="u32"!==e,o=kr[e]*n,s=function(t,e){let n;switch(t){case"f32":n="float32";break;case"i32":n="sint32";break;case"u32":n="uint32";break;case"f16":return e<=2?"float16x2":"float16x4"}return 1===e?n:`${n}x${e}`}(e,n);return{dataType:e,components:n,defaultVertexFormat:s,byteLength:o,integer:i,signed:r}}(i.type),s=r?.vertexFormat||o.defaultVertexFormat,a=Tr(s);return{attributeName:r?.attributeName||i.name,bufferName:r?.bufferName||i.name,location:i.location,shaderType:i.type,shaderDataType:o.dataType,shaderComponents:o.components,vertexFormat:s,bufferDataType:a.type,bufferComponents:a.components,normalized:a.normalized,integer:o.integer,stepMode:r?.stepMode||i.stepMode,byteOffset:r?.byteOffset||0,byteStride:r?.byteStride||0}}function Or(t){for(const e of t)(e.attributes&&e.format||!e.attributes&&!e.format)&&br.warn(`BufferLayout ${name} must have either 'attributes' or 'format' field`)}function Gr(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const Ur={number:{type:"number",validate:(t,e)=>Number.isFinite(t)&&"object"==typeof e&&(void 0===e.max||t<=e.max)&&(void 0===e.min||t>=e.min)},array:{type:"array",validate:(t,e)=>Array.isArray(t)||ArrayBuffer.isView(t)}};function jr(t){let e=Yr(t);if("object"!==e)return{value:t,...Ur[e],type:e};if("object"==typeof t)return t?void 0!==t.type?{...t,...Ur[t.type],type:t.type}:void 0===t.value?{type:"object",value:t}:(e=Yr(t.value),{...t,...Ur[e],type:e}):{type:"object",value:null};throw new Error("props")}function Yr(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}const Kr={vertex:"#ifdef MODULE_LOGDEPTH\nlogdepth_adjustPosition(gl_Position);\n#endif\n",fragment:"#ifdef MODULE_MATERIAL\ngl_FragColor = material_filterColor(gl_FragColor);\n#endif\n#ifdef MODULE_LIGHTING\ngl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n#ifdef MODULE_FOG\ngl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n#ifdef MODULE_PICKING\ngl_FragColor = picking_filterHighlightColor(gl_FragColor);\ngl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n#ifdef MODULE_LOGDEPTH\nlogdepth_setFragDepth();\n#endif\n"},zr=/void\s+main\s*\([^)]*\)\s*\{\n?/,Jr=/}\n?[^{}]*$/,qr=[],Hr="__LUMA_INJECT_DECLARATIONS__";function Vr(t){const e=t.slice(0,2);switch(e){case"vs":return"vertex";case"fs":return"fragment";default:throw new Error(e)}}function Wr(t,e,n,i=!1){const r="vertex"===e;for(const e in n){const i=n[e];i.sort(((t,e)=>t.order-e.order)),qr.length=i.length;for(let t=0,e=i.length;t<e;++t)qr[t]=i[t].injection;const o=`${qr.join("\n")}\n`;switch(e){case"vs:#decl":r&&(t=t.replace(Hr,o));break;case"vs:#main-start":r&&(t=t.replace(zr,(t=>t+o)));break;case"vs:#main-end":r&&(t=t.replace(Jr,(t=>o+t)));break;case"fs:#decl":r||(t=t.replace(Hr,o));break;case"fs:#main-start":r||(t=t.replace(zr,(t=>t+o)));break;case"fs:#main-end":r||(t=t.replace(Jr,(t=>o+t)));break;default:t=t.replace(e,(t=>t+o))}}return t=t.replace(Hr,""),i&&(t=t.replace(/\}\s*$/,(t=>t+Kr[e]))),t}let Zr=1;class Xr{name;vs;fs;getModuleUniforms;dependencies;deprecations;defines;injections;uniforms={};uniformTypes={};static instantiateModules(t){return t.map((t=>{if(t instanceof Xr)return t;Gr("string"!=typeof t,`Shader module use by name is deprecated. Import shader module '${JSON.stringify(t)}' and use it directly.`),t.name||(console.warn("shader module has no name"),t.name="shader-module-"+Zr++);const e=new Xr(t);return e.dependencies=Xr.instantiateModules(t.dependencies||[]),e}))}constructor(t){const{name:e,vs:n,fs:i,dependencies:r=[],uniformTypes:o={},uniformPropTypes:s={},getUniforms:a,deprecations:A=[],defines:l={},inject:c={}}=t;Gr("string"==typeof e),this.name=e,this.vs=n,this.fs=i,this.getModuleUniforms=a,this.dependencies=Xr.instantiateModules(r),this.deprecations=this._parseDeprecationDefinitions(A),this.defines=l,this.injections=function(t){const e={vertex:{},fragment:{}};for(const n in t){let i=t[n];"string"==typeof i&&(i={order:0,injection:i}),e[Vr(n)][n]=i}return e}(c),this.uniformTypes=o,s&&(this.uniforms=function(t){const e={};for(const[n,i]of Object.entries(t))e[n]=jr(i);return e}(s))}getModuleSource(t){let e;switch(t){case"vertex":e=this.vs||"";break;case"fragment":e=this.fs||"";break;default:Gr(!1)}const n=this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_");return`// ----- MODULE ${this.name} ---------------\n\n#define MODULE_${n}\n${e}\n\n`}getUniforms(t,e){return this.getModuleUniforms?this.getModuleUniforms(t,e):function(t,e,n){const i={};for(const[r,o]of Object.entries(e))t&&r in t&&!o.private?(o.validate&&Gr(o.validate(t[r],o),`${n}: invalid ${r}`),i[r]=t[r]):i[r]=o.value;return i}(t,this.uniforms,this.name)}getDefines(){return this.defines}checkDeprecations(t,e){this.deprecations.forEach((n=>{n.regex?.test(t)&&(n.deprecated?e.deprecated(n.old,n.new)():e.removed(n.old,n.new)())}))}_parseDeprecationDefinitions(t){return t.forEach((t=>{if("function"===t.type)t.regex=new RegExp(`\\b${t.old}\\(`);else t.regex=new RegExp(`${t.type} ${t.old};`)})),t}_defaultGetUniforms(t={}){const e={},n=this.uniforms;for(const i in n){const r=n[i];i in t&&!r.private?(r.validate&&Gr(r.validate(t[i],r),`${this.name}: invalid ${i}`),e[i]=t[i]):e[i]=r.value}return e}}function $r(t){if(t.source&&"webgpu"===t.platformInfo.type){return{...t,vs:void 0,fs:void 0}}if(!t.vs)throw new Error("no vertex shader");const e=to(t.platformInfo,t.vs);let n;return t.fs&&(n=to(t.platformInfo,t.fs)),{...t,vs:e,fs:n}}function to(t,e){if("string"==typeof e)return e;if("webgpu"===t.type){if(e?.wgsl)return e.wgsl;throw new Error("WebGPU does not support GLSL shaders")}if(e?.glsl)return e.glsl;throw new Error("WebGL does not support WGSL shaders")}function eo(t){return no(Xr.instantiateModules(t))}function no(t){const e={},n={};return io({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort(((t,e)=>n[e]-n[t])).map((t=>e[t]))}function io(t){const{modules:e,level:n,moduleMap:i,moduleDepth:r}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const t of e)i[t.name]=t,(void 0===r[t.name]||r[t.name]<n)&&(r[t.name]=n);for(const t of e)t.dependencies&&io({modules:t.dependencies,level:n+1,moduleMap:i,moduleDepth:r})}const ro=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],oo=[...ro,[Ao("attribute"),"in $1"],[Ao("varying"),"out $1"]],so=[...ro,[Ao("varying"),"in $1"]];function ao(t,e){for(const[n,i]of e)t=t.replace(n,i);return t}function Ao(t){return new RegExp(`\\b${t}[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)`,"g")}function lo(t,e){let n="";for(const i in t){const r=t[i];if(n+=`void ${r.signature} {\n`,r.header&&(n+=`  ${r.header}`),e[i]){const t=e[i];t.sort(((t,e)=>t.order-e.order));for(const e of t)n+=`  ${e.injection}\n`}r.footer&&(n+=`  ${r.footer}`),n+="}\n"}return n}function co(t){const e={vertex:{},fragment:{}};for(const n of t){let t,i;"string"!=typeof n?(t=n,i=t.hook):(t={},i=n),i=i.trim();const[r,o]=i.split(":"),s=i.replace(/\(.+/,""),a=Object.assign(t,{signature:o});switch(r){case"vs":e.vertex[s]=a;break;case"fs":e.fragment[s]=a;break;default:throw new Error(r)}}return e}function uo(t,e="unnamed"){const n=/#define[^\S\r\n]*SHADER_NAME[^\S\r\n]*([A-Za-z0-9_-]+)\s*/.exec(t);return n?n[1]:e}function ho(t){let e=100;const n=t.match(/[^\s]+/g);if(n&&n.length>=2&&"#version"===n[0]){const t=parseInt(n[1],10);Number.isFinite(t)&&(e=t)}if(100!==e&&300!==e)throw new Error(`Invalid GLSL version ${e}`);return e}const go=`\n\n${Hr}\n`,po="precision highp float;\n";function fo(t,e){const{source:n,stage:i,modules:r,hookFunctions:o=[],inject:s={},log:a}=e;Gr("string"==typeof n,"shader source must be a string");const A=n;let l="";const c=co(o),u={},h={},g={};for(const t in s){const e="string"==typeof s[t]?{injection:s[t],order:0}:s[t],n=/^(v|f)s:(#)?([\w-]+)$/.exec(t);if(n){const i=n[2],r=n[3];i?"decl"===r?h[t]=[e]:g[t]=[e]:u[t]=[e]}else g[t]=[e]}const d="webgpu"!==t.type?r:[];for(const t of d){a&&t.checkDeprecations(A,a);l+=t.getModuleSource(i,"wgsl");const e=t.injections[i];for(const t in e){const n=/^(v|f)s:#([\w-]+)$/.exec(t);if(n){const i="decl"===n[2]?h:g;i[t]=i[t]||[],i[t].push(e[t])}else u[t]=u[t]||[],u[t].push(e[t])}}return l+=go,l=Wr(l,i,h),l+=lo(c[i],u),l+=A,l=Wr(l,i,g),l}function mo(t,e){const{id:n,source:i,stage:r,language:o="glsl",modules:s,defines:a={},hookFunctions:A=[],inject:l={},prologue:c=!0,log:u}=e;Gr("string"==typeof i,"shader source must be a string");const h="glsl"===o?function(t,e){return{name:uo(t,e),language:"glsl",version:ho(t)}}(i).version:-1,g=t.shaderLanguageVersion,d=100===h?"#version 100":"#version 300 es",p=i.split("\n").slice(1).join("\n"),f={};s.forEach((t=>{Object.assign(f,t.getDefines())})),Object.assign(f,a);let m="";switch(o){case"wgsl":break;case"glsl":m=c?`${d}\n\n// ----- PROLOGUE -------------------------\n${function(t){const{id:e,source:n,stage:i}=t,r=e&&-1===n.indexOf("SHADER_NAME");return r?`\n#define SHADER_NAME ${e}_${i}\n\n`:""}({id:n,source:i,stage:r})}\n#define SHADER_TYPE_${r.toUpperCase()}\n${function(t){switch(t?.gpu.toLowerCase()){case"apple":return"#define APPLE_GPU\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"nvidia":return"#define NVIDIA_GPU\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(t)}\n${"fragment"===r?po:""}\n\n// ----- APPLICATION DEFINES -------------------------\n\n${function(t={}){let e="";for(const n in t){const i=t[n];(i||Number.isFinite(i))&&(e+=`#define ${n.toUpperCase()} ${t[n]}\n`)}return e}(f)}\n\n`:`${d}\n`}const I=co(A),y={},C={},E={};for(const t in l){const e="string"==typeof l[t]?{injection:l[t],order:0}:l[t],n=/^(v|f)s:(#)?([\w-]+)$/.exec(t);if(n){const i=n[2],r=n[3];i?"decl"===r?C[t]=[e]:E[t]=[e]:y[t]=[e]}else E[t]=[e]}for(const t of s){u&&t.checkDeprecations(p,u);m+=t.getModuleSource(r);const e=t.injections[r];for(const t in e){const n=/^(v|f)s:#([\w-]+)$/.exec(t);if(n){const i="decl"===n[2]?C:E;i[t]=i[t]||[],i[t].push(e[t])}else y[t]=y[t]||[],y[t].push(e[t])}}return m+="// ----- MAIN SHADER SOURCE -------------------------",m+=go,m=Wr(m,r,C),m+=lo(I[r],y),m+=p,m=Wr(m,r,E),"glsl"===o&&h!==g&&(m=function(t,e){if(300!==Number(t.match(/^#version[ \t]+(\d+)/m)?.[1]||100))throw new Error("luma.gl v9 only supports GLSL 3.00 shader sources");switch(e){case"vertex":return ao(t,oo);case"fragment":return ao(t,so);default:throw new Error(e)}}(m,r)),m.trim()}function Io(t){return function(e){const n={};for(const i of t){const t=i.getUniforms(e,n);Object.assign(n,t)}return n}}class yo{static defaultShaderAssembler;_hookFunctions=[];_defaultModules=[];static getDefaultShaderAssembler(){return yo.defaultShaderAssembler=yo.defaultShaderAssembler||new yo,yo.defaultShaderAssembler}addDefaultModule(t){this._defaultModules.find((e=>e.name===("string"==typeof t?t:t.name)))||this._defaultModules.push(t)}removeDefaultModule(t){const e="string"==typeof t?t:t.name;this._defaultModules=this._defaultModules.filter((t=>t.name!==e))}addShaderHook(t,e){e&&(t=Object.assign(e,{hook:t})),this._hookFunctions.push(t)}assembleShader(t){const e=this._getModuleList(t.modules),n=this._hookFunctions,i=$r(t),r=function(t){const e=eo(t.modules||[]);return{source:fo(t.platformInfo,{...t,source:t.source,stage:"vertex",modules:e}),getUniforms:Io(e)}}({platformInfo:t.platformInfo,...i,modules:e,hookFunctions:n});return{...r,modules:e}}assembleShaderPair(t){const e=$r(t),n=this._getModuleList(t.modules),i=this._hookFunctions,{platformInfo:r}=t,o="wgsl"===t.platformInfo.shaderLanguage?function(t){const e=eo(t.modules||[]);return{vs:fo(t.platformInfo,{...t,source:t.vs,stage:"vertex",modules:e}),fs:fo(t.platformInfo,{...t,source:t.fs,stage:"fragment",modules:e}),getUniforms:Io(e)}}({platformInfo:r,...e,modules:n,hookFunctions:i}):function(t){const{vs:e,fs:n}=t,i=eo(t.modules||[]);return{vs:mo(t.platformInfo,{...t,source:e,stage:"vertex",modules:i}),fs:mo(t.platformInfo,{...t,source:n,stage:"fragment",modules:i}),getUniforms:Io(i)}}({platformInfo:r,...e,modules:n,hookFunctions:i});return{...o,modules:n}}_getModuleList(t=[]){const e=new Array(this._defaultModules.length+t.length),n={};let i=0;for(let t=0,r=this._defaultModules.length;t<r;++t){const r=this._defaultModules[t],o=r.name;e[i++]=r,n[o]=!0}for(let r=0,o=t.length;r<o;++r){const o=t[r],s=o.name;n[s]||(e[i++]=o,n[s]=!0)}return e.length=i,Xr.instantiateModules(e)}}class Co{constructor(){this.constants=new Map,this.aliases=new Map,this.structs=new Map}}class Eo{constructor(){}get isAstNode(){return!0}get astNodeType(){return""}evaluate(t){throw new Error("Cannot evaluate node")}evaluateString(t){return this.evaluate(t).toString()}search(t){}searchBlock(t,e){if(t){e(_o.instance);for(const n of t)n instanceof Array?this.searchBlock(n,e):n.search(e);e(vo.instance)}}}class _o extends Eo{}_o.instance=new _o;class vo extends Eo{}vo.instance=new vo;class Bo extends Eo{constructor(){super()}}class wo extends Bo{constructor(t,e,n,i,r,o){super(),this.calls=new Set,this.name=t,this.args=e,this.returnType=n,this.body=i,this.startLine=r,this.endLine=o}get astNodeType(){return"function"}search(t){this.searchBlock(this.body,t)}}class bo extends Bo{constructor(t){super(),this.expression=t}get astNodeType(){return"staticAssert"}search(t){this.expression.search(t)}}class Qo extends Bo{constructor(t,e){super(),this.condition=t,this.body=e}get astNodeType(){return"while"}search(t){this.condition.search(t),this.searchBlock(this.body,t)}}class xo extends Bo{constructor(t){super(),this.body=t}get astNodeType(){return"continuing"}search(t){this.searchBlock(this.body,t)}}class Do extends Bo{constructor(t,e,n,i){super(),this.init=t,this.condition=e,this.increment=n,this.body=i}get astNodeType(){return"for"}search(t){var e,n,i;null===(e=this.init)||void 0===e||e.search(t),null===(n=this.condition)||void 0===n||n.search(t),null===(i=this.increment)||void 0===i||i.search(t),this.searchBlock(this.body,t)}}class So extends Bo{constructor(t,e,n,i,r){super(),this.name=t,this.type=e,this.storage=n,this.access=i,this.value=r}get astNodeType(){return"var"}search(t){var e;t(this),null===(e=this.value)||void 0===e||e.search(t)}}class Mo extends Bo{constructor(t,e,n){super(),this.name=t,this.type=e,this.value=n}get astNodeType(){return"override"}search(t){var e;null===(e=this.value)||void 0===e||e.search(t)}}class ko extends Bo{constructor(t,e,n,i,r){super(),this.name=t,this.type=e,this.storage=n,this.access=i,this.value=r}get astNodeType(){return"let"}search(t){var e;t(this),null===(e=this.value)||void 0===e||e.search(t)}}class Ro extends Bo{constructor(t,e,n,i,r){super(),this.name=t,this.type=e,this.storage=n,this.access=i,this.value=r}get astNodeType(){return"const"}evaluate(t){return this.value.evaluate(t)}search(t){var e;t(this),null===(e=this.value)||void 0===e||e.search(t)}}var No,Po,To,Lo,Fo;!function(t){t.increment="++",t.decrement="--"}(No||(No={})),function(t){t.parse=function(e){const n=e;if("parse"==n)throw new Error("Invalid value for IncrementOperator");return t[n]}}(No||(No={}));class Oo extends Bo{constructor(t,e){super(),this.operator=t,this.variable=e}get astNodeType(){return"increment"}search(t){this.variable.search(t)}}!function(t){t.assign="=",t.addAssign="+=",t.subtractAssin="-=",t.multiplyAssign="*=",t.divideAssign="/=",t.moduloAssign="%=",t.andAssign="&=",t.orAssign="|=",t.xorAssign="^=",t.shiftLeftAssign="<<=",t.shiftRightAssign=">>="}(Po||(Po={})),function(t){t.parse=function(t){const e=t;if("parse"==e)throw new Error("Invalid value for AssignOperator");return e}}(Po||(Po={}));class Go extends Bo{constructor(t,e,n){super(),this.operator=t,this.variable=e,this.value=n}get astNodeType(){return"assign"}search(t){this.variable.search(t),this.value.search(t)}}class Uo extends Bo{constructor(t,e){super(),this.name=t,this.args=e}get astNodeType(){return"call"}search(t){for(const e of this.args)e.search(t);t(this)}}class jo extends Bo{constructor(t,e){super(),this.body=t,this.continuing=e}get astNodeType(){return"loop"}}class Yo extends Bo{constructor(t,e){super(),this.condition=t,this.body=e}get astNodeType(){return"body"}}class Ko extends Bo{constructor(t,e,n,i){super(),this.condition=t,this.body=e,this.elseif=n,this.else=i}get astNodeType(){return"if"}search(t){this.condition.search(t),this.searchBlock(this.body,t),this.searchBlock(this.elseif,t),this.searchBlock(this.else,t)}}class zo extends Bo{constructor(t){super(),this.value=t}get astNodeType(){return"return"}search(t){var e;null===(e=this.value)||void 0===e||e.search(t)}}class Jo extends Bo{constructor(t){super(),this.name=t}get astNodeType(){return"enable"}}class qo extends Bo{constructor(t){super(),this.extensions=t}get astNodeType(){return"requires"}}class Ho extends Bo{constructor(t,e){super(),this.severity=t,this.rule=e}get astNodeType(){return"diagnostic"}}class Vo extends Bo{constructor(t,e){super(),this.name=t,this.type=e}get astNodeType(){return"alias"}}class Wo extends Bo{constructor(){super()}get astNodeType(){return"discard"}}class Zo extends Bo{constructor(){super()}get astNodeType(){return"break"}}class Xo extends Bo{constructor(){super()}get astNodeType(){return"continue"}}class $o extends Bo{constructor(t){super(),this.name=t}get astNodeType(){return"type"}get isStruct(){return!1}get isArray(){return!1}}class ts extends $o{constructor(t,e,n,i){super(t),this.members=e,this.startLine=n,this.endLine=i}get astNodeType(){return"struct"}get isStruct(){return!0}getMemberIndex(t){for(let e=0;e<this.members.length;e++)if(this.members[e].name==t)return e;return-1}}class es extends $o{constructor(t,e,n){super(t),this.format=e,this.access=n}get astNodeType(){return"template"}}class ns extends $o{constructor(t,e,n,i){super(t),this.storage=e,this.type=n,this.access=i}get astNodeType(){return"pointer"}}class is extends $o{constructor(t,e,n,i){super(t),this.attributes=e,this.format=n,this.count=i}get astNodeType(){return"array"}get isArray(){return!0}}class rs extends $o{constructor(t,e,n){super(t),this.format=e,this.access=n}get astNodeType(){return"sampler"}}class os extends Eo{constructor(){super()}}class ss extends os{constructor(t){super(),this.value=t}get astNodeType(){return"stringExpr"}toString(){return this.value}evaluateString(){return this.value}}class as extends os{constructor(t,e){super(),this.type=t,this.args=e}get astNodeType(){return"createExpr"}search(t){t(this);for(const e of this.args)e.search(t)}}class As extends os{constructor(t,e){super(),this.name=t,this.args=e}get astNodeType(){return"callExpr"}evaluate(t){switch(this.name){case"abs":return Math.abs(this.args[0].evaluate(t));case"acos":return Math.acos(this.args[0].evaluate(t));case"acosh":return Math.acosh(this.args[0].evaluate(t));case"asin":return Math.asin(this.args[0].evaluate(t));case"asinh":return Math.asinh(this.args[0].evaluate(t));case"atan":return Math.atan(this.args[0].evaluate(t));case"atan2":return Math.atan2(this.args[0].evaluate(t),this.args[1].evaluate(t));case"atanh":return Math.atanh(this.args[0].evaluate(t));case"ceil":return Math.ceil(this.args[0].evaluate(t));case"clamp":return Math.min(Math.max(this.args[0].evaluate(t),this.args[1].evaluate(t)),this.args[2].evaluate(t));case"cos":return Math.cos(this.args[0].evaluate(t));case"degrees":return 180*this.args[0].evaluate(t)/Math.PI;case"distance":return Math.sqrt(Math.pow(this.args[0].evaluate(t)-this.args[1].evaluate(t),2));case"dot":case"exp":return Math.exp(this.args[0].evaluate(t));case"exp2":return Math.pow(2,this.args[0].evaluate(t));case"floor":return Math.floor(this.args[0].evaluate(t));case"fma":return this.args[0].evaluate(t)*this.args[1].evaluate(t)+this.args[2].evaluate(t);case"fract":case"modf":return this.args[0].evaluate(t)-Math.floor(this.args[0].evaluate(t));case"inverseSqrt":return 1/Math.sqrt(this.args[0].evaluate(t));case"log":return Math.log(this.args[0].evaluate(t));case"log2":return Math.log2(this.args[0].evaluate(t));case"max":return Math.max(this.args[0].evaluate(t),this.args[1].evaluate(t));case"min":return Math.min(this.args[0].evaluate(t),this.args[1].evaluate(t));case"mix":return this.args[0].evaluate(t)*(1-this.args[2].evaluate(t))+this.args[1].evaluate(t)*this.args[2].evaluate(t);case"pow":return Math.pow(this.args[0].evaluate(t),this.args[1].evaluate(t));case"radians":return this.args[0].evaluate(t)*Math.PI/180;case"round":return Math.round(this.args[0].evaluate(t));case"sign":return Math.sign(this.args[0].evaluate(t));case"sin":return Math.sin(this.args[0].evaluate(t));case"sinh":return Math.sinh(this.args[0].evaluate(t));case"saturate":return Math.min(Math.max(this.args[0].evaluate(t),0),1);case"smoothstep":return this.args[0].evaluate(t)*this.args[0].evaluate(t)*(3-2*this.args[0].evaluate(t));case"sqrt":return Math.sqrt(this.args[0].evaluate(t));case"step":return this.args[0].evaluate(t)<this.args[1].evaluate(t)?0:1;case"tan":return Math.tan(this.args[0].evaluate(t));case"tanh":return Math.tanh(this.args[0].evaluate(t));case"trunc":return Math.trunc(this.args[0].evaluate(t));default:throw new Error("Non const function: "+this.name)}}search(t){for(const e of this.args)e.search(t);t(this)}}class ls extends os{constructor(t){super(),this.name=t}get astNodeType(){return"varExpr"}search(t){t(this),this.postfix&&this.postfix.search(t)}evaluate(t){const e=t.constants.get(this.name);if(!e)throw new Error("Cannot evaluate node");return e.evaluate(t)}}class cs extends os{constructor(t,e){super(),this.name=t,this.initializer=e}get astNodeType(){return"constExpr"}evaluate(t){var e,n;if(this.initializer instanceof as){const i=null===(e=this.postfix)||void 0===e?void 0:e.evaluateString(t),r=null===(n=this.initializer.type)||void 0===n?void 0:n.name,o=t.structs.get(r),s=null==o?void 0:o.getMemberIndex(i);if(-1!=s){return this.initializer.args[s].evaluate(t)}console.log(s)}return this.initializer.evaluate(t)}search(t){this.initializer.search(t)}}class us extends os{constructor(t){super(),this.value=t}get astNodeType(){return"literalExpr"}evaluate(){return this.value}}class hs extends os{constructor(t,e){super(),this.type=t,this.value=e}get astNodeType(){return"bitcastExpr"}search(t){this.value.search(t)}}class gs extends os{constructor(t,e){super(),this.type=t,this.args=e}get astNodeType(){return"typecastExpr"}evaluate(t){return this.args[0].evaluate(t)}search(t){this.searchBlock(this.args,t)}}class ds extends os{constructor(t){super(),this.contents=t}get astNodeType(){return"groupExpr"}evaluate(t){return this.contents[0].evaluate(t)}search(t){this.searchBlock(this.contents,t)}}class ps extends os{constructor(t){super(),this.index=t}search(t){this.index.search(t)}}class fs extends os{constructor(){super()}}class ms extends fs{constructor(t,e){super(),this.operator=t,this.right=e}get astNodeType(){return"unaryOp"}evaluate(t){switch(this.operator){case"+":return this.right.evaluate(t);case"-":return-this.right.evaluate(t);case"!":return this.right.evaluate(t)?0:1;case"~":return~this.right.evaluate(t);default:throw new Error("Unknown unary operator: "+this.operator)}}search(t){this.right.search(t)}}class Is extends fs{constructor(t,e,n){super(),this.operator=t,this.left=e,this.right=n}get astNodeType(){return"binaryOp"}evaluate(t){switch(this.operator){case"+":return this.left.evaluate(t)+this.right.evaluate(t);case"-":return this.left.evaluate(t)-this.right.evaluate(t);case"*":return this.left.evaluate(t)*this.right.evaluate(t);case"/":return this.left.evaluate(t)/this.right.evaluate(t);case"%":return this.left.evaluate(t)%this.right.evaluate(t);case"==":return this.left.evaluate(t)==this.right.evaluate(t)?1:0;case"!=":return this.left.evaluate(t)!=this.right.evaluate(t)?1:0;case"<":return this.left.evaluate(t)<this.right.evaluate(t)?1:0;case">":return this.left.evaluate(t)>this.right.evaluate(t)?1:0;case"<=":return this.left.evaluate(t)<=this.right.evaluate(t)?1:0;case">=":return this.left.evaluate(t)>=this.right.evaluate(t)?1:0;case"&&":return this.left.evaluate(t)&&this.right.evaluate(t)?1:0;case"||":return this.left.evaluate(t)||this.right.evaluate(t)?1:0;default:throw new Error(`Unknown operator ${this.operator}`)}}search(t){this.left.search(t),this.right.search(t)}}class ys extends Eo{constructor(){super()}}class Cs extends ys{constructor(t,e){super(),this.selector=t,this.body=e}get astNodeType(){return"case"}search(t){this.searchBlock(this.body,t)}}class Es extends ys{constructor(t){super(),this.body=t}get astNodeType(){return"default"}search(t){this.searchBlock(this.body,t)}}class _s extends Eo{constructor(t,e,n){super(),this.name=t,this.type=e,this.attributes=n}get astNodeType(){return"argument"}}class vs extends Eo{constructor(t,e){super(),this.condition=t,this.body=e}get astNodeType(){return"elseif"}search(t){this.condition.search(t),this.searchBlock(this.body,t)}}class Bs extends Eo{constructor(t,e,n){super(),this.name=t,this.type=e,this.attributes=n}get astNodeType(){return"member"}}class ws extends Eo{constructor(t,e){super(),this.name=t,this.value=e}get astNodeType(){return"attribute"}}!function(t){t[t.token=0]="token",t[t.keyword=1]="keyword",t[t.reserved=2]="reserved"}(Lo||(Lo={}));class bs{constructor(t,e,n){this.name=t,this.type=e,this.rule=n}toString(){return this.name}}class Qs{}To=Qs,Qs.none=new bs("",Lo.reserved,""),Qs.eof=new bs("EOF",Lo.token,""),Qs.reserved={asm:new bs("asm",Lo.reserved,"asm"),bf16:new bs("bf16",Lo.reserved,"bf16"),do:new bs("do",Lo.reserved,"do"),enum:new bs("enum",Lo.reserved,"enum"),f16:new bs("f16",Lo.reserved,"f16"),f64:new bs("f64",Lo.reserved,"f64"),handle:new bs("handle",Lo.reserved,"handle"),i8:new bs("i8",Lo.reserved,"i8"),i16:new bs("i16",Lo.reserved,"i16"),i64:new bs("i64",Lo.reserved,"i64"),mat:new bs("mat",Lo.reserved,"mat"),premerge:new bs("premerge",Lo.reserved,"premerge"),regardless:new bs("regardless",Lo.reserved,"regardless"),typedef:new bs("typedef",Lo.reserved,"typedef"),u8:new bs("u8",Lo.reserved,"u8"),u16:new bs("u16",Lo.reserved,"u16"),u64:new bs("u64",Lo.reserved,"u64"),unless:new bs("unless",Lo.reserved,"unless"),using:new bs("using",Lo.reserved,"using"),vec:new bs("vec",Lo.reserved,"vec"),void:new bs("void",Lo.reserved,"void")},Qs.keywords={array:new bs("array",Lo.keyword,"array"),atomic:new bs("atomic",Lo.keyword,"atomic"),bool:new bs("bool",Lo.keyword,"bool"),f32:new bs("f32",Lo.keyword,"f32"),i32:new bs("i32",Lo.keyword,"i32"),mat2x2:new bs("mat2x2",Lo.keyword,"mat2x2"),mat2x3:new bs("mat2x3",Lo.keyword,"mat2x3"),mat2x4:new bs("mat2x4",Lo.keyword,"mat2x4"),mat3x2:new bs("mat3x2",Lo.keyword,"mat3x2"),mat3x3:new bs("mat3x3",Lo.keyword,"mat3x3"),mat3x4:new bs("mat3x4",Lo.keyword,"mat3x4"),mat4x2:new bs("mat4x2",Lo.keyword,"mat4x2"),mat4x3:new bs("mat4x3",Lo.keyword,"mat4x3"),mat4x4:new bs("mat4x4",Lo.keyword,"mat4x4"),ptr:new bs("ptr",Lo.keyword,"ptr"),sampler:new bs("sampler",Lo.keyword,"sampler"),sampler_comparison:new bs("sampler_comparison",Lo.keyword,"sampler_comparison"),struct:new bs("struct",Lo.keyword,"struct"),texture_1d:new bs("texture_1d",Lo.keyword,"texture_1d"),texture_2d:new bs("texture_2d",Lo.keyword,"texture_2d"),texture_2d_array:new bs("texture_2d_array",Lo.keyword,"texture_2d_array"),texture_3d:new bs("texture_3d",Lo.keyword,"texture_3d"),texture_cube:new bs("texture_cube",Lo.keyword,"texture_cube"),texture_cube_array:new bs("texture_cube_array",Lo.keyword,"texture_cube_array"),texture_multisampled_2d:new bs("texture_multisampled_2d",Lo.keyword,"texture_multisampled_2d"),texture_storage_1d:new bs("texture_storage_1d",Lo.keyword,"texture_storage_1d"),texture_storage_2d:new bs("texture_storage_2d",Lo.keyword,"texture_storage_2d"),texture_storage_2d_array:new bs("texture_storage_2d_array",Lo.keyword,"texture_storage_2d_array"),texture_storage_3d:new bs("texture_storage_3d",Lo.keyword,"texture_storage_3d"),texture_depth_2d:new bs("texture_depth_2d",Lo.keyword,"texture_depth_2d"),texture_depth_2d_array:new bs("texture_depth_2d_array",Lo.keyword,"texture_depth_2d_array"),texture_depth_cube:new bs("texture_depth_cube",Lo.keyword,"texture_depth_cube"),texture_depth_cube_array:new bs("texture_depth_cube_array",Lo.keyword,"texture_depth_cube_array"),texture_depth_multisampled_2d:new bs("texture_depth_multisampled_2d",Lo.keyword,"texture_depth_multisampled_2d"),texture_external:new bs("texture_external",Lo.keyword,"texture_external"),u32:new bs("u32",Lo.keyword,"u32"),vec2:new bs("vec2",Lo.keyword,"vec2"),vec3:new bs("vec3",Lo.keyword,"vec3"),vec4:new bs("vec4",Lo.keyword,"vec4"),bitcast:new bs("bitcast",Lo.keyword,"bitcast"),block:new bs("block",Lo.keyword,"block"),break:new bs("break",Lo.keyword,"break"),case:new bs("case",Lo.keyword,"case"),continue:new bs("continue",Lo.keyword,"continue"),continuing:new bs("continuing",Lo.keyword,"continuing"),default:new bs("default",Lo.keyword,"default"),diagnostic:new bs("diagnostic",Lo.keyword,"diagnostic"),discard:new bs("discard",Lo.keyword,"discard"),else:new bs("else",Lo.keyword,"else"),enable:new bs("enable",Lo.keyword,"enable"),fallthrough:new bs("fallthrough",Lo.keyword,"fallthrough"),false:new bs("false",Lo.keyword,"false"),fn:new bs("fn",Lo.keyword,"fn"),for:new bs("for",Lo.keyword,"for"),function:new bs("function",Lo.keyword,"function"),if:new bs("if",Lo.keyword,"if"),let:new bs("let",Lo.keyword,"let"),const:new bs("const",Lo.keyword,"const"),loop:new bs("loop",Lo.keyword,"loop"),while:new bs("while",Lo.keyword,"while"),private:new bs("private",Lo.keyword,"private"),read:new bs("read",Lo.keyword,"read"),read_write:new bs("read_write",Lo.keyword,"read_write"),return:new bs("return",Lo.keyword,"return"),requires:new bs("requires",Lo.keyword,"requires"),storage:new bs("storage",Lo.keyword,"storage"),switch:new bs("switch",Lo.keyword,"switch"),true:new bs("true",Lo.keyword,"true"),alias:new bs("alias",Lo.keyword,"alias"),type:new bs("type",Lo.keyword,"type"),uniform:new bs("uniform",Lo.keyword,"uniform"),var:new bs("var",Lo.keyword,"var"),override:new bs("override",Lo.keyword,"override"),workgroup:new bs("workgroup",Lo.keyword,"workgroup"),write:new bs("write",Lo.keyword,"write"),r8unorm:new bs("r8unorm",Lo.keyword,"r8unorm"),r8snorm:new bs("r8snorm",Lo.keyword,"r8snorm"),r8uint:new bs("r8uint",Lo.keyword,"r8uint"),r8sint:new bs("r8sint",Lo.keyword,"r8sint"),r16uint:new bs("r16uint",Lo.keyword,"r16uint"),r16sint:new bs("r16sint",Lo.keyword,"r16sint"),r16float:new bs("r16float",Lo.keyword,"r16float"),rg8unorm:new bs("rg8unorm",Lo.keyword,"rg8unorm"),rg8snorm:new bs("rg8snorm",Lo.keyword,"rg8snorm"),rg8uint:new bs("rg8uint",Lo.keyword,"rg8uint"),rg8sint:new bs("rg8sint",Lo.keyword,"rg8sint"),r32uint:new bs("r32uint",Lo.keyword,"r32uint"),r32sint:new bs("r32sint",Lo.keyword,"r32sint"),r32float:new bs("r32float",Lo.keyword,"r32float"),rg16uint:new bs("rg16uint",Lo.keyword,"rg16uint"),rg16sint:new bs("rg16sint",Lo.keyword,"rg16sint"),rg16float:new bs("rg16float",Lo.keyword,"rg16float"),rgba8unorm:new bs("rgba8unorm",Lo.keyword,"rgba8unorm"),rgba8unorm_srgb:new bs("rgba8unorm_srgb",Lo.keyword,"rgba8unorm_srgb"),rgba8snorm:new bs("rgba8snorm",Lo.keyword,"rgba8snorm"),rgba8uint:new bs("rgba8uint",Lo.keyword,"rgba8uint"),rgba8sint:new bs("rgba8sint",Lo.keyword,"rgba8sint"),bgra8unorm:new bs("bgra8unorm",Lo.keyword,"bgra8unorm"),bgra8unorm_srgb:new bs("bgra8unorm_srgb",Lo.keyword,"bgra8unorm_srgb"),rgb10a2unorm:new bs("rgb10a2unorm",Lo.keyword,"rgb10a2unorm"),rg11b10float:new bs("rg11b10float",Lo.keyword,"rg11b10float"),rg32uint:new bs("rg32uint",Lo.keyword,"rg32uint"),rg32sint:new bs("rg32sint",Lo.keyword,"rg32sint"),rg32float:new bs("rg32float",Lo.keyword,"rg32float"),rgba16uint:new bs("rgba16uint",Lo.keyword,"rgba16uint"),rgba16sint:new bs("rgba16sint",Lo.keyword,"rgba16sint"),rgba16float:new bs("rgba16float",Lo.keyword,"rgba16float"),rgba32uint:new bs("rgba32uint",Lo.keyword,"rgba32uint"),rgba32sint:new bs("rgba32sint",Lo.keyword,"rgba32sint"),rgba32float:new bs("rgba32float",Lo.keyword,"rgba32float"),static_assert:new bs("static_assert",Lo.keyword,"static_assert")},Qs.tokens={decimal_float_literal:new bs("decimal_float_literal",Lo.token,/((-?[0-9]*\.[0-9]+|-?[0-9]+\.[0-9]*)((e|E)(\+|-)?[0-9]+)?f?)|(-?[0-9]+(e|E)(\+|-)?[0-9]+f?)|([0-9]+f)/),hex_float_literal:new bs("hex_float_literal",Lo.token,/-?0x((([0-9a-fA-F]*\.[0-9a-fA-F]+|[0-9a-fA-F]+\.[0-9a-fA-F]*)((p|P)(\+|-)?[0-9]+f?)?)|([0-9a-fA-F]+(p|P)(\+|-)?[0-9]+f?))/),int_literal:new bs("int_literal",Lo.token,/-?0x[0-9a-fA-F]+|0i?|-?[1-9][0-9]*i?/),uint_literal:new bs("uint_literal",Lo.token,/0x[0-9a-fA-F]+u|0u|[1-9][0-9]*u/),ident:new bs("ident",Lo.token,/[_a-zA-Z][0-9a-zA-Z_]*/),and:new bs("and",Lo.token,"&"),and_and:new bs("and_and",Lo.token,"&&"),arrow:new bs("arrow ",Lo.token,"->"),attr:new bs("attr",Lo.token,"@"),forward_slash:new bs("forward_slash",Lo.token,"/"),bang:new bs("bang",Lo.token,"!"),bracket_left:new bs("bracket_left",Lo.token,"["),bracket_right:new bs("bracket_right",Lo.token,"]"),brace_left:new bs("brace_left",Lo.token,"{"),brace_right:new bs("brace_right",Lo.token,"}"),colon:new bs("colon",Lo.token,":"),comma:new bs("comma",Lo.token,","),equal:new bs("equal",Lo.token,"="),equal_equal:new bs("equal_equal",Lo.token,"=="),not_equal:new bs("not_equal",Lo.token,"!="),greater_than:new bs("greater_than",Lo.token,">"),greater_than_equal:new bs("greater_than_equal",Lo.token,">="),shift_right:new bs("shift_right",Lo.token,">>"),less_than:new bs("less_than",Lo.token,"<"),less_than_equal:new bs("less_than_equal",Lo.token,"<="),shift_left:new bs("shift_left",Lo.token,"<<"),modulo:new bs("modulo",Lo.token,"%"),minus:new bs("minus",Lo.token,"-"),minus_minus:new bs("minus_minus",Lo.token,"--"),period:new bs("period",Lo.token,"."),plus:new bs("plus",Lo.token,"+"),plus_plus:new bs("plus_plus",Lo.token,"++"),or:new bs("or",Lo.token,"|"),or_or:new bs("or_or",Lo.token,"||"),paren_left:new bs("paren_left",Lo.token,"("),paren_right:new bs("paren_right",Lo.token,")"),semicolon:new bs("semicolon",Lo.token,";"),star:new bs("star",Lo.token,"*"),tilde:new bs("tilde",Lo.token,"~"),underscore:new bs("underscore",Lo.token,"_"),xor:new bs("xor",Lo.token,"^"),plus_equal:new bs("plus_equal",Lo.token,"+="),minus_equal:new bs("minus_equal",Lo.token,"-="),times_equal:new bs("times_equal",Lo.token,"*="),division_equal:new bs("division_equal",Lo.token,"/="),modulo_equal:new bs("modulo_equal",Lo.token,"%="),and_equal:new bs("and_equal",Lo.token,"&="),or_equal:new bs("or_equal",Lo.token,"|="),xor_equal:new bs("xor_equal",Lo.token,"^="),shift_right_equal:new bs("shift_right_equal",Lo.token,">>="),shift_left_equal:new bs("shift_left_equal",Lo.token,"<<=")},Qs.simpleTokens={"@":To.tokens.attr,"{":To.tokens.brace_left,"}":To.tokens.brace_right,":":To.tokens.colon,",":To.tokens.comma,"(":To.tokens.paren_left,")":To.tokens.paren_right,";":To.tokens.semicolon},Qs.literalTokens={"&":To.tokens.and,"&&":To.tokens.and_and,"->":To.tokens.arrow,"/":To.tokens.forward_slash,"!":To.tokens.bang,"[":To.tokens.bracket_left,"]":To.tokens.bracket_right,"=":To.tokens.equal,"==":To.tokens.equal_equal,"!=":To.tokens.not_equal,">":To.tokens.greater_than,">=":To.tokens.greater_than_equal,">>":To.tokens.shift_right,"<":To.tokens.less_than,"<=":To.tokens.less_than_equal,"<<":To.tokens.shift_left,"%":To.tokens.modulo,"-":To.tokens.minus,"--":To.tokens.minus_minus,".":To.tokens.period,"+":To.tokens.plus,"++":To.tokens.plus_plus,"|":To.tokens.or,"||":To.tokens.or_or,"*":To.tokens.star,"~":To.tokens.tilde,_:To.tokens.underscore,"^":To.tokens.xor,"+=":To.tokens.plus_equal,"-=":To.tokens.minus_equal,"*=":To.tokens.times_equal,"/=":To.tokens.division_equal,"%=":To.tokens.modulo_equal,"&=":To.tokens.and_equal,"|=":To.tokens.or_equal,"^=":To.tokens.xor_equal,">>=":To.tokens.shift_right_equal,"<<=":To.tokens.shift_left_equal},Qs.regexTokens={decimal_float_literal:To.tokens.decimal_float_literal,hex_float_literal:To.tokens.hex_float_literal,int_literal:To.tokens.int_literal,uint_literal:To.tokens.uint_literal,ident:To.tokens.ident},Qs.storage_class=[To.keywords.function,To.keywords.private,To.keywords.workgroup,To.keywords.uniform,To.keywords.storage],Qs.access_mode=[To.keywords.read,To.keywords.write,To.keywords.read_write],Qs.sampler_type=[To.keywords.sampler,To.keywords.sampler_comparison],Qs.sampled_texture_type=[To.keywords.texture_1d,To.keywords.texture_2d,To.keywords.texture_2d_array,To.keywords.texture_3d,To.keywords.texture_cube,To.keywords.texture_cube_array],Qs.multisampled_texture_type=[To.keywords.texture_multisampled_2d],Qs.storage_texture_type=[To.keywords.texture_storage_1d,To.keywords.texture_storage_2d,To.keywords.texture_storage_2d_array,To.keywords.texture_storage_3d],Qs.depth_texture_type=[To.keywords.texture_depth_2d,To.keywords.texture_depth_2d_array,To.keywords.texture_depth_cube,To.keywords.texture_depth_cube_array,To.keywords.texture_depth_multisampled_2d],Qs.texture_external_type=[To.keywords.texture_external],Qs.any_texture_type=[...To.sampled_texture_type,...To.multisampled_texture_type,...To.storage_texture_type,...To.depth_texture_type,...To.texture_external_type],Qs.texel_format=[To.keywords.r8unorm,To.keywords.r8snorm,To.keywords.r8uint,To.keywords.r8sint,To.keywords.r16uint,To.keywords.r16sint,To.keywords.r16float,To.keywords.rg8unorm,To.keywords.rg8snorm,To.keywords.rg8uint,To.keywords.rg8sint,To.keywords.r32uint,To.keywords.r32sint,To.keywords.r32float,To.keywords.rg16uint,To.keywords.rg16sint,To.keywords.rg16float,To.keywords.rgba8unorm,To.keywords.rgba8unorm_srgb,To.keywords.rgba8snorm,To.keywords.rgba8uint,To.keywords.rgba8sint,To.keywords.bgra8unorm,To.keywords.bgra8unorm_srgb,To.keywords.rgb10a2unorm,To.keywords.rg11b10float,To.keywords.rg32uint,To.keywords.rg32sint,To.keywords.rg32float,To.keywords.rgba16uint,To.keywords.rgba16sint,To.keywords.rgba16float,To.keywords.rgba32uint,To.keywords.rgba32sint,To.keywords.rgba32float],Qs.const_literal=[To.tokens.int_literal,To.tokens.uint_literal,To.tokens.decimal_float_literal,To.tokens.hex_float_literal,To.keywords.true,To.keywords.false],Qs.literal_or_ident=[To.tokens.ident,To.tokens.int_literal,To.tokens.uint_literal,To.tokens.decimal_float_literal,To.tokens.hex_float_literal],Qs.element_count_expression=[To.tokens.int_literal,To.tokens.uint_literal,To.tokens.ident],Qs.template_types=[To.keywords.vec2,To.keywords.vec3,To.keywords.vec4,To.keywords.mat2x2,To.keywords.mat2x3,To.keywords.mat2x4,To.keywords.mat3x2,To.keywords.mat3x3,To.keywords.mat3x4,To.keywords.mat4x2,To.keywords.mat4x3,To.keywords.mat4x4,To.keywords.atomic,To.keywords.bitcast,...To.any_texture_type],Qs.attribute_name=[To.tokens.ident,To.keywords.block,To.keywords.diagnostic],Qs.assignment_operators=[To.tokens.equal,To.tokens.plus_equal,To.tokens.minus_equal,To.tokens.times_equal,To.tokens.division_equal,To.tokens.modulo_equal,To.tokens.and_equal,To.tokens.or_equal,To.tokens.xor_equal,To.tokens.shift_right_equal,To.tokens.shift_left_equal],Qs.increment_operators=[To.tokens.plus_plus,To.tokens.minus_minus];class xs{constructor(t,e,n){this.type=t,this.lexeme=e,this.line=n}toString(){return this.lexeme}isTemplateType(){return-1!=Qs.template_types.indexOf(this.type)}isArrayType(){return this.type==Qs.keywords.array}isArrayOrTemplateType(){return this.isArrayType()||this.isTemplateType()}}class Ds{constructor(t){this._tokens=[],this._start=0,this._current=0,this._line=1,this._source=null!=t?t:""}scanTokens(){for(;!this._isAtEnd();)if(this._start=this._current,!this.scanToken())throw`Invalid syntax at line ${this._line}`;return this._tokens.push(new xs(Qs.eof,"",this._line)),this._tokens}scanToken(){let t=this._advance();if("\n"==t)return this._line++,!0;if(this._isWhitespace(t))return!0;if("/"==t){if("/"==this._peekAhead()){for(;"\n"!=t;){if(this._isAtEnd())return!0;t=this._advance()}return this._line++,!0}if("*"==this._peekAhead()){this._advance();let e=1;for(;e>0;){if(this._isAtEnd())return!0;if(t=this._advance(),"\n"==t)this._line++;else if("*"==t){if("/"==this._peekAhead()&&(this._advance(),e--,0==e))return!0}else"/"==t&&"*"==this._peekAhead()&&(this._advance(),e++)}return!0}}const e=Qs.simpleTokens[t];if(e)return this._addToken(e),!0;let n=Qs.none;const i=this._isAlpha(t),r="_"===t;if(this._isAlphaNumeric(t)){let e=this._peekAhead();for(;this._isAlphaNumeric(e);)t+=this._advance(),e=this._peekAhead()}if(i){const e=Qs.keywords[t];if(e)return this._addToken(e),!0}if(i||r)return this._addToken(Qs.tokens.ident),!0;for(;;){let e=this._findType(t);const i=this._peekAhead();if(">"==t&&(">"==i||"="==i)){let t=!1,n=this._tokens.length-1;for(let e=0;e<5&&n>=0&&-1===Qs.assignment_operators.indexOf(this._tokens[n].type);++e,--n)if(this._tokens[n].type===Qs.tokens.less_than){n>0&&this._tokens[n-1].isArrayOrTemplateType()&&(t=!0);break}if(t)return this._addToken(e),!0}if(e===Qs.none){let i=t,r=0;const o=2;for(let t=0;t<o;++t)if(i+=this._peekAhead(t),e=this._findType(i),e!==Qs.none){r=t;break}if(e===Qs.none)return n!==Qs.none&&(this._current--,this._addToken(n),!0);t=i,this._current+=r+1}if(n=e,this._isAtEnd())break;t+=this._advance()}return n!==Qs.none&&(this._addToken(n),!0)}_findType(t){for(const e in Qs.regexTokens){const n=Qs.regexTokens[e];if(this._match(t,n.rule))return n}const e=Qs.literalTokens[t];return e||Qs.none}_match(t,e){const n=e.exec(t);return n&&0==n.index&&n[0]==t}_isAtEnd(){return this._current>=this._source.length}_isAlpha(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}_isAlphaNumeric(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"||"_"==t||t>="0"&&t<="9"}_isWhitespace(t){return" "==t||"\t"==t||"\r"==t}_advance(t=0){let e=this._source[this._current];return t=t||0,t++,this._current+=t,e}_peekAhead(t=0){return t=t||0,this._current+t>=this._source.length?"\0":this._source[this._current+t]}_addToken(t){const e=this._source.substring(this._start,this._current);this._tokens.push(new xs(t,e,this._line))}}class Ss{constructor(){this._tokens=[],this._current=0,this._currentLine=0,this._context=new Co,this._deferArrayCountEval=[]}parse(t){this._initialize(t),this._deferArrayCountEval.length=0;const e=[];for(;!this._isAtEnd();){const t=this._global_decl_or_directive();if(!t)break;e.push(t)}if(this._deferArrayCountEval.length>0){for(const t of this._deferArrayCountEval){const e=t.arrayType,n=t.countNode;if(n instanceof ls){const t=n.name,i=this._context.constants.get(t);if(i)try{const t=i.evaluate(this._context);e.count=t}catch(t){}}}this._deferArrayCountEval.length=0}return e}_initialize(t){if(t)if("string"==typeof t){const e=new Ds(t);this._tokens=e.scanTokens()}else this._tokens=t;else this._tokens=[];this._current=0}_error(t,e){return{token:t,message:e,toString:function(){return`${e}`}}}_isAtEnd(){return this._current>=this._tokens.length||this._peek().type==Qs.eof}_match(t){if(t instanceof bs)return!!this._check(t)&&(this._advance(),!0);for(let e=0,n=t.length;e<n;++e){const n=t[e];if(this._check(n))return this._advance(),!0}return!1}_consume(t,e){if(this._check(t))return this._advance();throw this._error(this._peek(),e)}_check(t){if(this._isAtEnd())return!1;const e=this._peek();if(t instanceof Array){const n=e.type;return-1!=t.indexOf(n)}return e.type==t}_advance(){var t,e;return this._currentLine=null!==(e=null===(t=this._peek())||void 0===t?void 0:t.line)&&void 0!==e?e:-1,this._isAtEnd()||this._current++,this._previous()}_peek(){return this._tokens[this._current]}_previous(){return this._tokens[this._current-1]}_global_decl_or_directive(){for(;this._match(Qs.tokens.semicolon)&&!this._isAtEnd(););if(this._match(Qs.keywords.alias)){const t=this._type_alias();return this._consume(Qs.tokens.semicolon,"Expected ';'"),t}if(this._match(Qs.keywords.diagnostic)){const t=this._diagnostic();return this._consume(Qs.tokens.semicolon,"Expected ';'"),t}if(this._match(Qs.keywords.requires)){const t=this._requires_directive();return this._consume(Qs.tokens.semicolon,"Expected ';'"),t}if(this._match(Qs.keywords.enable)){const t=this._enable_directive();return this._consume(Qs.tokens.semicolon,"Expected ';'"),t}const t=this._attribute();if(this._check(Qs.keywords.var)){const e=this._global_variable_decl();return null!=e&&(e.attributes=t),this._consume(Qs.tokens.semicolon,"Expected ';'."),e}if(this._check(Qs.keywords.override)){const e=this._override_variable_decl();return null!=e&&(e.attributes=t),this._consume(Qs.tokens.semicolon,"Expected ';'."),e}if(this._check(Qs.keywords.let)){const e=this._global_let_decl();return null!=e&&(e.attributes=t),this._consume(Qs.tokens.semicolon,"Expected ';'."),e}if(this._check(Qs.keywords.const)){const e=this._global_const_decl();return null!=e&&(e.attributes=t),this._consume(Qs.tokens.semicolon,"Expected ';'."),e}if(this._check(Qs.keywords.struct)){const e=this._struct_decl();return null!=e&&(e.attributes=t),e}if(this._check(Qs.keywords.fn)){const e=this._function_decl();return null!=e&&(e.attributes=t),e}return null}_function_decl(){if(!this._match(Qs.keywords.fn))return null;const t=this._currentLine,e=this._consume(Qs.tokens.ident,"Expected function name.").toString();this._consume(Qs.tokens.paren_left,"Expected '(' for function arguments.");const n=[];if(!this._check(Qs.tokens.paren_right))do{if(this._check(Qs.tokens.paren_right))break;const t=this._attribute(),e=this._consume(Qs.tokens.ident,"Expected argument name.").toString();this._consume(Qs.tokens.colon,"Expected ':' for argument type.");const i=this._attribute(),r=this._type_decl();null!=r&&(r.attributes=i,n.push(new _s(e,r,t)))}while(this._match(Qs.tokens.comma));this._consume(Qs.tokens.paren_right,"Expected ')' after function arguments.");let i=null;if(this._match(Qs.tokens.arrow)){const t=this._attribute();i=this._type_decl(),null!=i&&(i.attributes=t)}const r=this._compound_statement(),o=this._currentLine;return new wo(e,n,i,r,t,o)}_compound_statement(){const t=[];for(this._consume(Qs.tokens.brace_left,"Expected '{' for block.");!this._check(Qs.tokens.brace_right);){const e=this._statement();null!==e&&t.push(e)}return this._consume(Qs.tokens.brace_right,"Expected '}' for block."),t}_statement(){for(;this._match(Qs.tokens.semicolon)&&!this._isAtEnd(););if(this._check(Qs.tokens.attr)&&this._attribute(),this._check(Qs.keywords.if))return this._if_statement();if(this._check(Qs.keywords.switch))return this._switch_statement();if(this._check(Qs.keywords.loop))return this._loop_statement();if(this._check(Qs.keywords.for))return this._for_statement();if(this._check(Qs.keywords.while))return this._while_statement();if(this._check(Qs.keywords.continuing))return this._continuing_statement();if(this._check(Qs.keywords.static_assert))return this._static_assert_statement();if(this._check(Qs.tokens.brace_left))return this._compound_statement();let t=null;return t=this._check(Qs.keywords.return)?this._return_statement():this._check([Qs.keywords.var,Qs.keywords.let,Qs.keywords.const])?this._variable_statement():this._match(Qs.keywords.discard)?new Wo:this._match(Qs.keywords.break)?new Zo:this._match(Qs.keywords.continue)?new Xo:this._increment_decrement_statement()||this._func_call_statement()||this._assignment_statement(),null!=t&&this._consume(Qs.tokens.semicolon,"Expected ';' after statement."),t}_static_assert_statement(){if(!this._match(Qs.keywords.static_assert))return null;const t=this._optional_paren_expression();return new bo(t)}_while_statement(){if(!this._match(Qs.keywords.while))return null;const t=this._optional_paren_expression();this._check(Qs.tokens.attr)&&this._attribute();const e=this._compound_statement();return new Qo(t,e)}_continuing_statement(){if(!this._match(Qs.keywords.continuing))return null;const t=this._compound_statement();return new xo(t)}_for_statement(){if(!this._match(Qs.keywords.for))return null;this._consume(Qs.tokens.paren_left,"Expected '('.");const t=this._check(Qs.tokens.semicolon)?null:this._for_init();this._consume(Qs.tokens.semicolon,"Expected ';'.");const e=this._check(Qs.tokens.semicolon)?null:this._short_circuit_or_expression();this._consume(Qs.tokens.semicolon,"Expected ';'.");const n=this._check(Qs.tokens.paren_right)?null:this._for_increment();this._consume(Qs.tokens.paren_right,"Expected ')'."),this._check(Qs.tokens.attr)&&this._attribute();const i=this._compound_statement();return new Do(t,e,n,i)}_for_init(){return this._variable_statement()||this._func_call_statement()||this._assignment_statement()}_for_increment(){return this._func_call_statement()||this._increment_decrement_statement()||this._assignment_statement()}_variable_statement(){if(this._check(Qs.keywords.var)){const t=this._variable_decl();if(null===t)throw this._error(this._peek(),"Variable declaration expected.");let e=null;return this._match(Qs.tokens.equal)&&(e=this._short_circuit_or_expression()),new So(t.name,t.type,t.storage,t.access,e)}if(this._match(Qs.keywords.let)){const t=this._consume(Qs.tokens.ident,"Expected name for let.").toString();let e=null;if(this._match(Qs.tokens.colon)){const t=this._attribute();e=this._type_decl(),null!=e&&(e.attributes=t)}this._consume(Qs.tokens.equal,"Expected '=' for let.");const n=this._short_circuit_or_expression();return new ko(t,e,null,null,n)}if(this._match(Qs.keywords.const)){const t=this._consume(Qs.tokens.ident,"Expected name for const.").toString();let e=null;if(this._match(Qs.tokens.colon)){const t=this._attribute();e=this._type_decl(),null!=e&&(e.attributes=t)}this._consume(Qs.tokens.equal,"Expected '=' for const.");const n=this._short_circuit_or_expression();return new Ro(t,e,null,null,n)}return null}_increment_decrement_statement(){const t=this._current,e=this._unary_expression();if(null==e)return null;if(!this._check(Qs.increment_operators))return this._current=t,null;const n=this._consume(Qs.increment_operators,"Expected increment operator");return new Oo(n.type===Qs.tokens.plus_plus?No.increment:No.decrement,e)}_assignment_statement(){let t=null;if(this._check(Qs.tokens.brace_right))return null;let e=this._match(Qs.tokens.underscore);if(e||(t=this._unary_expression()),!e&&null==t)return null;const n=this._consume(Qs.assignment_operators,"Expected assignment operator."),i=this._short_circuit_or_expression();return new Go(Po.parse(n.lexeme),t,i)}_func_call_statement(){if(!this._check(Qs.tokens.ident))return null;const t=this._current,e=this._consume(Qs.tokens.ident,"Expected function name."),n=this._argument_expression_list();return null===n?(this._current=t,null):new Uo(e.lexeme,n)}_loop_statement(){if(!this._match(Qs.keywords.loop))return null;this._check(Qs.tokens.attr)&&this._attribute(),this._consume(Qs.tokens.brace_left,"Expected '{' for loop.");const t=[];let e=this._statement();for(;null!==e;){if(Array.isArray(e))for(let n of e)t.push(n);else t.push(e);e=this._statement()}let n=null;return this._match(Qs.keywords.continuing)&&(n=this._compound_statement()),this._consume(Qs.tokens.brace_right,"Expected '}' for loop."),new jo(t,n)}_switch_statement(){if(!this._match(Qs.keywords.switch))return null;const t=this._optional_paren_expression();this._check(Qs.tokens.attr)&&this._attribute(),this._consume(Qs.tokens.brace_left,"Expected '{' for switch.");const e=this._switch_body();if(null==e||0==e.length)throw this._error(this._previous(),"Expected 'case' or 'default'.");return this._consume(Qs.tokens.brace_right,"Expected '}' for switch."),new Yo(t,e)}_switch_body(){const t=[];if(this._match(Qs.keywords.case)){const e=this._case_selectors();this._match(Qs.tokens.colon),this._check(Qs.tokens.attr)&&this._attribute(),this._consume(Qs.tokens.brace_left,"Exected '{' for switch case.");const n=this._case_body();this._consume(Qs.tokens.brace_right,"Exected '}' for switch case."),t.push(new Cs(e,n))}if(this._match(Qs.keywords.default)){this._match(Qs.tokens.colon),this._check(Qs.tokens.attr)&&this._attribute(),this._consume(Qs.tokens.brace_left,"Exected '{' for switch default.");const e=this._case_body();this._consume(Qs.tokens.brace_right,"Exected '}' for switch default."),t.push(new Es(e))}if(this._check([Qs.keywords.default,Qs.keywords.case])){const e=this._switch_body();t.push(e[0])}return t}_case_selectors(){const t=[this._shift_expression()];for(;this._match(Qs.tokens.comma);)t.push(this._shift_expression());return t}_case_body(){if(this._match(Qs.keywords.fallthrough))return this._consume(Qs.tokens.semicolon,"Expected ';'"),[];let t=this._statement();if(null==t)return[];t instanceof Array||(t=[t]);const e=this._case_body();return 0==e.length?t:[...t,e[0]]}_if_statement(){if(!this._match(Qs.keywords.if))return null;const t=this._optional_paren_expression();this._check(Qs.tokens.attr)&&this._attribute();const e=this._compound_statement();let n=[];this._match_elseif()&&(this._check(Qs.tokens.attr)&&this._attribute(),n=this._elseif_statement(n));let i=null;return this._match(Qs.keywords.else)&&(this._check(Qs.tokens.attr)&&this._attribute(),i=this._compound_statement()),new Ko(t,e,n,i)}_match_elseif(){return this._tokens[this._current].type===Qs.keywords.else&&this._tokens[this._current+1].type===Qs.keywords.if&&(this._advance(),this._advance(),!0)}_elseif_statement(t=[]){const e=this._optional_paren_expression(),n=this._compound_statement();return t.push(new vs(e,n)),this._match_elseif()&&(this._check(Qs.tokens.attr)&&this._attribute(),this._elseif_statement(t)),t}_return_statement(){if(!this._match(Qs.keywords.return))return null;const t=this._short_circuit_or_expression();return new zo(t)}_short_circuit_or_expression(){let t=this._short_circuit_and_expr();for(;this._match(Qs.tokens.or_or);)t=new Is(this._previous().toString(),t,this._short_circuit_and_expr());return t}_short_circuit_and_expr(){let t=this._inclusive_or_expression();for(;this._match(Qs.tokens.and_and);)t=new Is(this._previous().toString(),t,this._inclusive_or_expression());return t}_inclusive_or_expression(){let t=this._exclusive_or_expression();for(;this._match(Qs.tokens.or);)t=new Is(this._previous().toString(),t,this._exclusive_or_expression());return t}_exclusive_or_expression(){let t=this._and_expression();for(;this._match(Qs.tokens.xor);)t=new Is(this._previous().toString(),t,this._and_expression());return t}_and_expression(){let t=this._equality_expression();for(;this._match(Qs.tokens.and);)t=new Is(this._previous().toString(),t,this._equality_expression());return t}_equality_expression(){const t=this._relational_expression();return this._match([Qs.tokens.equal_equal,Qs.tokens.not_equal])?new Is(this._previous().toString(),t,this._relational_expression()):t}_relational_expression(){let t=this._shift_expression();for(;this._match([Qs.tokens.less_than,Qs.tokens.greater_than,Qs.tokens.less_than_equal,Qs.tokens.greater_than_equal]);)t=new Is(this._previous().toString(),t,this._shift_expression());return t}_shift_expression(){let t=this._additive_expression();for(;this._match([Qs.tokens.shift_left,Qs.tokens.shift_right]);)t=new Is(this._previous().toString(),t,this._additive_expression());return t}_additive_expression(){let t=this._multiplicative_expression();for(;this._match([Qs.tokens.plus,Qs.tokens.minus]);)t=new Is(this._previous().toString(),t,this._multiplicative_expression());return t}_multiplicative_expression(){let t=this._unary_expression();for(;this._match([Qs.tokens.star,Qs.tokens.forward_slash,Qs.tokens.modulo]);)t=new Is(this._previous().toString(),t,this._unary_expression());return t}_unary_expression(){return this._match([Qs.tokens.minus,Qs.tokens.bang,Qs.tokens.tilde,Qs.tokens.star,Qs.tokens.and])?new ms(this._previous().toString(),this._unary_expression()):this._singular_expression()}_singular_expression(){const t=this._primary_expression(),e=this._postfix_expression();return e&&(t.postfix=e),t}_postfix_expression(){if(this._match(Qs.tokens.bracket_left)){const t=this._short_circuit_or_expression();this._consume(Qs.tokens.bracket_right,"Expected ']'.");const e=new ps(t),n=this._postfix_expression();return n&&(e.postfix=n),e}if(this._match(Qs.tokens.period)){const t=this._consume(Qs.tokens.ident,"Expected member name."),e=this._postfix_expression(),n=new ss(t.lexeme);return e&&(n.postfix=e),n}return null}_getStruct(t){if(this._context.aliases.has(t)){return this._context.aliases.get(t).type}if(this._context.structs.has(t)){return this._context.structs.get(t)}return null}_primary_expression(){if(this._match(Qs.tokens.ident)){const t=this._previous().toString();if(this._check(Qs.tokens.paren_left)){const e=this._argument_expression_list(),n=this._getStruct(t);return null!=n?new as(n,e):new As(t,e)}if(this._context.constants.has(t)){const e=this._context.constants.get(t);return new cs(t,e.value)}return new ls(t)}if(this._match(Qs.const_literal))return new us(parseFloat(this._previous().toString()));if(this._check(Qs.tokens.paren_left))return this._paren_expression();if(this._match(Qs.keywords.bitcast)){this._consume(Qs.tokens.less_than,"Expected '<'.");const t=this._type_decl();this._consume(Qs.tokens.greater_than,"Expected '>'.");const e=this._paren_expression();return new hs(t,e)}const t=this._type_decl(),e=this._argument_expression_list();return new gs(t,e)}_argument_expression_list(){if(!this._match(Qs.tokens.paren_left))return null;const t=[];do{if(this._check(Qs.tokens.paren_right))break;const e=this._short_circuit_or_expression();t.push(e)}while(this._match(Qs.tokens.comma));return this._consume(Qs.tokens.paren_right,"Expected ')' for agument list"),t}_optional_paren_expression(){this._match(Qs.tokens.paren_left);const t=this._short_circuit_or_expression();return this._match(Qs.tokens.paren_right),new ds([t])}_paren_expression(){this._consume(Qs.tokens.paren_left,"Expected '('.");const t=this._short_circuit_or_expression();return this._consume(Qs.tokens.paren_right,"Expected ')'."),new ds([t])}_struct_decl(){if(!this._match(Qs.keywords.struct))return null;const t=this._currentLine,e=this._consume(Qs.tokens.ident,"Expected name for struct.").toString();this._consume(Qs.tokens.brace_left,"Expected '{' for struct body.");const n=[];for(;!this._check(Qs.tokens.brace_right);){const t=this._attribute(),e=this._consume(Qs.tokens.ident,"Expected variable name.").toString();this._consume(Qs.tokens.colon,"Expected ':' for struct member type.");const i=this._attribute(),r=this._type_decl();null!=r&&(r.attributes=i),this._check(Qs.tokens.brace_right)?this._match(Qs.tokens.comma):this._consume(Qs.tokens.comma,"Expected ',' for struct member."),n.push(new Bs(e,r,t))}this._consume(Qs.tokens.brace_right,"Expected '}' after struct body.");const i=this._currentLine,r=new ts(e,n,t,i);return this._context.structs.set(e,r),r}_global_variable_decl(){const t=this._variable_decl();return t&&this._match(Qs.tokens.equal)&&(t.value=this._const_expression()),t}_override_variable_decl(){const t=this._override_decl();return t&&this._match(Qs.tokens.equal)&&(t.value=this._const_expression()),t}_global_const_decl(){if(!this._match(Qs.keywords.const))return null;const t=this._consume(Qs.tokens.ident,"Expected variable name");let e=null;if(this._match(Qs.tokens.colon)){const t=this._attribute();e=this._type_decl(),null!=e&&(e.attributes=t)}let n=null;if(this._match(Qs.tokens.equal)){const t=this._short_circuit_or_expression();if(t instanceof as)n=t;else if(t instanceof cs&&t.initializer instanceof as)n=t.initializer;else try{const e=t.evaluate(this._context);n=new us(e)}catch(e){n=t}}const i=new Ro(t.toString(),e,"","",n);return this._context.constants.set(i.name,i),i}_global_let_decl(){if(!this._match(Qs.keywords.let))return null;const t=this._consume(Qs.tokens.ident,"Expected variable name");let e=null;if(this._match(Qs.tokens.colon)){const t=this._attribute();e=this._type_decl(),null!=e&&(e.attributes=t)}let n=null;return this._match(Qs.tokens.equal)&&(n=this._const_expression()),new ko(t.toString(),e,"","",n)}_const_expression(){if(this._match(Qs.const_literal))return new ss(this._previous().toString());const t=this._type_decl();this._consume(Qs.tokens.paren_left,"Expected '('.");let e=[];for(;!this._check(Qs.tokens.paren_right)&&(e.push(this._const_expression()),this._check(Qs.tokens.comma));)this._advance();return this._consume(Qs.tokens.paren_right,"Expected ')'."),new as(t,e)}_variable_decl(){if(!this._match(Qs.keywords.var))return null;let t="",e="";this._match(Qs.tokens.less_than)&&(t=this._consume(Qs.storage_class,"Expected storage_class.").toString(),this._match(Qs.tokens.comma)&&(e=this._consume(Qs.access_mode,"Expected access_mode.").toString()),this._consume(Qs.tokens.greater_than,"Expected '>'."));const n=this._consume(Qs.tokens.ident,"Expected variable name");let i=null;if(this._match(Qs.tokens.colon)){const t=this._attribute();i=this._type_decl(),null!=i&&(i.attributes=t)}return new So(n.toString(),i,t,e,null)}_override_decl(){if(!this._match(Qs.keywords.override))return null;const t=this._consume(Qs.tokens.ident,"Expected variable name");let e=null;if(this._match(Qs.tokens.colon)){const t=this._attribute();e=this._type_decl(),null!=e&&(e.attributes=t)}return new Mo(t.toString(),e,null)}_diagnostic(){this._consume(Qs.tokens.paren_left,"Expected '('");const t=this._consume(Qs.tokens.ident,"Expected severity control name.");this._consume(Qs.tokens.comma,"Expected ','");const e=this._consume(Qs.tokens.ident,"Expected diagnostic rule name.");return this._consume(Qs.tokens.paren_right,"Expected ')'"),new Ho(t.toString(),e.toString())}_enable_directive(){const t=this._consume(Qs.tokens.ident,"identity expected.");return new Jo(t.toString())}_requires_directive(){const t=[this._consume(Qs.tokens.ident,"identity expected.").toString()];for(;this._match(Qs.tokens.comma);){const e=this._consume(Qs.tokens.ident,"identity expected.");t.push(e.toString())}return new qo(t)}_type_alias(){const t=this._consume(Qs.tokens.ident,"identity expected.");this._consume(Qs.tokens.equal,"Expected '=' for type alias.");let e=this._type_decl();if(null===e)throw this._error(this._peek(),"Expected Type for Alias.");this._context.aliases.has(e.name)&&(e=this._context.aliases.get(e.name).type);const n=new Vo(t.toString(),e);return this._context.aliases.set(n.name,n),n}_type_decl(){if(this._check([Qs.tokens.ident,...Qs.texel_format,Qs.keywords.bool,Qs.keywords.f32,Qs.keywords.i32,Qs.keywords.u32])){const t=this._advance(),e=t.toString();return this._context.structs.has(e)?this._context.structs.get(e):this._context.aliases.has(e)?this._context.aliases.get(e).type:new $o(t.toString())}let t=this._texture_sampler_types();if(t)return t;if(this._check(Qs.template_types)){let t=this._advance().toString(),e=null,n=null;return this._match(Qs.tokens.less_than)&&(e=this._type_decl(),n=null,this._match(Qs.tokens.comma)&&(n=this._consume(Qs.access_mode,"Expected access_mode for pointer").toString()),this._consume(Qs.tokens.greater_than,"Expected '>' for type.")),new es(t,e,n)}if(this._match(Qs.keywords.ptr)){let t=this._previous().toString();this._consume(Qs.tokens.less_than,"Expected '<' for pointer.");const e=this._consume(Qs.storage_class,"Expected storage_class for pointer");this._consume(Qs.tokens.comma,"Expected ',' for pointer.");const n=this._type_decl();let i=null;return this._match(Qs.tokens.comma)&&(i=this._consume(Qs.access_mode,"Expected access_mode for pointer").toString()),this._consume(Qs.tokens.greater_than,"Expected '>' for pointer."),new ns(t,e.toString(),n,i)}const e=this._attribute();if(this._match(Qs.keywords.array)){let t=null,n=-1;const i=this._previous();let r=null;if(this._match(Qs.tokens.less_than)){t=this._type_decl(),this._context.aliases.has(t.name)&&(t=this._context.aliases.get(t.name).type);let e="";if(this._match(Qs.tokens.comma)){r=this._shift_expression();try{e=r.evaluate(this._context).toString(),r=null}catch(t){e="1"}}this._consume(Qs.tokens.greater_than,"Expected '>' for array."),n=e?parseInt(e):0}const o=new is(i.toString(),e,t,n);return r&&this._deferArrayCountEval.push({arrayType:o,countNode:r}),o}return null}_texture_sampler_types(){if(this._match(Qs.sampler_type))return new rs(this._previous().toString(),null,null);if(this._match(Qs.depth_texture_type))return new rs(this._previous().toString(),null,null);if(this._match(Qs.sampled_texture_type)||this._match(Qs.multisampled_texture_type)){const t=this._previous();this._consume(Qs.tokens.less_than,"Expected '<' for sampler type.");const e=this._type_decl();return this._consume(Qs.tokens.greater_than,"Expected '>' for sampler type."),new rs(t.toString(),e,null)}if(this._match(Qs.storage_texture_type)){const t=this._previous();this._consume(Qs.tokens.less_than,"Expected '<' for sampler type.");const e=this._consume(Qs.texel_format,"Invalid texel format.").toString();this._consume(Qs.tokens.comma,"Expected ',' after texel format.");const n=this._consume(Qs.access_mode,"Expected access mode for storage texture type.").toString();return this._consume(Qs.tokens.greater_than,"Expected '>' for sampler type."),new rs(t.toString(),e,n)}return null}_attribute(){let t=[];for(;this._match(Qs.tokens.attr);){const e=this._consume(Qs.attribute_name,"Expected attribute name"),n=new ws(e.toString(),null);if(this._match(Qs.tokens.paren_left)){if(n.value=this._consume(Qs.literal_or_ident,"Expected attribute value").toString(),this._check(Qs.tokens.comma)){this._advance();do{const t=this._consume(Qs.literal_or_ident,"Expected attribute value").toString();n.value instanceof Array||(n.value=[n.value]),n.value.push(t)}while(this._match(Qs.tokens.comma))}this._consume(Qs.tokens.paren_right,"Expected ')'")}t.push(n)}return 0==t.length?null:t}}class Ms{constructor(t,e){this.name=t,this.attributes=e,this.size=0}get isArray(){return!1}get isStruct(){return!1}get isTemplate(){return!1}}class ks{constructor(t,e,n){this.name=t,this.type=e,this.attributes=n,this.offset=0,this.size=0}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class Rs extends Ms{constructor(t,e){super(t,e),this.members=[],this.align=0,this.startLine=-1,this.endLine=-1,this.inUse=!1}get isStruct(){return!0}}class Ns extends Ms{constructor(t,e){super(t,e),this.count=0,this.stride=0}get isArray(){return!0}}class Ps extends Ms{constructor(t,e,n,i){super(t,n),this.format=e,this.access=i}get isTemplate(){return!0}}!function(t){t[t.Uniform=0]="Uniform",t[t.Storage=1]="Storage",t[t.Texture=2]="Texture",t[t.Sampler=3]="Sampler",t[t.StorageTexture=4]="StorageTexture"}(Fo||(Fo={}));class Ts{constructor(t,e,n,i,r,o,s){this.name=t,this.type=e,this.group=n,this.binding=i,this.attributes=r,this.resourceType=o,this.access=s}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get size(){return this.type.size}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class Ls{constructor(t,e){this.name=t,this.type=e}}class Fs{constructor(t,e){this.align=t,this.size=e}}class Os{constructor(t,e,n,i){this.name=t,this.type=e,this.locationType=n,this.location=i,this.interpolation=null}}class Gs{constructor(t,e,n,i){this.name=t,this.type=e,this.locationType=n,this.location=i}}class Us{constructor(t,e=null){this.stage=null,this.inputs=[],this.outputs=[],this.resources=[],this.startLine=-1,this.endLine=-1,this.inUse=!1,this.calls=new Set,this.name=t,this.stage=e}}class js{constructor(){this.vertex=[],this.fragment=[],this.compute=[]}}class Ys{constructor(t,e,n,i){this.name=t,this.type=e,this.attributes=n,this.id=i}}class Ks{constructor(t){this.resources=null,this.inUse=!1,this.info=null,this.node=t}}class zs{constructor(t){this.uniforms=[],this.storage=[],this.textures=[],this.samplers=[],this.aliases=[],this.overrides=[],this.structs=[],this.entry=new js,this.functions=[],this._types=new Map,this._functions=new Map,t&&this.update(t)}_isStorageTexture(t){return"texture_storage_1d"==t.name||"texture_storage_2d"==t.name||"texture_storage_2d_array"==t.name||"texture_storage_3d"==t.name}update(t){const e=(new Ss).parse(t);for(const t of e)t instanceof wo&&this._functions.set(t.name,new Ks(t));for(const t of e)if(t instanceof ts){const e=this._getTypeInfo(t,null);e instanceof Rs&&this.structs.push(e)}for(const t of e)if(t instanceof Vo)this.aliases.push(this._getAliasInfo(t));else if(t instanceof Mo){const e=t,n=this._getAttributeNum(e.attributes,"id",0),i=null!=e.type?this._getTypeInfo(e.type,e.attributes):null;this.overrides.push(new Ys(e.name,i,e.attributes,n))}else if(this._isUniformVar(t)){const e=t,n=this._getAttributeNum(e.attributes,"group",0),i=this._getAttributeNum(e.attributes,"binding",0),r=this._getTypeInfo(e.type,e.attributes),o=new Ts(e.name,r,n,i,e.attributes,Fo.Uniform,e.access);this.uniforms.push(o)}else if(this._isStorageVar(t)){const e=t,n=this._getAttributeNum(e.attributes,"group",0),i=this._getAttributeNum(e.attributes,"binding",0),r=this._getTypeInfo(e.type,e.attributes),o=this._isStorageTexture(r),s=new Ts(e.name,r,n,i,e.attributes,o?Fo.StorageTexture:Fo.Storage,e.access);this.storage.push(s)}else if(this._isTextureVar(t)){const e=t,n=this._getAttributeNum(e.attributes,"group",0),i=this._getAttributeNum(e.attributes,"binding",0),r=this._getTypeInfo(e.type,e.attributes),o=this._isStorageTexture(r),s=new Ts(e.name,r,n,i,e.attributes,o?Fo.StorageTexture:Fo.Texture,e.access);o?this.storage.push(s):this.textures.push(s)}else if(this._isSamplerVar(t)){const e=t,n=this._getAttributeNum(e.attributes,"group",0),i=this._getAttributeNum(e.attributes,"binding",0),r=this._getTypeInfo(e.type,e.attributes),o=new Ts(e.name,r,n,i,e.attributes,Fo.Sampler,e.access);this.samplers.push(o)}else if(t instanceof wo){const e=this._getAttribute(t,"vertex"),n=this._getAttribute(t,"fragment"),i=this._getAttribute(t,"compute"),r=e||n||i,o=new Us(t.name,null==r?void 0:r.name);o.startLine=t.startLine,o.endLine=t.endLine,this.functions.push(o),this._functions.get(t.name).info=o,r&&(this._functions.get(t.name).inUse=!0,o.inUse=!0,o.resources=this._findResources(t,!!r),o.inputs=this._getInputs(t.args),o.outputs=this._getOutputs(t.returnType),this.entry[r.name].push(o))}else;for(const t of this._functions.values())t.info&&(t.info.inUse=t.inUse,this._addCalls(t.node,t.info.calls));for(const t of this.uniforms)this._markStructsInUse(t.type);for(const t of this.storage)this._markStructsInUse(t.type)}_markStructsInUse(t){if(t.isStruct){t.inUse=!0;for(const e of t.members)this._markStructsInUse(e.type)}else if(t.isArray)this._markStructsInUse(t.format);else if(t.isTemplate)this._markStructsInUse(t.format);else{const e=this._getAlias(t.name);e&&this._markStructsInUse(e)}}_addCalls(t,e){var n;for(const i of t.calls){const t=null===(n=this._functions.get(i.name))||void 0===n?void 0:n.info;t&&e.add(t)}}findResource(t,e){for(const n of this.uniforms)if(n.group==t&&n.binding==e)return n;for(const n of this.storage)if(n.group==t&&n.binding==e)return n;for(const n of this.textures)if(n.group==t&&n.binding==e)return n;for(const n of this.samplers)if(n.group==t&&n.binding==e)return n;return null}_findResource(t){for(const e of this.uniforms)if(e.name==t)return e;for(const e of this.storage)if(e.name==t)return e;for(const e of this.textures)if(e.name==t)return e;for(const e of this.samplers)if(e.name==t)return e;return null}_markStructsFromAST(t){const e=this._getTypeInfo(t,null);this._markStructsInUse(e)}_findResources(t,e){const n=[],i=this,r=[];return t.search((o=>{if(o instanceof _o)r.push({});else if(o instanceof vo)r.pop();else if(o instanceof So){const t=o;e&&null!==t.type&&this._markStructsFromAST(t.type),r.length>0&&(r[r.length-1][t.name]=t)}else if(o instanceof as){const t=o;e&&null!==t.type&&this._markStructsFromAST(t.type)}else if(o instanceof ko){const t=o;e&&null!==t.type&&this._markStructsFromAST(t.type),r.length>0&&(r[r.length-1][t.name]=t)}else if(o instanceof ls){const t=o;if(r.length>0){if(r[r.length-1][t.name])return}const e=i._findResource(t.name);e&&n.push(e)}else if(o instanceof As){const r=o,s=i._functions.get(r.name);s&&(e&&(s.inUse=!0),t.calls.add(s.node),null===s.resources&&(s.resources=i._findResources(s.node,e)),n.push(...s.resources))}else if(o instanceof Uo){const r=o,s=i._functions.get(r.name);s&&(e&&(s.inUse=!0),t.calls.add(s.node),null===s.resources&&(s.resources=i._findResources(s.node,e)),n.push(...s.resources))}})),[...new Map(n.map((t=>[t.name,t]))).values()]}getBindGroups(){const t=[];function e(e,n){e>=t.length&&(t.length=e+1),void 0===t[e]&&(t[e]=[]),n>=t[e].length&&(t[e].length=n+1)}for(const n of this.uniforms){e(n.group,n.binding);t[n.group][n.binding]=n}for(const n of this.storage){e(n.group,n.binding);t[n.group][n.binding]=n}for(const n of this.textures){e(n.group,n.binding);t[n.group][n.binding]=n}for(const n of this.samplers){e(n.group,n.binding);t[n.group][n.binding]=n}return t}_getOutputs(t,e=void 0){if(void 0===e&&(e=[]),t instanceof ts)this._getStructOutputs(t,e);else{const n=this._getOutputInfo(t);null!==n&&e.push(n)}return e}_getStructOutputs(t,e){for(const n of t.members)if(n.type instanceof ts)this._getStructOutputs(n.type,e);else{const t=this._getAttribute(n,"location")||this._getAttribute(n,"builtin");if(null!==t){const i=this._getTypeInfo(n.type,n.type.attributes),r=this._parseInt(t.value),o=new Gs(n.name,i,t.name,r);e.push(o)}}}_getOutputInfo(t){const e=this._getAttribute(t,"location")||this._getAttribute(t,"builtin");if(null!==e){const n=this._getTypeInfo(t,t.attributes),i=this._parseInt(e.value);return new Gs("",n,e.name,i)}return null}_getInputs(t,e=void 0){void 0===e&&(e=[]);for(const n of t)if(n.type instanceof ts)this._getStructInputs(n.type,e);else{const t=this._getInputInfo(n);null!==t&&e.push(t)}return e}_getStructInputs(t,e){for(const n of t.members)if(n.type instanceof ts)this._getStructInputs(n.type,e);else{const t=this._getInputInfo(n);null!==t&&e.push(t)}}_getInputInfo(t){const e=this._getAttribute(t,"location")||this._getAttribute(t,"builtin");if(null!==e){const n=this._getAttribute(t,"interpolation"),i=this._getTypeInfo(t.type,t.attributes),r=this._parseInt(e.value),o=new Os(t.name,i,e.name,r);return null!==n&&(o.interpolation=this._parseString(n.value)),o}return null}_parseString(t){return t instanceof Array&&(t=t[0]),t}_parseInt(t){t instanceof Array&&(t=t[0]);const e=parseInt(t);return isNaN(e)?t:e}_getAlias(t){for(const e of this.aliases)if(e.name==t)return e.type;return null}_getAliasInfo(t){return new Ls(t.name,this._getTypeInfo(t.type,null))}_getTypeInfo(t,e){if(this._types.has(t))return this._types.get(t);if(t instanceof is){const n=t,i=this._getTypeInfo(n.format,n.attributes),r=new Ns(n.name,e);return r.format=i,r.count=n.count,this._types.set(t,r),this._updateTypeInfo(r),r}if(t instanceof ts){const n=t,i=new Rs(n.name,e);i.startLine=n.startLine,i.endLine=n.endLine;for(const t of n.members){const e=this._getTypeInfo(t.type,t.attributes);i.members.push(new ks(t.name,e,t.attributes))}return this._types.set(t,i),this._updateTypeInfo(i),i}if(t instanceof rs){const n=t,i=n.format instanceof $o,r=n.format?i?this._getTypeInfo(n.format,null):new Ms(n.format,null):null,o=new Ps(n.name,r,e,n.access);return this._types.set(t,o),this._updateTypeInfo(o),o}if(t instanceof es){const n=t,i=n.format?this._getTypeInfo(n.format,null):null,r=new Ps(n.name,i,e,n.access);return this._types.set(t,r),this._updateTypeInfo(r),r}const n=new Ms(t.name,e);return this._types.set(t,n),this._updateTypeInfo(n),n}_updateTypeInfo(t){var e,n;const i=this._getTypeSize(t);if(t.size=null!==(e=null==i?void 0:i.size)&&void 0!==e?e:0,t instanceof Ns){const e=this._getTypeSize(t.format);t.stride=null!==(n=null==e?void 0:e.size)&&void 0!==n?n:0,this._updateTypeInfo(t.format)}t instanceof Rs&&this._updateStructInfo(t)}_updateStructInfo(t){var e;let n=0,i=0,r=0,o=0;for(let s=0,a=t.members.length;s<a;++s){const a=t.members[s],A=this._getTypeSize(a);if(!A)continue;null!==(e=this._getAlias(a.type.name))&&void 0!==e||a.type;const l=A.align,c=A.size;n=this._roundUp(l,n+i),i=c,r=n,o=Math.max(o,l),a.offset=n,a.size=c,this._updateTypeInfo(a.type)}t.size=this._roundUp(o,r+i),t.align=o}_getTypeSize(t){var e;if(null==t)return null;const n=this._getAttributeNum(t.attributes,"size",0),i=this._getAttributeNum(t.attributes,"align",0);if(t instanceof ks&&(t=t.type),t instanceof Ms){const e=this._getAlias(t.name);null!==e&&(t=e)}{const e=zs._typeInfo[t.name];if(void 0!==e){const r="f16"===t.format?2:1;return new Fs(Math.max(i,e.align/r),Math.max(n,e.size/r))}}{const e=zs._typeInfo[t.name.substring(0,t.name.length-1)];if(e){const r="h"===t.name[t.name.length-1]?2:1;return new Fs(Math.max(i,e.align/r),Math.max(n,e.size/r))}}if(t instanceof Ns){let r=t,o=8,s=8;const a=this._getTypeSize(r.format);null!==a&&(s=a.size,o=a.align);return s=r.count*this._getAttributeNum(null!==(e=null==t?void 0:t.attributes)&&void 0!==e?e:null,"stride",this._roundUp(o,s)),n&&(s=n),new Fs(Math.max(i,o),Math.max(n,s))}if(t instanceof Rs){let e=0,r=0,o=0,s=0,a=0;for(const n of t.members){const t=this._getTypeSize(n.type);null!==t&&(e=Math.max(t.align,e),o=this._roundUp(t.align,o+s),s=t.size,a=o)}return r=this._roundUp(e,a+s),new Fs(Math.max(i,e),Math.max(n,r))}return null}_isUniformVar(t){return t instanceof So&&"uniform"==t.storage}_isStorageVar(t){return t instanceof So&&"storage"==t.storage}_isTextureVar(t){return t instanceof So&&null!==t.type&&-1!=zs._textureTypes.indexOf(t.type.name)}_isSamplerVar(t){return t instanceof So&&null!==t.type&&-1!=zs._samplerTypes.indexOf(t.type.name)}_getAttribute(t,e){const n=t;if(!n||!n.attributes)return null;const i=n.attributes;for(let t of i)if(t.name==e)return t;return null}_getAttributeNum(t,e,n){if(null===t)return n;for(let i of t)if(i.name==e){let t=null!==i&&null!==i.value?i.value:n;return t instanceof Array&&(t=t[0]),"number"==typeof t?t:"string"==typeof t?parseInt(t):n}return n}_roundUp(t,e){return Math.ceil(e/t)*t}}function Js(t){const e={attributes:[],bindings:[]};let n;try{n=function(t){try{return new zs(t)}catch(t){if(t instanceof Error)throw t;let e="WGSL parse error";throw"object"==typeof t&&t?.message&&(e+=`: ${t.message} `),"object"==typeof t&&t?.token&&(e+=t.token.line||""),new Error(e,{cause:t})}}(t)}catch(t){return br.error(t.message)(),e}for(const t of n.uniforms){const n=[];for(const e of t.type?.members||[])n.push({name:e.name,type:qs(e.type)});e.bindings.push({type:"uniform",name:t.name,location:t.binding,group:t.group,members:n})}const i=n.entry.vertex[0],r=i?.inputs.length||0;for(let t=0;t<r;t++){const n=i.inputs[t];if("location"===n.locationType){const t=qs(n.type);e.attributes.push({name:n.name,location:Number(n.location),type:t})}}return e}function qs(t){return t.format?`${t.name}<${t.format.name}>`:t.name}zs._typeInfo={f16:{align:2,size:2},i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},atomic:{align:4,size:4},vec2:{align:8,size:8},vec3:{align:16,size:12},vec4:{align:16,size:16},mat2x2:{align:8,size:16},mat3x2:{align:8,size:24},mat4x2:{align:8,size:32},mat2x3:{align:16,size:32},mat3x3:{align:16,size:48},mat4x3:{align:16,size:64},mat2x4:{align:16,size:32},mat3x4:{align:16,size:48},mat4x4:{align:16,size:64}},zs._textureTypes=Qs.any_texture_type.map((t=>t.name)),zs._samplerTypes=Qs.sampler_type.map((t=>t.name));class Hs{id;userData={};topology;bufferLayout=[];vertexCount;indices;attributes;constructor(t){this.id=t.id||Sn("geometry"),this.topology=t.topology,this.indices=t.indices||null,this.attributes=t.attributes,this.vertexCount=t.vertexCount,this.bufferLayout=t.bufferLayout||[],this.indices&&gr(this.indices.usage===Rn.INDEX)}destroy(){this.indices?.destroy();for(const t of Object.values(this.attributes))t.destroy()}getVertexCount(){return this.vertexCount}getAttributes(){return this.attributes}getIndexes(){return this.indices}_calculateVertexCount(t){return t.byteLength/12}}function Vs(t,e){if(e instanceof Hs)return e;const n=function(t,e){if(!e.indices)return;const n=e.indices.value;return t.createBuffer({usage:Rn.INDEX,data:n})}(t,e),{attributes:i,bufferLayout:r}=function(t,e){const n=[],i={};for(const[r,o]of Object.entries(e.attributes)){let e=r;switch(r){case"POSITION":e="positions";break;case"NORMAL":e="normals";break;case"TEXCOORD_0":e="texCoords";break;case"COLOR_0":e="colors"}i[e]=t.createBuffer({data:o.value,id:`${r}-buffer`});const{value:s,size:a,normalized:A}=o;n.push({name:e,format:ci(s,a,A)})}const r=e._calculateVertexCount(e.attributes,e.indices);return{attributes:i,bufferLayout:n,vertexCount:r}}(t,e);return new Hs({topology:e.topology||"triangle-list",bufferLayout:r,vertexCount:e.vertexCount,indices:n,attributes:i})}class Ws{modules;moduleUniforms;moduleBindings;moduleUniformsChanged;constructor(t){const e=eo(Object.values(t).filter((t=>t.dependencies)));for(const n of e)t[n.name]=n;br.log(1,"Creating ShaderInputs with modules",Object.keys(t))(),this.modules=t,this.moduleUniforms={},this.moduleBindings={};for(const[e,n]of Object.entries(t)){const t=e;this.moduleUniforms[t]=n.defaultUniforms||{},this.moduleBindings[t]={}}}destroy(){}setProps(t){for(const e of Object.keys(t)){const n=e,i=t[n],r=this.modules[n];if(!r){br.warn(`Module ${e} not found`)();continue}const o=this.moduleUniforms[n],s=this.moduleBindings[n],a=r.getUniforms?.(i,o)||i,{uniforms:A,bindings:l}=Sr(a);this.moduleUniforms[n]={...o,...A},this.moduleBindings[n]={...s,...l}}}getModules(){return Object.values(this.modules)}getUniformValues(){return this.moduleUniforms}getBindings(){const t={};for(const e of Object.values(this.moduleBindings))Object.assign(t,e);return t}getDebugTable(){const t={};for(const[e,n]of Object.entries(this.moduleUniforms))for(const[i,r]of Object.entries(n))t[`${e}.${i}`]={type:this.modules[e].uniformTypes?.[i],value:String(r)};return t}}class Zs extends kn{static defaultProps={...kn.defaultProps,shader:void 0,entryPoint:void 0,constants:{},shaderLayout:void 0};get[Symbol.toStringTag](){return"ComputePipeline"}hash="";constructor(t,e){super(t,e,Zs.defaultProps)}}class Xs{static defaultProps={...Ir.defaultProps};device;_hashCounter=0;_hashes={};_renderPipelineCache={};_computePipelineCache={};static getDefaultPipelineFactory(t){return t._lumaData.defaultPipelineFactory=t._lumaData.defaultPipelineFactory||new Xs(t),t._lumaData.defaultPipelineFactory}constructor(t){this.device=t}createRenderPipeline(t){const e={...Ir.defaultProps,...t},n=this._hashRenderPipeline(e);if(!this._renderPipelineCache[n]){const t=this.device.createRenderPipeline({...e,id:e.id?`${e.id}-cached`:void 0});t.hash=n,this._renderPipelineCache[n]={pipeline:t,useCount:0}}return this._renderPipelineCache[n].useCount++,this._renderPipelineCache[n].pipeline}createComputePipeline(t){const e={...Zs.defaultProps,...t},n=this._hashComputePipeline(e);if(!this._computePipelineCache[n]){const t=this.device.createComputePipeline({...e,id:e.id?`${e.id}-cached`:void 0});t.hash=n,this._computePipelineCache[n]={pipeline:t,useCount:0}}return this._computePipelineCache[n].useCount++,this._computePipelineCache[n].pipeline}release(t){const e=t.hash,n=t instanceof Zs?this._computePipelineCache:this._renderPipelineCache;n[e].useCount--,0===n[e].useCount&&(n[e].pipeline.destroy(),delete n[e])}_hashComputePipeline(t){return`${this._getHash(t.shader.source)}`}_hashRenderPipeline(t){const e=this._getHash(t.vs.source),n=t.fs?this._getHash(t.fs.source):0,i=this._getHash(JSON.stringify(t.bufferLayout));if("webgl"===this.device.type)return`${e}/${n}V-BL${i}`;{const r=this._getHash(JSON.stringify(t.parameters));return`${e}/${n}V-T${t.topology}P${r}BL${i}`}}_getHash(t){return void 0===this._hashes[t]&&(this._hashes[t]=this._hashCounter++),this._hashes[t]}}function $s(t,e,n,i){if(i?.inlineSource){const i=function(t,e,n){let i="";for(let r=e-2;r<=e;r++){const o=t[r-1];void 0!==o&&(i+=ta(o,e,n))}return i}(e,n);return`\n${i}${t.linePos>0?`${" ".repeat(t.linePos+5)}^^^\n`:""}${t.type.toUpperCase()}: ${t.message}\n\n`}return i?.html?`<div class='luma-compiler-log-error' style="color:red;"><b> ${t.type.toUpperCase()}: ${t.message}</b></div>`:`${t.type.toUpperCase()}: ${t.message}`}function ta(t,e,n){const i=n?.html?t.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;"):t;return`${function(t,e){let n="";for(let i=t.length;i<e;++i)n+=" ";return n+t}(String(e),4)}: ${i}${n?.html?"<br/>":"\n"}`}function ea(t,e){return{name:na(t,e),language:"glsl",version:ia(t)}}function na(t,e="unnamed"){const n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/.exec(t);return n?n[1]:e}function ia(t){let e=100;const n=t.match(/[^\s]+/g);if(n&&n.length>=2&&"#version"===n[0]){const t=parseInt(n[1],10);Number.isFinite(t)&&(e=t)}return e}class ra extends kn{static defaultProps={...kn.defaultProps,language:"auto",stage:void 0,source:"",sourceMap:null,entryPoint:"main",debug:"errors"};get[Symbol.toStringTag](){return"Shader"}stage;source;compilationStatus="pending";constructor(t,e){super(t,{id:oa(e),...e},ra.defaultProps),this.stage=this.props.stage,this.source=this.props.source}getCompilationInfoSync(){return null}getTranslatedSource(){return null}async debugShader(t=this.props.debug){switch(t){case"never":return;case"errors":if("success"===this.compilationStatus)return}const e=await this.getCompilationInfo();"warnings"===this.props.debug&&0===e?.length||this._displayShaderLog(e)}_displayShaderLog(t){if("undefined"==typeof document||!document?.createElement)return;const e=ea(this.source).name,n=`${this.stage} ${e}`;let i=function(t,e,n){let i="";const r=e.split(/\r?\n/),o=t.slice().sort(((t,e)=>t.lineNum-e.lineNum));switch(n?.showSourceCode||"no"){case"all":let e=0;for(let t=1;t<=r.length;t++)for(i+=ta(r[t-1],t,n);o.length>e&&o[e].lineNum===t;){const t=o[e++];i+=$s(t,r,t.lineNum,{...n,inlineSource:!1})}return i;case"issues":case"no":for(const e of t)i+=$s(e,r,e.lineNum,{inlineSource:"no"!==n?.showSourceCode});return i}}(t,this.source,{showSourceCode:"all",html:!0});const r=this.getTranslatedSource();r&&(i+=`<br /><br /><h1>Translated Source</h1><br /><br /><code style="user-select:text;"><pre>${r}</pre></code>`);const o=document.createElement("Button");o.innerHTML=`\n<h1>Shader Compilation Error in ${n}</h1><br /><br />\n<code style="user-select:text;"><pre>\n${i}\n</pre></code>`,o.style.top="10px",o.style.left="10px",o.style.position="absolute",o.style.zIndex="9999",o.style.width="100%",o.style.textAlign="left",document.body.appendChild(o);const s=document.getElementsByClassName("luma-compiler-log-error");s[0]?.scrollIntoView&&s[0].scrollIntoView(),o.onclick=()=>{const t=`data:text/plain,${encodeURIComponent(this.source)}`;navigator.clipboard.writeText(t)}}}function oa(t){return ea(t.source).name||t.id||Sn(`unnamed ${t.stage}-shader`)}class sa{static defaultProps={...ra.defaultProps};device;_cache={};static getDefaultShaderFactory(t){return t._lumaData.defaultShaderFactory||=new sa(t),t._lumaData.defaultShaderFactory}constructor(t){this.device=t}createShader(t){const e=this._hashShader(t);let n=this._cache[e];if(!n){const i=this.device.createShader({...t,id:t.id?`${t.id}-cached`:void 0});this._cache[e]=n={shader:i,useCount:0}}return n.useCount++,n.shader}release(t){const e=this._hashShader(t),n=this._cache[e];n&&(n.useCount--,0===n.useCount&&(delete this._cache[e],n.shader.destroy()))}_hashShader(t){return`${t.stage}:${t.source}`}}let aa=null,Aa=null;class la{static defaultProps={...Ir.defaultProps,source:null,vs:null,fs:null,id:"unnamed",handle:void 0,userData:{},defines:{},modules:[],moduleSettings:void 0,geometry:null,indexBuffer:null,attributes:{},constantAttributes:{},varyings:[],isInstanced:void 0,instanceCount:0,vertexCount:0,shaderInputs:void 0,pipelineFactory:void 0,shaderFactory:void 0,transformFeedback:void 0,shaderAssembler:yo.getDefaultShaderAssembler(),debugShaders:void 0,disableWarnings:void 0};device;id;source;vs;fs;pipelineFactory;shaderFactory;userData={};parameters;topology;bufferLayout;isInstanced=void 0;instanceCount=0;vertexCount;indexBuffer=null;bufferAttributes={};constantAttributes={};bindings={};uniforms={};vertexArray;transformFeedback=null;pipeline;shaderInputs;_uniformStore;_attributeInfos={};_gpuGeometry=null;_getModuleUniforms;props;_pipelineNeedsUpdate="newly created";_needsRedraw="initializing";_destroyed=!1;_lastDrawTimestamp=-1;constructor(t,e){this.props={...la.defaultProps,...e},e=this.props,this.id=e.id||Sn("model"),this.device=t,Object.assign(this.userData,e.userData);const n=Object.fromEntries(this.props.modules?.map((t=>[t.name,t]))||[]);this.setShaderInputs(e.shaderInputs||new Ws(n));const i=function(t){return{type:t.type,shaderLanguage:t.info.shadingLanguage,shaderLanguageVersion:t.info.shadingLanguageVersion,gpu:t.info.gpu,features:t.features}}(t),r=(this.props.modules?.length>0?this.props.modules:this.shaderInputs?.getModules())||[];if("webgpu"===this.device.type&&this.props.source){this.props.shaderLayout||=Js(this.props.source);const{source:t,getUniforms:e}=this.props.shaderAssembler.assembleShader({platformInfo:i,...this.props,modules:r});this.source=t,this._getModuleUniforms=e}else{const{vs:t,fs:e,getUniforms:n}=this.props.shaderAssembler.assembleShaderPair({platformInfo:i,...this.props,modules:r});this.vs=t,this.fs=e,this._getModuleUniforms=n}this.vertexCount=this.props.vertexCount,this.instanceCount=this.props.instanceCount,this.topology=this.props.topology,this.bufferLayout=this.props.bufferLayout,this.parameters=this.props.parameters,e.geometry&&this.setGeometry(e.geometry),this.pipelineFactory=e.pipelineFactory||Xs.getDefaultPipelineFactory(this.device),this.shaderFactory=e.shaderFactory||sa.getDefaultShaderFactory(this.device),this.pipeline=this._updatePipeline(),this.vertexArray=t.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry),"isInstanced"in e&&(this.isInstanced=e.isInstanced),e.instanceCount&&this.setInstanceCount(e.instanceCount),e.vertexCount&&this.setVertexCount(e.vertexCount),e.indexBuffer&&this.setIndexBuffer(e.indexBuffer),e.attributes&&this.setAttributes(e.attributes),e.constantAttributes&&this.setConstantAttributes(e.constantAttributes),e.bindings&&this.setBindings(e.bindings),e.uniforms&&this.setUniforms(e.uniforms),e.moduleSettings&&this.updateModuleSettings(e.moduleSettings),e.transformFeedback&&(this.transformFeedback=e.transformFeedback),Object.seal(this)}destroy(){this._destroyed||(this.pipelineFactory.release(this.pipeline),this.shaderFactory.release(this.pipeline.vs),this.pipeline.fs&&this.shaderFactory.release(this.pipeline.fs),this._uniformStore.destroy(),this._gpuGeometry?.destroy(),this._destroyed=!0)}needsRedraw(){this._getBindingsUpdateTimestamp()>this._lastDrawTimestamp&&this.setNeedsRedraw("contents of bound textures or buffers updated");const t=this._needsRedraw;return this._needsRedraw=!1,t}setNeedsRedraw(t){this._needsRedraw||=t}predraw(){this.updateShaderInputs(),this.pipeline=this._updatePipeline()}draw(t){let e;this.predraw();try{this._logDrawCallStart(),this.pipeline=this._updatePipeline(),this.pipeline.setBindings(this.bindings,{disableWarnings:this.props.disableWarnings}),Mn(this.uniforms)||this.pipeline.setUniformsWebGL(this.uniforms);const{indexBuffer:n}=this.vertexArray,i=n?n.byteLength/("uint32"===n.indexType?4:2):void 0;e=this.pipeline.draw({renderPass:t,vertexArray:this.vertexArray,isInstanced:this.isInstanced,vertexCount:this.vertexCount,instanceCount:this.instanceCount,indexCount:i,transformFeedback:this.transformFeedback||void 0,parameters:this.parameters,topology:this.topology})}finally{this._logDrawCallEnd()}return this._logFramebuffer(t),e?(this._lastDrawTimestamp=this.device.timestamp,this._needsRedraw=!1):this._needsRedraw="waiting for resource initialization",e}setGeometry(t){this._gpuGeometry?.destroy();const e=t&&Vs(this.device,t);e&&(this.setTopology(e.topology||"triangle-list"),this.bufferLayout=ca(e.bufferLayout,this.bufferLayout),this.vertexArray&&this._setGeometryAttributes(e)),this._gpuGeometry=e}setTopology(t){t!==this.topology&&(this.topology=t,this._setPipelineNeedsUpdate("topology"))}setBufferLayout(t){this.bufferLayout=this._gpuGeometry?ca(t,this._gpuGeometry.bufferLayout):t,this._setPipelineNeedsUpdate("bufferLayout"),this.pipeline=this._updatePipeline(),this.vertexArray=this.device.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry)}setParameters(t){Dr(t,this.parameters,2)||(this.parameters=t,this._setPipelineNeedsUpdate("parameters"))}setInstanceCount(t){this.instanceCount=t,void 0===this.isInstanced&&t>0&&(this.isInstanced=!0),this.setNeedsRedraw("instanceCount")}setVertexCount(t){this.vertexCount=t,this.setNeedsRedraw("vertexCount")}setShaderInputs(t){this.shaderInputs=t,this._uniformStore=new xr(this.shaderInputs.modules);for(const t of Object.keys(this.shaderInputs.modules)){const e=this._uniformStore.getManagedUniformBuffer(this.device,t);this.bindings[`${t}Uniforms`]=e}this.setNeedsRedraw("shaderInputs")}updateShaderInputs(){this._uniformStore.setUniforms(this.shaderInputs.getUniformValues()),this.setBindings(this.shaderInputs.getBindings()),this.setNeedsRedraw("shaderInputs")}setBindings(t){Object.assign(this.bindings,t),this.setNeedsRedraw("bindings")}setTransformFeedback(t){this.transformFeedback=t,this.setNeedsRedraw("transformFeedback")}setIndexBuffer(t){this.vertexArray.setIndexBuffer(t),this.setNeedsRedraw("indexBuffer")}setAttributes(t,e){t.indices&&br.warn(`Model:${this.id} setAttributes() - indexBuffer should be set using setIndexBuffer()`)();for(const[n,i]of Object.entries(t)){const t=this.bufferLayout.find((t=>ua(t).includes(n)));if(!t){br.warn(`Model(${this.id}): Missing layout for buffer "${n}".`)();continue}const r=ua(t);let o=!1;for(const t of r){const e=this._attributeInfos[t];e&&(this.vertexArray.setBuffer(e.location,i),o=!0)}o||(e?.disableWarnings??this.props.disableWarnings)||br.warn(`Model(${this.id}): Ignoring buffer "${i.id}" for unknown attribute "${n}"`)()}this.setNeedsRedraw("attributes")}setConstantAttributes(t,e){for(const[n,i]of Object.entries(t)){const t=this._attributeInfos[n];t?this.vertexArray.setConstantWebGL(t.location,i):(e?.disableWarnings??this.props.disableWarnings)||br.warn(`Model "${this.id}: Ignoring constant supplied for unknown attribute "${n}"`)()}this.setNeedsRedraw("constants")}setUniforms(t){Mn(t)||(this.pipeline.setUniformsWebGL(t),Object.assign(this.uniforms,t)),this.setNeedsRedraw("uniforms")}updateModuleSettings(t){const{bindings:e,uniforms:n}=Sr(this._getModuleUniforms(t));Object.assign(this.bindings,e),Object.assign(this.uniforms,n),this.setNeedsRedraw("moduleSettings")}_getBindingsUpdateTimestamp(){let t=0;for(const e of Object.values(this.bindings))e instanceof pr?t=Math.max(t,e.texture.updateTimestamp):e instanceof Rn||e instanceof fr?t=Math.max(t,e.updateTimestamp):e instanceof mr||(t=Math.max(t,e.buffer.updateTimestamp));return t}_setGeometryAttributes(t){const e={...t.attributes};for(const[t]of Object.entries(e))this.pipeline.shaderLayout.attributes.find((e=>e.name===t))||"positions"===t||delete e[t];this.vertexCount=t.vertexCount,this.setIndexBuffer(t.indices||null),this.setAttributes(t.attributes,{disableWarnings:!0}),this.setAttributes(e,{disableWarnings:this.props.disableWarnings}),this.setNeedsRedraw("geometry attributes")}_setPipelineNeedsUpdate(t){this._pipelineNeedsUpdate||=t,this.setNeedsRedraw(t)}_updatePipeline(){if(this._pipelineNeedsUpdate){let t=null,e=null;this.pipeline&&(br.log(1,`Model ${this.id}: Recreating pipeline because "${this._pipelineNeedsUpdate}".`)(),t=this.pipeline.vs,e=this.pipeline.fs),this._pipelineNeedsUpdate=!1;const n=this.shaderFactory.createShader({id:`${this.id}-vertex`,stage:"vertex",source:this.source||this.vs,debug:this.props.debugShaders});let i=null;this.source?i=n:this.fs&&(i=this.shaderFactory.createShader({id:`${this.id}-fragment`,stage:"fragment",source:this.source||this.fs,debug:this.props.debugShaders})),this.pipeline=this.pipelineFactory.createRenderPipeline({...this.props,bufferLayout:this.bufferLayout,topology:this.topology,parameters:this.parameters,vs:n,fs:i}),this._attributeInfos=Lr(this.pipeline.shaderLayout,this.bufferLayout),t&&this.shaderFactory.release(t),e&&this.shaderFactory.release(e)}return this.pipeline}_lastLogTime=0;_logOpen=!1;_logDrawCallStart(){const t=br.level>3?0:1e4;br.level<2||Date.now()-this._lastLogTime<t||(this._lastLogTime=Date.now(),this._logOpen=!0,br.group(2,`>>> DRAWING MODEL ${this.id}`,{collapsed:br.level<=2})())}_logDrawCallEnd(){if(this._logOpen){const t=function(t){const e={},n="Values";if(0===t.attributes.length&&!t.varyings?.length)return{"No attributes or varyings":{[n]:"N/A"}};for(const i of t.attributes)i&&(e[`in ${i.location} ${i.name}: ${i.type}`]={[n]:i.stepMode||"vertex"});for(const i of t.varyings||[])e[`out ${i.location} ${i.name}`]={[n]:JSON.stringify(i.accessor)};return e}(this.pipeline.shaderLayout,this.id);br.table(2,t)();const e=this.shaderInputs.getDebugTable();for(const[t,n]of Object.entries(this.uniforms))e[t]={value:n};br.table(2,e)();const n=this._getAttributeDebugTable();br.table(2,this._attributeInfos)(),br.table(2,n)(),br.groupEnd(2)(),this._logOpen=!1}}_drawCount=0;_logFramebuffer(t){const e=br.get("framebuffer");if(this._drawCount++,!e||this._drawCount++>3&&this._drawCount%60)return;const n=t.props.framebuffer;n&&function(t,{id:e,minimap:n,opaque:i,top:r="0",left:o="0",rgbaScale:s=1}){aa||(aa=document.createElement("canvas"),aa.id=e,aa.title=e,aa.style.zIndex="100",aa.style.position="absolute",aa.style.top=r,aa.style.left=o,aa.style.border="blue 1px solid",aa.style.transform="scaleY(-1)",document.body.appendChild(aa),Aa=aa.getContext("2d")),aa.width===t.width&&aa.height===t.height||(aa.width=t.width/2,aa.height=t.height/2,aa.style.width="400px",aa.style.height="400px");const a=t.device.readPixelsToArrayWebGL(t),A=Aa.createImageData(t.width,t.height);for(let t=0;t<a.length;t+=4)A.data[0+t+0]=a[t+0]*s,A.data[0+t+1]=a[t+1]*s,A.data[0+t+2]=a[t+2]*s,A.data[0+t+3]=i?255:a[t+3]*s;Aa.putImageData(A,0,0)}(n,{id:n.id,minimap:!0})}_getAttributeDebugTable(){const t={};for(const[e,n]of Object.entries(this._attributeInfos))t[n.location]={name:e,type:n.shaderType,values:this._getBufferOrConstantValues(this.vertexArray.attributes[n.location],n.bufferDataType)};if(this.vertexArray.indexBuffer){const{indexBuffer:e}=this.vertexArray,n="uint32"===e.indexType?new Uint32Array(e.debugData):new Uint16Array(e.debugData);t.indices={name:"indices",type:e.indexType,values:n.toString()}}return t}_getBufferOrConstantValues(t,e){const n=li(e);return(t instanceof Rn?new n(t.debugData):t).toString()}}function ca(t,e){const n=[...t];for(const t of e){const e=n.findIndex((e=>e.name===t.name));e<0?n.push(t):n[e]=t}return n}function ua(t){return t.attributes?t.attributes?.map((t=>t.attribute)):[t.name]}class ha{device;model;transformFeedback;static isSupported(t){return"webgl"===t?.info?.type}constructor(t,e=la.defaultProps){gr(ha.isSupported(t),"BufferTransform not yet implemented on WebGPU"),this.device=t,this.model=new la(this.device,{id:e.id||"buffer-transform-model",fs:e.fs||dr(),topology:e.topology||"point-list",...e}),this.transformFeedback=this.device.createTransformFeedback({layout:this.model.pipeline.shaderLayout,buffers:e.feedbackBuffers}),this.model.setTransformFeedback(this.transformFeedback),Object.seal(this)}destroy(){this.model&&this.model.destroy()}delete(){this.destroy()}run(t){const e=this.device.beginRenderPass(t);this.model.draw(e),e.end()}update(...t){console.warn("TextureTransform#update() not implemented")}getBuffer(t){return this.transformFeedback.getBuffer(t)}readAsync(t){const e=this.getBuffer(t);if(e instanceof Rn)return e.readAsync();const{buffer:n,byteOffset:i=0,byteLength:r=n.byteLength}=e;return n.readAsync(i,r)}}function ga(t,e=[],n=0){const i=Math.fround(t),r=t-i;return e[n]=i,e[n+1]=r,e}function da(t){return t-Math.fround(t)}function pa(t){const e=new Float32Array(32);for(let n=0;n<4;++n)for(let i=0;i<4;++i){const r=4*n+i;ga(t[4*i+n],e,2*r)}return e}const fa={ONE:1};const ma={name:"fp64-arithmetic",vs:"uniform float ONE;\nvec2 split(float a) {\nconst float SPLIT = 4097.0;\nfloat t = a * SPLIT;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\nfloat a_hi = t * ONE - (t - a);\nfloat a_lo = a * ONE - a_hi;\n#else\nfloat a_hi = t - (t - a);\nfloat a_lo = a - a_hi;\n#endif\nreturn vec2(a_hi, a_lo);\n}\nvec2 split2(vec2 a) {\nvec2 b = split(a.x);\nb.y += a.y;\nreturn b;\n}\nvec2 quickTwoSum(float a, float b) {\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\nfloat sum = (a + b) * ONE;\nfloat err = b - (sum - a) * ONE;\n#else\nfloat sum = a + b;\nfloat err = b - (sum - a);\n#endif\nreturn vec2(sum, err);\n}\nvec2 twoSum(float a, float b) {\nfloat s = (a + b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\nfloat v = (s * ONE - a) * ONE;\nfloat err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);\n#else\nfloat v = s - a;\nfloat err = (a - (s - v)) + (b - v);\n#endif\nreturn vec2(s, err);\n}\nvec2 twoSub(float a, float b) {\nfloat s = (a - b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\nfloat v = (s * ONE - a) * ONE;\nfloat err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);\n#else\nfloat v = s - a;\nfloat err = (a - (s - v)) - (b + v);\n#endif\nreturn vec2(s, err);\n}\nvec2 twoSqr(float a) {\nfloat prod = a * a;\nvec2 a_fp64 = split(a);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\nfloat err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *\na_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\n#else\nfloat err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n#endif\nreturn vec2(prod, err);\n}\nvec2 twoProd(float a, float b) {\nfloat prod = a * b;\nvec2 a_fp64 = split(a);\nvec2 b_fp64 = split(b);\nfloat err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\na_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\nreturn vec2(prod, err);\n}\nvec2 sum_fp64(vec2 a, vec2 b) {\nvec2 s, t;\ns = twoSum(a.x, b.x);\nt = twoSum(a.y, b.y);\ns.y += t.x;\ns = quickTwoSum(s.x, s.y);\ns.y += t.y;\ns = quickTwoSum(s.x, s.y);\nreturn s;\n}\nvec2 sub_fp64(vec2 a, vec2 b) {\nvec2 s, t;\ns = twoSub(a.x, b.x);\nt = twoSub(a.y, b.y);\ns.y += t.x;\ns = quickTwoSum(s.x, s.y);\ns.y += t.y;\ns = quickTwoSum(s.x, s.y);\nreturn s;\n}\nvec2 mul_fp64(vec2 a, vec2 b) {\nvec2 prod = twoProd(a.x, b.x);\nprod.y += a.x * b.y;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\nprod = split2(prod);\n#endif\nprod = quickTwoSum(prod.x, prod.y);\nprod.y += a.y * b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\nprod = split2(prod);\n#endif\nprod = quickTwoSum(prod.x, prod.y);\nreturn prod;\n}\nvec2 div_fp64(vec2 a, vec2 b) {\nfloat xn = 1.0 / b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\nvec2 yn = mul_fp64(a, vec2(xn, 0));\n#else\nvec2 yn = a * xn;\n#endif\nfloat diff = (sub_fp64(a, mul_fp64(b, yn))).x;\nvec2 prod = twoProd(xn, diff);\nreturn sum_fp64(yn, prod);\n}\nvec2 sqrt_fp64(vec2 a) {\nif (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\nif (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\nfloat x = 1.0 / sqrt(a.x);\nfloat yn = a.x * x;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\nvec2 yn_sqr = twoSqr(yn) * ONE;\n#else\nvec2 yn_sqr = twoSqr(yn);\n#endif\nfloat diff = sub_fp64(a, yn_sqr).x;\nvec2 prod = twoProd(x * 0.5, diff);\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\nreturn sum_fp64(split(yn), prod);\n#else\nreturn sum_fp64(vec2(yn, 0.0), prod);\n#endif\n}\n",getUniforms:function(){return fa},fp64ify:ga,fp64LowPart:da,fp64ifyMatrix4:pa};function Ia(t){const{source:e,target:n,start:i=0,size:r,getData:o}=t,s=t.end||n.length,a=e.length,A=s-i;if(a>A)return void n.set(e.subarray(0,A),i);if(n.set(e,i),!o)return;let l=a;for(;l<A;){const t=o(l,e);for(let e=0;e<r;e++)n[i+l]=t[e]||0,l++}}function ya(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error(`No defined attribute type for size "${t}"`)}}function Ca(t){switch(t){case 1:return"float32";case 2:return"float32x2";case 3:return"float32x3";case 4:return"float32x4";default:throw new Error("invalid type size")}}function Ea(t){t.push(t.shift())}function _a({device:t,source:e,target:n}){return(!n||n.byteLength<e.byteLength)&&(n?.destroy(),n=t.createBuffer({byteLength:e.byteLength,usage:e.usage})),n}function va({device:t,buffer:e,attribute:n,fromLength:i,toLength:r,fromStartIndices:o,getData:s=t=>t}){const a=n.doublePrecision&&n.value instanceof Float64Array?2:1,A=n.size*a,l=n.byteOffset,c=n.settings.bytesPerElement<4?l/n.settings.bytesPerElement*4:l,u=n.startIndices,h=o&&u,g=n.isConstant;if(!h&&e&&i>=r)return e;const d=n.value instanceof Float64Array?Float32Array:n.value.constructor,p=g?n.value:new d(n.getBuffer().readSyncWebGL(l,r*d.BYTES_PER_ELEMENT).buffer);if(n.settings.normalized&&!g){const t=s;s=(e,i)=>n.normalizeConstant(t(e,i))}const f=g?(t,e)=>s(p,e):(t,e)=>s(p.subarray(t+l,t+l+A),e),m=e?new Float32Array(e.readSyncWebGL(c,4*i).buffer):new Float32Array(0),I=new Float32Array(r);return function({source:t,target:e,size:n,getData:i,sourceStartIndices:r,targetStartIndices:o}){if(!r||!o)return Ia({source:t,target:e,size:n,getData:i}),e;let s=0,a=0;const A=i&&((t,e)=>i(t+a,e)),l=Math.min(r.length,o.length);for(let i=1;i<l;i++){const l=r[i]*n,c=o[i]*n;Ia({source:t.subarray(s,l),target:e,start:a,end:c,size:n,getData:A}),s=l,a=c}a<e.length&&Ia({source:[],target:e,start:a,size:n,getData:A})}({source:m,target:I,sourceStartIndices:o,targetStartIndices:u,size:A,getData:f}),(!e||e.byteLength<I.byteLength+c)&&(e?.destroy(),e=t.createBuffer({byteLength:I.byteLength+c,usage:35050})),e.write(I,c),e}class Ba{constructor(t){this._inProgress=!1,this._handle=null,this.time=0,this.settings={duration:0},this._timeline=t}get inProgress(){return this._inProgress}start(t){this.cancel(),this.settings=t,this._inProgress=!0,this.settings.onStart?.(this)}end(){this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,this.settings.onEnd?.(this))}cancel(){this._inProgress&&(this.settings.onInterrupt?.(this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:t,settings:e}=this;this._handle=t.addChannel({delay:t.getTime(),duration:e.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),this.settings.onUpdate?.(this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}class wa{constructor({device:t,attribute:e,timeline:n}){this.buffers=[],this.currentLength=0,this.device=t,this.transition=new Ba(n),this.attribute=e,this.attributeInTransition=function(t){const{device:e,settings:n,value:i}=t,r=new ar(e,n);return r.setData({value:i instanceof Float64Array?new Float64Array(0):new Float32Array(0),normalized:n.normalized}),r}(e),this.currentStartIndices=e.startIndices}get inProgress(){return this.transition.inProgress}start(t,e,n=1/0){this.settings=t,this.currentStartIndices=this.attribute.startIndices,this.currentLength=function(t,e){const{doublePrecision:n,settings:i,value:r,size:o}=t,s=n&&r instanceof Float64Array?2:1;let a=0;const{shaderAttributes:A}=t.settings;if(A)for(const t of Object.values(A))a=Math.max(a,t.vertexOffset??0);return(i.noAlloc?r.length:(e+a)*o)*s}(this.attribute,e),this.transition.start({...t,duration:n})}update(){const t=this.transition.update();return t&&this.onUpdate(),t}setBuffer(t){this.attributeInTransition.setData({buffer:t,normalized:this.attribute.settings.normalized,value:this.attributeInTransition.value})}cancel(){this.transition.cancel()}delete(){this.cancel();for(const t of this.buffers)t.destroy();this.buffers.length=0}}const ba="#version 300 es\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nin ATTRIBUTE_TYPE aFrom;\nin ATTRIBUTE_TYPE aTo;\nout ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",Qa="#version 300 es\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nin ATTRIBUTE_TYPE aFrom;\nin ATTRIBUTE_TYPE aFrom64Low;\nin ATTRIBUTE_TYPE aTo;\nin ATTRIBUTE_TYPE aTo64Low;\nout ATTRIBUTE_TYPE vCurrent;\nout ATTRIBUTE_TYPE vCurrent64Low;\n\nvec2 mix_fp64(vec2 a, vec2 b, float x) {\n  vec2 range = sub_fp64(b, a);\n  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));\n}\n\nvoid main(void) {\n  for (int i=0; i<ATTRIBUTE_SIZE; i++) {\n    vec2 value = mix_fp64(vec2(aFrom[i], aFrom64Low[i]), vec2(aTo[i], aTo64Low[i]), time);\n    vCurrent[i] = value.x;\n    vCurrent64Low[i] = value.y;\n  }\n  gl_Position = vec4(0.0);\n}\n";function xa(t){return t.doublePrecision&&t.value instanceof Float64Array}const Da="#version 300 es\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nin ATTRIBUTE_TYPE aPrev;\nin ATTRIBUTE_TYPE aCur;\nin ATTRIBUTE_TYPE aTo;\nout ATTRIBUTE_TYPE vNext;\nout float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",Sa="#version 300 es\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nin float vIsTransitioningFlag;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  fragColor = vec4(1.0);\n}";const Ma={interpolation:class extends wa{constructor({device:t,attribute:e,timeline:n}){super({device:t,attribute:e,timeline:n}),this.type="interpolation",this.transform=function(t,e){const n=e.size,i=ya(n),r=Ca(n),o=e.getBufferLayout();if(xa(e))return new ha(t,{vs:Qa,bufferLayout:[{name:"aFrom",byteStride:8*n,attributes:[{attribute:"aFrom",format:r,byteOffset:0},{attribute:"aFrom64Low",format:r,byteOffset:4*n}]},{name:"aTo",byteStride:8*n,attributes:[{attribute:"aTo",format:r,byteOffset:0},{attribute:"aTo64Low",format:r,byteOffset:4*n}]}],modules:[ma],defines:{ATTRIBUTE_TYPE:i,ATTRIBUTE_SIZE:n},moduleSettings:{},varyings:["vCurrent","vCurrent64Low"],bufferMode:35980,disableWarnings:!0});return new ha(t,{vs:ba,bufferLayout:[{name:"aFrom",format:r},{name:"aTo",format:o.attributes[0].format}],defines:{ATTRIBUTE_TYPE:i},varyings:["vCurrent"],disableWarnings:!0})}(t,e)}start(t,e){const n=this.currentLength,i=this.currentStartIndices;if(super.start(t,e,t.duration),t.duration<=0)return void this.transition.cancel();const{buffers:r,attribute:o}=this;Ea(r),r[0]=va({device:this.device,buffer:r[0],attribute:o,fromLength:n,toLength:this.currentLength,fromStartIndices:i,getData:t.enter}),r[1]=_a({device:this.device,source:r[0],target:r[1]}),this.setBuffer(r[1]);const{transform:s}=this,a=s.model;let A=Math.floor(this.currentLength/o.size);xa(o)&&(A/=2),a.setVertexCount(A),o.isConstant?(a.setAttributes({aFrom:r[0]}),a.setConstantAttributes({aTo:o.value})):a.setAttributes({aFrom:r[0],aTo:o.getBuffer()}),s.transformFeedback.setBuffers({vCurrent:r[1]})}onUpdate(){const{duration:t,easing:e}=this.settings,{time:n}=this.transition;let i=n/t;e&&(i=e(i));const{model:r}=this.transform;r.setUniforms({time:i}),this.transform.run({discard:!0})}delete(){super.delete(),this.transform.destroy()}},spring:class extends wa{constructor({device:t,attribute:e,timeline:n}){super({device:t,attribute:e,timeline:n}),this.type="spring",this.texture=function(t){return t.createTexture({data:new Uint8Array(4),format:"rgba8unorm",mipmaps:!1,width:1,height:1})}(t),this.framebuffer=function(t,e){return t.createFramebuffer({id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,colorAttachments:[e]})}(t,this.texture),this.transform=function(t,e){const n=ya(e.size),i=Ca(e.size);return new ha(t,{vs:Da,fs:Sa,bufferLayout:[{name:"aPrev",format:i},{name:"aCur",format:i},{name:"aTo",format:e.getBufferLayout().attributes[0].format}],varyings:["vNext"],defines:{ATTRIBUTE_TYPE:n},parameters:{depthCompare:"always",blendColorOperation:"max",blendColorSrcFactor:"one",blendColorDstFactor:"one",blendAlphaOperation:"max",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one"}})}(t,e)}start(t,e){const n=this.currentLength,i=this.currentStartIndices;super.start(t,e);const{buffers:r,attribute:o}=this;for(let e=0;e<2;e++)r[e]=va({device:this.device,buffer:r[e],attribute:o,fromLength:n,toLength:this.currentLength,fromStartIndices:i,getData:t.enter});r[2]=_a({device:this.device,source:r[0],target:r[2]}),this.setBuffer(r[1]);const{model:s}=this.transform;s.setVertexCount(Math.floor(this.currentLength/o.size)),o.isConstant?s.setConstantAttributes({aTo:o.value}):s.setAttributes({aTo:o.getBuffer()})}onUpdate(){const{buffers:t,transform:e,framebuffer:n,transition:i}=this,r=this.settings;e.model.setAttributes({aPrev:t[0],aCur:t[1]}),e.transformFeedback.setBuffers({vNext:t[2]}),e.model.setUniforms({stiffness:r.stiffness,damping:r.damping}),e.run({framebuffer:n,discard:!1,parameters:{viewport:[0,0,1,1]},clearColor:[0,0,0,0]}),Ea(t),this.setBuffer(t[1]);this.device.readPixelsToArrayWebGL(n)[0]>0||i.end()}delete(){super.delete(),this.transform.destroy(),this.texture.destroy(),this.framebuffer.destroy()}}};class ka{constructor(t,{id:e,timeline:n}){if(!t)throw new Error("AttributeTransitionManager is constructed without device");this.id=e,this.device=t,this.timeline=n,this.transitions={},this.needsRedraw=!1,this.numInstances=1}finalize(){for(const t in this.transitions)this._removeTransition(t)}update({attributes:t,transitions:e,numInstances:n}){this.numInstances=n||1;for(const n in t){const i=t[n],r=i.getTransitionSetting(e);r&&this._updateAttribute(n,i,r)}for(const n in this.transitions){const i=t[n];i&&i.getTransitionSetting(e)||this._removeTransition(n)}}hasAttribute(t){const e=this.transitions[t];return e&&e.inProgress}getAttributes(){const t={};for(const e in this.transitions){const n=this.transitions[e];n.inProgress&&(t[e]=n.attributeInTransition)}return t}run(){if(0===this.numInstances)return!1;for(const t in this.transitions){this.transitions[t].update()&&(this.needsRedraw=!0)}const t=this.needsRedraw;return this.needsRedraw=!1,t}_removeTransition(t){this.transitions[t].delete(),delete this.transitions[t]}_updateAttribute(t,e,n){const i=this.transitions[t];let r=!i||i.type!==n.type;if(r){i&&this._removeTransition(t);const o=Ma[n.type];o?this.transitions[t]=new o({attribute:e,timeline:this.timeline,device:this.device}):(ii.error(`unsupported transition type '${n.type}'`)(),r=!1)}(r||e.needsRedraw())&&(this.needsRedraw=!0,this.transitions[t].start(n,this.numInstances))}}const Ra="attributeManager.invalidate";class Na{constructor(t,{id:e="attribute-manager",stats:n,timeline:i}={}){this.mergeBoundsMemoized=lr(zi),this.id=e,this.device=t,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new ka(t,{id:`${e}-transitions`,timeline:i}),Object.seal(this)}finalize(){for(const t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(t={clearRedrawFlags:!1}){const e=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t.clearRedrawFlags,e&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(t){this._add(t)}addInstanced(t){this._add(t,{stepMode:"instance"})}remove(t){for(const e of t)void 0!==this.attributes[e]&&(this.attributes[e].delete(),delete this.attributes[e])}invalidate(t,e){const n=this._invalidateTrigger(t,e);hr(Ra,this,t,n)}invalidateAll(t){for(const e in this.attributes)this.attributes[e].setNeedsUpdate(e,t);hr(Ra,this,"all")}update({data:t,numInstances:e,startIndices:n=null,transitions:i,props:r={},buffers:o={},context:s={}}){let a=!1;hr("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const i in this.attributes){const A=this.attributes[i],l=A.settings.accessor;A.startIndices=n,A.numInstances=e,r[i]&&ii.removed(`props.${i}`,`data.attributes.${i}`)(),A.setExternalBuffer(o[i])||A.setBinaryValue("string"==typeof l?o[l]:void 0,t.startIndices)||"string"==typeof l&&!o[l]&&A.setConstantValue(r[l])||A.needsUpdate()&&(a=!0,this._updateAttribute({attribute:A,numInstances:e,data:t,props:r,context:s})),this.needsRedraw=this.needsRedraw||A.needsRedraw()}a&&hr("attributeManager.updateEnd",this,e),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:e,transitions:i})}updateTransition(){const{attributeTransitionManager:t}=this,e=t.run();return this.needsRedraw=this.needsRedraw||e,e}getAttributes(){return{...this.attributes,...this.attributeTransitionManager.getAttributes()}}getBounds(t){const e=t.map((t=>this.attributes[t]?.getBounds()));return this.mergeBoundsMemoized(e)}getChangedAttributes(t={clearChangedFlags:!1}){const{attributes:e,attributeTransitionManager:n}=this,i={...n.getAttributes()};for(const r in e){const o=e[r];o.needsRedraw(t)&&!n.hasAttribute(r)&&(i[r]=o)}return i}getBufferLayouts(t){return Object.values(this.getAttributes()).map((e=>e.getBufferLayout(t)))}_add(t,e){for(const n in t){const i=t[n],r={...i,id:n,size:(i.isIndexed?1:i.size)||1,...e};this.attributes[n]=new ar(this.device,r)}this._mapUpdateTriggersToAttributes()}_mapUpdateTriggersToAttributes(){const t={};for(const e in this.attributes){this.attributes[e].getUpdateTriggers().forEach((n=>{t[n]||(t[n]=[]),t[n].push(e)}))}this.updateTriggers=t}_invalidateTrigger(t,e){const{attributes:n,updateTriggers:i}=this,r=i[t];return r&&r.forEach((t=>{const i=n[t];i&&i.setNeedsUpdate(i.id,e)})),r}_updateAttribute(t){const{attribute:e,numInstances:n}=t;if(hr("attribute.updateStart",e),e.constant)return void e.setConstantValue(e.value);e.allocate(n)&&hr("attribute.allocate",e,n);e.updateBuffer(t)&&(this.needsRedraw=!0,hr("attribute.updateEnd",e,n))}}const Pa=1e-5;function Ta(t,e,n,i,r){const o=e-t;return(n-e)*r+-o*i+o+e}function La(t,e){if(Array.isArray(t)){let n=0;for(let i=0;i<t.length;i++){const r=t[i]-e[i];n+=r*r}return Math.sqrt(n)}return Math.abs(t-e)}const Fa={interpolation:class extends Ba{get value(){return this._value}_onUpdate(){const{time:t,settings:{fromValue:e,toValue:n,duration:i,easing:r}}=this,o=r(t/i);this._value=yi(e,n,o)}},spring:class extends Ba{get value(){return this._currValue}_onUpdate(){const{fromValue:t,toValue:e,damping:n,stiffness:i}=this.settings,{_prevValue:r=t,_currValue:o=t}=this;let s=function(t,e,n,i,r){if(Array.isArray(n)){const o=[];for(let s=0;s<n.length;s++)o[s]=Ta(t[s],e[s],n[s],i,r);return o}return Ta(t,e,n,i,r)}(r,o,e,n,i);const a=La(s,e),A=La(s,o);a<Pa&&A<Pa&&(s=e,this.end()),this._prevValue=o,this._currValue=s}}};class Oa{constructor(t){this.transitions=new Map,this.timeline=t}get active(){return this.transitions.size>0}add(t,e,n,i){const{transitions:r}=this;if(r.has(t)){const n=r.get(t),{value:i=n.settings.fromValue}=n;e=i,this.remove(t)}if(!(i=sr(i)))return;const o=Fa[i.type];if(!o)return void ii.error(`unsupported transition type '${i.type}'`)();const s=new o(this.timeline);s.start({...i,fromValue:e,toValue:n}),r.set(t,s)}remove(t){const{transitions:e}=this;e.has(t)&&(e.get(t).cancel(),e.delete(t))}update(){const t={};for(const[e,n]of this.transitions)n.update(),t[e]=n.value,n.inProgress||this.remove(e);return t}clear(){for(const t of this.transitions.keys())this.remove(t)}}const Ga="Awaiting state",Ua="Matched. State transferred from previous layer",ja="Initialized",Ya="Discarded. Awaiting garbage collection",Ka="No longer matched. Awaiting garbage collection",za="Finalized! Awaiting garbage collection",Ja=Symbol.for("component"),qa=Symbol.for("propTypes"),Ha=Symbol.for("deprecatedProps"),Va=Symbol.for("asyncPropDefaults"),Wa=Symbol.for("asyncPropOriginal"),Za=Symbol.for("asyncPropResolved");function Xa(t,e){const n=tA({newProps:t,oldProps:e,propTypes:t[qa],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=function(t,e){if(null===e)return"oldProps is null, initial diff";let n=!1;const{dataComparator:i,_dataDiff:r}=t;i?i(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied");n&&r&&(n=r(t.data,e.data)||n);return n}(t,e);let r=!1;return i||(r=function(t,e){if(null===e)return{all:!0};if("all"in t.updateTriggers){if(iA(t,e,"all"))return{all:!0}}const n={};let i=!1;for(const r in t.updateTriggers)if("all"!==r){iA(t,e,r)&&(n[r]=!0,i=!0)}return!!i&&n}(t,e)),{dataChanged:i,propsChanged:n,updateTriggersChanged:r,extensionsChanged:nA(t,e),transitionsChanged:$a(t,e)}}function $a(t,e){if(!t.transitions)return!1;const n={},i=t[qa];let r=!1;for(const o in t.transitions){const s=i[o],a=s&&s.type;("number"===a||"color"===a||"array"===a)&&eA(t[o],e[o],s)&&(n[o]=!0,r=!0)}return!!r&&n}function tA({newProps:t,oldProps:e,ignoreProps:n={},propTypes:i={},triggerName:r="props"}){if(e===t)return!1;if("object"!=typeof t||null===t)return`${r} changed shallowly`;if("object"!=typeof e||null===e)return`${r} changed shallowly`;for(const o of Object.keys(t))if(!(o in n)){if(!(o in e))return`${r}.${o} added`;const n=eA(t[o],e[o],i[o]);if(n)return`${r}.${o} ${n}`}for(const o of Object.keys(e))if(!(o in n)){if(!(o in t))return`${r}.${o} dropped`;if(!Object.hasOwnProperty.call(t,o)){const n=eA(t[o],e[o],i[o]);if(n)return`${r}.${o} ${n}`}}return!1}function eA(t,e,n){let i=n&&n.equal;return i&&!i(t,e,n)?"changed deeply":i||(i=t&&e&&t.equals,!i||i.call(t,e))?i||e===t?null:"changed shallowly":"changed deeply"}function nA(t,e){if(null===e)return!0;const n=e.extensions,{extensions:i}=t;if(i===n)return!1;if(!n||!i)return!0;if(i.length!==n.length)return!0;for(let t=0;t<i.length;t++)if(!i[t].equals(n[t]))return!0;return!1}function iA(t,e,n){let i=t.updateTriggers[n];i=null==i?{}:i;let r=e.updateTriggers[n];r=null==r?{}:r;return tA({oldProps:r,newProps:i,triggerName:n})}function rA(t){if(null===(e=t)||"object"!=typeof e)throw new Error("count(): argument not an object");var e;if("function"==typeof t.count)return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(function(t){return null!==t&&"object"==typeof t&&t.constructor===Object}(t))return Object.keys(t).length;throw new Error("count(): argument not a container")}function oA(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some((t=>"project64"===t.name)))){const t=n.modules.findIndex((t=>"project32"===t.name));t>=0&&n.modules.splice(t,1)}if("inject"in e)if(t.inject){const i={...t.inject};for(const t in e.inject)i[t]=(i[t]||"")+e.inject[t];n.inject=i}else n.inject=e.inject;return n}function sA(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function aA(t,e,n){const i=e[0],r=e[1],o=e[2],s=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*s,t[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*s,t[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*s,t[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*s,t}!function(){const t=function(){const t=new xi(4);return xi!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}()}();function AA(t,e){const n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],A=e[6],l=e[7],c=e[8],u=e[9],h=e[10],g=e[11],d=e[12],p=e[13],f=e[14],m=e[15],I=n*a-i*s,y=n*A-r*s,C=n*l-o*s,E=i*A-r*a,_=i*l-o*a,v=r*l-o*A,B=c*p-u*d,w=c*f-h*d,b=c*m-g*d,Q=u*f-h*p,x=u*m-g*p,D=h*m-g*f;let S=I*D-y*x+C*Q+E*b-_*w+v*B;return S?(S=1/S,t[0]=(a*D-A*x+l*Q)*S,t[1]=(r*x-i*D-o*Q)*S,t[2]=(p*v-f*_+m*E)*S,t[3]=(h*_-u*v-g*E)*S,t[4]=(A*b-s*D-l*w)*S,t[5]=(n*D-r*b+o*w)*S,t[6]=(f*C-d*v-m*y)*S,t[7]=(c*v-h*C+g*y)*S,t[8]=(s*x-a*b+l*B)*S,t[9]=(i*b-n*x-o*B)*S,t[10]=(d*_-p*C+m*I)*S,t[11]=(u*C-c*_-g*I)*S,t[12]=(a*w-s*Q-A*B)*S,t[13]=(n*Q-i*w+r*B)*S,t[14]=(p*y-d*E-f*I)*S,t[15]=(c*E-u*y+h*I)*S,t):null}function lA(t,e,n){const i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],A=e[5],l=e[6],c=e[7],u=e[8],h=e[9],g=e[10],d=e[11],p=e[12],f=e[13],m=e[14],I=e[15];let y=n[0],C=n[1],E=n[2],_=n[3];return t[0]=y*i+C*a+E*u+_*p,t[1]=y*r+C*A+E*h+_*f,t[2]=y*o+C*l+E*g+_*m,t[3]=y*s+C*c+E*d+_*I,y=n[4],C=n[5],E=n[6],_=n[7],t[4]=y*i+C*a+E*u+_*p,t[5]=y*r+C*A+E*h+_*f,t[6]=y*o+C*l+E*g+_*m,t[7]=y*s+C*c+E*d+_*I,y=n[8],C=n[9],E=n[10],_=n[11],t[8]=y*i+C*a+E*u+_*p,t[9]=y*r+C*A+E*h+_*f,t[10]=y*o+C*l+E*g+_*m,t[11]=y*s+C*c+E*d+_*I,y=n[12],C=n[13],E=n[14],_=n[15],t[12]=y*i+C*a+E*u+_*p,t[13]=y*r+C*A+E*h+_*f,t[14]=y*o+C*l+E*g+_*m,t[15]=y*s+C*c+E*d+_*I,t}function cA(t,e,n){const i=n[0],r=n[1],o=n[2];let s,a,A,l,c,u,h,g,d,p,f,m;return e===t?(t[12]=e[0]*i+e[4]*r+e[8]*o+e[12],t[13]=e[1]*i+e[5]*r+e[9]*o+e[13],t[14]=e[2]*i+e[6]*r+e[10]*o+e[14],t[15]=e[3]*i+e[7]*r+e[11]*o+e[15]):(s=e[0],a=e[1],A=e[2],l=e[3],c=e[4],u=e[5],h=e[6],g=e[7],d=e[8],p=e[9],f=e[10],m=e[11],t[0]=s,t[1]=a,t[2]=A,t[3]=l,t[4]=c,t[5]=u,t[6]=h,t[7]=g,t[8]=d,t[9]=p,t[10]=f,t[11]=m,t[12]=s*i+c*r+d*o+e[12],t[13]=a*i+u*r+p*o+e[13],t[14]=A*i+h*r+f*o+e[14],t[15]=l*i+g*r+m*o+e[15]),t}function uA(t,e,n){const i=n[0],r=n[1],o=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function hA(t,e,n){const i=Math.sin(n),r=Math.cos(n),o=e[4],s=e[5],a=e[6],A=e[7],l=e[8],c=e[9],u=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+l*i,t[5]=s*r+c*i,t[6]=a*r+u*i,t[7]=A*r+h*i,t[8]=l*r-o*i,t[9]=c*r-s*i,t[10]=u*r-a*i,t[11]=h*r-A*i,t}function gA(t,e,n){const i=Math.sin(n),r=Math.cos(n),o=e[0],s=e[1],a=e[2],A=e[3],l=e[4],c=e[5],u=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+l*i,t[1]=s*r+c*i,t[2]=a*r+u*i,t[3]=A*r+h*i,t[4]=l*r-o*i,t[5]=c*r-s*i,t[6]=u*r-a*i,t[7]=h*r-A*i,t}const dA=function(t,e,n,i,r){const o=1/Math.tan(e/2);if(t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0){const e=1/(i-r);t[10]=(r+i)*e,t[14]=2*r*i*e}else t[10]=-1,t[14]=-2*i;return t};const pA=function(t,e,n,i,r,o,s){const a=1/(e-n),A=1/(i-r),l=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*A,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*a,t[13]=(r+i)*A,t[14]=(s+o)*l,t[15]=1,t};const fA=[0,0,0,0],mA=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],IA=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],yA=[0,0,0],CA=[0,0,0],EA=lr((function({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:i}){const{projectionCenter:r,viewProjectionMatrix:o,originCommon:s,cameraPosCommon:a,shaderCoordinateOrigin:A,geospatialOrigin:l}=function(t,e,n){const{viewMatrixUncentered:i,projectionMatrix:r}=t;let{viewMatrix:o,viewProjectionMatrix:s}=t,a=fA,A=fA,l=t.cameraPosition;const{geospatialOrigin:c,shaderCoordinateOrigin:u,offsetMode:h}=_A(t,e,n);h&&(A=t.projectPosition(c||u),l=[l[0]-A[0],l[1]-A[1],l[2]-A[2]],A[3]=1,a=aA([],A,s),o=i||o,s=lA([],r,o),s=lA([],s,mA));return{viewMatrix:o,viewProjectionMatrix:s,projectionCenter:a,originCommon:A,cameraPosCommon:l,shaderCoordinateOrigin:u,geospatialOrigin:c}}(t,n,i),c=t.getDistanceScales(),u=[t.width*e,t.height*e],h=aA([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,g={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:A,project_uCommonOrigin:s.slice(0,3),project_uCenter:r,project_uPseudoMeters:Boolean(t._pseudoMeters),project_uViewportSize:u,project_uDevicePixelRatio:e,project_uFocalDistance:h,project_uCommonUnitsPerMeter:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:yA,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:o,project_uModelMatrix:IA,project_uCameraPosition:a};if(l){const e=t.getDistanceScales(l);switch(n){case ri.METER_OFFSETS:g.project_uCommonUnitsPerWorldUnit=e.unitsPerMeter,g.project_uCommonUnitsPerWorldUnit2=e.unitsPerMeter2;break;case ri.LNGLAT:case ri.LNGLAT_OFFSETS:t._pseudoMeters||(g.project_uCommonUnitsPerMeter=e.unitsPerMeter),g.project_uCommonUnitsPerWorldUnit=e.unitsPerDegree,g.project_uCommonUnitsPerWorldUnit2=e.unitsPerDegree2;break;case ri.CARTESIAN:g.project_uCommonUnitsPerWorldUnit=[1,1,e.unitsPerMeter[2]],g.project_uCommonUnitsPerWorldUnit2=[0,0,e.unitsPerMeter2[2]]}}return g}));function _A(t,e,n=CA){n.length<3&&(n=[n[0],n[1],0]);let i,r=n,o=!0;switch(i=e===ri.LNGLAT_OFFSETS||e===ri.METER_OFFSETS?n:t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case oi.WEB_MERCATOR:e!==ri.LNGLAT&&e!==ri.CARTESIAN||(i=[0,0,0],o=!1);break;case oi.WEB_MERCATOR_AUTO_OFFSET:e===ri.LNGLAT?r=i:e===ri.CARTESIAN&&(r=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],i=t.unprojectPosition(r),r[0]-=n[0],r[1]-=n[1],r[2]-=n[2]);break;case oi.IDENTITY:r=t.position.map(Math.fround),r[2]=r[2]||0;break;case oi.GLOBE:o=!1,i=null;break;default:o=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:r,offsetMode:o}}class vA extends _i{toString(){let t="[";if(pi.printRowMajor){t+="row-major:";for(let e=0;e<this.RANK;++e)for(let n=0;n<this.RANK;++n)t+=` ${this[n*this.RANK+e]}`}else{t+="column-major:";for(let e=0;e<this.ELEMENTS;++e)t+=` ${this[e]}`}return t+="]",t}getElementIndex(t,e){return e*this.RANK+t}getElement(t,e){return this[e*this.RANK+t]}setElement(t,e,n){return this[e*this.RANK+t]=vi(n),this}getColumn(t,e=new Array(this.RANK).fill(-0)){const n=t*this.RANK;for(let t=0;t<this.RANK;++t)e[t]=this[n+t];return e}setColumn(t,e){const n=t*this.RANK;for(let t=0;t<this.RANK;++t)this[n+t]=e[t];return this}}function BA(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function wA(t){const e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function bA(t,e,n,i){const r=e[0],o=e[1];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t}function QA(t,e,n){const i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t}const xA=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t};!function(){const t=function(){const t=new xi(2);return xi!=Float32Array&&(t[0]=0,t[1]=0),t}()}();var DA;!function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"}(DA||(DA={}));const SA=45*Math.PI/180,MA=1,kA=.1,RA=500,NA=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class PA extends vA{static get IDENTITY(){return function(){LA||(LA=new PA,Object.freeze(LA));return LA}()}static get ZERO(){return function(){TA||(TA=new PA([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(TA));return TA}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return DA}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,e,n,i,r,o,s,a,A,l,c,u,h,g,d,p){return this[0]=t,this[1]=e,this[2]=n,this[3]=i,this[4]=r,this[5]=o,this[6]=s,this[7]=a,this[8]=A,this[9]=l,this[10]=c,this[11]=u,this[12]=h,this[13]=g,this[14]=d,this[15]=p,this.check()}setRowMajor(t,e,n,i,r,o,s,a,A,l,c,u,h,g,d,p){return this[0]=t,this[1]=r,this[2]=A,this[3]=h,this[4]=e,this[5]=o,this[6]=l,this[7]=g,this[8]=n,this[9]=s,this[10]=c,this[11]=d,this[12]=i,this[13]=a,this[14]=u,this[15]=p,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(NA)}fromObject(t){return this.check()}fromQuaternion(t){return function(t,e){const n=e[0],i=e[1],r=e[2],o=e[3],s=n+n,a=i+i,A=r+r,l=n*s,c=i*s,u=i*a,h=r*s,g=r*a,d=r*A,p=o*s,f=o*a,m=o*A;t[0]=1-u-d,t[1]=c+m,t[2]=h-f,t[3]=0,t[4]=c-m,t[5]=1-l-d,t[6]=g+p,t[7]=0,t[8]=h+f,t[9]=g-p,t[10]=1-l-u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this,t),this.check()}frustum(t){const{left:e,right:n,bottom:i,top:r,near:o=kA,far:s=RA}=t;return s===1/0?function(t,e,n,i,r,o){const s=2*o/(n-e),a=2*o/(r-i),A=(n+e)/(n-e),l=(r+i)/(r-i),c=-1,u=-1,h=-2*o;t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=A,t[9]=l,t[10]=c,t[11]=u,t[12]=0,t[13]=0,t[14]=h,t[15]=0}(this,e,n,i,r,o):function(t,e,n,i,r,o,s){const a=1/(n-e),A=1/(r-i),l=1/(o-s);t[0]=2*o*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*A,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(r+i)*A,t[10]=(s+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*l,t[15]=0}(this,e,n,i,r,o,s),this.check()}lookAt(t){const{eye:e,center:n=[0,0,0],up:i=[0,1,0]}=t;return function(t,e,n,i){let r,o,s,a,A,l,c,u,h,g;const d=e[0],p=e[1],f=e[2],m=i[0],I=i[1],y=i[2],C=n[0],E=n[1],_=n[2];Math.abs(d-C)<Qi&&Math.abs(p-E)<Qi&&Math.abs(f-_)<Qi?function(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(t):(u=d-C,h=p-E,g=f-_,r=1/Math.sqrt(u*u+h*h+g*g),u*=r,h*=r,g*=r,o=I*g-y*h,s=y*u-m*g,a=m*h-I*u,r=Math.sqrt(o*o+s*s+a*a),r?(r=1/r,o*=r,s*=r,a*=r):(o=0,s=0,a=0),A=h*a-g*s,l=g*o-u*a,c=u*s-h*o,r=Math.sqrt(A*A+l*l+c*c),r?(r=1/r,A*=r,l*=r,c*=r):(A=0,l=0,c=0),t[0]=o,t[1]=A,t[2]=u,t[3]=0,t[4]=s,t[5]=l,t[6]=h,t[7]=0,t[8]=a,t[9]=c,t[10]=g,t[11]=0,t[12]=-(o*d+s*p+a*f),t[13]=-(A*d+l*p+c*f),t[14]=-(u*d+h*p+g*f),t[15]=1)}(this,e,n,i),this.check()}ortho(t){const{left:e,right:n,bottom:i,top:r,near:o=kA,far:s=RA}=t;return pA(this,e,n,i,r,o,s),this.check()}orthographic(t){const{fovy:e=SA,aspect:n=MA,focalDistance:i=1,near:r=kA,far:o=RA}=t;FA(e);const s=e/2,a=i*Math.tan(s),A=a*n;return this.ortho({left:-A,right:A,bottom:-a,top:a,near:r,far:o})}perspective(t){const{fovy:e=45*Math.PI/180,aspect:n=1,near:i=.1,far:r=500}=t;return FA(e),dA(this,e,n,i,r),this.check()}determinant(){return function(t){const e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],s=t[5],a=t[6],A=t[7],l=t[8],c=t[9],u=t[10],h=t[11],g=t[12],d=t[13],p=t[14],f=e*s-n*o,m=e*a-i*o,I=n*a-i*s,y=l*d-c*g,C=l*p-u*g,E=c*p-u*d;return A*(e*E-n*C+i*y)-r*(o*E-s*C+a*y)+t[15]*(l*I-c*m+u*f)-h*(g*I-d*m+p*f)}(this)}getScale(t=[-0,-0,-0]){return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(t=[-0,-0,-0]){return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];const n=this.getScale(e),i=1/n[0],r=1/n[1],o=1/n[2];return t[0]=this[0]*i,t[1]=this[1]*r,t[2]=this[2]*o,t[3]=0,t[4]=this[4]*i,t[5]=this[5]*r,t[6]=this[6]*o,t[7]=0,t[8]=this[8]*i,t[9]=this[9]*r,t[10]=this[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];const n=this.getScale(e),i=1/n[0],r=1/n[1],o=1/n[2];return t[0]=this[0]*i,t[1]=this[1]*r,t[2]=this[2]*o,t[3]=this[4]*i,t[4]=this[5]*r,t[5]=this[6]*o,t[6]=this[8]*i,t[7]=this[9]*r,t[8]=this[10]*o,t}transpose(){return function(t,e){if(t===e){const n=e[1],i=e[2],r=e[3],o=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=o,t[11]=e[14],t[12]=r,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(this,this),this.check()}invert(){return AA(this,this),this.check()}multiplyLeft(t){return lA(this,t,this),this.check()}multiplyRight(t){return lA(this,this,t),this.check()}rotateX(t){return hA(this,this,t),this.check()}rotateY(t){return function(t,e,n){const i=Math.sin(n),r=Math.cos(n),o=e[0],s=e[1],a=e[2],A=e[3],l=e[8],c=e[9],u=e[10],h=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r-l*i,t[1]=s*r-c*i,t[2]=a*r-u*i,t[3]=A*r-h*i,t[8]=o*i+l*r,t[9]=s*i+c*r,t[10]=a*i+u*r,t[11]=A*i+h*r}(this,this,t),this.check()}rotateZ(t){return gA(this,this,t),this.check()}rotateXYZ(t){return this.rotateX(t[0]).rotateY(t[1]).rotateZ(t[2])}rotateAxis(t,e){return function(t,e,n,i){let r,o,s,a,A,l,c,u,h,g,d,p,f,m,I,y,C,E,_,v,B,w,b,Q,x=i[0],D=i[1],S=i[2],M=Math.sqrt(x*x+D*D+S*S);M<Qi||(M=1/M,x*=M,D*=M,S*=M,o=Math.sin(n),r=Math.cos(n),s=1-r,a=e[0],A=e[1],l=e[2],c=e[3],u=e[4],h=e[5],g=e[6],d=e[7],p=e[8],f=e[9],m=e[10],I=e[11],y=x*x*s+r,C=D*x*s+S*o,E=S*x*s-D*o,_=x*D*s-S*o,v=D*D*s+r,B=S*D*s+x*o,w=x*S*s+D*o,b=D*S*s-x*o,Q=S*S*s+r,t[0]=a*y+u*C+p*E,t[1]=A*y+h*C+f*E,t[2]=l*y+g*C+m*E,t[3]=c*y+d*C+I*E,t[4]=a*_+u*v+p*B,t[5]=A*_+h*v+f*B,t[6]=l*_+g*v+m*B,t[7]=c*_+d*v+I*B,t[8]=a*w+u*b+p*Q,t[9]=A*w+h*b+f*Q,t[10]=l*w+g*b+m*Q,t[11]=c*w+d*b+I*Q,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this,this,t,e),this.check()}scale(t){return uA(this,this,Array.isArray(t)?t:[t,t,t]),this.check()}translate(t){return cA(this,this,t),this.check()}transform(t,e){return 4===t.length?(Bi(e=aA(e||[-0,-0,-0,-0],t,this),4),e):this.transformAsPoint(t,e)}transformAsPoint(t,e){const{length:n}=t;let i;switch(n){case 2:i=QA(e||[-0,-0],t,this);break;case 3:i=Si(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Bi(i,t.length),i}transformAsVector(t,e){let n;switch(t.length){case 2:n=Pi(e||[-0,-0],t,this);break;case 3:n=Ti(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Bi(n,t.length),n}transformPoint(t,e){return this.transformAsPoint(t,e)}transformVector(t,e){return this.transformAsPoint(t,e)}transformDirection(t,e){return this.transformAsVector(t,e)}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,e,n){return this.identity().translate([t,e,n])}}let TA,LA;function FA(t){if(t>2*Math.PI)throw Error("expected radians")}function OA(t,e){const n=aA([],e,t);return sA(n,n,1/n[3]),n}function GA(t,e){const n=t%e;return n<0?e+n:n}function UA(t,e,n){return t<e?e:t>n?n:t}const jA=Math.log2||function(t){return Math.log(t)*Math.LOG2E};function YA(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const KA=Math.PI,zA=KA/4,JA=KA/180,qA=180/KA,HA=512,VA=4003e4,WA=85.051129,ZA=1.5;function XA(t){return Math.pow(2,t)}function $A(t){return jA(t)}function tl(t){const[e,n]=t;YA(Number.isFinite(e)),YA(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const i=n*JA;return[HA*(e*JA+KA)/(2*KA),HA*(KA+Math.log(Math.tan(zA+.5*i)))/(2*KA)]}function el(t){const[e,n]=t,i=e/HA*(2*KA)-KA,r=2*(Math.atan(Math.exp(n/HA*(2*KA)-KA))-zA);return[i*qA,r*qA]}function nl(t){const e=Math.cos(t*JA);return HA/VA/e}function il(t){const{latitude:e,longitude:n,highPrecision:i=!1}=t;YA(Number.isFinite(e)&&Number.isFinite(n));const r=HA,o=Math.cos(e*JA),s=r/360,a=s/o,A=r/VA/o,l={unitsPerMeter:[A,A,A],metersPerUnit:[1/A,1/A,1/A],unitsPerDegree:[s,a,A],degreesPerUnit:[1/s,1/a,1/A]};if(i){const t=JA*Math.tan(e*JA)/o,n=s*t/2,i=r/VA*t,c=i/a*A;l.unitsPerDegree2=[0,n,i],l.unitsPerMeter2=[c,0,c]}return l}function rl(t,e){const[n,i,r]=t,[o,s,a]=e,{unitsPerMeter:A,unitsPerMeter2:l}=il({longitude:n,latitude:i,highPrecision:!0}),c=tl(t);c[0]+=o*(A[0]+l[0]*s),c[1]+=s*(A[1]+l[1]*s);const u=el(c),h=(r||0)+(a||0);return Number.isFinite(r)||Number.isFinite(a)?[u[0],u[1],h]:u}function ol(t){const{width:e,height:n,altitude:i,pitch:r=0,offset:o,center:s,scale:a,nearZMultiplier:A=1,farZMultiplier:l=1}=t;let{fovy:c=sl(ZA)}=t;void 0!==i&&(c=sl(i));const u=c*JA,h=r*JA,g=al(c);let d=g;s&&(d+=s[2]*a/Math.cos(h)/n);const p=u*(.5+(o?o[1]:0)/n),f=Math.sin(p)*d/Math.sin(UA(Math.PI/2-h-p,.01,Math.PI-.01)),m=Math.sin(h)*f+d,I=10*d;return{fov:u,aspect:e/n,focalDistance:g,near:A,far:Math.min(m*l,I)}}function sl(t){return 2*Math.atan(.5/t)*qA}function al(t){return.5/Math.tan(.5*t*JA)}function Al(t,e){const[n,i,r=0]=t;return YA(Number.isFinite(n)&&Number.isFinite(i)&&Number.isFinite(r)),OA(e,[n,i,r,1])}function ll(t,e,n=0){const[i,r,o]=t;if(YA(Number.isFinite(i)&&Number.isFinite(r),"invalid pixel coordinate"),Number.isFinite(o)){return OA(e,[i,r,o,1])}const s=OA(e,[i,r,0,1]),a=OA(e,[i,r,1,1]),A=s[2],l=a[2];return bA([],s,a,A===l?0:((n||0)-A)/(l-A))}function cl(t){const{width:e,height:n,bounds:i,minExtent:r=0,maxZoom:o=24,offset:s=[0,0]}=t,[[a,A],[l,c]]=i,u=function(t=0){if("number"==typeof t)return{top:t,bottom:t,left:t,right:t};return YA(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t}(t.padding),h=tl([a,UA(c,-85.051129,WA)]),g=tl([l,UA(A,-85.051129,WA)]),d=[Math.max(Math.abs(g[0]-h[0]),r),Math.max(Math.abs(g[1]-h[1]),r)],p=[e-u.left-u.right-2*Math.abs(s[0]),n-u.top-u.bottom-2*Math.abs(s[1])];YA(p[0]>0&&p[1]>0);const f=p[0]/d[0],m=p[1]/d[1],I=(u.right-u.left)/2/f,y=(u.top-u.bottom)/2/m,C=el([(g[0]+h[0])/2+I,(g[1]+h[1])/2+y]),E=Math.min(o,jA(Math.abs(Math.min(f,m))));return YA(Number.isFinite(E)),{longitude:C[0],latitude:C[1],zoom:E}}const ul=Math.PI/180;function hl(t,e,n){const{pixelUnprojectionMatrix:i}=t,r=OA(i,[e,0,1,1]),o=OA(i,[e,t.height,1,1]),s=el(bA([],r,o,(n*t.distanceScales.unitsPerMeter[2]-r[2])/(o[2]-r[2])));return s.push(n),s}const gl=.01,dl=["longitude","latitude","zoom"],pl={curve:1.414,speed:1.2};function fl(t,e,n){const i=(n=Object.assign({},pl,n)).curve,r=t.zoom,o=[t.longitude,t.latitude],s=XA(r),a=e.zoom,A=[e.longitude,e.latitude],l=XA(a-r),c=tl(o),u=tl(A),h=xA([],u,c),g=Math.max(t.width,t.height),d=g/l,p=wA(h)*s,f=Math.max(p,gl),m=i*i,I=(d*d-g*g+m*m*f*f)/(2*g*m*f),y=(d*d-g*g-m*m*f*f)/(2*d*m*f),C=Math.log(Math.sqrt(I*I+1)-I),E=Math.log(Math.sqrt(y*y+1)-y);return{startZoom:r,startCenterXY:c,uDelta:h,w0:g,u1:p,S:(E-C)/i,rho:i,rho2:m,r0:C,r1:E}}const ml=Math.PI/180,Il=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],yl=[0,0,0],Cl={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class El{static{this.displayName="Viewport"}constructor(t={}){this._frustumPlanes={},this.id=t.id||this.constructor.displayName||"viewport",this.x=t.x||0,this.y=t.y||0,this.width=t.width||1,this.height=t.height||1,this.zoom=t.zoom||0,this.padding=t.padding,this.distanceScales=t.distanceScales||Cl,this.focalDistance=t.focalDistance||1,this.position=t.position||yl,this.modelMatrix=t.modelMatrix||null;const{longitude:e,latitude:n}=t;this.isGeospatial=Number.isFinite(n)&&Number.isFinite(e),this._initProps(t),this._initMatrices(t),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?oi.WEB_MERCATOR:oi.WEB_MERCATOR_AUTO_OFFSET:oi.IDENTITY}equals(t){return t instanceof El&&(this===t||t.width===this.width&&t.height===this.height&&t.scale===this.scale&&Ci(t.projectionMatrix,this.projectionMatrix)&&Ci(t.viewMatrix,this.viewMatrix))}project(t,{topLeft:e=!0}={}){const n=Al(this.projectPosition(t),this.pixelProjectionMatrix),[i,r]=n,o=e?r:this.height-r;return 2===t.length?[i,o]:[i,o,n[2]]}unproject(t,{topLeft:e=!0,targetZ:n}={}){const[i,r,o]=t,s=e?r:this.height-r,a=n&&n*this.distanceScales.unitsPerMeter[2],A=ll([i,s,o],this.pixelUnprojectionMatrix,a),[l,c,u]=this.unprojectPosition(A);return Number.isFinite(o)?[l,c,u]:Number.isFinite(n)?[l,c,n]:[l,c]}projectPosition(t){const[e,n]=this.projectFlat(t);return[e,n,(t[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(t){const[e,n]=this.unprojectFlat(t);return[e,n,(t[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(t){if(this.isGeospatial){const e=tl(t);return e[1]=Ii(e[1],-318,830),e}return t}unprojectFlat(t){return this.isGeospatial?el(t):t}getBounds(t={}){const e={targetZ:t.z||0},n=this.unproject([0,0],e),i=this.unproject([this.width,0],e),r=this.unproject([0,this.height],e),o=this.unproject([this.width,this.height],e);return[Math.min(n[0],i[0],r[0],o[0]),Math.min(n[1],i[1],r[1],o[1]),Math.max(n[0],i[0],r[0],o[0]),Math.max(n[1],i[1],r[1],o[1])]}getDistanceScales(t){return t?il({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}containsPixel({x:t,y:e,width:n=1,height:i=1}){return t<this.x+this.width&&this.x<t+n&&e<this.y+this.height&&this.y<e+i}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,{left:Ui((t=this.viewProjectionMatrix)[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:Ui(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:Ui(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:Ui(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:Ui(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:Ui(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}),this._frustumPlanes;var t}panByPosition(t,e){return null}_initProps(t){const e=t.longitude,n=t.latitude;this.isGeospatial&&(Number.isFinite(t.zoom)||(this.zoom=function(t){const{latitude:e}=t;YA(Number.isFinite(e));const n=Math.cos(e*JA);return $A(VA*n)-9}({latitude:n})+Math.log2(this.focalDistance)),this.distanceScales=t.distanceScales||il({latitude:n,longitude:e}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:r,modelMatrix:o}=t;let s=yl;if(r&&(s=o?new PA(o).transformAsVector(r,[]):r),this.isGeospatial){const t=this.projectPosition([e,n,0]);this.center=new Oi(s).scale(this.distanceScales.unitsPerMeter).add(t)}else this.center=this.projectPosition(s)}_initMatrices(t){const{viewMatrix:e=Il,projectionMatrix:n=null,orthographic:i=!1,fovyRadians:r,fovy:o=75,near:s=.1,far:a=1e3,padding:A=null,focalDistance:l=1}=t;this.viewMatrixUncentered=e,this.viewMatrix=(new PA).multiplyRight(e).translate(new Oi(this.center).negate()),this.projectionMatrix=n||function({width:t,height:e,orthographic:n,fovyRadians:i,focalDistance:r,padding:o,near:s,far:a}){const A=t/e,l=n?(new PA).orthographic({fovy:i,aspect:A,focalDistance:r,near:s,far:a}):(new PA).perspective({fovy:i,aspect:A,near:s,far:a});if(o){const{left:n=0,right:i=0,top:r=0,bottom:s=0}=o,a=Ii((n+t-i)/2,0,t)-t/2,A=Ii((r+e-s)/2,0,e)-e/2;l[8]-=2*a/t,l[9]+=2*A/e}return l}({width:this.width,height:this.height,orthographic:i,fovyRadians:r||o*ml,focalDistance:l,padding:A,near:s,far:a});const c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var u;lA(c,c,this.projectionMatrix),lA(c,c,this.viewMatrix),this.viewProjectionMatrix=c,this.viewMatrixInverse=AA([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=[(u=this.viewMatrixInverse)[12],u[13],u[14]];const h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];uA(h,h,[this.width/2,-this.height/2,1]),cA(h,h,[1,-1,0]),lA(g,h,this.viewProjectionMatrix),this.pixelProjectionMatrix=g,this.pixelUnprojectionMatrix=AA([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||ii.warn("Pixel project matrix not invertible")()}}class _l extends El{static{this.displayName="WebMercatorViewport"}constructor(t={}){const{latitude:e=0,longitude:n=0,zoom:i=0,pitch:r=0,bearing:o=0,nearZMultiplier:s=.1,farZMultiplier:a=1.01,nearZ:A,farZ:l,orthographic:c=!1,projectionMatrix:u,repeat:h=!1,worldOffset:g=0,position:d,padding:p,legacyMeterSizes:f=!1}=t;let{width:m,height:I,altitude:y=1.5}=t;const C=Math.pow(2,i);let E;m=m||1,I=I||1;let _=null;if(u)y=u[5]/2,E=sl(y);else{let n;if(t.fovy?(E=t.fovy,y=al(E)):E=sl(y),p){const{top:t=0,bottom:e=0}=p;n=[0,Ii((t+I-e)/2,0,I)-I/2]}_=ol({width:m,height:I,scale:C,center:d&&[0,0,d[2]*nl(e)],offset:n,pitch:r,fovy:E,nearZMultiplier:s,farZMultiplier:a}),Number.isFinite(A)&&(_.near=A),Number.isFinite(l)&&(_.far=l)}let v=function(t){const{height:e,pitch:n,bearing:i,altitude:r,scale:o,center:s}=t,a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];cA(a,a,[0,0,-r]),hA(a,a,-n*JA),gA(a,a,i*JA);const A=o/e;return uA(a,a,[A,A,A]),s&&cA(a,a,function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}([],s)),a}({height:I,pitch:r,bearing:o,scale:C,altitude:y});if(g){v=(new PA).translate([512*g,0,0]).multiplyLeft(v)}super({...t,width:m,height:I,viewMatrix:v,longitude:n,latitude:e,zoom:i,..._,fovy:E,focalDistance:y}),this.latitude=e,this.longitude=n,this.zoom=i,this.pitch=r,this.bearing=o,this.altitude=y,this.fovy=E,this.orthographic=c,this._subViewports=h?[]:null,this._pseudoMeters=f,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const t=this.getBounds(),e=Math.floor((t[0]+180)/360),n=Math.ceil((t[2]-180)/360);for(let t=e;t<=n;t++){const e=t?new _l({...this,worldOffset:t}):this;this._subViewports.push(e)}}return this._subViewports}projectPosition(t){if(this._pseudoMeters)return super.projectPosition(t);const[e,n]=this.projectFlat(t);return[e,n,(t[2]||0)*nl(t[1])]}unprojectPosition(t){if(this._pseudoMeters)return super.unprojectPosition(t);const[e,n]=this.unprojectFlat(t);return[e,n,(t[2]||0)/nl(n)]}addMetersToLngLat(t,e){return rl(t,e)}panByPosition(t,e){const n=ll(e,this.pixelUnprojectionMatrix),i=BA([],this.projectFlat(t),function(t,e){return t[0]=-e[0],t[1]=-e[1],t}([],n)),r=BA([],this.center,i),[o,s]=this.unprojectFlat(r);return{longitude:o,latitude:s}}getBounds(t={}){const e=function(t,e=0){const{width:n,height:i,unproject:r}=t,o={targetZ:e},s=r([0,i],o),a=r([n,i],o);let A,l;return(t.fovy?.5*t.fovy*ul:Math.atan(.5/t.altitude))>(90-t.pitch)*ul-.01?(A=hl(t,0,e),l=hl(t,n,e)):(A=r([0,0],o),l=r([n,0],o)),[s,a,l,A]}(this,t.z||0);return[Math.min(e[0][0],e[1][0],e[2][0],e[3][0]),Math.min(e[0][1],e[1][1],e[2][1],e[3][1]),Math.max(e[0][0],e[1][0],e[2][0],e[3][0]),Math.max(e[0][1],e[1][1],e[2][1],e[3][1])]}fitBounds(t,e={}){const{width:n,height:i}=this,{longitude:r,latitude:o,zoom:s}=cl({width:n,height:i,bounds:t,...e});return new _l({width:n,height:i,longitude:r,latitude:o,zoom:s})}}const vl=[0,0,0];function Bl(t,e,n=!1){const i=e.projectPosition(t);if(n&&e instanceof _l){const[n,r,o=0]=t,s=e.getDistanceScales([n,r]);i[2]=o*s.unitsPerMeter[2]}return i}function wl(t,{viewport:e,modelMatrix:n,coordinateSystem:i,coordinateOrigin:r,offsetMode:o}){let[s,a,A=0]=t;switch(n&&([s,a,A]=aA([],[s,a,A,1],n)),i){case ri.LNGLAT:return Bl([s,a,A],e,o);case ri.LNGLAT_OFFSETS:return Bl([s+r[0],a+r[1],A+(r[2]||0)],e,o);case ri.METER_OFFSETS:return Bl(rl(r,[s,a,A]),e,o);case ri.CARTESIAN:default:return e.isGeospatial?[s+r[0],a+r[1],A+r[2]]:e.projectPosition([s,a,A])}}function bl(t,e){const{viewport:n,coordinateSystem:i,coordinateOrigin:r,modelMatrix:o,fromCoordinateSystem:s,fromCoordinateOrigin:a}=function(t){const{viewport:e,modelMatrix:n,coordinateOrigin:i}=t;let{coordinateSystem:r,fromCoordinateSystem:o,fromCoordinateOrigin:s}=t;return r===ri.DEFAULT&&(r=e.isGeospatial?ri.LNGLAT:ri.CARTESIAN),void 0===o&&(o=r),void 0===s&&(s=i),{viewport:e,coordinateSystem:r,coordinateOrigin:i,modelMatrix:n,fromCoordinateSystem:o,fromCoordinateOrigin:s}}(e),{autoOffset:A=!0}=e,{geospatialOrigin:l=vl,shaderCoordinateOrigin:c=vl,offsetMode:u=!1}=A?_A(n,i,r):{},h=wl(t,{viewport:n,modelMatrix:o,coordinateSystem:s,coordinateOrigin:a,offsetMode:u});if(u){const t=n.projectPosition(l||c);Mi(h,h,t)}return h}const Ql={minFilter:"linear",mipmapFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},xl={};function Dl(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!Dl(t[i],e[i],n-1))return!1;return!0}if(Array.isArray(e))return!1;if("object"==typeof t&&"object"==typeof e){const i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(const r of i){if(!e.hasOwnProperty(r))return!1;if(!Dl(t[r],e[r],n-1))return!1}return!0}return!1}const Sl={boolean:{validate:(t,e)=>!0,equal:(t,e,n)=>Boolean(t)===Boolean(e)},number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},color:{validate:(t,e)=>e.optional&&!t||Rl(t)&&(3===t.length||4===t.length),equal:(t,e,n)=>Dl(t,e,1)},accessor:{validate(t,e){const n=Nl(t);return"function"===n||n===Nl(e.value)},equal:(t,e,n)=>"function"==typeof e||Dl(t,e,1)},array:{validate:(t,e)=>e.optional&&!t||Rl(t),equal(t,e,n){const{compare:i}=n,r=Number.isInteger(i)?i:i?1:0;return i?Dl(t,e,r):t===e}},object:{equal(t,e,n){if(n.ignore)return!0;const{compare:i}=n,r=Number.isInteger(i)?i:i?1:0;return i?Dl(t,e,r):t===e}},function:{validate:(t,e)=>e.optional&&!t||"function"==typeof t,equal:(t,e,n)=>!n.compare&&!1!==n.ignore||t===e},data:{transform:(t,e,n)=>{if(!t)return t;const{dataTransform:i}=n.props;return i?i(t):"string"==typeof t.shape&&t.shape.endsWith("-table")&&Array.isArray(t.data)?t.data:t}},image:{transform:(t,e,n)=>{const i=n.context;return i&&i.device?function(t,e,n,i){if(n instanceof fr)return n;n.constructor&&"Object"!==n.constructor.name&&(n={data:n});let r=null;n.compressed&&(r={minFilter:"linear",mipmapFilter:n.data.length>1?"nearest":"linear"});const o=e.createTexture({...n,sampler:{...Ql,...r,...i}});return xl[o.id]=t,o}(n.id,i.device,t,{...e.parameters,...n.props.textureParameters}):null},release:(t,e,n)=>{var i,r;i=n.id,(r=t)&&r instanceof fr&&xl[r.id]===i&&(r.delete(),delete xl[r.id])}}};function Ml(t,e){switch(Nl(e)){case"object":return kl(t,e);case"array":return kl(t,{type:"array",value:e,compare:!1});case"boolean":return kl(t,{type:"boolean",value:e});case"number":return kl(t,{type:"number",value:e});case"function":return kl(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function kl(t,e){return"type"in e?{name:t,...Sl[e.type],...e}:"value"in e?{name:t,type:Nl(e.value),...e}:{name:t,type:"object",value:e}}function Rl(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function Nl(t){return Rl(t)?"array":null===t?"null":typeof t}const Pl="_mergedDefaultProps";function Tl(t,e){let n=Pl;if(e)for(const t of e){const e=t.constructor;e&&(n+=`:${e.extensionName||e.name}`)}const i=Ol(t,n);return i||(t[n]=function(t,e){const n=t.prototype;if(!n)return null;const i=Object.getPrototypeOf(t),r=Tl(i),o=Ol(t,"defaultProps")||{},s=function(t){const e={},n={},i={};for(const[r,o]of Object.entries(t)){const t=o?.deprecatedFor;if(t)i[r]=Array.isArray(t)?t:[t];else{const t=Ml(r,o);e[r]=t,n[r]=t.value}}return{propTypes:e,defaultProps:n,deprecatedProps:i}}(o),a=Object.assign(Object.create(null),r,s.defaultProps),A=Object.assign(Object.create(null),r?.[qa],s.propTypes),l=Object.assign(Object.create(null),r?.[Ha],s.deprecatedProps);for(const t of e){const e=Tl(t.constructor);e&&(Object.assign(a,e),Object.assign(A,e[qa]),Object.assign(l,e[Ha]))}(function(t,e){const n=function(t){const e=t.componentName;e||ii.warn(`${t.name}.componentName not specified`)();return e||t.name}(e);Object.defineProperties(t,{id:{writable:!0,value:n}})})(a,t),function(t,e){const n={},i={};for(const t in e){const r=e[t],{name:o,value:s}=r;r.async&&(n[o]=s,i[o]=Ll(o))}t[Va]=n,t[Wa]={},Object.defineProperties(t,i)}(a,A),function(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(t){const i=`${this.id}: ${n}`;for(const i of e[n])Fl(this,i)||(this[i]=t);ii.deprecated(i,e[n].join("/"))()}})}(a,l),a[qa]=A,a[Ha]=l,0!==e.length||Fl(t,"_propTypes")||(t._propTypes=A);return a}(t,e||[]))}function Ll(t){return{enumerable:!0,set(e){"string"==typeof e||e instanceof Promise||Xi(e)?this[Wa][t]=e:this[Za][t]=e},get(){if(this[Za]){if(t in this[Za]){return this[Za][t]||this[Va][t]}if(t in this[Wa]){const e=this[Ja]&&this[Ja].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[Va][t]}}return this[Va][t]}}}function Fl(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ol(t,e){return Fl(t,e)&&t[e]}let Gl=0;class Ul{static{this.componentName="Component"}static{this.defaultProps={}}constructor(...t){this.props=function(t,e){let n;for(let t=e.length-1;t>=0;t--){const i=e[t];"extensions"in i&&(n=i.extensions)}const i=Tl(t.constructor,n),r=Object.create(i);r[Ja]=t,r[Wa]={},r[Za]={};for(let t=0;t<e.length;++t){const n=e[t];for(const t in n)r[t]=n[t]}return Object.freeze(r),r}(this,t),this.id=this.props.id,this.count=Gl++}clone(t){const{props:e}=this,n={};for(const t in e[Va])t in e[Za]?n[t]=e[Za][t]:t in e[Wa]&&(n[t]=e[Wa][t]);return new this.constructor({...e,...n,...t})}}const jl=Object.freeze({});class Yl{constructor(t){this.component=t,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const t in this.asyncProps){const e=this.asyncProps[t];e&&e.type&&e.type.release&&e.type.release(e.resolvedValue,e.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||jl}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(t){return t in this.asyncProps}getAsyncProp(t){const e=this.asyncProps[t];return e&&e.resolvedValue}isAsyncPropLoading(t){if(t){const e=this.asyncProps[t];return Boolean(e&&e.pendingLoadCount>0&&e.pendingLoadCount!==e.resolvedLoadCount)}for(const t in this.asyncProps)if(this.isAsyncPropLoading(t))return!0;return!1}reloadAsyncProp(t,e){this._watchPromise(t,Promise.resolve(e))}setAsyncProps(t){this.component=t[Ja]||this.component;const e=t[Za]||{},n=t[Wa]||t,i=t[Va]||{};for(const t in e){const n=e[t];this._createAsyncPropData(t,i[t]),this._updateAsyncProp(t,n),e[t]=this.getAsyncProp(t)}for(const t in n){const e=n[t];this._createAsyncPropData(t,i[t]),this._updateAsyncProp(t,e)}}_fetch(t,e){return null}_onResolve(t,e){}_onError(t,e){}_updateAsyncProp(t,e){this._didAsyncInputValueChange(t,e)&&("string"==typeof e&&(e=this._fetch(t,e)),e instanceof Promise?this._watchPromise(t,e):Xi(e)?this._resolveAsyncIterable(t,e):this._setPropValue(t,e))}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const t in this.asyncProps)Object.defineProperty(this.oldAsyncProps,t,{enumerable:!0,value:this.oldProps[t]})}}_didAsyncInputValueChange(t,e){const n=this.asyncProps[t];return e!==n.resolvedValue&&e!==n.lastValue&&(n.lastValue=e,!0)}_setPropValue(t,e){this._freezeAsyncOldProps();const n=this.asyncProps[t];n&&(e=this._postProcessValue(n,e),n.resolvedValue=e,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}_setAsyncPropValue(t,e,n){const i=this.asyncProps[t];i&&n>=i.resolvedLoadCount&&void 0!==e&&(this._freezeAsyncOldProps(),i.resolvedValue=e,i.resolvedLoadCount=n,this.onAsyncPropUpdated(t,e))}_watchPromise(t,e){const n=this.asyncProps[t];if(n){n.pendingLoadCount++;const i=n.pendingLoadCount;e.then((e=>{this.component&&(e=this._postProcessValue(n,e),this._setAsyncPropValue(t,e,i),this._onResolve(t,e))})).catch((e=>{this._onError(t,e)}))}}async _resolveAsyncIterable(t,e){if("data"!==t)return void this._setPropValue(t,e);const n=this.asyncProps[t];if(!n)return;n.pendingLoadCount++;const i=n.pendingLoadCount;let r=[],o=0;for await(const n of e){if(!this.component)return;const{dataTransform:e}=this.component.props;r=e?e(n,r):r.concat(n),Object.defineProperty(r,"__diff",{enumerable:!1,value:[{startRow:o,endRow:r.length}]}),o=r.length,this._setAsyncPropValue(t,r,i)}this._onResolve(t,r)}_postProcessValue(t,e){const n=t.type;return n&&this.component&&(n.release&&n.release(t.resolvedValue,n,this.component),n.transform)?n.transform(e,n,this.component):e}_createAsyncPropData(t,e){if(!this.asyncProps[t]){const n=this.component&&this.component.props[qa];this.asyncProps[t]={type:n&&n[t],lastValue:null,resolvedValue:e,pendingLoadCount:0,resolvedLoadCount:0}}}}class Kl extends Yl{constructor({attributeManager:t,layer:e}){super(e),this.attributeManager=t,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(t,e){const n=this.layer,i=n?.props.fetch;return i?i(e,{propName:t,layer:n}):super._fetch(t,e)}_onResolve(t,e){const n=this.layer;if(n){const i=n.props.onDataLoad;"data"===t&&i&&i(e,{propName:t,layer:n})}}_onError(t,e){const n=this.layer;n&&n.raiseError(e,`loading ${t} of ${this.layer}`)}}const zl=t=>"boolean"==typeof t,Jl=t=>"function"==typeof t,ql=t=>null!==t&&"object"==typeof t,Hl=t=>ql(t)&&t.constructor==={}.constructor,Vl=t=>Boolean(t)&&"function"==typeof t[Symbol.iterator],Wl=t=>t&&"function"==typeof t[Symbol.asyncIterator],Zl=t=>"undefined"!=typeof Response&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,Xl=t=>"undefined"!=typeof Blob&&t instanceof Blob,$l=t=>t&&"object"==typeof t&&t.isBuffer,tc=t=>(t=>"undefined"!=typeof ReadableStream&&t instanceof ReadableStream||ql(t)&&Jl(t.tee)&&Jl(t.cancel)&&Jl(t.getReader))(t)||(t=>ql(t)&&Jl(t.read)&&Jl(t.pipe)&&zl(t.readable))(t);function ec(t,e){if(!t)throw new Error(e||"loader assertion failed.")}function nc(t){if(!t)return!1;Array.isArray(t)&&(t=t[0]);return Array.isArray(t?.extensions)}function ic(t){let e;return ec(t,"null loader"),ec(nc(t),"invalid loader"),Array.isArray(t)&&(e=t[1],t=t[0],t={...t,options:{...t.options,...e}}),(t?.parseTextSync||t?.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}let rc="";const oc={};class sc extends Error{constructor(t,e){super(t),this.reason=e.reason,this.url=e.url,this.response=e.response}reason;url;response}const ac=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,Ac=/^([-\w.]+\/[-\w.+]+)/;function lc(t,e){return t.toLowerCase()===e.toLowerCase()}function cc(t){const e=ac.exec(t);return e?e[1]:""}const uc=/\?.*/;function hc(t){return t.replace(uc,"")}function gc(t){if(Zl(t)){return t.url}if(Xl(t)){return t.name||""}return"string"==typeof t?t:""}function dc(t){if(Zl(t)){const e=t,n=e.headers.get("content-type")||"",i=hc(e.url);return function(t){const e=Ac.exec(t);return e?e[1]:t}(n)||cc(i)}if(Xl(t)){return t.type||""}return"string"==typeof t?cc(t):""}async function pc(t){if(Zl(t))return t;const e={},n=function(t){if(Zl(t))return t.headers["content-length"]||-1;if(Xl(t))return t.size;return"string"==typeof t?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}(t);n>=0&&(e["content-length"]=String(n));const i=gc(t),r=dc(t);r&&(e["content-type"]=r);const o=await async function(t){const e=5;if("string"==typeof t)return`data:,${t.slice(0,e)}`;if(t instanceof Blob){const e=t.slice(0,5);return await new Promise((t=>{const n=new FileReader;n.onload=e=>t(e?.target?.result),n.readAsDataURL(e)}))}if(t instanceof ArrayBuffer){const n=function(t){let e="";const n=new Uint8Array(t);for(let t=0;t<n.byteLength;t++)e+=String.fromCharCode(n[t]);return btoa(e)}(t.slice(0,e));return`data:base64,${n}`}return null}(t);o&&(e["x-first-bytes"]=o),"string"==typeof t&&(t=(new TextEncoder).encode(t));const s=new Response(t,{headers:e});return Object.defineProperty(s,"url",{value:i}),s}async function fc(t){if(!t.ok){const e=await async function(t){const e=function(t){if(t.length<50)return t;const e=t.slice(t.length-15);return`${t.substr(0,32)}...${e}`}(t.url);let n=`Failed to fetch resource (${t.status}) ${t.statusText}: ${e}`;n=n.length>100?`${n.slice(0,100)}...`:n;const i={reason:t.statusText,url:t.url,response:t};try{const e=t.headers.get("Content-Type");i.reason=e?.includes("application/json")?await t.json():t.text()}catch(t){}return new sc(n,i)}(t);throw e}}async function mc(t,e){if("string"==typeof t){const n=function(t){for(const e in oc)if(t.startsWith(e)){const n=oc[e];t=t.replace(e,n)}return t.startsWith("http://")||t.startsWith("https://")||(t=`${rc}${t}`),t}(t);return function(t){return!function(t){return t.startsWith("http:")||t.startsWith("https:")}(t)&&!function(t){return t.startsWith("data:")}(t)}(n)&&globalThis.loaders?.fetchNode?globalThis.loaders?.fetchNode(n,e):await fetch(n,e)}return await pc(t)}const Ic=new $n({id:"loaders.gl"});class yc{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}var Cc=g(8538);"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,"undefined"!=typeof global&&global,"undefined"!=typeof document&&document;const Ec=Boolean("object"!=typeof Cc||"[object process]"!==String(Cc)||Cc.browser),_c=void 0!==Cc&&Cc.version&&/v([0-9]*)/.exec(Cc.version),vc=(_c&&parseFloat(_c[1]),{fetch:null,mimeType:void 0,nothrow:!1,log:new class{console;constructor(){this.console=console}log(...t){return this.console.log.bind(this.console,...t)}info(...t){return this.console.info.bind(this.console,...t)}warn(...t){return this.console.warn.bind(this.console,...t)}error(...t){return this.console.error.bind(this.console,...t)}},useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:Ec,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]}),Bc={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function wc(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state||(t._state={}),t._state}function bc(){const t=wc();return t.globalOptions=t.globalOptions||{...vc},t.globalOptions}function Qc(t,e,n,i){return n=n||[],function(t,e){xc(t,null,vc,Bc,e);for(const n of e){const i=t&&t[n.id]||{},r=n.options&&n.options[n.id]||{},o=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};xc(i,n.id,r,o,e)}}(t,n=Array.isArray(n)?n:[n]),Sc(e,t,i)}function xc(t,e,n,i,r){const o=e||"Top level",s=e?`${e}.`:"";for(const a in t){const A=!e&&ql(t[a]);if(!(a in n)&&!("baseUri"===a&&!e)&&!("workerUrl"===a&&e))if(a in i)Ic.warn(`${o} loader option '${s}${a}' no longer supported, use '${i[a]}'`)();else if(!A){const t=Dc(a,r);Ic.warn(`${o} loader option '${s}${a}' not recognized. ${t}`)()}}}function Dc(t,e){const n=t.toLowerCase();let i="";for(const r of e)for(const e in r.options){if(t===e)return`Did you mean '${r.id}.${e}'?`;const o=e.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(i=i||`Did you mean '${r.id}.${e}'?`)}return i}function Sc(t,e,n){const i={...t.options||{}};return function(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}(i,n),null===i.log&&(i.log=new yc),Mc(i,bc()),Mc(i,e),i}function Mc(t,e){for(const n in e)if(n in e){const i=e[n];Hl(i)&&Hl(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function kc(t,e){const n=bc(),i=t||n;return"function"==typeof i.fetch?i.fetch:ql(i.fetch)?t=>mc(t,i.fetch):e?.fetch?e?.fetch:mc}var Rc=g(8538);"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,"undefined"!=typeof global&&global,"undefined"!=typeof document&&document;const Nc="object"!=typeof Rc||"[object process]"!==String(Rc)||Rc.browser,Pc="undefined"!=typeof window&&void 0!==window.orientation,Tc=void 0!==Rc&&Rc.version&&/v([0-9]*)/.exec(Rc.version);Tc&&parseFloat(Tc[1]);class Lc{terminate(){}}function Fc(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const Oc=new Map;function Gc(t){Fc(t.source&&!t.url||!t.source&&t.url);let e=Oc.get(t.source||t.url);return e||(t.url&&(e=function(t){if(!t.startsWith("http"))return t;return Uc((e=t,`try {\n  importScripts('${e}');\n} catch (error) {\n  console.error(error);\n  throw error;\n}`));var e}(t.url),Oc.set(t.url,e)),t.source&&(e=Uc(t.source),Oc.set(t.source,e))),Fc(e),e}function Uc(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function jc(t,e=!0,n){const i=n||new Set;if(t){if(Yc(t))i.add(t);else if(Yc(t.buffer))i.add(t.buffer);else if(ArrayBuffer.isView(t));else if(e&&"object"==typeof t)for(const n in t)jc(t[n],e,i)}else;return void 0===n?Array.from(i):[]}function Yc(t){return!!t&&(t instanceof ArrayBuffer||("undefined"!=typeof MessagePort&&t instanceof MessagePort||("undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas)))}const Kc=()=>{};class zc{name;source;url;terminated=!1;worker;onMessage;onError;_loadableURL="";static isSupported(){return"undefined"!=typeof Worker&&Nc||void 0!==Lc&&!Nc}constructor(t){const{name:e,source:n,url:i}=t;Fc(n||i),this.name=e,this.source=n,this.url=i,this.onMessage=Kc,this.onError=t=>console.log(t),this.worker=Nc?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=Kc,this.onError=Kc,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(t,e){e=e||jc(t),this.worker.postMessage(t,e)}_getErrorFromErrorEvent(t){let e="Failed to load ";return e+=`worker ${this.name} from ${this.url}. `,t.message&&(e+=`${t.message} in `),t.lineno&&(e+=`:${t.lineno}:${t.colno}`),new Error(e)}_createBrowserWorker(){this._loadableURL=Gc({source:this.source,url:this.url});const t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=t=>{t.data?this.onMessage(t.data):this.onError(new Error("No data received"))},t.onerror=t=>{this.onError(this._getErrorFromErrorEvent(t)),this.terminated=!0},t.onmessageerror=t=>console.error(t),t}_createNodeWorker(){let t;if(this.url){const e=this.url.includes(":/")||this.url.startsWith("/")?this.url:`./${this.url}`;t=new Lc(e,{eval:!1})}else{if(!this.source)throw new Error("no worker");t=new Lc(this.source,{eval:!0})}return t.on("message",(t=>{this.onMessage(t)})),t.on("error",(t=>{this.onError(t)})),t.on("exit",(t=>{})),t}}class Jc{name;workerThread;isRunning=!0;result;_resolve=()=>{};_reject=()=>{};constructor(t,e){this.name=t,this.workerThread=e,this.result=new Promise(((t,e)=>{this._resolve=t,this._reject=e}))}postMessage(t,e){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:e})}done(t){Fc(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){Fc(this.isRunning),this.isRunning=!1,this._reject(t)}}class qc{name="unnamed";source;url;maxConcurrency=1;maxMobileConcurrency=1;onDebug=()=>{};reuseWorkers=!0;props={};jobQueue=[];idleQueue=[];count=0;isDestroyed=!1;static isSupported(){return zc.isSupported()}constructor(t){this.source=t.source,this.url=t.url,this.setProps(t)}destroy(){this.idleQueue.forEach((t=>t.destroy())),this.isDestroyed=!0}setProps(t){this.props={...this.props,...t},void 0!==t.name&&(this.name=t.name),void 0!==t.maxConcurrency&&(this.maxConcurrency=t.maxConcurrency),void 0!==t.maxMobileConcurrency&&(this.maxMobileConcurrency=t.maxMobileConcurrency),void 0!==t.reuseWorkers&&(this.reuseWorkers=t.reuseWorkers),void 0!==t.onDebug&&(this.onDebug=t.onDebug)}async startJob(t,e=(t,e,n)=>t.done(n),n=(t,e)=>t.error(e)){const i=new Promise((i=>(this.jobQueue.push({name:t,onMessage:e,onError:n,onStart:i}),this)));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const t=this._getAvailableWorker();if(!t)return;const e=this.jobQueue.shift();if(e){this.onDebug({message:"Starting job",name:e.name,workerThread:t,backlog:this.jobQueue.length});const n=new Jc(e.name,t);t.onMessage=t=>e.onMessage(n,t.type,t.payload),t.onError=t=>e.onError(n,t),e.onStart(n);try{await n.result}catch(t){console.error(`Worker exception: ${t}`)}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){!Nc||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const t=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new zc({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return Pc?this.maxMobileConcurrency:this.maxConcurrency}}const Hc={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class Vc{props;workerPools=new Map;static _workerFarm;static isSupported(){return zc.isSupported()}static getWorkerFarm(t={}){return Vc._workerFarm=Vc._workerFarm||new Vc({}),Vc._workerFarm.setProps(t),Vc._workerFarm}constructor(t){this.props={...Hc},this.setProps(t),this.workerPools=new Map}destroy(){for(const t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){this.props={...this.props,...t};for(const t of this.workerPools.values())t.setProps(this._getWorkerPoolProps())}getWorkerPool(t){const{name:e,source:n,url:i}=t;let r=this.workerPools.get(e);return r||(r=new qc({name:e,source:n,url:i}),r.setProps(this._getWorkerPoolProps()),this.workerPools.set(e,r)),r}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}const Wc="latest";globalThis._loadersgl_?.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version="4.2.1"),globalThis._loadersgl_.version;async function Zc(t,e,n,i,r){const o=t.id,s=function(t,e={}){const n=e[t.id]||{},i=Nc?`${t.id}-worker.js`:`${t.id}-worker-node.js`;let r=n.workerUrl;if(r||"compression"!==t.id||(r=e.workerUrl),"test"===e._workerType&&(r=Nc?`modules/${t.module}/dist/${i}`:`modules/${t.module}/src/workers/${t.id}-worker-node.ts`),!r){let e=t.version;"latest"===e&&(e=Wc);const n=e?`@${e}`:"";r=`https://unpkg.com/@loaders.gl/${t.module}${n}/dist/${i}`}return Fc(r),r}(t,n),a=Vc.getWorkerFarm(n).getWorkerPool({name:o,url:s});n=JSON.parse(JSON.stringify(n)),i=JSON.parse(JSON.stringify(i||{}));const A=await a.startJob("process-on-worker",Xc.bind(null,r));A.postMessage("process",{input:e,options:n,context:i});const l=await A.result;return await l.result}async function Xc(t,e,n,i){switch(n){case"done":e.done(i);break;case"error":e.error(new Error(i.error));break;case"process":const{id:r,input:o,options:s}=i;try{const n=await t(o,s);e.postMessage("done",{id:r,result:n})}catch(t){const n=t instanceof Error?t.message:"unknown error";e.postMessage("error",{id:r,error:n})}break;default:console.warn(`parse-with-worker unknown message ${n}`)}}function $c(t,e){return tu(t||{},e)}function tu(t,e,n=0){if(n>3)return e;const i={...t};for(const[t,r]of Object.entries(e))r&&"object"==typeof r&&!Array.isArray(r)?i[t]=tu(i[t]||{},e[t],n+1):i[t]=e[t];return i}function eu(...t){return function(t){const e=t.map((t=>t instanceof ArrayBuffer?new Uint8Array(t):t)),n=e.reduce(((t,e)=>t+e.byteLength),0),i=new Uint8Array(n);let r=0;for(const t of e)i.set(t,r),r+=t.byteLength;return i.buffer}(t)}const nu=262144;const iu=262144;const ru=1048576;function ou(t){if((e=t)&&"object"==typeof e&&e.isBuffer)return t;var e;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return 0===t.byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if("string"==typeof t){const e=t;return(new TextEncoder).encode(e).buffer}if(t&&"object"==typeof t&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function su(t,e){return Ec?async function*(t,e){const n=t.getReader();let i;try{for(;;){const t=i||n.read();e?._streamReadAhead&&(i=n.read());const{done:r,value:o}=await t;if(r)return;yield ou(o)}}catch(t){n.releaseLock()}}(t,e):async function*(t){for await(const e of t)yield ou(e)}(t)}function au(t,e){if("string"==typeof t)return function*(t,e){const n=e?.chunkSize||nu;let i=0;const r=new TextEncoder;for(;i<t.length;){const e=Math.min(t.length-i,n),o=t.slice(i,i+e);i+=e,yield r.encode(o)}}(t,e);if(t instanceof ArrayBuffer)return function*(t,e={}){const{chunkSize:n=iu}=e;let i=0;for(;i<t.byteLength;){const e=Math.min(t.byteLength-i,n),r=new ArrayBuffer(e),o=new Uint8Array(t,i,e);new Uint8Array(r).set(o),i+=e,yield r}}(t,e);if(Xl(t))return async function*(t,e){const n=e?.chunkSize||ru;let i=0;for(;i<t.size;){const e=i+n,r=await t.slice(i,e).arrayBuffer();i=e,yield r}}(t,e);if(tc(t))return su(t,e);if(Zl(t)){return su(t.body,e)}throw new Error("makeIterator")}const Au="Cannot convert supplied data type";async function lu(t,e,n){const i=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if("string"==typeof t||i)return function(t,e){if(e.text&&"string"==typeof t)return t;if($l(t)&&(t=t.buffer),t instanceof ArrayBuffer){const n=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let n=t.buffer;const i=t.byteLength||t.length;return 0===t.byteOffset&&i===n.byteLength||(n=n.slice(t.byteOffset,t.byteOffset+i)),n}throw new Error(Au)}(t,e);if(Xl(t)&&(t=await pc(t)),Zl(t)){const n=t;return await fc(n),e.binary?await n.arrayBuffer():await n.text()}if(tc(t)&&(t=au(t,n)),Vl(t)||Wl(t))return async function(t){const e=[];for await(const n of t)e.push(n);return eu(...e)}(t);throw new Error(Au)}function cu(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function uu(t,e,n){if(n)return n;const i={fetch:kc(e,t),...t};if(i.url){const t=hc(i.url);i.baseUrl=t,i.queryString=function(t){const e=t.match(uc);return e&&e[0]}(i.url),i.filename=cu(t),i.baseUrl=function(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}(t)}return Array.isArray(i.loaders)||(i.loaders=null),i}const hu=new $n({id:"loaders.gl"}),gu=()=>{const t=wc();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};const du=/\.([^.]+)$/;function pu(t,e=[],n,i){if(!fu(t))return null;if(e&&!Array.isArray(e))return ic(e);let r=[];e&&(r=r.concat(e)),n?.ignoreRegisteredLoaders||r.push(...gu()),function(t){for(const e of t)ic(e)}(r);const o=function(t,e,n,i){const r=gc(t),o=dc(t),s=hc(r)||i?.url;let a=null,A="";n?.mimeType&&(a=Iu(e,n?.mimeType),A=`match forced by supplied MIME type ${n?.mimeType}`);a=a||function(t,e){const n=e&&du.exec(e),i=n&&n[1];return i?function(t,e){e=e.toLowerCase();for(const n of t)for(const t of n.extensions)if(t.toLowerCase()===e)return n;return null}(t,i):null}(e,s),A=A||(a?`matched url ${s}`:""),a=a||Iu(e,o),A=A||(a?`matched MIME type ${o}`:""),a=a||function(t,e){if(!e)return null;for(const n of t)if("string"==typeof e){if(yu(e,n))return n}else if(ArrayBuffer.isView(e)){if(Cu(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer){if(Cu(e,0,n))return n}return null}(e,t),A=A||(a?`matched initial data ${Eu(t)}`:""),n?.fallbackMimeType&&(a=a||Iu(e,n?.fallbackMimeType),A=A||(a?`matched fallback MIME type ${o}`:""));A&&hu.log(1,`selectLoader selected ${a?.name}: ${A}.`);return a}(t,r,n,i);if(!o&&!n?.nothrow)throw new Error(mu(t));return o}function fu(t){return!(t instanceof Response&&204===t.status)}function mu(t){const e=gc(t),n=dc(t);let i="No valid loader found (";i+=e?`${cu(e)}, `:"no url provided, ",i+=`MIME type: ${n?`"${n}"`:"not provided"}, `;const r=t?Eu(t):"";return i+=r?` first bytes: "${r}"`:"first bytes: not available",i+=")",i}function Iu(t,e){for(const n of t){if(n.mimeTypes?.some((t=>lc(e,t))))return n;if(lc(e,`application/x.${n.id}`))return n}return null}function yu(t,e){if(e.testText)return e.testText(t);return(Array.isArray(e.tests)?e.tests:[e.tests]).some((e=>t.startsWith(e)))}function Cu(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some((n=>function(t,e,n,i){if(i instanceof ArrayBuffer)return function(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const i=new Uint8Array(t),r=new Uint8Array(e);for(let t=0;t<i.length;++t)if(i[t]!==r[t])return!1;return!0}(i,t,i.byteLength);switch(typeof i){case"function":return i(t);case"string":return i===_u(t,e,i.length);default:return!1}}(t,e,0,n)))}function Eu(t,e=5){if("string"==typeof t)return t.slice(0,e);if(ArrayBuffer.isView(t))return _u(t.buffer,t.byteOffset,e);if(t instanceof ArrayBuffer){return _u(t,0,e)}return""}function _u(t,e,n){if(t.byteLength<e+n)return"";const i=new DataView(t);let r="";for(let t=0;t<n;t++)r+=String.fromCharCode(i.getUint8(e+t));return r}async function vu(t,e,n,i){!e||Array.isArray(e)||nc(e)||(i=void 0,n=e,e=void 0),n=n||{};const r=gc(t=await t),o=function(t,e){if(t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const t=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...t]:t}return n&&n.length?n:void 0}(e,i),s=await async function(t,e=[],n,i){if(!fu(t))return null;let r=pu(t,e,{...n,nothrow:!0},i);if(r)return r;if(Xl(t)&&(r=pu(t=await t.slice(0,10).arrayBuffer(),e,n,i)),!r&&!n?.nothrow)throw new Error(mu(t));return r}(t,o,n);return s?(i=uu({url:r,_parse:vu,loaders:o},n=Qc(n,s,o,r),i||null),await async function(t,e,n,i){if(function(t){Fc(t,"no worker provided");const e=t.version}(t),n=$c(t.options,n),Zl(e)){const t=e,{ok:n,redirected:r,status:o,statusText:s,type:a,url:A}=t,l=Object.fromEntries(t.headers.entries());i.response={headers:l,ok:n,redirected:r,status:o,statusText:s,type:a,url:A}}e=await lu(e,t,n);const r=t;if(r.parseTextSync&&"string"==typeof e)return r.parseTextSync(e,n,i);if(function(t,e){return!!Vc.isSupported()&&!(!Nc&&!e?._nodeWorkers)&&t.worker&&e?.worker}(t,n))return await Zc(t,e,n,i,vu);if(r.parseText&&"string"==typeof e)return await r.parseText(e,n,i);if(r.parse)return await r.parse(e,n,i);throw Fc(!r.parseSync),new Error(`${t.id} loader - no parser found and worker is disabled`)}(s,t,n,i)):null}async function Bu(t,e,n,i){let r,o;Array.isArray(e)||nc(e)?(r=e,o=n):(r=[],o=e);const s=kc(o);let a=t;return"string"==typeof t&&(a=await s(t)),Xl(t)&&(a=await s(t)),Array.isArray(r),await vu(a,r,o)}const wu=2**24-1,bu=Object.freeze([]),Qu=lr((({oldViewport:t,viewport:e})=>t.equals(e)));let xu=new Uint8ClampedArray(0);const Du={data:{type:"data",value:bu,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:i,loadOptions:r,signal:o})=>{const{resourceManager:s}=n.context;r=r||n.getLoadOptions(),i=i||n.props.loaders,o&&(r={...r,fetch:{...r?.fetch,signal:o}});let a=s.contains(t);return a||r||(s.add({resourceId:t,data:Bu(t,i),persistent:!1}),a=!0),a?s.subscribe({resourceId:t,onChange:t=>n.internalState?.reloadAsyncProp(e,t),consumerId:n.id,requestId:e}):Bu(t,i,r)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:ri.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,100*-t]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Su extends Ul{constructor(){super(...arguments),this.internalState=null,this.lifecycle=Ga,this.parent=null}static{this.defaultProps=Du}static{this.layerName="Layer"}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let t=this;for(;t.parent;)t=t.parent;return t}toString(){return`${this.constructor.layerName||this.constructor.name}({id: '${this.props.id}'})`}project(t){Hi(this.internalState);const e=this.internalState.viewport||this.context.viewport,n=wl(t,{viewport:e,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,r,o]=Al(n,e.pixelProjectionMatrix);return 2===t.length?[i,r]:[i,r,o]}unproject(t){Hi(this.internalState);return(this.internalState.viewport||this.context.viewport).unproject(t)}projectPosition(t,e){Hi(this.internalState);return bl(t,{viewport:this.internalState.viewport||this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...e})}get isComposite(){return!1}setState(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){const t=this.state;return t&&(t.models||t.model&&[t.model])||[]}setModuleParameters(t){for(const e of this.getModels())e.updateModuleSettings(t)}setShaderModuleProps(...t){for(const e of this.getModels())e.shaderInputs.setProps(...t)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:t}=this.props;return t===ri.DEFAULT||t===ri.LNGLAT||t===ri.CARTESIAN}onHover(t,e){return this.props.onHover&&this.props.onHover(t,e)||!1}onClick(t,e){return this.props.onClick&&this.props.onClick(t,e)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(t,e=[]){return e[0]=t+1&255,e[1]=t+1>>8&255,e[2]=t+1>>8>>8&255,e}decodePickingColor(t){Hi(t instanceof Uint8Array);const[e,n,i]=t;return e+256*n+65536*i-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:rA(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){return this.getAttributeManager()?.getBounds(["positions","instancePositions"])}getShaders(t){t=oA(t,{disableWarnings:!0,modules:this.context.defaultShaderModules});for(const e of this.props.extensions)t=oA(t,e.getShaders.call(this,e));return t}shouldUpdateState(t){return t.changeFlags.propsOrDataChanged}updateState(t){const e=this.getAttributeManager(),{dataChanged:n}=t.changeFlags;if(n&&e)if(Array.isArray(n))for(const t of n)e.invalidateAll(t);else e.invalidateAll();if(e){const{props:n}=t,i=this.internalState.hasPickingBuffer,r=Number.isInteger(n.highlightedObjectIndex)||n.pickable||n.extensions.some((t=>t.getNeedsPickingBuffer.call(this,t)));if(i!==r){this.internalState.hasPickingBuffer=r;const{pickingColors:t,instancePickingColors:n}=e.attributes,i=t||n;i&&(r&&i.constant&&(i.constant=!1,e.invalidate(i.id)),i.value||r||(i.constant=!0,i.value=[0,0,0]))}}}finalizeState(t){for(const t of this.getModels())t.destroy();const e=this.getAttributeManager();e&&e.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(t){for(const e of this.getModels())e.draw(t)}getPickingInfo({info:t,mode:e,sourceLayer:n}){const{index:i}=t;return i>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[i]),t}raiseError(t,e){e&&(t=new Error(`${e}: ${t.message}`,{cause:t})),this.props.onError?.(t)||this.context?.onError?.(t,this)}getNeedsRedraw(t={clearRedrawFlags:!1}){return this._getNeedsRedraw(t)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){return this.internalState?.uniformTransitions.active||!1}activateViewport(t){if(!this.internalState)return;const e=this.internalState.viewport;this.internalState.viewport=t,e&&Qu({oldViewport:e,viewport:t})||(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(t="all"){const e=this.getAttributeManager();e&&("all"===t?e.invalidateAll():e.invalidate(t))}updateAttributes(t){let e=!1;for(const n in t)t[n].layoutChanged()&&(e=!0);for(const n of this.getModels())this._setModelAttributes(n,t,e)}_updateAttributes(){const t=this.getAttributeManager();if(!t)return;const e=this.props,n=this.getNumInstances(),i=this.getStartIndices();t.update({data:e.data,numInstances:n,startIndices:i,props:e,transitions:e.transitions,buffers:e.data.attributes,context:this});const r=t.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(r)}_updateAttributeTransition(){const t=this.getAttributeManager();t&&t.updateTransition()}_updateUniformTransition(){const{uniformTransitions:t}=this.internalState;if(t.active){const e=t.update(),n=Object.create(this.props);for(const t in e)Object.defineProperty(n,t,{value:e[t]});return n}return this.props}calculateInstancePickingColors(t,{numInstances:e}){if(t.constant)return;const n=Math.floor(xu.length/4);if(this.internalState.usesPickingColorCache=!0,n<e){e>wu&&ii.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),xu=di.allocate(xu,e,{size:4,copy:!0,maxCount:Math.max(e,wu)});const t=Math.floor(xu.length/4),i=[];for(let e=n;e<t;e++)this.encodePickingColor(e,i),xu[4*e+0]=i[0],xu[4*e+1]=i[1],xu[4*e+2]=i[2]}t.value=xu.subarray(0,4*e)}_setModelAttributes(t,e,n=!1){if(!Object.keys(e).length)return;if(n){const n=this.getAttributeManager();t.setBufferLayout(n.getBufferLayouts(t)),e=n.getAttributes()}const i=t.userData?.excludeAttributes||{},r={},o={};for(const n in e){if(i[n])continue;const s=e[n].getValue();for(const i in s){const a=s[i];a instanceof Rn?e[n].settings.isIndexed?t.setIndexBuffer(a):r[i]=a:a&&(o[i]=a)}}t.setAttributes(r),t.setConstantAttributes(o)}disablePickingIndex(t){const e=this.props.data;if(!("attributes"in e))return void this._disablePickingIndex(t);const{pickingColors:n,instancePickingColors:i}=this.getAttributeManager().attributes,r=n||i,o=r&&e.attributes&&e.attributes[r.id];if(o&&o.value){const n=o.value,i=this.encodePickingColor(t);for(let t=0;t<e.length;t++){const e=r.getVertexOffset(t);n[e]===i[0]&&n[e+1]===i[1]&&n[e+2]===i[2]&&this._disablePickingIndex(t)}}else this._disablePickingIndex(t)}_disablePickingIndex(t){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,i=e||n;if(!i)return;const r=i.getVertexOffset(t),o=i.getVertexOffset(t+1);i.buffer.write(new Uint8Array(o-r),r)}restorePickingColors(){const{pickingColors:t,instancePickingColors:e}=this.getAttributeManager().attributes,n=t||e;n&&(this.internalState.usesPickingColorCache&&n.value.buffer!==xu.buffer&&(n.value=xu.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0}))}_initialize(){Hi(!this.internalState),Hi(Number.isFinite(this.props.coordinateSystem)),hr("layer.initialize",this);const t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:"uint8",size:4,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new Kl({attributeManager:t,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(ii.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),t)}),this.internalState.uniformTransitions=new Oa(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const t of this.props.extensions)t.initializeState.call(this,this.context,t);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(t){hr("layer.matched",this,this===t);const{state:e,internalState:n}=t;this!==t&&(this.internalState=n,this.state=e,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const t=this.needsUpdate();if(hr("layer.update",this,t),!t)return;const e=this.props,n=this.context,i=this.internalState,r=n.viewport,o=this._updateUniformTransition();i.propsInTransition=o,n.viewport=i.viewport||r,this.props=o;try{const t=this._getUpdateParams(),e=this.getModels();if(n.device)this.updateState(t);else try{this.updateState(t)}catch(t){}for(const e of this.props.extensions)e.updateState.call(this,t,e);const i=this.getModels()[0]!==e[0];this._postUpdate(t,i)}finally{n.viewport=r,this.props=e,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){hr("layer.finalize",this),this.finalizeState(this.context);for(const t of this.props.extensions)t.finalizeState.call(this,this.context,t)}_drawLayer({renderPass:t,moduleParameters:e=null,uniforms:n={},parameters:i={}}){this._updateAttributeTransition();const r=this.props,o=this.context;this.props=this.internalState.propsInTransition||r;const s=this.props.opacity;n.opacity=Math.pow(s,1/2.2);try{if(e){const{isActive:t,isAttribute:n}=e.picking;this.setModuleParameters(e),this.setShaderModuleProps({picking:{isActive:t,isAttribute:n}})}const{getPolygonOffset:r}=this.props,s=r&&r(n)||[0,0];o.device.setParametersWebGL({polygonOffset:s});for(const t of this.getModels())t.setParameters(i);o.device.withParametersWebGL(i,(()=>{const r={renderPass:t,moduleParameters:e,uniforms:n,parameters:i,context:o};for(const t of this.props.extensions)t.draw.call(this,r,t);this.draw(r)}))}finally{this.props=r}}getChangeFlags(){return this.internalState?.changeFlags}setChangeFlags(t){if(!this.internalState)return;const{changeFlags:e}=this.internalState;for(const n in t)if(t[n]){let i=!1;if("dataChanged"===n){const r=t[n],o=e[n];r&&Array.isArray(o)&&(e.dataChanged=Array.isArray(r)?o.concat(r):r,i=!0)}e[n]||(e[n]=t[n],i=!0),i&&hr("layer.changeFlag",this,n,t)}const n=Boolean(e.dataChanged||e.updateTriggersChanged||e.propsChanged||e.extensionsChanged);e.propsOrDataChanged=n,e.somethingChanged=n||e.viewportChanged||e.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(t,e){const n=Xa(t,e);if(n.updateTriggersChanged)for(const t in n.updateTriggersChanged)n.updateTriggersChanged[t]&&this.invalidateAttribute(t);if(n.transitionsChanged)for(const i in n.transitionsChanged)this.internalState.uniformTransitions.add(i,e[i],t[i],t.transitions?.[i]);return this.setChangeFlags(n)}validateProps(){!function(t){const e=t[qa];for(const n in e){const i=e[n],{validate:r}=i;if(r&&!r(t[n],i))throw new Error(`Invalid prop ${n}: ${t[n]}`)}}(this.props)}updateAutoHighlight(t){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(t)}_updateAutoHighlight(t){const e={highlightedObjectColor:t.picked?t.color:null},{highlightColor:n}=this.props;t.picked&&"function"==typeof n&&(e.highlightColor=n(t)),this.setShaderModuleProps({picking:e}),this.setNeedsRedraw()}_getAttributeManager(){const t=this.context;return new Na(t.device,{id:this.props.id,stats:t.stats,timeline:t.timeline})}_postUpdate(t,e){const{props:n,oldProps:i}=t;this.setNeedsRedraw(),this._updateAttributes();const r=this.state.model;r?.isInstanced&&r.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:s,highlightColor:a}=n;if(e||i.autoHighlight!==o||i.highlightedObjectIndex!==s||i.highlightColor!==a){const t={};Array.isArray(a)&&(t.highlightColor=a),(e||i.autoHighlight!==o||s!==i.highlightedObjectIndex)&&(t.highlightedObjectColor=Number.isFinite(s)&&s>=0?this.encodePickingColor(s):null),this.setShaderModuleProps({picking:t})}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(t){if(!this.internalState)return!1;let e=!1;e=e||this.internalState.needsRedraw&&this.id;const n=this.getAttributeManager(),i=!!n&&n.getNeedsRedraw(t);if(e=e||i,e)for(const t of this.props.extensions)t.onNeedsRedraw.call(this,t);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags,e}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}class Mu extends Su{static{this.layerName="CompositeLayer"}get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every((t=>t.isLoaded))}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(t){}setState(t){super.setState(t),this.setNeedsUpdate()}getPickingInfo({info:t}){const{object:e}=t;return e&&e.__source&&e.__source.parent&&e.__source.parent.id===this.id?(t.object=e.__source.object,t.index=e.__source.index,t):t}filterSubLayer(t){return!0}shouldRenderSubLayer(t,e){return e&&e.length}getSubLayerClass(t,e){const{_subLayerProps:n}=this.props;return n&&n[t]&&n[t].type||e}getSubLayerRow(t,e,n){return t.__source={parent:this,object:e,index:n},t}getSubLayerAccessor(t){if("function"==typeof t){const e={index:-1,data:this.props.data,target:[]};return(n,i)=>n&&n.__source?(e.index=n.__source.index,t(n.__source.object,e)):t(n,i)}return t}getSubLayerProps(t={}){const{opacity:e,pickable:n,visible:i,parameters:r,getPolygonOffset:o,highlightedObjectIndex:s,autoHighlight:a,highlightColor:A,coordinateSystem:l,coordinateOrigin:c,wrapLongitude:u,positionFormat:h,modelMatrix:g,extensions:d,fetch:p,operation:f,_subLayerProps:m}=this.props,I={id:"",updateTriggers:{},opacity:e,pickable:n,visible:i,parameters:r,getPolygonOffset:o,highlightedObjectIndex:s,autoHighlight:a,highlightColor:A,coordinateSystem:l,coordinateOrigin:c,wrapLongitude:u,positionFormat:h,modelMatrix:g,extensions:d,fetch:p,operation:f},y=m&&t.id&&m[t.id],C=y&&y.updateTriggers,E=t.id||"sublayer";if(y){const e=this.props[qa],n=t.type?t.type._propTypes:{};for(const t in y){const i=n[t]||e[t];i&&"accessor"===i.type&&(y[t]=this.getSubLayerAccessor(y[t]))}}Object.assign(I,t,y),I.id=`${this.props.id}-${E}`,I.updateTriggers={all:this.props.updateTriggers?.all,...t.updateTriggers,...C};for(const t of d){const e=t.getSubLayerProps.call(this,t);e&&Object.assign(I,e,{updateTriggers:Object.assign(I.updateTriggers,e.updateTriggers)})}return I}_updateAutoHighlight(t){for(const e of this.getSubLayers())e.updateAutoHighlight(t)}_getAttributeManager(){return null}_postUpdate(t,e){let n=this.internalState.subLayers;const i=!n||this.needsUpdate();if(i){n=tr(this.renderLayers(),Boolean),this.internalState.subLayers=n}hr("compositeLayer.renderLayers",this,i,n);for(const t of n)t.parent=this}}const ku={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\nfloat sin_taylor_fp32(float a) {\nfloat r, s, t, x;\nif (a == 0.0) {\nreturn 0.0;\n}\nx = -a * a;\ns = a;\nr = a;\nr = r * x;\nt = r * INVERSE_FACTORIAL_3;\ns = s + t;\nr = r * x;\nt = r * INVERSE_FACTORIAL_5;\ns = s + t;\nr = r * x;\nt = r * INVERSE_FACTORIAL_7;\ns = s + t;\nr = r * x;\nt = r * INVERSE_FACTORIAL_9;\ns = s + t;\nreturn s;\n}\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\nif (a == 0.0) {\nsin_t = 0.0;\ncos_t = 1.0;\n}\nsin_t = sin_taylor_fp32(a);\ncos_t = sqrt(1.0 - sin_t * sin_t);\n}\nfloat tan_taylor_fp32(float a) {\nfloat sin_a;\nfloat cos_a;\nif (a == 0.0) {\nreturn 0.0;\n}\nfloat z = floor(a / TWO_PI);\nfloat r = a - TWO_PI * z;\nfloat t;\nfloat q = floor(r / PI_2 + 0.5);\nint j = int(q);\nif (j < -2 || j > 2) {\nreturn 1.0 / 0.0;\n}\nt = r - PI_2 * q;\nq = floor(t / PI_16 + 0.5);\nint k = int(q);\nint abs_k = int(abs(float(k)));\nif (abs_k > 4) {\nreturn 1.0 / 0.0;\n} else {\nt = t - PI_16 * q;\n}\nfloat u = 0.0;\nfloat v = 0.0;\nfloat sin_t, cos_t;\nfloat s, c;\nsincos_taylor_fp32(t, sin_t, cos_t);\nif (k == 0) {\ns = sin_t;\nc = cos_t;\n} else {\nif (abs(float(abs_k) - 1.0) < 0.5) {\nu = COS_TABLE_0;\nv = SIN_TABLE_0;\n} else if (abs(float(abs_k) - 2.0) < 0.5) {\nu = COS_TABLE_1;\nv = SIN_TABLE_1;\n} else if (abs(float(abs_k) - 3.0) < 0.5) {\nu = COS_TABLE_2;\nv = SIN_TABLE_2;\n} else if (abs(float(abs_k) - 4.0) < 0.5) {\nu = COS_TABLE_3;\nv = SIN_TABLE_3;\n}\nif (k > 0) {\ns = u * sin_t + v * cos_t;\nc = u * cos_t - v * sin_t;\n} else {\ns = u * sin_t - v * cos_t;\nc = u * cos_t + v * sin_t;\n}\n}\nif (j == 0) {\nsin_a = s;\ncos_a = c;\n} else if (j == 1) {\nsin_a = c;\ncos_a = -s;\n} else if (j == -1) {\nsin_a = -c;\ncos_a = s;\n} else {\nsin_a = -s;\ncos_a = -c;\n}\nreturn sin_a / cos_a;\n}\n#endif\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nreturn tan_taylor_fp32(a);\n#else\nreturn tan(a);\n#endif\n}\n"},Ru="#define SMOOTH_EDGE_RADIUS 0.5",Nu={name:"geometry",vs:`\n${Ru}\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n`,fs:`\n${Ru}\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n`},Pu=Object.keys(ri).map((t=>`const int COORDINATE_SYSTEM_${t} = ${ri[t]};`)).join(""),Tu=Object.keys(oi).map((t=>`const int PROJECTION_MODE_${t} = ${oi[t]};`)).join(""),Lu=Object.keys(si).map((t=>`const int UNIT_${t.toUpperCase()} = ${si[t]};`)).join(""),Fu={};const Ou={name:"project",dependencies:[ku,Nu],vs:`${Pu}\n${Tu}\n${Lu}\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size_at_latitude(float lat) {\nfloat y = clamp(lat, -89.9, 89.9);\nreturn 1.0 / cos(radians(y));\n}\nfloat project_size() {\nif (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\nproject_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\nproject_uPseudoMeters == false) {\nif (geometry.position.w == 0.0) {\nreturn project_size_at_latitude(geometry.worldPosition.y);\n}\nfloat y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\nfloat y2 = y * y;\nfloat y4 = y2 * y2;\nfloat y6 = y4 * y2;\nreturn 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n}\nreturn 1.0;\n}\nfloat project_size_at_latitude(float meters, float lat) {\nreturn meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\nfloat project_size(float meters) {\nreturn meters * project_uCommonUnitsPerMeter.z * project_size();\n}\nvec2 project_size(vec2 meters) {\nreturn meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\nvec3 project_size(vec3 meters) {\nreturn meters * project_uCommonUnitsPerMeter * project_size();\n}\nvec4 project_size(vec4 meters) {\nreturn vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nmat3 project_get_orientation_matrix(vec3 up) {\nvec3 uz = normalize(up);\nvec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\nvec3 uy = cross(uz, ux);\nreturn mat3(ux, uy, uz);\n}\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\nif (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\ntransform = project_get_orientation_matrix(commonPosition);\nreturn true;\n}\nreturn false;\n}\nvec3 project_normal(vec3 vector) {\nvec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\nvec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\nmat3 rotation;\nif (project_needs_rotation(geometry.position.xyz, rotation)) {\nn = rotation * n;\n}\nreturn n;\n}\nvec4 project_offset_(vec4 offset) {\nfloat dy = offset.y;\nvec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\nreturn vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\nfloat x = lnglat.x;\nif (project_uWrapLongitude) {\nx = mod(x + 180., 360.0) - 180.;\n}\nfloat y = clamp(lnglat.y, -89.9, 89.9);\nreturn vec2(\nradians(x) + PI,\nPI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n) * WORLD_SCALE;\n}\nvec3 project_globe_(vec3 lnglatz) {\nfloat lambda = radians(lnglatz.x);\nfloat phi = radians(lnglatz.y);\nfloat cosPhi = cos(phi);\nfloat D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\nreturn vec3(\nsin(lambda) * cosPhi,\n-cos(lambda) * cosPhi,\nsin(phi)\n) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\nvec4 position_world = project_uModelMatrix * position;\nif (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\nif (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\nreturn vec4(\nproject_mercator_(position_world.xy),\nproject_size_at_latitude(position_world.z, position_world.y),\nposition_world.w\n);\n}\nif (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\nposition_world.xyz += project_uCoordinateOrigin;\n}\n}\nif (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\nif (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\nreturn vec4(\nproject_globe_(position_world.xyz),\nposition_world.w\n);\n}\n}\nif (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\nif (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\nif (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\nreturn vec4(\nproject_mercator_(position_world.xy) - project_uCommonOrigin.xy,\nproject_size(position_world.z),\nposition_world.w\n);\n}\n}\n}\nif (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n(project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n(project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\nproject_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\nposition_world.xyz -= project_uCoordinateOrigin;\n}\nreturn project_offset_(position_world) + project_offset_(project_uModelMatrix * vec4(position64Low, 0.0));\n}\nvec4 project_position(vec4 position) {\nreturn project_position(position, ZERO_64_LOW);\n}\nvec3 project_position(vec3 position, vec3 position64Low) {\nvec4 projected_position = project_position(vec4(position, 1.0), position64Low);\nreturn projected_position.xyz;\n}\nvec3 project_position(vec3 position) {\nvec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\nreturn projected_position.xyz;\n}\nvec2 project_position(vec2 position) {\nvec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\nreturn projected_position.xy;\n}\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\nreturn viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\nreturn project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\nvec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\nreturn offset * project_uFocalDistance;\n}\nfloat project_size_to_pixel(float meters) {\nreturn project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\nif (unit == UNIT_METERS) return project_size_to_pixel(size);\nif (unit == UNIT_COMMON) return size * project_uScale;\nreturn size;\n}\nfloat project_pixel_size(float pixels) {\nreturn pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\nreturn pixels / project_uScale;\n}\n`,getUniforms:function(t=Fu){return"viewport"in t?function({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:i=ri.DEFAULT,coordinateOrigin:r=CA,autoWrapLongitude:o=!1}){i===ri.DEFAULT&&(i=t.isGeospatial?ri.LNGLAT:ri.CARTESIAN);const s=EA({viewport:t,devicePixelRatio:e,coordinateSystem:i,coordinateOrigin:r});return s.project_uWrapLongitude=o,s.project_uModelMatrix=n||IA,s}(t):{}}},Gu={name:"project32",dependencies:[Ou],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},Uu={name:"picking",vs:"uniform pickingUniforms {\nfloat isActive;\nfloat isAttribute;\nfloat isHighlightActive;\nfloat useFloatColors;\nvec3 highlightedObjectColor;\nvec4 highlightColor;\n} picking;\nout vec4 picking_vRGBcolor_Avalid;\nvec3 picking_normalizeColor(vec3 color) {\nreturn picking.useFloatColors > 0.5 ? color : color / 255.0;\n}\nvec4 picking_normalizeColor(vec4 color) {\nreturn picking.useFloatColors > 0.5 ? color : color / 255.0;\n}\nbool picking_isColorZero(vec3 color) {\nreturn dot(color, vec3(1.0)) < 0.00001;\n}\nbool picking_isColorValid(vec3 color) {\nreturn dot(color, vec3(1.0)) > 0.00001;\n}\nbool isVertexHighlighted(vec3 vertexColor) {\nvec3 highlightedObjectColor = picking_normalizeColor(picking.highlightedObjectColor);\nreturn\nbool(picking.isHighlightActive) && picking_isColorZero(abs(vertexColor - highlightedObjectColor));\n}\nvoid picking_setPickingColor(vec3 pickingColor) {\npickingColor = picking_normalizeColor(pickingColor);\nif (bool(picking.isActive)) {\npicking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\nif (!bool(picking.isAttribute)) {\npicking_vRGBcolor_Avalid.rgb = pickingColor;\n}\n} else {\npicking_vRGBcolor_Avalid.a = float(isVertexHighlighted(pickingColor));\n}\n}\nvoid picking_setPickingAttribute(float value) {\nif (bool(picking.isAttribute)) {\npicking_vRGBcolor_Avalid.r = value;\n}\n}\nvoid picking_setPickingAttribute(vec2 value) {\nif (bool(picking.isAttribute)) {\npicking_vRGBcolor_Avalid.rg = value;\n}\n}\nvoid picking_setPickingAttribute(vec3 value) {\nif (bool(picking.isAttribute)) {\npicking_vRGBcolor_Avalid.rgb = value;\n}\n}\n",fs:"uniform pickingUniforms {\nfloat isActive;\nfloat isAttribute;\nfloat isHighlightActive;\nfloat useFloatColors;\nvec3 highlightedObjectColor;\nvec4 highlightColor;\n} picking;\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\nif (picking.isActive > 0.5) {\nreturn color;\n}\nbool selected = bool(picking_vRGBcolor_Avalid.a);\nif (selected) {\nfloat highLightAlpha = picking.highlightColor.a;\nfloat blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\nfloat highLightRatio = highLightAlpha / blendedAlpha;\nvec3 blendedRGB = mix(color.rgb, picking.highlightColor.rgb, highLightRatio);\nreturn vec4(blendedRGB, blendedAlpha);\n} else {\nreturn color;\n}\n}\nvec4 picking_filterPickingColor(vec4 color) {\nif (bool(picking.isActive)) {\nif (picking_vRGBcolor_Avalid.a == 0.0) {\ndiscard;\n}\nreturn picking_vRGBcolor_Avalid;\n}\nreturn color;\n}\nvec4 picking_filterColor(vec4 color) {\nvec4 highlightColor = picking_filterHighlightColor(color);\nreturn picking_filterPickingColor(highlightColor);\n}\n",uniformTypes:{isActive:"f32",isAttribute:"f32",isHighlightActive:"f32",useFloatColors:"f32",highlightedObjectColor:"vec3<f32>",highlightColor:"vec4<f32>"},defaultUniforms:{isActive:!1,isAttribute:!1,isHighlightActive:!1,useFloatColors:!0,highlightedObjectColor:[0,0,0],highlightColor:[0,1,1,1]},getUniforms:function(t={},e){const n={};if(void 0===t.highlightedObjectColor);else if(null===t.highlightedObjectColor)n.isHighlightActive=!1;else{n.isHighlightActive=!0;const e=t.highlightedObjectColor.slice(0,3);n.highlightedObjectColor=e}if(t.highlightColor){const e=Array.from(t.highlightColor,(t=>t/255));Number.isFinite(e[3])||(e[3]=1),n.highlightColor=e}void 0!==t.isActive&&(n.isActive=Boolean(t.isActive),n.isAttribute=Boolean(t.isAttribute));void 0!==t.useFloatColors&&(n.useFloatColors=Boolean(t.useFloatColors));return n}};const ju={...Uu,defaultUniforms:{...Uu.defaultUniforms,useFloatColors:!1},inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}}};class Yu{id;topology;vertexCount;indices;attributes;userData={};constructor(t){const{attributes:e={},indices:n=null,vertexCount:i=null}=t;this.id=t.id||Sn("geometry"),this.topology=t.topology,n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n),this.attributes={};for(const[t,n]of Object.entries(e)){const e=ArrayBuffer.isView(n)?{value:n}:n;gr(ArrayBuffer.isView(e.value),`${this._print(t)}: must be typed array or object with value as typed array`),"POSITION"!==t&&"positions"!==t||e.size||(e.size=3),"indices"===t?(gr(!this.indices),this.indices=e):this.attributes[t]=e}this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this.vertexCount=i||this._calculateVertexCount(this.attributes,this.indices)}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(t){return`Geometry ${this.id} attribute ${t}`}_setAttributes(t,e){return this}_calculateVertexCount(t,e){if(e)return e.value.length;let n=1/0;for(const e of Object.values(t)){const{value:t,size:i,constant:r}=e;!r&&t&&i>=1&&(n=Math.min(n,t.length/i))}return gr(Number.isFinite(n)),n}}const Ku=[0,0,0,255],zu={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:t=>t.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:Ku},getLineColor:{type:"accessor",value:Ku},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class Ju extends Su{static{this.defaultProps=zu}static{this.layerName="ScatterplotLayer"}getShaders(){return super.getShaders({vs:"#version 300 es\n#define SHADER_NAME scatterplot-layer-vertex-shader\nin vec3 positions;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin float instanceRadius;\nin float instanceLineWidths;\nin vec4 instanceFillColors;\nin vec4 instanceLineColors;\nin vec3 instancePickingColors;\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\nuniform bool antialiasing;\nuniform bool billboard;\nuniform int radiusUnits;\nuniform int lineWidthUnits;\nout vec4 vFillColor;\nout vec4 vLineColor;\nout vec2 unitPosition;\nout float innerUnitRadius;\nout float outerRadiusPixels;\nvoid main(void) {\ngeometry.worldPosition = instancePositions;\nouterRadiusPixels = clamp(\nproject_size_to_pixel(radiusScale * instanceRadius, radiusUnits),\nradiusMinPixels, radiusMaxPixels\n);\nfloat lineWidthPixels = clamp(\nproject_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),\nlineWidthMinPixels, lineWidthMaxPixels\n);\nouterRadiusPixels += stroked * lineWidthPixels / 2.0;\nfloat edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;\nunitPosition = edgePadding * positions.xy;\ngeometry.uv = unitPosition;\ngeometry.pickingColor = instancePickingColors;\ninnerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\nif (billboard) {\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nvec3 offset = edgePadding * positions * outerRadiusPixels;\nDECKGL_FILTER_SIZE(offset, geometry);\ngl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n} else {\nvec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);\nDECKGL_FILTER_SIZE(offset, geometry);\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n}\nvFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\nDECKGL_FILTER_COLOR(vFillColor, geometry);\nvLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\nDECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME scatterplot-layer-fragment-shader\nprecision highp float;\nuniform bool filled;\nuniform float stroked;\nuniform bool antialiasing;\nin vec4 vFillColor;\nin vec4 vLineColor;\nin vec2 unitPosition;\nin float innerUnitRadius;\nin float outerRadiusPixels;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = unitPosition;\nfloat distToCenter = length(unitPosition) * outerRadiusPixels;\nfloat inCircle = antialiasing ?\nsmoothedge(distToCenter, outerRadiusPixels) :\nstep(distToCenter, outerRadiusPixels);\nif (inCircle == 0.0) {\ndiscard;\n}\nif (stroked > 0.5) {\nfloat isLine = antialiasing ?\nsmoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :\nstep(innerUnitRadius * outerRadiusPixels, distToCenter);\nif (filled) {\nfragColor = mix(vFillColor, vLineColor, isLine);\n} else {\nif (isLine == 0.0) {\ndiscard;\n}\nfragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);\n}\n} else if (!filled) {\ndiscard;\n} else {\nfragColor = vFillColor;\n}\nfragColor.a *= inCircle;\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[Gu,ju]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,type:"unorm8",accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,type:"unorm8",accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){super.updateState(t),t.changeFlags.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:t}){const{radiusUnits:e,radiusScale:n,radiusMinPixels:i,radiusMaxPixels:r,stroked:o,filled:s,billboard:a,antialiasing:A,lineWidthUnits:l,lineWidthScale:c,lineWidthMinPixels:u,lineWidthMaxPixels:h}=this.props,g=this.state.model;g.setUniforms(t),g.setUniforms({stroked:o?1:0,filled:s,billboard:a,antialiasing:A,radiusUnits:si[e],radiusScale:n,radiusMinPixels:i,radiusMaxPixels:r,lineWidthUnits:si[l],lineWidthScale:c,lineWidthMinPixels:u,lineWidthMaxPixels:h}),g.draw(this.context.renderPass)}_getModel(){return new la(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new Yu({topology:"triangle-strip",attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,1,-1,0,-1,1,0,1,1,0])}}}),isInstanced:!0})}}const qu=()=>{},Hu={minFilter:"linear",mipmapFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},Vu={x:0,y:0,width:0,height:0};function Wu(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function Zu(t,e,n,i){const r=Math.min(n/e.width,i/e.height),o=Math.floor(e.width*r),s=Math.floor(e.height*r);return 1===r?{data:e,width:o,height:s}:(t.canvas.height=s,t.canvas.width=o,t.clearRect(0,0,o,s),t.drawImage(e,0,0,e.width,e.height,0,0,o,s),{data:t.canvas,width:o,height:s})}function Xu(t){return t&&(t.id||t.url)}function $u(t,e,n){for(let i=0;i<e.length;i++){const{icon:r,xOffset:o}=e[i];t[Xu(r)]={...r,x:o,y:n}}}class th{constructor(t,{onUpdate:e=qu,onError:n=qu}){this._loadOptions=null,this._texture=null,this._externalTexture=null,this._mapping={},this._textureParameters=null,this._pendingCount=0,this._autoPacking=!1,this._xOffset=0,this._yOffset=0,this._rowHeight=0,this._buffer=4,this._canvasWidth=1024,this._canvasHeight=0,this._canvas=null,this.device=t,this.onUpdate=e,this.onError=n}finalize(){this._texture?.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(t){const e=this._autoPacking?Xu(t):t;return this._mapping[e]||Vu}setProps({loadOptions:t,autoPacking:e,iconAtlas:n,iconMapping:i,textureParameters:r}){t&&(this._loadOptions=t),void 0!==e&&(this._autoPacking=e),i&&(this._mapping=i),n&&(this._texture?.delete(),this._texture=null,this._externalTexture=n),r&&(this._textureParameters=r)}get isLoaded(){return 0===this._pendingCount}packIcons(t,e){if(!this._autoPacking||"undefined"==typeof document)return;const n=Object.values(function(t,e,n){if(!t||!e)return null;n=n||{};const i={},{iterable:r,objectInfo:o}=Zi(t);for(const t of r){o.index++;const r=e(t,o),s=Xu(r);if(!r)throw new Error("Icon is missing.");if(!r.url)throw new Error("Icon url is missing.");i[s]||n[s]&&r.url===n[s].url||(i[s]={...r,source:t,sourceIndex:o.index})}return i}(t,e,this._mapping)||{});if(n.length>0){const{mapping:t,xOffset:e,yOffset:i,rowHeight:r,canvasHeight:o}=function({icons:t,buffer:e,mapping:n={},xOffset:i=0,yOffset:r=0,rowHeight:o=0,canvasWidth:s}){let a=[];for(let A=0;A<t.length;A++){const l=t[A];if(!n[Xu(l)]){const{height:t,width:A}=l;i+A+e>s&&($u(n,a,r),i=0,r=o+r+e,o=0,a=[]),a.push({icon:l,xOffset:i}),i=i+A+e,o=Math.max(o,t)}}return a.length>0&&$u(n,a,r),{mapping:n,rowHeight:o,xOffset:i,yOffset:r,canvasWidth:s,canvasHeight:Wu(o+r+e)}}({icons:n,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=r,this._mapping=t,this._xOffset=e,this._yOffset=i,this._canvasHeight=o,this._texture||(this._texture=this.device.createTexture({format:"rgba8unorm",width:this._canvasWidth,height:this._canvasHeight,sampler:this._textureParameters||Hu})),this._texture.height!==this._canvasHeight&&(this._texture=function(t,e,n,i){const{width:r,height:o,device:s}=t,a=s.createTexture({format:"rgba8unorm",width:e,height:n,sampler:i}),A=s.createCommandEncoder();return A.copyTextureToTexture({source:t,destination:a,width:r,height:o}),A.finish(),t.destroy(),a}(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||Hu)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(n)}}_loadIcons(t){const e=this._canvas.getContext("2d",{willReadFrequently:!0});for(const n of t)this._pendingCount++,Bu(n.url,this._loadOptions).then((t=>{const i=Xu(n),r=this._mapping[i],{x:o,y:s,width:a,height:A}=r,{data:l,width:c,height:u}=Zu(e,t,a,A);this._texture.setSubImageData({data:l,x:o+(a-c)/2,y:s+(A-u)/2,width:c,height:u}),r.width=c,r.height=u,this._texture.generateMipmap(),this.onUpdate()})).catch((t=>{this.onError({url:n.url,source:n.source,sourceIndex:n.sourceIndex,loadOptions:this._loadOptions,error:t})})).finally((()=>{this._pendingCount--}))}}const eh=[0,0,0,255],nh={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:eh},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0,value:null}};class ih extends Su{static{this.defaultProps=nh}static{this.layerName="IconLayer"}getShaders(){return super.getShaders({vs:"#version 300 es\n#define SHADER_NAME icon-layer-vertex-shader\nin vec2 positions;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin float instanceSizes;\nin float instanceAngles;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin vec4 instanceIconFrames;\nin float instanceColorModes;\nin vec2 instanceOffsets;\nin vec2 instancePixelOffset;\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\nuniform int sizeUnits;\nout float vColorMode;\nout vec4 vColor;\nout vec2 vTextureCoords;\nout vec2 uv;\nvec2 rotate_by_angle(vec2 vertex, float angle) {\nfloat angle_radian = angle * PI / 180.0;\nfloat cos_angle = cos(angle_radian);\nfloat sin_angle = sin(angle_radian);\nmat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\nreturn rotationMatrix * vertex;\n}\nvoid main(void) {\ngeometry.worldPosition = instancePositions;\ngeometry.uv = positions;\ngeometry.pickingColor = instancePickingColors;\nuv = positions;\nvec2 iconSize = instanceIconFrames.zw;\nfloat sizePixels = clamp(\nproject_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\nsizeMinPixels, sizeMaxPixels\n);\nfloat instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\nvec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\npixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\npixelOffset += instancePixelOffset;\npixelOffset.y *= -1.0;\nif (billboard)  {\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nvec3 offset = vec3(pixelOffset, 0.0);\nDECKGL_FILTER_SIZE(offset, geometry);\ngl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n} else {\nvec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\nDECKGL_FILTER_SIZE(offset_common, geometry);\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n}\nvTextureCoords = mix(\ninstanceIconFrames.xy,\ninstanceIconFrames.xy + iconSize,\n(positions.xy + 1.0) / 2.0\n) / iconsTextureDim;\nvColor = instanceColors;\nDECKGL_FILTER_COLOR(vColor, geometry);\nvColorMode = instanceColorModes;\n}\n",fs:"#version 300 es\n#define SHADER_NAME icon-layer-fragment-shader\nprecision highp float;\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\nin float vColorMode;\nin vec4 vColor;\nin vec2 vTextureCoords;\nin vec2 uv;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = uv;\nvec4 texColor = texture(iconsTexture, vTextureCoords);\nvec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\nfloat a = texColor.a * opacity * vColor.a;\nif (a < alphaCutoff) {\ndiscard;\n}\nfragColor = vec4(color, a);\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[Gu,ju]})}initializeState(){this.state={iconManager:new th(this.context.device,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})};this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:"uint8",accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getColor",defaultValue:eh},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(t){super.updateState(t);const{props:e,oldProps:n,changeFlags:i}=t,r=this.getAttributeManager(),{iconAtlas:o,iconMapping:s,data:a,getIcon:A,textureParameters:l}=e,{iconManager:c}=this.state;if("string"==typeof o)return;const u=o||this.internalState.isAsyncPropLoading("iconAtlas");c.setProps({loadOptions:e.loadOptions,autoPacking:!u,iconAtlas:o,iconMapping:u?s:null,textureParameters:l}),u?n.iconMapping!==e.iconMapping&&r.invalidate("getIcon"):(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&c.packIcons(a,A),i.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),r.invalidateAll())}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(t){super.finalizeState(t),this.state.iconManager.finalize()}draw({uniforms:t}){const{sizeScale:e,sizeMinPixels:n,sizeMaxPixels:i,sizeUnits:r,billboard:o,alphaCutoff:s}=this.props,{iconManager:a}=this.state,A=a.getTexture();if(A){const a=this.state.model;a.setBindings({iconsTexture:A}),a.setUniforms(t),a.setUniforms({iconsTextureDim:[A.width,A.height],sizeUnits:si[r],sizeScale:e,sizeMinPixels:n,sizeMaxPixels:i,billboard:o,alphaCutoff:s}),a.draw(this.context.renderPass)}}_getModel(){return new la(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new Yu({topology:"triangle-strip",attributes:{positions:{size:2,value:new Float32Array([-1,-1,1,-1,-1,1,1,1])}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(t){const e=this.getCurrentLayer()?.props.onIconError;e?e(t):ii.error(t.error.message)()}getInstanceOffset(t){const{width:e,height:n,anchorX:i=e/2,anchorY:r=n/2}=this.state.iconManager.getIconMapping(t);return[e/2-i,n/2-r]}getInstanceColorMode(t){return this.state.iconManager.getIconMapping(t).mask?1:0}getInstanceIconFrame(t){const{x:e,y:n,width:i,height:r}=this.state.iconManager.getIconMapping(t);return[e,n,i,r]}}const rh=.75,oh=[],sh={getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};class ah extends ih{static{this.defaultProps=sh}static{this.layerName="MultiIconLayer"}getShaders(){return{...super.getShaders(),fs:"#version 300 es\n#define SHADER_NAME multi-icon-layer-fragment-shader\nprecision highp float;\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float sdfBuffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\nin vec4 vColor;\nin vec2 vTextureCoords;\nin vec2 uv;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = uv;\nif (!bool(picking.isActive)) {\nfloat alpha = texture(iconsTexture, vTextureCoords).a;\nvec4 color = vColor;\nif (sdf) {\nfloat distance = alpha;\nalpha = smoothstep(sdfBuffer - gamma, sdfBuffer + gamma, distance);\nif (outlineBuffer > 0.0) {\nfloat inFill = alpha;\nfloat inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\ncolor = mix(outlineColor, vColor, inFill);\nalpha = inBorder;\n}\n}\nfloat a = alpha * color.a;\nif (a < alphaCutoff) {\ndiscard;\n}\nfragColor = vec4(color.rgb, a * opacity);\n}\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n"}}initializeState(){super.initializeState();this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:"uint8",size:3,accessor:(t,{index:e,target:n})=>this.encodePickingColor(e,n)}})}updateState(t){super.updateState(t);const{props:e,oldProps:n}=t;let{outlineColor:i}=e;i!==n.outlineColor&&(i=i.map((t=>t/255)),i[3]=Number.isFinite(i[3])?i[3]:1,this.setState({outlineColor:i})),!e.sdf&&e.outlineWidth&&ii.warn(`${this.id}: fontSettings.sdf is required to render outline`)()}draw(t){const{sdf:e,smoothing:n,outlineWidth:i}=this.props,{outlineColor:r}=this.state,o=i?Math.max(n,rh*(1-i)):-1;if(t.uniforms={...t.uniforms,sdfBuffer:rh,outlineBuffer:o,gamma:n,sdf:Boolean(e),outlineColor:r},super.draw(t),e&&i){const{iconManager:t}=this.state,e=t.getTexture(),n=this.state.model;e&&(n.setUniforms({outlineBuffer:rh}),n.draw(this.context.renderPass))}}getInstanceOffset(t){return t?Array.from(t).flatMap((t=>super.getInstanceOffset(t))):oh}getInstanceColorMode(t){return 1}getInstanceIconFrame(t){return t?Array.from(t).flatMap((t=>super.getInstanceIconFrame(t))):oh}}const Ah=1e20;class lh{constructor({fontSize:t=24,buffer:e=3,radius:n=8,cutoff:i=.25,fontFamily:r="sans-serif",fontWeight:o="normal",fontStyle:s="normal"}={}){this.buffer=e,this.cutoff=i,this.radius=n;const a=this.size=t+4*e,A=this._createCanvas(a),l=this.ctx=A.getContext("2d",{willReadFrequently:!0});l.font=`${s} ${o} ${t}px ${r}`,l.textBaseline="alphabetic",l.textAlign="left",l.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Uint16Array(a)}_createCanvas(t){const e=document.createElement("canvas");return e.width=e.height=t,e}draw(t){const{width:e,actualBoundingBoxAscent:n,actualBoundingBoxDescent:i,actualBoundingBoxLeft:r,actualBoundingBoxRight:o}=this.ctx.measureText(t),s=Math.ceil(n),a=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-r))),A=Math.min(this.size-this.buffer,s+Math.ceil(i)),l=a+2*this.buffer,c=A+2*this.buffer,u=Math.max(l*c,0),h=new Uint8ClampedArray(u),g={data:h,width:l,height:c,glyphWidth:a,glyphHeight:A,glyphTop:s,glyphLeft:0,glyphAdvance:e};if(0===a||0===A)return g;const{ctx:d,buffer:p,gridInner:f,gridOuter:m}=this;d.clearRect(p,p,a,A),d.fillText(t,p,p+s);const I=d.getImageData(p,p,a,A);m.fill(Ah,0,u),f.fill(0,0,u);for(let t=0;t<A;t++)for(let e=0;e<a;e++){const n=I.data[4*(t*a+e)+3]/255;if(0===n)continue;const i=(t+p)*l+e+p;if(1===n)m[i]=0,f[i]=Ah;else{const t=.5-n;m[i]=t>0?t*t:0,f[i]=t<0?t*t:0}}ch(m,0,0,l,c,l,this.f,this.v,this.z),ch(f,p,p,a,A,l,this.f,this.v,this.z);for(let t=0;t<u;t++){const e=Math.sqrt(m[t])-Math.sqrt(f[t]);h[t]=Math.round(255-255*(e/this.radius+this.cutoff))}return g}}function ch(t,e,n,i,r,o,s,a,A){for(let l=e;l<e+i;l++)uh(t,n*o+l,o,r,s,a,A);for(let l=n;l<n+r;l++)uh(t,l*o+e,1,i,s,a,A)}function uh(t,e,n,i,r,o,s){o[0]=0,s[0]=-Ah,s[1]=Ah,r[0]=t[e];for(let a=1,A=0,l=0;a<i;a++){r[a]=t[e+a*n];const i=a*a;do{const t=o[A];l=(r[a]-r[t]+i-t*t)/(a-t)/2}while(l<=s[A]&&--A>-1);A++,o[A]=a,s[A]=l,s[A+1]=Ah}for(let a=0,A=0;a<i;a++){for(;s[A+1]<a;)A++;const i=o[A],l=a-i;t[e+a*n]=r[i]+l*l}}const hh=32,gh=[];function dh(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function ph(t,e,n,i){let r=0;for(let o=e;o<n;o++){const e=t[o];r+=i[e]?.layoutWidth||0}return r}function fh(t,e,n,i,r,o){let s=e,a=0;for(let A=e;A<n;A++){const e=ph(t,A,A+1,r);a+e>i&&(s<A&&o.push(A),s=A,a=0),a+=e}return a}function mh(t,e,n,i,r=0,o){void 0===o&&(o=t.length);const s=[];return"break-all"===e?fh(t,r,o,n,i,s):function(t,e,n,i,r,o){let s=e,a=e,A=e,l=0;for(let c=e;c<n;c++)if(" "===t[c]?A=c+1:" "!==t[c+1]&&c+1!==n||(A=c+1),A>a){let e=ph(t,a,A,r);l+e>i&&(s<a&&(o.push(a),s=a,l=0),e>i&&(e=fh(t,a,A,i,r,o),s=o[o.length-1])),a=A,l+=e}}(t,r,o,n,i,s),s}function Ih(t,e,n,i,r,o){let s=0,a=0;for(let o=e;o<n;o++){const e=t[o],n=i[e];n?(a||(a=n.layoutHeight),r[o]=s+n.layoutWidth/2,s+=n.layoutWidth):(ii.warn(`Missing character: ${e} (${e.codePointAt(0)})`)(),r[o]=s,s+=hh)}o[0]=s,o[1]=a}class yh{constructor(t=5){this._cache={},this._order=[],this.limit=t}get(t){const e=this._cache[t];return e&&(this._deleteOrder(t),this._appendOrder(t)),e}set(t,e){this._cache[t]?(this.delete(t),this._cache[t]=e,this._appendOrder(t)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[t]=e,this._appendOrder(t))}delete(t){this._cache[t]&&(delete this._cache[t],this._deleteOrder(t))}_deleteOrder(t){const e=this._order.indexOf(t);e>=0&&this._order.splice(e,1)}_appendOrder(t){this._order.push(t)}}const Ch={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:function(){const t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1};let Eh=new yh(3);function _h(t,e){for(let n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function vh(t,e,n,i){t.font=`${i} ${n}px ${e}`,t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}class Bh{constructor(){this.props={...Ch}}get atlas(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:t,buffer:e}=this.props;return(1.2*t+2*e)/t}setProps(t={}){Object.assign(this.props,t),this._key=this._getKey();const e=function(t,e){let n;n="string"==typeof e?new Set(Array.from(e)):new Set(e);const i=Eh.get(t);if(!i)return n;for(const t in i.mapping)n.has(t)&&n.delete(t);return n}(this._key,this.props.characterSet),n=Eh.get(this._key);if(n&&0===e.size)return void(this._atlas!==n&&(this._atlas=n));const i=this._generateFontAtlas(e,n);this._atlas=i,Eh.set(this._key,i)}_generateFontAtlas(t,e){const{fontFamily:n,fontWeight:i,fontSize:r,buffer:o,sdf:s,radius:a,cutoff:A}=this.props;let l=e&&e.data;l||(l=document.createElement("canvas"),l.width=1024);const c=l.getContext("2d",{willReadFrequently:!0});vh(c,n,r,i);const{mapping:u,canvasHeight:h,xOffset:g,yOffset:d}=function({characterSet:t,getFontWidth:e,fontHeight:n,buffer:i,maxCanvasWidth:r,mapping:o={},xOffset:s=0,yOffset:a=0}){let A=0,l=s;const c=n+2*i;for(const s of t)if(!o[s]){const t=e(s);l+t+2*i>r&&(l=0,A++),o[s]={x:l+i,y:a+A*c+i,width:t,height:c,layoutWidth:t,layoutHeight:n},l+=t+2*i}return{mapping:o,xOffset:l,yOffset:a+A*c,canvasHeight:dh(a+(A+1)*c)}}({getFontWidth:t=>c.measureText(t).width,fontHeight:1.2*r,buffer:o,characterSet:t,maxCanvasWidth:1024,...e&&{mapping:e.mapping,xOffset:e.xOffset,yOffset:e.yOffset}});if(l.height!==h){const t=c.getImageData(0,0,l.width,l.height);l.height=h,c.putImageData(t,0,0)}if(vh(c,n,r,i),s){const e=new lh({fontSize:r,buffer:o,radius:a,cutoff:A,fontFamily:n,fontWeight:`${i}`});for(const n of t){const{data:t,width:i,height:o,glyphTop:s}=e.draw(n);u[n].width=i,u[n].layoutOffsetY=.9*r-s;const a=c.createImageData(i,o);_h(t,a),c.putImageData(a,u[n].x,u[n].y)}}else for(const e of t)c.fillText(e,u[e].x,u[e].y+o+.9*r);return{xOffset:g,yOffset:d,mapping:u,data:l,width:l.width,height:l.height}}_getKey(){const{fontFamily:t,fontWeight:e,fontSize:n,buffer:i,sdf:r,radius:o,cutoff:s}=this.props;return r?`${t} ${e} ${n} ${i} ${o} ${s}`:`${t} ${e} ${n} ${i}`}}const wh={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class bh extends Su{static{this.defaultProps=wh}static{this.layerName="TextBackgroundLayer"}getShaders(){return super.getShaders({vs:"#version 300 es\n#define SHADER_NAME text-background-layer-vertex-shader\nin vec2 positions;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceRects;\nin float instanceSizes;\nin float instanceAngles;\nin vec2 instancePixelOffsets;\nin float instanceLineWidths;\nin vec4 instanceFillColors;\nin vec4 instanceLineColors;\nin vec3 instancePickingColors;\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\nuniform int sizeUnits;\nout vec4 vFillColor;\nout vec4 vLineColor;\nout float vLineWidth;\nout vec2 uv;\nout vec2 dimensions;\nvec2 rotate_by_angle(vec2 vertex, float angle) {\nfloat angle_radian = radians(angle);\nfloat cos_angle = cos(angle_radian);\nfloat sin_angle = sin(angle_radian);\nmat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\nreturn rotationMatrix * vertex;\n}\nvoid main(void) {\ngeometry.worldPosition = instancePositions;\ngeometry.uv = positions;\ngeometry.pickingColor = instancePickingColors;\nuv = positions;\nvLineWidth = instanceLineWidths;\nfloat sizePixels = clamp(\nproject_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\nsizeMinPixels, sizeMaxPixels\n);\ndimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\nvec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\npixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\npixelOffset += instancePixelOffsets;\npixelOffset.y *= -1.0;\nif (billboard)  {\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nvec3 offset = vec3(pixelOffset, 0.0);\nDECKGL_FILTER_SIZE(offset, geometry);\ngl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n} else {\nvec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\nDECKGL_FILTER_SIZE(offset_common, geometry);\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n}\nvFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\nDECKGL_FILTER_COLOR(vFillColor, geometry);\nvLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\nDECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME text-background-layer-fragment-shader\nprecision highp float;\nuniform bool stroked;\nin vec4 vFillColor;\nin vec4 vLineColor;\nin float vLineWidth;\nin vec2 uv;\nin vec2 dimensions;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = uv;\nvec2 pixelPosition = uv * dimensions;\nif (stroked) {\nfloat distToEdge = min(\nmin(pixelPosition.x, dimensions.x - pixelPosition.x),\nmin(pixelPosition.y, dimensions.y - pixelPosition.y)\n);\nfloat isBorder = smoothedge(distToEdge, vLineWidth);\nfragColor = mix(vFillColor, vLineColor, isBorder);\n} else {\nfragColor = vFillColor;\n}\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[Gu,ju]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,type:"unorm8",accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,type:"unorm8",accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){super.updateState(t);const{changeFlags:e}=t;e.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:t}){const{billboard:e,sizeScale:n,sizeUnits:i,sizeMinPixels:r,sizeMaxPixels:o,getLineWidth:s}=this.props;let{padding:a}=this.props;a.length<4&&(a=[a[0],a[1],a[0],a[1]]);const A=this.state.model;A.setUniforms(t),A.setUniforms({billboard:e,stroked:Boolean(s),padding:a,sizeUnits:si[i],sizeScale:n,sizeMinPixels:r,sizeMaxPixels:o}),A.draw(this.context.renderPass)}_getModel(){return new la(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new Yu({topology:"triangle-fan-webgl",vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0})}}const Qh={start:1,middle:0,end:-1},xh={top:1,center:0,bottom:-1},Dh=[0,0,0,255],Sh={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:Dh},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:Ch.characterSet},fontFamily:Ch.fontFamily,fontWeight:Ch.fontWeight,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:Dh},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:Dh},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class Mh extends Mu{constructor(){super(...arguments),this.getBoundingRect=(t,e)=>{let{size:[n,i]}=this.transformParagraph(t,e);const{fontSize:r}=this.state.fontAtlasManager.props;n/=r,i/=r;const{getTextAnchor:o,getAlignmentBaseline:s}=this.props;return[(Qh["function"==typeof o?o(t,e):o]-1)*n/2,(xh["function"==typeof s?s(t,e):s]-1)*i/2,n,i]},this.getIconOffsets=(t,e)=>{const{getTextAnchor:n,getAlignmentBaseline:i}=this.props,{x:r,y:o,rowWidth:s,size:[a,A]}=this.transformParagraph(t,e),l=Qh["function"==typeof n?n(t,e):n],c=xh["function"==typeof i?i(t,e):i],u=r.length,h=new Array(2*u);let g=0;for(let t=0;t<u;t++){const e=(1-l)*(a-s[t])/2;h[g++]=(l-1)*a/2+e+r[t],h[g++]=(c-1)*A/2+o[t]}return h}}static{this.defaultProps=Sh}static{this.layerName="TextLayer"}initializeState(){this.state={styleVersion:0,fontAtlasManager:new Bh},this.props.maxWidth>0&&ii.warn("v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(t){const{props:e,oldProps:n,changeFlags:i}=t;(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText))&&this._updateText();(this._updateFontAtlas()||e.lineHeight!==n.lineHeight||e.wordBreak!==n.wordBreak||e.maxWidth!==n.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:t}){return t.object=t.index>=0?this.props.data[t.index]:null,t}_updateFontAtlas(){const{fontSettings:t,fontFamily:e,fontWeight:n}=this.props,{fontAtlasManager:i,characterSet:r}=this.state,o={...t,characterSet:r,fontFamily:e,fontWeight:n};if(!i.mapping)return i.setProps(o),!0;for(const t in o)if(o[t]!==i.props[t])return i.setProps(o),!0;return!1}_updateText(){const{data:t,characterSet:e}=this.props,n=t.attributes?.getText;let i,{getText:r}=this.props,o=t.startIndices;const s="auto"===e&&new Set;if(n&&o){const{texts:e,characterCount:a}=function({value:t,length:e,stride:n,offset:i,startIndices:r,characterSet:o}){const s=t.BYTES_PER_ELEMENT,a=n?n/s:1,A=i?i/s:0,l=r[e]||Math.ceil((t.length-A)/a),c=o&&new Set,u=new Array(e);let h=t;if(a>1||A>0){h=new(0,t.constructor)(l);for(let e=0;e<l;e++)h[e]=t[e*a+A]}for(let t=0;t<e;t++){const e=r[t],n=r[t+1]||l,i=h.subarray(e,n);u[t]=String.fromCodePoint.apply(null,i),c&&i.forEach(c.add,c)}if(c)for(const t of c)o.add(String.fromCodePoint(t));return{texts:u,characterCount:l}}({...ArrayBuffer.isView(n)?{value:n}:n,length:t.length,startIndices:o,characterSet:s});i=a,r=(t,{index:n})=>e[n]}else{const{iterable:e,objectInfo:n}=Zi(t);o=[0],i=0;for(const t of e){n.index++;const e=Array.from(r(t,n)||"");s&&e.forEach(s.add,s),i+=e.length,o.push(i)}}this.setState({getText:r,startIndices:o,numInstances:i,characterSet:s||e})}transformParagraph(t,e){const{fontAtlasManager:n}=this.state,i=n.mapping,r=this.state.getText,{wordBreak:o,lineHeight:s,maxWidth:a}=this.props;return function(t,e,n,i,r){const o=Array.from(t),s=o.length,a=new Array(s),A=new Array(s),l=new Array(s),c=("break-word"===n||"break-all"===n)&&isFinite(i)&&i>0,u=[0,0],h=[0,0];let g=0,d=0,p=0;for(let t=0;t<=s;t++){const f=o[t];if("\n"!==f&&t!==s||(p=t),p>d){const t=c?mh(o,n,i,r,d,p):gh;for(let n=0;n<=t.length;n++){const i=0===n?d:t[n-1],s=n<t.length?t[n]:p;Ih(o,i,s,r,a,h);for(let t=i;t<s;t++){const e=o[t],n=r[e]?.layoutOffsetY||0;A[t]=g+h[1]/2+n,l[t]=h[0]}g+=h[1]*e,u[0]=Math.max(u[0],h[0])}d=p}"\n"===f&&(a[d]=0,A[d]=0,l[d]=0,d++)}return u[1]=g,{x:a,y:A,rowWidth:l,size:u}}(r(t,e)||"",s,o,a*n.props.fontSize,i)}renderLayers(){const{startIndices:t,numInstances:e,getText:n,fontAtlasManager:{scale:i,atlas:r,mapping:o},styleVersion:s}=this.state,{data:a,_dataDiff:A,getPosition:l,getColor:c,getSize:u,getAngle:h,getPixelOffset:g,getBackgroundColor:d,getBorderColor:p,getBorderWidth:f,backgroundPadding:m,background:I,billboard:y,fontSettings:C,outlineWidth:E,outlineColor:_,sizeScale:v,sizeUnits:B,sizeMinPixels:w,sizeMaxPixels:b,transitions:Q,updateTriggers:x}=this.props,D=this.getSubLayerClass("characters",ah),S=this.getSubLayerClass("background",bh);return[I&&new S({getFillColor:d,getLineColor:p,getLineWidth:f,padding:m,getPosition:l,getSize:u,getAngle:h,getPixelOffset:g,billboard:y,sizeScale:v,sizeUnits:B,sizeMinPixels:w,sizeMaxPixels:b,transitions:Q&&{getPosition:Q.getPosition,getAngle:Q.getAngle,getSize:Q.getSize,getFillColor:Q.getBackgroundColor,getLineColor:Q.getBorderColor,getLineWidth:Q.getBorderWidth,getPixelOffset:Q.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:x.getPosition,getAngle:x.getAngle,getSize:x.getSize,getFillColor:x.getBackgroundColor,getLineColor:x.getBorderColor,getLineWidth:x.getBorderWidth,getPixelOffset:x.getPixelOffset,getBoundingRect:{getText:x.getText,getTextAnchor:x.getTextAnchor,getAlignmentBaseline:x.getAlignmentBaseline,styleVersion:s}}}),{data:a.attributes&&a.attributes.background?{length:a.length,attributes:a.attributes.background}:a,_dataDiff:A,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new D({sdf:C.sdf,smoothing:Number.isFinite(C.smoothing)?C.smoothing:Ch.smoothing,outlineWidth:E/(C.radius||Ch.radius),outlineColor:_,iconAtlas:r,iconMapping:o,getPosition:l,getColor:c,getSize:u,getAngle:h,getPixelOffset:g,billboard:y,sizeScale:v*i,sizeUnits:B,sizeMinPixels:w*i,sizeMaxPixels:b*i,transitions:Q&&{getPosition:Q.getPosition,getAngle:Q.getAngle,getColor:Q.getColor,getSize:Q.getSize,getPixelOffset:Q.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:x.getText,getPosition:x.getPosition,getAngle:x.getAngle,getColor:x.getColor,getSize:x.getSize,getPixelOffset:x.getPixelOffset,getIconOffsets:{getTextAnchor:x.getTextAnchor,getAlignmentBaseline:x.getAlignmentBaseline,styleVersion:s}}}),{data:a,_dataDiff:A,startIndices:t,numInstances:e,getIconOffsets:this.getIconOffsets,getIcon:n})]}static set fontAtlasCacheLimit(t){!function(t){ii.assert(Number.isFinite(t)&&t>=3,"Invalid cache limit"),Eh=new yh(t)}(t)}}const kh="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\nstruct AmbientLight {\nvec3 color;\n};\nstruct PointLight {\nvec3 color;\nvec3 position;\nvec3 attenuation;\n};\nstruct DirectionalLight {\nvec3 color;\nvec3 direction;\n};\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\nuniform bool lighting_uEnabled;\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\nreturn pointLight.attenuation.x\n+ pointLight.attenuation.y * distance\n+ pointLight.attenuation.z * distance * distance;\n}\n#endif\n",Rh={lightSources:{}};function Nh(t={}){const{color:e=[0,0,0],intensity:n=1}=t;return e.map((t=>t*n/255))}const Ph={name:"lights",vs:kh,fs:kh,getUniforms:function t(e=Rh){if("lightSources"in e){const{ambientLight:t,pointLights:n,directionalLights:i}=e.lightSources||{};return t||n&&n.length>0||i&&i.length>0?Object.assign({},function({ambientLight:t,pointLights:e=[],directionalLights:n=[]}){const i={};return i["lighting_uAmbientLight.color"]=t?Nh(t):[0,0,0],e.forEach(((t,e)=>{i[`lighting_uPointLight[${e}].color`]=Nh(t),i[`lighting_uPointLight[${e}].position`]=t.position,i[`lighting_uPointLight[${e}].attenuation`]=t.attenuation||[1,0,0]})),i.lighting_uPointLightCount=e.length,n.forEach(((t,e)=>{i[`lighting_uDirectionalLight[${e}].color`]=Nh(t),i[`lighting_uDirectionalLight[${e}].direction`]=t.direction})),i.lighting_uDirectionalLightCount=n.length,i}({ambientLight:t,pointLights:n,directionalLights:i}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in e){const n={pointLights:[],directionalLights:[]};for(const t of e.lights||[])switch(t.type){case"ambient":n.ambientLight=t;break;case"directional":n.directionalLights?.push(t);break;case"point":n.pointLights?.push(t)}return t({lightSources:n})}return{}},defines:{MAX_LIGHTS:3}},Th="uniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\nvec3 halfway_direction = normalize(light_direction + view_direction);\nfloat lambertian = dot(light_direction, normal_worldspace);\nfloat specular = 0.0;\nif (lambertian > 0.0) {\nfloat specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\nspecular = pow(specular_angle, lighting_uShininess);\n}\nlambertian = max(lambertian, 0.0);\nreturn (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\nvec3 lightColor = surfaceColor;\nif (lighting_uEnabled) {\nvec3 view_direction = normalize(cameraPosition - position_worldspace);\nlightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\nfor (int i = 0; i < MAX_LIGHTS; i++) {\nif (i >= lighting_uPointLightCount) {\nbreak;\n}\nPointLight pointLight = lighting_uPointLight[i];\nvec3 light_position_worldspace = pointLight.position;\nvec3 light_direction = normalize(light_position_worldspace - position_worldspace);\nlightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n}\nfor (int i = 0; i < MAX_LIGHTS; i++) {\nif (i >= lighting_uDirectionalLightCount) {\nbreak;\n}\nDirectionalLight directionalLight = lighting_uDirectionalLight[i];\nlightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n}\n}\nreturn lightColor;\n}\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\nvec3 lightColor = vec3(0, 0, 0);\nvec3 surfaceColor = vec3(0, 0, 0);\nif (lighting_uEnabled) {\nvec3 view_direction = normalize(cameraPosition - position_worldspace);\nfor (int i = 0; i < MAX_LIGHTS; i++) {\nif (i >= lighting_uPointLightCount) {\nbreak;\n}\nPointLight pointLight = lighting_uPointLight[i];\nvec3 light_position_worldspace = pointLight.position;\nvec3 light_direction = normalize(light_position_worldspace - position_worldspace);\nlightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n}\nfor (int i = 0; i < MAX_LIGHTS; i++) {\nif (i >= lighting_uDirectionalLightCount) {\nbreak;\n}\nDirectionalLight directionalLight = lighting_uDirectionalLight[i];\nlightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n}\n}\nreturn lightColor;\n}\n",Lh={};function Fh(t=Lh){if(!("material"in t))return{};const{material:e}=t;return e?function(t){const{ambient:e=.35,diffuse:n=.6,shininess:i=32,specularColor:r=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:i,lighting_uSpecularColor:r.map((t=>t/255))}}(e):{lighting_uEnabled:!1}}const Oh={name:"gouraud-lighting",dependencies:[Ph],vs:Th,defines:{LIGHTING_VERTEX:1},getUniforms:Fh},Gh={name:"phong-lighting",dependencies:[Ph],fs:Th,defines:{LIGHTING_FRAGMENT:1},getUniforms:Fh},Uh=Math.PI/180,jh=new Float32Array(16),Yh=new Float32Array(12);function Kh(t,e,n){const i=e[0]*Uh,r=e[1]*Uh,o=e[2]*Uh,s=Math.sin(o),a=Math.sin(i),A=Math.sin(r),l=Math.cos(o),c=Math.cos(i),u=Math.cos(r),h=n[0],g=n[1],d=n[2];t[0]=h*u*c,t[1]=h*A*c,t[2]=h*-a,t[3]=g*(-A*l+u*a*s),t[4]=g*(u*l+A*a*s),t[5]=g*c*s,t[6]=d*(A*s+u*a*l),t[7]=d*(-u*s+A*a*l),t[8]=d*c*l}function zh(t){return t[0]=t[0],t[1]=t[1],t[2]=t[2],t[3]=t[4],t[4]=t[5],t[5]=t[6],t[6]=t[8],t[7]=t[9],t[8]=t[10],t[9]=t[12],t[10]=t[13],t[11]=t[14],t.subarray(0,12)}const Jh={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrixCol0:{size:3,elementOffset:0},instanceModelMatrixCol1:{size:3,elementOffset:3},instanceModelMatrixCol2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(t,{startRow:e,endRow:n}){const{data:i,getOrientation:r,getScale:o,getTranslation:s,getTransformMatrix:a}=this.props,A=Array.isArray(a),l=A&&16===a.length,c=Array.isArray(o),u=Array.isArray(r),h=Array.isArray(s),g=l||!A&&Boolean(a(i[0]));t.constant=g?l:u&&c&&h;const d=t.value;if(t.constant){let e;if(g)jh.set(a),e=zh(jh);else{e=Yh;Kh(e,r,o),e.set(s,9)}t.value=new Float32Array(e)}else{let A=e*t.size;const{iterable:p,objectInfo:f}=Zi(i,e,n);for(const t of p){let e;if(f.index++,g)jh.set(l?a:a(t,f)),e=zh(jh);else{e=Yh;Kh(e,u?r:r(t,f),c?o:o(t,f)),e.set(h?s:s(t,f),9)}d[A++]=e[0],d[A++]=e[1],d[A++]=e[2],d[A++]=e[3],d[A++]=e[4],d[A++]=e[5],d[A++]=e[6],d[A++]=e[7],d[A++]=e[8],d[A++]=e[9],d[A++]=e[10],d[A++]=e[11]}}}};function qh(t,e){return e===ri.CARTESIAN||e===ri.METER_OFFSETS||e===ri.DEFAULT&&!t.isGeospatial}function Hh(t){const e=t.positions||t.POSITION;ii.assert(e,'no "postions" or "POSITION" attribute in mesh');const n=e.value.length/e.size;let i=t.COLOR_0||t.colors;i||(i={size:3,value:new Float32Array(3*n).fill(1)});let r=t.NORMAL||t.normals;r||(r={size:3,value:new Float32Array(3*n).fill(0)});let o=t.TEXCOORD_0||t.texCoords;return o||(o={size:2,value:new Float32Array(2*n).fill(0)}),{positions:e,colors:i,normals:r,texCoords:o}}function Vh(t){return t instanceof Yu?(t.attributes=Hh(t.attributes),t):t.attributes?new Yu({...t,topology:"triangle-list",attributes:Hh(t.attributes)}):new Yu({topology:"triangle-list",attributes:Hh(t)})}const Wh={mesh:{type:"object",value:null,async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},textureParameters:{type:"object",ignore:!0,value:null}};class Zh extends Su{static{this.defaultProps=Wh}static{this.layerName="SimpleMeshLayer"}getShaders(){return super.getShaders({vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\nuniform float sizeScale;\nuniform bool composeModelMatrix;\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin vec3 instanceModelMatrixCol0;\nin vec3 instanceModelMatrixCol1;\nin vec3 instanceModelMatrixCol2;\nin vec3 instanceTranslation;\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\nvoid main(void) {\ngeometry.worldPosition = instancePositions;\ngeometry.uv = texCoords;\ngeometry.pickingColor = instancePickingColors;\nvTexCoord = texCoords;\ncameraPosition = project_uCameraPosition;\nvColor = vec4(colors * instanceColors.rgb, instanceColors.a);\nmat3 instanceModelMatrix = mat3(instanceModelMatrixCol0, instanceModelMatrixCol1, instanceModelMatrixCol2);\nvec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\nif (composeModelMatrix) {\nDECKGL_FILTER_SIZE(pos, geometry);\nnormals_commonspace = project_normal(instanceModelMatrix * normals);\ngeometry.worldPosition += pos;\ngl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\ngeometry.position = position_commonspace;\n}\nelse {\npos = project_size(pos);\nDECKGL_FILTER_SIZE(pos, geometry);\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\ngeometry.position = position_commonspace;\nnormals_commonspace = project_normal(instanceModelMatrix * normals);\n}\ngeometry.normal = normals_commonspace;\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nDECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\nprecision highp float;\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = vTexCoord;\nvec3 normal;\nif (flatShading) {\nnormal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n} else {\nnormal = normals_commonspace;\n}\nvec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\nDECKGL_FILTER_COLOR(color, geometry);\nvec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\nfragColor = vec4(lightColor, color.a * opacity);\n}\n",modules:[Gu,Gh,ju]})}getBounds(){if(this.props._instanced)return super.getBounds();let t=this.state.positionBounds;if(t)return t;const{mesh:e}=this.props;if(!e)return null;if(t=e.header?.boundingBox,!t){const{attributes:n}=Vh(e);n.POSITION=n.POSITION||n.positions,t=function(t){let e=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,s=-1/0;const a=t.POSITION?t.POSITION.value:[],A=a&&a.length;for(let t=0;t<A;t+=3){const A=a[t],l=a[t+1],c=a[t+2];e=A<e?A:e,n=l<n?l:n,i=c<i?c:i,r=A>r?A:r,o=l>o?l:o,s=c>s?c:s}return[[e,n,i],[r,o,s]]}(n)}return this.state.positionBounds=t,t}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:"float64",fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:"unorm8",transition:!0,size:this.props.colorFormat.length,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:Jh}),this.setState({emptyTexture:this.context.device.createTexture({data:new Uint8Array(4),width:1,height:1})})}updateState(t){super.updateState(t);const{props:e,oldProps:n,changeFlags:i}=t;if(e.mesh!==n.mesh||i.extensionsChanged){if(this.state.positionBounds=null,this.state.model?.destroy(),e.mesh){this.state.model=this.getModel(e.mesh);const t=e.mesh.attributes||e.mesh;this.setState({hasNormals:Boolean(t.NORMAL||t.normals)})}this.getAttributeManager().invalidateAll()}e.texture!==n.texture&&e.texture instanceof fr&&this.setTexture(e.texture),this.state.model&&this.state.model.setTopology(this.props.wireframe?"line-strip":"triangle-list")}finalizeState(t){super.finalizeState(t),this.state.emptyTexture.delete()}draw({uniforms:t}){const{model:e}=this.state;if(!e)return;const{viewport:n,renderPass:i}=this.context,{sizeScale:r,coordinateSystem:o,_instanced:s}=this.props;e.setUniforms(t),e.setUniforms({sizeScale:r,composeModelMatrix:!s||qh(n,o),flatShading:!this.state.hasNormals}),e.draw(i)}get isLoaded(){return Boolean(this.state?.model&&super.isLoaded)}getModel(t){const e=new la(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:Vh(t),isInstanced:!0}),{texture:n}=this.props,{emptyTexture:i}=this.state;return e.setBindings({sampler:n||i}),e.setUniforms({hasTexture:Boolean(n)}),e}setTexture(t){const{emptyTexture:e,model:n}=this.state;n&&(n.setBindings({sampler:t||e}),n.setUniforms({hasTexture:Boolean(t)}))}}class Xh{constructor(t){this.indexStarts=[0],this.vertexStarts=[0],this.vertexCount=0,this.instanceCount=0;const{attributes:e={}}=t;this.typedArrayManager=di,this.attributes={},this._attributeDefs=e,this.opts=t,this.updateGeometry(t)}updateGeometry(t){Object.assign(this.opts,t);const{data:e,buffers:n={},getGeometry:i,geometryBuffer:r,positionFormat:o,dataChanged:s,normalize:a=!0}=this.opts;if(this.data=e,this.getGeometry=i,this.positionSize=r&&r.size||("XY"===o?2:3),this.buffers=n,this.normalize=a,r&&(Hi(e.startIndices),this.getGeometry=this.getGeometryFromBuffer(r),a||(n.vertexPositions=r)),this.geometryBuffer=n.vertexPositions,Array.isArray(s))for(const t of s)this._rebuildGeometry(t);else this._rebuildGeometry()}updatePartialGeometry({startRow:t,endRow:e}){this._rebuildGeometry({startRow:t,endRow:e})}getGeometryFromBuffer(t){const e=t.value||t;return ArrayBuffer.isView(e)?$i(e,{size:this.positionSize,offset:t.offset,stride:t.stride,startIndices:this.data.startIndices}):null}_allocate(t,e){const{attributes:n,buffers:i,_attributeDefs:r,typedArrayManager:o}=this;for(const s in r)if(s in i)o.release(n[s]),n[s]=null;else{const i=r[s];i.copy=e,n[s]=o.allocate(n[s],t,i)}}_forEachGeometry(t,e,n){const{data:i,getGeometry:r}=this,{iterable:o,objectInfo:s}=Zi(i,e,n);for(const e of o){s.index++;t(r?r(e,s):null,s.index)}}_rebuildGeometry(t){if(!this.data)return;let{indexStarts:e,vertexStarts:n,instanceCount:i}=this;const{data:r,geometryBuffer:o}=this,{startRow:s=0,endRow:a=1/0}=t||{},A={};if(t||(e=[0],n=[0]),this.normalize||!o)this._forEachGeometry(((t,e)=>{const i=t&&this.normalizeGeometry(t);A[e]=i,n[e+1]=n[e]+(i?this.getGeometrySize(i):0)}),s,a),i=n[n.length-1];else if(n=r.startIndices,i=n[r.length]||0,ArrayBuffer.isView(o))i=i||o.length/this.positionSize;else if(o instanceof Rn){const t=4*this.positionSize;i=i||o.byteLength/t}else if(o.buffer){const t=o.stride||4*this.positionSize;i=i||o.buffer.byteLength/t}else if(o.value){const t=o.value,e=o.stride/t.BYTES_PER_ELEMENT||this.positionSize;i=i||t.length/e}this._allocate(i,Boolean(t)),this.indexStarts=e,this.vertexStarts=n,this.instanceCount=i;const l={};this._forEachGeometry(((t,r)=>{const o=A[r]||t;l.vertexStart=n[r],l.indexStart=e[r];const s=r<n.length-1?n[r+1]:i;l.geometrySize=s-n[r],l.geometryIndex=r,this.updateGeometryAttributes(o,l)}),s,a),this.vertexCount=e[e.length-1]}}const $h=1,tg=-1;function eg(t,e,n={}){const i=function(t,e={}){return Math.sign(function(t,e={}){const{start:n=0,end:i=t.length,plane:r="xy"}=e,o=e.size||2;let s=0;const a=ng[r[0]],A=ng[r[1]];for(let e=n,r=i-o;e<i;e+=o)s+=(t[e+a]-t[r+a])*(t[e+A]+t[r+A]),r=e;return s/2}(t,e))}(t,n);return i!==e&&(function(t,e){const{start:n=0,end:i=t.length,size:r=2}=e,o=(i-n)/r,s=Math.floor(o/2);for(let e=0;e<s;++e){const i=n+e*r,s=n+(o-1-e)*r;for(let e=0;e<r;++e){const n=t[i+e];t[i+e]=t[s+e],t[s+e]=n}}}(t,n),!0)}const ng={x:0,y:1,z:2};function ig(t,e,n,i,r=[]){let o,s;if(8&n)o=(i[3]-t[1])/(e[1]-t[1]),s=3;else if(4&n)o=(i[1]-t[1])/(e[1]-t[1]),s=1;else if(2&n)o=(i[2]-t[0])/(e[0]-t[0]),s=2;else{if(!(1&n))return null;o=(i[0]-t[0])/(e[0]-t[0]),s=0}for(let n=0;n<t.length;n++)r[n]=(1&s)===n?i[s]:o*(e[n]-t[n])+t[n];return r}function rg(t,e){let n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function og(t,e){const n=e.length,i=t.length;if(i>0){let r=!0;for(let o=0;o<n;o++)if(t[i-n+o]!==e[o]){r=!1;break}if(r)return!1}for(let r=0;r<n;r++)t[i+r]=e[r];return!0}function sg(t,e){const n=e.length;for(let i=0;i<n;i++)t[i]=e[i]}function ag(t,e,n,i,r=[]){const o=i+e*n;for(let e=0;e<n;e++)r[e]=t[o+e];return r}function Ag(t,e){const{size:n=2,broken:i=!1,gridResolution:r=10,gridOffset:o=[0,0],startIndex:s=0,endIndex:a=t.length}=e||{},A=(a-s)/n;let l=[];const c=[l],u=ag(t,0,n,s);let h,g;const d=gg(u,r,o,[]),p=[];og(l,u);for(let e=1;e<A;e++){for(h=ag(t,e,n,s,h),g=rg(h,d);g;){ig(u,h,g,d,p);const t=rg(p,d);t&&(ig(u,p,t,d,p),g=t),og(l,p),sg(u,p),dg(d,r,g),i&&l.length>n&&(l=[],c.push(l),og(l,u)),g=rg(h,d)}og(l,h),sg(u,h)}return i?c:c[0]}const lg=0,cg=1;function ug(t,e=null,n){if(!t.length)return[];const{size:i=2,gridResolution:r=10,gridOffset:o=[0,0],edgeTypes:s=!1}=n||{},a=[],A=[{pos:t,types:s?new Array(t.length/i).fill(cg):null,holes:e||[]}],l=[[],[]];let c=[];for(;A.length;){const{pos:t,types:e,holes:n}=A.shift();pg(t,i,n[0]||t.length,l),c=gg(l[0],r,o,c);const u=rg(l[1],c);if(u){let r=hg(t,e,i,0,n[0]||t.length,c,u);const o={pos:r[0].pos,types:r[0].types,holes:[]},a={pos:r[1].pos,types:r[1].types,holes:[]};A.push(o,a);for(let A=0;A<n.length;A++)r=hg(t,e,i,n[A],n[A+1]||t.length,c,u),r[0]&&(o.holes.push(o.pos.length),o.pos=fg(o.pos,r[0].pos),s&&(o.types=fg(o.types,r[0].types))),r[1]&&(a.holes.push(a.pos.length),a.pos=fg(a.pos,r[1].pos),s&&(a.types=fg(a.types,r[1].types)))}else{const i={positions:t};s&&(i.edgeTypes=e),n.length&&(i.holeIndices=n),a.push(i)}}return a}function hg(t,e,n,i,r,o,s){const a=(r-i)/n,A=[],l=[],c=[],u=[],h=[];let g,d,p;const f=ag(t,a-1,n,i);let m=Math.sign(8&s?f[1]-o[3]:f[0]-o[2]),I=e&&e[a-1],y=0,C=0;for(let r=0;r<a;r++)g=ag(t,r,n,i,g),d=Math.sign(8&s?g[1]-o[3]:g[0]-o[2]),p=e&&e[i/n+r],d&&m&&m!==d&&(ig(f,g,s,o,h),og(A,h)&&c.push(I),og(l,h)&&u.push(I)),d<=0?(og(A,g)&&c.push(p),y-=d):c.length&&(c[c.length-1]=lg),d>=0?(og(l,g)&&u.push(p),C+=d):u.length&&(u[u.length-1]=lg),sg(f,g),m=d,I=p;return[y?{pos:A,types:e&&c}:null,C?{pos:l,types:e&&u}:null]}function gg(t,e,n,i){const r=Math.floor((t[0]-n[0])/e)*e+n[0],o=Math.floor((t[1]-n[1])/e)*e+n[1];return i[0]=r,i[1]=o,i[2]=r+e,i[3]=o+e,i}function dg(t,e,n){8&n?(t[1]+=e,t[3]+=e):4&n?(t[1]-=e,t[3]-=e):2&n?(t[0]+=e,t[2]+=e):1&n&&(t[0]-=e,t[2]-=e)}function pg(t,e,n,i){let r=1/0,o=-1/0,s=1/0,a=-1/0;for(let i=0;i<n;i+=e){const e=t[i],n=t[i+1];r=e<r?e:r,o=e>o?e:o,s=n<s?n:s,a=n>a?n:a}return i[0][0]=r,i[0][1]=s,i[1][0]=o,i[1][1]=a,i}function fg(t,e){for(let n=0;n<e.length;n++)t.push(e[n]);return t}const mg=85.051129;function Ig(t,e,n,i){let r=-1,o=-1;for(let s=n+1;s<i;s+=e){const e=Math.abs(t[s]);e>r&&(r=e,o=s-1)}return o}function yg(t,e,n,i,r=mg){const o=t[n],s=t[i-e];if(Math.abs(o-s)>180){const i=ag(t,0,e,n);i[0]+=360*Math.round((s-o)/360),og(t,i),i[1]=Math.sign(i[1])*r,og(t,i),i[0]=o,og(t,i)}}function Cg(t,e,n,i){let r,o=t[0];for(let s=n;s<i;s+=e){r=t[s];const e=r-o;(e>180||e<-180)&&(r-=360*Math.round(e/360)),t[s]=o=r}}function Eg(t,e){let n;const i=t.length/e;for(let r=0;r<i&&(n=t[r*e],(n+180)%360==0);r++);const r=360*-Math.round(n/360);if(0!==r)for(let n=0;n<i;n++)t[n*e]+=r}function _g(t,e,n,i){let r;if(Array.isArray(t[0])){const n=t.length*e;r=new Array(n);for(let n=0;n<t.length;n++)for(let i=0;i<e;i++)r[n*e+i]=t[n][i]||0}else r=t;return n?Ag(r,{size:e,gridResolution:n}):i?function(t,e){const{size:n=2,startIndex:i=0,endIndex:r=t.length,normalize:o=!0}=e||{},s=t.slice(i,r);Cg(s,n,0,r-i);const a=Ag(s,{size:n,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(o)for(const t of a)Eg(t,n);return a}(r,{size:e}):r}class vg extends Xh{constructor(t){super({...t,attributes:{positions:{size:3,padding:18,initialize:!0,type:t.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(t){return this.attributes[t]}getGeometryFromBuffer(t){return this.normalize?super.getGeometryFromBuffer(t):null}normalizeGeometry(t){return this.normalize?_g(t,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):t}getGeometrySize(t){if(Bg(t)){let e=0;for(const n of t)e+=this.getGeometrySize(n);return e}const e=this.getPathLength(t);return e<2?0:this.isClosed(t)?e<3?0:e+2:e}updateGeometryAttributes(t,e){if(0!==e.geometrySize)if(t&&Bg(t))for(const n of t){const t=this.getGeometrySize(n);e.geometrySize=t,this.updateGeometryAttributes(n,e),e.vertexStart+=t}else this._updateSegmentTypes(t,e),this._updatePositions(t,e)}_updateSegmentTypes(t,e){const n=this.attributes.segmentTypes,i=!!t&&this.isClosed(t),{vertexStart:r,geometrySize:o}=e;n.fill(0,r,r+o),i?(n[r]=4,n[r+o-2]=4):(n[r]+=1,n[r+o-2]+=2),n[r+o-1]=4}_updatePositions(t,e){const{positions:n}=this.attributes;if(!n||!t)return;const{vertexStart:i,geometrySize:r}=e,o=new Array(3);for(let e=i,s=0;s<r;e++,s++)this.getPointOnPath(t,s,o),n[3*e]=o[0],n[3*e+1]=o[1],n[3*e+2]=o[2]}getPathLength(t){return t.length/this.positionSize}getPointOnPath(t,e,n=[]){const{positionSize:i}=this;e*i>=t.length&&(e+=1-t.length/i);const r=e*i;return n[0]=t[r],n[1]=t[r+1],n[2]=3===i&&t[r+2]||0,n}isClosed(t){if(!this.normalize)return Boolean(this.opts.loop);const{positionSize:e}=this,n=t.length-e;return t[0]===t[n]&&t[1]===t[n+1]&&(2===e||t[2]===t[n+2])}}function Bg(t){return Array.isArray(t[0])}const wg=[0,0,0,255],bg={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:t=>t.path},getColor:{type:"accessor",value:wg},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},Qg={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class xg extends Su{static{this.defaultProps=bg}static{this.layerName="PathLayer"}getShaders(){return super.getShaders({vs:"#version 300 es\n#define SHADER_NAME path-layer-vertex-shader\nin vec2 positions;\nin float instanceTypes;\nin vec3 instanceStartPositions;\nin vec3 instanceEndPositions;\nin vec3 instanceLeftPositions;\nin vec3 instanceRightPositions;\nin vec3 instanceLeftPositions64Low;\nin vec3 instanceStartPositions64Low;\nin vec3 instanceEndPositions64Low;\nin vec3 instanceRightPositions64Low;\nin float instanceStrokeWidths;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float capType;\nuniform float miterLimit;\nuniform bool billboard;\nuniform int widthUnits;\nuniform float opacity;\nout vec4 vColor;\nout vec2 vCornerOffset;\nout float vMiterLength;\nout vec2 vPathPosition;\nout float vPathLength;\nout float vJointType;\nconst float EPSILON = 0.001;\nconst vec3 ZERO_OFFSET = vec3(0.0);\nfloat flipIfTrue(bool flag) {\nreturn -(float(flag) * 2. - 1.);\n}\nvec3 getLineJoinOffset(\nvec3 prevPoint, vec3 currPoint, vec3 nextPoint,\nvec2 width\n) {\nbool isEnd = positions.x > 0.0;\nfloat sideOfPath = positions.y;\nfloat isJoint = float(sideOfPath == 0.0);\nvec3 deltaA3 = (currPoint - prevPoint);\nvec3 deltaB3 = (nextPoint - currPoint);\nmat3 rotationMatrix;\nbool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);\nif (needsRotation) {\ndeltaA3 = deltaA3 * rotationMatrix;\ndeltaB3 = deltaB3 * rotationMatrix;\n}\nvec2 deltaA = deltaA3.xy / width;\nvec2 deltaB = deltaB3.xy / width;\nfloat lenA = length(deltaA);\nfloat lenB = length(deltaB);\nvec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\nvec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\nvec2 perpA = vec2(-dirA.y, dirA.x);\nvec2 perpB = vec2(-dirB.y, dirB.x);\nvec2 tangent = dirA + dirB;\ntangent = length(tangent) > 0. ? normalize(tangent) : perpA;\nvec2 miterVec = vec2(-tangent.y, tangent.x);\nvec2 dir = isEnd ? dirA : dirB;\nvec2 perp = isEnd ? perpA : perpB;\nfloat L = isEnd ? lenA : lenB;\nfloat sinHalfA = abs(dot(miterVec, perp));\nfloat cosHalfA = abs(dot(dirA, miterVec));\nfloat turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);\nfloat cornerPosition = sideOfPath * turnDirection;\nfloat miterSize = 1.0 / max(sinHalfA, EPSILON);\nmiterSize = mix(\nmin(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),\nmiterSize,\nstep(0.0, cornerPosition)\n);\nvec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))\n* (sideOfPath + isJoint * turnDirection);\nbool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));\nbool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));\nbool isCap = isStartCap || isEndCap;\nif (isCap) {\noffsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);\nvJointType = capType;\n} else {\nvJointType = jointType;\n}\nvPathLength = L;\nvCornerOffset = offsetVec;\nvMiterLength = dot(vCornerOffset, miterVec * turnDirection);\nvMiterLength = isCap ? isJoint : vMiterLength;\nvec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);\nvPathPosition = vec2(\ndot(offsetFromStartOfPath, perp),\ndot(offsetFromStartOfPath, dir)\n);\ngeometry.uv = vPathPosition;\nfloat isValid = step(instanceTypes, 3.5);\nvec3 offset = vec3(offsetVec * width * isValid, 0.0);\nif (needsRotation) {\noffset = rotationMatrix * offset;\n}\nreturn offset;\n}\nvoid clipLine(inout vec4 position, vec4 refPosition) {\nif (position.w < EPSILON) {\nfloat r = (EPSILON - refPosition.w) / (position.w - refPosition.w);\nposition = refPosition + (position - refPosition) * r;\n}\n}\nvoid main() {\ngeometry.pickingColor = instancePickingColors;\nvColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\nfloat isEnd = positions.x;\nvec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);\nvec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);\nvec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\nvec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);\nvec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);\nvec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);\ngeometry.worldPosition = currPosition;\nvec2 widthPixels = vec2(clamp(\nproject_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),\nwidthMinPixels, widthMaxPixels) / 2.0);\nvec3 width;\nif (billboard) {\nvec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);\nvec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);\nvec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);\nclipLine(prevPositionScreen, currPositionScreen);\nclipLine(nextPositionScreen, currPositionScreen);\nclipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));\nwidth = vec3(widthPixels, 0.0);\nDECKGL_FILTER_SIZE(width, geometry);\nvec3 offset = getLineJoinOffset(\nprevPositionScreen.xyz / prevPositionScreen.w,\ncurrPositionScreen.xyz / currPositionScreen.w,\nnextPositionScreen.xyz / nextPositionScreen.w,\nproject_pixel_size_to_clipspace(width.xy)\n);\nDECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);\ngl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);\n} else {\nprevPosition = project_position(prevPosition, prevPosition64Low);\ncurrPosition = project_position(currPosition, currPosition64Low);\nnextPosition = project_position(nextPosition, nextPosition64Low);\nwidth = vec3(project_pixel_size(widthPixels), 0.0);\nDECKGL_FILTER_SIZE(width, geometry);\nvec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);\ngeometry.position = vec4(currPosition + offset, 1.0);\ngl_Position = project_common_position_to_clipspace(geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n}\nDECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME path-layer-fragment-shader\nprecision highp float;\nuniform float miterLimit;\nin vec4 vColor;\nin vec2 vCornerOffset;\nin float vMiterLength;\nin vec2 vPathPosition;\nin float vPathLength;\nin float vJointType;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = vPathPosition;\nif (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {\nif (vJointType > 0.5 && length(vCornerOffset) > 1.0) {\ndiscard;\n}\nif (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {\ndiscard;\n}\n}\nfragColor = vColor;\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[Gu,ju]})}get wrapLongitude(){return!1}getBounds(){return this.getAttributeManager()?.getBounds(["vertexPositions"])}initializeState(){const t=!0;this.getAttributeManager().addInstanced({vertexPositions:{size:3,vertexOffset:1,type:"float64",fp64:this.use64bitPositions(),transition:Qg,accessor:"getPath",update:this.calculatePositions,noAlloc:t,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:"uint8",update:this.calculateSegmentTypes,noAlloc:t},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:Qg,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",accessor:"getColor",transition:Qg,defaultValue:wg},instancePickingColors:{size:4,type:"uint8",accessor:(t,{index:e,target:n})=>this.encodePickingColor(t&&t.__source?t.__source.index:e,n)}}),this.setState({pathTesselator:new vg({fp64:this.use64bitPositions()})})}updateState(t){super.updateState(t);const{props:e,changeFlags:n}=t,i=this.getAttributeManager();if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPath)){const{pathTesselator:t}=this.state,r=e.data.attributes||{};t.updateGeometry({data:e.data,geometryBuffer:r.getPath,buffers:r,normalize:!e._pathType,loop:"loop"===e._pathType,getGeometry:e.getPath,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:n.dataChanged}),this.setState({numInstances:t.instanceCount,startIndices:t.vertexStarts}),n.dataChanged||i.invalidateAll()}n.extensionsChanged&&(this.state.model?.destroy(),this.state.model=this._getModel(),i.invalidateAll())}getPickingInfo(t){const e=super.getPickingInfo(t),{index:n}=e,i=this.props.data;return i[0]&&i[0].__source&&(e.object=i.find((t=>t.__source.index===n))),e}disablePickingIndex(t){const e=this.props.data;if(e[0]&&e[0].__source)for(let n=0;n<e.length;n++)e[n].__source.index===t&&this._disablePickingIndex(n);else super.disablePickingIndex(t)}draw({uniforms:t}){const{jointRounded:e,capRounded:n,billboard:i,miterLimit:r,widthUnits:o,widthScale:s,widthMinPixels:a,widthMaxPixels:A}=this.props,l=this.state.model;l.setUniforms(t),l.setUniforms({jointType:Number(e),capType:Number(n),billboard:i,widthUnits:si[o],widthScale:s,miterLimit:r,widthMinPixels:a,widthMaxPixels:A}),l.draw(this.context.renderPass)}_getModel(){return new la(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new Yu({topology:"triangle-list",attributes:{indices:new Uint16Array([0,1,2,1,4,2,1,3,4,3,5,4]),positions:{value:new Float32Array([0,0,0,-1,0,1,1,-1,1,1,1,0]),size:2}}}),isInstanced:!0})}calculatePositions(t){const{pathTesselator:e}=this.state;t.startIndices=e.vertexStarts,t.value=e.get("positions")}calculateSegmentTypes(t){const{pathTesselator:e}=this.state;t.startIndices=e.vertexStarts,t.value=e.get("segmentTypes")}}var Dg;!function(t){t[t.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",t[t.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",t[t.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",t[t.FUNC_ADD=32774]="FUNC_ADD",t[t.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",t[t.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",t[t.BLEND_EQUATION=32777]="BLEND_EQUATION",t[t.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",t[t.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",t[t.BLEND_DST_RGB=32968]="BLEND_DST_RGB",t[t.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",t[t.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",t[t.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",t[t.BLEND_COLOR=32773]="BLEND_COLOR",t[t.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",t[t.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",t[t.LINE_WIDTH=2849]="LINE_WIDTH",t[t.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",t[t.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",t[t.CULL_FACE_MODE=2885]="CULL_FACE_MODE",t[t.FRONT_FACE=2886]="FRONT_FACE",t[t.DEPTH_RANGE=2928]="DEPTH_RANGE",t[t.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",t[t.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",t[t.DEPTH_FUNC=2932]="DEPTH_FUNC",t[t.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",t[t.STENCIL_FUNC=2962]="STENCIL_FUNC",t[t.STENCIL_FAIL=2964]="STENCIL_FAIL",t[t.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",t[t.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",t[t.STENCIL_REF=2967]="STENCIL_REF",t[t.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",t[t.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",t[t.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",t[t.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",t[t.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",t[t.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",t[t.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",t[t.VIEWPORT=2978]="VIEWPORT",t[t.SCISSOR_BOX=3088]="SCISSOR_BOX",t[t.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",t[t.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",t[t.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",t[t.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",t[t.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",t[t.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",t[t.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",t[t.RED_BITS=3410]="RED_BITS",t[t.GREEN_BITS=3411]="GREEN_BITS",t[t.BLUE_BITS=3412]="BLUE_BITS",t[t.ALPHA_BITS=3413]="ALPHA_BITS",t[t.DEPTH_BITS=3414]="DEPTH_BITS",t[t.STENCIL_BITS=3415]="STENCIL_BITS",t[t.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",t[t.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",t[t.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",t[t.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",t[t.SAMPLES=32937]="SAMPLES",t[t.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",t[t.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",t[t.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",t[t.VENDOR=7936]="VENDOR",t[t.RENDERER=7937]="RENDERER",t[t.VERSION=7938]="VERSION",t[t.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",t[t.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",t[t.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.BUFFER_SIZE=34660]="BUFFER_SIZE",t[t.BUFFER_USAGE=34661]="BUFFER_USAGE",t[t.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",t[t.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",t[t.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",t[t.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",t[t.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",t[t.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",t[t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",t[t.CULL_FACE=2884]="CULL_FACE",t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK",t[t.BLEND=3042]="BLEND",t[t.DEPTH_TEST=2929]="DEPTH_TEST",t[t.DITHER=3024]="DITHER",t[t.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",t[t.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",t[t.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",t[t.SCISSOR_TEST=3089]="SCISSOR_TEST",t[t.STENCIL_TEST=2960]="STENCIL_TEST",t[t.NO_ERROR=0]="NO_ERROR",t[t.INVALID_ENUM=1280]="INVALID_ENUM",t[t.INVALID_VALUE=1281]="INVALID_VALUE",t[t.INVALID_OPERATION=1282]="INVALID_OPERATION",t[t.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",t[t.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",t[t.CW=2304]="CW",t[t.CCW=2305]="CCW",t[t.DONT_CARE=4352]="DONT_CARE",t[t.FASTEST=4353]="FASTEST",t[t.NICEST=4354]="NICEST",t[t.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.DOUBLE=5130]="DOUBLE",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER",t[t.COMPILE_STATUS=35713]="COMPILE_STATUS",t[t.DELETE_STATUS=35712]="DELETE_STATUS",t[t.LINK_STATUS=35714]="LINK_STATUS",t[t.VALIDATE_STATUS=35715]="VALIDATE_STATUS",t[t.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",t[t.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",t[t.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",t[t.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",t[t.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",t[t.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",t[t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",t[t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",t[t.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",t[t.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",t[t.SHADER_TYPE=35663]="SHADER_TYPE",t[t.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",t[t.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP",t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",t[t.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",t[t.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",t[t.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",t[t.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE=5890]="TEXTURE",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",t[t.TEXTURE0=33984]="TEXTURE0",t[t.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",t[t.REPEAT=10497]="REPEAT",t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t[t.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",t[t.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.LOW_FLOAT=36336]="LOW_FLOAT",t[t.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",t[t.HIGH_FLOAT=36338]="HIGH_FLOAT",t[t.LOW_INT=36339]="LOW_INT",t[t.MEDIUM_INT=36340]="MEDIUM_INT",t[t.HIGH_INT=36341]="HIGH_INT",t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.RENDERBUFFER=36161]="RENDERBUFFER",t[t.RGBA4=32854]="RGBA4",t[t.RGB5_A1=32855]="RGB5_A1",t[t.RGB565=36194]="RGB565",t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.STENCIL_INDEX=6401]="STENCIL_INDEX",t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",t[t.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",t[t.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",t[t.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",t[t.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",t[t.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",t[t.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",t[t.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",t[t.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",t[t.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",t[t.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",t[t.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",t[t.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",t[t.NONE=0]="NONE",t[t.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",t[t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",t[t.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",t[t.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",t[t.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",t[t.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",t[t.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",t[t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",t[t.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",t[t.READ_BUFFER=3074]="READ_BUFFER",t[t.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",t[t.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",t[t.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",t[t.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",t[t.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",t[t.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",t[t.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",t[t.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",t[t.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",t[t.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",t[t.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",t[t.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",t[t.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",t[t.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",t[t.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",t[t.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",t[t.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",t[t.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",t[t.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",t[t.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",t[t.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",t[t.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",t[t.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",t[t.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",t[t.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",t[t.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",t[t.RED=6403]="RED",t[t.RGB8=32849]="RGB8",t[t.RGBA8=32856]="RGBA8",t[t.RGB10_A2=32857]="RGB10_A2",t[t.TEXTURE_3D=32879]="TEXTURE_3D",t[t.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",t[t.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",t[t.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",t[t.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",t[t.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",t[t.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",t[t.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",t[t.SRGB=35904]="SRGB",t[t.SRGB8=35905]="SRGB8",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",t[t.RGBA32F=34836]="RGBA32F",t[t.RGB32F=34837]="RGB32F",t[t.RGBA16F=34842]="RGBA16F",t[t.RGB16F=34843]="RGB16F",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",t[t.R11F_G11F_B10F=35898]="R11F_G11F_B10F",t[t.RGB9_E5=35901]="RGB9_E5",t[t.RGBA32UI=36208]="RGBA32UI",t[t.RGB32UI=36209]="RGB32UI",t[t.RGBA16UI=36214]="RGBA16UI",t[t.RGB16UI=36215]="RGB16UI",t[t.RGBA8UI=36220]="RGBA8UI",t[t.RGB8UI=36221]="RGB8UI",t[t.RGBA32I=36226]="RGBA32I",t[t.RGB32I=36227]="RGB32I",t[t.RGBA16I=36232]="RGBA16I",t[t.RGB16I=36233]="RGB16I",t[t.RGBA8I=36238]="RGBA8I",t[t.RGB8I=36239]="RGB8I",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.R8=33321]="R8",t[t.RG8=33323]="RG8",t[t.R16F=33325]="R16F",t[t.R32F=33326]="R32F",t[t.RG16F=33327]="RG16F",t[t.RG32F=33328]="RG32F",t[t.R8I=33329]="R8I",t[t.R8UI=33330]="R8UI",t[t.R16I=33331]="R16I",t[t.R16UI=33332]="R16UI",t[t.R32I=33333]="R32I",t[t.R32UI=33334]="R32UI",t[t.RG8I=33335]="RG8I",t[t.RG8UI=33336]="RG8UI",t[t.RG16I=33337]="RG16I",t[t.RG16UI=33338]="RG16UI",t[t.RG32I=33339]="RG32I",t[t.RG32UI=33340]="RG32UI",t[t.R8_SNORM=36756]="R8_SNORM",t[t.RG8_SNORM=36757]="RG8_SNORM",t[t.RGB8_SNORM=36758]="RGB8_SNORM",t[t.RGBA8_SNORM=36759]="RGBA8_SNORM",t[t.RGB10_A2UI=36975]="RGB10_A2UI",t[t.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",t[t.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.HALF_FLOAT=5131]="HALF_FLOAT",t[t.RG=33319]="RG",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",t[t.CURRENT_QUERY=34917]="CURRENT_QUERY",t[t.QUERY_RESULT=34918]="QUERY_RESULT",t[t.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",t[t.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",t[t.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",t[t.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",t[t.DRAW_BUFFER0=34853]="DRAW_BUFFER0",t[t.DRAW_BUFFER1=34854]="DRAW_BUFFER1",t[t.DRAW_BUFFER2=34855]="DRAW_BUFFER2",t[t.DRAW_BUFFER3=34856]="DRAW_BUFFER3",t[t.DRAW_BUFFER4=34857]="DRAW_BUFFER4",t[t.DRAW_BUFFER5=34858]="DRAW_BUFFER5",t[t.DRAW_BUFFER6=34859]="DRAW_BUFFER6",t[t.DRAW_BUFFER7=34860]="DRAW_BUFFER7",t[t.DRAW_BUFFER8=34861]="DRAW_BUFFER8",t[t.DRAW_BUFFER9=34862]="DRAW_BUFFER9",t[t.DRAW_BUFFER10=34863]="DRAW_BUFFER10",t[t.DRAW_BUFFER11=34864]="DRAW_BUFFER11",t[t.DRAW_BUFFER12=34865]="DRAW_BUFFER12",t[t.DRAW_BUFFER13=34866]="DRAW_BUFFER13",t[t.DRAW_BUFFER14=34867]="DRAW_BUFFER14",t[t.DRAW_BUFFER15=34868]="DRAW_BUFFER15",t[t.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",t[t.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",t[t.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",t[t.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",t[t.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",t[t.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",t[t.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",t[t.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",t[t.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",t[t.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",t[t.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",t[t.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",t[t.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",t[t.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",t[t.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",t[t.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",t[t.SAMPLER_3D=35679]="SAMPLER_3D",t[t.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",t[t.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",t[t.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",t[t.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",t[t.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",t[t.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",t[t.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",t[t.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",t[t.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",t[t.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",t[t.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",t[t.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",t[t.MAX_SAMPLES=36183]="MAX_SAMPLES",t[t.SAMPLER_BINDING=35097]="SAMPLER_BINDING",t[t.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",t[t.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",t[t.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",t[t.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",t[t.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",t[t.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",t[t.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",t[t.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",t[t.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",t[t.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",t[t.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",t[t.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",t[t.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",t[t.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",t[t.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",t[t.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",t[t.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",t[t.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",t[t.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",t[t.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",t[t.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",t[t.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",t[t.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",t[t.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",t[t.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",t[t.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",t[t.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",t[t.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",t[t.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",t[t.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",t[t.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",t[t.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",t[t.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",t[t.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",t[t.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",t[t.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",t[t.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",t[t.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",t[t.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",t[t.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",t[t.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",t[t.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",t[t.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t[t.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",t[t.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",t[t.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",t[t.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",t[t.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",t[t.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",t[t.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",t[t.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",t[t.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",t[t.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",t[t.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",t[t.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",t[t.UNIFORM_TYPE=35383]="UNIFORM_TYPE",t[t.UNIFORM_SIZE=35384]="UNIFORM_SIZE",t[t.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",t[t.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",t[t.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",t[t.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",t[t.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",t[t.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",t[t.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",t[t.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",t[t.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",t[t.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",t[t.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",t[t.OBJECT_TYPE=37138]="OBJECT_TYPE",t[t.SYNC_CONDITION=37139]="SYNC_CONDITION",t[t.SYNC_STATUS=37140]="SYNC_STATUS",t[t.SYNC_FLAGS=37141]="SYNC_FLAGS",t[t.SYNC_FENCE=37142]="SYNC_FENCE",t[t.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",t[t.UNSIGNALED=37144]="UNSIGNALED",t[t.SIGNALED=37145]="SIGNALED",t[t.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",t[t.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",t[t.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",t[t.WAIT_FAILED=37149]="WAIT_FAILED",t[t.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",t[t.COLOR=6144]="COLOR",t[t.DEPTH=6145]="DEPTH",t[t.STENCIL=6146]="STENCIL",t[t.MIN=32775]="MIN",t[t.MAX=32776]="MAX",t[t.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",t[t.STREAM_READ=35041]="STREAM_READ",t[t.STREAM_COPY=35042]="STREAM_COPY",t[t.STATIC_READ=35045]="STATIC_READ",t[t.STATIC_COPY=35046]="STATIC_COPY",t[t.DYNAMIC_READ=35049]="DYNAMIC_READ",t[t.DYNAMIC_COPY=35050]="DYNAMIC_COPY",t[t.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",t[t.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",t[t.INVALID_INDEX=4294967295]="INVALID_INDEX",t[t.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",t[t.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",t[t.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",t[t.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",t[t.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",t[t.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",t[t.R16_EXT=33322]="R16_EXT",t[t.RG16_EXT=33324]="RG16_EXT",t[t.RGB16_EXT=32852]="RGB16_EXT",t[t.RGBA16_EXT=32859]="RGBA16_EXT",t[t.R16_SNORM_EXT=36760]="R16_SNORM_EXT",t[t.RG16_SNORM_EXT=36761]="RG16_SNORM_EXT",t[t.RGB16_SNORM_EXT=36762]="RGB16_SNORM_EXT",t[t.RGBA16_SNORM_EXT=36763]="RGBA16_SNORM_EXT",t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",t[t.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",t[t.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",t[t.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",t[t.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",t[t.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",t[t.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",t[t.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",t[t.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",t[t.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",t[t.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",t[t.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",t[t.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",t[t.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",t[t.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",t[t.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT",t[t.COMPLETION_STATUS_KHR=37297]="COMPLETION_STATUS_KHR",t[t.DEPTH_CLAMP_EXT=34383]="DEPTH_CLAMP_EXT",t[t.FIRST_VERTEX_CONVENTION_WEBGL=36429]="FIRST_VERTEX_CONVENTION_WEBGL",t[t.LAST_VERTEX_CONVENTION_WEBGL=36430]="LAST_VERTEX_CONVENTION_WEBGL",t[t.PROVOKING_VERTEX_WEBL=36431]="PROVOKING_VERTEX_WEBL",t[t.POLYGON_MODE_WEBGL=2880]="POLYGON_MODE_WEBGL",t[t.POLYGON_OFFSET_LINE_WEBGL=10754]="POLYGON_OFFSET_LINE_WEBGL",t[t.LINE_WEBGL=6913]="LINE_WEBGL",t[t.FILL_WEBGL=6914]="FILL_WEBGL",t[t.MAX_CLIP_DISTANCES_WEBGL=3378]="MAX_CLIP_DISTANCES_WEBGL",t[t.MAX_CULL_DISTANCES_WEBGL=33529]="MAX_CULL_DISTANCES_WEBGL",t[t.MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL=33530]="MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL",t[t.CLIP_DISTANCE0_WEBGL=12288]="CLIP_DISTANCE0_WEBGL",t[t.CLIP_DISTANCE1_WEBGL=12289]="CLIP_DISTANCE1_WEBGL",t[t.CLIP_DISTANCE2_WEBGL=12290]="CLIP_DISTANCE2_WEBGL",t[t.CLIP_DISTANCE3_WEBGL=12291]="CLIP_DISTANCE3_WEBGL",t[t.CLIP_DISTANCE4_WEBGL=12292]="CLIP_DISTANCE4_WEBGL",t[t.CLIP_DISTANCE5_WEBGL=12293]="CLIP_DISTANCE5_WEBGL",t[t.CLIP_DISTANCE6_WEBGL=12294]="CLIP_DISTANCE6_WEBGL",t[t.CLIP_DISTANCE7_WEBGL=12295]="CLIP_DISTANCE7_WEBGL",t[t.POLYGON_OFFSET_CLAMP_EXT=36379]="POLYGON_OFFSET_CLAMP_EXT",t[t.LOWER_LEFT_EXT=36001]="LOWER_LEFT_EXT",t[t.UPPER_LEFT_EXT=36002]="UPPER_LEFT_EXT",t[t.NEGATIVE_ONE_TO_ONE_EXT=37726]="NEGATIVE_ONE_TO_ONE_EXT",t[t.ZERO_TO_ONE_EXT=37727]="ZERO_TO_ONE_EXT",t[t.CLIP_ORIGIN_EXT=37724]="CLIP_ORIGIN_EXT",t[t.CLIP_DEPTH_MODE_EXT=37725]="CLIP_DEPTH_MODE_EXT",t[t.SRC1_COLOR_WEBGL=35065]="SRC1_COLOR_WEBGL",t[t.SRC1_ALPHA_WEBGL=34185]="SRC1_ALPHA_WEBGL",t[t.ONE_MINUS_SRC1_COLOR_WEBGL=35066]="ONE_MINUS_SRC1_COLOR_WEBGL",t[t.ONE_MINUS_SRC1_ALPHA_WEBGL=35067]="ONE_MINUS_SRC1_ALPHA_WEBGL",t[t.MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL=35068]="MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL",t[t.MIRROR_CLAMP_TO_EDGE_EXT=34627]="MIRROR_CLAMP_TO_EDGE_EXT"}(Dg||(Dg={}));const Sg={outlineEnabled:!1,outlineRenderShadowmap:!1,outlineShadowmap:null};const Mg={name:"outline",vs:"#version 300 es\nin float instanceZLevel;\nout float outline_vzLevel;\nout vec4 outline_vPosition;\n\n// Set the z level for the outline shadowmap rendering\nvoid outline_setZLevel(float zLevel) {\n  outline_vzLevel = zLevel;\n}\n\n// Store an adjusted position for texture2DProj\nvoid outline_setUV(vec4 position) {\n  // mat4(\n  //   0.5, 0.0, 0.0, 0.0,\n  //   0.0, 0.5, 0.0, 0.0,\n  //   0.0, 0.0, 0.5, 0.0,\n  //   0.5, 0.5, 0.5, 1.0\n  // ) * position;\n  outline_vPosition = vec4(position.xyz * 0.5 + position.w * 0.5, position.w);\n}\n",fs:"uniform bool outline_uEnabled;\nuniform bool outline_uRenderOutlines;\nuniform sampler2D outline_uShadowmap;\n\nin float outline_vzLevel;\n// in vec2 outline_vUV;\nin vec4 outline_vPosition;\n\nout vec4 fragColor;\n\nconst float OUTLINE_Z_LEVEL_ERROR = 0.01;\n\n// Return a darker color in shadowmap\nvec4 outline_filterShadowColor(vec4 color) {\n  return vec4(outline_vzLevel / 255., outline_vzLevel / 255., outline_vzLevel / 255., 1.);\n}\n\n// Return a darker color if in shadowmap\nvec4 outline_filterDarkenColor(vec4 color) {\n  if (outline_uEnabled) {\n    float maxZLevel;\n    if (outline_vPosition.q > 0.0) {\n      maxZLevel = texture2DProj(outline_uShadowmap, outline_vPosition).r * 255.;\n    } else {\n      discard;\n    }\n    if (maxZLevel < outline_vzLevel + OUTLINE_Z_LEVEL_ERROR) {\n      vec4(color.rgb * 0.5, color.a);\n    } else {\n      discard;\n    }\n  }\n  return color;\n}\n\n// if enabled and rendering outlines - Render depth to shadowmap\n// if enabled and rendering colors - Return a darker color if in shadowmap\n// if disabled, just return color\nvec4 outline_filterColor(vec4 color) {\n  if (outline_uEnabled) {\n    return outline_uRenderOutlines ?\n      outline_filterShadowColor(color) :\n      outline_filterDarkenColor(color);\n  }\n  return color;\n}\n",getUniforms:function({outlineEnabled:t,outlineRenderShadowmap:e,outlineShadowmap:n}=Sg){const i={};return void 0!==t&&(i.outline_uEnabled=t),void 0!==e&&(i.outline_uRenderOutlines=e),void 0!==n&&(i.outline_uShadowmap=n),i}},kg={common:0,meters:1,pixels:2};function Rg({source:t,code:e=""}){return t.replace(/}[^{}]*$/,e.concat("\n}\n"))}const Ng={getZLevel:()=>0};class Pg extends xg{static layerName="PathOutlineLayer";static defaultProps=Ng;state=void 0;getShaders(){const t=super.getShaders();return Object.assign({},t,{modules:t.modules.concat([Mg]),vs:Rg({source:t.vs,code:"  outline_setUV(gl_Position);\n  outline_setZLevel(instanceZLevel);\n"}),fs:Rg({source:t.fs,code:"  fragColor = outline_filterColor(fragColor);\n"})})}initializeState(t){super.initializeState(),this.setState({outlineFramebuffer:t.device.createFramebuffer({}),dummyTexture:t.device.createTexture({})}),this.state.attributeManager.addInstanced({instanceZLevel:{size:1,type:Dg.UNSIGNED_BYTE,accessor:"getZLevel"}})}draw({moduleParameters:t={},parameters:e,uniforms:n,context:i}){const{jointRounded:r,capRounded:o,billboard:s,miterLimit:a,widthUnits:A,widthScale:l,widthMinPixels:c,widthMaxPixels:u}=this.props;n=Object.assign({},n,{jointType:Number(r),capType:Number(o),billboard:s,widthUnits:kg[A],widthScale:l,miterLimit:a,widthMinPixels:c,widthMaxPixels:u});const{outlineFramebuffer:h,dummyTexture:g}=this.state;this.state.model.updateModuleSettings({outlineEnabled:!0,outlineRenderShadowmap:!0,outlineShadowmap:g}),this.state.model.draw({uniforms:Object.assign({},n,{jointType:0,widthScale:1.3*this.props.widthScale}),parameters:{depthTest:!1,blendEquation:Dg.MAX},framebuffer:h}),this.state.model.updateModuleSettings({outlineEnabled:!0,outlineRenderShadowmap:!1,outlineShadowmap:h}),this.state.model.draw({uniforms:Object.assign({},n,{jointType:Number(r),capType:Number(o),widthScale:this.props.widthScale}),parameters:{depthTest:!1}})}}class Tg extends Yu{constructor(t={}){super(Object.assign({},t,{attributes:Lg(t),topology:"triangle-list"}))}}function Lg({length:t=1,headSize:e=.2,tailWidth:n=.05,tailStart:i=.05}){const r=[.5,1,0,.5-e/2,1-e,0,.5+e/2,1-e,0,.5-n/2,i,0,.5+n/2,1-e,0,.5+n/2,i,0,.5-n/2,i,0,.5-n/2,1-e,0,.5+n/2,1-e,0],o=new Array(r.length);for(let e=0;e<r.length/3;e++){const n=3*e;o[n+0]=(r[n+0]-.5)*t,o[n+1]=(r[n+1]-.5)*t,o[n+2]=0}return{positions:{size:3,value:new Float32Array(o)},normals:{size:3,value:new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1])},texCoords:{size:2,value:new Float32Array(r)}}}const Fg=Zh,Og={mesh:new Tg({headSize:.2,tailWidth:.05})};Object.assign({},Pg.defaultProps,{MarkerLayer:Fg,markerLayerProps:Og,sizeScale:100,fp64:!1,highlightIndex:-1,highlightPoint:null,getPath:t=>t.path,getColor:t=>t.color,getMarkerColor:t=>[0,0,0,255],getDirection:t=>t.direction,getMarkerPercentages:(t,{lineLength:e})=>e>.1?[.25,.5,.75]:[.5]});function Gg({data:t,getIndex:e,dataRange:n,replace:i}){const{startRow:r=0,endRow:o=1/0}=n,s=t.length;let a=s,A=s;for(let n=0;n<s;n++){const i=e(t[n]);if(a>n&&i>=r&&(a=n),i>=o){A=n;break}}let l=a;const c=A-a!==i.length?t.slice(A):void 0;for(let e=0;e<i.length;e++)t[l++]=i[e];if(c){for(let e=0;e<c.length;e++)t[l++]=c[e];t.length=l}return{startRow:a,endRow:a+i.length}}var Ug=g(5230);const jg=$h,Yg=tg,Kg={isClosed:!0};function zg(t){return"positions"in t?t.positions:t}function Jg(t){return"holeIndices"in t?t.holeIndices:null}function qg(t,e,n,i,r){let o=e;const s=n.length;for(let e=0;e<s;e++)for(let r=0;r<i;r++)t[o++]=n[e][r]||0;if(!function(t){const e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]}(n))for(let e=0;e<i;e++)t[o++]=n[0][e]||0;return Kg.start=e,Kg.end=o,Kg.size=i,eg(t,r,Kg),o}function Hg(t,e,n,i,r=0,o,s){const a=(o=o||n.length)-r;if(a<=0)return e;let A=e;for(let e=0;e<a;e++)t[A++]=n[r+e];if(!function(t,e,n,i){for(let r=0;r<e;r++)if(t[n+r]!==t[i-e+r])return!1;return!0}(n,i,r,o))for(let e=0;e<i;e++)t[A++]=n[r+e];return Kg.start=e,Kg.end=A,Kg.size=i,eg(t,s,Kg),A}function Vg(t,e){!function(t){if(t=t&&t.positions||t,!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error("invalid polygon")}(t);const n=[],i=[];if("positions"in t){const{positions:r,holeIndices:o}=t;if(o){let t=0;for(let s=0;s<=o.length;s++)t=Hg(n,t,r,e,o[s-1],o[s],0===s?jg:Yg),i.push(t);return i.pop(),{positions:n,holeIndices:i}}t=r}if(!function(t){return Array.isArray(t[0])}(t))return Hg(n,0,t,e,0,n.length,jg),n;if(!function(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}(t)){let r=0;for(const[o,s]of t.entries())r=qg(n,r,s,e,0===o?jg:Yg),i.push(r);return i.pop(),{positions:n,holeIndices:i}}return qg(n,0,t,e,jg),n}function Wg(t,e,n){const i=t.length/3;let r=0;for(let o=0;o<i;o++){const s=(o+1)%i;r+=t[3*o+e]*t[3*s+n],r-=t[3*s+e]*t[3*o+n]}return Math.abs(r/2)}function Zg(t,e,n,i){const r=t.length/3;for(let o=0;o<r;o++){const r=3*o,s=t[r+0],a=t[r+1],A=t[r+2];t[r+e]=s,t[r+n]=a,t[r+i]=A}}class Xg extends Xh{constructor(t){const{fp64:e,IndexType:n=Uint32Array}=t;super({...t,attributes:{positions:{size:3,type:e?Float64Array:Float32Array},vertexValid:{type:Uint16Array,size:1},indices:{type:n,size:1}}})}get(t){const{attributes:e}=this;return"indices"===t?e.indices&&e.indices.subarray(0,this.vertexCount):e[t]}updateGeometry(t){super.updateGeometry(t);const e=this.buffers.indices;if(e)this.vertexCount=(e.value||e).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(t){if(this.normalize){const e=Vg(t,this.positionSize);return this.opts.resolution?ug(zg(e),Jg(e),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?function(t,e=null,n){const{size:i=2,normalize:r=!0,edgeTypes:o=!1}=n||{};e=e||[];const s=[],a=[];let A=0,l=0;for(let r=0;r<=e.length;r++){const o=e[r]||t.length,c=l,u=Ig(t,i,A,o);for(let e=u;e<o;e++)s[l++]=t[e];for(let e=A;e<u;e++)s[l++]=t[e];Cg(s,i,c,l),yg(s,i,c,l,n?.maxLatitude),A=o,a[r]=l}a.pop();const c=ug(s,a,{size:i,gridResolution:360,gridOffset:[-180,-180],edgeTypes:o});if(r)for(const t of c)Eg(t.positions,i);return c}(zg(e),Jg(e),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):e}return t}getGeometrySize(t){if($g(t)){let e=0;for(const n of t)e+=this.getGeometrySize(n);return e}return zg(t).length/this.positionSize}getGeometryFromBuffer(t){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(t):null}updateGeometryAttributes(t,e){if(t&&$g(t))for(const n of t){const t=this.getGeometrySize(n);e.geometrySize=t,this.updateGeometryAttributes(n,e),e.vertexStart+=t,e.indexStart=this.indexStarts[e.geometryIndex+1]}else{const n=t;this._updateIndices(n,e),this._updatePositions(n,e),this._updateVertexValid(n,e)}}_updateIndices(t,{geometryIndex:e,vertexStart:n,indexStart:i}){const{attributes:r,indexStarts:o,typedArrayManager:s}=this;let a=r.indices;if(!a||!t)return;let A=i;const l=function(t,e,n,i){let r=Jg(t);r&&(r=r.map((t=>t/e)));let o=zg(t);const s=i&&3===e;if(n){const t=o.length;o=o.slice();const i=[];for(let r=0;r<t;r+=e){i[0]=o[r],i[1]=o[r+1],s&&(i[2]=o[r+2]);const t=n(i);o[r]=t[0],o[r+1]=t[1],s&&(o[r+2]=t[2])}}if(s){const t=Wg(o,0,1),e=Wg(o,0,2),i=Wg(o,1,2);if(!t&&!e&&!i)return[];t>e&&t>i||(e>i?(n||(o=o.slice()),Zg(o,0,2,1)):(n||(o=o.slice()),Zg(o,2,0,1)))}return Ug(o,r,e)}(t,this.positionSize,this.opts.preproject,this.opts.full3d);a=s.allocate(a,i+l.length,{copy:!0});for(let t=0;t<l.length;t++)a[A++]=l[t]+n;o[e+1]=i+l.length,r.indices=a}_updatePositions(t,{vertexStart:e,geometrySize:n}){const{attributes:{positions:i},positionSize:r}=this;if(!i||!t)return;const o=zg(t);for(let t=e,s=0;s<n;t++,s++){const e=o[s*r],n=o[s*r+1],a=r>2?o[s*r+2]:0;i[3*t]=e,i[3*t+1]=n,i[3*t+2]=a}}_updateVertexValid(t,{vertexStart:e,geometrySize:n}){const{positionSize:i}=this,r=this.attributes.vertexValid,o=t&&Jg(t);if(t&&t.edgeTypes?r.set(t.edgeTypes,e):r.fill(1,e,e+n),o)for(let t=0;t<o.length;t++)r[e+o[t]/i-1]=0;r[e+n-1]=0}}function $g(t){return Array.isArray(t)&&t.length>0&&!Number.isFinite(t[0])}const td="uniform bool extruded;\nuniform bool isWireframe;\nuniform float elevationScale;\nuniform float opacity;\nin vec4 fillColors;\nin vec4 lineColors;\nin vec3 pickingColors;\nout vec4 vColor;\nstruct PolygonProps {\nvec3 positions;\nvec3 positions64Low;\nvec3 normal;\nfloat elevations;\n};\nvec3 project_offset_normal(vec3 vector) {\nif (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\nproject_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\nreturn normalize(vector * project_uCommonUnitsPerWorldUnit);\n}\nreturn project_normal(vector);\n}\nvoid calculatePosition(PolygonProps props) {\nvec3 pos = props.positions;\nvec3 pos64Low = props.positions64Low;\nvec3 normal = props.normal;\nvec4 colors = isWireframe ? lineColors : fillColors;\ngeometry.worldPosition = props.positions;\ngeometry.pickingColor = pickingColors;\nif (extruded) {\npos.z += props.elevations * elevationScale;\n}\ngl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nif (extruded) {\n#ifdef IS_SIDE_VERTEX\nnormal = project_offset_normal(normal);\n#else\nnormal = project_normal(normal);\n#endif\ngeometry.normal = normal;\nvec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);\nvColor = vec4(lightColor, colors.a * opacity);\n} else {\nvColor = vec4(colors.rgb, colors.a * opacity);\n}\nDECKGL_FILTER_COLOR(vColor, geometry);\n}\n",ed=`#version 300 es\n#define SHADER_NAME solid-polygon-layer-vertex-shader\nin vec3 vertexPositions;\nin vec3 vertexPositions64Low;\nin float elevations;\n${td}\nvoid main(void) {\nPolygonProps props;\nprops.positions = vertexPositions;\nprops.positions64Low = vertexPositions64Low;\nprops.elevations = elevations;\nprops.normal = vec3(0.0, 0.0, 1.0);\ncalculatePosition(props);\n}\n`,nd=`#version 300 es\n#define SHADER_NAME solid-polygon-layer-vertex-shader-side\n#define IS_SIDE_VERTEX\nin vec2 positions;\nin vec3 vertexPositions;\nin vec3 nextVertexPositions;\nin vec3 vertexPositions64Low;\nin vec3 nextVertexPositions64Low;\nin float elevations;\nin float instanceVertexValid;\n${td}\nvoid main(void) {\nif(instanceVertexValid < 0.5){\ngl_Position = vec4(0.);\nreturn;\n}\nPolygonProps props;\nvec3 pos;\nvec3 pos64Low;\nvec3 nextPos;\nvec3 nextPos64Low;\n#if RING_WINDING_ORDER_CW == 1\npos = vertexPositions;\npos64Low = vertexPositions64Low;\nnextPos = nextVertexPositions;\nnextPos64Low = nextVertexPositions64Low;\n#else\npos = nextVertexPositions;\npos64Low = nextVertexPositions64Low;\nnextPos = vertexPositions;\nnextPos64Low = vertexPositions64Low;\n#endif\nprops.positions = mix(pos, nextPos, positions.x);\nprops.positions64Low = mix(pos64Low, nextPos64Low, positions.x);\nprops.normal = vec3(\npos.y - nextPos.y + (pos64Low.y - nextPos64Low.y),\nnextPos.x - pos.x + (nextPos64Low.x - pos64Low.x),\n0.0);\nprops.elevations = elevations * positions.y;\ncalculatePosition(props);\n}\n`,id=[0,0,0,255],rd={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",_full3d:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:t=>t.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:id},getLineColor:{type:"accessor",value:id},material:!0},od={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class sd extends Su{static{this.defaultProps=rd}static{this.layerName="SolidPolygonLayer"}getShaders(t){return super.getShaders({vs:"top"===t?ed:nd,fs:"#version 300 es\n#define SHADER_NAME solid-polygon-layer-fragment-shader\nprecision highp float;\nin vec4 vColor;\nout vec4 fragColor;\nvoid main(void) {\nfragColor = vColor;\ngeometry.uv = vec2(0.);\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",defines:{RING_WINDING_ORDER_CW:this.props._normalize||"CCW"!==this.props._windingOrder?1:0},modules:[Gu,Oh,ju]})}get wrapLongitude(){return!1}getBounds(){return this.getAttributeManager()?.getBounds(["vertexPositions"])}initializeState(){const{viewport:t}=this.context;let{coordinateSystem:e}=this.props;const{_full3d:n}=this.props;let i;t.isGeospatial&&e===ri.DEFAULT&&(e=ri.LNGLAT),e===ri.LNGLAT&&(i=n?t.projectPosition.bind(t):t.projectFlat.bind(t)),this.setState({numInstances:0,polygonTesselator:new Xg({preproject:i,fp64:this.use64bitPositions(),IndexType:Uint32Array})});const r=this.getAttributeManager(),o=!0;r.remove(["instancePickingColors"]),r.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:o},vertexPositions:{size:3,type:"float64",stepMode:"dynamic",fp64:this.use64bitPositions(),transition:od,accessor:"getPolygon",update:this.calculatePositions,noAlloc:o,shaderAttributes:{nextVertexPositions:{vertexOffset:1}}},instanceVertexValid:{size:1,type:"uint16",stepMode:"instance",update:this.calculateVertexValid,noAlloc:o},elevations:{size:1,stepMode:"dynamic",transition:od,accessor:"getElevation"},fillColors:{size:this.props.colorFormat.length,type:"unorm8",stepMode:"dynamic",transition:od,accessor:"getFillColor",defaultValue:id},lineColors:{size:this.props.colorFormat.length,type:"unorm8",stepMode:"dynamic",transition:od,accessor:"getLineColor",defaultValue:id},pickingColors:{size:4,type:"uint8",stepMode:"dynamic",accessor:(t,{index:e,target:n})=>this.encodePickingColor(t&&t.__source?t.__source.index:e,n)}})}getPickingInfo(t){const e=super.getPickingInfo(t),{index:n}=e,i=this.props.data;return i[0]&&i[0].__source&&(e.object=i.find((t=>t.__source.index===n))),e}disablePickingIndex(t){const e=this.props.data;if(e[0]&&e[0].__source)for(let n=0;n<e.length;n++)e[n].__source.index===t&&this._disablePickingIndex(n);else super.disablePickingIndex(t)}draw({uniforms:t}){const{extruded:e,filled:n,wireframe:i,elevationScale:r}=this.props,{topModel:o,sideModel:s,wireframeModel:a,polygonTesselator:A}=this.state,l={...t,extruded:Boolean(e),elevationScale:r};a&&i&&(a.setInstanceCount(A.instanceCount-1),a.setUniforms(l),a.draw(this.context.renderPass)),s&&n&&(s.setInstanceCount(A.instanceCount-1),s.setUniforms(l),s.draw(this.context.renderPass)),o&&n&&(o.setVertexCount(A.vertexCount),o.setUniforms(l),o.draw(this.context.renderPass))}updateState(t){super.updateState(t),this.updateGeometry(t);const{props:e,oldProps:n,changeFlags:i}=t,r=this.getAttributeManager();(i.extensionsChanged||e.filled!==n.filled||e.extruded!==n.extruded)&&(this.state.models?.forEach((t=>t.destroy())),this.setState(this._getModels()),r.invalidateAll())}updateGeometry({props:t,oldProps:e,changeFlags:n}){if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon)){const{polygonTesselator:e}=this.state,i=t.data.attributes||{};e.updateGeometry({data:t.data,normalize:t._normalize,geometryBuffer:i.getPolygon,buffers:i,getGeometry:t.getPolygon,positionFormat:t.positionFormat,wrapLongitude:t.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:n.dataChanged,full3d:t._full3d}),this.setState({numInstances:e.instanceCount,startIndices:e.vertexStarts}),n.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(){const{id:t,filled:e,extruded:n}=this.props;let i,r,o;if(e){const e=this.getShaders("top");e.defines.NON_INSTANCED_MODEL=1;const n=this.getAttributeManager().getBufferLayouts({isInstanced:!1});i=new la(this.context.device,{...e,id:`${t}-top`,topology:"triangle-list",uniforms:{isWireframe:!1},bufferLayout:n,isIndexed:!0,userData:{excludeAttributes:{instanceVertexValid:!0}}})}if(n){const e=this.getAttributeManager().getBufferLayouts({isInstanced:!0});r=new la(this.context.device,{...this.getShaders("side"),id:`${t}-side`,bufferLayout:e,uniforms:{isWireframe:!1},geometry:new Yu({topology:"triangle-strip",attributes:{positions:{size:2,value:new Float32Array([1,0,0,0,1,1,0,1])}}}),isInstanced:!0,userData:{excludeAttributes:{indices:!0}}}),o=new la(this.context.device,{...this.getShaders("side"),id:`${t}-wireframe`,bufferLayout:e,uniforms:{isWireframe:!0},geometry:new Yu({topology:"line-strip",attributes:{positions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),isInstanced:!0,userData:{excludeAttributes:{indices:!0}}})}return{models:[r,o,i].filter(Boolean),topModel:i,sideModel:r,wireframeModel:o}}calculateIndices(t){const{polygonTesselator:e}=this.state;t.startIndices=e.indexStarts,t.value=e.get("indices")}calculatePositions(t){const{polygonTesselator:e}=this.state;t.startIndices=e.vertexStarts,t.value=e.get("positions")}calculateVertexValid(t){t.value=this.state.polygonTesselator.get("vertexValid")}}const ad={circle:{type:Ju,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:ih,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:Mh,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},Ad={type:xg,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},ld={type:sd,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",_full3d:"_full3d",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function cd({type:t,props:e}){const n={};for(const i in e)n[i]=t.defaultProps[e[i]];return n}function ud(t,e){const{transitions:n,updateTriggers:i}=t.props,r={updateTriggers:{},transitions:n&&{getPosition:n.geometry}};for(const o in e){const s=e[o];let a=t.props[o];o.startsWith("get")&&(a=t.getSubLayerAccessor(a),r.updateTriggers[s]=i[o],n&&(r.transitions[s]=n[o])),r[s]=a}return r}function hd(t,e,n={}){const i={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:r=0,endRow:o=t.length}=n;for(let n=r;n<o;n++){const r=t[n],{geometry:o}=r;if(o)if("GeometryCollection"===o.type){ii.assert(Array.isArray(o.geometries),"GeoJSON does not have geometries array");const{geometries:t}=o;for(let o=0;o<t.length;o++){gd(t[o],i,e,r,n)}}else gd(o,i,e,r,n)}return i}function gd(t,e,n,i,r){const{type:o,coordinates:s}=t,{pointFeatures:a,lineFeatures:A,polygonFeatures:l,polygonOutlineFeatures:c}=e;if(function(t,e){let n=dd[t];ii.assert(n,`Unknown GeoJSON type ${t}`);for(;e&&--n>0;)e=e[0];return e&&Number.isFinite(e[0])}(o,s))switch(o){case"Point":a.push(n({geometry:t},i,r));break;case"MultiPoint":s.forEach((t=>{a.push(n({geometry:{type:"Point",coordinates:t}},i,r))}));break;case"LineString":A.push(n({geometry:t},i,r));break;case"MultiLineString":s.forEach((t=>{A.push(n({geometry:{type:"LineString",coordinates:t}},i,r))}));break;case"Polygon":l.push(n({geometry:t},i,r)),s.forEach((t=>{c.push(n({geometry:{type:"LineString",coordinates:t}},i,r))}));break;case"MultiPolygon":s.forEach((t=>{l.push(n({geometry:{type:"Polygon",coordinates:t}},i,r)),t.forEach((t=>{c.push(n({geometry:{type:"LineString",coordinates:t}},i,r))}))}))}else ii.warn(`${o} coordinates are malformed`)()}const dd={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function pd(t){return t.geometry.coordinates}function fd(t,e){const n={points:{},lines:{},polygons:{},polygonsOutline:{}},{points:i,lines:r,polygons:o}=t,s=function(t,e){const n={points:null,lines:null,polygons:null};for(const i in n){const r=t[i].globalFeatureIds.value;n[i]=new Uint8ClampedArray(3*r.length);const o=[];for(let t=0;t<r.length;t++)e(r[t],o),n[i][3*t+0]=o[0],n[i][3*t+1]=o[1],n[i][3*t+2]=o[2]}return n}(t,e);return n.points.data={length:i.positions.value.length/i.positions.size,attributes:{...i.attributes,getPosition:i.positions,instancePickingColors:{size:3,value:s.points}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},n.lines.data={length:r.pathIndices.value.length-1,startIndices:r.pathIndices.value,attributes:{...r.attributes,getPath:r.positions,instancePickingColors:{size:3,value:s.lines}},properties:r.properties,numericProps:r.numericProps,featureIds:r.featureIds},n.lines._pathType="open",n.polygons.data={length:o.polygonIndices.value.length-1,startIndices:o.polygonIndices.value,attributes:{...o.attributes,getPolygon:o.positions,pickingColors:{size:3,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.polygons._normalize=!1,o.triangles&&(n.polygons.data.attributes.indices=o.triangles.value),n.polygonsOutline.data={length:o.primitivePolygonIndices.value.length-1,startIndices:o.primitivePolygonIndices.value,attributes:{...o.attributes,getPath:o.positions,instancePickingColors:{size:3,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.polygonsOutline._pathType="open",n}const md=["points","linestrings","polygons"],Id={...cd(ad.circle),...cd(ad.icon),...cd(ad.text),...cd(Ad),...cd(ld),stroked:!0,filled:!0,extruded:!1,wireframe:!1,_full3d:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:t=>t.properties.icon},getText:{type:"accessor",value:t=>t.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class yd extends Mu{static{this.layerName="GeoJsonLayer"}static{this.defaultProps=Id}initializeState(){this.state={layerProps:{},features:{},featuresDiff:{}}}updateState({props:t,changeFlags:e}){if(!e.dataChanged)return;const{data:n}=this.props,i=n&&"points"in n&&"polygons"in n&&"lines"in n;this.setState({binary:i}),i?this._updateStateBinary({props:t,changeFlags:e}):this._updateStateJSON({props:t,changeFlags:e})}_updateStateBinary({props:t,changeFlags:e}){const n=fd(t.data,this.encodePickingColor);this.setState({layerProps:n})}_updateStateJSON({props:t,changeFlags:e}){const n=function(t){if(Array.isArray(t))return t;switch(ii.assert(t.type,"GeoJSON does not have type"),t.type){case"Feature":return[t];case"FeatureCollection":return ii.assert(Array.isArray(t.features),"GeoJSON does not have features array"),t.features;default:return[{geometry:t}]}}(t.data),i=this.getSubLayerRow.bind(this);let r={};const o={};if(Array.isArray(e.dataChanged)){const t=this.state.features;for(const e in t)r[e]=t[e].slice(),o[e]=[];for(const s of e.dataChanged){const e=hd(n,i,s);for(const n in t)o[n].push(Gg({data:r[n],getIndex:t=>t.__source.index,dataRange:s,replace:e[n]}))}}else r=hd(n,i);const s=function(t,e){const n={points:{},lines:{},polygons:{},polygonsOutline:{}},{pointFeatures:i,lineFeatures:r,polygonFeatures:o,polygonOutlineFeatures:s}=t;return n.points.data=i,n.points._dataDiff=e.pointFeatures&&(()=>e.pointFeatures),n.points.getPosition=pd,n.lines.data=r,n.lines._dataDiff=e.lineFeatures&&(()=>e.lineFeatures),n.lines.getPath=pd,n.polygons.data=o,n.polygons._dataDiff=e.polygonFeatures&&(()=>e.polygonFeatures),n.polygons.getPolygon=pd,n.polygonsOutline.data=s,n.polygonsOutline._dataDiff=e.polygonOutlineFeatures&&(()=>e.polygonOutlineFeatures),n.polygonsOutline.getPath=pd,n}(r,o);this.setState({features:r,featuresDiff:o,layerProps:s})}getPickingInfo(t){const e=super.getPickingInfo(t),{index:n,sourceLayer:i}=e;return e.featureType=md.find((t=>i.id.startsWith(`${this.id}-${t}-`))),n>=0&&i.id.startsWith(`${this.id}-points-text`)&&this.state.binary&&(e.index=this.props.data.points.globalFeatureIds.value[n]),e}_updateAutoHighlight(t){const e=`${this.id}-points-`,n="points"===t.featureType;for(const i of this.getSubLayers())i.id.startsWith(e)===n&&i.updateAutoHighlight(t)}_renderPolygonLayer(){const{extruded:t,wireframe:e}=this.props,{layerProps:n}=this.state,i="polygons-fill",r=this.shouldRenderSubLayer(i,n.polygons?.data)&&this.getSubLayerClass(i,ld.type);if(r){const o=ud(this,ld.props),s=t&&e;return s||delete o.getLineColor,o.updateTriggers.lineColors=s,new r(o,this.getSubLayerProps({id:i,updateTriggers:o.updateTriggers}),n.polygons)}return null}_renderLineLayers(){const{extruded:t,stroked:e}=this.props,{layerProps:n}=this.state,i="polygons-stroke",r="linestrings",o=!t&&e&&this.shouldRenderSubLayer(i,n.polygonsOutline?.data)&&this.getSubLayerClass(i,Ad.type),s=this.shouldRenderSubLayer(r,n.lines?.data)&&this.getSubLayerClass(r,Ad.type);if(o||s){const t=ud(this,Ad.props);return[o&&new o(t,this.getSubLayerProps({id:i,updateTriggers:t.updateTriggers}),n.polygonsOutline),s&&new s(t,this.getSubLayerProps({id:r,updateTriggers:t.updateTriggers}),n.lines)]}return null}_renderPointLayers(){const{pointType:t}=this.props,{layerProps:e,binary:n}=this.state;let{highlightedObjectIndex:i}=this.props;!n&&Number.isFinite(i)&&(i=e.points.data.findIndex((t=>t.__source.index===i)));const r=new Set(t.split("+")),o=[];for(const t of r){const r=`points-${t}`,s=ad[t],a=s&&this.shouldRenderSubLayer(r,e.points?.data)&&this.getSubLayerClass(r,s.type);if(a){const A=ud(this,s.props);let l=e.points;if("text"===t&&n){const{instancePickingColors:t,...e}=l.data.attributes;l={...l,data:{...l.data,attributes:e}}}o.push(new a(A,this.getSubLayerProps({id:r,updateTriggers:A.updateTriggers,highlightedObjectIndex:i}),l))}}return o}renderLayers(){const{extruded:t}=this.props,e=this._renderPolygonLayer();return[!t&&e,this._renderLineLayers(),this._renderPointLayers(),t&&e]}getSubLayerAccessor(t){const{binary:e}=this.state;return e&&"function"==typeof t?(e,n)=>{const{data:i,index:r}=n,o=function(t,e){if(!t)return null;const n="startIndices"in t?t.startIndices[e]:e,i=t.featureIds.value[n];return-1!==n?function(t,e,n){const i={properties:{...t.properties[e]}};for(const e in t.numericProps)i.properties[e]=t.numericProps[e].value[n];return i}(t,i,n):null}(i,r);return t(o,n)}:super.getSubLayerAccessor(t)}}const Cd=function(t,e,n){void 0===n&&(n={});var i=Qe(t),r=Qe(e),o=ve.union(i.coordinates,r.coordinates);return 0===o.length?null:1===o.length?u(o[0],n.properties):m(o,n.properties)};function Ed(t){var e={type:"Feature"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}})),e.properties=_d(t.properties),e.geometry=vd(t.geometry),e}function _d(t){var e={};return t?(Object.keys(t).forEach((function(n){var i=t[n];"object"==typeof i?null===i?e[n]=null:Array.isArray(i)?e[n]=i.map((function(t){return t})):e[n]=_d(i):e[n]=i})),e):e}function vd(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return vd(t)})),e):(e.coordinates=Bd(t.coordinates),e)}function Bd(t){var e=t;return"object"!=typeof e[0]?e.slice():e.map((function(t){return Bd(t)}))}const wd=function(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Ed(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}})),e.features=t.features.map((function(t){return Ed(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return vd(t);default:throw new Error("unknown GeoJSON type")}};function bd(t){for(var e,n,i=we(t),r=0,o=1;o<i.length;)e=n||i[0],r+=((n=i[o])[0]-e[0])*(n[1]+e[1]),o++;return r>0}function Qd(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return Q(t,(function(t){Qd(t,e)})),t;case"LineString":return xd(we(t),e),t;case"Polygon":return Dd(we(t),e),t;case"MultiLineString":return we(t).forEach((function(t){xd(t,e)})),t;case"MultiPolygon":return we(t).forEach((function(t){Dd(t,e)})),t;case"Point":case"MultiPoint":return t}}function xd(t,e){bd(t)===e&&t.reverse()}function Dd(t,e){bd(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)bd(t[n])===e&&t[n].reverse()}const Sd=function(t,e){if(!B(e=e||{}))throw new Error("options is invalid");var n=e.reverse||!1,i=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof i)throw new Error("<mutate> must be a boolean");!1===i&&(t=wd(t));var r=[];switch(t.type){case"GeometryCollection":return Q(t,(function(t){Qd(t,n)})),t;case"FeatureCollection":return b(t,(function(t){b(Qd(t,n),(function(t){r.push(t)}))})),p(r)}return Qd(t,n)};function Md(t,e,n){if(!Array.isArray(t[0]))return!0;for(let i=0;i<t.length;i++)if(Md(t[i],[...e,i],n)){n(t,e);break}return!1}function kd(t,e,n){const i={type:"LineString",coordinates:[t,e]},r=c(n),o=je(r,i),s=Fe(t,e),a=(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])<0?s-90:s-270,A=Le(e,o,a),l=Le(t,o,a);return[A.geometry.coordinates,l.geometry.coordinates]}function Rd(t,e,n,i){const r=t-n,o=e-i;return Math.sqrt(r*r+o*o)}function Nd(t){const e=Ld(t);return e.length?e[0]:null}function Pd(t){return Ld(t).find((({properties:t})=>t.featureIndex>=0&&"existing"===t.editHandleType))}function Td(t){return Ld(t).find((({properties:t})=>t.featureIndex>=0&&"intermediate"===t.editHandleType))}function Ld(t){return t&&t.filter((t=>t.isGuide&&"editHandle"===t.object.properties.guideType)).map((t=>t.object))||[]}function Fd(t,e,n="existing"){let i=[];switch(t.type){case"Point":i=[{type:"Feature",properties:{guideType:"editHandle",editHandleType:n,positionIndexes:[],featureIndex:e},geometry:{type:"Point",coordinates:t.coordinates}}];break;case"MultiPoint":case"LineString":i=i.concat(Od(t.coordinates,[],e,n));break;case"Polygon":case"MultiLineString":for(let r=0;r<t.coordinates.length;r++)i=i.concat(Od(t.coordinates[r],[r],e,n)),"Polygon"===t.type&&(i=i.slice(0,-1));break;case"MultiPolygon":for(let r=0;r<t.coordinates.length;r++)for(let o=0;o<t.coordinates[r].length;o++)i=i.concat(Od(t.coordinates[r][o],[r,o],e,n)),i=i.slice(0,-1);break;default:throw Error(`Unhandled geometry type: ${t.type}`)}return i}function Od(t,e,n,i="existing"){const r=[];for(let o=0;o<t.length;o++){const s=t[o];r.push({type:"Feature",properties:{guideType:"editHandle",positionIndexes:[...e,o],featureIndex:n,editHandleType:i},geometry:{type:"Point",coordinates:s}})}return r}function Gd(t,e){return"number"==typeof t[0]?!isNaN(t[0])&&isFinite(t[0])?e(t):t:t.map((t=>Gd(t,e))).filter(Boolean)}class Ud{featureCollection;constructor(t){this.featureCollection=t}getObject(){return this.featureCollection}replacePosition(t,e,n){const i=this.featureCollection.features[t].geometry,r="Polygon"===i.type||"MultiPolygon"===i.type,o={...i,coordinates:Yd(i.coordinates,e,n,r)};return this.replaceGeometry(t,o)}removePosition(t,e){const n=this.featureCollection.features[t].geometry;if("Point"===n.type)throw Error("Can't remove a position from a Point or there'd be nothing left");if("MultiPoint"===n.type&&n.coordinates.length<2)throw Error("Can't remove the last point of a MultiPoint or there'd be nothing left");if("LineString"===n.type&&n.coordinates.length<3)throw Error("Can't remove position. LineString must have at least two positions");if("Polygon"===n.type&&n.coordinates[0].length<5&&Array.isArray(e)&&0===e[0])throw Error("Can't remove position. Polygon's outer ring must have at least four positions");if("MultiLineString"===n.type&&1===n.coordinates.length&&n.coordinates[0].length<3)throw Error("Can't remove position. MultiLineString must have at least two positions");if("MultiPolygon"===n.type&&1===n.coordinates.length&&n.coordinates[0][0].length<5&&Array.isArray(e)&&0===e[0]&&0===e[1])throw Error("Can't remove position. MultiPolygon's outer ring must have at least four positions");const i="Polygon"===n.type||"MultiPolygon"===n.type,r={...n,coordinates:Kd(n.coordinates,e,i)};return function(t){switch(t.type){case"Polygon":!function(t){const e=t.coordinates;for(let t=1;t<e.length;t++)Jd(e,t)&&t--}(t);break;case"MultiLineString":!function(t){for(let e=0;e<t.coordinates.length;e++){1===t.coordinates[e].length&&(t.coordinates.splice(e,1),e--)}}(t);break;case"MultiPolygon":!function(t){for(let e=0;e<t.coordinates.length;e++){const n=t.coordinates[e];n[0].length<=3&&(t.coordinates.splice(e,1),e--);for(let t=1;t<n.length;t++)Jd(n,t)&&t--}}(t)}}(r),this.replaceGeometry(t,r)}addPosition(t,e,n){const i=this.featureCollection.features[t].geometry;if("Point"===i.type)throw new Error("Unable to add a position to a Point feature");const r="Polygon"===i.type||"MultiPolygon"===i.type,o={...i,coordinates:zd(i.coordinates,e,n,r)};return this.replaceGeometry(t,o)}replaceGeometry(t,e){const n={...this.featureCollection.features[t],geometry:e},i={...this.featureCollection,features:[...this.featureCollection.features.slice(0,t),n,...this.featureCollection.features.slice(t+1)]};return new Ud(i)}addFeature(t){return this.addFeatures([t])}addFeatures(t){const e={...this.featureCollection,features:[...this.featureCollection.features,...t]};return new Ud(e)}deleteFeature(t){return this.deleteFeatures([t])}deleteFeatures(t){const e=[...this.featureCollection.features];t.sort();for(let n=t.length-1;n>=0;n--){const i=t[n];i>=0&&i<e.length&&e.splice(i,1)}const n={...this.featureCollection,features:e};return new Ud(n)}}function jd(t,e){if(2===t.length&&3===e.length){const n=e[2];return[t[0],t[1],n]}return t}function Yd(t,e,n,i){if(!e)return t;if(0===e.length)return jd(n,t);if(1===e.length){const r=[...t.slice(0,e[0]),jd(n,t[e[0]]),...t.slice(e[0]+1)];return!i||0!==e[0]&&e[0]!==t.length-1||(r[0]=jd(n,t[0]),r[t.length-1]=jd(n,t[0])),r}return[...t.slice(0,e[0]),Yd(t[e[0]],e.slice(1,e.length),n,i),...t.slice(e[0]+1)]}function Kd(t,e,n){if(!e)return t;if(0===e.length)throw Error("Must specify the index of the position to remove");if(1===e.length){const i=[...t.slice(0,e[0]),...t.slice(e[0]+1)];return!n||0!==e[0]&&e[0]!==t.length-1||(0===e[0]?i[i.length-1]=i[0]:e[0]===t.length-1&&(i[0]=i[i.length-1])),i}return[...t.slice(0,e[0]),Kd(t[e[0]],e.slice(1,e.length),n),...t.slice(e[0]+1)]}function zd(t,e,n,i){if(!e)return t;if(0===e.length)throw Error("Must specify the index of the position to remove");if(1===e.length){return[...t.slice(0,e[0]),n,...t.slice(e[0])]}return[...t.slice(0,e[0]),zd(t[e[0]],e.slice(1,e.length),n,i),...t.slice(e[0]+1)]}function Jd(t,e){return t[e].length<=3&&(t.splice(e,1),!0)}const qd={type:"FeatureCollection",features:[]},Hd=[];class Vd{_clickSequence=[];getGuides(t){return qd}getTooltips(t){return Hd}getSelectedFeature(t){return 1===t.selectedIndexes.length?t.data.features[t.selectedIndexes[0]]:null}getSelectedGeometry(t){const e=this.getSelectedFeature(t);return e?e.geometry:null}getSelectedFeaturesAsFeatureCollection(t){const{features:e}=t.data;return{type:"FeatureCollection",features:t.selectedIndexes.map((t=>e[t]))}}getClickSequence(){return this._clickSequence}addClickSequence({mapCoords:t}){this._clickSequence.push(t)}resetClickSequence(){this._clickSequence=[]}getTentativeGuide(t){return this.getGuides(t).features.find((t=>t.properties&&"tentative"===t.properties.guideType))}isSelectionPicked(t,e){if(!t.length)return!1;const n=function(t){return t&&t.filter((t=>!t.isGuide))}(t).map((({index:t})=>t)),i=Ld(t).map((({properties:t})=>t.featureIndex)),r=new Set([...n,...i]);return e.selectedIndexes.some((t=>r.has(t)))}rewindPolygon(t){const{geometry:e}=t;return"Polygon"===e.type||"MultiPolygon"===e.type?Sd(t):t}getAddFeatureAction(t,e){const n=t,i="Feature"===n.type?n:{type:"Feature",properties:{},geometry:n},r=this.rewindPolygon(i),o=new Ud(e).addFeature(r).getObject();return{updatedData:o,editType:"addFeature",editContext:{featureIndexes:[o.features.length-1]}}}getAddManyFeaturesAction({features:t},e){let n=new Ud(e);const i=n.getObject().features.length,r=[];for(const e of t){const{properties:t,geometry:o}=e,s=o;n=n.addFeature({type:"Feature",properties:t,geometry:s}),r.push(i+r.length)}return{updatedData:n.getObject(),editType:"addFeature",editContext:{featureIndexes:r}}}getAddFeatureOrBooleanPolygonAction(t,e){const n=t,i=this.getSelectedFeature(e),{modeConfig:r}=e;if(r&&r.booleanOperation){if(!i||"Polygon"!==i.geometry.type&&"MultiPolygon"!==i.geometry.type)return console.warn("booleanOperation only supported for single Polygon or MultiPolygon selection"),null;const t="Feature"===n.type?n:{type:"Feature",geometry:n};let o;if("union"===r.booleanOperation)o=Cd(i,t);else if("difference"===r.booleanOperation)o=xe(i,t);else{if("intersection"!==r.booleanOperation)return console.warn(`Invalid booleanOperation ${r.booleanOperation}`),null;o=function(t,e,n){void 0===n&&(n={});var i=Qe(t),r=Qe(e),o=ve.intersection(i.coordinates,r.coordinates);return 0===o.length?null:1===o.length?u(o[0],n.properties):m(o,n.properties)}(i,t)}if(!o)return console.warn("Canceling edit. Boolean operation erased entire polygon."),null;const s=e.selectedIndexes[0];return{updatedData:new Ud(e.data).replaceGeometry(s,o.geometry).getObject(),editType:"unionGeometry",editContext:{featureIndexes:[s]}}}return this.getAddFeatureAction(t,e.data)}createTentativeFeature(t){return null}handleClick(t,e){}handlePointerMove(t,e){const n=this.createTentativeFeature(e);n&&e.onEdit({updatedData:e.data,editType:"updateTentativeFeature",editContext:{feature:n}})}handleStartDragging(t,e){}handleStopDragging(t,e){}handleDragging(t,e){}handleKeyUp(t,e){"Escape"===t.key&&(this.resetClickSequence(),e.onEdit({updatedData:e.data,editType:"cancelFeature",editContext:{}}))}}function Wd(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}class Zd extends Vd{}function Xd(t,e){var n=E(t[1]),i=E(e[1]),r=E(e[0]-t[0]);r>Math.PI&&(r-=2*Math.PI),r<-Math.PI&&(r+=2*Math.PI);var o=Math.log(Math.tan(i/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(C(Math.atan2(r,o))+360)%360}const $d=function(t,e,n){var i;return void 0===n&&(n={}),(i=n.final?Xd(Be(e),Be(t)):Xd(Be(t),Be(e)))>180?-(360-i):i};const tp=function(t,e,n,i){void 0===i&&(i={});var r=e<0,o=_(Math.abs(e),i.units,"meters");r&&(o=-Math.abs(o));var s=Be(t),A=function(t,e,n,i){i=void 0===i?a:Number(i);var r=e/i,o=t[0]*Math.PI/180,s=E(t[1]),A=E(n),l=r*Math.cos(A),c=s+l;Math.abs(c)>Math.PI/2&&(c=c>0?Math.PI-c:-Math.PI-c);var u=Math.log(Math.tan(c/2+Math.PI/4)/Math.tan(s/2+Math.PI/4)),h=Math.abs(u)>1e-11?l/u:Math.cos(s),g=r*Math.sin(A)/h,d=o+g;return[(180*d/Math.PI+540)%360-180,180*c/Math.PI]}(s,o,n);return A[0]+=A[0]-s[0]>180?-360:s[0]-A[0]>180?360:0,c(A,i.properties)};class ep extends Vd{_geometryBeforeTranslate;_isTranslatable=void 0;handleDragging(t,e){if(this._isTranslatable){if(this._geometryBeforeTranslate){const n=this.getTranslateAction(t.pointerDownMapCoords,t.mapCoords,"translating",e);n&&e.onEdit(n)}t.cancelPan()}}handlePointerMove(t,e){this._isTranslatable=this.isSelectionPicked(t.pointerDownPicks||t.picks,e),this.updateCursor(e)}handleStartDragging(t,e){this._isTranslatable&&(this._geometryBeforeTranslate=this.getSelectedFeaturesAsFeatureCollection(e))}handleStopDragging(t,e){if(this._geometryBeforeTranslate){const n=this.getTranslateAction(t.pointerDownMapCoords,t.mapCoords,"translated",e);n&&e.onEdit(n),this._geometryBeforeTranslate=null}}updateCursor(t){this._isTranslatable?t.onUpdateCursor("move"):t.onUpdateCursor(null)}getTranslateAction(t,e,n,i){if(!this._geometryBeforeTranslate)return null;let r=new Ud(i.data);const o=i.selectedIndexes,{viewport:s,screenSpace:a}=i.modeConfig||{};if(s&&a){const n=s.project?s:new xn(s),i=n.project(t),a=n.project(e),A=a[0]-i[0],l=a[1]-i[1];for(let t=0;t<o.length;t++){const e=o[t],i=this._geometryBeforeTranslate.features[t];let s=i.geometry.coordinates;s&&(s=Gd(s,(t=>{const e=n.project(t);return e?(e[0]+=A,e[1]+=l,n.unproject(e)):null})),r=r.replaceGeometry(e,{type:i.geometry.type,coordinates:s}))}}else{const n=c(t),i=c(e),s=De(n,i),a=Fe(n,i),A=this._geometryBeforeTranslate.features.map((t=>function(t,e,n){const i=P(t),r=tp(i,e,n),o=Gd(t.geometry.coordinates,(t=>{const e=Oe(i.geometry.coordinates,t),n=$d(i.geometry.coordinates,t);return tp(r.geometry.coordinates,e,n).geometry.coordinates}));return t.geometry.coordinates=o,t}(wd(t),s,a)));for(let t=0;t<o.length;t++){const e=o[t],n=A[t];r=r.replaceGeometry(e,n.geometry)}}return{updatedData:r.getObject(),editType:n,editContext:{featureIndexes:o}}}}class np extends Vd{getGuides(t){const e=[],{data:n,lastPointerMoveEvent:i}=t,{features:r}=n,o=i&&i.picks,s=i&&i.mapCoords;for(const n of t.selectedIndexes)if(n<r.length){const{geometry:t}=r[n];e.push(...Fd(t,n))}else console.warn(`selectedFeatureIndexes out of range ${n}`);if(o&&o.length&&s){const n=!Pd(o)&&o.find((t=>!t.isGuide));if(n&&!n.object.geometry.type.includes("Point")&&(!t.modeConfig?.lockRectangles||"Rectangle"!==n.object.properties.shape)&&t.selectedIndexes.includes(n.index)){let i=null,r=[];const o=c(s);if(Md(n.object.geometry.coordinates,[],((e,n)=>{const s=h(e),a=this.getNearestPoint(s,o,t.modeConfig&&t.modeConfig.viewport);(!i||a.properties.dist<i.properties.dist)&&(i=a,r=n)})),i){const{geometry:{coordinates:t},properties:{index:o}}=i;e.push({type:"Feature",properties:{guideType:"editHandle",editHandleType:"intermediate",featureIndex:n.index,positionIndexes:[...r,o+1]},geometry:{type:"Point",coordinates:t}})}}}return{type:"FeatureCollection",features:e}}getNearestPoint(t,e,n){const{coordinates:i}=t.geometry;if(i.some((t=>t.length>2))){if(n)return function(t,e,n){const i=new xn(n),r=t.geometry.coordinates.map((([t,e,n=0])=>i.project([t,e,n]))),[o,s]=i.project(e.geometry.coordinates);let a=1/0,A={};r.forEach((([t,e],n)=>{if(0===n)return;const[i,l]=r[n-1],c=l-e,u=t-i,h=i*e-t*l,g=c*c+u*u,d=Math.abs(c*o+u*s+h)/Math.sqrt(g);d<a&&(a=d,A={index:n,x0:(u*(u*o-c*s)-c*h)/g,y0:(c*(-u*o+c*s)-u*h)/g})}));const{index:l,x0:c,y0:u}=A,[h,g,d=0]=r[l-1],[p,f,m=0]=r[l],I=Rd(h,g,p,f),y=function(t,e,n){return e*n+t*(1-n)}(d,m,Rd(h,g,c,u)/I);return{type:"Feature",geometry:{type:"Point",coordinates:i.unproject([c,u,y])},properties:{dist:a,index:l-1}}}(t,e,n);console.log("Editing 3D point but modeConfig.viewport not provided. Falling back to 2D logic.")}return function(t,e,n){let i;n&&(i=new xn(n));let r=c([1/0,1/0],{dist:1/0});return!t.geometry?.coordinates.length||t.geometry?.coordinates.length<2||x(t,(t=>{const n=we(t),o=we(e);let s,a,A,l,u,h,g;if(n.length>1&&o.length){let t,e;i?(t=n.map((t=>i.project(t))),e=i.project(o)):(t=n,e=o);for(let n=1;n<t.length;n++){if(t[n][0]!==t[n-1][0]){const i=(t[n][1]-t[n-1][1])/(t[n][0]-t[n-1][0]),r=t[n][1]-i*t[n][0];g=Math.abs(i*e[0]+r-e[1])/Math.sqrt(i*i+1)}else g=Math.abs(e[0]-t[n][0]);const i=Math.pow(t[n][1]-t[n-1][1],2)+Math.pow(t[n][0]-t[n-1][0],2),r=Math.pow(t[n][1]-e[1],2)+Math.pow(t[n][0]-e[0],2),o=Math.pow(t[n-1][1]-e[1],2)+Math.pow(t[n-1][0]-e[0],2),l=Math.pow(g,2),c=r-l+o-l;c>i&&(g=Math.sqrt(Math.min(r,o))),(null==s||s>g)&&(c>i?o<r?(a=0,A=1):(A=0,a=1):(a=Math.sqrt(o-l)/Math.sqrt(i),A=Math.sqrt(r-l)/Math.sqrt(i)),s=g,h=n)}const r=t[h-1][0]-t[h][0],c=t[h-1][1]-t[h][1];l=t[h-1][0]-r*a,u=t[h-1][1]-c*a}let d={x:l,y:u,idx:h-1,to:a,from:A};if(i){const t=i.unproject([d.x,d.y]);d={x:t[0],y:t[1],idx:h-1,to:a,from:A}}r=c([d.x,d.y],{dist:Math.abs(d.from-d.to),index:d.idx})})),r}(t,e,n)}handleClick(t,e){const n=Pd(t.picks),i=Td(t.picks);if(n){const{featureIndex:t,positionIndexes:i}=n.properties;let r;try{r=new Ud(e.data).removePosition(t,i).getObject()}catch(t){}r&&e.onEdit({updatedData:r,editType:"removePosition",editContext:{featureIndexes:[t],positionIndexes:i,position:n.geometry.coordinates}})}else if(i){const{featureIndex:t,positionIndexes:n}=i.properties,r=e.data.features[t];if(!(e.modeConfig?.lockRectangles&&"Rectangle"===r?.properties.shape)){const r=new Ud(e.data).addPosition(t,n,i.geometry.coordinates).getObject();r&&e.onEdit({updatedData:r,editType:"addPosition",editContext:{featureIndexes:[t],positionIndexes:n,position:i.geometry.coordinates}})}}}handleDragging(t,e){const n=Nd(t.pointerDownPicks);n&&(t.cancelPan(),this._dragEditHandle("movePosition",e,n,t))}_dragEditHandle(t,e,n,i){const r=n.properties,o=e.data.features[r.featureIndex];let s;if(e.modeConfig?.lockRectangles&&"Rectangle"===o.properties.shape){const t=function(t,e,n){const i=t.geometry.coordinates;if(!i)return null;const r=i[0].slice(0,4);r[e%4]=n;const o=r[(e+2)%4],s=r[e%4];return r[(e+1)%4]=[s[0],o[1]],r[(e+3)%4]=[o[0],s[1]],[[...r,r[0]]]}(o,r.positionIndexes[1],i.mapCoords);s=new Ud(e.data).replaceGeometry(r.featureIndex,{coordinates:t,type:"Polygon"}).getObject()}else s=new Ud(e.data).replacePosition(r.featureIndex,r.positionIndexes,i.mapCoords).getObject();e.onEdit({updatedData:s,editType:t,editContext:{featureIndexes:[r.featureIndex],positionIndexes:r.positionIndexes,position:i.mapCoords}})}handlePointerMove(t,e){const n=this.getCursor(t);e.onUpdateCursor(n)}handleStartDragging(t,e){const n=e.selectedIndexes,i=Td(t.picks);if(n.length&&i){const n=i.properties,r=new Ud(e.data).addPosition(n.featureIndex,n.positionIndexes,t.mapCoords).getObject();e.onEdit({updatedData:r,editType:"addPosition",editContext:{featureIndexes:[n.featureIndex],positionIndexes:n.positionIndexes,position:t.mapCoords}})}}handleStopDragging(t,e){const n=e.selectedIndexes,i=Nd(t.picks);n.length&&i&&this._dragEditHandle("finishMovePosition",e,i,t)}getCursor(t){return Ld(t&&t.picks||[]).length?"cell":null}}const ip=function(t,e){void 0===e&&(e={});var n=0,i=0,r=0;return w(t,(function(t){n+=t[0],i+=t[1],r++}),!0),c([n/r,i/r],e.properties)};function rp(t,e){void 0===e&&(e={});var n=Qe(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),n.type){case"Polygon":return function(t,e){void 0===e&&(e={});var n=Qe(t),i=n.coordinates,r=e.properties?e.properties:"Feature"===t.type?t.properties:{};return op(i,r)}(n,e);case"MultiPolygon":return function(t,e){void 0===e&&(e={});var n=Qe(t),i=n.coordinates,r=e.properties?e.properties:"Feature"===t.type?t.properties:{},o=[];return i.forEach((function(t){o.push(op(t,r))})),p(o)}(n,e);default:throw new Error("invalid poly")}}function op(t,e){return t.length>1?f(t,e):h(t[0],e)}function sp(t){var e=[1/0,1/0,-1/0,-1/0];return w(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}sp.default=sp;const ap=sp;function Ap(t,e,n){var i,r="Point"===("FeatureCollection"===(i=t).type?"FeatureCollection":"GeometryCollection"===i.type?"GeometryCollection":"Feature"===i.type&&null!==i.geometry?i.geometry.type:i.type);return n=function(t,e){null==e&&(e="centroid");if(Array.isArray(e)||"object"==typeof e)return Be(e);var n=t.bbox?t.bbox:ap(t),i=n[0],r=n[1],o=n[2],s=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return c([i,r]);case"se":case"southeast":case"eastsouth":case"bottomright":return c([o,r]);case"nw":case"northwest":case"westnorth":case"topleft":return c([i,s]);case"ne":case"northeast":case"eastnorth":case"topright":return c([o,s]);case"center":return P(t);case void 0:case null:case"centroid":return ip(t);default:throw new Error("invalid origin")}}(t,n),1===e||r||w(t,(function(t){var i=Oe(n,t),r=$d(n,t),o=we(tp(n,i*e,r));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)})),t}const lp=function(t,e,n){if(!B(n=n||{}))throw new Error("options is invalid");var i=n.origin,r=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(i)||"object"==typeof i;return!0!==r&&(t=wd(t)),"FeatureCollection"!==t.type||o?Ap(t,e,i):(b(t,(function(n,r){t.features[r]=Ap(n,e,i)})),t)};class cp extends Vd{_geometryBeingScaled;_selectedEditHandle;_cornerGuidePoints=[];_cursor;_isScaling=!1;_isSinglePointGeometrySelected=t=>{const{features:e}=t||{};if(Array.isArray(e)&&1===e.length){const{type:t}=Qe(e[0]);return"Point"===t}return!1};_getOppositeScaleHandle=t=>{const e=t&&t.properties&&Array.isArray(t.properties.positionIndexes)&&t.properties.positionIndexes[0];if("number"!=typeof e)return null;const n=this._cornerGuidePoints.length,i=(e+n/2)%n;return this._cornerGuidePoints.find((t=>!!Array.isArray(t.properties.positionIndexes)&&t.properties.positionIndexes[0]===i))||null};_getUpdatedData=(t,e)=>{let n=new Ud(t.data);const i=t.selectedIndexes;for(let t=0;t<i.length;t++){const r=i[t],o=e.features[t];n=n.replaceGeometry(r,o.geometry)}return n.getObject()};isEditHandleSelected=()=>Boolean(this._selectedEditHandle);getScaleAction=(t,e,n,i)=>{if(!this._selectedEditHandle)return null;const r=Be(this._getOppositeScaleHandle(this._selectedEditHandle)),o=function(t,e,n){const i=De(t,e),r=De(t,n);return r/i}(r,t,e),s=lp(this._geometryBeingScaled,o,{origin:r});return{updatedData:this._getUpdatedData(i,s),editType:n,editContext:{featureIndexes:i.selectedIndexes}}};updateCursor=t=>{if(this._selectedEditHandle){this._cursor&&t.onUpdateCursor(this._cursor);const e=this.getSelectedFeaturesAsFeatureCollection(t),n=Fe(ip(e),this._selectedEditHandle),i=n<0?n+180:n;i>=0&&i<=90||i>=180&&i<=270?(this._cursor="nesw-resize",t.onUpdateCursor("nesw-resize")):(this._cursor="nwse-resize",t.onUpdateCursor("nwse-resize"))}else t.onUpdateCursor(null),this._cursor=null};handlePointerMove(t,e){if(!this._isScaling){const n=Nd(t.picks);this._selectedEditHandle=n&&"scale"===n.properties.editHandleType?n:null,this.updateCursor(e)}}handleStartDragging(t,e){this._selectedEditHandle&&(this._isScaling=!0,this._geometryBeingScaled=this.getSelectedFeaturesAsFeatureCollection(e))}handleDragging(t,e){if(!this._isScaling)return;e.onUpdateCursor(this._cursor);const n=this.getScaleAction(t.pointerDownMapCoords,t.mapCoords,"scaling",e);n&&e.onEdit(n),t.cancelPan()}handleStopDragging(t,e){if(this._isScaling){const n=this.getScaleAction(t.pointerDownMapCoords,t.mapCoords,"scaled",e);n&&e.onEdit(n),e.onUpdateCursor(null),this._geometryBeingScaled=null,this._selectedEditHandle=null,this._cursor=null,this._isScaling=!1}}getGuides(t){this._cornerGuidePoints=[];const e=this.getSelectedFeaturesAsFeatureCollection(t);if(this._isSinglePointGeometrySelected(e))return{type:"FeatureCollection",features:[]};const n=k(M(e));n.properties.mode="scale";const i=[];return w(n,((t,e)=>{if(e<4){const n=c(t,{guideType:"editHandle",editHandleType:"scale",positionIndexes:[e]});i.push(n)}})),this._cornerGuidePoints=i,p([rp(n),...this._cornerGuidePoints])}}const up=function(t,e,n){if(!B(n=n||{}))throw new Error("options is invalid");var i=n.pivot,r=n.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("angle is required");return 0===e||(i||(i=ip(t)),!1!==r&&void 0!==r||(t=wd(t)),w(t,(function(t){var n=$d(i,t)+e,r=Oe(i,t),o=we(tp(i,r,n));t[0]=o[0],t[1]=o[1]}))),t};class hp extends Vd{_selectedEditHandle;_geometryBeingRotated;_isRotating=!1;_isSinglePointGeometrySelected=t=>{const{features:e}=t||{};if(Array.isArray(e)&&1===e.length){const{type:t}=Qe(e[0]);return"Point"===t}return!1};getIsRotating=()=>this._isRotating;getGuides(t){const e=this._geometryBeingRotated||this.getSelectedFeaturesAsFeatureCollection(t);if(this._isSinglePointGeometrySelected(e))return{type:"FeatureCollection",features:[]};if(this._isRotating)return p([ip(e)]);const n=k(M(e));let i=null,r=null,o=0;w(n,(t=>{if(i){const e=Wd(t,i);(!r||e[1]>r[1])&&(r=e);const n=De(t,i);o=Math.max(o,n)}i=t}));const s=r&&[r[0],r[1]+o/1e3],a=h([r,s]),A=c(s,{guideType:"editHandle",editHandleType:"rotate"});return p([rp(n),A,a])}handleDragging(t,e){if(!this._isRotating)return;const n=this.getRotateAction(t.pointerDownMapCoords,t.mapCoords,"rotating",e);n&&e.onEdit(n),t.cancelPan()}handlePointerMove(t,e){if(!this._isRotating){const e=Nd(t.picks);this._selectedEditHandle=e&&"rotate"===e.properties.editHandleType?e:null}this.updateCursor(e)}handleStartDragging(t,e){this._selectedEditHandle&&(this._isRotating=!0,this._geometryBeingRotated=this.getSelectedFeaturesAsFeatureCollection(e))}handleStopDragging(t,e){if(this._isRotating){const n=this.getRotateAction(t.pointerDownMapCoords,t.mapCoords,"rotated",e);n&&e.onEdit(n),this._geometryBeingRotated=null,this._selectedEditHandle=null,this._isRotating=!1}}updateCursor(t){this._selectedEditHandle?t.onUpdateCursor("crosshair"):t.onUpdateCursor(null)}getRotateAction(t,e,n,i){if(!this._geometryBeingRotated)return null;const r=ip(this._geometryBeingRotated),o=function(t,e,n){const i=Fe(t,e),r=Fe(t,n);return r-i}(r,t,e),s=up(this._geometryBeingRotated,o,{pivot:r});let a=new Ud(i.data);const A=i.selectedIndexes;for(let t=0;t<A.length;t++){const e=A[t],n=s.features[t];a=a.replaceGeometry(e,n.geometry)}return{updatedData:a.getObject(),editType:n,editContext:{featureIndexes:A}}}}function gp(t,e,n){var i=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var r=0,o=e.length-1;r<e.length;o=r++){var s=e[r][0],a=e[r][1],A=e[o][0],l=e[o][1];if(t[1]*(s-A)+a*(A-t[0])+l*(t[0]-s)==0&&(s-t[0])*(A-t[0])<=0&&(a-t[1])*(l-t[1])<=0)return!n;a>t[1]!=l>t[1]&&t[0]<(A-s)*(t[1]-a)/(l-a)+s&&(i=!i)}return i}const dp=function(t){if(!t)throw new Error("geojson is required");var e=[];return x(t,(function(t){!function(t,e){var n=[],i=t.geometry;if(null!==i){switch(i.type){case"Polygon":n=we(i);break;case"LineString":n=[we(i)]}n.forEach((function(n){var i=function(t,e){var n=[];return t.reduce((function(t,i){var r=h([t,i],e);return r.bbox=function(t,e){var n=t[0],i=t[1],r=e[0],o=e[1],s=n<r?n:r,a=i<o?i:o,A=n>r?n:r,l=i>o?i:o;return[s,a,A,l]}(t,i),n.push(r),i})),n}(n,t.properties);i.forEach((function(t){t.id=e.length,e.push(t)}))}))}}(t,e)})),p(e)};var pp=g(9565);function fp(t,e){var n=we(t),i=we(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==i.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var r=n[0][0],o=n[0][1],s=n[1][0],a=n[1][1],A=i[0][0],l=i[0][1],u=i[1][0],h=i[1][1],g=(h-l)*(s-r)-(u-A)*(a-o),d=(u-A)*(o-l)-(h-l)*(r-A),p=(s-r)*(o-l)-(a-o)*(r-A);if(0===g)return null;var f=d/g,m=p/g;return f>=0&&f<=1&&m>=0&&m<=1?c([r+f*(s-r),o+f*(a-o)]):null}const mp=function(t,e){var n={},i=[];if("LineString"===t.type&&(t=l(t)),"LineString"===e.type&&(e=l(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var r=fp(t,e);return r&&i.push(r),p(i)}var o=pp();return o.load(dp(e)),b(dp(t),(function(t){b(o.search(t),(function(e){var r=fp(t,e);if(r){var o=we(r).join(",");n[o]||(n[o]=!0,i.push(r))}}))})),p(i)};const Ip=function(t,e,n){void 0===n&&(n={});var i=c([1/0,1/0],{dist:1/0}),r=0;return x(t,(function(t){for(var o=we(t),s=0;s<o.length-1;s++){var a=c(o[s]);a.properties.dist=De(e,a,n);var A=c(o[s+1]);A.properties.dist=De(e,A,n);var l=De(a,A,n),u=Math.max(a.properties.dist,A.properties.dist),g=Fe(a,A),d=Le(e,u,g+90,n),p=Le(e,u,g-90,n),f=mp(h([d.geometry.coordinates,p.geometry.coordinates]),h([a.geometry.coordinates,A.geometry.coordinates])),m=null;f.features.length>0&&((m=f.features[0]).properties.dist=De(e,m,n),m.properties.location=r+De(a,m,n)),a.properties.dist<i.properties.dist&&((i=a).properties.index=s,i.properties.location=r),A.properties.dist<i.properties.dist&&((i=A).properties.index=s+1,i.properties.location=r+l),m&&m.properties.dist<i.properties.dist&&((i=m).properties.index=s),r+=l}})),i};function yp({pointerDownScreenCoords:t,screenCoords:e}){return 10*(t[1]-e[1])}function Cp(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}return!1}function Ep(t){let e,n={};return i=>{for(const r in i)if(!Cp(i[r],n[r])){e=t(i),n=i;break}return e}}class _p extends Vd{createTentativeFeature(t){const{lastPointerMoveEvent:e}=t,n=this.getClickSequence(),i=e?[e.mapCoords]:[];let r;return 1===n.length||2===n.length?r={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[...n,...i]}}:n.length>2&&(r={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"Polygon",coordinates:[[...n,...i,n[0]]]}}),r}getGuides(t){const e=this.getClickSequence(),n={type:"FeatureCollection",features:[]},i=this.createTentativeFeature(t);i&&n.features.push(i);const r=e.map(((t,e)=>({type:"Feature",properties:{guideType:"editHandle",editHandleType:"existing",featureIndex:-1,positionIndexes:[e]},geometry:{type:"Point",coordinates:t}})));return n.features.push(...r),n}handleClick(t,e){const{picks:n}=t,i=Nd(n),r=this.getClickSequence();let o=!1;if(r.length>2&&e.modeConfig&&e.modeConfig.preventOverlappingLines){const e=h([r[r.length-1],t.mapCoords]),n=h([...r.slice(0,r.length-1)]);mp(e,n).features.length>0&&(o=!0)}let s=!1;if(i||o||(this.addClickSequence(t),s=!0),r.length>2&&i&&Array.isArray(i.properties.positionIndexes)&&(0===i.properties.positionIndexes[0]||i.properties.positionIndexes[0]===r.length-1)){const t={type:"Polygon",coordinates:[[...r,r[0]]]};this.resetClickSequence();const n=this.getAddFeatureOrBooleanPolygonAction(t,e);n&&e.onEdit(n)}else s&&e.onEdit({updatedData:e.data,editType:"addTentativePosition",editContext:{position:t.mapCoords}})}handleKeyUp(t,e){if("Enter"===t.key){const t=this.getClickSequence();if(t.length>2){const n={type:"Polygon",coordinates:[[...t,t[0]]]};this.resetClickSequence();const i=this.getAddFeatureOrBooleanPolygonAction(n,e);i&&e.onEdit(i)}}else"Escape"===t.key&&(this.resetClickSequence(),e.onEdit({updatedData:e.data,editType:"cancelFeature",editContext:{}}))}handlePointerMove(t,e){e.onUpdateCursor("cell"),super.handlePointerMove(t,e)}}class vp extends Vd{handleClick(t,e){e.modeConfig&&e.modeConfig.dragToDraw||(this.addClickSequence(t),this.checkAndFinishPolygon(e))}handleStartDragging(t,e){e.modeConfig&&e.modeConfig.dragToDraw&&(this.addClickSequence(t),t.cancelPan())}handleStopDragging(t,e){e.modeConfig&&e.modeConfig.dragToDraw&&(this.addClickSequence(t),this.checkAndFinishPolygon(e))}checkAndFinishPolygon(t){const e=this.getClickSequence(),n=this.getTentativeGuide(t);if(e.length>1&&n&&"Polygon"===n.geometry.type){const e={type:"Feature",properties:{shape:n.properties.shape},geometry:{type:"Polygon",coordinates:n.geometry.coordinates}},i=this.getAddFeatureOrBooleanPolygonAction(e,t);this.resetClickSequence(),i&&t.onEdit(i)}}getGuides(t){const{lastPointerMoveEvent:e,modeConfig:n}=t,i=this.getClickSequence(),r={type:"FeatureCollection",features:[]};if(0===i.length||!e)return r;const o=i[0],s=e.mapCoords,a=this.getTwoClickPolygon(o,s,n);return a&&r.features.push({type:"Feature",properties:{shape:a.properties&&a.properties.shape,guideType:"tentative"},geometry:a.geometry}),r}getTwoClickPolygon(t,e,n){return null}handlePointerMove(t,e){e.onUpdateCursor("cell"),super.handlePointerMove(t,e)}createTentativeFeature(t){const{lastPointerMoveEvent:e}=t,n=this.getClickSequence(),i=e?[e.mapCoords]:[];let r;return 1===n.length&&(r=this.getTwoClickPolygon(n[0],i[0],t.modeConfig)),r}}class Bp extends vp{getTwoClickPolygon(t,e,n){const i=k([t[0],t[1],e[0],e[1]]);return i.properties=i.properties||{},i.properties.shape="Rectangle",i}}function wp(t,e,n){void 0===n&&(n={});for(var i=Qe(t).coordinates,r=0,o=0;o<i.length&&!(e>=r&&o===i.length-1);o++){if(r>=e){var s=e-r;if(s){var a=Fe(i[o],i[o-1])-180;return Le(i[o],s,a,n)}return c(i[o])}r+=De(i[o],i[o+1],n)}return c(i[i.length-1])}const bp=function(t,e,n){void 0===n&&(n={});for(var i=n.steps||64,r=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},o=[],s=0;s<i;s++)o.push(Le(t,e,-360*s/i,n).geometry.coordinates);return o.push(o[0]),u([o],r)};var Qp=6378137;function xp(t){return function(t,e,n){var i=n;return Q(t,(function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)})),i}(t,(function(t,e){return t+function(t){var e,n=0;switch(t.type){case"Polygon":return Dp(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=Dp(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)}),0)}function Dp(t){var e=0;if(t&&t.length>0){e+=Math.abs(Sp(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(Sp(t[n]))}return e}function Sp(t){var e,n,i,r,o,s,a=0,A=t.length;if(A>2){for(s=0;s<A;s++)s===A-2?(i=A-2,r=A-1,o=0):s===A-1?(i=A-1,r=0,o=1):(i=s,r=s+1,o=s+2),e=t[i],n=t[r],a+=(Mp(t[o][0])-Mp(e[0]))*Math.sin(Mp(n[1]));a=a*Qp*Qp/2}return a}function Mp(t){return t*Math.PI/180}function kp(t){var e=t*Math.PI/180;return Math.tan(e)}const Rp=function(t,e,n,i){var r=(i=i||{}).steps||64,o=i.units||"kilometers",s=i.angle||0,a=i.pivot||t,A=i.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!B(i))throw new Error("options must be an object");if(!v(r))throw new Error("steps must be a number");if(!v(s))throw new Error("angle must be a number");var l=Be(t);if("degrees"===o)var c=E(s);else e=tp(t,e,90,{units:o}),n=tp(t,n,0,{units:o}),e=Be(e)[0]-l[0],n=Be(n)[1]-l[1];for(var h=[],g=0;g<r;g+=1){var d=-360*g/r,p=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(kp(d),2)),f=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(kp(d),2));if(d<-90&&d>=-270&&(p=-p),d<-180&&d>=-360&&(f=-f),"degrees"===o){var m=p*Math.cos(c)+f*Math.sin(c),I=f*Math.cos(c)-p*Math.sin(c);p=m,f=I}h.push([p+l[0],f+l[1]])}return h.push(h[0]),"degrees"===o?u([h],A):up(u([h],A),s,{pivot:a})};class Np extends Vd{handleClick(t,e){this.addClickSequence(t);const n=this.getClickSequence(),i=this.getTentativeGuide(e);if(n.length>2&&i&&"Polygon"===i.geometry.type){const t=this.getAddFeatureOrBooleanPolygonAction(i.geometry,e);this.resetClickSequence(),t&&e.onEdit(t)}}getGuides(t){const{lastPointerMoveEvent:e,modeConfig:n}=t,i=this.getClickSequence(),r={type:"FeatureCollection",features:[]};if(0===i.length)return r;const o=e.mapCoords;if(1===i.length)r.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[i[0],o]}});else{const t=this.getThreeClickPolygon(i[0],i[1],o,n);t&&r.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:t.geometry})}return r}getThreeClickPolygon(t,e,n,i){return null}handlePointerMove(t,e){e.onUpdateCursor("cell"),super.handlePointerMove(t,e)}createTentativeFeature(t){const{lastPointerMoveEvent:e}=t,n=this.getClickSequence(),i=e?[e.mapCoords]:[];let r;return 2===n.length&&(r=this.getThreeClickPolygon(n[0],n[1],i[0],t.modeConfig)),r}}var Pp=g(8550);class Tp extends Vd{_handler;constructor(t){super(),this._handler=t}_getSnappedMouseEvent(t,e,n){return Object.assign(t,{mapCoords:n.geometry.coordinates,pointerDownMapCoords:e&&e.geometry.coordinates})}_getPickedSnapTarget(t){return Ld(t).find((t=>"snap-target"===t.properties.editHandleType))}_getPickedSnapSource(t){return Ld(t).find((t=>"snap-source"===t.properties.editHandleType))}_getUpdatedSnapSourceHandle(t,e){const{featureIndex:n,positionIndexes:i}=t.properties;if(!Array.isArray(i))return t;const r=e.features[n],o=i.reduce(((t,e)=>t[e]),r.geometry.coordinates);return{...t,geometry:{type:"Point",coordinates:o}}}_getSnapTargets(t){let{additionalSnapTargets:e}=t.modeConfig||{};e=e||[];return[...t.data.features,...e]}_getSnapTargetHandles(t){const e=[],n=this._getSnapTargets(t);for(let i=0;i<n.length;i++){if(!t.selectedIndexes.includes(i)){const{geometry:t}=n[i];e.push(...Fd(t,i,"snap-target"))}}return e}getGuides(t){const{modeConfig:e,lastPointerMoveEvent:n}=t,{enableSnapping:i}=e||{},r={type:"FeatureCollection",features:[...this._handler.getGuides(t).features]};if(!i)return r;const o=n&&this._getPickedSnapSource(n.pointerDownPicks);if(o)return r.features.push(...this._getSnapTargetHandles(t),this._getUpdatedSnapSourceHandle(o,t.data)),r;const{features:s}=t.data;for(const e of t.selectedIndexes)if(e<s.length){const{geometry:t}=s[e];r.features.push(...Fd(t,e,"snap-source"))}return r}_getSnapAwareEvent(t,e){const n=this._getPickedSnapSource(e.lastPointerMoveEvent.pointerDownPicks),i=this._getPickedSnapTarget(t.picks);return n&&i?this._getSnappedMouseEvent(t,n,i):t}handleStartDragging(t,e){this._handler.handleStartDragging(t,e)}handleStopDragging(t,e){this._handler.handleStopDragging(this._getSnapAwareEvent(t,e),e)}handleDragging(t,e){this._handler.handleDragging(this._getSnapAwareEvent(t,e),e)}handlePointerMove(t,e){this._handler.handlePointerMove(this._getSnapAwareEvent(t,e),e)}}class Lp extends Vd{_modes;constructor(t){super(),this._modes=t}_coalesce(t,e=null){let n=null;for(let i=0;i<this._modes.length&&(n=t(this._modes[i]),!(e?e(n):n));i++);return n}handleClick(t,e){this._coalesce((n=>n.handleClick(t,e)))}handlePointerMove(t,e){return this._coalesce((n=>n.handlePointerMove(t,e)))}handleStartDragging(t,e){return this._coalesce((n=>n.handleStartDragging(t,e)))}handleStopDragging(t,e){return this._coalesce((n=>n.handleStopDragging(t,e)))}handleDragging(t,e){return this._coalesce((n=>n.handleDragging(t,e)))}getGuides(t){const e=[];for(const n of this._modes)e.push(...n.getGuides(t).features);return{type:"FeatureCollection",features:e}}}const Fp=2/3,Op=["anyclick","pointermove","panstart","panmove","panend","keyup"];class Gp extends Mu{static layerName="EditableLayer";state=void 0;onLayerClick(t){}onStartDragging(t){}onStopDragging(t){}onDragging(t){}onPointerMove(t){}onLayerKeyUp(t){}initializeState(){this.setState({_editableLayerState:{pointerDownPicks:null,pointerDownScreenCoords:null,pointerDownMapCoords:null,eventHandler:this._forwardEventToCurrentLayer.bind(this)}}),this._addEventHandlers()}finalizeState(){this._removeEventHandlers()}_addEventHandlers(){const{eventManager:t}=this.context.deck,{eventHandler:e}=this.state._editableLayerState;for(const n of Op)t.on(n,e,{priority:100})}_removeEventHandlers(){const{eventManager:t}=this.context.deck,{eventHandler:e}=this.state._editableLayerState;for(const n of Op)t.off(n,e)}_forwardEventToCurrentLayer(t){const e=this.getCurrentLayer(),n=e[`_on${t.type}`].bind(e);n?n(t):console.warn(`no handler for mjolnir.js event ${t.type}`)}_onanyclick({srcEvent:t}){const e=this.getScreenCoords(t),n=this.getMapCoords(e),i=this.getPicks(e);this.onLayerClick({mapCoords:n,screenCoords:e,picks:i,sourceEvent:t})}_onkeyup({srcEvent:t}){this.onLayerKeyUp(t)}_onpanstart(t){const e=this.getScreenCoords(t.srcEvent),n=this.getMapCoords(e),i=this.getPicks(e);this.setState({_editableLayerState:{...this.state._editableLayerState,pointerDownScreenCoords:e,pointerDownMapCoords:n,pointerDownPicks:i}}),this.onStartDragging({picks:i,screenCoords:e,mapCoords:n,pointerDownScreenCoords:e,pointerDownMapCoords:n,cancelPan:t.stopImmediatePropagation,sourceEvent:t.srcEvent})}_onpanmove(t){const{srcEvent:e}=t,n=this.getScreenCoords(e),i=this.getMapCoords(n),{pointerDownPicks:r,pointerDownScreenCoords:o,pointerDownMapCoords:s}=this.state._editableLayerState,a=this.getPicks(n);this.onDragging({screenCoords:n,mapCoords:i,picks:a,pointerDownPicks:r,pointerDownScreenCoords:o,pointerDownMapCoords:s,sourceEvent:e,cancelPan:t.stopImmediatePropagation})}_onpanend({srcEvent:t}){const e=this.getScreenCoords(t),n=this.getMapCoords(e),{pointerDownPicks:i,pointerDownScreenCoords:r,pointerDownMapCoords:o}=this.state._editableLayerState,s=this.getPicks(e);this.onStopDragging({picks:s,screenCoords:e,mapCoords:n,pointerDownPicks:i,pointerDownScreenCoords:r,pointerDownMapCoords:o,sourceEvent:t}),this.setState({_editableLayerState:{...this.state._editableLayerState,pointerDownScreenCoords:null,pointerDownMapCoords:null,pointerDownPicks:null}})}_onpointermove(t){const{srcEvent:e}=t,n=this.getScreenCoords(e),i=this.getMapCoords(n),{pointerDownPicks:r,pointerDownScreenCoords:o,pointerDownMapCoords:s}=this.state._editableLayerState,a=this.getPicks(n);this.onPointerMove({screenCoords:n,mapCoords:i,picks:a,pointerDownPicks:r,pointerDownScreenCoords:o,pointerDownMapCoords:s,sourceEvent:e,cancelPan:t.stopImmediatePropagation})}getPicks(t){return this.context.deck.pickMultipleObjects({x:t[0],y:t[1],layerIds:[this.props.id],radius:this.props.pickingRadius,depth:this.props.pickingDepth})}getScreenCoords(t){return[t.clientX-this.context.gl.canvas.getBoundingClientRect().left,t.clientY-this.context.gl.canvas.getBoundingClientRect().top]}getMapCoords(t){return this.context.viewport.unproject([t[0],t[1]])}}const Up={...xg.defaultProps,pickingLineWidthExtraPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER}};class jp extends xg{getShaders(){const t=super.getShaders();return t.vs=function(t,e,n){const i=t.indexOf(e);return i<0?t:t.slice(0,i)+n+t.slice(i)}(t.vs,"vec3 width;","\n       if(bool(picking.isActive)){\n        widthPixels.xy += pickingLineWidthExtraPixels;\n       }\n      "),{...t,inject:{...t.inject||{},"vs:#decl":(t.inject?.["vs:#decl"]||"").concat("uniform float pickingLineWidthExtraPixels;")}}}draw(t){super.draw({...t,uniforms:{...t.uniforms,pickingLineWidthExtraPixels:this.props.pickingLineWidthExtraPixels}})}}jp.defaultProps=Up,jp.layerName="EditablePathLayer";const Yp=[0,0,0,153],Kp=[0,0,0,144],zp=[0,0,0,255],Jp=[0,0,144,144],qp=[144,144,144,255],Hp=[144,144,144,144],Vp=[192,0,0,255],Wp=[0,0,0,128],Zp=[124,0,192,255],Xp=[255,255,255,255],$p=_p;function tf(t){return t&&"function"==typeof t?e=>t(function(t){if(t.__source)return t.__source.object;if(t.sourceFeature)return t.sourceFeature.feature;return t}(e)):t}function ef(t){switch(t.properties.editHandleType){case"existing":return Vp;case"snap-source":return Zp;default:return Wp}}const nf={mode:$p,onEdit:()=>{},pickable:!0,pickingRadius:10,pickingDepth:5,fp64:!1,filled:!0,stroked:!0,lineWidthScale:Fp,lineWidthMinPixels:1,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,pickingLineWidthExtraPixels:0,lineWidthUnits:"pixels",lineJointRounded:!1,lineCapRounded:!1,lineMiterLimit:4,pointRadiusScale:1,pointRadiusMinPixels:2,pointRadiusMaxPixels:Number.MAX_SAFE_INTEGER,getLineColor:(t,e,n)=>e?zp:Yp,getFillColor:(t,e,n)=>e?Jp:Kp,getRadius:t=>t&&t.properties&&t.properties.radius||t&&t.properties&&t.properties.size||1,getLineWidth:t=>t&&t.properties&&t.properties.lineWidth||3,getTentativeLineColor:t=>qp,getTentativeFillColor:t=>Hp,getTentativeLineWidth:t=>t&&t.properties&&t.properties.lineWidth||3,editHandleType:"point",editHandlePointRadiusScale:1,editHandlePointOutline:!0,editHandlePointStrokeWidth:2,editHandlePointRadiusUnits:"pixels",editHandlePointRadiusMinPixels:4,editHandlePointRadiusMaxPixels:8,getEditHandlePointColor:ef,getEditHandlePointOutlineColor:function(t){return Xp},getEditHandlePointRadius:function(t){switch(t.properties.editHandleType){case"existing":return 5;case"snap":return 7;default:return 3}},editHandleIconAtlas:null,editHandleIconMapping:null,editHandleIconSizeScale:1,editHandleIconSizeUnits:"pixels",getEditHandleIcon:t=>t.properties.editHandleType,getEditHandleIconSize:10,getEditHandleIconColor:ef,getEditHandleIconAngle:0,billboard:!0},rf={view:Zd,modify:np,translate:new Tp(new ep),transform:new Tp(new class extends Lp{constructor(){super([new ep,new cp,new hp])}handlePointerMove(t,e){let n=null;super.handlePointerMove(t,{...e,onUpdateCursor:t=>{n=t||n}}),e.onUpdateCursor(n)}handleStartDragging(t,e){let n=null,i=null;const r=[];this._modes.forEach((t=>{t instanceof ep?i=t:(t instanceof cp&&(n=t),r.push(t))})),n instanceof cp&&!n.isEditHandleSelected()&&r.push(i),r.filter(Boolean).forEach((n=>n.handleStartDragging(t,e)))}getGuides(t){let e=super.getGuides(t);const n=(this._modes||[]).find((t=>t instanceof hp));if(n instanceof hp){const t=e.features.filter((t=>{const{editHandleType:e,mode:i}=t.properties||{},r=[i];return n.getIsRotating()&&r.push(e),!r.includes("scale")}));e=p(t)}return e}}),scale:cp,rotate:hp,duplicate:class extends ep{handleStartDragging(t,e){super.handleStartDragging(t,e),this._geometryBeforeTranslate&&e.onEdit(this.getAddManyFeaturesAction(this._geometryBeforeTranslate,e.data))}updateCursor(t){this._isTranslatable?t.onUpdateCursor("copy"):t.onUpdateCursor(null)}},split:class extends Vd{calculateMapCoords(t,e,n){const i=n.modeConfig;if(!i||!i.lock90Degree||!t.length)return e;if(1===t.length){const i=t[0],r=rp(this.getSelectedGeometry(n)),o="FeatureCollection"===r.type?r.features:[r];let s=Number.MAX_SAFE_INTEGER,a=null;if(o.forEach((t=>{const e=Ip(t,i),n=De(e,i);s>n&&(s=n,a=e)})),a){const t=Fe(i,a),n=De(i,e,{units:"meters"});return Le(i,n,t,{units:"meters"}).geometry.coordinates}return e}const r=t[t.length-1],[o]=kd(t[t.length-2],r,e);return Ip(h([r,o]),e).geometry.coordinates}getGuides(t){const e=this.getClickSequence(),n={type:"FeatureCollection",features:[]};if(0===e.length||!t.lastPointerMoveEvent)return n;const{mapCoords:i}=t.lastPointerMoveEvent;return n.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[...e,this.calculateMapCoords(e,i,t)]}}),n}handleClick(t,e){const n=this.getTentativeGuide(e),i=this.getSelectedGeometry(e);if(!i)return void console.warn("A polygon must be selected for splitting");const r=this.getClickSequence();n&&"LineString"===n.geometry.type?r.push(n.geometry.coordinates[n.geometry.coordinates.length-1]):this.addClickSequence(t);const o=function(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i=Be(t),r=Qe(e),o=r.type,s=e.bbox,a=r.coordinates;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(i,s))return!1;"Polygon"===o&&(a=[a]);for(var A=!1,l=0;l<a.length&&!A;l++)if(gp(i,a[l][0],n.ignoreBoundary)){for(var c=!1,u=1;u<a[l].length&&!c;)gp(i,a[l][u],!n.ignoreBoundary)&&(c=!0),u++;c||(A=!0)}return A}({type:"Point",coordinates:r[r.length-1]},i);if(r.length>1&&n&&!o){this.resetClickSequence();if(0===mp(n,i).features.length)return;const t=this.splitPolygon(n,e);t&&e.onEdit(t)}}handlePointerMove(t,e){e.onUpdateCursor("cell")}splitPolygon(t,e){const n=this.getSelectedGeometry(e),i=e.selectedIndexes[0],r=e.modeConfig||{};let{gap:o=.1,units:s="centimeters"}=r;0===o&&(o=.1,s="centimeters");const a=_e(t,o,{units:s}),A=xe(n,a);if(!A)return console.warn("Canceling edit. Split Polygon erased"),null;const{type:l,coordinates:c}=A.geometry;let u=[];u="Polygon"===l?c.map((t=>[t])):c.reduce(((t,e)=>(e.forEach((e=>{t.push([e])})),t)),[]);return{updatedData:new Ud(e.data).replaceGeometry(i,{type:"MultiPolygon",coordinates:u}).getObject(),editType:"split",editContext:{featureIndexes:[i]}}}},extrude:class extends np{isPointAdded=!1;handleDragging(t,e){const n=Nd(t.pointerDownPicks);if(n){const{featureIndex:i}=n.properties;let{positionIndexes:r}=n.properties;const o=this.coordinatesSize(r,i,e.data);r=this.isPointAdded?this.nextPositionIndexes(r,o):r;const s=this.getPointForPositionIndexes(this.prevPositionIndexes(r,o),i,e.data),a=this.getPointForPositionIndexes(r,i,e.data);if(s&&a){const[n,A]=kd(s,a,t.mapCoords),l=new Ud(e.data).replacePosition(i,this.prevPositionIndexes(r,o),A).replacePosition(i,r,n).getObject();e.onEdit({updatedData:l,editType:"extruding",editContext:{featureIndexes:[i],positionIndexes:this.nextPositionIndexes(r,o),position:n}}),t.cancelPan()}}}handleStartDragging(t,e){const n=e.selectedIndexes,i=Td(t.picks);if(n.length&&i){const{positionIndexes:t,featureIndex:n}=i.properties,r=this.coordinatesSize(t,n,e.data),o=this.getPointForPositionIndexes(this.prevPositionIndexes(t,r),n,e.data),s=this.getPointForPositionIndexes(t,n,e.data);if(o&&s){let i=new Ud(e.data);this.isOrthogonal(t,n,r,e.data)||(i=i.addPosition(n,t,s)),this.isOrthogonal(this.prevPositionIndexes(t,r),n,r,e.data)||(i=i.addPosition(n,t,o),this.isPointAdded=!0),e.onEdit({updatedData:i.getObject(),editType:"startExtruding",editContext:{featureIndexes:[n],positionIndexes:t,position:o}})}}}handleStopDragging(t,e){const n=e.selectedIndexes,i=Nd(t.pointerDownPicks);if(n.length&&i){const{featureIndex:n}=i.properties;let{positionIndexes:r}=i.properties;const o=this.coordinatesSize(r,n,e.data);r=this.isPointAdded?this.nextPositionIndexes(r,o):r;const s=this.getPointForPositionIndexes(this.prevPositionIndexes(r,o),n,e.data),a=this.getPointForPositionIndexes(r,n,e.data);if(s&&a){const[i,A]=kd(s,a,t.mapCoords),l=new Ud(e.data).replacePosition(n,this.prevPositionIndexes(r,o),A).replacePosition(n,r,i).getObject();e.onEdit({updatedData:l,editType:"extruded",editContext:{featureIndexes:[n],positionIndexes:r,position:i}})}}this.isPointAdded=!1}coordinatesSize(t,e,{features:n}){let i=0;if(Array.isArray(t)){const r=n[e].geometry.coordinates;if(3===t.length){const[e,n]=t;r.length&&r[e].length&&(i=r[e][n].length)}else{const[e]=t;r.length&&r[e].length&&(i=r[e].length)}}return i}getBearing(t,e){const n=Fe(t,e);return n<0?Math.floor(360+n):Math.floor(n)}isOrthogonal(t,e,n,i){if(!Array.isArray(t))return!1;t[t.length-1]===n-1&&(t[t.length-1]=0);const r=this.getPointForPositionIndexes(this.prevPositionIndexes(t,n),e,i),o=this.getPointForPositionIndexes(this.nextPositionIndexes(t,n),e,i),s=this.getPointForPositionIndexes(t,e,i),a=this.getBearing(s,r),A=this.getBearing(s,o);return[89,90,91,269,270,271].includes(Math.abs(a-A))}nextPositionIndexes(t,e){if(!Array.isArray(t))return[];const n=[...t];return n.length&&(n[n.length-1]=n[n.length-1]===e-1?0:n[n.length-1]+1),n}prevPositionIndexes(t,e){if(!Array.isArray(t))return[];const n=[...t];return n.length&&(n[n.length-1]=0===n[n.length-1]?e-2:n[n.length-1]-1),n}getPointForPositionIndexes(t,e,{features:n}){let i;if(Array.isArray(t)){const r=n[e].geometry.coordinates;if(3===t.length){const[e,n,o]=t;r.length&&r[e].length&&(i=r[e][n][o])}else{const[e,n]=t;r.length&&r[e].length&&(i=r[e][n])}}return i}},elevation:class extends np{makeElevatedEvent(t,e,n){const{minElevation:i=0,maxElevation:r=2e4,calculateElevationChange:o=yp}=n.modeConfig||{};if(!t.pointerDownScreenCoords)return t;let s=3===e.length?e[2]:0;return s+=o({pointerDownScreenCoords:t.pointerDownScreenCoords,screenCoords:t.screenCoords}),s=Math.min(s,r),s=Math.max(s,i),Object.assign({},t,{mapCoords:[e[0],e[1],s]})}handlePointerMove(t,e){const n=Nd(t.pointerDownPicks),i=n?n.geometry.coordinates:t.mapCoords;super.handlePointerMove(this.makeElevatedEvent(t,i,e),e)}handleStopDragging(t,e){const n=Nd(t.picks),i=n?n.geometry.coordinates:t.mapCoords;super.handleStopDragging(this.makeElevatedEvent(t,i,e),e)}getCursor(t){let e=super.getCursor(t);return"cell"===e&&(e="ns-resize"),e}static calculateElevationChangeWithViewport(t,{pointerDownScreenCoords:e,screenCoords:n}){return 156543.03392*Math.cos(t.latitude*Math.PI/180)/Math.pow(2,t.zoom)*(e[1]-n[1])/2}},drawPoint:class extends Vd{createTentativeFeature(t){const{lastPointerMoveEvent:e}=t;return{type:"Feature",properties:{guideType:"tentative"},geometry:{type:"Point",coordinates:(e?[e.mapCoords]:[])[0]}}}handleClick({mapCoords:t},e){const n={type:"Point",coordinates:t};e.onEdit(this.getAddFeatureAction(n,e.data))}handlePointerMove(t,e){e.onUpdateCursor("cell"),super.handlePointerMove(t,e)}},drawLineString:class extends Vd{dist=0;position=null;elems=[];handleClick(t,e){const{picks:n}=t,i=Nd(n);let r=!1;i||(this.addClickSequence(t),r=!0);const o=this.getClickSequence();if(i||this.calculateInfoDraw(o),o.length>1&&i&&Array.isArray(i.properties.positionIndexes)&&i.properties.positionIndexes[0]===o.length-1){this.dist=0;const t={type:"LineString",coordinates:[...o]};this.resetClickSequence();const n=this.getAddFeatureAction(t,e.data);n&&e.onEdit(n)}else r&&e.onEdit({updatedData:e.data,editType:"addTentativePosition",editContext:{position:t.mapCoords}})}handleKeyUp(t,e){const{key:n}=t;if("Enter"===n){const t=this.getClickSequence();if(t.length>1){const n={type:"LineString",coordinates:[...t]};this.resetClickSequence();const i=this.getAddFeatureAction(n,e.data);i&&e.onEdit(i)}}else"Escape"===n&&(this.resetClickSequence(),e.onEdit({updatedData:e.data,editType:"cancelFeature",editContext:{}}))}getGuides(t){const{lastPointerMoveEvent:e}=t,n=this.getClickSequence(),i=e?[e.mapCoords]:[],r={type:"FeatureCollection",features:[]};let o;n.length>0&&(o={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[...n,...i]}}),o&&r.features.push(o);const s=n.map(((t,e)=>({type:"Feature",properties:{guideType:"editHandle",editHandleType:"existing",featureIndex:-1,positionIndexes:[e]},geometry:{type:"Point",coordinates:t}})));return r.features.push(...s),r}handlePointerMove(t,e){e.onUpdateCursor("cell")}getTooltips(t){return this._getTooltips({modeConfig:t.modeConfig,dist:this.dist})}calculateInfoDraw(t){t.length>1&&(this.position=t[t.length-1],this.dist+=De(t[t.length-2],t[t.length-1]))}_getTooltips=Ep((({modeConfig:t,dist:e})=>{let n=[];const{formatTooltip:i}=t||{};let r;return e&&(r=i?i(e):`Distance: ${parseFloat(e).toFixed(2)} kilometers`,n=[{position:this.position,text:r}]),n}))},drawPolygon:_p,drawRectangle:Bp,drawSquare:class extends vp{getTwoClickPolygon(t,e,n){const i=[e[0],t[1]],r=[t[0],e[1]],o=De(c(i),c(t)),s=De(c(r),c(t)),a=o<=s?o:s,A=wp(h([o<=s?i:r,e]),a).geometry.coordinates,l=k([t[0],t[1],A[0],A[1]]);return l.properties=l.properties||{},l.properties.shape="Square",l}},drawRectangleFromCenter:class extends vp{getTwoClickPolygon(t,e,n){const i=k([t[0]>e[0]?t[0]+Math.abs(t[0]-e[0]):t[0]-Math.abs(t[0]-e[0]),t[1]>e[1]?t[1]+Math.abs(t[1]-e[1]):t[1]-Math.abs(t[1]-e[1]),e[0],e[1]]);return i.properties=i.properties||{},i.properties.shape="Rectangle",i}},drawSquareFromCenter:class extends vp{getTwoClickPolygon(t,e,n){const i=[e[0],t[1]],r=[t[0],e[1]],o=De(c(i),c(t)),s=De(c(r),c(t)),a=o<=s?o:s,A=wp(h([o<=s?i:r,e]),a).geometry.coordinates,l=k([t[0]>A[0]?t[0]+Math.abs(t[0]-A[0]):t[0]-Math.abs(t[0]-A[0]),t[1]>A[1]?t[1]+Math.abs(t[1]-A[1]):t[1]-Math.abs(t[1]-A[1]),A[0],A[1]]);return l.properties=l.properties||{},l.properties.shape="Square",l}},drawCircleFromCenter:class extends vp{radius=null;position=null;areaCircle=null;getTwoClickPolygon(t,e,n){const{steps:i=64}=n||{},r={steps:i};this.position=e,i<4&&(console.warn("Minimum steps to draw a circle is 4 "),r.steps=4),this.radius=Math.max(De(t,e),.001);const o=bp(t,this.radius,r);return o.properties=o.properties||{},o.properties.shape="Circle",this.areaCircle=xp(o),o}getTooltips(t){return this._getTooltips({modeConfig:t?.modeConfig,radius:this.radius,areaCircle:this.areaCircle})}_getTooltips=Ep((({modeConfig:t,radius:e,areaCircle:n})=>{let i=[];const{formatTooltip:r}=t||{};let o;return e&&n&&(o=r?r(e):`Radius: ${parseFloat(e).toFixed(2)} kilometers\n      \n Area: ${parseFloat(n).toFixed(2)}`,i=[{position:this.position,text:o}]),i}))},drawCircleByBoundingBox:class extends vp{radius=null;position=null;areaCircle=null;diameter=null;getTwoClickPolygon(t,e,n){const{steps:i=64}=n||{},r={steps:i};i<4&&(console.warn("Minimum steps to draw a circle is 4 "),r.steps=4);const o=Wd(t,e);this.radius=Math.max(De(t,o),.001),this.diameter=Math.max(De(t,e),.001),this.position=o;const s=bp(o,this.radius,r);return s.properties=s.properties||{},s.properties.shape="Circle",this.areaCircle=xp(s),s}getTooltips(t){return this._getTooltips({modeConfig:t.modeConfig,radius:this.radius,areaCircle:this.areaCircle,diameter:this.diameter})}_getTooltips=Ep((({modeConfig:t,radius:e,areaCircle:n,diameter:i})=>{let r=[];const{formatTooltip:o}=t||{};let s;return e&&n&&(s=o?o(e):`Radius: ${parseFloat(e).toFixed(2)} kilometers\n      \n Area: ${parseFloat(n).toFixed(2)}\n      \n Diameter: ${parseFloat(i).toFixed(2)} kilometers`,r=[{position:this.position,text:s}]),r}))},drawEllipseByBoundingBox:class extends vp{getTwoClickPolygon(t,e,n){const i=k([Math.min(t[0],e[0]),Math.min(t[1],e[1]),Math.max(t[0],e[0]),Math.max(t[1],e[1])]).geometry.coordinates[0],r=Wd(t,e),o=Math.max(De(c(i[0]),c(i[1])),.001),s=Math.max(De(c(i[0]),c(i[3])),.001);return Rp(r,o,s)}},drawRectangleUsing3Points:class extends Np{getThreeClickPolygon(t,e,n,i){const[r,o]=kd(t,e,n);return{type:"Feature",properties:{shape:"Rectangle"},geometry:{type:"Polygon",coordinates:[[t,e,r,o,t]]}}}},drawEllipseUsing3Points:class extends Np{getThreeClickPolygon(t,e,n,i){const r=Wd(t,e),o=Math.max(De(r,c(n)),.001),s=Math.max(De(t,e),.001)/2,a={angle:Fe(t,e)};return Rp(r,o,s,a)}},draw90DegreePolygon:class extends Vd{createTentativeFeature(t){const e=this.getClickSequence(),{mapCoords:n}=t.lastPointerMoveEvent;let i,r;if(e.length<=1)i=n;else{const t=e[e.length-2],r=e[e.length-1];[i]=kd(t,r,n)}return r=e.length<3?{type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[...e,i]}}:{type:"Feature",properties:{guideType:"tentative"},geometry:{type:"Polygon",coordinates:[[...e,i,e[0]]]}},r}getGuides(t){const e={type:"FeatureCollection",features:[]};if(0===this.getClickSequence().length||!t.lastPointerMoveEvent)return e;const n=this.createTentativeFeature(t);return e.features.push(n),e.features=e.features.concat(Fd(n.geometry,-1)),e.features=e.features.slice(0,-1),e}handlePointerMove(t,e){e.onUpdateCursor("cell"),super.handlePointerMove(t,e)}handleClick(t,e){const{picks:n}=t,i=this.getTentativeGuide(e);this.addClickSequence(t);const r=this.getClickSequence();if(i)if(3===r.length&&"LineString"===i.geometry.type){const t=i.geometry;r[r.length-1]=t.coordinates[t.coordinates.length-1]}else if(r.length>3&&"Polygon"===i.geometry.type){const t=i.geometry;r[r.length-1]=t.coordinates[0][t.coordinates[0].length-2];const o=Nd(n);if(o&&Array.isArray(o.properties.positionIndexes)&&(0===o.properties.positionIndexes[1]||o.properties.positionIndexes[1]===t.coordinates[0].length-3)){const n={type:"Polygon",coordinates:this.finalizedCoordinates([...t.coordinates[0]])};this.resetClickSequence();const i=this.getAddFeatureOrBooleanPolygonAction(n,e);i&&e.onEdit(i)}}else{const n={screenCoords:[-1,-1],mapCoords:t.mapCoords,picks:[],pointerDownPicks:null,pointerDownScreenCoords:null,pointerDownMapCoords:null,cancelPan:()=>{},sourceEvent:null};this.handlePointerMove(n,e)}}finalizedCoordinates(t){let e=[[...t.slice(0,-2),t[0]]],n=this.getIntermediatePoint([...t]);if(n)e=[[...t.slice(0,-2),n,t[0]]];else{const i=[...t];i.splice(-3,1),n=this.getIntermediatePoint([...i]),n&&(e=[[...t.slice(0,-3),n,t[0]]])}return e}getIntermediatePoint(t){let e=null;if(t.length>4){const[n,i]=[...t],r=Fe(n,i),o=t[t.length-3],s=t[t.length-4],a=Fe(o,s),A={first:[],second:[]};[1,2,3].forEach((t=>{const e=r+90*t;A.first.push(e>180?e-360:e);const n=a+90*t;A.second.push(n>180?n-360:n)}));const l=De(c(n),c(o));[0,1,2].forEach((t=>{const i=h([n,Le(n,l,A.first[t]).geometry.coordinates]);[0,1,2].forEach((t=>{const n=h([o,Le(o,l,A.second[t]).geometry.coordinates]),r=mp(i,n);r&&r.features.length&&(e=r.features[0].geometry.coordinates)}))}))}return e}},drawPolygonByDragging:class extends _p{handleDraggingThrottled=null;handleClick(t,e){}handleStartDragging(t,e){t.cancelPan(),e.modeConfig&&e.modeConfig.throttleMs?this.handleDraggingThrottled=Pp(this.handleDraggingAux,e.modeConfig.throttleMs):this.handleDraggingThrottled=this.handleDraggingAux}handleStopDragging(t,e){this.addClickSequence(t);const n=this.getClickSequence();if(this.handleDraggingThrottled&&this.handleDraggingThrottled.cancel&&this.handleDraggingThrottled.cancel(),n.length>2){const t={type:"Polygon",coordinates:[[...n,n[0]]]},i=this.getAddFeatureOrBooleanPolygonAction(t,e);i&&e.onEdit(i)}this.resetClickSequence()}handleDraggingAux(t,e){const{picks:n}=t;Nd(n)||(this.addClickSequence(t),e.onEdit({updatedData:e.data,editType:"addTentativePosition",editContext:{position:t.mapCoords}}))}handleDragging(t,e){this.handleDraggingThrottled&&this.handleDraggingThrottled(t,e)}handleKeyUp(t,e){if("Enter"===t.key){const t=this.getClickSequence();if(t.length>2){const n={type:"Polygon",coordinates:[[...t,t[0]]]};this.resetClickSequence();const i=this.getAddFeatureOrBooleanPolygonAction(n,e);i&&e.onEdit(i)}}else"Escape"===t.key&&(this.resetClickSequence(),this.handleDraggingThrottled&&(this.handleDraggingThrottled=null),e.onEdit({updatedData:e.data,editType:"cancelFeature",editContext:{}}))}}};class of extends Gp{static layerName="EditableGeoJsonLayer";static defaultProps=nf;state=void 0;renderLayers(){const t=this.getSubLayerProps({id:"geojson",data:this.props.data,fp64:this.props.fp64,filled:this.props.filled,stroked:this.props.stroked,lineWidthScale:this.props.lineWidthScale,lineWidthMinPixels:this.props.lineWidthMinPixels,lineWidthMaxPixels:this.props.lineWidthMaxPixels,lineWidthUnits:this.props.lineWidthUnits,lineJointRounded:this.props.lineJointRounded,lineCapRounded:this.props.lineCapRounded,lineMiterLimit:this.props.lineMiterLimit,pointRadiusScale:this.props.pointRadiusScale,pointRadiusMinPixels:this.props.pointRadiusMinPixels,pointRadiusMaxPixels:this.props.pointRadiusMaxPixels,getLineColor:this.selectionAwareAccessor(this.props.getLineColor),getFillColor:this.selectionAwareAccessor(this.props.getFillColor),getPointRadius:this.selectionAwareAccessor(this.props.getRadius),getLineWidth:this.selectionAwareAccessor(this.props.getLineWidth),_subLayerProps:{linestrings:{billboard:this.props.billboard,updateTriggers:{all:[this.props.selectedFeatureIndexes,this.props.mode]}},"polygons-stroke":{billboard:this.props.billboard,pickingLineWidthExtraPixels:this.props.pickingLineWidthExtraPixels,type:jp,updateTriggers:{all:[this.props.selectedFeatureIndexes,this.props.mode]}}},updateTriggers:{getLineColor:[this.props.selectedFeatureIndexes,this.props.mode],getFillColor:[this.props.selectedFeatureIndexes,this.props.mode],getPointRadius:[this.props.selectedFeatureIndexes,this.props.mode],getLineWidth:[this.props.selectedFeatureIndexes,this.props.mode]}});let e=[new yd(t)];return e=e.concat(this.createGuidesLayers(),this.createTooltipsLayers()),e}initializeState(){super.initializeState(),this.setState({selectedFeatures:[],editHandles:[]})}shouldUpdateState(t){return super.shouldUpdateState(t)||t.changeFlags.stateChanged}updateState({props:t,oldProps:e,changeFlags:n,context:i}){if(super.updateState({oldProps:e,props:t,changeFlags:n,context:i}),n.propsOrDataChanged){if(0===Object.keys(e).length||t.mode!==e.mode){let e;if("function"==typeof t.mode){e=new(0,t.mode)}else"string"==typeof t.mode?(e=rf[t.mode],console.warn("Deprecated use of passing `mode` as a string. Pass the mode's class constructor instead.")):e=t.mode;e||(console.warn(`No mode configured for ${String(t.mode)}`),e=new $p),e!==this.state.mode&&this.setState({mode:e,cursor:null})}}let r=[];if(Array.isArray(t.selectedFeatureIndexes)&&"object"==typeof t.data&&"features"in t.data){const e=t.data;r=t.selectedFeatureIndexes.map((t=>e.features[t]))}this.setState({selectedFeatures:r})}getModeProps(t){return{modeConfig:t.modeConfig,data:t.data,selectedIndexes:t.selectedFeatureIndexes,lastPointerMoveEvent:this.state.lastPointerMoveEvent,cursor:this.state.cursor,onEdit:e=>{this.setNeedsUpdate(),t.onEdit(e)},onUpdateCursor:t=>{this.setState({cursor:t})}}}selectionAwareAccessor(t){return"function"!=typeof t?t:e=>t(e,this.isFeatureSelected(e),this.props.mode)}isFeatureSelected(t){return!(!this.props.data||!this.props.selectedFeatureIndexes)&&(!!this.props.selectedFeatureIndexes.length&&this.state.selectedFeatures.includes(t))}getPickingInfo({info:t,sourceLayer:e}){return e.id.endsWith("guides")&&(t.isGuide=!0),t}_updateAutoHighlight(t){if(t?.sourceLayer)if(t.isGuide)for(const e of t.sourceLayer.getSubLayers())e.updateAutoHighlight(t);else t.sourceLayer.updateAutoHighlight(t)}createGuidesLayers(){const t=this.getActiveMode().getGuides(this.getModeProps(this.props));if(!t||!t.features.length)return[];const e={linestrings:{billboard:this.props.billboard,autoHighlight:!1},"polygons-fill":{autoHighlight:!1},"polygons-stroke":{billboard:this.props.billboard}};"icon"===this.props.editHandleType?e["points-icon"]={type:ih,iconAtlas:this.props.editHandleIconAtlas,iconMapping:this.props.editHandleIconMapping,sizeUnits:this.props.editHandleIconSizeUnits,sizeScale:this.props.editHandleIconSizeScale,getIcon:tf(this.props.getEditHandleIcon),getSize:tf(this.props.getEditHandleIconSize),getColor:tf(this.props.getEditHandleIconColor),getAngle:tf(this.props.getEditHandleIconAngle),billboard:this.props.billboard}:e["points-circle"]={type:Ju,radiusScale:this.props.editHandlePointRadiusScale,stroked:this.props.editHandlePointOutline,getLineWidth:this.props.editHandlePointStrokeWidth,radiusUnits:this.props.editHandlePointRadiusUnits,radiusMinPixels:this.props.editHandlePointRadiusMinPixels,radiusMaxPixels:this.props.editHandlePointRadiusMaxPixels,getRadius:tf(this.props.getEditHandlePointRadius),getFillColor:tf(this.props.getEditHandlePointColor),getLineColor:tf(this.props.getEditHandlePointOutlineColor),billboard:this.props.billboard};return[new yd(this.getSubLayerProps({id:"guides",data:t,fp64:this.props.fp64,_subLayerProps:e,lineWidthScale:this.props.lineWidthScale,lineWidthMinPixels:this.props.lineWidthMinPixels,lineWidthMaxPixels:this.props.lineWidthMaxPixels,lineWidthUnits:this.props.lineWidthUnits,lineJointRounded:this.props.lineJointRounded,lineCapRounded:this.props.lineCapRounded,lineMiterLimit:this.props.lineMiterLimit,getLineColor:tf(this.props.getTentativeLineColor),getLineWidth:tf(this.props.getTentativeLineWidth),getFillColor:tf(this.props.getTentativeFillColor),pointType:"icon"===this.props.editHandleType?"icon":"circle",iconAtlas:this.props.editHandleIconAtlas}))]}createTooltipsLayers(){const t=this.getActiveMode().getTooltips(this.getModeProps(this.props));return[new Mh({getSize:21.333333333333332,...this.getSubLayerProps({id:"tooltips",data:t})})]}onLayerClick(t){this.getActiveMode().handleClick(t,this.getModeProps(this.props))}onLayerKeyUp(t){this.getActiveMode().handleKeyUp(t,this.getModeProps(this.props))}onStartDragging(t){this.getActiveMode().handleStartDragging(t,this.getModeProps(this.props))}onDragging(t){this.getActiveMode().handleDragging(t,this.getModeProps(this.props))}onStopDragging(t){this.getActiveMode().handleStopDragging(t,this.getModeProps(this.props))}onPointerMove(t){this.setState({lastPointerMoveEvent:t}),this.getActiveMode().handlePointerMove(t,this.getModeProps(this.props))}getCursor({isDragging:t}){if(null===this.state||void 0===this.state)return null;let{cursor:e}=this.state;return e||(e=t?"grabbing":"grab"),e}getActiveMode(){return this.state.mode}}Number.MAX_SAFE_INTEGER;class sf{static{this.defaultProps={}}static{this.extensionName="LayerExtension"}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"extensionName")?this.extensionName:""}constructor(t){t&&(this.opts=t)}equals(t){return this===t||this.constructor===t.constructor&&Dl(this.opts,t.opts,1)}getShaders(t){return null}getSubLayerProps(t){const{defaultProps:e}=t.constructor,n={updateTriggers:{}};for(const t in e)if(t in this.props){const i=e[t],r=this.props[t];n[t]=r,i&&"accessor"===i.type&&(n.updateTriggers[t]=this.props.updateTriggers[t],"function"==typeof r&&(n[t]=this.getSubLayerAccessor(r)))}return n}initializeState(t,e){}updateState(t,e){}onNeedsRedraw(t){}getNeedsPickingBuffer(t){return!1}draw(t,e){}finalizeState(t,e){}}const af={name:"collision",dependencies:[Ou],vs:"\nin float collisionPriorities;\nuniform sampler2D collision_texture;\nuniform bool collision_sort;\nuniform bool collision_enabled;\nvec2 collision_getCoords(vec4 position) {\nvec4 collision_clipspace = project_common_position_to_clipspace(position);\nreturn (1.0 + collision_clipspace.xy / collision_clipspace.w) / 2.0;\n}\nfloat collision_match(vec2 tex, vec3 pickingColor) {\nvec4 collision_pickingColor = texture(collision_texture, tex);\nfloat delta = dot(abs(collision_pickingColor.rgb - pickingColor), vec3(1.0));\nfloat e = 0.001;\nreturn step(delta, e);\n}\nfloat collision_isVisible(vec2 texCoords, vec3 pickingColor) {\nif (!collision_enabled) {\nreturn 1.0;\n}\nconst int N = 2;\nfloat accumulator = 0.0;\nvec2 step = vec2(1.0 / project_uViewportSize);\nconst float floatN = float(N);\nvec2 delta = -floatN * step;\nfor(int i = -N; i <= N; i++) {\ndelta.x = -step.x * floatN;\nfor(int j = -N; j <= N; j++) {\naccumulator += collision_match(texCoords + delta, pickingColor);\ndelta.x += step.x;\n}\ndelta.y += step.y;\n}\nfloat W = 2.0 * floatN + 1.0;\nreturn pow(accumulator / (W * W), 2.2);\n}\n",inject:{"vs:#decl":"\nfloat collision_fade = 1.0;\n","vs:DECKGL_FILTER_GL_POSITION":"\nif (collision_sort) {\nfloat collisionPriority = collisionPriorities;\nposition.z = -0.001 * collisionPriority * position.w;\n}\nif (collision_enabled) {\nvec4 collision_common_position = project_position(vec4(geometry.worldPosition, 1.0));\nvec2 collision_texCoords = collision_getCoords(collision_common_position);\ncollision_fade = collision_isVisible(collision_texCoords, geometry.pickingColor / 255.0);\nif (collision_fade < 0.0001) {\nposition = vec4(0.0, 0.0, 2.0, 1.0);\n}\n}\n","vs:DECKGL_FILTER_COLOR":"\ncolor.a *= collision_fade;\n"},getUniforms:(t,e)=>{if(!t||!("dummyCollisionMap"in t))return{};const{collisionFBO:n,drawToCollisionMap:i,dummyCollisionMap:r}=t;return{collision_sort:Boolean(i),collision_texture:!i&&n?n.colorAttachments[0]:r}}};class Af{constructor(t,e={id:"pass"}){const{id:n}=e;this.id=n,this.device=t,this.props={...e}}setProps(t){Object.assign(this.props,t)}render(t){}cleanup(){}}class lf extends Af{constructor(){super(...arguments),this._lastRenderIndex=-1}render(t){const[e,n]=this.device.canvasContext.getDrawingBufferSize(),i=t.clearCanvas??!0,r=t.clearColor??(!!i&&[0,0,0,0]),o=!!i&&1,s=!!i&&0,a=t.colorMask??15,A={viewport:[0,0,e,n]};t.colorMask&&(A.colorMask=a),t.scissorRect&&(A.scissorRect=t.scissorRect);const l=this.device.beginRenderPass({framebuffer:t.target,parameters:A,clearColor:r,clearDepth:o,clearStencil:s});try{return this._drawLayers(l,t)}finally{l.end()}}_drawLayers(t,e){const{target:n,moduleParameters:i,viewports:r,views:o,onViewportActive:s,clearStack:a=!0}=e;e.pass=e.pass||"unknown",a&&(this._lastRenderIndex=-1);const A=[];for(const a of r){const r=o&&o[a.id];s?.(a);const l=this._getDrawLayerParams(a,e),c=a.subViewports||[a];for(const o of c){const s=this._drawLayersInViewport(t,{target:n,moduleParameters:i,viewport:o,view:r,pass:e.pass,layers:e.layers},l);A.push(s)}}return A}_getDrawLayerParams(t,{layers:e,pass:n,isPicking:i=!1,layerFilter:r,cullRect:o,effects:s,moduleParameters:a},A=!1){const l=[],c=cf(this._lastRenderIndex+1),u={layer:e[0],viewport:t,isPicking:i,renderPass:n,cullRect:o},h={};for(let i=0;i<e.length;i++){const o=e[i],g=this._shouldDrawLayer(o,u,r,h),d={shouldDrawLayer:g};g&&!A&&(d.layerRenderIndex=c(o,g),d.moduleParameters=this._getModuleParameters(o,s,n,a),d.layerParameters={...o.context.deck?.props.parameters,...this.getLayerParameters(o,i,t)}),l[i]=d}return l}_drawLayersInViewport(t,{layers:e,moduleParameters:n,pass:i,target:r,viewport:o,view:s},a){const A=function(t,{moduleParameters:e,target:n,viewport:i}){const r=e&&e.devicePixelRatio||t.canvasContext.cssToDeviceRatio(),[,o]=t.canvasContext.getDrawingBufferSize(),s=n?n.height:o,a=i;return[a.x*r,s-(a.y+a.height)*r,a.width*r,a.height*r]}(this.device,{moduleParameters:n,target:r,viewport:o});if(s&&s.props.clear){const t=!0===s.props.clear?{color:!0,depth:!0}:s.props.clear;this.device.withParametersWebGL({scissorTest:!0,scissor:A},(()=>this.device.clearWebGL(t)))}const l={totalCount:e.length,visibleCount:0,compositeCount:0,pickableCount:0};t.setParameters({viewport:A});for(let n=0;n<e.length;n++){const r=e[n],{shouldDrawLayer:s,layerRenderIndex:A,moduleParameters:c,layerParameters:u}=a[n];if(s&&r.props.pickable&&l.pickableCount++,r.isComposite)l.compositeCount++;else if(s){l.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,A),c.viewport=o,r.context.renderPass=t;try{r._drawLayer({renderPass:t,moduleParameters:c,uniforms:{layerIndex:A},parameters:u})}catch(t){r.raiseError(t,`drawing ${r} to ${i}`)}}}return l}shouldDrawLayer(t){return!0}getModuleParameters(t,e){return null}getLayerParameters(t,e,n){return t.props.parameters}_shouldDrawLayer(t,e,n,i){if(!(t.props.visible&&this.shouldDrawLayer(t)))return!1;e.layer=t;let r=t.parent;for(;r;){if(!r.props.visible||!r.filterSubLayer(e))return!1;e.layer=r,r=r.parent}if(n){const t=e.layer.id;if(t in i||(i[t]=n(e)),!i[t])return!1}return t.activateViewport(e.viewport),!0}_getModuleParameters(t,e,n,i){const r=this.device.canvasContext.cssToDeviceRatio(),o=Object.assign(Object.create(t.internalState?.propsInTransition||t.props),{autoWrapLongitude:t.wrapLongitude,viewport:t.context.viewport,mousePosition:t.context.mousePosition,picking:{isActive:0},devicePixelRatio:r});if(e)for(const n of e)Object.assign(o,n.getModuleParameters?.(t));return Object.assign(o,this.getModuleParameters(t,e),i)}}function cf(t=0,e={}){const n={},i=(r,o)=>{const s=r.props._offset,a=r.id,A=r.parent&&r.parent.id;let l;if(A&&!(A in e)&&i(r.parent,!1),A in n){const t=n[A]=n[A]||cf(e[A],e);l=t(r,o),n[a]=t}else Number.isFinite(s)?(l=s+(e[A]||0),n[a]=null):l=t;return o&&l>=t&&(t=l+1),e[a]=l,l};return i}class uf extends lf{renderCollisionMap(t,e){const n=[1,1,t.width-2,t.height-2];this.render({...e,clearColor:[0,0,0,0],scissorRect:n,target:t,pass:"collision"})}getLayerParameters(t,e,n){return{...t.props.parameters,blend:!1,depthRange:[0,1],depthTest:!0}}getModuleParameters(){return{drawToCollisionMap:!0,picking:{isActive:1,isAttribute:!1},lightSources:{}}}}class hf{constructor(){this.id="collision-filter-effect",this.props=null,this.useInPicking=!0,this.order=1,this.channels={},this.collisionFBOs={}}setup(t){this.context=t;const{device:e}=t;this.dummyCollisionMap=e.createTexture({width:1,height:1}),this.collisionFilterPass=new uf(e,{id:"default-collision-filter"})}preRender({effects:t,layers:e,layerFilter:n,viewports:i,onViewportActive:r,views:o,isPicking:s,preRenderStats:a={}}){const{device:A}=this.context;if(s)return;const l=e.filter((({props:{visible:t,collisionEnabled:e}})=>t&&e));if(0===l.length)return void(this.channels={});const c=t?.filter((t=>t.useInPicking&&a[t.id])),u=a["mask-effect"]?.didRender,h=this._groupByCollisionGroup(A,l),g=i[0],d=!this.lastViewport||!this.lastViewport.equals(g)||u;for(const t in h){const e=this.collisionFBOs[t],i=h[t],[s,a]=A.canvasContext.getPixelSize();e.resize({width:s/2,height:a/2}),this._render(i,{effects:c,layerFilter:n,onViewportActive:r,views:o,viewport:g,viewportChanged:d})}}_render(t,{effects:e,layerFilter:n,onViewportActive:i,views:r,viewport:o,viewportChanged:s}){const{collisionGroup:a}=t,A=this.channels[a];if(!A)return;const l=s||t===A||!Dl(A.layers,t.layers,1)||t.layerBounds.some(((t,e)=>!Ci(t,A.layerBounds[e])))||t.allLayersLoaded!==A.allLayersLoaded||t.layers.some((t=>t.props.transitions));if(this.channels[a]=t,l){this.lastViewport=o;const s=this.collisionFBOs[a];this.collisionFilterPass.renderCollisionMap(s,{pass:"collision-filter",isPicking:!0,layers:t.layers,effects:e,layerFilter:n,viewports:o?[o]:[],onViewportActive:i,views:r,moduleParameters:{dummyCollisionMap:this.dummyCollisionMap,devicePixelRatio:s.device.canvasContext.getDevicePixelRatio()/2}})}}_groupByCollisionGroup(t,e){const n={};for(const t of e){const{collisionGroup:e}=t.props;let i=n[e];i||(i={collisionGroup:e,layers:[],layerBounds:[],allLayersLoaded:!0},n[e]=i),i.layers.push(t),i.layerBounds.push(t.getBounds()),t.isLoaded||(i.allLayersLoaded=!1)}for(const e of Object.keys(n))this.collisionFBOs[e]||this.createFBO(t,e),this.channels[e]||(this.channels[e]=n[e]);for(const t of Object.keys(this.collisionFBOs))n[t]||this.destroyFBO(t);return n}getModuleParameters(t){const{collisionGroup:e}=t.props,{collisionFBOs:n,dummyCollisionMap:i}=this;return{collisionFBO:n[e],dummyCollisionMap:i}}cleanup(){this.dummyCollisionMap&&(this.dummyCollisionMap.delete(),this.dummyCollisionMap=void 0),this.channels={};for(const t of Object.keys(this.collisionFBOs))this.destroyFBO(t);this.collisionFBOs={},this.lastViewport=void 0}createFBO(t,e){const{width:n,height:i}=t.gl.canvas,r=t.createTexture({format:"rgba8unorm",width:n,height:i,sampler:{minFilter:"nearest",magFilter:"nearest",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}}),o=t.createTexture({format:"depth16unorm",width:n,height:i,mipmaps:!1,dataFormat:6402,type:5125});this.collisionFBOs[e]=t.createFramebuffer({id:`collision-${e}`,width:n,height:i,colorAttachments:[r],depthStencilAttachment:o})}destroyFBO(t){const e=this.collisionFBOs[t];e.colorAttachments[0]?.destroy(),e.depthStencilAttachment?.destroy(),e.destroy(),delete this.collisionFBOs[t]}}const gf={getCollisionPriority:{type:"accessor",value:0},collisionEnabled:!0,collisionGroup:{type:"string",value:"default"},collisionTestProps:{}};class df extends sf{static{this.defaultProps=gf}static{this.extensionName="CollisionFilterExtension"}getShaders(){return{modules:[af]}}draw({uniforms:t,context:e,moduleParameters:n}){const{collisionEnabled:i}=this.props,{collisionFBO:r,drawToCollisionMap:o}=n,s=i&&Boolean(r);t.collision_enabled=s,o&&(this.props=this.clone(this.props.collisionTestProps).props)}initializeState(t,e){if(null===this.getAttributeManager())return;this.context.deck?._addDefaultEffect(new hf);this.getAttributeManager().add({collisionPriorities:{size:1,stepMode:"dynamic",accessor:"getCollisionPriority"}})}getNeedsPickingBuffer(){return this.props.collisionEnabled}}class pf{constructor(t){const{compare:e,extract:n,required:i}=t;this._propsToCompare=e,this._propsToExtract=n||e,this._requiredProps=i}arePropsEqual(t,e){for(const n of this._propsToCompare)if(!(n in t)||!(n in e)||!Ci(t[n],e[n]))return!1;return!0}initializeProps(t,e){const n={},i={};for(const r of this._propsToExtract)(r in t||r in e)&&(n[r]=t[r],i[r]=e[r]);return this._checkRequiredProps(n),this._checkRequiredProps(i),{start:n,end:i}}getDuration(t,e){return e.transitionDuration}_checkRequiredProps(t){this._requiredProps&&this._requiredProps.forEach((e=>{const n=t[e];Hi(Number.isFinite(n)||Array.isArray(n),`${e} is required for transition`)}))}}const ff={bearing:0,pitch:0,position:[0,0,0]},mf={speed:1.2,curve:1.414};class If extends pf{constructor(t={}){super({compare:["longitude","latitude","zoom","bearing","pitch","position"],extract:["width","height","longitude","latitude","zoom","bearing","pitch","position"],required:["width","height","latitude","longitude","zoom"]}),this.opts={...mf,...t}}interpolateProps(t,e,n){const i=function(t,e,n,i){const{startZoom:r,startCenterXY:o,uDelta:s,w0:a,u1:A,S:l,rho:c,rho2:u,r0:h}=fl(t,e,i);if(A<gl){const i={};for(const r of dl){const o=t[r],s=e[r];i[r]=(g=n)*s+(1-g)*o}return i}var g;const d=n*l,p=Math.cosh(h)/Math.cosh(h+c*d),f=a*((Math.cosh(h)*Math.tanh(h+c*d)-Math.sinh(h))/u)/A,m=r+$A(1/p),I=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}([],s,f);BA(I,I,o);const y=el(I);return{longitude:y[0],latitude:y[1],zoom:m}}(t,e,n,this.opts);for(const r in ff)i[r]=yi(t[r]||ff[r],e[r]||ff[r],n);return i}getDuration(t,e){let{transitionDuration:n}=e;return"auto"===n&&(n=function(t,e,n){const i={...pl,...n},{screenSpeed:r,speed:o,maxDuration:s}=i,{S:a,rho:A}=fl(t,e,i),l=1e3*a;let c;return c=Number.isFinite(r)?l/(r/A):l/o,Number.isFinite(s)&&c>s?0:c}(t,e,this.opts)),n}}const yf="rgb(237, 71, 59)",Cf="rgba(154, 205, 50)",Ef="rgb(224, 34, 110)",_f="rgba(255, 153, 0)",vf="rgb(27, 133, 94)",Bf=1.8,wf={},bf={color:Cf,lineWidth:1.5,label:"no label"},Qf="-:";function xf(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];throw new Error("number"==typeof t?"[MobX] minified error nr: "+t+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+t)}var Df={};function Sf(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==g.g?g.g:"undefined"!=typeof self?self:Df}var Mf=Object.assign,kf=Object.getOwnPropertyDescriptor,Rf=Object.defineProperty,Nf=Object.prototype,Pf=[];Object.freeze(Pf);var Tf={};Object.freeze(Tf);var Lf="undefined"!=typeof Proxy,Ff=Object.toString();function Of(){Lf||xf("Proxy not available")}function Gf(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}var Uf=function(){};function jf(t){return"function"==typeof t}function Yf(t){switch(typeof t){case"string":case"symbol":case"number":return!0}return!1}function Kf(t){return null!==t&&"object"==typeof t}function zf(t){if(!Kf(t))return!1;var e=Object.getPrototypeOf(t);if(null==e)return!0;var n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n.toString()===Ff}function Jf(t){var e=null==t?void 0:t.constructor;return!!e&&("GeneratorFunction"===e.name||"GeneratorFunction"===e.displayName)}function qf(t,e,n){Rf(t,e,{enumerable:!1,writable:!0,configurable:!0,value:n})}function Hf(t,e,n){Rf(t,e,{enumerable:!1,writable:!1,configurable:!0,value:n})}function Vf(t,e){var n="isMobX"+t;return e.prototype[n]=!0,function(t){return Kf(t)&&!0===t[n]}}function Wf(t){return null!=t&&"[object Map]"===Object.prototype.toString.call(t)}function Zf(t){return null!=t&&"[object Set]"===Object.prototype.toString.call(t)}var Xf=void 0!==Object.getOwnPropertySymbols;var $f="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:Xf?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames;function tm(t){return null===t?null:"object"==typeof t?""+t:t}function em(t,e){return Nf.hasOwnProperty.call(t,e)}var nm=Object.getOwnPropertyDescriptors||function(t){var e={};return $f(t).forEach((function(n){e[n]=kf(t,n)})),e};function im(t,e){return!!(t&e)}function rm(t,e,n){return n?t|=e:t&=~e,t}function om(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function sm(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,hm(i.key),i)}}function am(t,e,n){return e&&sm(t.prototype,e),n&&sm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Am(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return om(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?om(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function lm(){return lm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},lm.apply(null,arguments)}function cm(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,um(t,e)}function um(t,e){return um=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},um(t,e)}function hm(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}var gm=Symbol("mobx-stored-annotations");function dm(t){return Object.assign((function(e,n){if(fm(n))return t.decorate_20223_(e,n);pm(e,n,t)}),t)}function pm(t,e,n){em(t,gm)||qf(t,gm,lm({},t[gm])),function(t){return t.annotationType_===Bm}(n)||(t[gm][e]=n)}function fm(t){return"object"==typeof t&&"string"==typeof t.kind}var mm=Symbol("mobx administration"),Im=function(){function t(t){void 0===t&&(t="Atom"),this.name_=void 0,this.flags_=0,this.observers_=new Set,this.lastAccessedBy_=0,this.lowestObserverState_=vI.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=t}var e=t.prototype;return e.onBO=function(){this.onBOL&&this.onBOL.forEach((function(t){return t()}))},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(t){return t()}))},e.reportObserved=function(){return qI(this)},e.reportChanged=function(){zI(),HI(this),JI()},e.toString=function(){return this.name_},am(t,[{key:"isBeingObserved",get:function(){return im(this.flags_,t.isBeingObservedMask_)},set:function(e){this.flags_=rm(this.flags_,t.isBeingObservedMask_,e)}},{key:"isPendingUnobservation",get:function(){return im(this.flags_,t.isPendingUnobservationMask_)},set:function(e){this.flags_=rm(this.flags_,t.isPendingUnobservationMask_,e)}},{key:"diffValue",get:function(){return im(this.flags_,t.diffValueMask_)?1:0},set:function(e){this.flags_=rm(this.flags_,t.diffValueMask_,1===e)}}])}();Im.isBeingObservedMask_=1,Im.isPendingUnobservationMask_=2,Im.diffValueMask_=4;var ym=Vf("Atom",Im);function Cm(t,e,n){void 0===e&&(e=Uf),void 0===n&&(n=Uf);var i,r=new Im(t);return e!==Uf&&Iy(py,r,e,i),n!==Uf&&my(r,n),r}var Em={identity:function(t,e){return t===e},structural:function(t,e){return GC(t,e)},default:function(t,e){return Object.is?Object.is(t,e):t===e?0!==t||1/t==1/e:t!=t&&e!=e},shallow:function(t,e){return GC(t,e,1)}};function _m(t,e,n){return Ny(t)?t:Array.isArray(t)?aI.array(t,{name:n}):zf(t)?aI.object(t,void 0,{name:n}):Wf(t)?aI.map(t,{name:n}):Zf(t)?aI.set(t,{name:n}):"function"!=typeof t||uy(t)||ky(t)?t:Jf(t)?Sy(t):cy(n,t)}function vm(t){return t}var Bm="override";function wm(t,e){return{annotationType_:t,options_:e,make_:bm,extend_:Qm,decorate_20223_:xm}}function bm(t,e,n,i){var r;if(null!=(r=this.options_)&&r.bound)return null===this.extend_(t,e,n,!1)?0:1;if(i===t.target_)return null===this.extend_(t,e,n,!1)?0:2;if(uy(n.value))return 1;var o=Dm(t,this,e,n,!1);return Rf(i,e,o),2}function Qm(t,e,n,i){var r=Dm(t,this,e,n);return t.defineProperty_(e,r,i)}function xm(t,e){var n=e.kind,i=e.name,r=e.addInitializer,o=this;if("field"!=n){var s;if("method"==n)return uy(t)||(t=function(t){var e,n,r,s;return fI(null!=(e=null==(n=o.options_)?void 0:n.name)?e:i.toString(),t,null!=(r=null==(s=o.options_)?void 0:s.autoAction)&&r)}(t)),null!=(s=this.options_)&&s.bound&&r((function(){var t=this,e=t[i].bind(t);e.isMobxAction=!0,t[i]=e})),t;xf("Cannot apply '"+o.annotationType_+"' to '"+String(i)+"' (kind: "+n+"):\n'"+o.annotationType_+"' can only be used on properties with a function value.")}else r((function(){pm(this,i,o)}))}function Dm(t,e,n,i,r){var o,s,a,A,l,c,u,h;void 0===r&&(r=UI.safeDescriptors),h=i,e.annotationType_,h.value;var g,d=i.value;null!=(o=e.options_)&&o.bound&&(d=d.bind(null!=(g=t.proxy_)?g:t.target_));return{value:fI(null!=(s=null==(a=e.options_)?void 0:a.name)?s:n.toString(),d,null!=(A=null==(l=e.options_)?void 0:l.autoAction)&&A,null!=(c=e.options_)&&c.bound?null!=(u=t.proxy_)?u:t.target_:void 0),configurable:!r||t.isPlainObject_,enumerable:!1,writable:!r}}function Sm(t,e){return{annotationType_:t,options_:e,make_:Mm,extend_:km,decorate_20223_:Rm}}function Mm(t,e,n,i){var r;if(i===t.target_)return null===this.extend_(t,e,n,!1)?0:2;if(null!=(r=this.options_)&&r.bound&&(!em(t.target_,e)||!ky(t.target_[e]))&&null===this.extend_(t,e,n,!1))return 0;if(ky(n.value))return 1;var o=Nm(t,this,e,n,!1,!1);return Rf(i,e,o),2}function km(t,e,n,i){var r,o=Nm(t,this,e,n,null==(r=this.options_)?void 0:r.bound);return t.defineProperty_(e,o,i)}function Rm(t,e){var n;var i=e.name,r=e.addInitializer;return ky(t)||(t=Sy(t)),null!=(n=this.options_)&&n.bound&&r((function(){var t=this,e=t[i].bind(t);e.isMobXFlow=!0,t[i]=e})),t}function Nm(t,e,n,i,r,o){var s;void 0===o&&(o=UI.safeDescriptors),s=i,e.annotationType_,s.value;var a,A=i.value;(ky(A)||(A=Sy(A)),r)&&((A=A.bind(null!=(a=t.proxy_)?a:t.target_)).isMobXFlow=!0);return{value:A,configurable:!o||t.isPlainObject_,enumerable:!1,writable:!o}}function Pm(t,e){return{annotationType_:t,options_:e,make_:Tm,extend_:Lm,decorate_20223_:Fm}}function Tm(t,e,n){return null===this.extend_(t,e,n,!1)?0:1}function Lm(t,e,n,i){return function(t,e,n,i){e.annotationType_,i.get;0}(0,this,0,n),t.defineComputedProperty_(e,lm({},this.options_,{get:n.get,set:n.set}),i)}function Fm(t,e){var n=this,i=e.name;return(0,e.addInitializer)((function(){var e=IC(this)[mm],r=lm({},n.options_,{get:t,context:this});r.name||(r.name="ObservableObject."+i.toString()),e.values_.set(i,new _I(r))})),function(){return this[mm].getObservablePropValue_(i)}}function Om(t,e){return{annotationType_:t,options_:e,make_:Gm,extend_:Um,decorate_20223_:jm}}function Gm(t,e,n){return null===this.extend_(t,e,n,!1)?0:1}function Um(t,e,n,i){var r,o;return function(t,e){e.annotationType_;0}(0,this),t.defineObservableProperty_(e,n.value,null!=(r=null==(o=this.options_)?void 0:o.enhancer)?r:_m,i)}function jm(t,e){var n=this,i=e.kind,r=e.name,o=new WeakSet;function s(t,e){var i,s,a=IC(t)[mm],A=new CI(e,null!=(i=null==(s=n.options_)?void 0:s.enhancer)?i:_m,"ObservableObject."+r.toString(),!1);a.values_.set(r,A),o.add(t)}if("accessor"==i)return{get:function(){return o.has(this)||s(this,t.get.call(this)),this[mm].getObservablePropValue_(r)},set:function(t){return o.has(this)||s(this,t),this[mm].setObservablePropValue_(r,t)},init:function(t){return o.has(this)||s(this,t),t}}}var Ym="true",Km=zm();function zm(t){return{annotationType_:Ym,options_:t,make_:Jm,extend_:qm,decorate_20223_:Hm}}function Jm(t,e,n,i){var r,o,s,a;if(n.get)return uI.make_(t,e,n,i);if(n.set){var A=fI(e.toString(),n.set);return i===t.target_?null===t.defineProperty_(e,{configurable:!UI.safeDescriptors||t.isPlainObject_,set:A})?0:2:(Rf(i,e,{configurable:!0,set:A}),2)}if(i!==t.target_&&"function"==typeof n.value)return Jf(n.value)?(null!=(a=this.options_)&&a.autoBind?Sy.bound:Sy).make_(t,e,n,i):(null!=(s=this.options_)&&s.autoBind?cy.bound:cy).make_(t,e,n,i);var l,c=!1===(null==(r=this.options_)?void 0:r.deep)?aI.ref:aI;"function"==typeof n.value&&null!=(o=this.options_)&&o.autoBind&&(n.value=n.value.bind(null!=(l=t.proxy_)?l:t.target_));return c.make_(t,e,n,i)}function qm(t,e,n,i){var r,o,s;if(n.get)return uI.extend_(t,e,n,i);if(n.set)return t.defineProperty_(e,{configurable:!UI.safeDescriptors||t.isPlainObject_,set:fI(e.toString(),n.set)},i);"function"==typeof n.value&&null!=(r=this.options_)&&r.autoBind&&(n.value=n.value.bind(null!=(s=t.proxy_)?s:t.target_));return(!1===(null==(o=this.options_)?void 0:o.deep)?aI.ref:aI).extend_(t,e,n,i)}function Hm(t,e){xf("'"+this.annotationType_+"' cannot be used as a decorator")}var Vm={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function Wm(t){return t||Vm}Object.freeze(Vm);var Zm=Om("observable"),Xm=Om("observable.ref",{enhancer:vm}),$m=Om("observable.shallow",{enhancer:function(t,e,n){return null==t||EC(t)||sC(t)||uC(t)||dC(t)?t:Array.isArray(t)?aI.array(t,{name:n,deep:!1}):zf(t)?aI.object(t,void 0,{name:n,deep:!1}):Wf(t)?aI.map(t,{name:n,deep:!1}):Zf(t)?aI.set(t,{name:n,deep:!1}):void 0}}),tI=Om("observable.struct",{enhancer:function(t,e){return GC(t,e)?e:t}}),eI=dm(Zm);function nI(t){return!0===t.deep?_m:!1===t.deep?vm:(e=t.defaultDecorator)&&null!=(n=null==(i=e.options_)?void 0:i.enhancer)?n:_m;var e,n,i}function iI(t,e,n){return fm(e)?Zm.decorate_20223_(t,e):Yf(e)?void pm(t,e,Zm):Ny(t)?t:zf(t)?aI.object(t,e,n):Array.isArray(t)?aI.array(t,e):Wf(t)?aI.map(t,e):Zf(t)?aI.set(t,e):"object"==typeof t&&null!==t?t:aI.box(t,e)}Mf(iI,eI);var rI,oI,sI={box:function(t,e){var n=Wm(e);return new CI(t,nI(n),n.name,!0,n.equals)},array:function(t,e){var n=Wm(e);return(!1===UI.useProxies||!1===n.proxy?NC:$y)(t,nI(n),n.name)},map:function(t,e){var n=Wm(e);return new cC(t,nI(n),n.name)},set:function(t,e){var n=Wm(e);return new gC(t,nI(n),n.name)},object:function(t,e,n){return FC((function(){return vy(!1===UI.useProxies||!1===(null==n?void 0:n.proxy)?IC({},n):function(t,e){var n,i;return Of(),t=IC(t,e),null!=(i=(n=t[mm]).proxy_)?i:n.proxy_=new Proxy(t,Gy)}({},n),t,e)}))},ref:dm(Xm),shallow:dm($m),deep:eI,struct:dm(tI)},aI=Mf(iI,sI),AI="computed",lI=Pm(AI),cI=Pm("computed.struct",{equals:Em.structural}),uI=function(t,e){if(fm(e))return lI.decorate_20223_(t,e);if(Yf(e))return pm(t,e,lI);if(zf(t))return dm(Pm(AI,t));var n=zf(e)?e:{};return n.get=t,n.name||(n.name=t.name||""),new _I(n)};Object.assign(uI,lI),uI.struct=dm(cI);var hI=0,gI=1,dI=null!=(rI=null==(oI=kf((function(){}),"name"))?void 0:oI.configurable)&&rI,pI={value:"action",configurable:!0,writable:!1,enumerable:!1};function fI(t,e,n,i){function r(){return mI(t,n,e,i||this,arguments)}return void 0===n&&(n=!1),r.isMobxAction=!0,r.toString=function(){return e.toString()},dI&&(pI.value=t,Rf(r,"name",pI)),r}function mI(t,e,n,i,r){var o=function(t,e){var n=!1,i=0;0;var r=UI.trackingDerivation,o=!e||!r;zI();var s=UI.allowStateChanges;o&&(RI(),s=II(!0));var a=PI(!0),A={runAsAction_:o,prevDerivation_:r,prevAllowStateChanges_:s,prevAllowStateReads_:a,notifySpy_:n,startTime_:i,actionId_:gI++,parentActionId_:hI};return hI=A.actionId_,A}(0,e);try{return n.apply(i,r)}catch(t){throw o.error_=t,t}finally{!function(t){hI!==t.actionId_&&xf(30);hI=t.parentActionId_,void 0!==t.error_&&(UI.suppressReactionErrors=!0);yI(t.prevAllowStateChanges_),TI(t.prevAllowStateReads_),JI(),t.runAsAction_&&NI(t.prevDerivation_);0;UI.suppressReactionErrors=!1}(o)}}function II(t){var e=UI.allowStateChanges;return UI.allowStateChanges=t,e}function yI(t){UI.allowStateChanges=t}var CI=function(t){function e(e,n,i,r,o){var s;return void 0===i&&(i="ObservableValue"),void 0===r&&(r=!0),void 0===o&&(o=Em.default),(s=t.call(this,i)||this).enhancer=void 0,s.name_=void 0,s.equals=void 0,s.hasUnreportedChange_=!1,s.interceptors_=void 0,s.changeListeners_=void 0,s.value_=void 0,s.dehancer=void 0,s.enhancer=n,s.name_=i,s.equals=o,s.value_=n(e,void 0,i),s}cm(e,t);var n=e.prototype;return n.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},n.set=function(t){this.value_;if((t=this.prepareNewValue_(t))!==UI.UNCHANGED){0,this.setNewValue_(t)}},n.prepareNewValue_=function(t){if(DI(this),Uy(this)){var e=Yy(this,{object:this,type:Wy,newValue:t});if(!e)return UI.UNCHANGED;t=e.newValue}return t=this.enhancer(t,this.value_,this.name_),this.equals(this.value_,t)?UI.UNCHANGED:t},n.setNewValue_=function(t){var e=this.value_;this.value_=t,this.reportChanged(),Ky(this)&&Jy(this,{type:Wy,object:this,newValue:t,oldValue:e})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(t){return jy(this,t)},n.observe_=function(t,e){return e&&t({observableKind:"value",debugObjectName:this.name_,object:this,type:Wy,newValue:this.value_,oldValue:void 0}),zy(this,t)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return tm(this.get())},n[Symbol.toPrimitive]=function(){return this.valueOf()},e}(Im),EI=Vf("ObservableValue",CI),_I=function(){function t(t){this.dependenciesState_=vI.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.observers_=new Set,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=vI.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new bI(null),this.name_=void 0,this.triggeredBy_=void 0,this.flags_=0,this.derivation=void 0,this.setter_=void 0,this.isTracing_=BI.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,t.get||xf(31),this.derivation=t.get,this.name_=t.name||"ComputedValue",t.set&&(this.setter_=fI("ComputedValue-setter",t.set)),this.equals_=t.equals||(t.compareStructural||t.struct?Em.structural:Em.default),this.scope_=t.context,this.requiresReaction_=t.requiresReaction,this.keepAlive_=!!t.keepAlive}var e=t.prototype;return e.onBecomeStale_=function(){!function(t){if(t.lowestObserverState_!==vI.UP_TO_DATE_)return;t.lowestObserverState_=vI.POSSIBLY_STALE_,t.observers_.forEach((function(t){t.dependenciesState_===vI.UP_TO_DATE_&&(t.dependenciesState_=vI.POSSIBLY_STALE_,t.onBecomeStale_())}))}(this)},e.onBO=function(){this.onBOL&&this.onBOL.forEach((function(t){return t()}))},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(t){return t()}))},e.get=function(){if(this.isComputing&&xf(32,this.name_,this.derivation),0!==UI.inBatch||0!==this.observers_.size||this.keepAlive_){if(qI(this),xI(this)){var t=UI.trackingContext;this.keepAlive_&&!t&&(UI.trackingContext=this),this.trackAndCompute()&&function(t){if(t.lowestObserverState_===vI.STALE_)return;t.lowestObserverState_=vI.STALE_,t.observers_.forEach((function(e){e.dependenciesState_===vI.POSSIBLY_STALE_?e.dependenciesState_=vI.STALE_:e.dependenciesState_===vI.UP_TO_DATE_&&(t.lowestObserverState_=vI.UP_TO_DATE_)}))}(this),UI.trackingContext=t}}else xI(this)&&(this.warnAboutUntrackedRead_(),zI(),this.value_=this.computeValue_(!1),JI());var e=this.value_;if(QI(e))throw e.cause;return e},e.set=function(t){if(this.setter_){this.isRunningSetter&&xf(33,this.name_),this.isRunningSetter=!0;try{this.setter_.call(this.scope_,t)}finally{this.isRunningSetter=!1}}else xf(34,this.name_)},e.trackAndCompute=function(){var t=this.value_,e=this.dependenciesState_===vI.NOT_TRACKING_,n=this.computeValue_(!0),i=e||QI(t)||QI(n)||!this.equals_(t,n);return i&&(this.value_=n),i},e.computeValue_=function(t){this.isComputing=!0;var e,n=II(!1);if(t)e=SI(this,this.derivation,this.scope_);else if(!0===UI.disableErrorBoundaries)e=this.derivation.call(this.scope_);else try{e=this.derivation.call(this.scope_)}catch(t){e=new bI(t)}return yI(n),this.isComputing=!1,e},e.suspend_=function(){this.keepAlive_||(MI(this),this.value_=void 0)},e.observe_=function(t,e){var n=this,i=!0,r=void 0;return hy((function(){var o=n.get();if(!i||e){var s=RI();t({observableKind:"computed",debugObjectName:n.name_,type:Wy,object:n,newValue:o,oldValue:r}),NI(s)}i=!1,r=o}))},e.warnAboutUntrackedRead_=function(){},e.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},e.valueOf=function(){return tm(this.get())},e[Symbol.toPrimitive]=function(){return this.valueOf()},am(t,[{key:"isComputing",get:function(){return im(this.flags_,t.isComputingMask_)},set:function(e){this.flags_=rm(this.flags_,t.isComputingMask_,e)}},{key:"isRunningSetter",get:function(){return im(this.flags_,t.isRunningSetterMask_)},set:function(e){this.flags_=rm(this.flags_,t.isRunningSetterMask_,e)}},{key:"isBeingObserved",get:function(){return im(this.flags_,t.isBeingObservedMask_)},set:function(e){this.flags_=rm(this.flags_,t.isBeingObservedMask_,e)}},{key:"isPendingUnobservation",get:function(){return im(this.flags_,t.isPendingUnobservationMask_)},set:function(e){this.flags_=rm(this.flags_,t.isPendingUnobservationMask_,e)}},{key:"diffValue",get:function(){return im(this.flags_,t.diffValueMask_)?1:0},set:function(e){this.flags_=rm(this.flags_,t.diffValueMask_,1===e)}}])}();_I.isComputingMask_=1,_I.isRunningSetterMask_=2,_I.isBeingObservedMask_=4,_I.isPendingUnobservationMask_=8,_I.diffValueMask_=16;var vI,BI,wI=Vf("ComputedValue",_I);!function(t){t[t.NOT_TRACKING_=-1]="NOT_TRACKING_",t[t.UP_TO_DATE_=0]="UP_TO_DATE_",t[t.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",t[t.STALE_=2]="STALE_"}(vI||(vI={})),function(t){t[t.NONE=0]="NONE",t[t.LOG=1]="LOG",t[t.BREAK=2]="BREAK"}(BI||(BI={}));var bI=function(t){this.cause=void 0,this.cause=t};function QI(t){return t instanceof bI}function xI(t){switch(t.dependenciesState_){case vI.UP_TO_DATE_:return!1;case vI.NOT_TRACKING_:case vI.STALE_:return!0;case vI.POSSIBLY_STALE_:for(var e=PI(!0),n=RI(),i=t.observing_,r=i.length,o=0;o<r;o++){var s=i[o];if(wI(s)){if(UI.disableErrorBoundaries)s.get();else try{s.get()}catch(t){return NI(n),TI(e),!0}if(t.dependenciesState_===vI.STALE_)return NI(n),TI(e),!0}}return LI(t),NI(n),TI(e),!1}}function DI(t){}function SI(t,e,n){var i=PI(!0);LI(t),t.newObserving_=new Array(0===t.runId_?100:t.observing_.length),t.unboundDepsCount_=0,t.runId_=++UI.runId;var r,o=UI.trackingDerivation;if(UI.trackingDerivation=t,UI.inBatch++,!0===UI.disableErrorBoundaries)r=e.call(n);else try{r=e.call(n)}catch(t){r=new bI(t)}return UI.inBatch--,UI.trackingDerivation=o,function(t){for(var e=t.observing_,n=t.observing_=t.newObserving_,i=vI.UP_TO_DATE_,r=0,o=t.unboundDepsCount_,s=0;s<o;s++){var a=n[s];0===a.diffValue&&(a.diffValue=1,r!==s&&(n[r]=a),r++),a.dependenciesState_>i&&(i=a.dependenciesState_)}n.length=r,t.newObserving_=null,o=e.length;for(;o--;){var A=e[o];0===A.diffValue&&YI(A,t),A.diffValue=0}for(;r--;){var l=n[r];1===l.diffValue&&(l.diffValue=0,jI(l,t))}i!==vI.UP_TO_DATE_&&(t.dependenciesState_=i,t.onBecomeStale_())}(t),TI(i),r}function MI(t){var e=t.observing_;t.observing_=[];for(var n=e.length;n--;)YI(e[n],t);t.dependenciesState_=vI.NOT_TRACKING_}function kI(t){var e=RI();try{return t()}finally{NI(e)}}function RI(){var t=UI.trackingDerivation;return UI.trackingDerivation=null,t}function NI(t){UI.trackingDerivation=t}function PI(t){var e=UI.allowStateReads;return UI.allowStateReads=t,e}function TI(t){UI.allowStateReads=t}function LI(t){if(t.dependenciesState_!==vI.UP_TO_DATE_){t.dependenciesState_=vI.UP_TO_DATE_;for(var e=t.observing_,n=e.length;n--;)e[n].lowestObserverState_=vI.UP_TO_DATE_}}var FI=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},OI=!0,GI=!1,UI=function(){var t=Sf();return t.__mobxInstanceCount>0&&!t.__mobxGlobals&&(OI=!1),t.__mobxGlobals&&t.__mobxGlobals.version!==(new FI).version&&(OI=!1),OI?t.__mobxGlobals?(t.__mobxInstanceCount+=1,t.__mobxGlobals.UNCHANGED||(t.__mobxGlobals.UNCHANGED={}),t.__mobxGlobals):(t.__mobxInstanceCount=1,t.__mobxGlobals=new FI):(setTimeout((function(){GI||xf(35)}),1),new FI)}();function jI(t,e){t.observers_.add(e),t.lowestObserverState_>e.dependenciesState_&&(t.lowestObserverState_=e.dependenciesState_)}function YI(t,e){t.observers_.delete(e),0===t.observers_.size&&KI(t)}function KI(t){!1===t.isPendingUnobservation&&(t.isPendingUnobservation=!0,UI.pendingUnobservations.push(t))}function zI(){UI.inBatch++}function JI(){if(0==--UI.inBatch){XI();for(var t=UI.pendingUnobservations,e=0;e<t.length;e++){var n=t[e];n.isPendingUnobservation=!1,0===n.observers_.size&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBUO()),n instanceof _I&&n.suspend_())}UI.pendingUnobservations=[]}}function qI(t){var e=UI.trackingDerivation;return null!==e?(e.runId_!==t.lastAccessedBy_&&(t.lastAccessedBy_=e.runId_,e.newObserving_[e.unboundDepsCount_++]=t,!t.isBeingObserved&&UI.trackingContext&&(t.isBeingObserved=!0,t.onBO())),t.isBeingObserved):(0===t.observers_.size&&UI.inBatch>0&&KI(t),!1)}function HI(t){t.lowestObserverState_!==vI.STALE_&&(t.lowestObserverState_=vI.STALE_,t.observers_.forEach((function(t){t.dependenciesState_===vI.UP_TO_DATE_&&t.onBecomeStale_(),t.dependenciesState_=vI.STALE_})))}var VI=function(){function t(t,e,n,i){void 0===t&&(t="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=vI.NOT_TRACKING_,this.runId_=0,this.unboundDepsCount_=0,this.flags_=0,this.isTracing_=BI.NONE,this.name_=t,this.onInvalidate_=e,this.errorHandler_=n,this.requiresObservable_=i}var e=t.prototype;return e.onBecomeStale_=function(){this.schedule_()},e.schedule_=function(){this.isScheduled||(this.isScheduled=!0,UI.pendingReactions.push(this),XI())},e.runReaction_=function(){if(!this.isDisposed){zI(),this.isScheduled=!1;var t=UI.trackingContext;if(UI.trackingContext=this,xI(this)){this.isTrackPending=!0;try{this.onInvalidate_()}catch(t){this.reportExceptionInDerivation_(t)}}UI.trackingContext=t,JI()}},e.track=function(t){if(!this.isDisposed){zI();0,this.isRunning=!0;var e=UI.trackingContext;UI.trackingContext=this;var n=SI(this,t,void 0);UI.trackingContext=e,this.isRunning=!1,this.isTrackPending=!1,this.isDisposed&&MI(this),QI(n)&&this.reportExceptionInDerivation_(n.cause),JI()}},e.reportExceptionInDerivation_=function(t){var e=this;if(this.errorHandler_)this.errorHandler_(t,this);else{if(UI.disableErrorBoundaries)throw t;var n="[mobx] uncaught error in '"+this+"'";UI.suppressReactionErrors||console.error(n,t),UI.globalReactionErrorHandlers.forEach((function(n){return n(t,e)}))}},e.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.isRunning||(zI(),MI(this),JI()))},e.getDisposer_=function(t){var e=this,n=function n(){e.dispose(),null==t||null==t.removeEventListener||t.removeEventListener("abort",n)};return null==t||null==t.addEventListener||t.addEventListener("abort",n),n[mm]=this,n},e.toString=function(){return"Reaction["+this.name_+"]"},e.trace=function(t){void 0===t&&(t=!1)},am(t,[{key:"isDisposed",get:function(){return im(this.flags_,t.isDisposedMask_)},set:function(e){this.flags_=rm(this.flags_,t.isDisposedMask_,e)}},{key:"isScheduled",get:function(){return im(this.flags_,t.isScheduledMask_)},set:function(e){this.flags_=rm(this.flags_,t.isScheduledMask_,e)}},{key:"isTrackPending",get:function(){return im(this.flags_,t.isTrackPendingMask_)},set:function(e){this.flags_=rm(this.flags_,t.isTrackPendingMask_,e)}},{key:"isRunning",get:function(){return im(this.flags_,t.isRunningMask_)},set:function(e){this.flags_=rm(this.flags_,t.isRunningMask_,e)}},{key:"diffValue",get:function(){return im(this.flags_,t.diffValueMask_)?1:0},set:function(e){this.flags_=rm(this.flags_,t.diffValueMask_,1===e)}}])}();VI.isDisposedMask_=1,VI.isScheduledMask_=2,VI.isTrackPendingMask_=4,VI.isRunningMask_=8,VI.diffValueMask_=16;var WI=100,ZI=function(t){return t()};function XI(){UI.inBatch>0||UI.isRunningReactions||ZI($I)}function $I(){UI.isRunningReactions=!0;for(var t=UI.pendingReactions,e=0;t.length>0;){++e===WI&&(console.error("[mobx] cycle in reaction: "+t[0]),t.splice(0));for(var n=t.splice(0),i=0,r=n.length;i<r;i++)n[i].runReaction_()}UI.isRunningReactions=!1}var ty=Vf("Reaction",VI);var ey="action",ny="autoAction",iy="<unnamed action>",ry=wm(ey),oy=wm("action.bound",{bound:!0}),sy=wm(ny,{autoAction:!0}),ay=wm("autoAction.bound",{autoAction:!0,bound:!0});function Ay(t){return function(e,n){return jf(e)?fI(e.name||iy,e,t):jf(n)?fI(e,n,t):fm(n)?(t?sy:ry).decorate_20223_(e,n):Yf(n)?pm(e,n,t?sy:ry):Yf(e)?dm(wm(t?ny:ey,{name:e,autoAction:t})):void 0}}var ly=Ay(!1);Object.assign(ly,ry);var cy=Ay(!0);function uy(t){return jf(t)&&!0===t.isMobxAction}function hy(t,e){var n,i,r,o;void 0===e&&(e=Tf);var s,a=null!=(n=null==(i=e)?void 0:i.name)?n:"Autorun";if(!e.scheduler&&!e.delay)s=new VI(a,(function(){this.track(c)}),e.onError,e.requiresObservable);else{var A=dy(e),l=!1;s=new VI(a,(function(){l||(l=!0,A((function(){l=!1,s.isDisposed||s.track(c)})))}),e.onError,e.requiresObservable)}function c(){t(s)}return null!=(r=e)&&null!=(r=r.signal)&&r.aborted||s.schedule_(),s.getDisposer_(null==(o=e)?void 0:o.signal)}Object.assign(cy,sy),ly.bound=dm(oy),cy.bound=dm(ay);var gy=function(t){return t()};function dy(t){return t.scheduler?t.scheduler:t.delay?function(e){return setTimeout(e,t.delay)}:gy}var py="onBO",fy="onBUO";function my(t,e,n){return Iy(fy,t,e,n)}function Iy(t,e,n,i){var r="function"==typeof i?PC(e,n):PC(e),o=jf(i)?i:n,s=t+"L";return r[s]?r[s].add(o):r[s]=new Set([o]),function(){var t=r[s];t&&(t.delete(o),0===t.size&&delete r[s])}}var yy="never",Cy="always",Ey="observed";function _y(t){!0===t.isolateGlobalState&&function(){if((UI.pendingReactions.length||UI.inBatch||UI.isRunningReactions)&&xf(36),GI=!0,OI){var t=Sf();0==--t.__mobxInstanceCount&&(t.__mobxGlobals=void 0),UI=new FI}}();var e,n,i=t.useProxies,r=t.enforceActions;if(void 0!==i&&(UI.useProxies=i===Cy||i!==yy&&"undefined"!=typeof Proxy),"ifavailable"===i&&(UI.verifyProxies=!0),void 0!==r){var o=r===Cy?Cy:r===Ey;UI.enforceActions=o,UI.allowStateChanges=!0!==o&&o!==Cy}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach((function(e){e in t&&(UI[e]=!!t[e])})),UI.allowStateReads=!UI.observableRequiresReaction,t.reactionScheduler&&(e=t.reactionScheduler,n=ZI,ZI=function(t){return e((function(){return n(t)}))})}function vy(t,e,n,i){var r=nm(e);return FC((function(){var e=IC(t,i)[mm];$f(r).forEach((function(t){e.extend_(t,r[t],!n||(!(t in n)||n[t]))}))})),t}function By(t,e){return wy(PC(t,e))}function wy(t){var e={name:t.name_};return t.observing_&&t.observing_.length>0&&(e.dependencies=function(t){return Array.from(new Set(t))}(t.observing_).map(wy)),e}var by=0;function Qy(){this.message="FLOW_CANCELLED"}Qy.prototype=Object.create(Error.prototype);var xy=Sm("flow"),Dy=Sm("flow.bound",{bound:!0}),Sy=Object.assign((function(t,e){if(fm(e))return xy.decorate_20223_(t,e);if(Yf(e))return pm(t,e,xy);var n=t,i=n.name||"<unnamed flow>",r=function(){var t,e=arguments,r=++by,o=ly(i+" - runid: "+r+" - init",n).apply(this,e),s=void 0,a=new Promise((function(e,n){var a=0;function A(t){var e;s=void 0;try{e=ly(i+" - runid: "+r+" - yield "+a++,o.next).call(o,t)}catch(t){return n(t)}c(e)}function l(t){var e;s=void 0;try{e=ly(i+" - runid: "+r+" - yield "+a++,o.throw).call(o,t)}catch(t){return n(t)}c(e)}function c(t){if(!jf(null==t?void 0:t.then))return t.done?e(t.value):(s=Promise.resolve(t.value)).then(A,l);t.then(c,n)}t=n,A(void 0)}));return a.cancel=ly(i+" - runid: "+r+" - cancel",(function(){try{s&&My(s);var e=o.return(void 0),n=Promise.resolve(e.value);n.then(Uf,Uf),My(n),t(new Qy)}catch(e){t(e)}})),a};return r.isMobXFlow=!0,r}),xy);function My(t){jf(t.cancel)&&t.cancel()}function ky(t){return!0===(null==t?void 0:t.isMobXFlow)}function Ry(t,e){return!!t&&(void 0!==e?!!EC(t)&&t[mm].values_.has(e):EC(t)||!!t[mm]||ym(t)||ty(t)||wI(t))}function Ny(t){return Ry(t)}function Py(t,e,n){return t.set(e,n),n}function Ty(t,e){if(null==t||"object"!=typeof t||t instanceof Date||!Ny(t))return t;if(EI(t)||wI(t))return Ty(t.get(),e);if(e.has(t))return e.get(t);if(sC(t)){var n=Py(e,t,new Array(t.length));return t.forEach((function(t,i){n[i]=Ty(t,e)})),n}if(dC(t)){var i=Py(e,t,new Set);return t.forEach((function(t){i.add(Ty(t,e))})),i}if(uC(t)){var r=Py(e,t,new Map);return t.forEach((function(t,n){r.set(n,Ty(t,e))})),r}var o=Py(e,t,{});return function(t){if(EC(t))return t[mm].ownKeys_();xf(38)}(t).forEach((function(n){Nf.propertyIsEnumerable.call(t,n)&&(o[n]=Ty(t[n],e))})),o}function Ly(t,e){return Ty(t,new Map)}function Fy(t,e){void 0===e&&(e=void 0),zI();try{return t.apply(e)}finally{JI()}}function Oy(t){return t[mm]}Sy.bound=dm(Dy);var Gy={has:function(t,e){return Oy(t).has_(e)},get:function(t,e){return Oy(t).get_(e)},set:function(t,e,n){var i;return!!Yf(e)&&(null==(i=Oy(t).set_(e,n,!0))||i)},deleteProperty:function(t,e){var n;return!!Yf(e)&&(null==(n=Oy(t).delete_(e,!0))||n)},defineProperty:function(t,e,n){var i;return null==(i=Oy(t).defineProperty_(e,n))||i},ownKeys:function(t){return Oy(t).ownKeys_()},preventExtensions:function(t){xf(13)}};function Uy(t){return void 0!==t.interceptors_&&t.interceptors_.length>0}function jy(t,e){var n=t.interceptors_||(t.interceptors_=[]);return n.push(e),Gf((function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}))}function Yy(t,e){var n=RI();try{for(var i=[].concat(t.interceptors_||[]),r=0,o=i.length;r<o&&((e=i[r](e))&&!e.type&&xf(14),e);r++);return e}finally{NI(n)}}function Ky(t){return void 0!==t.changeListeners_&&t.changeListeners_.length>0}function zy(t,e){var n=t.changeListeners_||(t.changeListeners_=[]);return n.push(e),Gf((function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}))}function Jy(t,e){var n=RI(),i=t.changeListeners_;if(i){for(var r=0,o=(i=i.slice()).length;r<o;r++)i[r](e);NI(n)}}var qy=Symbol("mobx-keys");function Hy(t,e,n){return zf(t)?vy(t,t,e,n):(FC((function(){var i=IC(t,n)[mm];if(!t[qy]){var r=Object.getPrototypeOf(t),o=new Set([].concat($f(t),$f(r)));o.delete("constructor"),o.delete(mm),qf(r,qy,o)}t[qy].forEach((function(t){return i.make_(t,!e||(!(t in e)||e[t]))}))})),t)}var Vy="splice",Wy="update",Zy={get:function(t,e){var n=t[mm];return e===mm?n:"length"===e?n.getArrayLength_():"string"!=typeof e||isNaN(e)?em(tC,e)?tC[e]:t[e]:n.get_(parseInt(e))},set:function(t,e,n){var i=t[mm];return"length"===e&&i.setArrayLength_(n),"symbol"==typeof e||isNaN(e)?t[e]=n:i.set_(parseInt(e),n),!0},preventExtensions:function(){xf(15)}},Xy=function(){function t(t,e,n,i){void 0===t&&(t="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=i,this.atom_=new Im(t),this.enhancer_=function(t,n){return e(t,n,"ObservableArray[..]")}}var e=t.prototype;return e.dehanceValue_=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.dehanceValues_=function(t){return void 0!==this.dehancer&&t.length>0?t.map(this.dehancer):t},e.intercept_=function(t){return jy(this,t)},e.observe_=function(t,e){return void 0===e&&(e=!1),e&&t({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),zy(this,t)},e.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},e.setArrayLength_=function(t){("number"!=typeof t||isNaN(t)||t<0)&&xf("Out of range: "+t);var e=this.values_.length;if(t!==e)if(t>e){for(var n=new Array(t-e),i=0;i<t-e;i++)n[i]=void 0;this.spliceWithArray_(e,0,n)}else this.spliceWithArray_(t,e-t)},e.updateArrayLength_=function(t,e){t!==this.lastKnownLength_&&xf(16),this.lastKnownLength_+=e,this.legacyMode_&&e>0&&RC(t+e+1)},e.spliceWithArray_=function(t,e,n){var i=this;this.atom_;var r=this.values_.length;if(void 0===t?t=0:t>r?t=r:t<0&&(t=Math.max(0,r+t)),e=1===arguments.length?r-t:null==e?0:Math.max(0,Math.min(e,r-t)),void 0===n&&(n=Pf),Uy(this)){var o=Yy(this,{object:this.proxy_,type:Vy,index:t,removedCount:e,added:n});if(!o)return Pf;e=o.removedCount,n=o.added}if(n=0===n.length?n:n.map((function(t){return i.enhancer_(t,void 0)})),this.legacyMode_){var s=n.length-e;this.updateArrayLength_(r,s)}var a=this.spliceItemsIntoValues_(t,e,n);return 0===e&&0===n.length||this.notifyArraySplice_(t,n,a),this.dehanceValues_(a)},e.spliceItemsIntoValues_=function(t,e,n){var i;if(n.length<1e4)return(i=this.values_).splice.apply(i,[t,e].concat(n));var r=this.values_.slice(t,t+e),o=this.values_.slice(t+e);this.values_.length+=n.length-e;for(var s=0;s<n.length;s++)this.values_[t+s]=n[s];for(var a=0;a<o.length;a++)this.values_[t+n.length+a]=o[a];return r},e.notifyArrayChildUpdate_=function(t,e,n){var i=!this.owned_&&!1,r=Ky(this),o=r||i?{observableKind:"array",object:this.proxy_,type:Wy,debugObjectName:this.atom_.name_,index:t,newValue:e,oldValue:n}:null;this.atom_.reportChanged(),r&&Jy(this,o)},e.notifyArraySplice_=function(t,e,n){var i=!this.owned_&&!1,r=Ky(this),o=r||i?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:Vy,index:t,removed:n,added:e,removedCount:n.length,addedCount:e.length}:null;this.atom_.reportChanged(),r&&Jy(this,o)},e.get_=function(t){if(!(this.legacyMode_&&t>=this.values_.length))return this.atom_.reportObserved(),this.dehanceValue_(this.values_[t]);console.warn("[mobx] Out of bounds read: "+t)},e.set_=function(t,e){var n=this.values_;if(this.legacyMode_&&t>n.length&&xf(17,t,n.length),t<n.length){this.atom_;var i=n[t];if(Uy(this)){var r=Yy(this,{type:Wy,object:this.proxy_,index:t,newValue:e});if(!r)return;e=r.newValue}(e=this.enhancer_(e,i))!==i&&(n[t]=e,this.notifyArrayChildUpdate_(t,e,i))}else{for(var o=new Array(t+1-n.length),s=0;s<o.length-1;s++)o[s]=void 0;o[o.length-1]=e,this.spliceWithArray_(n.length,0,o)}},t}();function $y(t,e,n,i){return void 0===n&&(n="ObservableArray"),void 0===i&&(i=!1),Of(),FC((function(){var r=new Xy(n,e,i,!1);Hf(r.values_,mm,r);var o=new Proxy(r.values_,Zy);return r.proxy_=o,t&&t.length&&r.spliceWithArray_(0,0,t),o}))}var tC={clear:function(){return this.splice(0)},replace:function(t){var e=this[mm];return e.spliceWithArray_(0,e.values_.length,t)},toJSON:function(){return this.slice()},splice:function(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var o=this[mm];switch(arguments.length){case 0:return[];case 1:return o.spliceWithArray_(t);case 2:return o.spliceWithArray_(t,e)}return o.spliceWithArray_(t,e,i)},spliceWithArray:function(t,e,n){return this[mm].spliceWithArray_(t,e,n)},push:function(){for(var t=this[mm],e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.spliceWithArray_(t.values_.length,0,n),t.values_.length},pop:function(){return this.splice(Math.max(this[mm].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=this[mm],e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.spliceWithArray_(0,0,n),t.values_.length},reverse:function(){return UI.trackingDerivation&&xf(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){UI.trackingDerivation&&xf(37,"sort");var t=this.slice();return t.sort.apply(t,arguments),this.replace(t),this},remove:function(t){var e=this[mm],n=e.dehanceValues_(e.values_).indexOf(t);return n>-1&&(this.splice(n,1),!0)}};function eC(t,e){"function"==typeof Array.prototype[t]&&(tC[t]=e(t))}function nC(t){return function(){var e=this[mm];e.atom_.reportObserved();var n=e.dehanceValues_(e.values_);return n[t].apply(n,arguments)}}function iC(t){return function(e,n){var i=this,r=this[mm];return r.atom_.reportObserved(),r.dehanceValues_(r.values_)[t]((function(t,r){return e.call(n,t,r,i)}))}}function rC(t){return function(){var e=this,n=this[mm];n.atom_.reportObserved();var i=n.dehanceValues_(n.values_),r=arguments[0];return arguments[0]=function(t,n,i){return r(t,n,i,e)},i[t].apply(i,arguments)}}eC("at",nC),eC("concat",nC),eC("flat",nC),eC("includes",nC),eC("indexOf",nC),eC("join",nC),eC("lastIndexOf",nC),eC("slice",nC),eC("toString",nC),eC("toLocaleString",nC),eC("toSorted",nC),eC("toSpliced",nC),eC("with",nC),eC("every",iC),eC("filter",iC),eC("find",iC),eC("findIndex",iC),eC("findLast",iC),eC("findLastIndex",iC),eC("flatMap",iC),eC("forEach",iC),eC("map",iC),eC("some",iC),eC("toReversed",iC),eC("reduce",rC),eC("reduceRight",rC);var oC=Vf("ObservableArrayAdministration",Xy);function sC(t){return Kf(t)&&oC(t[mm])}var aC={},AC="add",lC="delete",cC=function(){function t(t,e,n){var i=this;void 0===e&&(e=_m),void 0===n&&(n="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[mm]=aC,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=e,this.name_=n,jf(Map)||xf(18),FC((function(){i.keysAtom_=Cm("ObservableMap.keys()"),i.data_=new Map,i.hasMap_=new Map,t&&i.merge(t)}))}var e=t.prototype;return e.has_=function(t){return this.data_.has(t)},e.has=function(t){var e=this;if(!UI.trackingDerivation)return this.has_(t);var n=this.hasMap_.get(t);if(!n){var i=n=new CI(this.has_(t),vm,"ObservableMap.key?",!1);this.hasMap_.set(t,i),my(i,(function(){return e.hasMap_.delete(t)}))}return n.get()},e.set=function(t,e){var n=this.has_(t);if(Uy(this)){var i=Yy(this,{type:n?Wy:AC,object:this,newValue:e,name:t});if(!i)return this;e=i.newValue}return n?this.updateValue_(t,e):this.addValue_(t,e),this},e.delete=function(t){var e=this;if((this.keysAtom_,Uy(this))&&!Yy(this,{type:lC,object:this,name:t}))return!1;if(this.has_(t)){var n=Ky(this),i=n?{observableKind:"map",debugObjectName:this.name_,type:lC,object:this,oldValue:this.data_.get(t).value_,name:t}:null;return Fy((function(){var n;e.keysAtom_.reportChanged(),null==(n=e.hasMap_.get(t))||n.setNewValue_(!1),e.data_.get(t).setNewValue_(void 0),e.data_.delete(t)})),n&&Jy(this,i),!0}return!1},e.updateValue_=function(t,e){var n=this.data_.get(t);if((e=n.prepareNewValue_(e))!==UI.UNCHANGED){var i=Ky(this),r=i?{observableKind:"map",debugObjectName:this.name_,type:Wy,object:this,oldValue:n.value_,name:t,newValue:e}:null;0,n.setNewValue_(e),i&&Jy(this,r)}},e.addValue_=function(t,e){var n=this;this.keysAtom_,Fy((function(){var i,r=new CI(e,n.enhancer_,"ObservableMap.key",!1);n.data_.set(t,r),e=r.value_,null==(i=n.hasMap_.get(t))||i.setNewValue_(!0),n.keysAtom_.reportChanged()}));var i=Ky(this),r=i?{observableKind:"map",debugObjectName:this.name_,type:AC,object:this,name:t,newValue:e}:null;i&&Jy(this,r)},e.get=function(t){return this.has(t)?this.dehanceValue_(this.data_.get(t).get()):this.dehanceValue_(void 0)},e.dehanceValue_=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},e.values=function(){var t=this,e=this.keys();return YC({next:function(){var n=e.next(),i=n.done,r=n.value;return{done:i,value:i?void 0:t.get(r)}}})},e.entries=function(){var t=this,e=this.keys();return YC({next:function(){var n=e.next(),i=n.done,r=n.value;return{done:i,value:i?void 0:[r,t.get(r)]}}})},e[Symbol.iterator]=function(){return this.entries()},e.forEach=function(t,e){for(var n,i=Am(this);!(n=i()).done;){var r=n.value,o=r[0],s=r[1];t.call(e,s,o,this)}},e.merge=function(t){var e=this;return uC(t)&&(t=new Map(t)),Fy((function(){zf(t)?function(t){var e=Object.keys(t);if(!Xf)return e;var n=Object.getOwnPropertySymbols(t);return n.length?[].concat(e,n.filter((function(e){return Nf.propertyIsEnumerable.call(t,e)}))):e}(t).forEach((function(n){return e.set(n,t[n])})):Array.isArray(t)?t.forEach((function(t){var n=t[0],i=t[1];return e.set(n,i)})):Wf(t)?(function(t){var e=Object.getPrototypeOf(t),n=Object.getPrototypeOf(e);return null===Object.getPrototypeOf(n)}(t)||xf(19,t),t.forEach((function(t,n){return e.set(n,t)}))):null!=t&&xf(20,t)})),this},e.clear=function(){var t=this;Fy((function(){kI((function(){for(var e,n=Am(t.keys());!(e=n()).done;){var i=e.value;t.delete(i)}}))}))},e.replace=function(t){var e=this;return Fy((function(){for(var n,i=function(t){if(Wf(t)||uC(t))return t;if(Array.isArray(t))return new Map(t);if(zf(t)){var e=new Map;for(var n in t)e.set(n,t[n]);return e}return xf(21,t)}(t),r=new Map,o=!1,s=Am(e.data_.keys());!(n=s()).done;){var a=n.value;if(!i.has(a))if(e.delete(a))o=!0;else{var A=e.data_.get(a);r.set(a,A)}}for(var l,c=Am(i.entries());!(l=c()).done;){var u=l.value,h=u[0],g=u[1],d=e.data_.has(h);if(e.set(h,g),e.data_.has(h)){var p=e.data_.get(h);r.set(h,p),d||(o=!0)}}if(!o)if(e.data_.size!==r.size)e.keysAtom_.reportChanged();else for(var f=e.data_.keys(),m=r.keys(),I=f.next(),y=m.next();!I.done;){if(I.value!==y.value){e.keysAtom_.reportChanged();break}I=f.next(),y=m.next()}e.data_=r})),this},e.toString=function(){return"[object ObservableMap]"},e.toJSON=function(){return Array.from(this)},e.observe_=function(t,e){return zy(this,t)},e.intercept_=function(t){return jy(this,t)},am(t,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Map"}}])}(),uC=Vf("ObservableMap",cC);var hC={},gC=function(){function t(t,e,n){var i=this;void 0===e&&(e=_m),void 0===n&&(n="ObservableSet"),this.name_=void 0,this[mm]=hC,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=n,jf(Set)||xf(22),this.enhancer_=function(t,i){return e(t,i,n)},FC((function(){i.atom_=Cm(i.name_),t&&i.replace(t)}))}var e=t.prototype;return e.dehanceValue_=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.clear=function(){var t=this;Fy((function(){kI((function(){for(var e,n=Am(t.data_.values());!(e=n()).done;){var i=e.value;t.delete(i)}}))}))},e.forEach=function(t,e){for(var n,i=Am(this);!(n=i()).done;){var r=n.value;t.call(e,r,r,this)}},e.add=function(t){var e=this;if((this.atom_,Uy(this))&&!Yy(this,{type:AC,object:this,newValue:t}))return this;if(!this.has(t)){Fy((function(){e.data_.add(e.enhancer_(t,void 0)),e.atom_.reportChanged()}));var n=!1,i=Ky(this),r=i?{observableKind:"set",debugObjectName:this.name_,type:AC,object:this,newValue:t}:null;n,i&&Jy(this,r)}return this},e.delete=function(t){var e=this;if(Uy(this)&&!Yy(this,{type:lC,object:this,oldValue:t}))return!1;if(this.has(t)){var n=Ky(this),i=n?{observableKind:"set",debugObjectName:this.name_,type:lC,object:this,oldValue:t}:null;return Fy((function(){e.atom_.reportChanged(),e.data_.delete(t)})),n&&Jy(this,i),!0}return!1},e.has=function(t){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(t))},e.entries=function(){var t=0,e=Array.from(this.keys()),n=Array.from(this.values());return YC({next:function(){var i=t;return t+=1,i<n.length?{value:[e[i],n[i]],done:!1}:{done:!0}}})},e.keys=function(){return this.values()},e.values=function(){this.atom_.reportObserved();var t=this,e=0,n=Array.from(this.data_.values());return YC({next:function(){return e<n.length?{value:t.dehanceValue_(n[e++]),done:!1}:{done:!0}}})},e.intersection=function(t){return Zf(t)?t.intersection(this):new Set(this).intersection(t)},e.union=function(t){return Zf(t)?t.union(this):new Set(this).union(t)},e.difference=function(t){return new Set(this).difference(t)},e.symmetricDifference=function(t){return Zf(t)?t.symmetricDifference(this):new Set(this).symmetricDifference(t)},e.isSubsetOf=function(t){return new Set(this).isSubsetOf(t)},e.isSupersetOf=function(t){return new Set(this).isSupersetOf(t)},e.isDisjointFrom=function(t){return Zf(t)?t.isDisjointFrom(this):new Set(this).isDisjointFrom(t)},e.replace=function(t){var e=this;return dC(t)&&(t=new Set(t)),Fy((function(){Array.isArray(t)||Zf(t)?(e.clear(),t.forEach((function(t){return e.add(t)}))):null!=t&&xf("Cannot initialize set from "+t)})),this},e.observe_=function(t,e){return zy(this,t)},e.intercept_=function(t){return jy(this,t)},e.toJSON=function(){return Array.from(this)},e.toString=function(){return"[object ObservableSet]"},e[Symbol.iterator]=function(){return this.values()},am(t,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Set"}}])}(),dC=Vf("ObservableSet",gC),pC=Object.create(null),fC="remove",mC=function(){function t(t,e,n,i){void 0===e&&(e=new Map),void 0===i&&(i=Km),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=t,this.values_=e,this.name_=n,this.defaultAnnotation_=i,this.keysAtom_=new Im("ObservableObject.keys"),this.isPlainObject_=zf(this.target_)}var e=t.prototype;return e.getObservablePropValue_=function(t){return this.values_.get(t).get()},e.setObservablePropValue_=function(t,e){var n=this.values_.get(t);if(n instanceof _I)return n.set(e),!0;if(Uy(this)){var i=Yy(this,{type:Wy,object:this.proxy_||this.target_,name:t,newValue:e});if(!i)return null;e=i.newValue}if((e=n.prepareNewValue_(e))!==UI.UNCHANGED){var r=Ky(this),o=r?{type:Wy,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:n.value_,name:t,newValue:e}:null;0,n.setNewValue_(e),r&&Jy(this,o)}return!0},e.get_=function(t){return UI.trackingDerivation&&!em(this.target_,t)&&this.has_(t),this.target_[t]},e.set_=function(t,e,n){return void 0===n&&(n=!1),em(this.target_,t)?this.values_.has(t)?this.setObservablePropValue_(t,e):n?Reflect.set(this.target_,t,e):(this.target_[t]=e,!0):this.extend_(t,{value:e,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,n)},e.has_=function(t){if(!UI.trackingDerivation)return t in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var e=this.pendingKeys_.get(t);return e||(e=new CI(t in this.target_,vm,"ObservableObject.key?",!1),this.pendingKeys_.set(t,e)),e.get()},e.make_=function(t,e){if(!0===e&&(e=this.defaultAnnotation_),!1!==e){if(vC(this,e,t),!(t in this.target_)){var n;if(null!=(n=this.target_[gm])&&n[t])return;xf(1,e.annotationType_,this.name_+"."+t.toString())}for(var i=this.target_;i&&i!==Nf;){var r=kf(i,t);if(r){var o=e.make_(this,t,r,i);if(0===o)return;if(1===o)break}i=Object.getPrototypeOf(i)}_C(this,e,t)}},e.extend_=function(t,e,n,i){if(void 0===i&&(i=!1),!0===n&&(n=this.defaultAnnotation_),!1===n)return this.defineProperty_(t,e,i);vC(this,n,t);var r=n.extend_(this,t,e,i);return r&&_C(this,n,t),r},e.defineProperty_=function(t,e,n){void 0===n&&(n=!1),this.keysAtom_;try{zI();var i=this.delete_(t);if(!i)return i;if(Uy(this)){var r=Yy(this,{object:this.proxy_||this.target_,name:t,type:AC,newValue:e.value});if(!r)return null;var o=r.newValue;e.value!==o&&(e=lm({},e,{value:o}))}if(n){if(!Reflect.defineProperty(this.target_,t,e))return!1}else Rf(this.target_,t,e);this.notifyPropertyAddition_(t,e.value)}finally{JI()}return!0},e.defineObservableProperty_=function(t,e,n,i){void 0===i&&(i=!1),this.keysAtom_;try{zI();var r=this.delete_(t);if(!r)return r;if(Uy(this)){var o=Yy(this,{object:this.proxy_||this.target_,name:t,type:AC,newValue:e});if(!o)return null;e=o.newValue}var s=CC(t),a={configurable:!UI.safeDescriptors||this.isPlainObject_,enumerable:!0,get:s.get,set:s.set};if(i){if(!Reflect.defineProperty(this.target_,t,a))return!1}else Rf(this.target_,t,a);var A=new CI(e,n,"ObservableObject.key",!1);this.values_.set(t,A),this.notifyPropertyAddition_(t,A.value_)}finally{JI()}return!0},e.defineComputedProperty_=function(t,e,n){void 0===n&&(n=!1),this.keysAtom_;try{zI();var i=this.delete_(t);if(!i)return i;if(Uy(this))if(!Yy(this,{object:this.proxy_||this.target_,name:t,type:AC,newValue:void 0}))return null;e.name||(e.name="ObservableObject.key"),e.context=this.proxy_||this.target_;var r=CC(t),o={configurable:!UI.safeDescriptors||this.isPlainObject_,enumerable:!1,get:r.get,set:r.set};if(n){if(!Reflect.defineProperty(this.target_,t,o))return!1}else Rf(this.target_,t,o);this.values_.set(t,new _I(e)),this.notifyPropertyAddition_(t,void 0)}finally{JI()}return!0},e.delete_=function(t,e){if(void 0===e&&(e=!1),this.keysAtom_,!em(this.target_,t))return!0;if(Uy(this)&&!Yy(this,{object:this.proxy_||this.target_,name:t,type:fC}))return null;try{var n;zI();var i,r=Ky(this),o=this.values_.get(t),s=void 0;if(!o&&r)s=null==(i=kf(this.target_,t))?void 0:i.value;if(e){if(!Reflect.deleteProperty(this.target_,t))return!1}else delete this.target_[t];if(o&&(this.values_.delete(t),o instanceof CI&&(s=o.value_),HI(o)),this.keysAtom_.reportChanged(),null==(n=this.pendingKeys_)||null==(n=n.get(t))||n.set(t in this.target_),r){var a={type:fC,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:s,name:t};0,r&&Jy(this,a)}}finally{JI()}return!0},e.observe_=function(t,e){return zy(this,t)},e.intercept_=function(t){return jy(this,t)},e.notifyPropertyAddition_=function(t,e){var n,i=Ky(this);if(i){var r=i?{type:AC,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:t,newValue:e}:null;0,i&&Jy(this,r)}null==(n=this.pendingKeys_)||null==(n=n.get(t))||n.set(!0),this.keysAtom_.reportChanged()},e.ownKeys_=function(){return this.keysAtom_.reportObserved(),$f(this.target_)},e.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},t}();function IC(t,e){var n;if(em(t,mm))return t;var i=null!=(n=null==e?void 0:e.name)?n:"ObservableObject",r=new mC(t,new Map,String(i),function(t){var e;return t?null!=(e=t.defaultDecorator)?e:zm(t):void 0}(e));return qf(t,mm,r),t}var yC=Vf("ObservableObjectAdministration",mC);function CC(t){return pC[t]||(pC[t]={get:function(){return this[mm].getObservablePropValue_(t)},set:function(e){return this[mm].setObservablePropValue_(t,e)}})}function EC(t){return!!Kf(t)&&yC(t[mm])}function _C(t,e,n){var i;null==(i=t.target_[gm])||delete i[n]}function vC(t,e,n){}var BC,wC,bC=MC(0),QC=function(){var t=!1,e={};return Object.defineProperty(e,"0",{set:function(){t=!0}}),Object.create(e)[0]=1,!1===t}(),xC=0,DC=function(){};BC=DC,wC=Array.prototype,Object.setPrototypeOf?Object.setPrototypeOf(BC.prototype,wC):void 0!==BC.prototype.__proto__?BC.prototype.__proto__=wC:BC.prototype=wC;var SC=function(t){function e(e,n,i,r){var o;return void 0===i&&(i="ObservableArray"),void 0===r&&(r=!1),o=t.call(this)||this,FC((function(){var t=new Xy(i,n,r,!0);t.proxy_=o,Hf(o,mm,t),e&&e.length&&o.spliceWithArray(0,0,e),QC&&Object.defineProperty(o,"0",bC)})),o}cm(e,t);var n=e.prototype;return n.concat=function(){this[mm].atom_.reportObserved();for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Array.prototype.concat.apply(this.slice(),e.map((function(t){return sC(t)?t.slice():t})))},n[Symbol.iterator]=function(){var t=this,e=0;return YC({next:function(){return e<t.length?{value:t[e++],done:!1}:{done:!0,value:void 0}}})},am(e,[{key:"length",get:function(){return this[mm].getArrayLength_()},set:function(t){this[mm].setArrayLength_(t)}},{key:Symbol.toStringTag,get:function(){return"Array"}}])}(DC);function MC(t){return{enumerable:!1,configurable:!0,get:function(){return this[mm].get_(t)},set:function(e){this[mm].set_(t,e)}}}function kC(t){Rf(SC.prototype,""+t,MC(t))}function RC(t){if(t>xC){for(var e=xC;e<t+100;e++)kC(e);xC=t}}function NC(t,e,n){return new SC(t,e,n)}function PC(t,e){if("object"==typeof t&&null!==t){if(sC(t))return void 0!==e&&xf(23),t[mm].atom_;if(dC(t))return t.atom_;if(uC(t)){if(void 0===e)return t.keysAtom_;var n=t.data_.get(e)||t.hasMap_.get(e);return n||xf(25,e,LC(t)),n}if(EC(t)){if(!e)return xf(26);var i=t[mm].values_.get(e);return i||xf(27,e,LC(t)),i}if(ym(t)||wI(t)||ty(t))return t}else if(jf(t)&&ty(t[mm]))return t[mm];xf(28)}function TC(t,e){return t||xf(29),void 0!==e?TC(PC(t,e)):ym(t)||wI(t)||ty(t)||uC(t)||dC(t)?t:t[mm]?t[mm]:void xf(24,t)}function LC(t,e){var n;if(void 0!==e)n=PC(t,e);else{if(uy(t))return t.name;n=EC(t)||uC(t)||dC(t)?TC(t):PC(t)}return n.name_}function FC(t){var e=RI(),n=II(!0);zI();try{return t()}finally{JI(),yI(n),NI(e)}}Object.entries(tC).forEach((function(t){var e=t[0],n=t[1];"concat"!==e&&qf(SC.prototype,e,n)})),RC(1e3);var OC=Nf.toString;function GC(t,e,n){return void 0===n&&(n=-1),UC(t,e,n)}function UC(t,e,n,i,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var o=typeof t;if("function"!==o&&"object"!==o&&"object"!=typeof e)return!1;var s=OC.call(t);if(s!==OC.call(e))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(t)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":n>=0&&n++}t=jC(t),e=jC(e);var a="[object Array]"===s;if(!a){if("object"!=typeof t||"object"!=typeof e)return!1;var A=t.constructor,l=e.constructor;if(A!==l&&!(jf(A)&&A instanceof A&&jf(l)&&l instanceof l)&&"constructor"in t&&"constructor"in e)return!1}if(0===n)return!1;n<0&&(n=-1),r=r||[];for(var c=(i=i||[]).length;c--;)if(i[c]===t)return r[c]===e;if(i.push(t),r.push(e),a){if((c=t.length)!==e.length)return!1;for(;c--;)if(!UC(t[c],e[c],n-1,i,r))return!1}else{var u,h=Object.keys(t);if(c=h.length,Object.keys(e).length!==c)return!1;for(;c--;)if(!em(e,u=h[c])||!UC(t[u],e[u],n-1,i,r))return!1}return i.pop(),r.pop(),!0}function jC(t){return sC(t)?t.slice():Wf(t)||uC(t)||Zf(t)||dC(t)?Array.from(t.entries()):t}function YC(t){return t[Symbol.iterator]=KC,t}function KC(){return this}["Symbol","Map","Set"].forEach((function(t){void 0===Sf()[t]&&xf("MobX requires global '"+t+"' to be available or polyfilled")})),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(t){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:LC},$mobx:mm});var zC=g(9482);function JC(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const qC=["node","connector"];var HC,VC,WC;!function(t){t.Comments="comments",t.Points="markers",t.Edges="edges",t.Clusters="clusters",t.Polygons="polygons",t.SVG="svg",t.Path="path",t.GeoJson="geojson",t.Text="labels",t.Hull="convex-hull"}(HC||(HC={})),function(t){t.MoveNode="dragNode",t.DragLine="dragLine",t.SetLineId="setLineId",t.DeleteSource="deleteSource"}(VC||(VC={})),function(t){t.Targets="targets",t.Sources="sources",t.Restore="restore"}(WC||(WC={}));class ZC extends e.BusEventWithPayload{}JC(ZC,"type","mapType");class XC extends e.BusEventWithPayload{}JC(XC,"type","mapView");class $C extends e.BusEventWithPayload{}JC($C,"type","panel-edit-started");class tE extends e.BusEventWithPayload{}JC(tE,"type","panel-edit-finished");class eE extends e.BusEventWithPayload{}JC(eE,"type","thresholdType");var nE=g(8398),iE=g.n(nE);function rE(t){return`data:image/svg+xml;charset=utf-8,${encodeURIComponent(t)}`}function oE({colorCounts:t,countAbbr:e,isFiltered:n,annotStateCounts:i,allTotal:r,allStTotal:o}){const s="rgb(240,240,240)",a=[],A=[];let l=0,c=0;const u=o,h=Object.values(t),g=Object.keys(t);h.length&&h.forEach(((t,e)=>{A.push(l),l+=t.count})),u&&(i[s]={count:r-o,label:"Unknown"});const d=[],p=[];[s,Ef,_f,vf].forEach((t=>{const e=i[t];void 0!==e&&(d.push(e),p.push(t))})),u&&d.forEach(((t,e)=>{a.push(c),c+=t.count}));const f=45,m=Math.round(32.85),I=90;let y="\n  <svg width='90' height='90' stroke-width='1' viewBox='0 0 90 90' \n  xmlns='http://www.w3.org/2000/svg'\n  text-anchor='middle' style='font: 35px arial; font-weight: lighter; display: block'>";y+=`<defs>\n            <mask id='donutMask'>\n              <circle cx='45' cy='45' r='${m}' fill='white'/>\n            </mask>\n          </defs>`;let C=0;for(let t=0;t<h.length;t++){const e=C+h[t].count/l*360;y+=sE(C/360,e/360,f,m,g[t]),C=e}y+=`<circle cx='45' cy='45' r='${m}' fill='${s}'  />`;let E=f-m,_=E;for(let t=0;t<a.length;t++){const e=d[t].count/c*(I-2*E);y+=`<rect x='0' y='${_}' width='90' height='${e}' fill='${p[t]}' mask='url(#donutMask)'/>`,_+=e}return y+=`<text dominant-baseline='central' transform='translate(45, 45)' >\n    ${n?r:e}\n    </text>`,y+="</svg>",y}function sE(t,e,n,i,r){e-t==1&&(e-=1e-5);const o=2*Math.PI*(t-.25),s=2*Math.PI*(e-.25),a=Math.cos(o),A=Math.sin(o),l=Math.cos(s),c=Math.sin(s),u=e-t>.5?1:0;return`<path d="M ${n+i*a} ${n+i*A} L ${n+n*a} ${n+n*A} A ${n} ${n} 0 ${u} 1 ${n+n*l} ${n+n*c} L ${n+i*l} ${n+i*c} A ${i} ${i} 0 ${u} 0 ${n+i*a} ${n+i*A}" fill="${r}" />`}function aE(t,e,n,i,r,o,s){try{var a=t[o](s),A=a.value}catch(t){return void n(t)}a.done?e(A):Promise.resolve(A).then(i,r)}const AE=t=>{const{featureCollection:e,getSelectedFeIndexes:n,getEditableLines:i,db:r,pickable:o,setIconFeatures:a,setLineFeatures:A,lineFeatures:l,getMode:c,getSelectedIp:u,findNode:h,thresholds:g,time:d,onHover:p,highlightColor:f,legendItems:m,setIsShowCenter:I,relatedLineIds:y,setRelatedLineIds:C,isDefDir:E,getVisLayers:_}=t,v=PE(_,"primary"),B=PE(_,"nodes"),w=PE(_,"svg"),b=PE(_,"labels"),Q=(null==v?void 0:v.getVisible)&&!(null==v?void 0:v.getIndeterminate);var x,D,S;return new of({highlightColor:f,onHover:p,id:HC.Points,data:e,selectedFeatureIndexes:null!==(x=null==n?void 0:n.get(HC.Points))&&void 0!==x?x:[],mode:"modify"===c&&Q?np:Zd,_subLayerProps:{geojson:{pointType:"circle+icon+text",getText:t=>{var e,n;return null===(n=t.properties)||void 0===n||null===(e=n.style)||void 0===e?void 0:e.text},getTextAlignmentBaseline:"center",getTextPixelOffset:t=>[0,15],getTextColor:t=>{var e;const{thrId:n,cluster:i,defaultColor:r,all_annots:o}=t.properties,s=DE(g,n,r);if(i)return[0,0,0];const{color:a}=s;if(o&&!(null===(e=m.at(-1))||void 0===e?void 0:e.disabled)){var A;const t=vE(o,d),e=null==t||null===(A=t[0])||void 0===A?void 0:A.newState,n=(null==e?void 0:e.startsWith("Normal"))?vf:"Alerting"===e?Ef:_f;return bE(n)}return bE(a)},getTextSize:t=>{var e,n,i;const r=null===(i=t.properties)||void 0===i||null===(n=i.style)||void 0===n||null===(e=n.textConfig)||void 0===e?void 0:e.fontSize;return null!=r?r:12},getFillColor:t=>{var e,n,i;const{thrId:r,defaultColor:o,all_annots:s}=t.properties,a=DE(g,r,o),{color:A}=a;if(s&&!(null===(e=m.at(-1))||void 0===e?void 0:e.disabled)){var l;const t=vE(s,d),e=null==t||null===(l=t[0])||void 0===l?void 0:l.newState,n=(null==e?void 0:e.startsWith("Normal"))?vf:"Alerting"===e?Ef:_f;return bE(n)}const c=null===(i=t.properties)||void 0===i||null===(n=i.style)||void 0===n?void 0:n.opacity,u=bE(A);return c&&(u[3]=Math.round(255*c)),u},stroke:!0,getLineWidth:.5,getLineColor:t=>{var e,n,i;const{thrId:r,defaultColor:o,all_annots:s}=t.properties,a=DE(g,r,o),{color:A}=a;if(s&&!(null==m||null===(e=m.at(-1))||void 0===e?void 0:e.disabled)){var l;const t=vE(s,d),e=null==t||null===(l=t[0])||void 0===l?void 0:l.newState,n=(null==e?void 0:e.startsWith("Normal"))?vf:"Alerting"===e?Ef:_f;return bE(n).slice(0,3)}const c=null===(i=t.properties)||void 0===i||null===(n=i.style)||void 0===n?void 0:n.opacity,u=bE(A);return c&&(u[3]=Math.round(255*c)),u},getPointRadius:t=>{var e,n,i;const r=u===(null===(e=t.properties)||void 0===e?void 0:e.locName),o=null===(i=t.properties)||void 0===i||null===(n=i.style)||void 0===n?void 0:n.size;return r?o/2*1.3:o/2},getIcon:t=>{const{thrId:e,threshold:n,defaultColor:i}=t.properties,r=null==n?void 0:n.iconName;if(r){return{url:r.startsWith("http")?r:"public/plugins/vaduga-mapgl-app/mapglplus/img/icons/"+r+".svg",width:128,height:128,id:r}}return{url:rE('<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100">  \n</svg>'),width:1,height:1,id:"blank"}},iconSizeScale:1,getIconPixelOffset:t=>{const{threshold:e,cluster:n}=t.properties;return n?[0,0]:[0,null!==(i=null==e?void 0:e.iconVOffset)&&void 0!==i?i:0];var i},getIconSize:t=>{var e;const n=u===(null===(e=t.properties)||void 0===e?void 0:e.locName),{cluster:i,threshold:r}=t.properties;if(i)return 40;{const t=null==r?void 0:r.iconSize;return t?n?1.5*t:t:30}},iconSizeUnits:"pixels",parameters:{depthTest:!1},_subLayerProps:{"points-text":{visible:(null==b?void 0:b.visible)&&!(null==b?void 0:b.indeterminate),extensions:[new df],collisionGroup:"text",collisionTestProps:{sizeScale:2.5}},"points-icon":{loadOptions:{imagebitmap:{resizeWidth:128,resizeHeight:128}},visible:(null==w?void 0:w.visible)&&!(null==w?void 0:w.indeterminate),extensions:[new df],collisionGroup:"icons",collisionTestProps:{sizeScale:1.5}},"points-circle":{visible:(null==v?void 0:v.getVisible)&&!(null==v?void 0:v.getIndeterminate)&&(null==B?void 0:B.getVisible)&&!(null==B?void 0:B.getIndeterminate)}}}},filled:!0,getEditHandlePointColor:t=>Array.from(bE("rgb(224, 52, 184, 0.8)")),getEditHandlePointRadius:17,editHandlePointOutline:!0,editHandlePointRadiusScale:.8,editHandlePointRadiusMinPixels:7,editHandlePointRadiusMaxPixels:15,pickable:o,pickingDepth:0,autoHighlight:!0,onEdit:(D=function*({updatedData:t,editType:e,editContext:n}){const o=n.position.map((t=>parseFloat(t.toFixed(6)))),u=n.featureIndexes[0],g=t.features[u],{locName:d}=g.properties;if("movePosition"!==e||"modify"!==c){if("finishMovePosition"===e&&"modify"===c&&(C(null),r)){var p;const[t]=yield J1(r,d),e=t.get(d);let n,i=null==e?void 0:e.rxPtId;if(a(null),A(null),I(!1),i)n=(new Date).getTime();else{var f;const t=(0,zC.getTsid)();n=t.timestamp;const e=t.toBase62String();i=e,yield null===(f=r.ids)||void 0===f?void 0:f.upsert({name:d,tsId:e,updatedAt:t.timestamp})}yield null==r||null===(p=r.edges)||void 0===p?void 0:p.incrementalUpsert({id:i+"-"+i,parPath:Ly(o),updatedAt:n})}}else if((0,nE.flushSync)((()=>{a(t.features)})),(null==l?void 0:l.length)>0||i){const t=h(d);var m;(0,s.PX)({locName:d,node:t,newCoord:o,lineFeatures:null!==(m=null!=l?l:i)&&void 0!==m?m:[],relatedLineIds:y,setRelatedLineIds:C,isDefDir:E}),(0,nE.flushSync)((()=>{A(null!=l?l:i)}))}},S=function(){var t=this,e=arguments;return new Promise((function(n,i){var r=D.apply(t,e);function o(t){aE(r,n,i,o,s,"next",t)}function s(t){aE(r,n,i,o,s,"throw",t)}o(void 0)}))},function(t){return S.apply(this,arguments)})})};const lE=class extends np{_dragEditHandle(t,e,n,i){var r,o;const s=n.properties,a=e.data.features[s.featureIndex];let A;if((null===(r=e.modeConfig)||void 0===r?void 0:r.lockRectangles)&&"Rectangle"===(null==a||null===(o=a.properties)||void 0===o?void 0:o.shape)){var l;const t=function(t,e,n){const i=t.geometry.coordinates;if(!i)return null;const r=i[0].slice(0,4);r[e%4]=n;const o=r[(e+2)%4],s=r[e%4];return r[(e+1)%4]=[s[0],o[1]],r[(e+3)%4]=[o[0],s[1]],[[...r,r[0]]]}(a,null==s||null===(l=s.positionIndexes)||void 0===l?void 0:l[1],i.mapCoords);A=new Ud(e.data).replaceGeometry(s.featureIndex,{coordinates:t,type:"Polygon"}).getObject()}else A=new Ud(e.data).replacePosition(s.featureIndex,s.positionIndexes,i.mapCoords).getObject();e.onEdit({updatedData:A,editType:t,editContext:{featureIndexes:[s.featureIndex],positionIndexes:s.positionIndexes,position:i.mapCoords,picks:i.picks}})}};function cE(t,e,n,i,r,o,s){try{var a=t[o](s),A=a.value}catch(t){return void n(t)}a.done?e(A):Promise.resolve(A).then(i,r)}function uE(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hE(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){uE(t,e,n[e])}))}return t}function gE(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}const dE=t=>{const{linesCollection:e,getSelectedFeIndexes:n,db:i,setIconFeatures:r,setLineFeatures:o,getMode:s,pickable:a,onHover:A,highlightColor:l,setIsShowCenter:c,time:u,thresholds:h,findNode:g,findEdge:d,isDefDir:p,legendItems:f,commentFeatures:m,setCommentFeatures:I,getVisLayers:y}=t,C=PE(y,"stat2"),E=PE(y,"edges"),_=(null==E?void 0:E.getVisible)&&!(null==E?void 0:E.getIndeterminate);var v;const B=null!==(v=null==n?void 0:n.get(HC.Edges))&&void 0!==v?v:[];return new of({visible:_||!_&&"modify"===s,highlightColor:l,onHover:A,id:HC.Edges,data:e,selectedFeatureIndexes:B,mode:"modify"===s?new Tp(new lE):Zd,modeConfig:{enableSnapping:!0},_subLayerProps:{geojson:{getLineWidth:t=>{const{thrId:e,defaultColor:n}=t.properties;return DE(h,e,n).lineWidth},updateTriggers:{getLineColor:u,getTextColor:u,getFillColor:u},getLineColor:t=>{var e;if("modify"===s&&!_&&!(null==B?void 0:B.includes(t.id)))return[0,0,0,0];if(C.visible&&t.properties.throughput){let e;const{bandNumber:n,bandWidth:i,throughput:r}=t.properties;if(i||n){let t;i?t=r/i*100:n&&(t=r/n*100),e=RE(t)}else e=RE(101);return bE(e)}const{thrId:n,defaultColor:i,all_annots:r}=t.properties,o=DE(h,n,i),{color:a}=o;if(r&&!(null==f||null===(e=f.at(-1))||void 0===e?void 0:e.disabled)){var A;const t=vE(r,u),e=null==t||null===(A=t[0])||void 0===A?void 0:A.newState,n=(null==e?void 0:e.startsWith("Normal"))?vf:"Alerting"===e?Ef:_f;return bE(n).slice(0,3)}return bE(a)}},guides:{}},getEditHandlePointColor:t=>{var e,n;if("modify"===s&&!_&&!(null==B?void 0:B.includes(t.properties.featureIndex)))return[0,0,0,0];return"snap-target"===(null===(e=t.properties)||void 0===e?void 0:e.editHandleType)?Array.from(bE("rgb(47, 161, 222, 0.8)")):"editHandle"===t.properties.guideType||"snap-source"===(null===(n=t.properties)||void 0===n?void 0:n.editHandleType)?Array.from(bE("rgb(230, 202, 92, 0.9)")):[0,0,0,0]},getEditHandlePointRadius:t=>7,editHandlePointOutline:!0,editHandlePointStrokeWidth:.1,lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:.1,pickable:a,pickingDepth:2,pickingRadius:10,autoHighlight:!0,onClick:t=>{var n;const{isGuide:s,object:a,coordinate:A}=t;null==A||A.map((t=>parseFloat(t.toFixed(6))));if(s&&"editHandle"===(null==a||null===(n=a.properties)||void 0===n?void 0:n.guideType)){var l;const{featureIndex:t,positionIndexes:n}=a.properties,s=n[0],h=n[1],f=t,m=e.features[f],I=m.properties.parPath,y=I.at(0),C=null==I?void 0:I.at(-1),E=d(p?y+"-"+C:C+"-"+y),_=null==E?void 0:E.getPropertyValue("parPath"),v=(null==E?void 0:E.getPropertyValue("isEph"))?{isEph:!0}:{},B=m.properties.segrPathVisible,w=B.length>0?B:_.map((t=>0));let b=h;var c,u;if(w&&w[s].length)b=null!==(u=null===(c=w[s][h])||void 0===c?void 0:c.gIdx)&&void 0!==u?u:h;if("snap-source"===(null==a||null===(l=a.properties)||void 0===l?void 0:l.editHandleType)){if(0===s&&0===h||"string"==typeof _[b])return void console.log("OnClick: You can't delete this handle");_.splice(b,1)}i&&A&&V1(hE({db:i,newFeatureParPath:_,findNode:g},v)),(0,nE.flushSync)((()=>{r(null),o(null)}))}},onEdit:(w=function*(t){var n,{updatedData:a,editType:A,editContext:l}=t;gE(t,["updatedData","editType","editContext"]);const{featureIndexes:u,positionIndexes:h,position:f}=l,y=u[0],[C,E]=h;let _=E;const v=a.features,B=v[y],w=B.properties.parPath,b=w.at(0),Q=w.at(-1),x=d(p?b+"-"+Q:Q+"-"+b),D=null==x?void 0:x.getPropertyValue("parPath");(null==D?void 0:D.rPath)&&x.setDataProperty("rPath",D.slice());const S=(null==x?void 0:x.getPropertyValue("isEph"))?{isEph:!0}:{};if(!D)return;const M=B.properties.segrPathVisible,k=M.length>0?M:D.map((t=>0)),R=f.map((t=>parseFloat(t.toFixed(6))));var N;if(_=null!==(N=null===(n=k[C][E])||void 0===n?void 0:n.gIdx)&&void 0!==N?N:E,"addPosition"===A){var P;D.splice(_,0,R);const t=B.properties.numCoords;return null===(P=B.properties.numCoords)||void 0===P||P.splice(p?_:t.length-1-_+1,0,R),void(0,nE.flushSync)((()=>{o(a.features)}))}if(0===C&&0===E||"string"==typeof D[_])console.log("OnEdit: You can't edit this handle");else if("movePosition"!==A){if(["finishMovePosition"].includes(A)&&"modify"===s){var T;const t=D[_];Array.isArray(t)&&t.length>3?D[_]=[...R,...D[_].slice(2)]:D[_]=R;const n=null==l||null===(T=l.picks)||void 0===T?void 0:T.find((t=>"snap-target"===t.object.properties.editHandleType));if(n){var L,F,O,G,U,j,Y;const t=null==n||null===(F=n.object)||void 0===F||null===(L=F.properties)||void 0===L?void 0:L.featureIndex,i=null==n||null===(G=n.object)||void 0===G||null===(O=G.properties)||void 0===O?void 0:O.positionIndexes,r=void 0!==t&&e.features[t],o=null==r||null===(U=r.properties.segrPathVisible[i[0]])||void 0===U?void 0:U[i[1]],s="string"==typeof(null==o?void 0:o.item)&&(null==o||null===(Y=o.item)||void 0===Y||null===(j=Y.split(Qf))||void 0===j?void 0:j[0]);s&&(D[_]=s)}i&&(r(null),o(null),c(!1),V1(hE({db:i,newFeatureParPath:D,findNode:g},S)))}}else{let t,e=D[_];if(Array.isArray(e)){var K;const n=B.properties.numCoords;if(null===(K=B.properties.numCoords)||void 0===K||K.splice(p?_:n.length-1-_,1,R),e.length>2){const e=[b,Q,_].join("|");t=m.slice();const n=t.find((t=>t.comId===e));n&&(n.geometry.coordinates=R)}}(0,nE.flushSync)((()=>{o(v),t&&I(t)}))}},b=function(){var t=this,e=arguments;return new Promise((function(n,i){var r=w.apply(t,e);function o(t){cE(r,n,i,o,s,"next",t)}function s(t){cE(r,n,i,o,s,"throw",t)}o(void 0)}))},function(t){return b.apply(this,arguments)})});var w,b};function pE(t,e,n){if(null!==t)for(var i,r,o,s,a,A,l,c,u=0,h=0,g=t.type,d="FeatureCollection"===g,p="Feature"===g,f=d?t.features.length:1,m=0;m<f;m++){a=(c=!!(l=d?t.features[m].geometry:p?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var I=0;I<a;I++){var y=0,C=0;if(null!==(s=c?l.geometries[I]:l)){A=s.coordinates;var E=s.type;switch(u=!n||"Polygon"!==E&&"MultiPolygon"!==E?0:1,E){case null:break;case"Point":if(!1===e(A,h,m,y,C))return!1;h++,y++;break;case"LineString":case"MultiPoint":for(i=0;i<A.length;i++){if(!1===e(A[i],h,m,y,C))return!1;h++,"MultiPoint"===E&&y++}"LineString"===E&&y++;break;case"Polygon":case"MultiLineString":for(i=0;i<A.length;i++){for(r=0;r<A[i].length-u;r++){if(!1===e(A[i][r],h,m,y,C))return!1;h++}"MultiLineString"===E&&y++,"Polygon"===E&&C++}"Polygon"===E&&y++;break;case"MultiPolygon":for(i=0;i<A.length;i++){for(C=0,r=0;r<A[i].length;r++){for(o=0;o<A[i][r].length-u;o++){if(!1===e(A[i][r][o],h,m,y,C))return!1;h++}C++}y++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===pE(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}var fE=function(t,e={}){if(null!=t.bbox&&!0!==e.recompute)return t.bbox;const n=[1/0,1/0,-1/0,-1/0];return pE(t,(t=>{n[0]>t[0]&&(n[0]=t[0]),n[1]>t[1]&&(n[1]=t[1]),n[2]<t[0]&&(n[2]=t[0]),n[3]<t[1]&&(n[3]=t[1])})),n};g(5223);g(6056);function mE(t,e,n=!0){if("string"==typeof t){const n=null==e?void 0:e[t],i=null==n?void 0:n.getPropertyValue("feature"),r=null==i?void 0:i.geometry,o=null==r?void 0:r.coordinates;return o||null}return Array.isArray(t)?n?t.slice(0,2):t:null}function IE(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yE(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}class CE{get getVisible(){return this.visible}get getIndeterminate(){return this.indeterminate}setVisible(t){this.visible=t}setIndeterminate(t){this.indeterminate=t}setFold(t){this.fold=t}constructor(t){var{name:e,group:n,fold:i="open",visible:r=!0,idx:o=0,indeterminate:s=!1}=t,a=yE(t,["name","group","fold","visible","idx","indeterminate"]);IE(this,"name",void 0),IE(this,"group",void 0),IE(this,"fold",void 0),IE(this,"visible",void 0),IE(this,"indeterminate",void 0),IE(this,"idx",void 0),IE(this,"children",void 0),IE(this,"combine",void 0);const{children:A}=a;Hy(this,{setVisible:ly,setIndeterminate:ly,setFold:ly}),n&&(this.group=n),A&&Array.isArray(A)&&(this.children=A.map((t=>new CE(t)))),this.name=e,this.fold=i,this.visible=r,this.indeterminate=s,this.idx=o}}function EE(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){EE(t,e,n[e])}))}return t}function vE(t,e){if(!(null==t?void 0:t.length))return[];if(!e)return t.map((t=>t.at(-1)));const n=[];for(const i of t){let t=0,r=i.length-1,o=null;for(;t<=r;){const n=Math.floor((t+r)/2),s=i[n];s.timeEnd<=e?(o=s,t=n+1):r=n-1}o&&n.push(o)}const i=n.sort(((t,e)=>{const n={Alerting:1,Pending:2,Normal:3},i=t.newState.startsWith("Alerting")?"Alerting":t.newState.startsWith("Pending")?"Pending":"Normal",r=e.newState.startsWith("Alerting")?"Alerting":e.newState.startsWith("Pending")?"Pending":"Normal";return n[i]-n[r]}));return i}function BE(t){if(!t)return`rgba(${[100,100,0,1].join(", ")})`;const e=t.match(/\d+(\.\d+)?/g);3===e.length&&e.push("1");const n=e.map(((t,e)=>3===e?Math.min(Number(t),1):Math.min(Number(t)+45,255)));return`rgba(${n.join(", ")})`}function wE(t){if(!t)return`rgba(${[100,100,0,1].join(", ")})`;const e=t.match(/\d+(\.\d+)?/g);3===e.length&&e.push("1");const n=e.map(((t,e)=>3===e?Math.min(Number(t),1):Math.max(Number(t)-45,0)));return`rgba(${n.join(", ")})`}const bE=t=>{const e=t.match(/[\d.]+/g);if(null===e||e.length<3)return[0,0,0];const n=e.slice(0).map(Number);return n[3]=255*(n[3]||1),n};function QE(t){t.startsWith("#")&&(t=t.slice(1));let e=1;8===t.length&&(e=parseInt(t.substr(6,2),16)/255,t=t.substr(0,6));const n=parseInt(t.substr(0,2),16),i=parseInt(t.substr(2,2),16),r=parseInt(t.substr(4,2),16);return 1!==e?`rgba(${n}, ${i}, ${r}, ${e.toFixed(2)})`:`rgb(${n}, ${i}, ${r})`}function xE(t){if(!t||!t.startsWith("[")&&parseInt(t,10))return null!=t?t:null;try{var e;return null!==(e=JSON.parse(t))&&void 0!==e?e:t}catch(e){return null!=t?t:null}}function DE(t,e,n){var i;return null!==(i=null==t?void 0:t[e])&&void 0!==i?i:_E({},bf,n?{color:n}:{})}function SE({features:t,lineSwitchMap:e,isOffset:n,findEdge:i,findNode:r,thresholds:o,getNodeMap:s}){if(!t||!Array.isArray(t)||(null==t?void 0:t.length)<1)return[[],[]];const a=[];return t.forEach(((A,l)=>{if(!(null==A?void 0:A.properties))return;const{parPath:c,segrPath:u,defaultColor:h,thrId:g}=null==A?void 0:A.properties;if(!c||(null==c?void 0:c.length)<1)return;const d=null==A?void 0:A.geometry,p=null==d?void 0:d.coordinates,f=DE(o,g,h),{color:m,lineWidth:I}=f;if(!n){var y;const n=[...t],i=e.get(c.at(-1));n.push(A),n.push(i);const r=null===(y=p[0])||void 0===y?void 0:y[0],o=p[p.length-1],s=null==o?void 0:o.at(-1);return void(r&&s&&a.push([[r,s],m,I]))}let C=0;null==u||u.forEach(((t,e)=>{var n;if(!t.length)return;if(0===e||e===u.length-1||t.length>2){const t=p[C];return a.push([t,m,I]),void C++}const A=null===(n=t[0].item)||void 0===n?void 0:n.split(Qf)[0],l=t.at(-1).item;let c;const g=i(A+"-"+l);if(g)c=g;else{const t=i(l+"-"+A);t&&(c=t)}if(c){var d,f,y;const t=null===(d=c.getPropertyValue("parPath"))||void 0===d?void 0:d.map((t=>mE(t,s))),e=null===(f=r(A))||void 0===f?void 0:f.getPropertyValue("feature"),n=null==e||null===(y=e.properties)||void 0===y?void 0:y.thrId,i=DE(o,n,h),{color:l,lineWidth:u}=i,g=[t,l,u];a.push(g)}}))})),[[],a]}function ME(t,e,n){var i,r,o,s;if(!t)return[];const{properties:a}=t,A=t.geometry,l=null==n||null===(i=n[null===(r=a.parPath)||void 0===r?void 0:r.at(-1)])||void 0===i?void 0:i.getPropertyValue("feature"),c=null==l?void 0:l.geometry;var u;const h=A&&A.coordinates&&A.coordinates.length>0&&null!==(u=A.coordinates[0][0])&&void 0!==u?u:null;var g;const d=c&&c.coordinates&&c.coordinates.length>0&&null!==(g=c.coordinates)&&void 0!==g?g:null;if(!h||!d)return[];const p=((t,e)=>{if(!t||!e)return 0;let n;const i=e[0]-e[0],r=e[1]-e[1],o=-t[0],s=i*-t[1]-r*o;return n=90-Fe(t,e),Math.abs(n)>90&&s>0&&(n+=180),n})(h,d),{thrId:f,defaultColor:m}=a;let I=(e&&void 0!==f?e[f]:_E({},bf,m?{color:m}:{})).color;const{bandNumber:y,bandWidth:C,throughput:E}=a;if((C||y)&&E){let t;C?t=E/C*100:y&&(t=E/y*100),I=RE(t)}const{locName:_,edgeField:v}=t.properties;let B=t.properties[v];if("number"==typeof B){const{value:t,unit:e}=function(t){if("number"==typeof t){const e=t/1e3,n=e/1e3;let i;return i=n>=1?{value:n.toFixed(2),unit:" Mbps"}:e>=1?{value:e.toFixed(1),unit:" Kbps"}:{value:t,unit:" bps"},i}return console.error("Invalid input. Please provide a number."),null}(B);B=t+e}const w=null==a||null===(s=a.style)||void 0===s||null===(o=s.textConfig)||void 0===o?void 0:o.fontSize;return t&&B?{to:[{text:B+"\n",coordinates:[h,d],color:I,angle:p,fontSize:w}]}:{to:[]}}function kE(t){if(t)return"Point"===t.type?t.coordinates:"MultiPoint"===t.type||"LineString"===t.type?t.coordinates[0]:"Polygon"===t.type||"MultiLineString"===t.type?t.coordinates[0][0]:"MultiPolygon"===t.type?t.coordinates[0][0][0]:void 0}function RE(t){return t>=0&&t<=20?"rgba(14, 205, 50,1)":t<=30?"rgba(255, 221, 87, 0.9)":t<=40?"rgba(237, 129, 40, 1)":t<=50?"rgba(219, 92, 158,1)":t<=75?"rgba(163, 27, 50,1)":t<=100?"rgba(164, 50, 168,1)":"rgb(72, 190, 194)"}const NE=(t,e,n,i=!1)=>{const r=[];let o=i?.1:n;for(let i=t;i<=e;i+=o){const t=parseFloat(i.toFixed(1));r.push({value:t,label:t.toString()}),1===t&&(o=n)}return r},PE=(t,e,n="primary",i)=>{if("primary"===e&&"primary"===n)return t.find((t=>t.name===e));const r=(null==t?void 0:t.find)&&t.find((t=>t.group===n));return r?void 0!==i?r.children[i]:r.children.find((t=>t.name===e)):null},TE={inject:{"vs:#decl":"\nin vec2 instanceDashArrays;\nin float instanceDashOffsets;\nout vec2 vDashArray;\nout float vDashOffset;\n","vs:#main-end":"\nvDashArray = instanceDashArrays;\nvDashOffset = instanceDashOffsets / width.x;\n","fs:#decl":"\nuniform float dashAlignMode;\nuniform float capType;\nuniform bool dashGapPickable;\nin vec2 vDashArray;\nin float vDashOffset;\n","fs:#main-start":"\nfloat solidLength = vDashArray.x;\nfloat gapLength = vDashArray.y;\nfloat unitLength = solidLength + gapLength;\nfloat offset;\nif (unitLength > 0.0) {\nif (dashAlignMode == 0.0) {\noffset = vDashOffset;\n} else {\nunitLength = vPathLength / round(vPathLength / unitLength);\noffset = solidLength / 2.0;\n}\nfloat unitOffset = mod(vPathPosition.y + offset, unitLength);\nif (gapLength > 0.0 && unitOffset > solidLength) {\nif (capType <= 0.5) {\nif (!(dashGapPickable && bool(picking.isActive))) {\ndiscard;\n}\n} else {\nfloat distToEnd = length(vec2(\nmin(unitOffset - solidLength, unitLength - unitOffset),\nvPathPosition.x\n));\nif (distToEnd > 1.0) {\nif (!(dashGapPickable && bool(picking.isActive))) {\ndiscard;\n}\n}\n}\n}\n}\n"}},LE={inject:{"vs:#decl":"\nin float instanceOffsets;\n","vs:DECKGL_FILTER_SIZE":"\nfloat offsetWidth = abs(instanceOffsets * 2.0) + 1.0;\nsize *= offsetWidth;\n","vs:#main-end":"\nfloat offsetWidth = abs(instanceOffsets * 2.0) + 1.0;\nfloat offsetDir = sign(instanceOffsets);\nvPathPosition.x = (vPathPosition.x + offsetDir) * offsetWidth - offsetDir;\nvPathPosition.y *= offsetWidth;\nvPathLength *= offsetWidth;\n","fs:#main-start":"\nfloat isInside;\nisInside = step(-1.0, vPathPosition.x) * step(vPathPosition.x, 1.0);\nif (isInside == 0.0) {\ndiscard;\n}\n"}},FE={getDashArray:{type:"accessor",value:[0,0]},getOffset:{type:"accessor",value:0},dashJustified:!1,dashGapPickable:!1};class OE extends sf{static{this.defaultProps=FE}static{this.extensionName="PathStyleExtension"}constructor({dash:t=!1,offset:e=!1,highPrecisionDash:n=!1}={}){super({dash:t||n,offset:e,highPrecisionDash:n})}isEnabled(t){return"pathTesselator"in t.state}getShaders(t){if(!t.isEnabled(this))return null;let e={};return t.opts.dash&&(e=oA(e,TE)),t.opts.offset&&(e=oA(e,LE)),e}initializeState(t,e){const n=this.getAttributeManager();n&&e.isEnabled(this)&&(e.opts.dash&&n.addInstanced({instanceDashArrays:{size:2,accessor:"getDashArray"},instanceDashOffsets:e.opts.highPrecisionDash?{size:1,accessor:"getPath",transform:e.getDashOffsets.bind(this)}:{size:1,update:t=>{t.constant=!0,t.value=[0]}}}),e.opts.offset&&n.addInstanced({instanceOffsets:{size:1,accessor:"getOffset"}}))}updateState(t,e){if(!e.isEnabled(this))return;const n={};e.opts.dash&&(n.dashAlignMode=this.props.dashJustified?1:0,n.dashGapPickable=Boolean(this.props.dashGapPickable)),this.state.model?.setUniforms(n)}getDashOffsets(t){const e=[0],n="XY"===this.props.positionFormat?2:3,i=Array.isArray(t[0]),r=i?t.length:t.length/n;let o,s;for(let a=0;a<r-1;a++)o=i?t[a]:t.slice(a*n,a*n+n),o=this.projectPosition(o),a>0&&(e[a]=e[a-1]+ki(s,o)),s=o;return e[r-1]=0,e}}function GE({onHover:t,thresholds:e,highlightColor:n,getVisLayers:i,data:r,index:o,order:s,type:a,theme2:A}){const l=PE(i,"doesnMatter",HC.Path,o),c=null==l?void 0:l.getVisible,u=null==l?void 0:l.getIndeterminate;return new xg({visible:!!["par-path-extension","par-path-line"].includes(a)||c&&!u,id:HC.Path+"-"+a+o,order:s,data:r,autoHighlight:!0,highlightColor:n,pickable:!["par-path-extension","par-path-line"].includes(a),widthMinPixels:1,capRounded:!0,jointRounded:!0,getPath:t=>{switch(a){case"par-path-extension":case"par-path-line":return t[0];default:return t.geometry.coordinates}},getDashArray:"par-path-extension"===a?[5,8]:null,dashJustified:!0,dashGapPickable:!0,extensions:[new OE({dash:!0})],getColor:t=>{let n;switch(a){case"par-path-extension":case"par-path-line":n=A.isDark?BE(t[1]):wE(t[1]);break;default:var i,r;const{thrId:o,defaultColor:s}=t.properties;n=DE(e,o,s).color;const a=null===(r=t.properties)||void 0===r||null===(i=r.style)||void 0===i?void 0:i.opacity,l=bE(n);return a&&(l[3]=Math.round(255*a)),l}return bE(n)},getWidth:t=>{switch(a){case"par-path-extension":case"par-path-line":return t[2]*Bf;default:var e,n,i;return null!==(i=null==t||null===(n=t.properties)||void 0===n||null===(e=n.threshold)||void 0===e?void 0:e.lineWidth)&&void 0!==i?i:1}},onHover:t})}const UE=({data:t,type:e="nums",dir:n="to"})=>{const i=["list1","list2"].includes(e);let r;switch(e){case"unames":case"nums":r="meters";break;default:r="pixels"}return new Mh({data:t,id:HC.Text+"-"+e,getText:t=>t.text,getPosition:t=>{switch(e){case"unames":return[t.coordinates[0],t.coordinates[1]+5e-5];case"nums":return[t.coordinates[0],t.coordinates[1]-5e-5];default:const[e,n]=t.coordinates;return[(e[0]+n[0])/2,(e[1]+n[1])/2]}},getAngle:t=>{var e;return null!==(e=t.angle)&&void 0!==e?e:0},getAlignmentBaseline:i?"to"===n?"top":"bottom":"center",getTextAnchor:i?"start":"middle",sizeUnits:r,getSize:t=>{switch(e){case"unames":return 5;case"nums":return 3;default:const e=t.fontSize;return null!=e?e:13}},getColor:t=>bE(t.color)})},jE={marker:{x:0,y:0,width:128,height:128,mask:!0}},YE=t=>{const{data:e,getSelectedFeIndexes:n,onHover:i,highlightColor:r,iconMapping:o=jE,getVisLayers:s,isShowTooltip:a,displayProperties:A}=t,l=PE(s,"comments"),c=(null==l?void 0:l.getVisible)&&!(null==l?void 0:l.getIndeterminate);var u;return new ih({visible:c,highlightColor:r,onHover:i,id:HC.Comments,isShowTooltip:a,displayProperties:A,iconAtlas:"public/plugins/vaduga-mapgl-app/img/37a766e00c9900c1c40d.png",iconMapping:o,data:e,selectedFeatureIndexes:null!==(u=null==n?void 0:n.get(HC.Comments))&&void 0!==u?u:[],getPosition:t=>t.geometry.coordinates,getIcon:()=>"marker",getColor:t=>{const{iconColor:e}=t.properties;return bE(e)},getSize:t=>5,sizeUnits:"meters",sizeScale:.4,sizeMinPixels:5,sizeMaxPixels:45,pickable:!0,autoHighlight:!0})};function KE(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zE(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){KE(t,e,n[e])}))}return t}function JE(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}function qE({iconFeatures:t,lineFeatures:e,commentFeatures:n,layerProps:i,thresholds:r,getNodeMap:o,skipExtLine:s=!1}){let a,A,l,c,u,h;const{getSelFeature:g,isDefDir:d,getMode:p,isRenderNums:f,getVisLayers:m,getSelIds:I,getLineSwitchMap:y,isOffset:C,findEdge:E,findNode:_,stat2:v}=i;if(null==t?void 0:t.length){const n={type:"FeatureCollection",features:t};a=AE(JE(zE({},i),{featureCollection:n,getEditableLines:e}))}const B=PE(m,"edges");if(null==e?void 0:e.length){const t=(null==B?void 0:B.getVisible)&&!(null==B?void 0:B.getIndeterminate),n={type:"FeatureCollection",features:e},a=JE(zE({},i),{linesCollection:n,visible:t});if(A="modify"===p?dE(a):(t=>{const{linesCollection:e,getSelectedFeIndexes:n,thresholds:i,onHover:r,pickable:o,autoHighlight:s,highlightColor:a,time:A,legendItems:l,getVisLayers:c}=t,u=PE(c,"edges"),h=PE(c,"stat2"),g=(null==u?void 0:u.getVisible)&&!(null==u?void 0:u.getIndeterminate);var d;const p=null!==(d=null==n?void 0:n.get(HC.Edges))&&void 0!==d?d:[];return new yd({visible:g,highlightColor:a,onHover:r,id:HC.Edges+"fallback",data:e,selectedFeatureIndexes:p,getLineWidth:t=>{const{thrId:e,defaultColor:n}=t.properties;return DE(i,e,n).lineWidth},updateTriggers:{getLineColor:A,getTextColor:A,getFillColor:A},getLineColor:t=>{var e,n;if((null==h?void 0:h.getVisible)&&(null===(e=t.properties)||void 0===e?void 0:e.throughput)){let e;const{bandNumber:n,bandWidth:i,throughput:r}=t.properties;if(i||n){let t;i?t=r/i*100:n&&(t=r/n*100),e=RE(t)}else e=RE(101);return bE(e)}const{thrId:r,defaultColor:o,all_annots:s,locName:a}=t.properties,c=DE(i,r,o),{color:u}=c;if(s&&!(null==l||null===(n=l.at(-1))||void 0===n?void 0:n.disabled)){var g;const t=vE(s,A),e=null==t||null===(g=t[0])||void 0===g?void 0:g.newState,n=(null==e?void 0:e.startsWith("Normal"))?vf:"Alerting"===e?Ef:_f;return bE(n).slice(0,3)}return bE(u)},lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:.1,pickable:o,autoHighlight:s})})(a),(null==g?void 0:g.properties.colType)===HC.Points){const t=I.map((t=>e[t])).filter((t=>t)),n=y;if(t.length>0){const e=SE({features:t,lineSwitchMap:n,isOffset:C,findEdge:E,findNode:_,thresholds:r,getNodeMap:o})[1];l=e&&(null==e?void 0:e.length)>0?GE(JE(zE({},i),{index:0,data:e,type:"par-path-line"})):null;const a=d&&e&&function({features:t,lineSwitchMap:e,isOffset:n,findEdge:i,findNode:r,thresholds:o,getNodeMap:s}){let a,A=[];const l=[];return t.forEach(((t,c)=>{var u;if(t&&(null===(u=t.properties)||void 0===u?void 0:u.locName)){const{locName:c,parPath:u}=t.properties,h=null==u?void 0:u.at(-1);l.push(c);let g=e.get(h);if(!g)return;let d=g;for(;d;){const{locName:t}=d.properties;if(l.includes(t))break;l.push(t),a=SE({features:[d],lineSwitchMap:e,isOffset:n,findEdge:i,findNode:r,thresholds:o,getNodeMap:s})[1]||void 0,(null==a?void 0:a.length)>0&&A.push(a);const{parPath:c}=null==d?void 0:d.properties;d=c&&(null==e?void 0:e.get(c.at(-1)))}}})),A.reduce(((t,e)=>t.concat(e)),[])}({features:t,lineSwitchMap:n,isOffset:C,findEdge:E,findNode:_,thresholds:r,getNodeMap:o});c=!s&&a&&(null==a?void 0:a.length)?GE(JE(zE({},i),{index:0,data:a,type:"par-path-extension"})):null}const a=!(null==v?void 0:v.getVisible)||(null==v?void 0:v.getVisible)&&(null==v?void 0:v.getIndeterminate),A=f&&1===I.length&&a&&function(t){if(!Array.isArray(t)||0===t.length)return[];const e=[];return t.forEach((t=>{if(!(null==t?void 0:t.properties))return;const n=null==t?void 0:t.properties.numCoords,i=(null==n?void 0:n.length)?n.map(((t,e)=>({text:e+1+"",coordinates:t,color:yf}))):[];i&&e.push(i)})),e.reduce(((t,e)=>t.concat(e)),[])}(t);u=(null==A?void 0:A.length)>0?UE({data:A,type:"nums",dir:"to"}):null}}return n&&(null==n?void 0:n.length)>0&&(h=YE(JE(zE({},i),{data:n}))),[a,A,l,c,u,h]}var HE=g(2007);HE.VizLegend;var VE,WE=g(8531);function ZE(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}!function(t){t.Auto="auto",t.Light="light",t.Dark="dark"}(VE||(VE={}));const XE={theme:"auto",showLabels:!0},$E={id:"carto",name:"CARTO reference map",isBaseMap:!0,defaultOptions:XE,create:(t,e)=>({init:()=>{const n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){ZE(t,e,n[e])}))}return t}({},XE,t.config);let i=n.theme;return i&&"auto"!==i||(i=e.isDark?"dark":"light"),n.showLabels?i+="_all":i+="_nolabels",{version:8,sources:{carto:{type:"raster",tiles:[`https://basemaps.cartocdn.com/${i}/{z}/{x}/{y}.png`],tileSize:256,attribution:" CARTO"}},layers:[{id:"carto",type:"raster",source:"carto",minzoom:0,maxzoom:20}]}}}),registerOptionsUI:t=>{t.addRadio({path:"config.theme",name:"Theme",settings:{options:[{value:"auto",label:"Auto",description:"Match grafana theme"},{value:"light",label:"Light"},{value:"dark",label:"Dark"}]},defaultValue:XE.theme}).addBooleanSwitch({path:"config.showLabels",name:"Show labels",description:"",defaultValue:XE.showLabels})}},t_=[$E];var e_,n_,i_=g(7900);function r_(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o_(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){r_(t,e,n[e])}))}return t}function s_(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}const a_=Boolean((null===(n_=WE.config.panels)||void 0===n_||null===(e_=n_.debug)||void 0===e_?void 0:e_.state)===e.PluginState.alpha),A_=i_.c(10,{lum:50,sat:75,rgb:!0}).map((t=>t.replace("rgb(","").replace(")","").split(",").map((t=>Number(t))))),l_=[{name:"Aegypius monachus",name_en:"Cinereous vulture",name_fr:"Vautour moine",type:"raptor"},{name:"Aquila clanga",name_en:"Greater spotted eagle",name_fr:"Aigle criard",type:"raptor"}].map(((t,e)=>s_(o_({},t),{color:A_[e]})));l_.reduce(((t,e)=>s_(o_({},t),{[e.name]:o_({},e)})),{});function c_(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const u_="https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",h_={url:u_+"/tile/{z}/{y}/{x}",attribution:`Tiles  <a href="${u_}">ArcGIS</a>`},g_={id:"xyz",name:"XYZ Tile layer",isBaseMap:!0,create:(t,e)=>({init:()=>{const e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){c_(t,e,n[e])}))}return t}({},t.config);var n,i,r;e.url||(e.url=h_.url,e.attribution=null!==(n=e.attribution)&&void 0!==n?n:h_.attribution);e.attribution||(e.attribution=null!==(r=null!==(i=e.attribution)&&void 0!==i?i:h_.attribution)&&void 0!==r?r:"");return{version:8,sources:{xyz:{type:"raster",tiles:[e.url],tileSize:256,attribution:e.attribution}},layers:[{id:"xyz",type:"raster",source:"xyz",minzoom:0,maxzoom:20}]}}}),registerOptionsUI:t=>{t.addTextInput({path:"config.url",name:"URL template",description:"Must include {x}, {y} or {-y}, and {z} placeholders",settings:{placeholder:h_.url}}).addTextInput({path:"config.attribution",name:"Attribution",settings:{placeholder:h_.attribution}})}},d_=[g_];function p_(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f_(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){p_(t,e,n[e])}))}return t}function m_(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}const I_="custom",y_="streets",C_=new e.Registry((()=>[{id:y_,name:"World Street Map",slug:"World_Street_Map"},{id:"world-imagery",name:"World Imagery",slug:"World_Imagery"},{id:"world-physical",name:"World Physical",slug:"World_Physical_Map"},{id:"topo",name:"Topographic",slug:"World_Topo_Map"},{id:"usa-topo",name:"USA Topographic",slug:"USA_Topo_Maps"},{id:"ocean",name:"World Ocean",slug:"Ocean/World_Ocean_Base"},{id:I_,name:"Custom MapServer",description:"Use a custom MapServer with pre-cached values",slug:""}])),E_={id:"esri-xyz",name:"ArcGIS MapServer",isBaseMap:!0,create:(t,e)=>{const n=f_({},t.config);var i;const r=C_.getIfExists(null!==(i=n.server)&&void 0!==i?i:y_);if(r.id!==I_){const t="https://services.arcgisonline.com/ArcGIS/rest/services/";n.url=`${t}${r.slug}/MapServer/tile/{z}/{y}/{x}`,n.attribution=`Tiles  <a href="${t}${r.slug}/MapServer">ArcGIS</a>`}const o=m_(f_({},t),{config:n});return g_.create&&g_.create(o,e)},registerOptionsUI:t=>{t.addSelect({path:"config.server",name:"Server instance",settings:{options:C_.selectOptions().options}}).addTextInput({path:"config.url",name:"URL template",description:"Must include {x}, {y} or {-y}, and {z} placeholders",settings:{placeholder:h_.url},showIf:t=>{var e;return(null===(e=t.config)||void 0===e?void 0:e.server)===I_}}).addTextInput({path:"config.attribution",name:"Attribution",settings:{placeholder:h_.attribution},showIf:t=>{var e;return(null===(e=t.config)||void 0===e?void 0:e.server)===I_}})},defaultOptions:{server:y_}},__=[E_];var v_;!function(t){t.Auto="auto",t.Light="light",t.Dark="dark"}(v_||(v_={}));function B_(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const w_="https://wms.wheregroup.com/tileserver/style/osm-liberty.json",b_={url:w_,attribution:`Tiles  <a href="${w_}">wheregroup.com</a>`},Q_={id:"fromjson",name:"From .json",isBaseMap:!0,create:(t,e)=>({init:()=>{const e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){B_(t,e,n[e])}))}return t}({},t.config);var n;e.url||(e.url=b_.url,e.attribution=null!==(n=e.attribution)&&void 0!==n?n:b_.attribution);return e.url}}),registerOptionsUI:t=>{t.addTextInput({path:"config.url",name:"URL template",description:"Json file url",settings:{placeholder:b_.url}}).addTextInput({path:"config.attribution",name:"Attribution",settings:{placeholder:b_.attribution}})}},x_=[...[{id:"osm-standard",name:"Open Street Map",isBaseMap:!0,create:(t,e)=>({init:()=>({version:8,sources:{osm:{type:"raster",tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:" OpenStreetMap Contributors"}},layers:[{id:"osm",type:"raster",source:"osm",minzoom:0,maxzoom:20}]})})}],...t_,...__,...d_,...[Q_],...[{id:"yamaps",name:"Yandex maps v.3",isBaseMap:!0,defaultOptions:{theme:"auto",setHasLoaded:()=>!1},create:t=>({init:()=>({})}),registerOptionsUI:t=>{t.addRadio({path:"config.theme",name:"Theme",settings:{options:[{value:"auto",label:"Auto",description:"Match grafana theme"},{value:"light",label:"Light"},{value:"dark",label:"Dark"}]},defaultValue:XE.theme})}}]];function D_(t,e,n,i,r,o,s){try{var a=t[o](s),A=a.value}catch(t){return void n(t)}a.done?e(A):Promise.resolve(A).then(i,r)}function S_(t,e){if(Array.isArray(e)){const n=e[0];if(n.latitude&&n.longitude&&(n.key||n.keys))return function(t,e){let n=0;const i=new Map;for(const t of e){const e={coords:[t.longitude,t.latitude]};if(t.name&&(i.set(t.name,e),i.set(t.name.toUpperCase(),e),e.props={name:t.name}),t.key&&(i.set(t.key,e),i.set(t.key.toUpperCase(),e)),t.keys)for(const n of t.keys)i.set(n,e),i.set(n.toUpperCase(),e);n++}return{path:t,find:t=>{let e=i.get(t);return e||(e=i.get(t.toUpperCase())),e},count:n,examples:t=>{const e=[];if(i.size<1)e.push("no values found");else for(const n of i.keys())if(e.push(n),e.length>=t)break;return e}}}(t,e)}return{path:t,error:"Unable to parse locations",find:t=>{},examples:t=>[]}}const M_={},k_="public/gazetteer/cities.json";function R_(t){return N_.apply(this,arguments)}function N_(){var t;return t=function*(t){t||(t=k_);let e=M_[t];if(!e){try{e=S_(t,yield(0,WE.getBackendSrv)().get(t))}catch(n){console.warn("Error loading placename lookup",t,n),e={path:t,error:"Error loading URL",find:t=>{},examples:t=>[]}}M_[t]=e}return e},N_=function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function s(t){D_(o,i,r,s,a,"next",t)}function a(t){D_(o,i,r,s,a,"throw",t)}s(void 0)}))},N_.apply(this,arguments)}function P_(t){if(!(null==t?void 0:t.length))return;const e=[16,8,4,2,1];let n=!0;const i=[],r=[];let o;i[0]=-90,i[1]=90,r[0]=-180,r[1]=180,t.split("").forEach((t=>{o="0123456789bcdefghjkmnpqrstuvwxyz".indexOf(t),e.forEach((t=>{T_(n?r:i,o,t),n=!n}))}));const s=(i[0]+i[1])/2;return[(r[0]+r[1])/2,s]}function T_(t,e,n){e&n?t[0]=(t[0]+t[1])/2:t[1]=(t[0]+t[1])/2}function L_(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var F_;!function(t){t.Geojson="geojson",t.Auto="auto",t.Geohash="geohash",t.Coords="coords",t.Lookup="lookup"}(F_||(F_={}));const O_=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){L_(t,e,n[e])}))}return t}({},F_);function G_(t,e,n,i,r,o,s){try{var a=t[o](s),A=a.value}catch(t){return void n(t)}a.done?e(A):Promise.resolve(A).then(i,r)}function U_(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j_(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}function Y_(t){return e=>{for(const n of e.fields)if(t(n,e,[]))return n}}function K_(t){return n=>{for(const i of n.fields){if(t.has(i.name.toLowerCase()))return i;const r=(0,e.getFieldDisplayName)(i,n);if(t.has(r))return i}}}const z_={mode:O_.Auto,geojson:K_(new Set(["location","geojson"])),geohash:K_(new Set(["geohash"])),latitude:K_(new Set(["latitude","lat"])),longitude:K_(new Set(["longitude","lon","lng"])),h3:K_(new Set(["h3"])),wkt:K_(new Set(["wkt"])),lookup:K_(new Set(["lookup"]))};function J_(t){return q_.apply(this,arguments)}function q_(){var t;return t=function*(t){var n;const i=j_(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){U_(t,e,n[e])}))}return t}({},z_),{mode:null!==(n=null==t?void 0:t.mode)&&void 0!==n?n:O_.Auto});switch(i.mode){case O_.Geohash:(null==t?void 0:t.geohash)&&(i.geohash=Y_((0,e.getFieldMatcher)({id:e.FieldMatcherID.byName,options:t.geohash})));break;case O_.Lookup:(null==t?void 0:t.lookup)&&(i.lookup=Y_((0,e.getFieldMatcher)({id:e.FieldMatcherID.byName,options:t.lookup}))),i.gazetteer=yield R_(null==t?void 0:t.gazetteer);break;case O_.Coords:(null==t?void 0:t.latitude)&&(i.latitude=Y_((0,e.getFieldMatcher)({id:e.FieldMatcherID.byName,options:t.latitude}))),(null==t?void 0:t.longitude)&&(i.longitude=Y_((0,e.getFieldMatcher)({id:e.FieldMatcherID.byName,options:t.longitude})));break;case O_.Geojson:(null==t?void 0:t.geojson)&&(i.geojson=Y_((0,e.getFieldMatcher)({id:e.FieldMatcherID.byName,options:t.geojson})))}return i},q_=function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function s(t){G_(o,i,r,s,a,"next",t)}function a(t){G_(o,i,r,s,a,"throw",t)}s(void 0)}))},q_.apply(this,arguments)}function H_(t,e){const n={points:[]};if(!(null==t?void 0:t.length))return n;const i=function(t,e){var n;const i={mode:null!==(n=e.mode)&&void 0!==n?n:O_.Auto};if(i.mode===O_.Auto){if(i.geojson=e.geojson(t),i.geojson)return i.mode=O_.Geojson,i;if(i.latitude=e.latitude(t),i.longitude=e.longitude(t),i.latitude&&i.longitude)return i.mode=O_.Coords,i;if(i.geohash=e.geohash(t),i.geohash)return i.mode=O_.Geohash,i;if(i.lookup=e.geohash(t),i.lookup)return i.mode=O_.Lookup,i}switch(i.mode){case O_.Geojson:i.geojson=e.geojson(t);break;case O_.Coords:i.latitude=e.latitude(t),i.longitude=e.longitude(t);break;case O_.Geohash:i.geohash=e.geohash(t);break;case O_.Lookup:i.lookup=e.lookup(t)}return i}(t,e);switch(i.mode){case O_.Geojson:i.geojson?n.points=function(t){const e=t.values.length,n=new Array(e);for(let e=0;e<t.values.length;e++)if(t.values[e]){const i=JSON.parse(t.values[e]);i&&(n[e]={type:i.type,coordinates:i.coordinates})}return n}(i.geojson):n.warning="Missing GeoJson fields";break;case O_.Coords:i.latitude&&i.longitude?n.points=function(t,e){const n=e.values.length,i=new Array(n);for(let r=0;r<n;r++)i[r]={type:"Point",coordinates:[t.values[r],e.values[r]]};return i}(i.longitude,i.latitude):n.warning="Missing latitude/longitude fields";break;case O_.Geohash:i.geohash?n.points=function(t){const e=t.values.length,n=new Array(e);for(let i=0;i<e;i++){const e=P_(t.values[i]);e&&(n[i]={type:"Point",coordinates:e})}return n}(i.geohash):n.warning="Missing geohash field";break;case O_.Lookup:i.lookup?e.gazetteer?n.points=function(t,e){const n=e.values.length,i=new Array(n);for(let r=0;r<n;r++){const n=t.find(e.values[r]);(null==n?void 0:n.coords)&&(i[r]={type:"Point",coordinates:null==n?void 0:n.coords})}return i}(e.gazetteer,i.lookup):n.warning="Gazetteer not found":n.warning="Missing lookup field";break;case O_.Auto:n.warning="Unable to find location fields"}return n}var V_=g(3241),W_=g.n(V_);function Z_(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class X_ extends r.PureComponent{componentDidMount(){this.setState({text:isNaN(this.props.value)?"":`${this.props.value}`})}componentDidUpdate(t){if(this.props.value!==t.value){const t=isNaN(this.props.value)?"":`${this.props.value}`;t!==this.state.text&&this.setState({text:t})}}renderInput(){return o().createElement(HE.Input,{type:"number",ref:this.inputRef,min:this.props.min,max:this.props.max,step:this.props.step,autoFocus:this.props.autoFocus,value:this.state.text,onChange:this.onChange,onBlur:this.updateValue,onKeyPress:this.onKeyPress,placeholder:this.props.placeholder,disabled:this.props.fieldDisabled,width:this.props.width,suffix:this.props.suffix})}render(){const{inputCorrected:t}=this.state;if(t){let e="",{min:n,max:i}=this.props;return null==i?null!=n&&(e=`< ${n}`):e=null!=n?`${n} < > ${i}`:`> ${i}`,o().createElement(HE.Field,{invalid:t,error:`Out of range ${e}`,validationMessageHorizontalOverflow:!0,style:{direction:"rtl"}},this.renderInput())}return this.renderInput()}constructor(...t){super(...t),Z_(this,"state",{text:"",inputCorrected:!1}),Z_(this,"inputRef",o().createRef()),Z_(this,"updateValue",(()=>{var t;const e=null===(t=this.inputRef.current)||void 0===t?void 0:t.value;let n=!1,i="";const r=this.props.min,o=this.props.max;let s=""!==e?Number(e):void 0;s&&!Number.isNaN(s)&&(null!=r&&s<r?(i=r.toString(),n=!0):null!=o&&s>o?(i=o.toString(),n=!0):i=null!=e?e:"",this.setState({text:i,inputCorrected:n})),n&&this.updateValueDebounced(),Number.isNaN(s)||s===this.props.value||this.props.onChange(s)})),Z_(this,"updateValueDebounced",(0,V_.debounce)(this.updateValue,500)),Z_(this,"onChange",(t=>{this.setState({text:t.currentTarget.value}),this.updateValueDebounced()})),Z_(this,"onKeyPress",(t=>{"Enter"===t.key&&this.updateValue()}))}}const $_=({value:t,onChange:e,item:n})=>{const{settings:i}=n,s=(0,r.useCallback)((t=>{e((null==i?void 0:i.integer)&&void 0!==t?Math.floor(t):t)}),[e,null==i?void 0:i.integer]);return o().createElement(X_,{value:t,min:null==i?void 0:i.min,max:null==i?void 0:i.max,step:null==i?void 0:i.step,placeholder:null==i?void 0:i.placeholder,onChange:s})};var tv=g(6089),ev=g(9089);function nv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function iv(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nv(Object(n),!0).forEach((function(e){ze(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function rv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function ov(t,e){if(t){if("string"==typeof t)return rv(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rv(t,e):void 0}}function sv(t){return function(t){if(Array.isArray(t))return rv(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ov(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function av(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,s,a=[],A=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;A=!1}else for(;!(A=(i=o.call(n)).done)&&(a.push(i.value),a.length!==e);A=!0);}catch(t){l=!0,r=t}finally{try{if(!A&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw r}}return a}}(t,e)||ov(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Av=g(4452),lv=g.n(Av);function cv(t){var e=r.useRef();e.current=t;var n=r.useCallback((function(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return null===(t=e.current)||void 0===t?void 0:t.call.apply(t,[e].concat(i))}),[]);return n}function uv(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}var hv=uv()?r.useLayoutEffect:r.useEffect,gv=function(t,e){var n=r.useRef(!0);hv((function(){return t(n.current)}),e),hv((function(){return n.current=!1,function(){n.current=!0}}),[])},dv=function(t,e){gv((function(e){if(!e)return t()}),e)};const pv=gv;function fv(t){var e=r.useRef(!1),n=av(r.useState(t),2),i=n[0],o=n[1];return r.useEffect((function(){return e.current=!1,function(){e.current=!0}}),[]),[i,function(t,n){n&&e.current||o(t)}]}function mv(t){return void 0!==t}var Iv={},yv=[];function Cv(t,e){}function Ev(t,e){}function _v(t,e,n){e||Iv[n]||(t(!1,n),Iv[n]=!0)}function vv(t,e){_v(Cv,t,e)}vv.preMessage=function(t){yv.push(t)},vv.resetWarned=function(){Iv={}},vv.noteOnce=function(t,e){_v(Ev,t,e)};const Bv=vv;const wv=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=new Set;return function t(e,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=i.has(e);if(Bv(!s,"Warning: There may be circular references"),s)return!1;if(e===r)return!0;if(n&&o>1)return!1;i.add(e);var a=o+1;if(Array.isArray(e)){if(!Array.isArray(r)||e.length!==r.length)return!1;for(var A=0;A<e.length;A++)if(!t(e[A],r[A],a))return!1;return!0}if(e&&r&&"object"===Ye(e)&&"object"===Ye(r)){var l=Object.keys(e);return l.length===Object.keys(r).length&&l.every((function(n){return t(e[n],r[n],a)}))}return!1}(t,e)};var bv=g(8102),Qv=g(9257);function xv(t,e){if(null==t)return{};var n,i,r=(0,Qv.A)(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.includes(n)||{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Dv(t,e,n){return(t-e)/(n-e)}function Sv(t,e,n,i){var r=Dv(e,n,i),o={};switch(t){case"rtl":o.right="".concat(100*r,"%"),o.transform="translateX(50%)";break;case"btt":o.bottom="".concat(100*r,"%"),o.transform="translateY(50%)";break;case"ttb":o.top="".concat(100*r,"%"),o.transform="translateY(-50%)";break;default:o.left="".concat(100*r,"%"),o.transform="translateX(-50%)"}return o}function Mv(t,e){return Array.isArray(t)?t[e]:t}var kv={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(t){var e=t.keyCode;if(t.altKey&&!t.ctrlKey||t.metaKey||e>=kv.F1&&e<=kv.F12)return!1;switch(e){case kv.ALT:case kv.CAPS_LOCK:case kv.CONTEXT_MENU:case kv.CTRL:case kv.DOWN:case kv.END:case kv.ESC:case kv.HOME:case kv.INSERT:case kv.LEFT:case kv.MAC_FF_META:case kv.META:case kv.NUMLOCK:case kv.NUM_CENTER:case kv.PAGE_DOWN:case kv.PAGE_UP:case kv.PAUSE:case kv.PRINT_SCREEN:case kv.RIGHT:case kv.SHIFT:case kv.UP:case kv.WIN_KEY:case kv.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(t){if(t>=kv.ZERO&&t<=kv.NINE)return!0;if(t>=kv.NUM_ZERO&&t<=kv.NUM_MULTIPLY)return!0;if(t>=kv.A&&t<=kv.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===t)return!0;switch(t){case kv.SPACE:case kv.QUESTION_MARK:case kv.NUM_PLUS:case kv.NUM_MINUS:case kv.NUM_PERIOD:case kv.NUM_DIVISION:case kv.SEMICOLON:case kv.DASH:case kv.EQUALS:case kv.COMMA:case kv.PERIOD:case kv.SLASH:case kv.APOSTROPHE:case kv.SINGLE_QUOTE:case kv.OPEN_SQUARE_BRACKET:case kv.BACKSLASH:case kv.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};const Rv=kv;const Nv=r.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0,styles:{},classNames:{}});var Pv=["prefixCls","value","valueIndex","onStartMove","style","render","dragging","onOffsetChange","onChangeComplete","onFocus","onMouseEnter"],Tv=r.forwardRef((function(t,e){var n,i=t.prefixCls,o=t.value,s=t.valueIndex,a=t.onStartMove,A=t.style,l=t.render,c=t.dragging,u=t.onOffsetChange,h=t.onChangeComplete,g=t.onFocus,d=t.onMouseEnter,p=xv(t,Pv),f=r.useContext(Nv),m=f.min,I=f.max,y=f.direction,C=f.disabled,E=f.keyboard,_=f.range,v=f.tabIndex,B=f.ariaLabelForHandle,w=f.ariaLabelledByForHandle,b=f.ariaValueTextFormatterForHandle,Q=f.styles,x=f.classNames,D="".concat(i,"-handle"),S=function(t){C||a(t,s)},M=Sv(y,o,m,I),k={};null!==s&&(k={tabIndex:C?null:Mv(v,s),role:"slider","aria-valuemin":m,"aria-valuemax":I,"aria-valuenow":o,"aria-disabled":C,"aria-label":Mv(B,s),"aria-labelledby":Mv(w,s),"aria-valuetext":null===(n=Mv(b,s))||void 0===n?void 0:n(o),"aria-orientation":"ltr"===y||"rtl"===y?"horizontal":"vertical",onMouseDown:S,onTouchStart:S,onFocus:function(t){null==g||g(t,s)},onMouseEnter:function(t){d(t,s)},onKeyDown:function(t){if(!C&&E){var e=null;switch(t.which||t.keyCode){case Rv.LEFT:e="ltr"===y||"btt"===y?-1:1;break;case Rv.RIGHT:e="ltr"===y||"btt"===y?1:-1;break;case Rv.UP:e="ttb"!==y?1:-1;break;case Rv.DOWN:e="ttb"!==y?-1:1;break;case Rv.HOME:e="min";break;case Rv.END:e="max";break;case Rv.PAGE_UP:e=2;break;case Rv.PAGE_DOWN:e=-2}null!==e&&(t.preventDefault(),u(e,s))}},onKeyUp:function(t){switch(t.which||t.keyCode){case Rv.LEFT:case Rv.RIGHT:case Rv.UP:case Rv.DOWN:case Rv.HOME:case Rv.END:case Rv.PAGE_UP:case Rv.PAGE_DOWN:null==h||h()}}});var R=r.createElement("div",(0,bv.A)({ref:e,className:lv()(D,ze(ze({},"".concat(D,"-").concat(s+1),null!==s&&_),"".concat(D,"-dragging"),c),x.handle),style:iv(iv(iv({},M),A),Q.handle)},k,p));return l&&(R=l(R,{index:s,prefixCls:i,value:o,dragging:c})),R}));const Lv=Tv;var Fv=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","activeHandleRender","draggingIndex","onFocus"],Ov=r.forwardRef((function(t,e){var n=t.prefixCls,i=t.style,o=t.onStartMove,s=t.onOffsetChange,a=t.values,A=t.handleRender,l=t.activeHandleRender,c=t.draggingIndex,u=t.onFocus,h=xv(t,Fv),g=r.useRef({});r.useImperativeHandle(e,(function(){return{focus:function(t){var e;null===(e=g.current[t])||void 0===e||e.focus()}}}));var d=av(r.useState(-1),2),p=d[0],f=d[1],m=iv({prefixCls:n,onStartMove:o,onOffsetChange:s,render:A,onFocus:function(t,e){f(e),null==u||u(t)},onMouseEnter:function(t,e){f(e)}},h);return r.createElement(r.Fragment,null,a.map((function(t,e){return r.createElement(Lv,(0,bv.A)({ref:function(t){t?g.current[e]=t:delete g.current[e]},dragging:c===e,style:Mv(i,e),key:e,value:t,valueIndex:e},m))})),l&&r.createElement(Lv,(0,bv.A)({key:"a11y"},m,{value:a[p],valueIndex:null,dragging:-1!==c,render:l,style:{pointerEvents:"none"},tabIndex:null,"aria-hidden":!0})))}));const Gv=Ov;const Uv=function(t){var e=t.prefixCls,n=t.style,i=t.children,o=t.value,s=t.onClick,a=r.useContext(Nv),A=a.min,l=a.max,c=a.direction,u=a.includedStart,h=a.includedEnd,g=a.included,d="".concat(e,"-text"),p=Sv(c,o,A,l);return r.createElement("span",{className:lv()(d,ze({},"".concat(d,"-active"),g&&u<=o&&o<=h)),style:iv(iv({},p),n),onMouseDown:function(t){t.stopPropagation()},onClick:function(){s(o)}},i)};const jv=function(t){var e=t.prefixCls,n=t.marks,i=t.onClick,o="".concat(e,"-mark");return n.length?r.createElement("div",{className:o},n.map((function(t){var e=t.value,n=t.style,s=t.label;return r.createElement(Uv,{key:e,prefixCls:o,style:n,value:e,onClick:i},s)}))):null};const Yv=function(t){var e=t.prefixCls,n=t.value,i=t.style,o=t.activeStyle,s=r.useContext(Nv),a=s.min,A=s.max,l=s.direction,c=s.included,u=s.includedStart,h=s.includedEnd,g="".concat(e,"-dot"),d=c&&u<=n&&n<=h,p=iv(iv({},Sv(l,n,a,A)),"function"==typeof i?i(n):i);return d&&(p=iv(iv({},p),"function"==typeof o?o(n):o)),r.createElement("span",{className:lv()(g,ze({},"".concat(g,"-active"),d)),style:p})};const Kv=function(t){var e=t.prefixCls,n=t.marks,i=t.dots,o=t.style,s=t.activeStyle,a=r.useContext(Nv),A=a.min,l=a.max,c=a.step,u=r.useMemo((function(){var t=new Set;if(n.forEach((function(e){t.add(e.value)})),i&&null!==c)for(var e=A;e<=l;)t.add(e),e+=c;return Array.from(t)}),[A,l,c,i,n]);return r.createElement("div",{className:"".concat(e,"-step")},u.map((function(t){return r.createElement(Yv,{prefixCls:e,key:t,value:t,style:o,activeStyle:s})})))};const zv=function(t){var e=t.prefixCls,n=t.style,i=t.start,o=t.end,s=t.index,a=t.onStartMove,A=t.replaceCls,l=r.useContext(Nv),c=l.direction,u=l.min,h=l.max,g=l.disabled,d=l.range,p=l.classNames,f="".concat(e,"-track"),m=Dv(i,u,h),I=Dv(o,u,h),y=function(t){!g&&a&&a(t,-1)},C={};switch(c){case"rtl":C.right="".concat(100*m,"%"),C.width="".concat(100*I-100*m,"%");break;case"btt":C.bottom="".concat(100*m,"%"),C.height="".concat(100*I-100*m,"%");break;case"ttb":C.top="".concat(100*m,"%"),C.height="".concat(100*I-100*m,"%");break;default:C.left="".concat(100*m,"%"),C.width="".concat(100*I-100*m,"%")}var E=A||lv()(f,ze(ze({},"".concat(f,"-").concat(s+1),null!==s&&d),"".concat(e,"-track-draggable"),a),p.track);return r.createElement("div",{className:E,style:iv(iv({},C),n),onMouseDown:y,onTouchStart:y})};const Jv=function(t){var e=t.prefixCls,n=t.style,i=t.values,o=t.startPoint,s=t.onStartMove,a=r.useContext(Nv),A=a.included,l=a.range,c=a.min,u=a.styles,h=a.classNames,g=r.useMemo((function(){if(!l){if(0===i.length)return[];var t=null!=o?o:c,e=i[0];return[{start:Math.min(t,e),end:Math.max(t,e)}]}for(var n=[],r=0;r<i.length-1;r+=1)n.push({start:i[r],end:i[r+1]});return n}),[i,l,o,c]);if(!A)return null;var d=h.tracks||u.tracks?r.createElement(zv,{index:null,prefixCls:e,start:g[0].start,end:g[g.length-1].end,replaceCls:lv()(h.tracks,"".concat(e,"-tracks")),style:u.tracks}):null;return r.createElement(r.Fragment,null,d,g.map((function(t,i){var o=t.start,a=t.end;return r.createElement(zv,{index:i,prefixCls:e,style:iv(iv({},Mv(n,i)),u.track),start:o,end:a,key:i,onStartMove:s})})))};var qv=g(4271);var Hv=function(t,e){"function"==typeof t?t(e):"object"===Ye(t)&&t&&"current"in t&&(t.current=e)},Vv=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e.filter(Boolean);return i.length<=1?i[0]:function(t){e.forEach((function(e){Hv(e,t)}))}},Wv=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t,e,n){var i=r.useRef({});return"value"in i.current&&!n(i.current.condition,e)||(i.current.value=t(),i.current.condition=e),i.current.value}((function(){return Vv.apply(void 0,e)}),e,(function(t,e){return t.length!==e.length||t.every((function(t,n){return t!==e[n]}))}))},Zv=function(t){var e,n,i=(0,qv.isMemo)(t)?t.type.type:t.type;return!!("function"!=typeof i||null!==(e=i.prototype)&&void 0!==e&&e.render||i.$$typeof===qv.ForwardRef)&&!!("function"!=typeof t||null!==(n=t.prototype)&&void 0!==n&&n.render||t.$$typeof===qv.ForwardRef)};function Xv(t){return(0,r.isValidElement)(t)&&!(0,qv.isFragment)(t)}Number(r.version.split(".")[0]);"undefined"==typeof Reflect?Object.keys:Reflect.ownKeys;function $v(t){var e="touches"in t?t.touches[0]:t;return{pageX:e.pageX,pageY:e.pageY}}const tB=function(t,e,n,i,o,s,a,A,l){var c=av(r.useState(null),2),u=c[0],h=c[1],g=av(r.useState(-1),2),d=g[0],p=g[1],f=av(r.useState(n),2),m=f[0],I=f[1],y=av(r.useState(n),2),C=y[0],E=y[1],_=r.useRef(null),v=r.useRef(null);r.useLayoutEffect((function(){-1===d&&I(n)}),[n,d]),r.useEffect((function(){return function(){document.removeEventListener("mousemove",_.current),document.removeEventListener("mouseup",v.current),document.removeEventListener("touchmove",_.current),document.removeEventListener("touchend",v.current)}}),[]);var B=function(t,e){m.some((function(e,n){return e!==t[n]}))&&(void 0!==e&&h(e),I(t),a(t))},w=cv((function(t,e){if(-1===t){var n=C[0],r=C[C.length-1],a=i-n,A=o-r,c=e*(o-i);c=Math.max(c,a),c=Math.min(c,A);var u=s(n+c);c=u-n;var h=C.map((function(t){return t+c}));B(h)}else{var g=(o-i)*e,d=sv(m);d[t]=C[t];var p=l(d,g,t,"dist");B(p.values,p.value)}})),b=r.useMemo((function(){var t=sv(n).sort((function(t,e){return t-e})),e=sv(m).sort((function(t,e){return t-e}));return t.every((function(t,n){return t===e[n]}))?m:n}),[n,m]);return[d,u,b,function(i,r,o){i.stopPropagation();var s=o||n,a=s[r];p(r),h(a),E(s);var l=$v(i),c=l.pageX,u=l.pageY,g=function(n){n.preventDefault();var i,o=$v(n),s=o.pageX,a=o.pageY,A=s-c,l=a-u,h=t.current.getBoundingClientRect(),g=h.width,d=h.height;switch(e){case"btt":i=-l/d;break;case"ttb":i=l/d;break;case"rtl":i=-A/g;break;default:i=A/g}w(r,i)},d=function t(e){e.preventDefault(),document.removeEventListener("mouseup",t),document.removeEventListener("mousemove",g),document.removeEventListener("touchend",t),document.removeEventListener("touchmove",g),_.current=null,v.current=null,p(-1),A()};document.addEventListener("mouseup",d),document.addEventListener("mousemove",g),document.addEventListener("touchend",d),document.addEventListener("touchmove",g),_.current=g,v.current=d}]};var eB=r.forwardRef((function(t,e){var n=t.prefixCls,i=void 0===n?"rc-slider":n,o=t.className,s=t.style,a=t.classNames,A=t.styles,l=t.disabled,c=void 0!==l&&l,u=t.keyboard,h=void 0===u||u,g=t.autoFocus,d=t.onFocus,p=t.onBlur,f=t.min,m=void 0===f?0:f,I=t.max,y=void 0===I?100:I,C=t.step,E=void 0===C?1:C,_=t.value,v=t.defaultValue,B=t.range,w=t.count,b=t.onChange,Q=t.onBeforeChange,x=t.onAfterChange,D=t.onChangeComplete,S=t.allowCross,M=void 0===S||S,k=t.pushable,R=void 0!==k&&k,N=t.draggableTrack,P=t.reverse,T=t.vertical,L=t.included,F=void 0===L||L,O=t.startPoint,G=t.trackStyle,U=t.handleStyle,j=t.railStyle,Y=t.dotStyle,K=t.activeDotStyle,z=t.marks,J=t.dots,q=t.handleRender,H=t.activeHandleRender,V=t.tabIndex,W=void 0===V?0:V,Z=t.ariaLabelForHandle,X=t.ariaLabelledByForHandle,$=t.ariaValueTextFormatterForHandle,tt=r.useRef(null),et=r.useRef(null),nt=r.useMemo((function(){return T?P?"ttb":"btt":P?"rtl":"ltr"}),[P,T]),it=r.useMemo((function(){return isFinite(m)?m:0}),[m]),rt=r.useMemo((function(){return isFinite(y)?y:100}),[y]),ot=r.useMemo((function(){return null!==E&&E<=0?1:E}),[E]),st=r.useMemo((function(){return"boolean"==typeof R?!!R&&ot:R>=0&&R}),[R,ot]),at=r.useMemo((function(){return Object.keys(z||{}).map((function(t){var e=z[t],n={value:Number(t)};return e&&"object"===Ye(e)&&!r.isValidElement(e)&&("label"in e||"style"in e)?(n.style=e.style,n.label=e.label):n.label=e,n})).filter((function(t){var e=t.label;return e||"number"==typeof e})).sort((function(t,e){return t.value-e.value}))}),[z]),At=function(t,e,n,i,o,s){var a=r.useCallback((function(n){return Math.max(t,Math.min(e,n))}),[t,e]),A=r.useCallback((function(i){if(null!==n){var r=t+Math.round((a(i)-t)/n)*n,o=function(t){return(String(t).split(".")[1]||"").length},s=Math.max(o(n),o(e),o(t)),A=Number(r.toFixed(s));return t<=A&&A<=e?A:null}return null}),[n,t,e,a]),l=r.useCallback((function(r){var o=a(r),s=i.map((function(t){return t.value}));null!==n&&s.push(A(r)),s.push(t,e);var l=s[0],c=e-t;return s.forEach((function(t){var e=Math.abs(o-t);e<=c&&(l=t,c=e)})),l}),[t,e,i,n,a,A]),c=function r(o,s,a){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit";if("number"==typeof s){var c,u=o[a],h=u+s,g=[];i.forEach((function(t){g.push(t.value)})),g.push(t,e),g.push(A(u));var d=s>0?1:-1;"unit"===l?g.push(A(u+d*n)):g.push(A(h)),g=g.filter((function(t){return null!==t})).filter((function(t){return s<0?t<=u:t>=u})),"unit"===l&&(g=g.filter((function(t){return t!==u})));var p="unit"===l?u:h;c=g[0];var f=Math.abs(c-p);if(g.forEach((function(t){var e=Math.abs(t-p);e<f&&(c=t,f=e)})),void 0===c)return s<0?t:e;if("dist"===l)return c;if(Math.abs(s)>1){var m=sv(o);return m[a]=c,r(m,s-d,a,l)}return c}return"min"===s?t:"max"===s?e:void 0},u=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit",r=t[n],o=c(t,e,n,i);return{value:o,changed:o!==r}},h=function(t){return null===s&&0===t||"number"==typeof s&&t<s};return[l,function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit",r=t.map(l),a=r[n],A=c(r,e,n,i);if(r[n]=A,!1===o){var g=s||0;n>0&&r[n-1]!==a&&(r[n]=Math.max(r[n],r[n-1]+g)),n<r.length-1&&r[n+1]!==a&&(r[n]=Math.min(r[n],r[n+1]-g))}else if("number"==typeof s||null===s){for(var d=n+1;d<r.length;d+=1)for(var p=!0;h(r[d]-r[d-1])&&p;){var f=u(r,1,d);r[d]=f.value,p=f.changed}for(var m=n;m>0;m-=1)for(var I=!0;h(r[m]-r[m-1])&&I;){var y=u(r,-1,m-1);r[m-1]=y.value,I=y.changed}for(var C=r.length-1;C>0;C-=1)for(var E=!0;h(r[C]-r[C-1])&&E;){var _=u(r,-1,C-1);r[C-1]=_.value,E=_.changed}for(var v=0;v<r.length-1;v+=1)for(var B=!0;h(r[v+1]-r[v])&&B;){var w=u(r,1,v+1);r[v+1]=w.value,B=w.changed}}return{value:r[n],values:r}}]}(it,rt,ot,at,M,st),lt=av(At,2),ct=lt[0],ut=lt[1],ht=function(t,e){var n=e||{},i=n.defaultValue,r=n.value,o=n.onChange,s=n.postState,a=av(fv((function(){return mv(r)?r:mv(i)?"function"==typeof i?i():i:"function"==typeof t?t():t})),2),A=a[0],l=a[1],c=void 0!==r?r:A,u=s?s(c):c,h=cv(o),g=av(fv([c]),2),d=g[0],p=g[1];return dv((function(){var t=d[0];A!==t&&h(A,t)}),[d]),dv((function(){mv(r)||l(r)}),[r]),[u,cv((function(t,e){l(t,e),p([c],e)}))]}(v,{value:_}),gt=av(ht,2),dt=gt[0],pt=gt[1],ft=r.useMemo((function(){var t=null==dt?[]:Array.isArray(dt)?dt:[dt],e=av(t,1)[0],n=null===dt?[]:[void 0===e?it:e];if(B){if(n=sv(t),w||void 0===dt){var i=w>=0?w+1:2;for(n=n.slice(0,i);n.length<i;){var r;n.push(null!==(r=n[n.length-1])&&void 0!==r?r:it)}}n.sort((function(t,e){return t-e}))}return n.forEach((function(t,e){n[e]=ct(t)})),n}),[dt,B,it,w,ct]),mt=r.useRef(ft);mt.current=ft;var It=function(t){return B?t:t[0]},yt=function(t){var e=sv(t).sort((function(t,e){return t-e}));b&&!wv(e,mt.current,!0)&&b(It(e)),pt(e)},Ct=function(){var t=It(mt.current);null==x||x(t),Bv(!x,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),null==D||D(t)},Et=av(tB(et,nt,ft,it,rt,ct,yt,Ct,ut),4),_t=Et[0],vt=Et[1],Bt=Et[2],wt=Et[3],bt=function(t,e){if(!c){var n=0,i=rt-it;ft.forEach((function(e,r){var o=Math.abs(t-e);o<=i&&(i=o,n=r)}));var r,o,s=sv(ft);if(s[n]=t,B&&!ft.length&&void 0===w&&s.push(t),null==Q||Q(It(s)),yt(s),e)null===(r=document.activeElement)||void 0===r||null===(o=r.blur)||void 0===o||o.call(r),tt.current.focus(n),wt(e,n,s)}},Qt=av(r.useState(null),2),xt=Qt[0],Dt=Qt[1];r.useEffect((function(){if(null!==xt){var t=ft.indexOf(xt);t>=0&&tt.current.focus(t)}Dt(null)}),[xt]);var St=r.useMemo((function(){return(!N||null!==ot)&&N}),[N,ot]),Mt=function(t,e){wt(t,e),null==Q||Q(It(mt.current))},kt=-1!==_t;r.useEffect((function(){if(!kt){var t=ft.lastIndexOf(vt);tt.current.focus(t)}}),[kt]);var Rt=r.useMemo((function(){return sv(Bt).sort((function(t,e){return t-e}))}),[Bt]),Nt=av(r.useMemo((function(){return B?[Rt[0],Rt[Rt.length-1]]:[it,Rt[0]]}),[Rt,B,it]),2),Pt=Nt[0],Tt=Nt[1];r.useImperativeHandle(e,(function(){return{focus:function(){tt.current.focus(0)},blur:function(){var t,e=document.activeElement;null!==(t=et.current)&&void 0!==t&&t.contains(e)&&(null==e||e.blur())}}})),r.useEffect((function(){g&&tt.current.focus(0)}),[]);var Lt=r.useMemo((function(){return{min:it,max:rt,direction:nt,disabled:c,keyboard:h,step:ot,included:F,includedStart:Pt,includedEnd:Tt,range:B,tabIndex:W,ariaLabelForHandle:Z,ariaLabelledByForHandle:X,ariaValueTextFormatterForHandle:$,styles:A||{},classNames:a||{}}}),[it,rt,nt,c,h,ot,F,Pt,Tt,B,W,Z,X,$,A,a]);return r.createElement(Nv.Provider,{value:Lt},r.createElement("div",{ref:et,className:lv()(i,o,ze(ze(ze(ze({},"".concat(i,"-disabled"),c),"".concat(i,"-vertical"),T),"".concat(i,"-horizontal"),!T),"".concat(i,"-with-marks"),at.length)),style:s,onMouseDown:function(t){t.preventDefault();var e,n=et.current.getBoundingClientRect(),i=n.width,r=n.height,o=n.left,s=n.top,a=n.bottom,A=n.right,l=t.clientX,c=t.clientY;switch(nt){case"btt":e=(a-c)/r;break;case"ttb":e=(c-s)/r;break;case"rtl":e=(A-l)/i;break;default:e=(l-o)/i}bt(ct(it+e*(rt-it)),t)}},r.createElement("div",{className:lv()("".concat(i,"-rail"),null==a?void 0:a.rail),style:iv(iv({},j),null==A?void 0:A.rail)}),r.createElement(Jv,{prefixCls:i,style:G,values:Rt,startPoint:O,onStartMove:St?Mt:void 0}),r.createElement(Kv,{prefixCls:i,marks:at,dots:J,style:Y,activeStyle:K}),r.createElement(Gv,{ref:tt,prefixCls:i,style:U,values:Bt,draggingIndex:_t,onStartMove:Mt,onOffsetChange:function(t,e){if(!c){var n=ut(ft,t,e);null==Q||Q(It(ft)),yt(n.values),Dt(n.value)}},onFocus:d,onBlur:p,handleRender:q,activeHandleRender:H,onChangeComplete:Ct}),r.createElement(jv,{prefixCls:i,marks:at,onClick:bt})))}));const nB=eB,iB=({value:t,onChange:e,item:n})=>{const i=(0,r.useRef)(null),{settings:s}=n,a=(null==s?void 0:s.min)||0,A=(null==s?void 0:s.max)||100,l=null==s?void 0:s.step,c=(null==s?void 0:s.marks)||{[a]:a,[A]:A},u=null==s?void 0:s.included,h=null==s?void 0:s.ariaLabelForHandle,g=!0,d=(0,HE.useTheme2)(),[p,f]=(0,r.useState)(null!=t?t:a),[m,I]=(0,r.useState)(75);(0,r.useEffect)((()=>{null!=t&&t!==p&&f(t)}),[t,p]),(0,r.useEffect)((()=>{const t=getComputedStyle(i.current),e=t.getPropertyValue("font-weight")||"normal",n=t.getPropertyValue("font-size")||"16px",r=t.getPropertyValue("font-family")||"Arial",o=Math.max((A+(l||0)).toString().length,(A-(l||0)).toString().length)+4,s=function(t,e){const n=document.createElement("canvas"),i=n.getContext("2d");if(i){i.font=e;return i.measureText(t).width}return null}("0".repeat(o),`${e} ${n} ${r}`);s&&I(s+16)}),[A,l]);const y=(0,r.useCallback)((t=>{const n="number"==typeof t?t:t[0];f(n),e&&e(n)}),[f,e]),C=(0,r.useCallback)((t=>{let n=t;!Number.isNaN(n)&&n||(n=0),f(n),e&&e(n)}),[e]),E=((t,e,n=!1)=>{const{spacing:i}=t,r=t.colors.border.strong,o=t.colors.primary.main,s=t.colors.primary.main,a=`box-shadow: 0px 0px 0px 6px ${t.colors.primary.transparent}`;return{container:(0,tv.css)({width:"100%",margin:e?"inherit":i(1,3,1,1),paddingBottom:e&&n?t.spacing(1):"inherit",height:e?"auto":"100%"}),slider:tv.css`
      .rc-slider {
        display: flex;
        flex-grow: 1;
        margin-left: 7px; // half the size of the handle to align handle to the left on 0 value
      }
      .rc-slider-mark {
        top: ${t.spacing(1.75)};
      }
      .rc-slider-mark-text {
        color: ${t.colors.text.disabled};
        font-size: ${t.typography.bodySmall.fontSize};
      }
      .rc-slider-mark-text-active {
        color: ${t.colors.text.primary};
      }
      .rc-slider-handle {
        border: none;
        background-color: ${s};
        box-shadow: ${t.shadows.z1};
        cursor: pointer;
        opacity: 1;
      }

      .rc-slider-handle:hover,
      .rc-slider-handle:active,
      .rc-slider-handle-click-focused:focus {
        ${a};
      }

      // The triple class names is needed because that's the specificity used in the source css :(
      .rc-slider-handle-dragging.rc-slider-handle-dragging.rc-slider-handle-dragging,
      .rc-slider-handle:focus-visible {
        box-shadow: 0 0 0 5px ${t.colors.text.primary};
      }

      .rc-slider-dot,
      .rc-slider-dot-active {
        background-color: ${t.colors.text.primary};
        border-color: ${t.colors.text.primary};
      }

      .rc-slider-track {
        background-color: ${o};
      }
      .rc-slider-rail {
        background-color: ${r};
        cursor: pointer;
      }
    `,tooltip:ev.css`
      body {
        .rc-slider-tooltip {
          cursor: grab;
          user-select: none;
          z-index: ${t.zIndex.tooltip};
        }

        .rc-slider-tooltip-inner {
          color: ${t.colors.text.primary};
          background-color: transparent !important;
          border-radius: 0;
          box-shadow: none;
        }

        .rc-slider-tooltip-placement-top .rc-slider-tooltip-arrow {
          display: none;
        }

        .rc-slider-tooltip-placement-top {
          padding: 0;
        }
      }
    `,sliderInput:(0,tv.css)({display:"flex",flexDirection:"row",alignItems:"center",width:"100%"}),sliderInputVertical:(0,tv.css)({flexDirection:"column",height:"100%",".rc-slider":{margin:0,order:2}}),sliderInputField:(0,tv.css)({marginLeft:t.spacing(3),width:"60px",input:{textAlign:"center"}}),sliderInputFieldVertical:(0,tv.css)({margin:`0 0 ${t.spacing(3)} 0`,order:1})}})(d,g,Boolean(c)),_=rB(d,m),v=[];return o().createElement("div",{className:(0,tv.cx)(E.container,E.slider)},o().createElement(ev.Global,{styles:E.slider}),o().createElement("div",{className:(0,tv.cx)(E.sliderInput,...v)},o().createElement(nB,{min:a,max:A,step:l,defaultValue:t,value:p,onChange:y,vertical:!1,reverse:!1,ariaLabelForHandle:h,marks:c,included:u}),o().createElement("span",{className:_.numberInputWrapper,ref:i},o().createElement(X_,{value:p,onChange:C,max:A,min:a,step:l}))))};const rB=(t,e)=>({numberInputWrapper:(0,tv.css)({marginLeft:t.spacing(3),maxHeight:"32px",maxWidth:e,minWidth:e,overflow:"visible",width:"100%"})});function oB(t){return(0,HE.getFieldTypeIconName)(null==t?void 0:t.type)}var sB;function aB(t,n){return(0,r.useMemo)((()=>function(t,n){const i={display:new Set,raw:new Set,fields:new Map};for(const r of t)for(const o of r.fields){if(n&&!n(o))continue;const s=(0,e.getFieldDisplayName)(o,r,t);i.display.add(s),i.fields.set(s,o),o.name&&s!==o.name&&(i.raw.add(o.name),i.fields.set(o.name,o))}return i}(t,n)),[t,n])}function AB(t,e,n,i,o){return(0,r.useMemo)((()=>{let r=!1;const s=[];if(n&&s.push(n),"only"===o)for(const n of t.raw)r||n!==e||(r=!0),s.push({value:n,label:`${n} (base field name)`});else{for(const n of t.display){r||n!==e||(r=!0);const o=t.fields.get(n);i&&i!==(null==o?void 0:o.type)||s.push({value:n,label:n,icon:o?oB(o):void 0})}if("exclude"!==o)for(const n of t.raw)t.display.has(n)||(r||n!==e||(r=!0),s.push({value:n,label:`${n} (base field name)`}))}return e&&!r&&s.push({value:e,label:`${e} (not found)`}),s}),[t,e,n,i,o])}function lB(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cB(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){lB(t,e,n[e])}))}return t}function uB(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}!function(t){t.IncludeAll="all",t.ExcludeBaseNames="exclude",t.OnlyBaseNames="only"}(sB||(sB={}));const hB={label:"Fixed color",value:"_____fixed_____"},gB=t=>{var e,n,i,s;const{value:a,context:A,onChange:l,item:c}=t,u="dark-green",h=(0,HE.useStyles2)(dB),g=null==a?void 0:a.field,d=a&&Boolean(!g)&&(null==a?void 0:a.fixed),p=AB(aB(A.data),g,hB,null===(e=c.settings)||void 0===e?void 0:e.filteredFieldType,null===(n=c.settings)||void 0===n?void 0:n.baseNameMode),f=(0,r.useCallback)((t=>{if(!t)return void l(void 0);const e=t.value;if(e&&e!==hB.value)l(uB(cB({},a),{field:e}));else{var n;const t=null!==(n=null==a?void 0:a.fixed)&&void 0!==n?n:u;l(uB(cB({},a),{field:void 0,fixed:t}))}}),[l,a]),m=(0,r.useCallback)((t=>{l({field:void 0,fixed:null!=t?t:u})}),[l]),I=d?hB:p.find((t=>t.value===g));return o().createElement(o().Fragment,null,o().createElement("div",{className:h.container},o().createElement(HE.Select,{value:I,options:p,allowCustomValue:!0,onChange:f,noOptionsMessage:"No fields found",isClearable:null===(i=c.settings)||void 0===i?void 0:i.isClearable,placeholder:null===(s=c.settings)||void 0===s?void 0:s.placeholder}),d&&o().createElement("div",{className:h.picker},o().createElement(HE.ColorPicker,{color:null==a?void 0:a.fixed,onChange:m,enableNamedColors:!0}))))},dB=t=>({container:tv.css`
    display: flex;
    flex-wrap: nowrap;
    justify-content: flex-end;
    align-items: center;
  `,picker:tv.css`
    padding-left: 8px;
  `});var pB=(t=>(t.Linear="linear",t.Quad="quad",t))(pB||{}),fB=(t=>(t.Clamped="clamped",t.Mod="mod",t))(fB||{}),mB=(t=>(t.Field="field",t.Fixed="fixed",t.Template="template",t))(mB||{}),IB=(t=>(t.Field="field",t.Fixed="fixed",t.Mapping="mapping",t))(IB||{});const yB=Object.freeze({fixed:"",mode:mB.Field,field:""});var CB,EB,_B,vB;function BB(t,n){const i=function(t,n,i){if(!n||!(null==t?void 0:t.length))return;for(let r=0;r<n.fields.length;r++){const o=n.fields[r];if(t===o.name)return r;if(t===(0,e.getFieldDisplayName)(o,n,i))return r}return}(n,t);return null==i?void 0:t.fields[i]}function wB(t){var n;const i=null===(n=t.state)||void 0===n?void 0:n.calcs;if(i){const t=i[e.ReducerID.lastNotNull];if(null!=t)return t}const r=t.values;let o=r.length-1;for(;o>=0;){const t=r[o--];if(null!=t)return t}}function bB(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QB(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}function xB(t,n,i){return function(t,n,i){var r;if(!t){var o,s;const t=i.visualization.getColorByName(null!==(s=n.fixed)&&void 0!==s?s:"grey");return{isAssumed:Boolean(null===(o=n.field)||void 0===o?void 0:o.length)||!n.fixed,fixed:t,value:()=>t,get:e=>t}}const a=(0,e.getFieldColorModeForField)(t);if(a.isByValue||(null===(r=t.config.mappings)||void 0===r?void 0:r.length)){const n=(0,e.getFieldConfigWithMinMax)(t,!0);n!==t.config&&(t=QB(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){bB(t,e,n[e])}))}return t}({},t),{config:n}),t.state=void 0);const r=(0,e.getDisplayProcessor)({field:t,theme:i}),o=t=>{var e;return null!==(e=r(t).color)&&void 0!==e?e:"#ccc"};return{field:t,get:e=>o(t.values[e]),value:()=>o(wB(t))}}const A=a.getCalculator(t,i)(0,0);return{fixed:A,value:()=>A,get:t=>A,field:t}}(BB(t,n.field),n,i)}function DB(t,n){return function(t,n,i){if(!t){var r,o;const t=null!==(o=n.fixed)&&void 0!==o?o:0;return{isAssumed:Boolean(null===(r=n.field)||void 0===r?void 0:r.length)||!n.fixed,fixed:t,value:()=>t,get:()=>t}}const s=(0,e.getMinMaxAndDelta)(t),a=n.max-n.min,A=t.values;if(A.length<1||a<=0||s.delta<=0)return{fixed:n.min,value:()=>n.min,get:()=>n.min};let l=t=>n.min+t*a;if(i===pB.Quad){const t=Math.PI*Math.pow(n.max/2,2),e=Math.PI*Math.pow(n.min/2,2),i=t-e;l=t=>{let n=e+i*t;return 2*Math.sqrt(n/Math.PI)}}const c=e=>{const n=t.values[e];let i=0;return n!==-1/0&&(i=(n-s.min)/s.delta),i>1?i=1:i<0&&(i=0),l(i)};return{get:c,value:()=>c(wB(t)),field:t}}(BB(t,null==n?void 0:n.field),n)}function SB(t){return t||(t={min:0,max:1}),null==t.min&&(t.min=0),null==t.max&&(t.max=1),t}function MB(t,n){const i=n.field?BB(t,n.field):null==t?void 0:t.fields.find((t=>t.type===e.FieldType.string));return function(t,n){let i=n.fixed;var r;const o=null!==(r=n.mode)&&void 0!==r?r:mB.Fixed;if(o===mB.Fixed)return{isAssumed:!Boolean(i),fixed:i,value:()=>i,get:t=>i};if(o===mB.Template){const e=t=>`TEMPLATE[${n.fixed} // ${t}]`;return t?{field:t,get:n=>e(t.values[n]),value:()=>e(wB(t))}:(i=e(""),{isAssumed:!0,fixed:i,value:()=>i,get:t=>i})}if(!t)return{isAssumed:!0,fixed:i,value:()=>i,get:t=>i};let s=n=>(0,e.formattedValueToString)(t.display(n));return{field:t,get:e=>s(t.values[e]),value:()=>s(wB(t))}}(i,n)}function kB(t){return t?t.indexOf(":/")>0?window.__grafana_public_path__:t.startsWith(CB.Custom)?t:"public/plugins/vaduga-mapgl-panel/img/icons/"+t+".svg":""}!function(t){t.Cisco="img/icons/cisco",t.Networking="img/icons/networking",t.Databases="img/icons/databases",t.Custom="public/img/icons/mapgl",t.BG="public/img/bg"}(CB||(CB={})),function(t){t.Icon="icon",t.Image="image"}(EB||(EB={})),function(t){t.Folder="folder",t.URL="url",t.Upload="upload"}(_B||(_B={})),function(t){t.SMALL="small",t.NORMAL="normal"}(vB||(vB={}));var RB=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},NB=function(t){return t.split(/ ?; ?/).reduce((function(t,e){var n=RB(e.split(/ ?: ?/),2),i=n[0],r=n[1];return i&&r&&(t[i.replace(/-(\w)/g,(function(t,e){return e.toUpperCase()}))]=Number.isNaN(Number(r))?r:Number(r)),t}),{})};var PB=["br","col","colgroup","dl","hr","iframe","img","input","link","menuitem","meta","ol","param","select","table","tbody","tfoot","thead","tr","ul","wbr"],TB={"accept-charset":"acceptCharset",acceptcharset:"acceptCharset",accesskey:"accessKey",allowfullscreen:"allowFullScreen",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",cellpadding:"cellPadding",cellspacing:"cellSpacing",charset:"charSet",class:"className",classid:"classID",classname:"className",colspan:"colSpan",contenteditable:"contentEditable",contextmenu:"contextMenu",controlslist:"controlsList",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",datetime:"dateTime",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",enctype:"encType",for:"htmlFor",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",icon:"icon",innerhtml:"innerHTML",inputmode:"inputMode",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",marginwidth:"marginWidth",marginheight:"marginHeight",maxlength:"maxLength",mediagroup:"mediaGroup",minlength:"minLength",nomodule:"noModule",novalidate:"noValidate",playsinline:"playsInline",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rowspan:"rowSpan",spellcheck:"spellCheck",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",tabindex:"tabIndex",typemustmatch:"typeMustMatch",usemap:"useMap",accentheight:"accentHeight","accent-height":"accentHeight",alignmentbaseline:"alignmentBaseline","alignment-baseline":"alignmentBaseline",allowreorder:"allowReorder",arabicform:"arabicForm","arabic-form":"arabicForm",attributename:"attributeName",attributetype:"attributeType",autoreverse:"autoReverse",basefrequency:"baseFrequency",baselineshift:"baselineShift","baseline-shift":"baselineShift",baseprofile:"baseProfile",calcmode:"calcMode",capheight:"capHeight","cap-height":"capHeight",clippath:"clipPath","clip-path":"clipPath",clippathunits:"clipPathUnits",cliprule:"clipRule","clip-rule":"clipRule",colorinterpolation:"colorInterpolation","color-interpolation":"colorInterpolation",colorinterpolationfilters:"colorInterpolationFilters","color-interpolation-filters":"colorInterpolationFilters",colorprofile:"colorProfile","color-profile":"colorProfile",colorrendering:"colorRendering","color-rendering":"colorRendering",contentscripttype:"contentScriptType",contentstyletype:"contentStyleType",diffuseconstant:"diffuseConstant",dominantbaseline:"dominantBaseline","dominant-baseline":"dominantBaseline",edgemode:"edgeMode",enablebackground:"enableBackground","enable-background":"enableBackground",externalresourcesrequired:"externalResourcesRequired",fillopacity:"fillOpacity","fill-opacity":"fillOpacity",fillrule:"fillRule","fill-rule":"fillRule",filterres:"filterRes",filterunits:"filterUnits",floodopacity:"floodOpacity","flood-opacity":"floodOpacity",floodcolor:"floodColor","flood-color":"floodColor",fontfamily:"fontFamily","font-family":"fontFamily",fontsize:"fontSize","font-size":"fontSize",fontsizeadjust:"fontSizeAdjust","font-size-adjust":"fontSizeAdjust",fontstretch:"fontStretch","font-stretch":"fontStretch",fontstyle:"fontStyle","font-style":"fontStyle",fontvariant:"fontVariant","font-variant":"fontVariant",fontweight:"fontWeight","font-weight":"fontWeight",glyphname:"glyphName","glyph-name":"glyphName",glyphorientationhorizontal:"glyphOrientationHorizontal","glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphorientationvertical:"glyphOrientationVertical","glyph-orientation-vertical":"glyphOrientationVertical",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",horizadvx:"horizAdvX","horiz-adv-x":"horizAdvX",horizoriginx:"horizOriginX","horiz-origin-x":"horizOriginX",imagerendering:"imageRendering","image-rendering":"imageRendering",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",letterspacing:"letterSpacing","letter-spacing":"letterSpacing",lightingcolor:"lightingColor","lighting-color":"lightingColor",limitingconeangle:"limitingConeAngle",markerend:"markerEnd","marker-end":"markerEnd",markerheight:"markerHeight",markermid:"markerMid","marker-mid":"markerMid",markerstart:"markerStart","marker-start":"markerStart",markerunits:"markerUnits",markerwidth:"markerWidth",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",numoctaves:"numOctaves",overlineposition:"overlinePosition","overline-position":"overlinePosition",overlinethickness:"overlineThickness","overline-thickness":"overlineThickness",paintorder:"paintOrder","paint-order":"paintOrder","panose-1":"panose1",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointerevents:"pointerEvents","pointer-events":"pointerEvents",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",refx:"refX",refy:"refY",renderingintent:"renderingIntent","rendering-intent":"renderingIntent",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",shaperendering:"shapeRendering","shape-rendering":"shapeRendering",specularconstant:"specularConstant",specularexponent:"specularExponent",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stitchtiles:"stitchTiles",stopcolor:"stopColor","stop-color":"stopColor",stopopacity:"stopOpacity","stop-opacity":"stopOpacity",strikethroughposition:"strikethroughPosition","strikethrough-position":"strikethroughPosition",strikethroughthickness:"strikethroughThickness","strikethrough-thickness":"strikethroughThickness",strokedasharray:"strokeDasharray","stroke-dasharray":"strokeDasharray",strokedashoffset:"strokeDashoffset","stroke-dashoffset":"strokeDashoffset",strokelinecap:"strokeLinecap","stroke-linecap":"strokeLinecap",strokelinejoin:"strokeLinejoin","stroke-linejoin":"strokeLinejoin",strokemiterlimit:"strokeMiterlimit","stroke-miterlimit":"strokeMiterlimit",strokewidth:"strokeWidth","stroke-width":"strokeWidth",strokeopacity:"strokeOpacity","stroke-opacity":"strokeOpacity",suppresscontenteditablewarning:"suppressContentEditableWarning",suppresshydrationwarning:"suppressHydrationWarning",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textanchor:"textAnchor","text-anchor":"textAnchor",textdecoration:"textDecoration","text-decoration":"textDecoration",textlength:"textLength",textrendering:"textRendering","text-rendering":"textRendering",underlineposition:"underlinePosition","underline-position":"underlinePosition",underlinethickness:"underlineThickness","underline-thickness":"underlineThickness",unicodebidi:"unicodeBidi","unicode-bidi":"unicodeBidi",unicoderange:"unicodeRange","unicode-range":"unicodeRange",unitsperem:"unitsPerEm","units-per-em":"unitsPerEm",unselectable:"unselectable",valphabetic:"vAlphabetic","v-alphabetic":"vAlphabetic",vectoreffect:"vectorEffect","vector-effect":"vectorEffect",vertadvy:"vertAdvY","vert-adv-y":"vertAdvY",vertoriginx:"vertOriginX","vert-origin-x":"vertOriginX",vertoriginy:"vertOriginY","vert-origin-y":"vertOriginY",vhanging:"vHanging","v-hanging":"vHanging",videographic:"vIdeographic","v-ideographic":"vIdeographic",viewbox:"viewBox",viewtarget:"viewTarget",vmathematical:"vMathematical","v-mathematical":"vMathematical",wordspacing:"wordSpacing","word-spacing":"wordSpacing",writingmode:"writingMode","writing-mode":"writingMode",xchannelselector:"xChannelSelector",xheight:"xHeight","x-height":"xHeight",xlinkactuate:"xlinkActuate","xlink:actuate":"xlinkActuate",xlinkarcrole:"xlinkArcrole","xlink:arcrole":"xlinkArcrole",xlinkhref:"xlinkHref","xlink:href":"xlinkHref",xlinkrole:"xlinkRole","xlink:role":"xlinkRole",xlinkshow:"xlinkShow","xlink:show":"xlinkShow",xlinktitle:"xlinkTitle","xlink:title":"xlinkTitle",xlinktype:"xlinkType","xlink:type":"xlinkType",xmlbase:"xmlBase","xml:base":"xmlBase",xmllang:"xmlLang","xml:lang":"xmlLang","xml:space":"xmlSpace",xmlnsxlink:"xmlnsXlink","xmlns:xlink":"xmlnsXlink",xmlspace:"xmlSpace",ychannelselector:"yChannelSelector",zoomandpan:"zoomAndPan",onblur:"onBlur",onchange:"onChange",onclick:"onClick",oncontextmenu:"onContextMenu",ondoubleclick:"onDoubleClick",ondrag:"onDrag",ondragend:"onDragEnd",ondragenter:"onDragEnter",ondragexit:"onDragExit",ondragleave:"onDragLeave",ondragover:"onDragOver",ondragstart:"onDragStart",ondrop:"onDrop",onerror:"onError",onfocus:"onFocus",oninput:"onInput",oninvalid:"onInvalid",onkeydown:"onKeyDown",onkeypress:"onKeyPress",onkeyup:"onKeyUp",onload:"onLoad",onmousedown:"onMouseDown",onmouseenter:"onMouseEnter",onmouseleave:"onMouseLeave",onmousemove:"onMouseMove",onmouseout:"onMouseOut",onmouseover:"onMouseOver",onmouseup:"onMouseUp",onscroll:"onScroll",onsubmit:"onSubmit",ontouchcancel:"onTouchCancel",ontouchend:"onTouchEnd",ontouchmove:"onTouchMove",ontouchstart:"onTouchStart",onwheel:"onWheel"},LB=function(){return LB=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},LB.apply(this,arguments)},FB=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},OB=function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};function GB(t,e){var n;if(void 0===e&&(e={}),!(t&&t instanceof Node))return null;var i,o=e.actions,s=void 0===o?[]:o,a=e.index,A=void 0===a?0:a,l=e.level,c=void 0===l?0:l,u=e.randomKey,h=t,g="".concat(c,"-").concat(A),d=[];if(u&&0===c&&(g="".concat(function(t){void 0===t&&(t=6);for(var e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n="",i=t;i>0;--i)n+=e[Math.round(61*Math.random())];return n}(),"-").concat(g)),Array.isArray(s)&&s.forEach((function(e){e.condition(h,g,c)&&("function"==typeof e.pre&&((h=e.pre(h,g,c))instanceof Node||(h=t)),"function"==typeof e.post&&d.push(e.post(h,g,c)))})),d.length)return d;switch(h.nodeType){case 1:return r.createElement((i=h.nodeName,/[a-z]+[A-Z]+[a-z]+/.test(i)?i:i.toLowerCase()),function(t,e){var n={key:e};if(t instanceof Element){var i=t.getAttribute("class");i&&(n.className=i),OB([],FB(t.attributes),!1).forEach((function(t){switch(t.name){case"class":break;case"style":n[t.name]=NB(t.value);break;case"allowfullscreen":case"allowpaymentrequest":case"async":case"autofocus":case"autoplay":case"checked":case"controls":case"default":case"defer":case"disabled":case"formnovalidate":case"hidden":case"ismap":case"itemscope":case"loop":case"multiple":case"muted":case"nomodule":case"novalidate":case"open":case"readonly":case"required":case"reversed":case"selected":case"typemustmatch":n[TB[t.name]||t.name]=!0;break;default:n[TB[t.name]||t.name]=t.value}}))}return n}(h,g),function(t,e,n){var i=OB([],FB(t),!1).map((function(t,i){return GB(t,LB(LB({},n),{index:i,level:e+1}))})).filter(Boolean);return i.length?i:null}(h.childNodes,c,e));case 3:var p=(null===(n=h.nodeValue)||void 0===n?void 0:n.toString())||"";if(/^\s+$/.test(p)&&!/[\u00A0\u202F]/.test(p))return null;if(!h.parentNode)return p;var f=h.parentNode.nodeName.toLowerCase();return PB.includes(f)?(/\S/.test(p)&&console.warn("A textNode is not allowed inside '".concat(f,"'. Your text \"").concat(p,'" will be ignored')),null):p;default:return null}}function UB(t,e){return void 0===e&&(e={}),"string"==typeof t?function(t,e){if(void 0===e&&(e={}),!t||"string"!=typeof t)return null;var n=e.nodeOnly,i=void 0!==n&&n,r=e.selector,o=void 0===r?"body > *":r,s=e.type,a=void 0===s?"text/html":s;try{var A=(new DOMParser).parseFromString(t,a).querySelector(o);if(!(A instanceof Node))throw new TypeError("Error parsing input");return i?A:GB(A,e)}catch(t){}return null}(t,e):t instanceof Node?GB(t,e):null}var jB=g(1567),YB={FAILED:"failed",LOADED:"loaded",LOADING:"loading",PENDING:"pending",READY:"ready",UNSUPPORTED:"unsupported"};function KB(){return jB.canUseDOM}function zB(){return function(){if(!document)return!1;var t=document.createElement("div");t.innerHTML="<svg />";var e=t.firstChild;return!!e&&"http://www.w3.org/2000/svg"===e.namespaceURI}()&&"undefined"!=typeof window&&null!==window}var JB=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),qB=function(){return qB=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},qB.apply(this,arguments)},HB=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s},VB=function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},WB=Object.create(null),ZB=function(t){function e(e){var n=t.call(this,e)||this;return Object.defineProperty(n,"isInitialized",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(n,"isActive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(n,"hash",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"handleLoad",{enumerable:!0,configurable:!0,writable:!0,value:function(t,e){void 0===e&&(e=!1),n.isActive&&n.setState({content:t,hasCache:e,status:YB.LOADED},n.getElement)}}),Object.defineProperty(n,"handleError",{enumerable:!0,configurable:!0,writable:!0,value:function(t){var e=n.props.onError,i="Browser does not support SVG"===t.message?YB.UNSUPPORTED:YB.FAILED;n.isActive&&n.setState({status:i},(function(){"function"==typeof e&&e(t)}))}}),Object.defineProperty(n,"request",{enumerable:!0,configurable:!0,writable:!0,value:function(){var t=n.props,e=t.cacheRequests,i=t.fetchOptions,r=t.src;try{return e&&(WB[r]={content:"",status:YB.LOADING}),fetch(r,i).then((function(t){var e=t.headers.get("content-type"),n=HB((e||"").split(/ ?; ?/),1)[0];if(t.status>299)throw new Error("Not found");if(!["image/svg+xml","text/plain"].some((function(t){return n.includes(t)})))throw new Error("Content type isn't valid: ".concat(n));return t.text()})).then((function(t){var i=n.props.src;if(r===i){if(n.handleLoad(t),e){var o=WB[r];o&&(o.content=t,o.status=YB.LOADED)}}else WB[r].status===YB.LOADING&&delete WB[r]})).catch((function(t){(n.handleError(t),e)&&(WB[r]&&delete WB[r])}))}catch(t){return n.handleError(new Error(t.message))}}}),n.state={content:"",element:null,hasCache:!!e.cacheRequests&&!!WB[e.src],status:YB.PENDING},n.hash=e.uniqueHash||function(t){for(var e,n="abcdefghijklmnopqrstuvwxyz",i="".concat(n).concat(n.toUpperCase()).concat("1234567890"),r="",o=0;o<t;o++)r+=(e=i)[Math.floor(Math.random()*e.length)];return r}(8),n}return JB(e,t),Object.defineProperty(e.prototype,"componentDidMount",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.isActive=!0,KB()&&!this.isInitialized){var t=this.state.status,e=this.props.src;try{if(t===YB.PENDING){if(!zB())throw new Error("Browser does not support SVG");if(!e)throw new Error("Missing src");this.load()}}catch(t){this.handleError(t)}this.isInitialized=!0}}}),Object.defineProperty(e.prototype,"componentDidUpdate",{enumerable:!1,configurable:!0,writable:!0,value:function(t,e){if(KB()){var n=this.state,i=n.hasCache,r=n.status,o=this.props,s=o.onLoad,a=o.src;if(e.status!==YB.READY&&r===YB.READY&&s&&s(a,i),t.src!==a){if(!a)return void this.handleError(new Error("Missing src"));this.load()}}}}),Object.defineProperty(e.prototype,"componentWillUnmount",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.isActive=!1}}),Object.defineProperty(e.prototype,"getNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this.props,e=t.description,n=t.title;try{var i=UB(this.processSVG(),{nodeOnly:!0});if(!(i&&i instanceof SVGSVGElement))throw new Error("Could not convert the src to a DOM Node");var r=this.updateSVGAttributes(i);if(e){var o=r.querySelector("desc");o&&o.parentNode&&o.parentNode.removeChild(o);var s=document.createElementNS("http://www.w3.org/2000/svg","desc");s.innerHTML=e,r.prepend(s)}if(void 0!==n){var a=r.querySelector("title");if(a&&a.parentNode&&a.parentNode.removeChild(a),n){var A=document.createElementNS("http://www.w3.org/2000/svg","title");A.innerHTML=n,r.prepend(A)}}return r}catch(t){return this.handleError(t)}}}),Object.defineProperty(e.prototype,"getElement",{enumerable:!1,configurable:!0,writable:!0,value:function(){try{var t=UB(this.getNode());if(!t||!r.isValidElement(t))throw new Error("Could not convert the src to a React element");this.setState({element:t,status:YB.READY})}catch(t){this.handleError(new Error(t.message))}}}),Object.defineProperty(e.prototype,"load",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this;this.isActive&&this.setState({content:"",element:null,hasCache:!1,status:YB.LOADING},(function(){var e=t.props,n=e.cacheRequests,i=e.src,r=n&&WB[i];if(r&&r.status===YB.LOADED)t.handleLoad(r.content,!0);else{var o,s=i.match(/data:image\/svg[^,]*?(;base64)?,(.*)/);s?o=s[1]?window.atob(s[2]):decodeURIComponent(s[2]):i.includes("<svg")&&(o=i),o?t.handleLoad(o):t.request()}}))}}),Object.defineProperty(e.prototype,"updateSVGAttributes",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var e=this,n=this.props,i=n.baseURL,r=void 0===i?"":i,o=n.uniquifyIDs,s=["id","href","xlink:href","xlink:role","xlink:arcrole"],a=["href","xlink:href"];return o?(VB([],HB(t.children),!1).map((function(t){if(t.attributes&&t.attributes.length){var n=Object.values(t.attributes).map((function(t){var n=t,i=t.value.match(/url\((.*?)\)/);return i&&i[1]&&(n.value=t.value.replace(i[0],"url(".concat(r).concat(i[1],"__").concat(e.hash,")"))),n}));s.forEach((function(t){var i=n.find((function(e){return e.name===t}));i&&!function(t,e){return a.includes(t)&&!!e&&!e.includes("#")}(t,i.value)&&(i.value="".concat(i.value,"__").concat(e.hash))}))}return t.children.length?e.updateSVGAttributes(t):t})),t):t}}),Object.defineProperty(e.prototype,"processSVG",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this.state.content,e=this.props.preProcessor;return e?e(t):t}}),Object.defineProperty(e.prototype,"render",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this.state,e=t.element,n=t.status,i=this.props,o=i.children,s=void 0===o?null:o,a=i.innerRef,A=i.loader,l=void 0===A?null:A,c=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i={};for(var r in t)({}).hasOwnProperty.call(t,r)&&(e.includes(r)||(i[r]=t[r]));return i}(this.props,"baseURL","cacheRequests","children","description","fetchOptions","innerRef","loader","onError","onLoad","preProcessor","src","title","uniqueHash","uniquifyIDs");return KB()?e?r.cloneElement(e,qB({ref:a},c)):[YB.UNSUPPORTED,YB.FAILED].includes(n)?s:l:l}}),Object.defineProperty(e,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{cacheRequests:!0,uniquifyIDs:!1}}),e}(r.PureComponent);const XB=ZB,$B=t=>{let e=(t=>{var e;return null===(e=t.match(new RegExp("<svg.*id\\s*=\\s*(['\"])(.*?)\\1")))||void 0===e?void 0:e[2]})(t);if(!e){e=`x${Te()}`;const n=t.indexOf("<svg")+5;t=t.substring(0,n)+`id="${e}" `+t.substring(n)}let n=(t=>{const e=t.match(new RegExp('<style type="text/css">([\\s\\S]*?)<\\/style>'));return e?e[0]:null})(t);if(n){let i=n.replace(/(#(.*?))?\./g,`#${e} .`);t=t.replace(n,i)}return t};function tw(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ew(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}function nw(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}const iw=t=>{const{cleanStyle:e}=t,n=nw(t,["cleanStyle"]);return o().createElement(XB,ew(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){tw(t,e,n[e])}))}return t}({},n),{cacheRequests:!0,preProcessor:ow}))};let rw=new Map;function ow(t){let n=rw.get(t);if(!n){const{svgText:i}=function(t,e=!1){const n=new DOMParser,i=n.parseFromString(t,"image/svg+xml");e&&(i.querySelector("symbol"),i.querySelectorAll("use").forEach((t=>{const e=t.getAttribute("xlink:href");if(e&&e.startsWith("#")){const o=e.substring(1),s=i.getElementById(o);if(s){var r;const e=s.innerHTML;null===(r=t.parentNode)||void 0===r||r.replaceChild(n.parseFromString(e,"image/svg+xml").documentElement,t)}}})));let r=i.getElementsByTagName("svg")[0],o=r.getAttribute("width"),s=r.getAttribute("height");const a=r.getAttribute("viewBox");if((!o||!s)&&a){var A,l;const t=a.split(" ").map(parseFloat);o=null===(A=t[2])||void 0===A?void 0:A.toString(),s=null===(l=t[3])||void 0===l?void 0:l.toString(),r.setAttribute("width",o),r.setAttribute("height",s)}return{svgText:(new XMLSerializer).serializeToString(i),width:o,height:s}}(t,!0);n=e.textUtil.sanitizeSVGContent(i),n.indexOf('<style type="text/css">')>-1&&(n=$B(n)),rw.set(t,n)}return n}const sw="undefined"!=typeof document?r.useLayoutEffect:()=>{};function aw(t){const e=(0,r.useRef)(null);return sw((()=>{e.current=t}),[t]),(0,r.useCallback)(((...t)=>{const n=e.current;return null==n?void 0:n(...t)}),[])}function Aw(t){let[e,n]=(0,r.useState)(t),i=(0,r.useRef)(null),o=aw((()=>{if(!i.current)return;let t=i.current.next();t.done?i.current=null:e===t.value?o():n(t.value)}));sw((()=>{i.current&&o()}));let s=aw((t=>{i.current=t(e),o()}));return[e,s]}const lw={prefix:String(Math.round(1e10*Math.random())),current:0},cw=r.createContext(lw),uw=r.createContext(!1);let hw=Boolean("undefined"!=typeof window&&window.document&&window.document.createElement),gw=new WeakMap;function dw(t=!1){let e=(0,r.useContext)(cw),n=(0,r.useRef)(null);if(null===n.current&&!t){var i,o;let t=null===(o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)||void 0===o||null===(i=o.ReactCurrentOwner)||void 0===i?void 0:i.current;if(t){let n=gw.get(t);null==n?gw.set(t,{id:e.current,state:t.memoizedState}):t.memoizedState!==n.state&&(e.current=n.id,gw.delete(t))}n.current=++e.current}return n.current}const pw="function"==typeof r.useId?function(t){let e=r.useId(),[n]=(0,r.useState)("function"==typeof r.useSyncExternalStore?r.useSyncExternalStore(Iw,fw,mw):(0,r.useContext)(uw)),i=n?"react-aria":`react-aria${lw.prefix}`;return t||`${i}-${e}`}:function(t){let e=(0,r.useContext)(cw);e!==lw||hw||console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let n=dw(!!t),i=`react-aria${e.prefix}`;return t||`${i}-${n}`};function fw(){return!1}function mw(){return!0}function Iw(t){return()=>{}}let yw=Boolean("undefined"!=typeof window&&window.document&&window.document.createElement),Cw=new Map;function Ew(t=[]){let e=function(t){let[e,n]=(0,r.useState)(t),i=(0,r.useRef)(null),o=pw(e),s=(0,r.useCallback)((t=>{i.current=t}),[]);return yw&&Cw.set(o,s),sw((()=>{let t=o;return()=>{Cw.delete(t)}}),[o]),(0,r.useEffect)((()=>{let t=i.current;t&&(i.current=null,n(t))})),o}(),[n,i]=Aw(e),o=(0,r.useCallback)((()=>{i((function*(){yield e,yield document.getElementById(e)?e:void 0}))}),[e,i]);return sw(o,[e,o,...t]),n}const _w=new Set(["id"]),vw=new Set(["aria-label","aria-labelledby","aria-describedby","aria-details"]),Bw=new Set(["href","hrefLang","target","rel","download","ping","referrerPolicy"]),ww=/^(data-.*)$/;function bw(t,e={}){let{labelable:n,isLink:i,propNames:r}=e,o={};for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(_w.has(e)||n&&vw.has(e)||i&&Bw.has(e)||(null==r?void 0:r.has(e))||ww.test(e))&&(o[e]=t[e]);return o}const Qw=t=>{var e;return null!==(e=null==t?void 0:t.ownerDocument)&&void 0!==e?e:document},xw=t=>{if(t&&"window"in t&&t.window===t)return t;return Qw(t).defaultView||window};let Dw=new Map,Sw=new Set;function Mw(){if("undefined"==typeof window)return;function t(t){return"propertyName"in t}let e=n=>{if(!t(n)||!n.target)return;let i=Dw.get(n.target);if(i&&(i.delete(n.propertyName),0===i.size&&(n.target.removeEventListener("transitioncancel",e),Dw.delete(n.target)),0===Dw.size)){for(let t of Sw)t();Sw.clear()}};document.body.addEventListener("transitionrun",(n=>{if(!t(n)||!n.target)return;let i=Dw.get(n.target);i||(i=new Set,Dw.set(n.target,i),n.target.addEventListener("transitioncancel",e,{once:!0})),i.add(n.propertyName)})),document.body.addEventListener("transitionend",e)}function kw(t){if(function(){if(null==Rw){Rw=!1;try{document.createElement("div").focus({get preventScroll(){return Rw=!0,!0}})}catch(t){}}return Rw}())t.focus({preventScroll:!0});else{let e=function(t){let e=t.parentNode,n=[],i=document.scrollingElement||document.documentElement;for(;e instanceof HTMLElement&&e!==i;)(e.offsetHeight<e.scrollHeight||e.offsetWidth<e.scrollWidth)&&n.push({element:e,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),e=e.parentNode;i instanceof HTMLElement&&n.push({element:i,scrollTop:i.scrollTop,scrollLeft:i.scrollLeft});return n}(t);t.focus(),function(t){for(let{element:e,scrollTop:n,scrollLeft:i}of t)e.scrollTop=n,e.scrollLeft=i}(e)}}"undefined"!=typeof document&&("loading"!==document.readyState?Mw():document.addEventListener("DOMContentLoaded",Mw));let Rw=null;function Nw(t){var e;return"undefined"!=typeof window&&null!=window.navigator&&((null===(e=window.navigator.userAgentData)||void 0===e?void 0:e.brands.some((e=>t.test(e.brand))))||t.test(window.navigator.userAgent))}function Pw(t){var e;return"undefined"!=typeof window&&null!=window.navigator&&t.test((null===(e=window.navigator.userAgentData)||void 0===e?void 0:e.platform)||window.navigator.platform)}function Tw(t){let e=null;return()=>(null==e&&(e=t()),e)}const Lw=Tw((function(){return Pw(/^Mac/i)})),Fw=Tw((function(){return Pw(/^iPhone/i)})),Ow=Tw((function(){return Pw(/^iPad/i)||Lw()&&navigator.maxTouchPoints>1})),Gw=Tw((function(){return Fw()||Ow()})),Uw=(Tw((function(){return Lw()||Gw()})),Tw((function(){return Nw(/AppleWebKit/i)&&!Uw()})),Tw((function(){return Nw(/Chrome/i)}))),jw=Tw((function(){return Nw(/Android/i)}));Tw((function(){return Nw(/Firefox/i)}));const Yw=t=>{var e;return null!==(e=null==t?void 0:t.ownerDocument)&&void 0!==e?e:document},Kw=t=>{if(t&&"window"in t&&t.window===t)return t;return Yw(t).defaultView||window};let zw=null,Jw=new Set,qw=new Map,Hw=!1,Vw=!1;function Ww(t,e){for(let n of Jw)n(t,e)}function Zw(t){Hw=!0,function(t){return!(t.metaKey||!Lw()&&t.altKey||t.ctrlKey||"Control"===t.key||"Shift"===t.key||"Meta"===t.key)}(t)&&(zw="keyboard",Ww("keyboard",t))}function Xw(t){zw="pointer","mousedown"!==t.type&&"pointerdown"!==t.type||(Hw=!0,Ww("pointer",t))}function $w(t){var e;(0===(e=t).mozInputSource&&e.isTrusted||(jw()&&e.pointerType?"click"===e.type&&1===e.buttons:0===e.detail&&!e.pointerType))&&(Hw=!0,zw="virtual")}function tb(t){t.target!==window&&t.target!==document&&(Hw||Vw||(zw="virtual",Ww("virtual",t)),Hw=!1,Vw=!1)}function eb(){Hw=!1,Vw=!0}function nb(t){if("undefined"==typeof window||qw.get(Kw(t)))return;const e=Kw(t),n=Yw(t);let i=e.HTMLElement.prototype.focus;e.HTMLElement.prototype.focus=function(){Hw=!0,i.apply(this,arguments)},n.addEventListener("keydown",Zw,!0),n.addEventListener("keyup",Zw,!0),n.addEventListener("click",$w,!0),e.addEventListener("focus",tb,!0),e.addEventListener("blur",eb,!1),"undefined"!=typeof PointerEvent?(n.addEventListener("pointerdown",Xw,!0),n.addEventListener("pointermove",Xw,!0),n.addEventListener("pointerup",Xw,!0)):(n.addEventListener("mousedown",Xw,!0),n.addEventListener("mousemove",Xw,!0),n.addEventListener("mouseup",Xw,!0)),e.addEventListener("beforeunload",(()=>{ib(t)}),{once:!0}),qw.set(e,{focus:i})}const ib=(t,e)=>{const n=Kw(t),i=Yw(t);e&&i.removeEventListener("DOMContentLoaded",e),qw.has(n)&&(n.HTMLElement.prototype.focus=qw.get(n).focus,i.removeEventListener("keydown",Zw,!0),i.removeEventListener("keyup",Zw,!0),i.removeEventListener("click",$w,!0),n.removeEventListener("focus",tb,!0),n.removeEventListener("blur",eb,!1),"undefined"!=typeof PointerEvent?(i.removeEventListener("pointerdown",Xw,!0),i.removeEventListener("pointermove",Xw,!0),i.removeEventListener("pointerup",Xw,!0)):(i.removeEventListener("mousedown",Xw,!0),i.removeEventListener("mousemove",Xw,!0),i.removeEventListener("mouseup",Xw,!0)),qw.delete(n))};"undefined"!=typeof document&&function(t){const e=Yw(t);let n;"loading"!==e.readyState?nb(t):(n=()=>{nb(t)},e.addEventListener("DOMContentLoaded",n))}();new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function rb(t){const e=Qw(t);if("virtual"===zw){let i=e.activeElement;n=()=>{e.activeElement===i&&t.isConnected&&kw(t)},requestAnimationFrame((()=>{0===Dw.size?n():Sw.add(n)}))}else kw(t);var n}const ob=r.createContext(null);function sb(){let t=(0,r.useContext)(ob),e=null==t?void 0:t.setContain;sw((()=>{null==e||e(!0)}),[e])}function ab(t,e){let{role:n="dialog"}=t,i=Ew();i=t["aria-label"]?void 0:i;let o=(0,r.useRef)(!1);return(0,r.useEffect)((()=>{if(e.current&&!e.current.contains(document.activeElement)){rb(e.current);let t=setTimeout((()=>{document.activeElement===e.current&&(o.current=!0,e.current&&(e.current.blur(),rb(e.current)),o.current=!1)}),500);return()=>{clearTimeout(t)}}}),[e]),sb(),{dialogProps:{...bw(t,{labelable:!0}),role:n,tabIndex:-1,"aria-labelledby":t["aria-labelledby"]||i,onBlur:t=>{o.current&&t.stopPropagation()}},titleProps:{id:i}}}function Ab(t,e){return"#comment"!==t.nodeName&&function(t){const e=xw(t);if(!(t instanceof e.HTMLElement||t instanceof e.SVGElement))return!1;let{display:n,visibility:i}=t.style,r="none"!==n&&"hidden"!==i&&"collapse"!==i;if(r){const{getComputedStyle:e}=t.ownerDocument.defaultView;let{display:n,visibility:i}=e(t);r="none"!==n&&"hidden"!==i&&"collapse"!==i}return r}(t)&&function(t,e){return!t.hasAttribute("hidden")&&!t.hasAttribute("data-react-aria-prevent-focus")&&("DETAILS"!==t.nodeName||!e||"SUMMARY"===e.nodeName||t.hasAttribute("open"))}(t,e)&&(!t.parentElement||Ab(t.parentElement,t))}const lb=r.createContext(null);let cb=null;function ub(t){let{children:e,contain:n,restoreFocus:i,autoFocus:o}=t,s=(0,r.useRef)(null),a=(0,r.useRef)(null),A=(0,r.useRef)([]),{parentNode:l}=(0,r.useContext)(lb)||{},c=(0,r.useMemo)((()=>new bb({scopeRef:A})),[A]);sw((()=>{let t=l||Qb.root;if(Qb.getTreeNode(t.scopeRef)&&cb&&!Eb(cb,t.scopeRef)){let e=Qb.getTreeNode(cb);e&&(t=e)}t.addChild(c),Qb.addNode(c)}),[c,l]),sw((()=>{let t=Qb.getTreeNode(A);t&&(t.contain=!!n)}),[n]),sw((()=>{var t;let e=null===(t=s.current)||void 0===t?void 0:t.nextSibling,n=[];for(;e&&e!==a.current;)n.push(e),e=e.nextSibling;A.current=n}),[e]),function(t,e,n){sw((()=>{if(e||n)return;let i=t.current;const r=Qw(i?i[0]:void 0);let o=e=>{let n=e.target;yb(n,t.current)?cb=t:Ib(n)||(cb=null)};return r.addEventListener("focusin",o,!1),null==i||i.forEach((t=>t.addEventListener("focusin",o,!1))),()=>{r.removeEventListener("focusin",o,!1),null==i||i.forEach((t=>t.removeEventListener("focusin",o,!1)))}}),[t,e,n])}(A,i,n),function(t,e){let n=(0,r.useRef)(),i=(0,r.useRef)();sw((()=>{let r=t.current;if(!e)return void(i.current&&(cancelAnimationFrame(i.current),i.current=void 0));const o=Qw(r?r[0]:void 0);let s=e=>{if("Tab"!==e.key||e.altKey||e.ctrlKey||e.metaKey||!mb(t)||e.isComposing)return;let n=o.activeElement,i=t.current;if(!i||!yb(n,i))return;let r=Bb(fb(i),{tabbable:!0},i);if(!n)return;r.currentNode=n;let s=e.shiftKey?r.previousNode():r.nextNode();s||(r.currentNode=e.shiftKey?i[i.length-1].nextElementSibling:i[0].previousElementSibling,s=e.shiftKey?r.previousNode():r.nextNode()),e.preventDefault(),s&&_b(s,!0)},a=e=>{cb&&!Eb(cb,t)||!yb(e.target,t.current)?mb(t)&&!Cb(e.target,t)?n.current?n.current.focus():cb&&cb.current&&vb(cb.current):mb(t)&&(n.current=e.target):(cb=t,n.current=e.target)},A=e=>{i.current&&cancelAnimationFrame(i.current),i.current=requestAnimationFrame((()=>{var i;o.activeElement&&mb(t)&&!Cb(o.activeElement,t)&&(cb=t,o.body.contains(e.target)?(n.current=e.target,null===(i=n.current)||void 0===i||i.focus()):cb.current&&vb(cb.current))}))};return o.addEventListener("keydown",s,!1),o.addEventListener("focusin",a,!1),null==r||r.forEach((t=>t.addEventListener("focusin",a,!1))),null==r||r.forEach((t=>t.addEventListener("focusout",A,!1))),()=>{o.removeEventListener("keydown",s,!1),o.removeEventListener("focusin",a,!1),null==r||r.forEach((t=>t.removeEventListener("focusin",a,!1))),null==r||r.forEach((t=>t.removeEventListener("focusout",A,!1)))}}),[t,e]),sw((()=>()=>{i.current&&cancelAnimationFrame(i.current)}),[i])}(A,n),function(t,e,n){const i=(0,r.useRef)("undefined"!=typeof document?Qw(t.current?t.current[0]:void 0).activeElement:null);sw((()=>{let i=t.current;const r=Qw(i?i[0]:void 0);if(!e||n)return;let o=()=>{cb&&!Eb(cb,t)||!yb(r.activeElement,t.current)||(cb=t)};return r.addEventListener("focusin",o,!1),null==i||i.forEach((t=>t.addEventListener("focusin",o,!1))),()=>{r.removeEventListener("focusin",o,!1),null==i||i.forEach((t=>t.removeEventListener("focusin",o,!1)))}}),[t,n]),sw((()=>{const i=Qw(t.current?t.current[0]:void 0);if(!e)return;let r=e=>{if("Tab"!==e.key||e.altKey||e.ctrlKey||e.metaKey||!mb(t)||e.isComposing)return;let n=i.activeElement;if(!yb(n,t.current))return;let r=Qb.getTreeNode(t);if(!r)return;let o=r.nodeToRestore,s=Bb(i.body,{tabbable:!0});s.currentNode=n;let a=e.shiftKey?s.previousNode():s.nextNode();if(o&&i.body.contains(o)&&o!==i.body||(o=void 0,r.nodeToRestore=void 0),(!a||!yb(a,t.current))&&o){s.currentNode=o;do{a=e.shiftKey?s.previousNode():s.nextNode()}while(yb(a,t.current));e.preventDefault(),e.stopPropagation(),a?_b(a,!0):Ib(o)?_b(o,!0):n.blur()}};return n||i.addEventListener("keydown",r,!0),()=>{n||i.removeEventListener("keydown",r,!0)}}),[t,e,n]),sw((()=>{const n=Qw(t.current?t.current[0]:void 0);if(!e)return;let r=Qb.getTreeNode(t);var o;return r?(r.nodeToRestore=null!==(o=i.current)&&void 0!==o?o:void 0,()=>{let i=Qb.getTreeNode(t);if(!i)return;let r=i.nodeToRestore;if(e&&r&&(yb(n.activeElement,t.current)||n.activeElement===n.body&&function(t){let e=Qb.getTreeNode(cb);for(;e&&e.scopeRef!==t;){if(e.nodeToRestore)return!1;e=e.parent}return(null==e?void 0:e.scopeRef)===t}(t))){let e=Qb.clone();requestAnimationFrame((()=>{if(n.activeElement===n.body){let n=e.getTreeNode(t);for(;n;){if(n.nodeToRestore&&n.nodeToRestore.isConnected)return void _b(n.nodeToRestore);n=n.parent}for(n=e.getTreeNode(t);n;){if(n.scopeRef&&n.scopeRef.current&&Qb.getTreeNode(n.scopeRef))return void vb(n.scopeRef.current,!0);n=n.parent}}}))}}):void 0}),[t,e])}(A,i,n),function(t,e){const n=r.useRef(e);(0,r.useEffect)((()=>{if(n.current){cb=t;!yb(Qw(t.current?t.current[0]:void 0).activeElement,cb.current)&&t.current&&vb(t.current)}n.current=!1}),[t])}(A,o),(0,r.useEffect)((()=>{const t=Qw(A.current?A.current[0]:void 0).activeElement;let e=null;if(yb(t,A.current)){for(let n of Qb.traverse())n.scopeRef&&yb(t,n.scopeRef.current)&&(e=n);e===Qb.getTreeNode(A)&&(cb=e.scopeRef)}}),[A]),sw((()=>()=>{var t,e,n;let i=null!==(n=null===(e=Qb.getTreeNode(A))||void 0===e||null===(t=e.parent)||void 0===t?void 0:t.scopeRef)&&void 0!==n?n:null;A!==cb&&!Eb(A,cb)||i&&!Qb.getTreeNode(i)||(cb=i),Qb.removeTreeNode(A)}),[A]);let u=(0,r.useMemo)((()=>function(t){return{focusNext(e={}){let n=t.current,{from:i,tabbable:r,wrap:o,accept:s}=e,a=i||Qw(n[0]).activeElement,A=n[0].previousElementSibling,l=Bb(fb(n),{tabbable:r,accept:s},n);l.currentNode=yb(a,n)?a:A;let c=l.nextNode();return!c&&o&&(l.currentNode=A,c=l.nextNode()),c&&_b(c,!0),c},focusPrevious(e={}){let n=t.current,{from:i,tabbable:r,wrap:o,accept:s}=e,a=i||Qw(n[0]).activeElement,A=n[n.length-1].nextElementSibling,l=Bb(fb(n),{tabbable:r,accept:s},n);l.currentNode=yb(a,n)?a:A;let c=l.previousNode();return!c&&o&&(l.currentNode=A,c=l.previousNode()),c&&_b(c,!0),c},focusFirst(e={}){let n=t.current,{tabbable:i,accept:r}=e,o=Bb(fb(n),{tabbable:i,accept:r},n);o.currentNode=n[0].previousElementSibling;let s=o.nextNode();return s&&_b(s,!0),s},focusLast(e={}){let n=t.current,{tabbable:i,accept:r}=e,o=Bb(fb(n),{tabbable:i,accept:r},n);o.currentNode=n[n.length-1].nextElementSibling;let s=o.previousNode();return s&&_b(s,!0),s}}}(A)),[]),h=(0,r.useMemo)((()=>({focusManager:u,parentNode:c})),[c,u]);return r.createElement(lb.Provider,{value:h},r.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:s}),e,r.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:a}))}const hb=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]"],gb=hb.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";hb.push('[tabindex]:not([tabindex="-1"]):not([disabled])');const pb=hb.join(':not([hidden]):not([tabindex="-1"]),');function fb(t){return t[0].parentElement}function mb(t){let e=Qb.getTreeNode(cb);for(;e&&e.scopeRef!==t;){if(e.contain)return!1;e=e.parent}return!0}function Ib(t){return Cb(t)}function yb(t,e){return!!t&&(!!e&&e.some((e=>e.contains(t))))}function Cb(t,e=null){if(t instanceof Element&&t.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:n}of Qb.traverse(Qb.getTreeNode(e)))if(n&&yb(t,n.current))return!0;return!1}function Eb(t,e){var n;let i=null===(n=Qb.getTreeNode(e))||void 0===n?void 0:n.parent;for(;i;){if(i.scopeRef===t)return!0;i=i.parent}return!1}function _b(t,e=!1){if(null==t||e){if(null!=t)try{t.focus()}catch(t){}}else try{rb(t)}catch(t){}}function vb(t,e=!0){let n=t[0].previousElementSibling,i=fb(t),r=Bb(i,{tabbable:e},t);r.currentNode=n;let o=r.nextNode();e&&!o&&(i=fb(t),r=Bb(i,{tabbable:!1},t),r.currentNode=n,o=r.nextNode()),_b(o)}function Bb(t,e,n){let i=(null==e?void 0:e.tabbable)?pb:gb,r=Qw(t).createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode(t){var r;return(null==e||null===(r=e.from)||void 0===r?void 0:r.contains(t))?NodeFilter.FILTER_REJECT:!t.matches(i)||!Ab(t)||n&&!yb(t,n)||(null==e?void 0:e.accept)&&!e.accept(t)?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}});return(null==e?void 0:e.from)&&(r.currentNode=e.from),r}class wb{get size(){return this.fastMap.size}getTreeNode(t){return this.fastMap.get(t)}addTreeNode(t,e,n){let i=this.fastMap.get(null!=e?e:null);if(!i)return;let r=new bb({scopeRef:t});i.addChild(r),r.parent=i,this.fastMap.set(t,r),n&&(r.nodeToRestore=n)}addNode(t){this.fastMap.set(t.scopeRef,t)}removeTreeNode(t){if(null===t)return;let e=this.fastMap.get(t);if(!e)return;let n=e.parent;for(let t of this.traverse())t!==e&&e.nodeToRestore&&t.nodeToRestore&&e.scopeRef&&e.scopeRef.current&&yb(t.nodeToRestore,e.scopeRef.current)&&(t.nodeToRestore=e.nodeToRestore);let i=e.children;n&&(n.removeChild(e),i.size>0&&i.forEach((t=>n&&n.addChild(t)))),this.fastMap.delete(e.scopeRef)}*traverse(t=this.root){if(null!=t.scopeRef&&(yield t),t.children.size>0)for(let e of t.children)yield*this.traverse(e)}clone(){var t;let e=new wb;var n;for(let i of this.traverse())e.addTreeNode(i.scopeRef,null!==(n=null===(t=i.parent)||void 0===t?void 0:t.scopeRef)&&void 0!==n?n:null,i.nodeToRestore);return e}constructor(){this.fastMap=new Map,this.root=new bb({scopeRef:null}),this.fastMap.set(null,this.root)}}class bb{addChild(t){this.children.add(t),t.parent=this}removeChild(t){this.children.delete(t),t.parent=void 0}constructor(t){this.children=new Set,this.contain=!1,this.scopeRef=t.scopeRef}}let Qb=new wb;const xb="undefined"!=typeof document?r.useLayoutEffect:()=>{};function Db(t){const e=(0,r.useRef)(null);return xb((()=>{e.current=t}),[t]),(0,r.useCallback)(((...t)=>{const n=e.current;return null==n?void 0:n(...t)}),[])}function Sb(t){let{ref:e,onInteractOutside:n,isDisabled:i,onInteractOutsideStart:o}=t,s=(0,r.useRef)({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}),a=Db((t=>{n&&Mb(t,e)&&(o&&o(t),s.current.isPointerDown=!0)})),A=Db((t=>{n&&n(t)}));(0,r.useEffect)((()=>{let t=s.current;if(i)return;const n=e.current,r=Yw(n);if("undefined"!=typeof PointerEvent){let n=n=>{t.isPointerDown&&Mb(n,e)&&A(n),t.isPointerDown=!1};return r.addEventListener("pointerdown",a,!0),r.addEventListener("pointerup",n,!0),()=>{r.removeEventListener("pointerdown",a,!0),r.removeEventListener("pointerup",n,!0)}}{let n=n=>{t.ignoreEmulatedMouseEvents?t.ignoreEmulatedMouseEvents=!1:t.isPointerDown&&Mb(n,e)&&A(n),t.isPointerDown=!1},i=n=>{t.ignoreEmulatedMouseEvents=!0,t.isPointerDown&&Mb(n,e)&&A(n),t.isPointerDown=!1};return r.addEventListener("mousedown",a,!0),r.addEventListener("mouseup",n,!0),r.addEventListener("touchstart",a,!0),r.addEventListener("touchend",i,!0),()=>{r.removeEventListener("mousedown",a,!0),r.removeEventListener("mouseup",n,!0),r.removeEventListener("touchstart",a,!0),r.removeEventListener("touchend",i,!0)}}}),[e,i,a,A])}function Mb(t,e){if(t.button>0)return!1;if(t.target){const e=t.target.ownerDocument;if(!e||!e.documentElement.contains(t.target))return!1;if(t.target.closest("[data-react-aria-top-layer]"))return!1}return e.current&&!e.current.contains(t.target)}class kb{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(t,e){this.nativeEvent=e,this.target=e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget,this.bubbles=e.bubbles,this.cancelable=e.cancelable,this.defaultPrevented=e.defaultPrevented,this.eventPhase=e.eventPhase,this.isTrusted=e.isTrusted,this.timeStamp=e.timeStamp,this.type=t}}function Rb(t){let e=(0,r.useRef)({isFocused:!1,observer:null});xb((()=>{const t=e.current;return()=>{t.observer&&(t.observer.disconnect(),t.observer=null)}}),[]);let n=Db((e=>{null==t||t(e)}));return(0,r.useCallback)((t=>{if(t.target instanceof HTMLButtonElement||t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target instanceof HTMLSelectElement){e.current.isFocused=!0;let i=t.target,r=t=>{e.current.isFocused=!1,i.disabled&&n(new kb("blur",t)),e.current.observer&&(e.current.observer.disconnect(),e.current.observer=null)};i.addEventListener("focusout",r,{once:!0}),e.current.observer=new MutationObserver((()=>{if(e.current.isFocused&&i.disabled){var t;null===(t=e.current.observer)||void 0===t||t.disconnect();let n=i===document.activeElement?null:document.activeElement;i.dispatchEvent(new FocusEvent("blur",{relatedTarget:n})),i.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:n}))}})),e.current.observer.observe(i,{attributes:!0,attributeFilter:["disabled"]})}}),[n])}function Nb(t){let{isDisabled:e,onBlurWithin:n,onFocusWithin:i,onFocusWithinChange:o}=t,s=(0,r.useRef)({isFocusWithin:!1}),a=(0,r.useCallback)((t=>{s.current.isFocusWithin&&!t.currentTarget.contains(t.relatedTarget)&&(s.current.isFocusWithin=!1,n&&n(t),o&&o(!1))}),[n,o,s]),A=Rb(a),l=(0,r.useCallback)((t=>{s.current.isFocusWithin||document.activeElement!==t.target||(i&&i(t),o&&o(!0),s.current.isFocusWithin=!0,A(t))}),[i,o,A]);return e?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:l,onBlur:a}}}const Pb=[];function Tb(t,e){let{onClose:n,shouldCloseOnBlur:i,isOpen:o,isDismissable:s=!1,isKeyboardDismissDisabled:a=!1,shouldCloseOnInteractOutside:A}=t;(0,r.useEffect)((()=>(o&&Pb.push(e),()=>{let t=Pb.indexOf(e);t>=0&&Pb.splice(t,1)})),[o,e]);let l=()=>{Pb[Pb.length-1]===e&&n&&n()};Sb({ref:e,onInteractOutside:s&&o?t=>{A&&!A(t.target)||(Pb[Pb.length-1]===e&&(t.stopPropagation(),t.preventDefault()),l())}:null,onInteractOutsideStart:t=>{A&&!A(t.target)||Pb[Pb.length-1]===e&&(t.stopPropagation(),t.preventDefault())}});let{focusWithinProps:c}=Nb({isDisabled:!i,onBlurWithin:t=>{t.relatedTarget&&!Cb(t.relatedTarget,cb)&&(A&&!A(t.relatedTarget)||n())}});return{overlayProps:{onKeyDown:t=>{"Escape"!==t.key||a||t.nativeEvent.isComposing||(t.stopPropagation(),t.preventDefault(),l())},...c},underlayProps:{onPointerDown:t=>{t.target===t.currentTarget&&t.preventDefault()}}}}var Lb,Fb;Boolean((null===(Fb=WE.config.panels)||void 0===Fb||null===(Lb=Fb.debug)||void 0===Lb?void 0:Lb.state)===e.PluginState.alpha);const Ob=t=>{const{newValue:e,setNewValue:n,mediaType:i}=t,r=(0,HE.useStyles2)(Gb),s=kB(e);let a=null==e?void 0:e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("."));return a.length>20&&(a=a.substring(0,20)+"..."),o().createElement(o().Fragment,null,o().createElement(HE.Field,null,o().createElement(HE.Input,{onChange:t=>n(t.currentTarget.value),value:e})),o().createElement("div",{className:r.iconContainer},o().createElement(HE.Field,{label:"Preview"},o().createElement("div",{className:r.iconPreview},i===EB.Icon&&o().createElement(iw,{src:s,className:r.img}),i===EB.Image&&e&&o().createElement("img",{src:s,alt:"Preview of the selected URL",className:r.img}))),o().createElement(HE.Label,null,a)))},Gb=t=>({iconContainer:tv.css`
    display: flex;
    flex-direction: column;
    width: 80%;
    align-items: center;
    align-self: center;
  `,iconPreview:tv.css`
    width: 238px;
    height: 198px;
    border: 1px solid ${t.colors.border.medium};
    display: flex;
    align-items: center;
    justify-content: center;
  `,img:tv.css`
    width: 147px;
    height: 147px;
    fill: ${t.colors.text.primary};
  `});function Ub({secondaryText:t="Drag and drop here or browse"}){const e=(0,HE.useStyles2)(Yb);return o().createElement("div",{className:e.iconWrapper},o().createElement("small",{className:e.small},t),o().createElement(HE.Button,{type:"button",icon:"upload"},"Upload"))}const jb=({mediaType:t,setFormData:e,setUpload:n,error:i})=>{const s=(0,HE.useStyles2)(Yb),[a,A]=(0,r.useState)(!1),[l,c]=(0,r.useState)(""),u=()=>o().createElement(HE.Field,{label:"Preview"},o().createElement("div",{className:s.iconPreview},t===EB.Icon&&o().createElement(iw,{src:l,className:s.img}),t===EB.Image&&o().createElement("img",{src:l,alt:"Preview of the uploaded file",className:s.img}))),h="icon"===t?{"image/*":[".svg",".xml"]}:{"image/*":[".jpeg",".png",".gif",".webp"]};return o().createElement(HE.FileDropzone,{readAs:"readAsBinaryString",onFileRemove:t=>{fetch(`/api/storage/delete/upload/${t.file.name}`,{method:"DELETE"}).catch((t=>console.error("cannot delete file",t)))},options:{accept:h,multiple:!1,onDrop:t=>{let i=new FormData;i.append("file",t[0]),c(URL.createObjectURL(t[0])),A(!0),e(i),n(!0)}}},""!==i.message&&a?o().createElement("p",null,i.message):a?o().createElement(u,null):o().createElement(Ub,null))};function Yb(t,e){return{container:tv.css`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,dropzone:tv.css`
      display: flex;
      flex: 1;
      flex-direction: column;
      align-items: center;
      padding: ${t.spacing(6)};
      border-radius: 2px;
      border: 2px dashed ${t.colors.border.medium};
      background-color: ${e?t.colors.background.secondary:t.colors.background.primary};
      cursor: pointer;
    `,iconWrapper:tv.css`
      display: flex;
      flex-direction: column;
      align-items: center;
    `,acceptMargin:tv.css`
      margin: ${t.spacing(2,0,1)};
    `,small:tv.css`
      color: ${t.colors.text.secondary};
      margin-bottom: ${t.spacing(2)};
    `,iconContainer:tv.css`
      display: flex;
      flex-direction: column;
      width: 80%;
      align-items: center;
      align-self: center;
    `,iconPreview:tv.css`
      width: 238px;
      height: 198px;
      border: 1px solid ${t.colors.border.medium};
      display: flex;
      align-items: center;
      justify-content: center;
    `,img:tv.css`
      width: 147px;
      height: 147px;
      fill: ${t.colors.text.primary};
    `}}let Kb;Kb="undefined"!=typeof window?window:"undefined"!=typeof self?self:g.g;let zb=null,Jb=null;const qb=Kb.clearTimeout,Hb=Kb.setTimeout,Vb=Kb.cancelAnimationFrame||Kb.mozCancelAnimationFrame||Kb.webkitCancelAnimationFrame,Wb=Kb.requestAnimationFrame||Kb.mozRequestAnimationFrame||Kb.webkitRequestAnimationFrame;function Zb(t){let e,n,i,r,o,s,a;const A="undefined"!=typeof document&&document.attachEvent;if(!A){s=function(t){const e=t.__resizeTriggers__,n=e.firstElementChild,i=e.lastElementChild,r=n.firstElementChild;i.scrollLeft=i.scrollWidth,i.scrollTop=i.scrollHeight,r.style.width=n.offsetWidth+1+"px",r.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},o=function(t){return t.offsetWidth!==t.__resizeLast__.width||t.offsetHeight!==t.__resizeLast__.height},a=function(t){if(t.target.className&&"function"==typeof t.target.className.indexOf&&t.target.className.indexOf("contract-trigger")<0&&t.target.className.indexOf("expand-trigger")<0)return;const e=this;s(this),this.__resizeRAF__&&zb(this.__resizeRAF__),this.__resizeRAF__=Jb((function(){o(e)&&(e.__resizeLast__.width=e.offsetWidth,e.__resizeLast__.height=e.offsetHeight,e.__resizeListeners__.forEach((function(n){n.call(e,t)})))}))};let t=!1,A="";i="animationstart";const l="Webkit Moz O ms".split(" ");let c="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),u="";{const e=document.createElement("fakeelement");if(void 0!==e.style.animationName&&(t=!0),!1===t)for(let n=0;n<l.length;n++)if(void 0!==e.style[l[n]+"AnimationName"]){u=l[n],A="-"+u.toLowerCase()+"-",i=c[n],t=!0;break}}n="resizeanim",e="@"+A+"keyframes "+n+" { from { opacity: 0; } to { opacity: 0; } } ",r=A+"animation: 1ms "+n+"; "}return{addResizeListener:function(o,l){if(A)o.attachEvent("onresize",l);else{if(!o.__resizeTriggers__){const A=o.ownerDocument,l=Kb.getComputedStyle(o);l&&"static"===l.position&&(o.style.position="relative"),function(n){if(!n.getElementById("detectElementResize")){const i=(e||"")+".resize-triggers { "+(r||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',o=n.head||n.getElementsByTagName("head")[0],s=n.createElement("style");s.id="detectElementResize",s.type="text/css",null!=t&&s.setAttribute("nonce",t),s.styleSheet?s.styleSheet.cssText=i:s.appendChild(n.createTextNode(i)),o.appendChild(s)}}(A),o.__resizeLast__={},o.__resizeListeners__=[],(o.__resizeTriggers__=A.createElement("div")).className="resize-triggers";const c=A.createElement("div");c.className="expand-trigger",c.appendChild(A.createElement("div"));const u=A.createElement("div");u.className="contract-trigger",o.__resizeTriggers__.appendChild(c),o.__resizeTriggers__.appendChild(u),o.appendChild(o.__resizeTriggers__),s(o),o.addEventListener("scroll",a,!0),i&&(o.__resizeTriggers__.__animationListener__=function(t){t.animationName===n&&s(o)},o.__resizeTriggers__.addEventListener(i,o.__resizeTriggers__.__animationListener__))}o.__resizeListeners__.push(l)}},removeResizeListener:function(t,e){if(A)t.detachEvent("onresize",e);else if(t.__resizeListeners__.splice(t.__resizeListeners__.indexOf(e),1),!t.__resizeListeners__.length){t.removeEventListener("scroll",a,!0),t.__resizeTriggers__.__animationListener__&&(t.__resizeTriggers__.removeEventListener(i,t.__resizeTriggers__.__animationListener__),t.__resizeTriggers__.__animationListener__=null);try{t.__resizeTriggers__=!t.removeChild(t.__resizeTriggers__)}catch(t){}}}}}null==Vb||null==Wb?(zb=qb,Jb=function(t){return Hb(t,20)}):(zb=function([t,e]){Vb(t),qb(e)},Jb=function(t){const e=Wb((function(){qb(n),t()})),n=Hb((function(){Vb(e),t()}),20);return[e,n]});class Xb extends r.Component{constructor(...t){super(...t),this.state={height:this.props.defaultHeight||0,scaledHeight:this.props.defaultHeight||0,scaledWidth:this.props.defaultWidth||0,width:this.props.defaultWidth||0},this._autoSizer=null,this._detectElementResize=null,this._parentNode=null,this._resizeObserver=null,this._timeoutId=null,this._onResize=()=>{this._timeoutId=null;const{disableHeight:t,disableWidth:e,onResize:n}=this.props;if(this._parentNode){const i=window.getComputedStyle(this._parentNode)||{},r=parseFloat(i.paddingLeft||"0"),o=parseFloat(i.paddingRight||"0"),s=parseFloat(i.paddingTop||"0"),a=parseFloat(i.paddingBottom||"0"),A=this._parentNode.getBoundingClientRect(),l=A.height-s-a,c=A.width-r-o,u=this._parentNode.offsetHeight-s-a,h=this._parentNode.offsetWidth-r-o;(t||this.state.height===u&&this.state.scaledHeight===l)&&(e||this.state.width===h&&this.state.scaledWidth===c)||(this.setState({height:u,width:h,scaledHeight:l,scaledWidth:c}),"function"==typeof n&&n({height:u,scaledHeight:l,scaledWidth:c,width:h}))}},this._setRef=t=>{this._autoSizer=t}}componentDidMount(){const{nonce:t}=this.props,e=this._autoSizer?this._autoSizer.parentNode:null;if(null!=e&&e.ownerDocument&&e.ownerDocument.defaultView&&e instanceof e.ownerDocument.defaultView.HTMLElement){this._parentNode=e;const n=e.ownerDocument.defaultView.ResizeObserver;null!=n?(this._resizeObserver=new n((()=>{this._timeoutId=setTimeout(this._onResize,0)})),this._resizeObserver.observe(e)):(this._detectElementResize=Zb(t),this._detectElementResize.addResizeListener(e,this._onResize)),this._onResize()}}componentWillUnmount(){this._parentNode&&(this._detectElementResize&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize),null!==this._timeoutId&&clearTimeout(this._timeoutId),this._resizeObserver&&this._resizeObserver.disconnect())}render(){const{children:t,defaultHeight:e,defaultWidth:n,disableHeight:i=!1,disableWidth:o=!1,doNotBailOutOnEmptyChildren:s=!1,nonce:a,onResize:A,style:l={},tagName:c="div",...u}=this.props,{height:h,scaledHeight:g,scaledWidth:d,width:p}=this.state,f={overflow:"visible"},m={};let I=!1;return i||(0===h&&(I=!0),f.height=0,m.height=h,m.scaledHeight=g),o||(0===p&&(I=!0),f.width=0,m.width=p,m.scaledWidth=d),s&&(I=!1),(0,r.createElement)(c,{ref:this._setRef,style:{...f,...l},...u},!I&&t(m))}}function $b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tQ(t,e){return tQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tQ(t,e)}function eQ(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,tQ(t,e)}var nQ=Number.isNaN||function(t){return"number"==typeof t&&t!=t};function iQ(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(i=t[n],r=e[n],!(i===r||nQ(i)&&nQ(r)))return!1;var i,r;return!0}const rQ=function(t,e){var n;void 0===e&&(e=iQ);var i,r=[],o=!1;return function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return o&&n===this&&e(s,r)||(i=t.apply(this,s),o=!0,n=this,r=s),i}};var oQ="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function sQ(t){cancelAnimationFrame(t.id)}function aQ(t,e){var n=oQ();var i={id:requestAnimationFrame((function r(){oQ()-n>=e?t.call(null):i.id=requestAnimationFrame(r)}))};return i}var AQ=-1;function lQ(t){if(void 0===t&&(t=!1),-1===AQ||t){var e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",document.body.appendChild(e),AQ=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return AQ}var cQ=null;function uQ(t){if(void 0===t&&(t=!1),null===cQ||t){var e=document.createElement("div"),n=e.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var i=document.createElement("div"),r=i.style;return r.width="100px",r.height="100px",e.appendChild(i),document.body.appendChild(e),e.scrollLeft>0?cQ="positive-descending":(e.scrollLeft=1,cQ=0===e.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(e),cQ}return cQ}var hQ=function(t){var e=t.columnIndex;t.data;return t.rowIndex+":"+e};function gQ(t){var e,n=t.getColumnOffset,i=t.getColumnStartIndexForOffset,o=t.getColumnStopIndexForStartIndex,s=t.getColumnWidth,a=t.getEstimatedTotalHeight,A=t.getEstimatedTotalWidth,l=t.getOffsetForColumnAndAlignment,c=t.getOffsetForRowAndAlignment,u=t.getRowHeight,h=t.getRowOffset,g=t.getRowStartIndexForOffset,d=t.getRowStopIndexForStartIndex,p=t.initInstanceProps,f=t.shouldResetStyleCacheOnItemSizeChange,m=t.validateProps;return e=function(t){function e(e){var i;return(i=t.call(this,e)||this)._instanceProps=p(i.props,$b(i)),i._resetIsScrollingTimeoutId=null,i._outerRef=void 0,i.state={instance:$b(i),isScrolling:!1,horizontalScrollDirection:"forward",scrollLeft:"number"==typeof i.props.initialScrollLeft?i.props.initialScrollLeft:0,scrollTop:"number"==typeof i.props.initialScrollTop?i.props.initialScrollTop:0,scrollUpdateWasRequested:!1,verticalScrollDirection:"forward"},i._callOnItemsRendered=void 0,i._callOnItemsRendered=rQ((function(t,e,n,r,o,s,a,A){return i.props.onItemsRendered({overscanColumnStartIndex:t,overscanColumnStopIndex:e,overscanRowStartIndex:n,overscanRowStopIndex:r,visibleColumnStartIndex:o,visibleColumnStopIndex:s,visibleRowStartIndex:a,visibleRowStopIndex:A})})),i._callOnScroll=void 0,i._callOnScroll=rQ((function(t,e,n,r,o){return i.props.onScroll({horizontalScrollDirection:n,scrollLeft:t,scrollTop:e,verticalScrollDirection:r,scrollUpdateWasRequested:o})})),i._getItemStyle=void 0,i._getItemStyle=function(t,e){var r,o=i.props,a=o.columnWidth,A=o.direction,l=o.rowHeight,c=i._getItemStyleCache(f&&a,f&&A,f&&l),g=t+":"+e;if(c.hasOwnProperty(g))r=c[g];else{var d=n(i.props,e,i._instanceProps),p="rtl"===A;c[g]=r={position:"absolute",left:p?void 0:d,right:p?d:void 0,top:h(i.props,t,i._instanceProps),height:u(i.props,t,i._instanceProps),width:s(i.props,e,i._instanceProps)}}return r},i._getItemStyleCache=void 0,i._getItemStyleCache=rQ((function(t,e,n){return{}})),i._onScroll=function(t){var e=t.currentTarget,n=e.clientHeight,r=e.clientWidth,o=e.scrollLeft,s=e.scrollTop,a=e.scrollHeight,A=e.scrollWidth;i.setState((function(t){if(t.scrollLeft===o&&t.scrollTop===s)return null;var e=i.props.direction,l=o;if("rtl"===e)switch(uQ()){case"negative":l=-o;break;case"positive-descending":l=A-r-o}l=Math.max(0,Math.min(l,A-r));var c=Math.max(0,Math.min(s,a-n));return{isScrolling:!0,horizontalScrollDirection:t.scrollLeft<o?"forward":"backward",scrollLeft:l,scrollTop:c,verticalScrollDirection:t.scrollTop<s?"forward":"backward",scrollUpdateWasRequested:!1}}),i._resetIsScrollingDebounced)},i._outerRefSetter=function(t){var e=i.props.outerRef;i._outerRef=t,"function"==typeof e?e(t):null!=e&&"object"==typeof e&&e.hasOwnProperty("current")&&(e.current=t)},i._resetIsScrollingDebounced=function(){null!==i._resetIsScrollingTimeoutId&&sQ(i._resetIsScrollingTimeoutId),i._resetIsScrollingTimeoutId=aQ(i._resetIsScrolling,150)},i._resetIsScrolling=function(){i._resetIsScrollingTimeoutId=null,i.setState({isScrolling:!1},(function(){i._getItemStyleCache(-1)}))},i}eQ(e,t),e.getDerivedStateFromProps=function(t,e){return dQ(t,e),m(t),null};var I=e.prototype;return I.scrollTo=function(t){var e=t.scrollLeft,n=t.scrollTop;void 0!==e&&(e=Math.max(0,e)),void 0!==n&&(n=Math.max(0,n)),this.setState((function(t){return void 0===e&&(e=t.scrollLeft),void 0===n&&(n=t.scrollTop),t.scrollLeft===e&&t.scrollTop===n?null:{horizontalScrollDirection:t.scrollLeft<e?"forward":"backward",scrollLeft:e,scrollTop:n,scrollUpdateWasRequested:!0,verticalScrollDirection:t.scrollTop<n?"forward":"backward"}}),this._resetIsScrollingDebounced)},I.scrollToItem=function(t){var e=t.align,n=void 0===e?"auto":e,i=t.columnIndex,r=t.rowIndex,o=this.props,s=o.columnCount,u=o.height,h=o.rowCount,g=o.width,d=this.state,p=d.scrollLeft,f=d.scrollTop,m=lQ();void 0!==i&&(i=Math.max(0,Math.min(i,s-1))),void 0!==r&&(r=Math.max(0,Math.min(r,h-1)));var I=a(this.props,this._instanceProps),y=A(this.props,this._instanceProps)>g?m:0,C=I>u?m:0;this.scrollTo({scrollLeft:void 0!==i?l(this.props,i,n,p,this._instanceProps,C):p,scrollTop:void 0!==r?c(this.props,r,n,f,this._instanceProps,y):f})},I.componentDidMount=function(){var t=this.props,e=t.initialScrollLeft,n=t.initialScrollTop;if(null!=this._outerRef){var i=this._outerRef;"number"==typeof e&&(i.scrollLeft=e),"number"==typeof n&&(i.scrollTop=n)}this._callPropsCallbacks()},I.componentDidUpdate=function(){var t=this.props.direction,e=this.state,n=e.scrollLeft,i=e.scrollTop;if(e.scrollUpdateWasRequested&&null!=this._outerRef){var r=this._outerRef;if("rtl"===t)switch(uQ()){case"negative":r.scrollLeft=-n;break;case"positive-ascending":r.scrollLeft=n;break;default:var o=r.clientWidth,s=r.scrollWidth;r.scrollLeft=s-o-n}else r.scrollLeft=Math.max(0,n);r.scrollTop=Math.max(0,i)}this._callPropsCallbacks()},I.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&sQ(this._resetIsScrollingTimeoutId)},I.render=function(){var t=this.props,e=t.children,n=t.className,i=t.columnCount,o=t.direction,s=t.height,l=t.innerRef,c=t.innerElementType,u=t.innerTagName,h=t.itemData,g=t.itemKey,d=void 0===g?hQ:g,p=t.outerElementType,f=t.outerTagName,m=t.rowCount,I=t.style,y=t.useIsScrolling,C=t.width,E=this.state.isScrolling,_=this._getHorizontalRangeToRender(),v=_[0],B=_[1],w=this._getVerticalRangeToRender(),b=w[0],Q=w[1],x=[];if(i>0&&m)for(var D=b;D<=Q;D++)for(var S=v;S<=B;S++)x.push((0,r.createElement)(e,{columnIndex:S,data:h,isScrolling:y?E:void 0,key:d({columnIndex:S,data:h,rowIndex:D}),rowIndex:D,style:this._getItemStyle(D,S)}));var M=a(this.props,this._instanceProps),k=A(this.props,this._instanceProps);return(0,r.createElement)(p||f||"div",{className:n,onScroll:this._onScroll,ref:this._outerRefSetter,style:(0,bv.A)({position:"relative",height:s,width:C,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:o},I)},(0,r.createElement)(c||u||"div",{children:x,ref:l,style:{height:M,pointerEvents:E?"none":void 0,width:k}}))},I._callPropsCallbacks=function(){var t=this.props,e=t.columnCount,n=t.onItemsRendered,i=t.onScroll,r=t.rowCount;if("function"==typeof n&&e>0&&r>0){var o=this._getHorizontalRangeToRender(),s=o[0],a=o[1],A=o[2],l=o[3],c=this._getVerticalRangeToRender(),u=c[0],h=c[1],g=c[2],d=c[3];this._callOnItemsRendered(s,a,u,h,A,l,g,d)}if("function"==typeof i){var p=this.state,f=p.horizontalScrollDirection,m=p.scrollLeft,I=p.scrollTop,y=p.scrollUpdateWasRequested,C=p.verticalScrollDirection;this._callOnScroll(m,I,f,C,y)}},I._getHorizontalRangeToRender=function(){var t=this.props,e=t.columnCount,n=t.overscanColumnCount,r=t.overscanColumnsCount,s=t.overscanCount,a=t.rowCount,A=this.state,l=A.horizontalScrollDirection,c=A.isScrolling,u=A.scrollLeft,h=n||r||s||1;if(0===e||0===a)return[0,0,0,0];var g=i(this.props,u,this._instanceProps),d=o(this.props,g,u,this._instanceProps),p=c&&"backward"!==l?1:Math.max(1,h),f=c&&"forward"!==l?1:Math.max(1,h);return[Math.max(0,g-p),Math.max(0,Math.min(e-1,d+f)),g,d]},I._getVerticalRangeToRender=function(){var t=this.props,e=t.columnCount,n=t.overscanCount,i=t.overscanRowCount,r=t.overscanRowsCount,o=t.rowCount,s=this.state,a=s.isScrolling,A=s.verticalScrollDirection,l=s.scrollTop,c=i||r||n||1;if(0===e||0===o)return[0,0,0,0];var u=g(this.props,l,this._instanceProps),h=d(this.props,u,l,this._instanceProps),p=a&&"backward"!==A?1:Math.max(1,c),f=a&&"forward"!==A?1:Math.max(1,c);return[Math.max(0,u-p),Math.max(0,Math.min(o-1,h+f)),u,h]},e}(r.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,useIsScrolling:!1},e}var dQ=function(t,e){t.children,t.direction,t.height,t.innerTagName,t.outerTagName,t.overscanColumnsCount,t.overscanCount,t.overscanRowsCount,t.width,e.instance};var pQ=gQ({getColumnOffset:function(t,e){return e*t.columnWidth},getColumnWidth:function(t,e){return t.columnWidth},getRowOffset:function(t,e){return e*t.rowHeight},getRowHeight:function(t,e){return t.rowHeight},getEstimatedTotalHeight:function(t){var e=t.rowCount;return t.rowHeight*e},getEstimatedTotalWidth:function(t){var e=t.columnCount;return t.columnWidth*e},getOffsetForColumnAndAlignment:function(t,e,n,i,r,o){var s=t.columnCount,a=t.columnWidth,A=t.width,l=Math.max(0,s*a-A),c=Math.min(l,e*a),u=Math.max(0,e*a-A+o+a);switch("smart"===n&&(n=i>=u-A&&i<=c+A?"auto":"center"),n){case"start":return c;case"end":return u;case"center":var h=Math.round(u+(c-u)/2);return h<Math.ceil(A/2)?0:h>l+Math.floor(A/2)?l:h;default:return i>=u&&i<=c?i:u>c||i<u?u:c}},getOffsetForRowAndAlignment:function(t,e,n,i,r,o){var s=t.rowHeight,a=t.height,A=t.rowCount,l=Math.max(0,A*s-a),c=Math.min(l,e*s),u=Math.max(0,e*s-a+o+s);switch("smart"===n&&(n=i>=u-a&&i<=c+a?"auto":"center"),n){case"start":return c;case"end":return u;case"center":var h=Math.round(u+(c-u)/2);return h<Math.ceil(a/2)?0:h>l+Math.floor(a/2)?l:h;default:return i>=u&&i<=c?i:u>c||i<u?u:c}},getColumnStartIndexForOffset:function(t,e){var n=t.columnWidth,i=t.columnCount;return Math.max(0,Math.min(i-1,Math.floor(e/n)))},getColumnStopIndexForStartIndex:function(t,e,n){var i=t.columnWidth,r=t.columnCount,o=t.width,s=e*i,a=Math.ceil((o+n-s)/i);return Math.max(0,Math.min(r-1,e+a-1))},getRowStartIndexForOffset:function(t,e){var n=t.rowHeight,i=t.rowCount;return Math.max(0,Math.min(i-1,Math.floor(e/n)))},getRowStopIndexForStartIndex:function(t,e,n){var i=t.rowHeight,r=t.rowCount,o=t.height,s=e*i,a=Math.ceil((o+n-s)/i);return Math.max(0,Math.min(r-1,e+a-1))},initInstanceProps:function(t){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(t){t.columnWidth,t.rowHeight}});function fQ(t,e){for(var n in t)if(!(n in e))return!0;for(var i in e)if(t[i]!==e[i])return!0;return!1}var mQ=["style"],IQ=["style"];function yQ(t,e){var n=t.style,i=(0,Qv.A)(t,mQ),r=e.style,o=(0,Qv.A)(e,IQ);return!fQ(n,r)&&!fQ(i,o)}const CQ=(0,r.memo)((function(t){const{columnIndex:e,rowIndex:n,style:i,data:r}=t,{cards:s,columnCount:a,onChange:A,selected:l}=r,c=s[e+n*a],u=(0,HE.useStyles2)(_Q);return o().createElement("div",{style:i},c&&o().createElement("div",{key:c.value,className:l===c.value?(0,tv.cx)(u.card,u.selected):u.card,onClick:()=>A(c.value),onKeyDown:t=>{"Enter"===t.key&&A(c.value)},role:"button",tabIndex:0},c.imgUrl.endsWith(".svg")?o().createElement(iw,{src:c.imgUrl,className:u.img}):o().createElement("img",{src:c.imgUrl,alt:"",className:u.img}),o().createElement("h6",{className:u.text},c.label)))}),yQ),EQ=t=>{const{onChange:e,cards:n,value:i}=t,r=(0,HE.useStyles2)(_Q);return o().createElement(Xb,{defaultWidth:680},(({width:t,height:s})=>{const a=Math.floor(t/90),A=Math.ceil(n.length/a);return o().createElement(pQ,{width:t,height:s,columnCount:a,columnWidth:90,rowCount:A,rowHeight:90,itemData:{cards:n,columnCount:a,onChange:e,selected:i},className:r.grid},CQ)}))},_Q=t=>({card:tv.css`
    display: inline-block;
    width: 90px;
    height: 90px;
    margin: 0.75rem;
    margin-left: 15px;
    text-align: center;
    cursor: pointer;
    position: relative;
    background-color: transparent;
    border: 1px solid transparent;
    border-radius: 8px;
    padding-top: 6px;
    :hover {
      border-color: ${t.colors.action.hover};
      box-shadow: ${t.shadows.z2};
    }
  `,selected:tv.css`
    border: 2px solid ${t.colors.primary.main};
    :hover {
      border-color: ${t.colors.primary.main};
    }
  `,img:tv.css`
    width: 40px;
    height: 40px;
    object-fit: cover;
    vertical-align: middle;
    fill: ${t.colors.text.primary};
  `,text:tv.css`
    color: ${t.colors.text.primary};
    white-space: nowrap;
    font-size: 12px;
    text-overflow: ellipsis;
    display: block;
    overflow: hidden;
  `,grid:tv.css`
    border: 1px solid ${t.colors.border.medium};
  `}),vQ=["100baset-hub","10700","10ge-fcoe","15200","3x74-floor-cluster-control","6700-series","7500ars7513","accesspoint","ace","acs","adm","androgenous-person","antenna","asa-5500","asic-processor","asr-1000-series","ata","atm-3800","atm-fast-gigabit","atm-router","atm-switch","atm-tag-switch-router","avs","axp","bbsm","branch-office","breakout-box","bridge","broadcast-router","bts-10200","cable-modem","callmanager","car","carrier-routing-system","cddi-fddi","cdm","cell-phone","centri-firewall","cisco-1000","cisco-ca","cisco-file-engine","cisco-hub","cisco-security","cisco-unified-presence-server","cisco-unity-express","cisco-works","class-4-5-switch","cloud","communications-server","congtent-switch-module","contact-center","content-acquirer","content-engine-cache-director","content-service-router","content-service-switch-1100","content-switch","content-transformation-engine-","cs-mars","csm-s","csu-dsu","cube","detector","director-class-fibre-channel-di","directory-server","diskette","distributed-director","dot-dot","dpt","dslam","dual-mode","dwdm-filter","end-office","fax","fc-storage","fddi-ring","fibre-channel-disk-subsystem","fibre-channel-fabric-switch","file-cabinet","file-server","fileserver","firewall-service-module-fwsm","firewall","front-end-processor","gatekeeper","general-appliance","generic-building","generic-gateway","generic-processor","generic-softswitch","gigabit-switch-atm-tag-router","government-building","ground-terminal","guard","h323","handheld","hootphone","host","hp-mini","hub","iad-router","ibm-mainframe","ibm-mini-as400","ibm-tower","icm","ics","intelliswitch-stack","internet-streamer","ios-firewall","ios-slb","ip-communicator","ip-dsl","ip-phone","ip-telephony-router","ip","iptc","iptv-content-manager","iptv-server","iscsi-router","isdn-switch","itp","jbod","key","keys","lan-to-lan","laptop","layer-2-remote-switch","layer-3-switch","lightweight-ap","localdirector","lock","longreach-cpe","mac-woman","macintosh","man-woman","mas-gateway","mau","mcu","mdu","me1100","mediator","meetingplace","mesh-ap","metro-1500","mgx-8000-multiservice-switch","microphone","microwebserver","mini-vax","mobile-access-ip-phone","mobile-access-router","mobile-streamer","modem","moh-server","mse","multi-fabric-server-switch","multilayer-remote-switch","multiswitch-device","mux","mxe","nac-appliance","nce-router","nce","netflow-router","netranger","netsonar","network-management","network-security","nexus-1000","nexus-2000-fabric-extender","nexus-5000","nexus-7000","octel","ons15500","optical-amplifier","optical-services-router","optical-transport","pad-x28","pad","page-icon","pbx-switch","pbx","pc-adapter-card","pc-man","pc-routercard","pc-sosftware","pc-video","pc","pda","phone-fax","phone","pix-firewall","pmc","printer","programmable-switch","protocol-translator","pxf","radio-tower","ratemux","relational-database","repeater","rf-modem","route-switch-processor","router-firewall","router-in-building","router-with-silicon-switch","router","rpsrps","running-man","safeharbor-icon","sattelite-dish","sattelite","scanner","server-switch","server-with-router","service-control","service-module","service-router","services","set-top-box","simultlayer-switch","sip-proxy-server","sitting-woman","small-business","small-hub","softphone","softswitch-pgw-mgc","software-based-server","space-router","speaker","ssc","ssl-terminator","standard-host","standing-man","standing-woman","stb","storage-router","storge-server","stp","streamer","sun-workstation","supercomputer","svx","system-controller","tablet","tape-array","tdm-router","telecommuter-house-pc","telecommuter-house","telecommuter-icon","token","tp-mcu","transpath","truck","turret","tv","ubr910","umg-series","unity-server","universal-gateway","university","upc","ups","vault","video-camera","vip","virtual-layer-switch","virtual-switch-controller-vsc3","voice-atm-switch","voice-commserver","voice-router","voice-switch","vpn-concentrator","vpn-gateway","vss","wae","wavelength-router","web-browser","web-cluster","wi-fi-tag","wireless-location-appliance","wireless-router","wireless-transport","wireless","wirelss-bridge","wism","wlan-controller","workgroup-director","workgroup-switch","workstation","www-server"],BQ=["a-b-switch","atm-switch-2","atm-switch","biometric-reader","bridge","data-pipe","building","camera","card-reader","cellphone","cloud","comm-link","copier","diagnostic-device","ethernet","external-hard-drive","external-media-drive","fax-machine","fiber-optic-2","fiber-optic","file-2","file-server","file","firewall","hub","keyboard","lock","mainframe","micro-webserver","modem","monitor","mouse","mpls-2","mpls","multi-function-machine","patch-panel","pbx","pc","phone","plotter","printer","project-screen-2","project-screen","projector-2","projector-3","projector","radio-tower","relational-database","repeater","ring-network","router","satellite-dish","satellite","scanner","server-2","server","smart-phone-2","smart-phone","standing-man","standing-woman","super-computer","switch","telephone","ups","user","video-camera","video-phone","virtual-server","voip-phone","web-service","wireless-access-point","wireless-router","working-person"],wQ=["aerospike","airtable","apache-cassandra","apache-couchdb","apache-hadoop","apache-hbase","aws-dynamodb","aws-mobile-hub","aws-rds-relational-database-service","cloudera","couchbase","crateio","dat","database-labs","doctrine","flocker","google-firebase","ibm-cloudant","ibm-compose","influxdb","kinto","knexjs","leveldb","mariadb","memsql","mongodb-realm","mongodb","mysql","neo4j","nuodb","oracle","parse","percona","postgresql","pouchdb","prisma","pumpkindb","pusher","redis","redsmin","rethinkdb","riak","rocksdb","rxdb","scaledrone","sequelize","sqldep","sqlite"],bQ="public/plugins/vaduga-mapgl-panel/img/icons/",QQ=vQ.map((t=>({label:t,value:`cisco/${t}`,search:t.toLowerCase(),imgUrl:bQ+"cisco/"+t+".svg"}))),xQ=BQ.map((t=>({label:t,value:`networking/${t}`,search:t.toLowerCase(),imgUrl:bQ+"networking/"+t+".svg"}))),DQ=wQ.map((t=>({label:t,value:`databases/${t}`,search:t.toLowerCase(),imgUrl:bQ+"databases/"+t+".svg"}))),SQ={[CB.Cisco]:QQ,[CB.Networking]:xQ,[CB.Databases]:DQ},MQ=t=>{const{value:e,mediaType:n,folderName:i,newValue:s,setNewValue:a,maxFiles:A}=t,l=(0,HE.useStyles2)(kQ),c=(t=>t===EB.Icon?[CB.Networking,CB.Databases,CB.Cisco,CB.Custom]:[CB.BG])(n).map((t=>({label:t,value:t}))),[u,h]=(0,r.useState)(),[g,d]=(0,r.useState)(((t,e)=>{var n;return null!==(n=t.find((t=>{var n;const i=e.split("/").slice(0,-1).toString();return null==t||null===(n=t.value)||void 0===n?void 0:n.includes(i)})))&&void 0!==n?n:t[0]})(c,(null==e?void 0:e.length)?e:i)),[p,f]=(0,r.useState)([]),[m,I]=(0,r.useState)([]);return(0,r.useEffect)((()=>{const t=null==g?void 0:g.value;if(t!==CB.Custom){if(t){const e=SQ[t];f(e),I(e)}}else{const e=n===EB.Icon?t=>t.name.endsWith(".svg"):t=>t.name.endsWith(".png")||t.name.endsWith(".gif");(0,WE.getDataSourceSrv)().get("-- Grafana --").then((n=>{n.listFiles(t.replace(/^public\//,""),A).subscribe({next:n=>{const i=[];n.forEach((n=>{e(n);{const e=n.name.lastIndexOf(".");i.push({value:`${t}/${n.name}`,label:n.name,search:(e?n.name.substring(0,e):n.name).toLowerCase(),imgUrl:`${t}/${n.name}`})}})),f(i),I(i)}})}))}}),[n,g,A]),o().createElement(o().Fragment,null,o().createElement(HE.Field,null,o().createElement(HE.Select,{options:c,onChange:d,value:g,menuShouldPortal:!1})),o().createElement(HE.Field,null,o().createElement(HE.FilterInput,{value:null!=u?u:"",placeholder:"Search",onChange:t=>{var e;(e=t)?(e=e.toLowerCase(),I(p.filter((t=>t.search.includes(e))))):I(p),h(t)}})),m&&o().createElement("div",{className:l.cardsWrapper},o().createElement(EQ,{cards:m,onChange:t=>a(t),value:s})))},kQ=t=>({cardsWrapper:tv.css`
    height: 30vh;
    min-height: 50px;
    margin-top: 5px;
    max-width: 680px;
  `});function RQ(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const NQ=t=>{const{value:e,onChange:n,mediaType:i,folderName:s,maxFiles:a}=t,A=(0,HE.useStyles2)(PQ),l=()=>{n(e)},c=(0,r.createRef)(),{dialogProps:u}=ab({},c),{overlayProps:h}=Tb({onClose:l,isDismissable:!0,isOpen:!0},c),g=e&&e.includes("://"),[d,p]=(0,r.useState)(null!=e?e:""),[f,m]=(0,r.useState)(g?_B.URL:_B.Folder),[I,y]=(0,r.useState)(new FormData),[C,E]=(0,r.useState)(!1),[_,v]=(0,r.useState)({message:""}),B=t=>`${A.resourcePickerPopoverTab} ${f===t&&A.resourcePickerPopoverActiveTab}`,w=()=>o().createElement(o().Fragment,null,o().createElement(MQ,{value:e,mediaType:i,folderName:s,newValue:d,setNewValue:p,maxFiles:a}));return o().createElement(ub,{contain:!0,autoFocus:!0,restoreFocus:!0},o().createElement("section",function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){RQ(t,e,n[e])}))}return t}({ref:c},h,u),o().createElement("div",{className:A.resourcePickerPopover},o().createElement("div",{className:A.resourcePickerPopoverTabs},o().createElement("button",{className:B(_B.Folder),onClick:()=>m(_B.Folder)},"Folder"),o().createElement("button",{className:B(_B.URL),onClick:()=>m(_B.URL)},"URL")),o().createElement("div",{className:A.resourcePickerPopoverContent},(()=>{switch(f){case _B.Folder:return w();case _B.URL:return o().createElement(Ob,{newValue:d,setNewValue:p,mediaType:i});case _B.Upload:return o().createElement(jb,{mediaType:i,setFormData:y,setUpload:E,newValue:d,error:_});default:return w()}})(),o().createElement("div",{className:A.buttonRow},o().createElement(HE.Button,{variant:"secondary",onClick:()=>l(),fill:"outline"},"Cancel"),o().createElement(HE.Button,{variant:d&&d!==e?"primary":"secondary",onClick:()=>{C?fetch("/api/storage/upload",{method:"POST",body:I}).then((t=>t.status>=400?void t.json().then((t=>v(t))):t.json())).then((t=>{(0,WE.getBackendSrv)().get(`api/storage/read/${t.path}`).then((()=>p(`${WE.config.appUrl}api/storage/read/${t.path}`))).then((()=>n(`${WE.config.appUrl}api/storage/read/${t.path}`)))})).catch((t=>console.error(t))):n(d)}},"Select"))))))},PQ=t=>({resourcePickerPopover:tv.css`
    border-radius: ${t.shape.radius.default};
    box-shadow: ${t.shadows.z3};
    background: ${t.colors.background.primary};
    border: 1px solid ${t.colors.border.weak};
  `,resourcePickerPopoverTab:tv.css`
    width: 50%;
    text-align: center;
    padding: ${t.spacing(1,0)};
    background: ${t.colors.background.secondary};
    color: ${t.colors.text.secondary};
    font-size: ${t.typography.bodySmall.fontSize};
    cursor: pointer;
    border: none;

    &:focus:not(:focus-visible) {
      outline: none;
      box-shadow: none;
    }

    :focus-visible {
      position: relative;
    }
  `,resourcePickerPopoverActiveTab:tv.css`
    color: ${t.colors.text.primary};
    font-weight: ${t.typography.fontWeightMedium};
    background: ${t.colors.background.primary};
  `,resourcePickerPopoverContent:tv.css`
    width: 315px;
    font-size: ${t.typography.bodySmall.fontSize};
    min-height: 184px;
    padding: ${t.spacing(1)};
    display: flex;
    flex-direction: column;
  `,resourcePickerPopoverTabs:tv.css`
    display: flex;
    width: 100%;
    border-radius: ${t.shape.radius.default} ${t.shape.radius.default} 0 0;
  `,buttonRow:(0,tv.css)({display:"flex",justifyContent:"center",gap:t.spacing(2),padding:t.spacing(1)})});function TQ(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LQ(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){TQ(t,e,n[e])}))}return t}function FQ(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}const OQ=t=>{const{value:e,src:n,name:i,placeholder:s,onChange:a,onClear:A,mediaType:l,folderName:c,size:u,color:h,maxFiles:g}=t,d=(0,HE.useStyles2)(UQ),p=(0,HE.useTheme2)(),f=(0,r.createRef)(),m=o().createElement(NQ,{onChange:a,value:e,mediaType:l,folderName:c,maxFiles:g});let I=n;!I&&e&&(I=kB(e));const y=h&&{fill:p.visualization.getColorByName(h)};return o().createElement(HE.PopoverController,{content:m},((t,r,a)=>o().createElement(o().Fragment,null,f.current&&o().createElement(HE.Popover,FQ(LQ({},a),{referenceElement:f.current,onMouseEnter:t,onKeyDown:t=>{((t,e)=>{"Tab"===t.key||t.altKey||t.ctrlKey||t.metaKey||(t.stopPropagation(),"Escape"===t.key&&e())})(t,r)}})),o().createElement("div",{ref:f,className:d.pointer,onClick:t,onKeyDown:e=>{"Enter"===e.key&&t()},role:"button",tabIndex:0},u===vB.SMALL&&(e&&I?o().createElement(iw,{src:I,className:d.icon,style:LQ({},y)}):o().createElement(HE.LinkButton,{variant:"primary",fill:"text",size:"sm"},"Set icon")),u===vB.NORMAL&&o().createElement(HE.Input,{value:GQ(n,i),placeholder:s,readOnly:!0,prefix:I&&o().createElement(iw,{cleanStyle:!0,src:I,className:d.icon,style:LQ({},y)}),suffix:o().createElement(HE.Button,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:A})})))))};function GQ(t,e){if(t){var n;const t=null!==(n=null==e?void 0:e.lastIndexOf(".svg"))&&void 0!==n?n:0;if(t>0)return e.substring(0,t)}return e}const UQ=t=>({pointer:tv.css`
    cursor: pointer;
    input[readonly] {
      cursor: pointer;
    }
  `,icon:tv.css`
    vertical-align: middle;
    display: inline-block;
    fill: currentColor;
    width: 25px;
  `}),jQ=({value:t,onChange:e,context:n,item:i})=>{var s;const a=null!==(s=i.settings)&&void 0!==s?s:{},A=aB(n.data,null==a?void 0:a.filter),l=AB(A,t,void 0,void 0,a.baseNameMode),c=(0,r.useCallback)((t=>{if(!t||function(t,e){return!!t&&(e.display.has(t)||e.raw.has(t))}(t.value,A))return e(null==t?void 0:t.value)}),[A,e]),u=l.find((e=>e.value===t));var h;return o().createElement(o().Fragment,null,o().createElement(HE.Select,{value:u,placeholder:null!==(h=a.placeholderText)&&void 0!==h?h:"Select field",options:l,onChange:c,noOptionsMessage:a.noFieldsMessage,width:a.width,isClearable:!1!==a.isClearable}))};function YQ(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KQ(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){YQ(t,e,n[e])}))}return t}function zQ(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}IB.Fixed,IB.Field;const JQ={settings:{}},qQ=t=>{var e,n,i,s,a;const{value:A,context:l,onChange:c,item:u}=t,h=((0,r.useCallback)((t=>{c(zQ(KQ({},A),{mode:t}))}),[c,A]),(0,r.useCallback)(((t="")=>{c(zQ(KQ({},A),{field:t}))}),[c,A])),g=(0,r.useCallback)((t=>{c(zQ(KQ({},A),{fixed:null!=t?t:""}))}),[c,A]);var d;const p=null!==(d=null==A?void 0:A.mode)&&void 0!==d?d:IB.Fixed;var f;f=null===(e=u.settings)||void 0===e?void 0:e.showSourceRadio;var m;const I=null!==(m=null===(n=u.settings)||void 0===n?void 0:n.resourceType)&&void 0!==m?m:EB.Icon;var y;const C=null!==(y=null===(i=u.settings)||void 0===i?void 0:i.folderName)&&void 0!==y?y:CB.Networking,E=null===(s=u.settings)||void 0===s?void 0:s.maxFiles;let _="";var v,B,w;I===EB.Icon&&((null==A?void 0:A.fixed)?_=kB(A.fixed):(null===(v=u.settings)||void 0===v?void 0:v.placeholderValue)&&(_=kB(u.settings.placeholderValue)));return o().createElement(o().Fragment,null,p!==IB.Fixed&&o().createElement(HE.InlineFieldRow,null,o().createElement(HE.InlineField,{label:"Field",labelWidth:9,grow:!0},o().createElement(o().Fragment,null,o().createElement(jQ,{context:l,value:null!==(B=A.field)&&void 0!==B?B:"",onChange:h,item:JQ})))),p===IB.Fixed&&o().createElement(OQ,{onChange:g,onClear:t=>{t.stopPropagation(),c({mode:IB.Fixed,fixed:"",field:""})},value:null==A?void 0:A.fixed,src:_,placeholder:null===(a=u.settings)||void 0===a?void 0:a.placeholderText,name:null!==(w=HQ(null==A?void 0:A.fixed))&&void 0!==w?w:"",mediaType:I,folderName:C,size:vB.NORMAL,maxFiles:E}),p===IB.Mapping&&o().createElement(HE.InlineFieldRow,null,o().createElement(HE.InlineField,{label:"Mappings",labelWidth:9,grow:!0},o().createElement("div",null,"TODO mappings editor!"))))};function HQ(t){if(!t)return;const e=t.lastIndexOf("/");return e>0?t.substring(e+1):t}function VQ(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WQ(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){VQ(t,e,n[e])}))}return t}function ZQ(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}const XQ={label:"Fixed value",value:"_____fixed_____"},$Q=t=>{const{value:e,context:n,onChange:i,item:s}=t,{settings:a}=s,A=(0,HE.useStyles2)(tx),l=null==e?void 0:e.field,c=Boolean(!l),u=AB(aB(n.data),l,XQ,null==a?void 0:a.filteredFieldType),h=(0,r.useMemo)((()=>SB(a)),[a]),g=(0,r.useCallback)((t=>{i(function(t,e){let{min:n,max:i}=SB(e);if(t||(t={}),null==t.max&&(t.max=i),null==t.min&&(t.min=n),t.min>t.max){const e=t.max;t.max=t.min,t.min=e}return t.min<n&&(t.min=n),t.max>i&&(t.max=i),null==t.fixed&&(t.fixed=t.min+(t.max-t.min)/2),t.field||(t.fixed>i?t.fixed=i:t.fixed<n&&(t.fixed=n)),t}(t,h))}),[i,h]),d=(0,r.useCallback)((t=>{const n=t.value;g(ZQ(WQ({},e),n&&n!==XQ.value?{field:n}:{field:void 0}))}),[g,e]),p=(0,r.useCallback)((t=>{void 0!==t&&g(ZQ(WQ({},e),{min:t}))}),[g,e]),f=(0,r.useCallback)((t=>{void 0!==t&&g(ZQ(WQ({},e),{max:t}))}),[g,e]),m=(0,r.useCallback)((t=>{void 0!==t&&g(ZQ(WQ({},e),{fixed:t}))}),[g,e]),I=null!=e?e:{},y=c?XQ:u.find((t=>t.value===l));return o().createElement(o().Fragment,null,o().createElement("div",null,o().createElement(HE.Select,{value:y,options:u,onChange:d,noOptionsMessage:"No fields found"})),o().createElement("div",{className:A.range},c&&o().createElement(HE.InlineFieldRow,null,o().createElement(HE.InlineField,{label:"Value",labelWidth:8,grow:!0},o().createElement(X_,ZQ(WQ({value:I.fixed},h),{onChange:m})))),!c&&!h.hideRange&&o().createElement(o().Fragment,null,o().createElement(HE.InlineFieldRow,null,o().createElement(HE.InlineField,{label:"Min",labelWidth:8,grow:!0},o().createElement(X_,ZQ(WQ({value:I.min},h),{onChange:p})))),o().createElement(HE.InlineFieldRow,null,o().createElement(HE.InlineField,{label:"Max",labelWidth:8,grow:!0},o().createElement(X_,ZQ(WQ({value:I.max},h),{onChange:f})))))))},tx=t=>({range:tv.css`
    padding-top: 8px;
  `});fB.Mod,fB.Clamped;const ex=({value:t,onChange:e,item:n,suffix:i})=>{var s,a,A,l;const c=(null===(s=n.settings)||void 0===s?void 0:s.useTextarea)?HE.TextArea:HE.Input,u=(0,r.useCallback)((i=>{let r=null!=t?t:"";var o;"key"in i?"Enter"!==i.key||(null===(o=n.settings)||void 0===o?void 0:o.useTextarea)||(r=i.currentTarget.value.trim()):r=i.currentTarget.value.trim();r!==t&&e(""===r?void 0:r)}),[t,null===(a=n.settings)||void 0===a?void 0:a.useTextarea,e]);return o().createElement(c,{placeholder:null===(A=n.settings)||void 0===A?void 0:A.placeholder,defaultValue:t||"",rows:(null===(l=n.settings)||void 0===l?void 0:l.useTextarea)&&n.settings.rows||5,onBlur:u,onKeyDown:u,suffix:i})};function nx(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ix(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){nx(t,e,n[e])}))}return t}function rx(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}const ox=[{label:"Fixed",value:mB.Fixed,description:"Fixed value"},{label:"Field",value:mB.Field,description:"Display field value"}],sx={settings:{}},ax={settings:{}},Ax=({value:t,context:e,onChange:n})=>{const i=(0,r.useCallback)((e=>{n(rx(ix({},t),{mode:e}))}),[n,t]),s=(0,r.useCallback)((e=>{n(rx(ix({},t),{field:e}))}),[n,t]),a=(0,r.useCallback)(((e="")=>{n(rx(ix({},t),{fixed:e}))}),[n,t]);var A;const l=null!==(A=null==t?void 0:t.mode)&&void 0!==A?A:mB.Fixed;var c;return o().createElement(o().Fragment,null,o().createElement(HE.InlineFieldRow,null,o().createElement(HE.InlineField,{label:"Source",labelWidth:9,grow:!0},o().createElement(HE.RadioButtonGroup,{value:l,options:ox,onChange:i,fullWidth:!0}))),l!==mB.Fixed&&o().createElement(HE.InlineFieldRow,null,o().createElement(HE.InlineField,{label:"Field",labelWidth:9,grow:!0},o().createElement(jQ,{context:e,value:null!==(c=t.field)&&void 0!==c?c:"",onChange:s,item:sx}))),l===mB.Fixed&&o().createElement(HE.InlineFieldRow,{key:null==t?void 0:t.fixed},o().createElement(HE.InlineField,{label:"Value",labelWidth:9,grow:!0},o().createElement(ex,{context:e,value:null==t?void 0:t.fixed,onChange:a,item:ax,suffix:(null==t?void 0:t.fixed)&&o().createElement(HE.Button,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:()=>{a("")}})}))),l===mB.Template&&o().createElement(HE.InlineFieldRow,null,o().createElement(HE.InlineField,{label:"Template",labelWidth:9,grow:!0},o().createElement(ex,{context:e,value:null==t?void 0:t.fixed,onChange:a,item:ax}))))};var lx;!function(t){t.Point="point",t.Line="line",t.Polygon="polygon",t.Any="*any*"}(lx||(lx={}));const cx=Object.freeze({size:{fixed:10,min:10,max:30},color:{fixed:"dark-green"},opacity:.4,textConfig:{fontSize:14}});function ux(t,e,n,i,r,o,s){try{var a=t[o](s),A=a.value}catch(t){return void n(t)}a.done?e(A):Promise.resolve(A).then(i,r)}function hx(t){var e,n;const i=null==t?void 0:t.text;return!!i&&(!(i.mode!==mB.Fixed||!(null===(e=i.fixed)||void 0===e?void 0:e.length))||!(i.mode!==mB.Field||!(null===(n=i.field)||void 0===n?void 0:n.length)))}function gx(t){return dx.apply(this,arguments)}function dx(){var t;return t=function*(t){var e,n,i,r,o,s;t||(t=cx);const a=hx(t),A={};var l,c,u,h;const g={config:t,hasText:a,fields:A,base:{color:WE.config.theme2.visualization.getColorByName(null!==(l=null===(e=t.color)||void 0===e?void 0:e.fixed)&&void 0!==l?l:cx.color.fixed),opacity:null!==(c=t.opacity)&&void 0!==c?c:cx.opacity,lineWidth:null!==(u=t.lineWidth)&&void 0!==u?u:1,size:null!==(h=null===(n=t.size)||void 0===n?void 0:n.fixed)&&void 0!==h?h:cx.size.fixed}};var d,p,f,m;return(null===(r=t.color)||void 0===r||null===(i=r.field)||void 0===i?void 0:i.length)&&(A.color=t.color.field),(null===(s=t.size)||void 0===s||null===(o=s.field)||void 0===o?void 0:o.length)&&(A.size=t.size.field),a&&(g.base.text=null===(d=t.text)||void 0===d?void 0:d.fixed,g.base.textConfig=null!==(m=t.textConfig)&&void 0!==m?m:cx.textConfig,(null===(f=t.text)||void 0===f||null===(p=f.field)||void 0===p?void 0:p.length)&&(A.text=t.text.field)),Object.keys(A).length||(g.fields=void 0),g},dx=function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function s(t){ux(o,i,r,s,a,"next",t)}function a(t){ux(o,i,r,s,a,"throw",t)}s(void 0)}))},dx.apply(this,arguments)}function px(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fx(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){px(t,e,n[e])}))}return t}function mx(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}const Ix=t=>{var e;const{value:n,onChange:i,item:s}=t,{isAuxLayer:a}=s.settings,A=(0,r.useMemo)((()=>{var e;return null===(e=s.settings)||void 0===e||e.frameMatcher,t.context}),[t.context,s.settings]),l=s.settings,c=t=>{i(mx(fx({},n),{color:t}))},u=t=>{i(mx(fx({},n),{opacity:t}))},h=hx(n);var g,d,p,f,m,I,y,C;return(null==l?void 0:l.simpleFixedValues)?o().createElement(o().Fragment,null,o().createElement(HE.InlineFieldRow,null,o().createElement(HE.InlineField,{label:"Color",labelWidth:10},o().createElement(HE.InlineLabel,{width:4},o().createElement(HE.ColorPicker,{color:null!==(d=null==n||null===(g=n.color)||void 0===g?void 0:g.fixed)&&void 0!==d?d:cx.color.fixed,onChange:t=>{c({fixed:t})}})))),o().createElement(HE.InlineFieldRow,null,o().createElement(HE.InlineField,{label:"Opacity",labelWidth:10,grow:!0},o().createElement(iB,{value:null!==(p=null==n?void 0:n.opacity)&&void 0!==p?p:cx.opacity,context:A,onChange:u,item:{settings:{min:0,max:1,step:.1}}})))):o().createElement(o().Fragment,null,!a&&o().createElement(HE.Field,{label:"Circle size"},o().createElement($Q,{value:null!==(f=null==n?void 0:n.size)&&void 0!==f?f:cx.size,context:A,onChange:t=>{i(mx(fx({},n),{size:t}))},item:{settings:{min:1,max:500,filteredFieldType:"number"}}})),o().createElement(HE.Field,{label:a?"Fill color":"Circle color"},o().createElement(gB,{value:null!==(m=null==n?void 0:n.color)&&void 0!==m?m:cx.color,context:A,onChange:c,item:{settings:{filteredFieldType:"number"}}})),o().createElement(HE.Field,{label:"Fill opacity"},o().createElement(iB,{value:null!==(I=null==n?void 0:n.opacity)&&void 0!==I?I:cx.opacity,context:A,onChange:u,item:{settings:{min:0,max:1,step:.1}}})),!a&&o().createElement(HE.Field,{label:"Text label"},o().createElement(Ax,{value:null!==(y=null==n?void 0:n.text)&&void 0!==y?y:yB,context:A,onChange:t=>{i(mx(fx({},n),{text:t}))},item:{}})),h&&o().createElement(o().Fragment,null,o().createElement(HE.InlineFieldRow,null,o().createElement(HE.Field,{label:"Font size"},o().createElement($_,{value:null!==(C=null==n||null===(e=n.textConfig)||void 0===e?void 0:e.fontSize)&&void 0!==C?C:cx.textConfig.fontSize,context:A,onChange:t=>{i(mx(fx({},n),{textConfig:mx(fx({},n.textConfig),{fontSize:t})}))},item:{}})))))};function yx(t,e,n,i){const r={};var o,s;if(i&&Object.keys(i).length)r.color=xB(t,null!==(o=i.color)&&void 0!==o?o:cx.color,n),r.size=DB(t,null!==(s=i.size)&&void 0!==s?s:cx.size),i.text&&(i.text.field||i.text.fixed)&&(r.text=MB(t,i.text));else if(e.fields){var a,A;if(e.fields.color)r.color=xB(t,null!==(a=e.config.color)&&void 0!==a?a:cx.color,n);if(e.fields.size)r.size=DB(t,null!==(A=e.config.size)&&void 0!==A?A:cx.size);e.fields.text&&(r.text=MB(t,e.config.text))}return r}function Cx(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ex(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}function _x(t,n){const i=n.every((e=>{const n=e.name;return t.hasOwnProperty(n)}));if(i){const i=n.every((n=>{const i=n.name;let r=[];r=n.type===e.FieldType.number?n.value.split(",").map((t=>parseInt(t,10))):n.value.split(",").map((t=>t.trim()));const o=t[i];return r.includes(o)}));if(i)return n.length}return-1}const vx=(t,e)=>e.map(((e,n)=>Ex(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){Cx(t,e,n[e])}))}return t}({},e),{origId:n,overrides:_x(t,e.overrides)}))).filter((t=>-1!==t.overrides));function Bx(t,e,n=[]){const i=vx(t,n).sort(((t,e)=>t.value===e.value?t.overrides-e.overrides:t.value-e.value));let r,o=-1;if(null==e)return r;const s=i.length;if(0===s)return r;for(let t=s-1;t>=0;t--){const n=i[t];if(n.value<=e){o=n.overrides,r=n.origId;break}}return r}function wx(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bx(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}function Qx(t,n){const i=n.every((e=>{const n=e.name;return t.hasOwnProperty(n)}));if(i){const i=n.every((n=>{const i=n.name;let r=[];r=n.type===e.FieldType.number?n.value.split(",").map((t=>parseInt(t,10))):n.value.split(",").map((t=>t.trim()));const o=t[i];return r.includes(o)}));if(i)return n.length}return-1}const xx=(t,e)=>e.map((e=>bx(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){wx(t,e,n[e])}))}return t}({},e),{overrides:Qx(t,e.overrides)}))).filter((t=>-1!==t.overrides));function Dx(t,e=[],n="cisco/atm-switch",i=20,r=-5){var o;const s=xx(t,e).sort(((t,e)=>e.overrides-t.overrides));let a=n,A=i,l=r;if(!e.length||!s.length)return{iconName:n,iconSize:i,iconVOffset:r};if(s[0]&&!(null==s||null===(o=s[0])||void 0===o?void 0:o.overrides)){const t=e.find((t=>0===t.overrides.length));return t?{iconName:t.iconName,iconSize:t.iconSize,iconVOffset:t.iconVOffset}:{iconName:n,iconSize:i,iconVOffset:r}}const c=s[0];return a=c.iconName,A=c.iconSize,l=c.iconVOffset,{iconName:a,iconSize:A,iconVOffset:l}}function Sx(t,e,n,i,r,o,s){try{var a=t[o](s),A=a.value}catch(t){return void n(t)}a.done?e(A):Promise.resolve(A).then(i,r)}function Mx(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kx(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){Mx(t,e,n[e])}))}return t}function Rx(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}const Nx={startId:0,locNames:[],commentsData:{},searchProperties:[],show:!0,eCount:0,vCount:0,lOrder:0,style:cx,jitterPoints:!1},Px=HC.Points,Tx={isShowBW:!1,throughputField:void 0,bandField:void 0,type:Px,name:"new data",config:Nx,location:{mode:O_.Auto}};let Lx;const Fx={id:Px,name:"Markers and clusters",description:"nodes and edges from query",isBaseMap:!1,showLocation:!0,pointsUp:(Ox=function*(t,n,i){var r,o;const a=kx({},Nx,n.config),A=yield J_(null==n?void 0:n.location);if(!t.series.length)return[];const{locField:l,parField:c,edgeLabelField:u,isShowBW:h,bandField:g,throughputField:d}=n,p=null===(r=n.config)||void 0===r?void 0:r.globalThresholdsConfig;let{jitterPoints:f,startId:m,locNames:I,commentsData:y,locLabelName:C,svgIconRules:E,graph:_,eCount:v,vCount:B,lOrder:w}=a;if(!_)return[];const b=Px,Q=yield gx(a.style),x={};C&&(null===(o=t.annotations)||void 0===o?void 0:o.length)&&t.annotations[0].fields.length&&t.annotations.forEach((t=>{new e.DataFrameView(t).toArray().forEach((t=>{var e,n;(null==t?void 0:t.text)&&(t.labels=function(t){const e=t.match(/(\w+)\s*=\s*(\w+)/g);if(!e)return null;const n={};return e.forEach((t=>{const[e,i,r]=t.match(/(\w+)\s*=\s*(\w+)/);n[i]=r})),n}(null==t?void 0:t.text));const i=null===(e=t.labels)||void 0===e?void 0:e.alertname,r=null===(n=t.labels)||void 0===n?void 0:n[C];if(i){const e=x[i];if(e){const n=e.get(r);n?n.push(t):e.set(r,[t])}else{const e=new Map;e.set(t.labels[C],[t]),x[i]=e}}}))}));const D=new Map;for(const r of t.series){var S,M;if(Q.dims=yx(r,Q,i),!r.refId||n.query&&n.query.options===r.refId||(null===(S=r.meta)||void 0===S?void 0:S.transformations)&&(null===(M=r.meta.transformations)||void 0===M?void 0:M.length)>0){const t=H_(r,A);t.warning;const o=t.points;if(!o)return console.log("no coords"),[];const a=new e.DataFrameView(r),C=[];let S=0;return o.forEach(((t,e)=>{const{type:r,coordinates:o}=t,A=a.get(e),M=l&&A[l];if(!M)return;const k=u,R=n.bandNumber,N=g&&A[g],P=d&&A[d];try{var T,L,F,O,G;const t={type:"Point",coordinates:o.slice()},n=c&&A[c],r=xE(n);let a;const l=kx({},Q.base),u=Q.dims,g=null===(L=Q.config)||void 0===L||null===(T=L.color)||void 0===T?void 0:T.field,d=g?A[g]:void 0;u&&(u.color&&(l.color=u.color.get(e)),u.size&&(l.size=u.size.get(e)),u.text&&(l.text=u.text.get(e)));const K=null===(O=Q.config)||void 0===O||null===(F=O.color)||void 0===F?void 0:F.fixed;l.fixedColor=K;const z=K&&i.visualization.getColorByName(K),J=z?QE(z):void 0;let q,H=[];null===(G=Object.keys(x))||void 0===G||G.forEach((t=>{const e=x[t].get(M);(null==e?void 0:e.length)&&H.push(e)})),H.length&&(q=H);const V=Rx(kx(Rx(kx({},A),{locName:M,edgeField:k,style:l}),h&&P&&{bandNumber:R,bandWidth:N,throughput:P}),{metric:d,all_annots:q,colType:b}),W=Bx(V,d,p),Z=Dx(V,E),X={id:777,type:"Feature",geometry:t,properties:kx(Rx(kx({},V),{lOrder:w,thrId:W,threshold:kx({},Z)}),J&&{defaultColor:J})},$=null==_?void 0:_.findNode(M);if(null==$?void 0:$.getPropertyValue("feature"))a=kx({},X.properties);else{if($){const t=$.getPropertyValue("wasmId");if(t){var U,j;$.setDataProperty("tarCoords",o.slice()),$.setDataProperty("feature",X);const e=null==_||null===(U=_.rustGraph)||void 0===U?void 0:U.get_vertex_weight(t),{coords:n,id:i,is_node:r,thr_id:s}=e,a=o.slice();null==_||null===(j=_.rustGraph)||void 0===j||j.update_vertex_weight(t,i,a,s,r)}}else{var Y;const t=null==_||null===(Y=_.rustGraph)||void 0===Y?void 0:Y.create_vertex(B.current,o.slice(),W,!0);if(void 0!==t){B.current+=1;const e=new s.bP({id:M,data:{tarCoords:o.slice(),wasmId:t,feature:X}});null==_||_.addNode(e)}}if(f&&2===(null==o?void 0:o.length)){const[t,e]=o,n=`${t},${e}`;D.has(n)||D.set(n,[]),D.get(n).push({idx:m+S,longitude:t,latitude:e})}I.push(M),C.push(X),S++}if(Array.isArray(r)&&Array.isArray(r[0]))for(let t=0;t<r.length;t++){const e=Ux(r,S,t,M);e.length&&e&&(0,s.Ye)({graph:_,vCount:B,eCount:v,parPath:e,lineExtraProps:a,commentsData:y,theme:i})}else if(r){const t=Ux(r,S,null,M);if(t.filter((t=>t&&("string"==typeof t||Array.isArray(t)))).length<2)return;t&&(0,s.Ye)({graph:_,vCount:B,eCount:v,parPath:t,lineExtraProps:a,commentsData:y,theme:i})}}catch(t){console.log("locName: "+M+". "+t)}})),f&&D.forEach((t=>{const e=t.length;if(e>1){let n=0,i=1;t.forEach((({idx:t,longitude:r,latitude:o},s)=>{var a;if(t&&"Point"===(null===(a=C[t])||void 0===a?void 0:a.geometry.type)){const s=C[t].geometry;s.coordinates[0]=r+5e-5*Math.cos(n),s.coordinates[1]=o+5e-5*Math.sin(n),n=2*Math.PI*i/(e+1),i+=1}}))}})),C}}return[]},Gx=function(){var t=this,e=arguments;return new Promise((function(n,i){var r=Ox.apply(t,e);function o(t){Sx(r,n,i,o,s,"next",t)}function s(t){Sx(r,n,i,o,s,"throw",t)}o(void 0)}))},function(t,e,n){return Gx.apply(this,arguments)}),registerOptionsUI:t=>{t.addCustomEditor({id:"config.style",path:"config.style",name:"Primary metric styles",editor:Ix,settings:{displayRotation:!0},defaultValue:Nx.style}).addBooleanSwitch({path:"config.jitterPoints",name:"Jitter points",description:"Jitter points with same coordinates around each other",defaultValue:Nx.jitterPoints})},defaultOptions:Nx};var Ox,Gx;function Ux(t,e,n,i){if(!Array.isArray(t))return"string"==typeof t?[i,t]:(console.log("Wrong format: "+Ly(t)),[]);const r=Array.isArray(t[n])?t[n]:t;if(!(Array.isArray(r)&&"string"==typeof r[0]||!Array.isArray(r[0])&&"string"==typeof r))return console.log("Wrong path format: No coords, numbers, nulls allowed as 0 element), no deeper nesting arrays, or empty arrays. Info: id: "+e+" locName: "+i+" sources: "+t),[];return!!Array.isArray(r)&&1===r.length?[i,r[0]]:r[0]!==i?[i,...r]:r}function jx(t,e,n,i,r,o,s){try{var a=t[o](s),A=a.value}catch(t){return void n(t)}a.done?e(A):Promise.resolve(A).then(i,r)}function Yx(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kx(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){Yx(t,e,n[e])}))}return t}function zx(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}const Jx={colIdx:0,startId:0,globalThresholdsConfig:[],style:cx},qx=HC.Polygons,Hx=(O_.Auto,{id:qx,name:"Polygons layer",description:"GeoJson Polygons from query",isBaseMap:!1,showLocation:!0,pointsUp:function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function s(t){jx(o,i,r,s,a,"next",t)}function a(t){jx(o,i,r,s,a,"throw",t)}s(void 0)}))}}((function*(t,n,i){var r;const o=Kx({},Jx,n.config),s=yield J_(n.location);if(!t.series.length)return[];const a=n.locField,A=(o.colIdx,qx),l=yield gx(o.style),c=null==n||null===(r=n.config)||void 0===r?void 0:r.globalThresholdsConfig;for(const r of t.series)if(l.dims=yx(r,l,i),n.query&&n.query.options===r.refId){const t=H_(r,s);t.warning&&console.log("Could not find locations",t.warning);if(!t.points)return console.log("no coords"),[];const n=new e.DataFrameView(r).toArray(),u=t.points.map(((t,e)=>{var r,s;const u=n[e],h=Kx({},l.base),g=l.dims,d=null===(s=l.config)||void 0===s||null===(r=s.color)||void 0===r?void 0:r.field,p=d?u[d]:void 0;var f,m;g&&(g.color&&(h.color=g.color.get(e)),g.size&&(h.size=g.size.get(e)),g.text&&(h.text=g.text.get(e)),h.fixedColor=null===(m=l.config)||void 0===m||null===(f=m.color)||void 0===f?void 0:f.fixed);const I=h.fixedColor,y=I&&i.visualization.getColorByName(I),C=y?QE(y):void 0,E=Object.entries(u);var _;const v=E.length>0&&a?null!==(_=u[a])&&void 0!==_?_:E[0][1]:void 0,B=zx(Kx({},u),{locName:v,style:h,colType:A}),w=Bx(B,p,c);return{id:o.startId+e,type:"Polygon",geometry:t,properties:Kx(zx(Kx({},B),{thrId:w}),C&&{defaultColor:C})}}));return u}return[]}));return function(e,n,i){return t.apply(this,arguments)}}(),registerOptionsUI:t=>{t.addCustomEditor({id:"config.style",path:"config.style",name:"Primary metric styles",editor:Ix,settings:{isAuxLayer:!0,displayRotation:!0},defaultValue:Jx.style})},defaultOptions:Jx});function Vx(t,e,n,i,r,o,s){try{var a=t[o](s),A=a.value}catch(t){return void n(t)}a.done?e(A):Promise.resolve(A).then(i,r)}function Wx(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zx(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){Wx(t,e,n[e])}))}return t}function Xx(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}const $x={startId:0,colIdx:0,style:cx},tD=HC.GeoJson,eD=(O_.Auto,{id:tD,name:"GeoJson layer",description:"GeoJson features from file (url)",isBaseMap:!1,showLocation:!0,pointsUp:function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function s(t){Vx(o,i,r,s,a,"next",t)}function a(t){Vx(o,i,r,s,a,"throw",t)}s(void 0)}))}}((function*(t,e,n){var i;const r=Zx({},$x,e.config);if(!t.series.length)return[];const o=e.geojsonLocName,s=(e.geojsonMetricName,r.colIdx,tD),a=((null==e?void 0:e.geojsonColor)&&QE(n.visualization.getColorByName(null==e?void 0:e.geojsonColor)),yield gx(r.style)),A=null==e||null===(i=e.config)||void 0===i?void 0:i.globalThresholdsConfig,l=null==e?void 0:e.geojsonurl;if(l){var c,u;let t=yield fetch(l,{method:"GET",headers:{"Content-Type":"application/json"}}).catch((t=>{console.log(t)}));if(!t)return[];let e=yield t.json();if(!(null==e||null===(c=e.features)||void 0===c?void 0:c.length))return console.log("no geodata"),[];a.dims=yx(void 0,a,n);const i=null==e||null===(u=e.features)||void 0===u?void 0:u.map(((t,e)=>{var i,l;const{geometry:c,properties:u}=t,h=Zx({},a.base),g=a.dims,d=null===(l=a.config)||void 0===l||null===(i=l.color)||void 0===i?void 0:i.field,p=d?null==u?void 0:u[d]:void 0;var f,m;g&&(g.color&&(h.color=g.color.get(e)),g.size&&(h.size=g.size.get(e)),g.text&&(h.text=g.text.get(e)),h.fixedColor=null===(m=a.config)||void 0===m||null===(f=m.color)||void 0===f?void 0:f.fixed);const I=h.fixedColor,y=I&&n.visualization.getColorByName(I),C=y?QE(y):void 0,E=(Object.entries(t),Xx(Zx({},u||{}),{locName:o?u[o]:void 0,style:h,colType:s})),_=Bx(E,p,A);return{id:r.startId+e,type:"Feature",geometry:c,properties:Zx(Xx(Zx({},E),{thrId:_}),C&&{defaultColor:C})}}));return i}return[]}));return function(e,n,i){return t.apply(this,arguments)}}(),registerOptionsUI:t=>{t.addCustomEditor({id:"config.style",path:"config.style",name:"Primary metric styles",editor:Ix,settings:{isAuxLayer:!0,displayRotation:!0},defaultValue:$x.style})},defaultOptions:$x});function nD(t,e,n,i,r,o,s){try{var a=t[o](s),A=a.value}catch(t){return void n(t)}a.done?e(A):Promise.resolve(A).then(i,r)}function iD(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rD(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){iD(t,e,n[e])}))}return t}function oD(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}const sD={colIdx:0,startId:0,globalThresholdsConfig:[],style:cx},aD=HC.Path,AD=(O_.Auto,{id:aD,name:"Path layer",description:"GeoJson LineStrings from query",isBaseMap:!1,showLocation:!0,pointsUp:function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function s(t){nD(o,i,r,s,a,"next",t)}function a(t){nD(o,i,r,s,a,"throw",t)}s(void 0)}))}}((function*(t,n,i){var r;const o=rD({},sD,n.config),s=yield J_(n.location);if(!t.series.length)return[];const a=n.locField,A=(o.colIdx,aD),l=yield gx(o.style),c=null==n||null===(r=n.config)||void 0===r?void 0:r.globalThresholdsConfig;for(const r of t.series)if(l.dims=yx(r,l,i),n.query&&n.query.options===r.refId){const t=H_(r,s);t.warning&&console.log("Could not find locations",t.warning);if(!t.points)return console.log("no coords"),[];const n=new e.DataFrameView(r).toArray(),u=t.points.map(((t,e)=>{var r,s;const u=n[e],h=rD({},l.base),g=l.dims,d=null===(s=l.config)||void 0===s||null===(r=s.color)||void 0===r?void 0:r.field,p=d?u[d]:void 0;var f,m;g&&(g.color&&(h.color=g.color.get(e)),g.size&&(h.size=g.size.get(e)),g.text&&(h.text=g.text.get(e)),h.fixedColor=null===(m=l.config)||void 0===m||null===(f=m.color)||void 0===f?void 0:f.fixed);const I=h.fixedColor,y=I&&i.visualization.getColorByName(I),C=y?QE(y):void 0,E=Object.entries(u);var _;const v=E.length>0&&a?null!==(_=u[a])&&void 0!==_?_:E[0][1]:void 0,B=oD(rD({},u),{locName:v,style:h,colType:A}),w=Bx(B,p,c);return{id:o.startId+e,type:"LineString",geometry:t,properties:rD(oD(rD({},B),{thrId:w}),C&&{defaultColor:C})}}));return u}return[]}));return function(e,n,i){return t.apply(this,arguments)}}(),registerOptionsUI:t=>{t.addCustomEditor({id:"config.style",path:"config.style",name:"Primary metric styles",editor:Ix,settings:{isAuxLayer:!0,displayRotation:!0},defaultValue:sD.style})},defaultOptions:sD}),lD=[Fx,Hx,AD,eD],cD={type:"default",config:{}},uD={id:cD.type,name:"Default base layer",isBaseMap:!0,create:(t,e)=>{var n;const i=null===WE.config||void 0===WE.config||null===(n=WE.config.geomapDefaultBaseLayerConfig)||void 0===n?void 0:n.type;if(i){const t=hD.getIfExists(i);if(console.log("create/?"),!t)throw new Error("Invalid basemap configuraiton on server");return t&&t.create?t.create(WE.config.geomapDefaultBaseLayerConfig,e):{}}return $E&&$E.create?$E.create(t,e):{}}},hD=new e.Registry((()=>[uD,...x_,...lD])),gD=(t,e,n)=>{var i,r,o;(null==t?void 0:t.type)&&!WE.config.geomapDisableCustomBaseLayer||(t=cD);const s=null!==(o=null!==(r=hD.getIfExists(t.type))&&void 0!==r?r:uD)&&void 0!==o?o:{},a=s&&s.create?null==s?void 0:s.create(t,n):{};var A;const l=null!==(A=null==a||null===(i=a.init)||void 0===i?void 0:i.call(a))&&void 0!==A?A:{};"yamaps"!==t.type?e(l):e(null)};function dD(t,e,n,i){let{longitude:r,latitude:o,zoom:s}=t;if((null==e?void 0:e.length)>0){const a=new _l({width:n,height:i}),A=e.reduce(((t,e)=>t.concat(e.features)),[]).map((t=>({type:"Feature",geometry:{type:"Point",coordinates:kE(t.geometry)}}))).filter((t=>t));if(A.length>1){const[t,e,n,i]=function(t){return fE({type:"FeatureCollection",features:t})}(A),l=[[t,e],[n,i]];t&&e&&n&&i&&({longitude:r,latitude:o,zoom:s}=a.fitBounds(l))}r||({longitude:r,latitude:o,zoom:s}=t)}return{longitude:r,latitude:o,zoom:s}}var pD,fD,mD,ID,yD,CD,ED,_D,vD,BD,wD={},bD=[],QD=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,xD=Array.isArray;function DD(t,e){for(var n in e)t[n]=e[n];return t}function SD(t){var e=t.parentNode;e&&e.removeChild(t)}function MD(t,e,n,i,r){var o={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==r?++mD:r,__i:-1,__u:0};return null==r&&null!=fD.vnode&&fD.vnode(o),o}function kD(t){return t.children}function RD(t,e){this.props=t,this.context=e}function ND(t,e){if(null==e)return t.__?ND(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?ND(t):null}function PD(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return PD(t)}}function TD(t){(!t.__d&&(t.__d=!0)&&ID.push(t)&&!LD.__r++||yD!==fD.debounceRendering)&&((yD=fD.debounceRendering)||CD)(LD)}function LD(){var t,e,n,i,r,o,s,a;for(ID.sort(ED);t=ID.shift();)t.__d&&(e=ID.length,i=void 0,o=(r=(n=t).__v).__e,s=[],a=[],n.__P&&((i=DD({},r)).__v=r.__v+1,fD.vnode&&fD.vnode(i),zD(n.__P,i,r,n.__n,n.__P.namespaceURI,32&r.__u?[o]:null,s,null==o?ND(r):o,!!(32&r.__u),a),i.__v=r.__v,i.__.__k[i.__i]=i,JD(s,i,a),i.__e!=o&&PD(i)),ID.length>e&&ID.sort(ED));LD.__r=0}function FD(t,e,n,i,r,o,s,a,A,l,c){var u,h,g,d,p,f=i&&i.__k||bD,m=e.length;for(n.__d=A,OD(n,e,f),A=n.__d,u=0;u<m;u++)null!=(g=n.__k[u])&&"boolean"!=typeof g&&"function"!=typeof g&&(h=-1===g.__i?wD:f[g.__i]||wD,g.__i=u,zD(t,g,h,r,o,s,a,A,l,c),d=g.__e,g.ref&&h.ref!=g.ref&&(h.ref&&HD(h.ref,null,g),c.push(g.ref,g.__c||d,g)),null==p&&null!=d&&(p=d),65536&g.__u||h.__k===g.__k?A=GD(g,A,t):"function"==typeof g.type&&void 0!==g.__d?A=g.__d:d&&(A=d.nextSibling),g.__d=void 0,g.__u&=-196609);n.__d=A,n.__e=p}function OD(t,e,n){var i,r,o,s,a,A=e.length,l=n.length,c=l,u=0;for(t.__k=[],i=0;i<A;i++)s=i+u,null!=(r=t.__k[i]=null==(r=e[i])||"boolean"==typeof r||"function"==typeof r?null:"string"==typeof r||"number"==typeof r||"bigint"==typeof r||r.constructor==String?MD(null,r,null,null,null):xD(r)?MD(kD,{children:r},null,null,null):void 0===r.constructor&&r.__b>0?MD(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r)?(r.__=t,r.__b=t.__b+1,a=UD(r,n,s,c),r.__i=a,o=null,-1!==a&&(c--,(o=n[a])&&(o.__u|=131072)),null==o||null===o.__v?(-1==a&&u--,"function"!=typeof r.type&&(r.__u|=65536)):a!==s&&(a==s-1?u--:a==s+1?u++:a>s?c>A-s?u+=a-s:u--:a<s&&(a==s-u?u-=a-s:u++),a!==i+u&&(r.__u|=65536))):(o=n[s])&&null==o.key&&o.__e&&!(131072&o.__u)&&(o.__e==t.__d&&(t.__d=ND(o)),VD(o,o,!1),n[s]=null,c--);if(c)for(i=0;i<l;i++)null!=(o=n[i])&&!(131072&o.__u)&&(o.__e==t.__d&&(t.__d=ND(o)),VD(o,o))}function GD(t,e,n){var i,r;if("function"==typeof t.type){for(i=t.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=t,e=GD(i[r],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=ND(t)),n.insertBefore(t.__e,e||null),e=t.__e);do{e=e&&e.nextSibling}while(null!=e&&8===e.nodeType);return e}function UD(t,e,n,i){var r=t.key,o=t.type,s=n-1,a=n+1,A=e[n];if(null===A||A&&r==A.key&&o===A.type&&!(131072&A.__u))return n;if(i>(null==A||131072&A.__u?0:1))for(;s>=0||a<e.length;){if(s>=0){if((A=e[s])&&!(131072&A.__u)&&r==A.key&&o===A.type)return s;s--}if(a<e.length){if((A=e[a])&&!(131072&A.__u)&&r==A.key&&o===A.type)return a;a++}}return-1}function jD(t,e,n){"-"===e[0]?t.setProperty(e,null==n?"":n):t[e]=null==n?"":"number"!=typeof n||QD.test(e)?n:n+"px"}function YD(t,e,n,i,r){var o;t:if("style"===e)if("string"==typeof n)t.style.cssText=n;else{if("string"==typeof i&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||jD(t.style,e,"");if(n)for(e in n)i&&n[e]===i[e]||jD(t.style,e,n[e])}else if("o"===e[0]&&"n"===e[1])o=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||"onFocusOut"===e||"onFocusIn"===e?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=n,n?i?n.u=i.u:(n.u=_D,t.addEventListener(e,o?BD:vD,o)):t.removeEventListener(e,o?BD:vD,o);else{if("http://www.w3.org/2000/svg"==r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=e&&"height"!=e&&"href"!=e&&"list"!=e&&"form"!=e&&"tabIndex"!=e&&"download"!=e&&"rowSpan"!=e&&"colSpan"!=e&&"role"!=e&&"popover"!=e&&e in t)try{t[e]=null==n?"":n;break t}catch(t){}"function"==typeof n||(null==n||!1===n&&"-"!==e[4]?t.removeAttribute(e):t.setAttribute(e,"popover"==e&&1==n?"":n))}}function KD(t){return function(e){if(this.l){var n=this.l[e.type+t];if(null==e.t)e.t=_D++;else if(e.t<n.u)return;return n(fD.event?fD.event(e):e)}}}function zD(t,e,n,i,r,o,s,a,A,l){var c,u,h,g,d,p,f,m,I,y,C,E,_,v,B,w,b=e.type;if(void 0!==e.constructor)return null;128&n.__u&&(A=!!(32&n.__u),o=[a=e.__e=n.__e]),(c=fD.__b)&&c(e);t:if("function"==typeof b)try{if(m=e.props,I="prototype"in b&&b.prototype.render,y=(c=b.contextType)&&i[c.__c],C=c?y?y.props.value:c.__:i,n.__c?f=(u=e.__c=n.__c).__=u.__E:(I?e.__c=u=new b(m,C):(e.__c=u=new RD(m,C),u.constructor=b,u.render=WD),y&&y.sub(u),u.props=m,u.state||(u.state={}),u.context=C,u.__n=i,h=u.__d=!0,u.__h=[],u._sb=[]),I&&null==u.__s&&(u.__s=u.state),I&&null!=b.getDerivedStateFromProps&&(u.__s==u.state&&(u.__s=DD({},u.__s)),DD(u.__s,b.getDerivedStateFromProps(m,u.__s))),g=u.props,d=u.state,u.__v=e,h)I&&null==b.getDerivedStateFromProps&&null!=u.componentWillMount&&u.componentWillMount(),I&&null!=u.componentDidMount&&u.__h.push(u.componentDidMount);else{if(I&&null==b.getDerivedStateFromProps&&m!==g&&null!=u.componentWillReceiveProps&&u.componentWillReceiveProps(m,C),!u.__e&&(null!=u.shouldComponentUpdate&&!1===u.shouldComponentUpdate(m,u.__s,C)||e.__v===n.__v)){for(e.__v!==n.__v&&(u.props=m,u.state=u.__s,u.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.forEach((function(t){t&&(t.__=e)})),E=0;E<u._sb.length;E++)u.__h.push(u._sb[E]);u._sb=[],u.__h.length&&s.push(u);break t}null!=u.componentWillUpdate&&u.componentWillUpdate(m,u.__s,C),I&&null!=u.componentDidUpdate&&u.__h.push((function(){u.componentDidUpdate(g,d,p)}))}if(u.context=C,u.props=m,u.__P=t,u.__e=!1,_=fD.__r,v=0,I){for(u.state=u.__s,u.__d=!1,_&&_(e),c=u.render(u.props,u.state,u.context),B=0;B<u._sb.length;B++)u.__h.push(u._sb[B]);u._sb=[]}else do{u.__d=!1,_&&_(e),c=u.render(u.props,u.state,u.context),u.state=u.__s}while(u.__d&&++v<25);u.state=u.__s,null!=u.getChildContext&&(i=DD(DD({},i),u.getChildContext())),I&&!h&&null!=u.getSnapshotBeforeUpdate&&(p=u.getSnapshotBeforeUpdate(g,d)),FD(t,xD(w=null!=c&&c.type===kD&&null==c.key?c.props.children:c)?w:[w],e,n,i,r,o,s,a,A,l),u.base=e.__e,e.__u&=-161,u.__h.length&&s.push(u),f&&(u.__E=u.__=null)}catch(t){if(e.__v=null,A||null!=o){for(e.__u|=A?160:32;a&&8===a.nodeType&&a.nextSibling;)a=a.nextSibling;o[o.indexOf(a)]=null,e.__e=a}else e.__e=n.__e,e.__k=n.__k;fD.__e(t,e,n)}else null==o&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=qD(n.__e,e,n,i,r,o,s,A,l);(c=fD.diffed)&&c(e)}function JD(t,e,n){e.__d=void 0;for(var i=0;i<n.length;i++)HD(n[i],n[++i],n[++i]);fD.__c&&fD.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(t){fD.__e(t,e.__v)}}))}function qD(t,e,n,i,r,o,s,a,A){var l,c,u,h,g,d,p,f=n.props,m=e.props,I=e.type;if("svg"===I?r="http://www.w3.org/2000/svg":"math"===I?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),null!=o)for(l=0;l<o.length;l++)if((g=o[l])&&"setAttribute"in g==!!I&&(I?g.localName===I:3===g.nodeType)){t=g,o[l]=null;break}if(null==t){if(null===I)return document.createTextNode(m);t=document.createElementNS(r,I,m.is&&m),o=null,a=!1}if(null===I)f===m||a&&t.data===m||(t.data=m);else{if(o=o&&pD.call(t.childNodes),f=n.props||wD,!a&&null!=o)for(f={},l=0;l<t.attributes.length;l++)f[(g=t.attributes[l]).name]=g.value;for(l in f)if(g=f[l],"children"==l);else if("dangerouslySetInnerHTML"==l)u=g;else if("key"!==l&&!(l in m)){if("value"==l&&"defaultValue"in m||"checked"==l&&"defaultChecked"in m)continue;YD(t,l,null,g,r)}for(l in m)g=m[l],"children"==l?h=g:"dangerouslySetInnerHTML"==l?c=g:"value"==l?d=g:"checked"==l?p=g:"key"===l||a&&"function"!=typeof g||f[l]===g||YD(t,l,g,f[l],r);if(c)a||u&&(c.__html===u.__html||c.__html===t.innerHTML)||(t.innerHTML=c.__html),e.__k=[];else if(u&&(t.innerHTML=""),FD(t,xD(h)?h:[h],e,n,i,"foreignObject"===I?"http://www.w3.org/1999/xhtml":r,o,s,o?o[0]:n.__k&&ND(n,0),a,A),null!=o)for(l=o.length;l--;)null!=o[l]&&SD(o[l]);a||(l="value",void 0!==d&&(d!==t[l]||"progress"===I&&!d||"option"===I&&d!==f[l])&&YD(t,l,d,f[l],r),l="checked",void 0!==p&&p!==t[l]&&YD(t,l,p,f[l],r))}return t}function HD(t,e,n){try{if("function"==typeof t){var i="function"==typeof t.__u;i&&t.__u(),i&&null==e||(t.__u=t(e))}else t.current=e}catch(t){fD.__e(t,n)}}function VD(t,e,n){var i,r;if(fD.unmount&&fD.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||HD(i,null,e)),null!=(i=t.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(t){fD.__e(t,e)}i.base=i.__P=null}if(i=t.__k)for(r=0;r<i.length;r++)i[r]&&VD(i[r],e,n||"function"!=typeof t.type);n||null==t.__e||SD(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function WD(t,e,n){return this.constructor(t,n)}function ZD(t,e,n){var i,r,o,s;fD.__&&fD.__(t,e),r=(i="function"==typeof n)?null:n&&n.__k||e.__k,o=[],s=[],zD(e,t=(!i&&n||e).__k=function(t,e,n){var i,r,o,s={};for(o in e)"key"==o?i=e[o]:"ref"==o?r=e[o]:s[o]=e[o];if(arguments.length>2&&(s.children=arguments.length>3?pD.call(arguments,2):n),"function"==typeof t&&null!=t.defaultProps)for(o in t.defaultProps)void 0===s[o]&&(s[o]=t.defaultProps[o]);return MD(t,s,i,r,null)}(kD,null,[t]),r||wD,wD,e.namespaceURI,!i&&n?[n]:r?null:e.firstChild?pD.call(e.childNodes):null,o,!i&&n?n:r?r.__e:e.firstChild,i,s),JD(o,t,s)}pD=bD.slice,fD={__e:function(t,e,n,i){for(var r,o,s;e=e.__;)if((r=e.__c)&&!r.__)try{if((o=r.constructor)&&null!=o.getDerivedStateFromError&&(r.setState(o.getDerivedStateFromError(t)),s=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(t,i||{}),s=r.__d),s)return r.__E=r}catch(e){t=e}throw t}},mD=0,RD.prototype.setState=function(t,e){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=DD({},this.state),"function"==typeof t&&(t=t(DD({},n),this.props)),t&&DD(n,t),null!=t&&this.__v&&(e&&this._sb.push(e),TD(this))},RD.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),TD(this))},RD.prototype.render=kD,ID=[],CD="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ED=function(t,e){return t.__v.__b-e.__v.__b},LD.__r=0,_D=0,vD=KD(!1),BD=KD(!0);var XD=0;Array.isArray;function $D(t,e,n,i,r,o){e||(e={});var s,a,A=e;if("ref"in A)for(a in A={},e)"ref"==a?s=e[a]:A[a]=e[a];var l={type:t,props:A,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--XD,__i:-1,__u:0,__source:r,__self:o};if("function"==typeof t&&(s=t.defaultProps))for(a in s)void 0===A[a]&&(A[a]=s[a]);return fD.vnode&&fD.vnode(l),l}const tS=t=>{const{className:e,label:n,onClick:i}=t;return $D("div",{className:"deck-widget-button",children:$D("button",{className:`deck-widget-icon-button ${e}`,type:"button",onClick:i,title:n,children:$D("div",{className:"deck-widget-icon"})})})};class eS{constructor(t){this.id="fullscreen",this.placement="top-left",this.fullscreen=!1,this.id=t.id||"fullscreen",this.placement=t.placement||"top-left",t.enterLabel=t.enterLabel||"Enter Fullscreen",t.exitLabel=t.exitLabel||"Exit Fullscreen",t.style=t.style||{},this.props=t}onAdd({deck:t}){const{style:e,className:n}=this.props,i=document.createElement("div");return i.classList.add("deck-widget","deck-widget-fullscreen"),n&&i.classList.add(n),e&&Object.entries(e).map((([t,e])=>i.style.setProperty(t,e))),this.deck=t,this.element=i,this.update(),document.addEventListener("fullscreenchange",this.onFullscreenChange.bind(this)),i}onRemove(){this.deck=void 0,this.element=void 0,document.removeEventListener("fullscreenchange",this.onFullscreenChange.bind(this))}update(){const{enterLabel:t,exitLabel:e}=this.props,n=this.element;if(!n)return;ZD($D(tS,{onClick:this.handleClick.bind(this),label:this.fullscreen?e:t,className:this.fullscreen?"deck-widget-fullscreen-exit":"deck-widget-fullscreen-enter"}),n)}setProps(t){const e=this.props,n=this.element;n&&(e.className!==t.className&&(e.className&&n.classList.remove(e.className),t.className&&n.classList.add(t.className)),Dl(e.style,t.style,1)||(e.style&&Object.entries(e.style).map((([t])=>n.style.removeProperty(t))),t.style&&Object.entries(t.style).map((([t,e])=>n.style.setProperty(t,e))))),Object.assign(this.props,t)}getContainer(){return this.props.container||this.deck?.getCanvas()?.parentElement}onFullscreenChange(){this.fullscreen!==(document.fullscreenElement===this.getContainer())&&(this.fullscreen=!this.fullscreen),this.update()}async handleClick(){this.fullscreen?await this.exitFullscreen():await this.requestFullscreen(),this.update()}async requestFullscreen(){const t=this.getContainer();t?.requestFullscreen?await t.requestFullscreen({navigationUI:"hide"}):this.togglePseudoFullscreen()}async exitFullscreen(){document.exitFullscreen?await document.exitFullscreen():this.togglePseudoFullscreen()}togglePseudoFullscreen(){this.getContainer()?.classList.toggle("deck-pseudo-fullscreen")}}const nS=Math.PI/180,iS=180/Math.PI,rS=6370972,oS=256;function sS(){const t=4018225162502676e-20,e=Math.PI/180*oS;return{unitsPerMeter:[t,t,t],unitsPerMeter2:[0,0,0],metersPerUnit:[24886.609375,24886.609375,24886.609375],unitsPerDegree:[e,e,t],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/e,1/e,24886.609375]}}class aS extends El{constructor(t={}){const{latitude:e=0,longitude:n=0,zoom:i=0,nearZMultiplier:r=.1,farZMultiplier:o=2,resolution:s=10}=t;let{height:a,altitude:A=1.5}=t;a=a||1,A=Math.max(.75,A);const l=(new PA).lookAt({eye:[0,-A,0],up:[0,0,1]}),c=Math.pow(2,i);l.rotateX(e*nS),l.rotateZ(-n*nS),l.scale(c/a);const u=Math.atan(.5/A),h=512*c/a;super({...t,height:a,viewMatrix:l,longitude:n,latitude:e,zoom:i,distanceScales:sS(),fovyRadians:2*u,focalDistance:A,near:r,far:Math.min(2,1/h+1)*A*o}),this.latitude=e,this.longitude=n,this.resolution=s}get projectionMode(){return oi.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(t={}){const e={targetZ:t.z||0},n=this.unproject([0,this.height/2],e),i=this.unproject([this.width/2,0],e),r=this.unproject([this.width,this.height/2],e),o=this.unproject([this.width/2,this.height],e);return r[0]<this.longitude&&(r[0]+=360),n[0]>this.longitude&&(n[0]-=360),[Math.min(n[0],r[0],i[0],o[0]),Math.min(n[1],r[1],i[1],o[1]),Math.max(n[0],r[0],i[0],o[0]),Math.max(n[1],r[1],i[1],o[1])]}unproject(t,{topLeft:e=!0,targetZ:n}={}){const[i,r,o]=t,s=e?r:this.height-r,{pixelUnprojectionMatrix:a}=this;let A;if(Number.isFinite(o))A=AS(a,[i,s,o,1]);else{const t=AS(a,[i,s,-1,1]),e=AS(a,[i,s,1,1]),r=((n||0)/rS+1)*oS,o=Ni(Mi([],t,e)),l=Ni(t),c=Ni(e),u=4*((4*l*c-(o-l-c)**2)/16)/o;A=function(t,e,n,i){const r=e[0],o=e[1],s=e[2];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t[2]=s+i*(n[2]-s),t}([],t,e,(Math.sqrt(l-u)-Math.sqrt(Math.max(0,r*r-u)))/Math.sqrt(o))}const[l,c,u]=this.unprojectPosition(A);return Number.isFinite(o)?[l,c,u]:Number.isFinite(n)?[l,c,n]:[l,c]}projectPosition(t){const[e,n,i=0]=t,r=e*nS,o=n*nS,s=Math.cos(o),a=(i/rS+1)*oS;return[Math.sin(r)*s*a,-Math.cos(r)*s*a,Math.sin(o)*a]}unprojectPosition(t){const[e,n,i]=t,r=Ri(t),o=Math.asin(i/r);return[Math.atan2(e,-n)*iS,o*iS,(r/oS-1)*rS]}projectFlat(t){return t}unprojectFlat(t){return t}panByPosition(t,e){const n=this.unproject(e);return{longitude:t[0]-n[0]+this.longitude,latitude:t[1]-n[1]+this.latitude}}}function AS(t,e){const n=aA([],e,t);return sA(n,n,1/n[3]),n}class lS{constructor(t){this.id="compass",this.placement="top-left",this.viewId=null,this.viewports={},this.id=t.id||"compass",this.viewId=t.viewId||null,this.placement=t.placement||"top-left",t.transitionDuration=t.transitionDuration||200,t.label=t.label||"Compass",t.style=t.style||{},this.props=t}setProps(t){Object.assign(this.props,t)}onViewportChange(t){this.viewports[t.id]=t,this.update()}onAdd({deck:t}){const{style:e,className:n}=this.props,i=document.createElement("div");return i.classList.add("deck-widget","deck-widget-compass"),n&&i.classList.add(n),e&&Object.entries(e).map((([t,e])=>i.style.setProperty(t,e))),this.deck=t,this.element=i,this.update(),i}getRotation(t){return t instanceof _l?[-t.bearing,t.pitch]:t instanceof aS?[0,Math.max(-80,Math.min(80,t.latitude))]:[0,0]}update(){const t=this.viewId||Object.values(this.viewports)[0]?.id||"default-view",e=this.viewports[t],[n,i]=this.getRotation(e),r=this.element;if(!r)return;const o=$D("div",{className:"deck-widget-button",style:{perspective:100},children:$D("button",{type:"button",onClick:()=>{for(const t of Object.values(this.viewports))this.handleCompassReset(t)},label:this.props.label,style:{transform:`rotateX(${i}deg)`},children:$D("svg",{fill:"none",width:"100%",height:"100%",viewBox:"0 0 26 26",children:$D("g",{transform:`rotate(${n},13,13)`,children:[$D("path",{d:"M10 13.0001L12.9999 5L15.9997 13.0001H10Z",fill:"var(--icon-compass-north-color, #F05C44)"}),$D("path",{d:"M16.0002 12.9999L13.0004 21L10.0005 12.9999H16.0002Z",fill:"var(--icon-compass-south-color, #C2C2CC)"})]})})})});ZD(o,r)}onRemove(){this.deck=void 0,this.element=void 0}handleCompassReset(t){const e=this.viewId||t.id||"default-view";if(t instanceof _l){const n={...t,bearing:0,...0===this.getRotation(t)[0]?{pitch:0}:{},transitionDuration:this.props.transitionDuration,transitionInterpolator:new If};this.deck._onViewStateChange({viewId:e,viewState:n,interactionState:{}})}}}var cS=g(5292),uS=g.n(cS),hS=g(9893),gS=g.n(hS),dS=g(9383),pS=g.n(dS),fS=g(6884),mS=g.n(fS),IS=g(9088),yS=g.n(IS),CS=g(7997),ES=g.n(CS),_S=g(6924),vS={};vS.styleTagTransform=ES(),vS.setAttributes=mS(),vS.insert=pS().bind(null,"head"),vS.domAPI=gS(),vS.insertStyleElement=yS();uS()(_S.A,vS);_S.A&&_S.A.locals&&_S.A.locals;if(!r.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!function(t,e,n){return FC((function(){var i=IC(t,n)[mm];null!=e||(e=function(t){return em(t,gm)||qf(t,gm,lm({},t[gm])),t[gm]}(t)),$f(e).forEach((function(t){return i.make_(t,e[t])}))})),t})throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function BS(t){t()}function wS(t){return By(t)}var bS=!1;function QS(){return bS}var xS,DS,SS=function(){function t(t){var e=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(t){void 0===t&&(t=1e4),clearTimeout(e.sweepTimeout),e.sweepTimeout=void 0;var n=Date.now();e.registrations.forEach((function(i,r){n-i.registeredAt>=t&&(e.finalize(i.value),e.registrations.delete(r))})),e.registrations.size>0&&e.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){e.sweep(0)}})}return Object.defineProperty(t.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(t,e,n){this.registrations.set(n,{value:e,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(t.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.registrations.delete(t)}}),Object.defineProperty(t.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){void 0===this.sweepTimeout&&(this.sweepTimeout=setTimeout(this.sweep,1e4))}}),t}(),MS=new("undefined"!=typeof FinalizationRegistry?FinalizationRegistry:SS)((function(t){var e;null===(e=t.reaction)||void 0===e||e.dispose(),t.reaction=null})),kS=g(3676);function RS(t){t.reaction=new VI("observer".concat(t.name),(function(){var e;t.stateVersion=Symbol(),null===(e=t.onStoreChange)||void 0===e||e.call(t)}))}function NS(t,e){if(void 0===e&&(e="observed"),QS())return t();var n=o().useRef(null);if(!n.current){var i={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:e,subscribe:function(t){return MS.unregister(i),i.onStoreChange=t,i.reaction||(RS(i),i.stateVersion=Symbol()),function(){var t;i.onStoreChange=null,null===(t=i.reaction)||void 0===t||t.dispose(),i.reaction=null}},getSnapshot:function(){return i.stateVersion}};n.current=i}var r,s,a=n.current;if(a.reaction||(RS(a),MS.register(n,a,a)),o().useDebugValue(a.reaction,wS),(0,kS.useSyncExternalStore)(a.subscribe,a.getSnapshot,a.getSnapshot),a.reaction.track((function(){try{r=t()}catch(t){s=t}})),s)throw s;return r}var PS="function"==typeof Symbol&&Symbol.for,TS=null!==(DS=null===(xS=Object.getOwnPropertyDescriptor((function(){}),"name"))||void 0===xS?void 0:xS.configurable)&&void 0!==DS&&DS,LS=PS?Symbol.for("react.forward_ref"):"function"==typeof r.forwardRef&&(0,r.forwardRef)((function(t){return null})).$$typeof,FS=PS?Symbol.for("react.memo"):"function"==typeof r.memo&&(0,r.memo)((function(t){return null})).$$typeof;function OS(t,e){var n;if(FS&&t.$$typeof===FS)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");if(QS())return t;var i=null!==(n=null==e?void 0:e.forwardRef)&&void 0!==n&&n,o=t,s=t.displayName||t.name;if(LS&&t.$$typeof===LS&&(i=!0,"function"!=typeof(o=t.render)))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var a,A,l=function(t,e){return NS((function(){return o(t,e)}),s)};return l.displayName=t.displayName,TS&&Object.defineProperty(l,"name",{value:t.name,writable:!0,configurable:!0}),t.contextTypes&&(l.contextTypes=t.contextTypes),i&&(l=(0,r.forwardRef)(l)),l=(0,r.memo)(l),a=t,A=l,Object.keys(a).forEach((function(t){US[t]||Object.defineProperty(A,t,Object.getOwnPropertyDescriptor(a,t))})),l}var GS,US={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};(function(t){t||(t=BS),_y({reactionScheduler:t})})(nE.unstable_batchedUpdates);GS=MS.finalizeAllImmediately;let jS=1,YS=1;class KS{time=0;channels=new Map;animations=new Map;playing=!1;lastEngineTime=-1;constructor(){}addChannel(t){const{delay:e=0,duration:n=Number.POSITIVE_INFINITY,rate:i=1,repeat:r=1}=t,o=jS++,s={time:0,delay:e,duration:n,rate:i,repeat:r};return this._setChannelTime(s,this.time),this.channels.set(o,s),o}removeChannel(t){this.channels.delete(t);for(const[e,n]of this.animations)n.channel===t&&this.detachAnimation(e)}isFinished(t){const e=this.channels.get(t);return void 0!==e&&this.time>=e.delay+e.duration*e.repeat}getTime(t){if(void 0===t)return this.time;const e=this.channels.get(t);return void 0===e?-1:e.time}setTime(t){this.time=Math.max(0,t);const e=this.channels.values();for(const t of e)this._setChannelTime(t,this.time);const n=this.animations.values();for(const t of n){const{animation:e,channel:n}=t;e.setTime(this.getTime(n))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(t,e){const n=YS++;return this.animations.set(n,{animation:t,channel:e}),t.setTime(this.getTime(e)),n}detachAnimation(t){this.animations.delete(t)}update(t){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}_setChannelTime(t,e){const n=e-t.delay;n>=t.duration*t.repeat?t.time=t.duration*t.rate:(t.time=Math.max(0,n)%t.duration,t.time*=t.rate)}}const zS=[Ou],JS=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function qS(){const t=yo.getDefaultShaderAssembler();for(const e of zS)t.addDefaultModule(e);for(const e of JS)t.addShaderHook(e);return t}var HS=g(8538);function VS(){let t;if("undefined"!=typeof window&&window.performance)t=window.performance.now();else if(void 0!==HS&&HS.hrtime){const e=HS.hrtime();t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}class WS{constructor(t,e){this.sampleSize=1,this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this.name=t,this.type=e,this.reset()}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}setSampleSize(t){return this.sampleSize=t,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(t){return this._count+=t,this._samples++,this._checkSampling(),this}subtractCount(t){return this._count-=t,this._samples++,this._checkSampling(),this}addTime(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=VS(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(VS()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class ZS{constructor(t){this.stats={},this.id=t.id,this.stats={},this._initializeStats(t.stats),Object.seal(this)}get(t,e="count"){return this._getOrCreate({name:t,type:e})}get size(){return Object.keys(this.stats).length}reset(){for(const t of Object.values(this.stats))t.reset();return this}forEach(t){for(const e of Object.values(this.stats))t(e)}getTable(){const t={};return this.forEach((e=>{t[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}})),t}_initializeStats(t=[]){t.forEach((t=>this._getOrCreate(t)))}_getOrCreate(t){const{name:e,type:n}=t;let i=this.stats[e];return i||(i=t instanceof WS?t:new WS(e,n),this.stats[e]=i),i}}class XS{constructor(t,e,n){this._loadCount=0,this._subscribers=new Set,this.id=t,this.context=n,this.setData(e)}subscribe(t){this._subscribers.add(t)}unsubscribe(t){this._subscribers.delete(t)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then((()=>this.getData()))}setData(t,e){if(t===this._data&&!e)return;this._data=t;const n=++this._loadCount;let i=t;"string"==typeof t&&(i=Bu(t)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then((t=>{this._loadCount===n&&(this.isLoaded=!0,this._error=void 0,this._content=t)})).catch((t=>{this._loadCount===n&&(this.isLoaded=!0,this._error=t||!0)}))):(this.isLoaded=!0,this._error=void 0,this._content=t);for(const t of this._subscribers)t.onChange(this.getData())}}class $S{constructor(t){this.protocol=t.protocol||"resource://",this._context={device:t.device,gl:t.device?.gl,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(t){return!!t.startsWith(this.protocol)||t in this._resources}add({resourceId:t,data:e,forceUpdate:n=!1,persistent:i=!0}){let r=this._resources[t];r?r.setData(e,n):(r=new XS(t,e,this._context),this._resources[t]=r),r.persistent=i}remove(t){const e=this._resources[t];e&&(e.delete(),delete this._resources[t])}unsubscribe({consumerId:t}){const e=this._consumers[t];if(e){for(const t in e){const n=e[t],i=this._resources[n.resourceId];i&&i.unsubscribe(n)}delete this._consumers[t],this.prune()}}subscribe({resourceId:t,onChange:e,consumerId:n,requestId:i="default"}){const{_resources:r,protocol:o}=this;t.startsWith(o)&&(r[t=t.replace(o,"")]||this.add({resourceId:t,data:null,persistent:!1}));const s=r[t];if(this._track(n,i,s,e),s)return s.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout((()=>this._prune()),0))}finalize(){for(const t in this._resources)this._resources[t].delete()}_track(t,e,n,i){const r=this._consumers,o=r[t]=r[t]||{};let s=o[e];const a=s&&s.resourceId&&this._resources[s.resourceId];a&&(a.unsubscribe(s),this.prune()),n&&(s?(s.onChange=i,s.resourceId=n.id):s={onChange:i,resourceId:n.id},o[e]=s,n.subscribe(s))}_prune(){this._pruneRequest=null;for(const t of Object.keys(this._resources)){const e=this._resources[t];e.persistent||e.inUse()||(e.delete(),delete this._resources[t])}}}class tM{constructor(t,e){this._lastRenderedLayers=[],this._needsRedraw=!1,this._needsUpdate=!1,this._nextLayers=null,this._debug=!1,this._defaultShaderModulesChanged=!1,this.activateViewport=t=>{hr("layerManager.activateViewport",this,t),t&&(this.context.viewport=t)};const{deck:n,stats:i,viewport:r,timeline:o}=e||{};this.layers=[],this.resourceManager=new $S({device:t,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,device:t,gl:t?.gl,deck:n,shaderAssembler:qS(),defaultShaderModules:[],renderPass:void 0,stats:i||new ZS({id:"deck.gl"}),viewport:r||new El({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new KS,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const t of this.layers)this._finalizeLayer(t)}needsRedraw(t={clearRedrawFlags:!1}){let e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);for(const n of this.layers){const i=n.getNeedsRedraw(t);e=e||i}return e}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._defaultShaderModulesChanged?"shader modules changed":this._needsUpdate}setNeedsRedraw(t){this._needsRedraw=this._needsRedraw||t}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t}getLayers({layerIds:t}={}){return t?this.layers.filter((e=>t.find((t=>0===e.id.indexOf(t))))):this.layers}setProps(t){"debug"in t&&(this._debug=t.debug),"userData"in t&&(this.context.userData=t.userData),"layers"in t&&(this._nextLayers=t.layers),"onError"in t&&(this.context.onError=t.onError)}setLayers(t,e){hr("layerManager.setLayers",this,e,t),this._lastRenderedLayers=t;const n=tr(t,Boolean);for(const t of n)t.context=this.context;this._updateLayers(this.layers,n)}updateLayers(){const t=this.needsUpdate();t&&(this.setNeedsRedraw(`updating layers: ${t}`),this.setLayers(this._nextLayers||this._lastRenderedLayers,t)),this._nextLayers=null}addDefaultShaderModule(t){const{defaultShaderModules:e}=this.context;e.find((e=>e.name===t.name))||(e.push(t),this._defaultShaderModulesChanged=!0)}removeDefaultShaderModule(t){const{defaultShaderModules:e}=this.context,n=e.findIndex((e=>e.name===t.name));n>=0&&(e.splice(n,1),this._defaultShaderModulesChanged=!0)}_handleError(t,e,n){n.raiseError(e,`${t} of ${n}`)}_updateLayers(t,e){const n={};for(const e of t)n[e.id]?ii.warn(`Multiple old layers with same id ${e.id}`)():n[e.id]=e;if(this._defaultShaderModulesChanged){for(const e of t)e.setNeedsUpdate(),e.setChangeFlags({extensionsChanged:!0});this._defaultShaderModulesChanged=!1}const i=[];this._updateSublayersRecursively(e,n,i),this._finalizeOldLayers(n);let r=!1;for(const t of i)if(t.hasUniformTransition()){r=`Uniform transition in ${t}`;break}this._needsUpdate=r,this.layers=i}_updateSublayersRecursively(t,e,n){for(const i of t){i.context=this.context;const t=e[i.id];null===t&&ii.warn(`Multiple new layers with same id ${i.id}`)(),e[i.id]=null;let r=null;try{this._debug&&t!==i&&i.validateProps(),t?(this._transferLayerState(t,i),this._updateLayer(i)):this._initializeLayer(i),n.push(i),r=i.isComposite?i.getSubLayers():null}catch(t){this._handleError("matching",t,i)}r&&this._updateSublayersRecursively(r,e,n)}}_finalizeOldLayers(t){for(const e in t){const n=t[e];n&&this._finalizeLayer(n)}}_initializeLayer(t){try{t._initialize(),t.lifecycle=ja}catch(e){this._handleError("initialization",e,t)}}_transferLayerState(t,e){e._transferState(t),e.lifecycle=Ua,e!==t&&(t.lifecycle=Ya)}_updateLayer(t){try{t._update()}catch(e){this._handleError("update",e,t)}}_finalizeLayer(t){this._needsRedraw=this._needsRedraw||`finalized ${t}`,t.lifecycle=Ka;try{t._finalize(),t.lifecycle=za}catch(e){this._handleError("finalization",e,t)}}}class eM{constructor(t){this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=t.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractionStateChange:t.onInteractionStateChange},Object.seal(this),this.setProps(t)}finalize(){for(const t in this.controllers){const e=this.controllers[t];e&&e.finalize()}this.controllers={}}needsRedraw(t={clearRedrawFlags:!1}){const e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}updateViewStates(){for(const t in this.controllers){const e=this.controllers[t];e&&e.updateTransition()}}getViewports(t){return t?this._viewports.filter((e=>e.containsPixel(t))):this._viewports}getViews(){const t={};return this.views.forEach((e=>{t[e.id]=e})),t}getView(t){return this.views.find((e=>e.id===t))}getViewState(t){const e="string"==typeof t?this.getView(t):t,n=e&&this.viewState[e.getViewStateId()]||this.viewState;return e?e.filterViewState(n):n}getViewport(t){return this._viewportMap[t]}unproject(t,e){const n=this.getViewports(),i={x:t[0],y:t[1]};for(let r=n.length-1;r>=0;--r){const o=n[r];if(o.containsPixel(i)){const n=t.slice();return n[0]-=o.x,n[1]-=o.y,o.unproject(n,e)}}return null}setProps(t){t.views&&this._setViews(t.views),t.viewState&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(t,e){t===this.width&&e===this.height||(this.width=t,this.height=e,this.setNeedsUpdate("Size changed"))}_setViews(t){t=tr(t,Boolean);this._diffViews(t,this.views)&&this.setNeedsUpdate("views changed"),this.views=t}_setViewState(t){if(t){!Dl(t,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=t}else ii.warn("missing `viewState` or `initialViewState`")()}_createController(t,e){return new(0,e.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._eventCallbacks.onViewStateChange,onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:e=>this.getView(t.id)?.makeViewport({viewState:e,width:this.width,height:this.height})})}_updateController(t,e,n,i){const r=t.controller;if(r&&n){const o={...e,...r,id:t.id,x:n.x,y:n.y,width:n.width,height:n.height};return i&&i.constructor===r.type||(i=this._createController(t,o)),i&&i.setProps(o),i}return null}_rebuildViewports(){const{views:t}=this,e=this.controllers;this._viewports=[],this.controllers={};let n=!1;for(let i=t.length;i--;){const r=t[i],o=this.getViewState(r),s=r.makeViewport({viewState:o,width:this.width,height:this.height});let a=e[r.id];const A=Boolean(r.controller);A&&!a&&(n=!0),!n&&A||!a||(a.finalize(),a=null),this.controllers[r.id]=this._updateController(r,o,s,a),s&&this._viewports.unshift(s)}for(const t in e){const n=e[t];n&&!this.controllers[t]&&n.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach((t=>{t.id&&(this._viewportMap[t.id]=this._viewportMap[t.id]||t)}))}_diffViews(t,e){return t.length!==e.length||t.some(((n,i)=>!t[i].equals(e[i])))}}const nM=/([0-9]+\.?[0-9]*)(%|px)/;function iM(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=nM.exec(t);if(e&&e.length>=3){const t="%"===e[2],n=parseFloat(e[1]);return{position:t?n/100:n,relative:t}}default:throw new Error(`Could not parse position string ${t}`)}}function rM(t,e){return t.relative?Math.round(t.position*e):t.position}class oM{constructor(t){const{id:e,x:n=0,y:i=0,width:r="100%",height:o="100%",padding:s=null}=t;this.id=e||this.constructor.displayName||"view",this.props={...t,id:this.id},this._x=iM(n),this._y=iM(i),this._width=iM(r),this._height=iM(o),this._padding=s&&{left:iM(s.left||0),right:iM(s.right||0),top:iM(s.top||0),bottom:iM(s.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(t){return this===t||this.ViewportType===t.ViewportType&&Dl(this.props,t.props,2)}makeViewport({width:t,height:e,viewState:n}){n=this.filterViewState(n);const i=this.getDimensions({width:t,height:e});return i.height&&i.width?new this.ViewportType({...n,...this.props,...i}):null}getViewStateId(){const{viewState:t}=this.props;return"string"==typeof t?t:t?.id||this.id}filterViewState(t){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const e={...t};for(const t in this.props.viewState)"id"!==t&&(e[t]=this.props.viewState[t]);return e}return t}getDimensions({width:t,height:e}){const n={x:rM(this._x,t),y:rM(this._y,e),width:rM(this._width,t),height:rM(this._height,e)};return this._padding&&(n.padding={left:rM(this._padding.left,t),top:rM(this._padding.top,e),right:rM(this._padding.right,t),bottom:rM(this._padding.bottom,e)}),n}get controller(){const t=this.props.controller;return t?!0===t?{type:this.ControllerType}:"function"==typeof t?{type:t}:{type:this.ControllerType,...t}:null}}const sM=()=>{},aM=2,AM=3,lM=t=>t,cM=1;class uM{constructor(t){this._onTransitionUpdate=t=>{const{time:e,settings:{interpolator:n,startProps:i,endProps:r,duration:o,easing:s}}=t,a=s(e/o),A=n.interpolateProps(i,r,a);this.propsInTransition=this.getControllerState({...this.props,...A}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})},this.getControllerState=t.getControllerState,this.propsInTransition=null,this.transition=new Ba(t.timeline),this.onViewStateChange=t.onViewStateChange||sM,this.onStateChange=t.onStateChange||sM}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(t){let e=!1;const n=this.props;if(this.props=t,!n||this._shouldIgnoreViewportChange(n,t))return!1;if(this._isTransitionEnabled(t)){let i=n;if(this.transition.inProgress){const{interruption:t,endProps:e}=this.transition.settings;i={...n,...t===aM?e:this.propsInTransition||n}}this._triggerTransition(i,t),e=!0}else this.transition.cancel();return e}updateTransition(){this.transition.update()}_isTransitionEnabled(t){const{transitionDuration:e,transitionInterpolator:n}=t;return(e>0||"auto"===e)&&Boolean(n)}_isUpdateDueToCurrentTransition(t){return!(!this.transition.inProgress||!this.propsInTransition)&&this.transition.settings.interpolator.arePropsEqual(t,this.propsInTransition)}_shouldIgnoreViewportChange(t,e){if(this.transition.inProgress){return this.transition.settings.interruption===AM||this._isUpdateDueToCurrentTransition(e)}return!this._isTransitionEnabled(e)||e.transitionInterpolator.arePropsEqual(t,e)}_triggerTransition(t,e){const n=this.getControllerState(t),i=this.getControllerState(e).shortestPathFrom(n),r=e.transitionInterpolator,o=r.getDuration?r.getDuration(t,e):e.transitionDuration;if(0===o)return;const s=r.initializeProps(t,i);this.propsInTransition={};const a={duration:o,easing:e.transitionEasing||lM,interpolator:r,interruption:e.transitionInterruption||cM,startProps:s.start,endProps:s.end,onStart:e.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(e.onTransitionInterrupt),onEnd:this._onTransitionEnd(e.onTransitionEnd)};this.transition.start(a),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(t){return e=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),t?.(e)}}}const hM=["longitude","latitude","zoom","bearing","pitch"],gM=["longitude","latitude","zoom"];class dM extends pf{constructor(t={}){const e=Array.isArray(t)?t:t.transitionProps,n=Array.isArray(t)?{}:t;n.transitionProps=Array.isArray(e)?{compare:e,required:e}:e||{compare:hM,required:gM},super(n.transitionProps),this.opts=n}initializeProps(t,e){const n=super.initializeProps(t,e),{makeViewport:i,around:r}=this.opts;if(i&&r){const o=i(t),s=i(e),a=o.unproject(r);n.start.around=r,Object.assign(n.end,{around:s.project(a),aroundPosition:a,width:e.width,height:e.height})}return n}interpolateProps(t,e,n){const i={};for(const r of this._propsToExtract)i[r]=yi(t[r]||0,e[r]||0,n);if(e.aroundPosition&&this.opts.makeViewport){const r=this.opts.makeViewport({...e,...i});Object.assign(i,r.panByPosition(e.aroundPosition,yi(t.around,e.around,n)))}return i}}const pM={transitionDuration:0},fM=t=>1-(1-t)*(1-t),mM=["wheel"],IM=["panstart","panmove","panend"],yM=["pinchstart","pinchmove","pinchend"],CM=["tripanstart","tripanmove","tripanend"],EM=["doubletap"],_M=["keydown"],vM={};class BM{constructor(t){this.state={},this._events={},this._interactionState={isDragging:!1},this._customEvents=[],this._eventStartBlocked=null,this._panMove=!1,this.invertPan=!1,this.dragMode="rotate",this.inertia=0,this.scrollZoom=!0,this.dragPan=!0,this.dragRotate=!0,this.doubleClickZoom=!0,this.touchZoom=!0,this.touchRotate=!1,this.keyboard=!0,this.transitionManager=new uM({...t,getControllerState:t=>new this.ControllerState(t),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=t.eventManager,this.onViewStateChange=t.onViewStateChange||(()=>{}),this.onStateChange=t.onStateChange||(()=>{}),this.makeViewport=t.makeViewport}set events(t){this.toggleEvents(this._customEvents,!1),this.toggleEvents(t,!0),this._customEvents=t,this.props&&this.setProps(this.props)}finalize(){for(const t in this._events)this._events[t]&&this.eventManager?.off(t,this.handleEvent);this.transitionManager.finalize()}handleEvent(t){this._controllerState=void 0;const e=this._eventStartBlocked;switch(t.type){case"panstart":return!e&&this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return!e&&this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"tripanstart":return!e&&this._onTriplePanStart(t);case"tripanmove":return this._onTriplePan(t);case"tripanend":return this._onTriplePanEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(t){const{x:e,y:n}=this.props,{offsetCenter:i}=t;return[i.x-e,i.y-n]}isPointInBounds(t,e){const{width:n,height:i}=this.props;if(e&&e.handled)return!1;const r=t[0]>=0&&t[0]<=n&&t[1]>=0&&t[1]<=i;return r&&e&&e.stopPropagation(),r}isFunctionKeyPressed(t){const{srcEvent:e}=t;return Boolean(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(t){const e=setTimeout((()=>{this._eventStartBlocked===e&&(this._eventStartBlocked=null)}),t);this._eventStartBlocked=e}setProps(t){t.dragMode&&(this.dragMode=t.dragMode),this.props=t,"transitionInterpolator"in t||(t.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(t);const{inertia:e}=t;this.inertia=Number.isFinite(e)?e:!0===e?300:0;const{scrollZoom:n=!0,dragPan:i=!0,dragRotate:r=!0,doubleClickZoom:o=!0,touchZoom:s=!0,touchRotate:a=!1,keyboard:A=!0}=t,l=Boolean(this.onViewStateChange);this.toggleEvents(mM,l&&n),this.toggleEvents(IM,l),this.toggleEvents(yM,l&&(s||a)),this.toggleEvents(CM,l&&a),this.toggleEvents(EM,l&&o),this.toggleEvents(_M,l&&A),this.scrollZoom=n,this.dragPan=i,this.dragRotate=r,this.doubleClickZoom=o,this.touchZoom=s,this.touchRotate=a,this.keyboard=A}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(t,e){this.eventManager&&t.forEach((t=>{this._events[t]!==e&&(this._events[t]=e,e?this.eventManager.on(t,this.handleEvent):this.eventManager.off(t,this.handleEvent))}))}updateViewport(t,e=null,n={}){const i={...t.getViewportProps(),...e},r=this.controllerState!==t;if(this.state=t.getState(),this._setInteractionState(n),r){const t=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:t,viewId:this.props.id})}}_onTransition(t){this.onViewStateChange({...t,interactionState:this._interactionState,viewId:this.props.id})}_setInteractionState(t){Object.assign(this._interactionState,t),this.onStateChange(this._interactionState)}_onPanStart(t){const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;let n=this.isFunctionKeyPressed(t)||t.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(n=!n);const i=this.controllerState[n?"panStart":"rotateStart"]({pos:e});return this._panMove=n,this.updateViewport(i,pM,{isDragging:!0}),!0}_onPan(t){return!!this.isDragging()&&(this._panMove?this._onPanMove(t):this._onPanRotate(t))}_onPanEnd(t){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(t):this._onPanRotateEnd(t))}_onPanMove(t){if(!this.dragPan)return!1;const e=this.getCenter(t),n=this.controllerState.pan({pos:e});return this.updateViewport(n,pM,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(t){const{inertia:e}=this;if(this.dragPan&&e&&t.velocity){const n=this.getCenter(t),i=[n[0]+t.velocityX*e/2,n[1]+t.velocityY*e/2],r=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(r,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:fM},{isDragging:!1,isPanning:!0})}else{const t=this.controllerState.panEnd();this.updateViewport(t,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(t){if(!this.dragRotate)return!1;const e=this.getCenter(t),n=this.controllerState.rotate({pos:e});return this.updateViewport(n,pM,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(t){const{inertia:e}=this;if(this.dragRotate&&e&&t.velocity){const n=this.getCenter(t),i=[n[0]+t.velocityX*e/2,n[1]+t.velocityY*e/2],r=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(r,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:fM},{isDragging:!1,isRotating:!0})}else{const t=this.controllerState.rotateEnd();this.updateViewport(t,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(t){if(!this.scrollZoom)return!1;const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;t.srcEvent.preventDefault();const{speed:n=.01,smooth:i=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:r}=t;let o=2/(1+Math.exp(-Math.abs(r*n)));r<0&&0!==o&&(o=1/o);const s=this.controllerState.zoom({pos:e,scale:o});return this.updateViewport(s,{...this._getTransitionProps({around:e}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(t){const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const n=this.controllerState.rotateStart({pos:e});return this.updateViewport(n,pM,{isDragging:!0}),!0}_onTriplePan(t){if(!this.touchRotate)return!1;if(!this.isDragging())return!1;const e=this.getCenter(t);e[0]-=t.deltaX;const n=this.controllerState.rotate({pos:e});return this.updateViewport(n,pM,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(t){if(!this.isDragging())return!1;const{inertia:e}=this;if(this.touchRotate&&e&&t.velocityY){const n=this.getCenter(t),i=[n[0],n[1]+=t.velocityY*e/2],r=this.controllerState.rotate({pos:i});this.updateViewport(r,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:fM},{isDragging:!1,isRotating:!0}),this.blockEvents(e)}else{const t=this.controllerState.rotateEnd();this.updateViewport(t,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(t){const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const n=this.controllerState.zoomStart({pos:e}).rotateStart({pos:e});return vM._startPinchRotation=t.rotation,vM._lastPinchEvent=t,this.updateViewport(n,pM,{isDragging:!0}),!0}_onPinch(t){if(!this.touchZoom&&!this.touchRotate)return!1;if(!this.isDragging())return!1;let e=this.controllerState;if(this.touchZoom){const{scale:n}=t,i=this.getCenter(t);e=e.zoom({pos:i,scale:n})}if(this.touchRotate){const{rotation:n}=t;e=e.rotate({deltaAngleX:vM._startPinchRotation-n})}return this.updateViewport(e,pM,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),vM._lastPinchEvent=t,!0}_onPinchEnd(t){if(!this.isDragging())return!1;const{inertia:e}=this,{_lastPinchEvent:n}=vM;if(this.touchZoom&&e&&n&&t.scale!==n.scale){const i=this.getCenter(t);let r=this.controllerState.rotateEnd();const o=Math.log2(t.scale),s=(o-Math.log2(n.scale))/(t.deltaTime-n.deltaTime),a=Math.pow(2,o+s*e/2);r=r.zoom({pos:i,scale:a}).zoomEnd(),this.updateViewport(r,{...this._getTransitionProps({around:i}),transitionDuration:e,transitionEasing:fM},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(e)}else{const t=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(t,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return vM._startPinchRotation=null,vM._lastPinchEvent=null,!0}_onDoubleTap(t){if(!this.doubleClickZoom)return!1;const e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;const n=this.isFunctionKeyPressed(t),i=this.controllerState.zoom({pos:e,scale:n?.5:2});return this.updateViewport(i,this._getTransitionProps({around:e}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(t){if(!this.keyboard)return!1;const e=this.isFunctionKeyPressed(t),{zoomSpeed:n,moveSpeed:i,rotateSpeedX:r,rotateSpeedY:o}=!0===this.keyboard?{}:this.keyboard,{controllerState:s}=this;let a;const A={};switch(t.srcEvent.code){case"Minus":a=e?s.zoomOut(n).zoomOut(n):s.zoomOut(n),A.isZooming=!0;break;case"Equal":a=e?s.zoomIn(n).zoomIn(n):s.zoomIn(n),A.isZooming=!0;break;case"ArrowLeft":e?(a=s.rotateLeft(r),A.isRotating=!0):(a=s.moveLeft(i),A.isPanning=!0);break;case"ArrowRight":e?(a=s.rotateRight(r),A.isRotating=!0):(a=s.moveRight(i),A.isPanning=!0);break;case"ArrowUp":e?(a=s.rotateUp(o),A.isRotating=!0):(a=s.moveUp(i),A.isPanning=!0);break;case"ArrowDown":e?(a=s.rotateDown(o),A.isRotating=!0):(a=s.moveDown(i),A.isPanning=!0);break;default:return!1}return this.updateViewport(a,this._getTransitionProps(),A),!0}_getTransitionProps(t){const{transition:e}=this;return e&&e.transitionInterpolator?t?{...e,transitionInterpolator:new dM({...t,...e.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:e:pM}}class wM{constructor(t,e){this._viewportProps=this.applyConstraints(t),this._state=e}getViewportProps(){return this._viewportProps}getState(){return this._state}}class bM extends wM{constructor(t){const{width:e,height:n,latitude:i,longitude:r,zoom:o,bearing:s=0,pitch:a=0,altitude:A=1.5,position:l=[0,0,0],maxZoom:c=20,minZoom:u=0,maxPitch:h=60,minPitch:g=0,startPanLngLat:d,startZoomLngLat:p,startRotatePos:f,startBearing:m,startPitch:I,startZoom:y,normalize:C=!0}=t;Hi(Number.isFinite(r)),Hi(Number.isFinite(i)),Hi(Number.isFinite(o)),super({width:e,height:n,latitude:i,longitude:r,zoom:o,bearing:s,pitch:a,altitude:A,maxZoom:c,minZoom:u,maxPitch:h,minPitch:g,normalize:C,position:l},{startPanLngLat:d,startZoomLngLat:p,startRotatePos:f,startBearing:m,startPitch:I,startZoom:y}),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanLngLat:this._unproject(t)})}pan({pos:t,startPos:e}){const n=this.getState().startPanLngLat||this._unproject(e);if(!n)return this;const i=this.makeViewport(this.getViewportProps()).panByPosition(n,t);return this._getUpdatedState(i)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:t,deltaAngleX:e=0,deltaAngleY:n=0}){const{startRotatePos:i,startBearing:r,startPitch:o}=this.getState();if(!i||void 0===r||void 0===o)return this;let s;return s=t?this._getNewRotation(t,i,o,r):{bearing:r+e,pitch:o+n},this._getUpdatedState(s)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:t}){return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:e,scale:n}){let{startZoom:i,startZoomLngLat:r}=this.getState();if(r||(i=this.getViewportProps().zoom,r=this._unproject(e)||this._unproject(t)),!r)return this;const{maxZoom:o,minZoom:s}=this.getViewportProps();let a=i+Math.log2(n);a=Ii(a,s,o);const A=this.makeViewport({...this.getViewportProps(),zoom:a});return this._getUpdatedState({zoom:a,...A.panByPosition(r,t)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(t=2){return this._zoomFromCenter(t)}zoomOut(t=2){return this._zoomFromCenter(1/t)}moveLeft(t=100){return this._panFromCenter([t,0])}moveRight(t=100){return this._panFromCenter([-t,0])}moveUp(t=100){return this._panFromCenter([0,t])}moveDown(t=100){return this._panFromCenter([0,-t])}rotateLeft(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-t})}rotateRight(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+t})}rotateUp(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+t})}rotateDown(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-t})}shortestPathFrom(t){const e=t.getViewportProps(),n={...this.getViewportProps()},{bearing:i,longitude:r}=n;return Math.abs(i-e.bearing)>180&&(n.bearing=i<0?i+360:i-360),Math.abs(r-e.longitude)>180&&(n.longitude=r<0?r+360:r-360),n}applyConstraints(t){const{maxZoom:e,minZoom:n,zoom:i}=t;t.zoom=Ii(i,n,e);const{maxPitch:r,minPitch:o,pitch:s}=t;t.pitch=Ii(s,o,r);const{normalize:a=!0}=t;return a&&Object.assign(t,function(t){const{width:e,height:n,pitch:i=0}=t;let{longitude:r,latitude:o,zoom:s,bearing:a=0}=t;(r<-180||r>180)&&(r=GA(r+180,360)-180),(a<-180||a>180)&&(a=GA(a+180,360)-180);const A=jA(n/512);if(s<=A)s=A,o=0;else{const t=n/2/Math.pow(2,s),e=el([0,t])[1];if(o<e)o=e;else{const e=el([0,512-t])[1];o>e&&(o=e)}}return{width:e,height:n,longitude:r,latitude:o,zoom:s,pitch:i,bearing:a}}(t)),t}_zoomFromCenter(t){const{width:e,height:n}=this.getViewportProps();return this.zoom({pos:[e/2,n/2],scale:t})}_panFromCenter(t){const{width:e,height:n}=this.getViewportProps();return this.pan({startPos:[e/2,n/2],pos:[e/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}_unproject(t){const e=this.makeViewport(this.getViewportProps());return t&&e.unproject(t)}_getNewRotation(t,e,n,i){const r=t[0]-e[0],o=t[1]-e[1],s=t[1],a=e[1],{width:A,height:l}=this.getViewportProps(),c=r/A;let u=0;o>0?Math.abs(l-a)>5&&(u=o/(a-l)*1.2):o<0&&a>5&&(u=1-s/a),u=Ii(u,-1,1);const{minPitch:h,maxPitch:g}=this.getViewportProps();let d=n;return u>0?d=n+u*(g-n):u<0&&(d=n-u*(h-n)),{pitch:d,bearing:i+180*c}}}class QM extends BM{constructor(){super(...arguments),this.ControllerState=bM,this.transition={transitionDuration:300,transitionInterpolator:new dM({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})},this.dragMode="pan"}setProps(t){t.position=t.position||[0,0,0];const e=this.props;super.setProps(t);(!e||e.height!==t.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...t,...this.state}))}}class xM extends oM{static{this.displayName="MapView"}constructor(t={}){super(t)}get ViewportType(){return _l}get ControllerType(){return QM}}const DM=[255,255,255],SM=1;let MM=0;class kM{constructor(t={}){this.type="ambient";const{color:e=DM}=t,{intensity:n=SM}=t;this.id=t.id||"ambient-"+MM++,this.color=e,this.intensity=n}}const RM=[255,255,255],NM=1,PM=[0,0,-1];let TM=0;class LM{constructor(t={}){this.type="directional";const{color:e=RM}=t,{intensity:n=NM}=t,{direction:i=PM}=t,{_shadow:r=!1}=t;this.id=t.id||"directional-"+TM++,this.color=e,this.intensity=n,this.type="directional",this.direction=new Oi(i).normalize().toArray(),this.shadow=r}getProjectedLight(t){return this}}class FM extends lf{constructor(t,e){super(t,e),this.shadowMap=t.createTexture({width:1,height:1,sampler:{minFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}}),this.depthBuffer=t.createTexture({format:"depth16unorm",width:1,height:1,mipmaps:!1,dataFormat:6402,type:5125}),this.fbo=t.createFramebuffer({id:"shadowmap",width:1,height:1,colorAttachments:[this.shadowMap],depthStencilAttachment:this.depthBuffer})}render(t){const e=this.fbo,n=this.device.canvasContext.cssToDeviceRatio(),i=t.viewports[0],r=i.width*n,o=i.height*n;r===e.width&&o===e.height||e.resize({width:r,height:o}),super.render({...t,clearColor:[1,1,1,1],target:e,pass:"shadow"})}getLayerParameters(t,e,n){return{...t.props.parameters,blend:!1,depthRange:[0,1],depthTest:!0}}shouldDrawLayer(t){return!1!==t.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.destroy(),this.fbo=null),this.shadowMap&&(this.shadowMap.destroy(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.destroy(),this.depthBuffer=null)}}const OM=lr((function({viewport:t,center:e}){return new PA(t.viewProjectionMatrix).invert().transform(e)})),GM=lr((function({viewport:t,shadowMatrices:e}){const n=[],i=t.pixelUnprojectionMatrix,r=t.isGeospatial?void 0:1,o=[[0,0,r],[t.width,0,r],[0,t.height,r],[t.width,t.height,r],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map((t=>function(t,e){const[n,i,r]=t,o=ll([n,i,r],e);if(Number.isFinite(r))return o;return[o[0],o[1],0]}(t,i)));for(const i of e){const e=i.clone().translate(new Oi(t.center).negate()),r=o.map((t=>e.transform(t))),s=(new PA).ortho({left:Math.min(...r.map((t=>t[0]))),right:Math.max(...r.map((t=>t[0]))),bottom:Math.min(...r.map((t=>t[1]))),top:Math.max(...r.map((t=>t[1]))),near:Math.min(...r.map((t=>-t[2]))),far:Math.max(...r.map((t=>-t[2])))});n.push(s.multiplyRight(i))}return n})),UM=[0,0,0,1],jM=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];const YM={name:"shadow",dependencies:[Ou],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nout vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nin vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?function(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1,shadow_uShadowMap0:t.dummyShadowMap,shadow_uShadowMap1:t.dummyShadowMap};const i={shadow_uDrawShadowMap:Boolean(t.drawToShadowMap),shadow_uUseShadowMap:!!t.shadowMaps&&t.shadowMaps.length>0,shadow_uColor:t.shadowColor||UM,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},r=OM({viewport:t.viewport,center:e.project_uCenter}),o=[],s=GM({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let n=0;n<t.shadowMatrices.length;n++){const i=s[n],a=i.clone().translate(new Oi(t.viewport.center).negate());e.project_uCoordinateSystem===ri.LNGLAT&&e.project_uProjectionMode===oi.WEB_MERCATOR?(s[n]=a,o[n]=r):(s[n]=i.clone().multiplyRight(jM),o[n]=a.transform(r))}for(let t=0;t<s.length;t++)i[`shadow_uViewProjectionMatrices[${t}]`]=s[t],i[`shadow_uProjectCenters[${t}]`]=o[t];for(let e=0;e<2;e++)i[`shadow_uShadowMap${e}`]=t.shadowMaps&&t.shadowMaps[e]||t.dummyShadowMap;return i}(t,e):{}},KM={color:[255,255,255],intensity:1},zM=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],JM=[0,0,0,200/255];class qM{constructor(t={}){this.id="lighting-effect",this.shadowColor=JM,this.shadow=!1,this.ambientLight=null,this.directionalLights=[],this.pointLights=[],this.shadowPasses=[],this.shadowMaps=[],this.dummyShadowMap=null,this.setProps(t)}setup(t){this.context=t;const{device:e,deck:n}=t;this.shadow&&!this.dummyShadowMap&&(this._createShadowPasses(e),n._addDefaultShaderModule(YM),this.dummyShadowMap=e.createTexture({width:1,height:1}))}setProps(t){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const e in t){const n=t[e];switch(n.type){case"ambient":this.ambientLight=n;break;case"directional":this.directionalLights.push(n);break;case"point":this.pointLights.push(n)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some((t=>t.shadow)),this.context&&this.setup(this.context),this.props=t}preRender({layers:t,layerFilter:e,viewports:n,onViewportActive:i,views:r}){if(this.shadow){this.shadowMatrices=this._calculateMatrices();for(let o=0;o<this.shadowPasses.length;o++){this.shadowPasses[o].render({layers:t,layerFilter:e,viewports:n,onViewportActive:i,views:r,moduleParameters:{shadowLightId:o,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}}getModuleParameters(t){const e=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return e.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map((e=>e.getProjectedLight({layer:t}))),pointLights:this.pointLights.map((e=>e.getProjectedLight({layer:t})))},e}cleanup(t){for(const t of this.shadowPasses)t.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.destroy(),this.dummyShadowMap=null,t.deck._removeDefaultShaderModule(YM))}_calculateMatrices(){const t=[];for(const e of this.directionalLights){const n=(new PA).lookAt({eye:new Oi(e.direction).negate()});t.push(n)}return t}_createShadowPasses(t){for(let e=0;e<this.directionalLights.length;e++){const n=new FM(t);this.shadowPasses[e]=n,this.shadowMaps[e]=n.shadowMap}}_applyDefaultLights(){const{ambientLight:t,pointLights:e,directionalLights:n}=this;t||0!==e.length||0!==n.length||(this.ambientLight=new kM(KM),this.directionalLights.push(new LM(zM[0]),new LM(zM[1])))}}const HM=new qM;class VM{constructor(t){this._resolvedEffects=[],this._defaultEffects=[],this.effects=[],this._context=t,this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(t){const e=this._defaultEffects;if(!e.find((e=>e.id===t.id))){const n=e.findIndex((e=>function(t,e){return(t.order??1/0)-(e.order??1/0)}(e,t)>0));n<0?e.push(t):e.splice(n,0,t),t.setup(this._context),this._setEffects(this.effects)}}setProps(t){"effects"in t&&(Dl(t.effects,this.effects,1)||this._setEffects(t.effects))}needsRedraw(t={clearRedrawFlags:!1}){const e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}getEffects(){return this._resolvedEffects}_setEffects(t){const e={};for(const t of this.effects)e[t.id]=t;const n=[];for(const i of t){const t=e[i.id];let r=i;t&&t!==i?t.setProps?(t.setProps(i.props),r=t):t.cleanup(this._context):t||i.setup(this._context),n.push(r),delete e[i.id]}for(const t in e)e[t].cleanup(this._context);this.effects=n,this._resolvedEffects=n.concat(this._defaultEffects),t.some((t=>t instanceof qM))||this._resolvedEffects.push(HM),this._needsRedraw="effects changed"}finalize(){for(const t of this._resolvedEffects)t.cleanup(this._context);this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class WM extends lf{shouldDrawLayer(t){const{operation:e}=t.props;return e.includes("draw")||e.includes("terrain")}}const ZM={blendColorOperation:"add",blendColorSrcFactor:"one",blendColorDstFactor:"zero",blendAlphaOperation:"add",blendAlphaSrcFactor:"constant-alpha",blendAlphaDstFactor:"zero"};class XM extends lf{constructor(){super(...arguments),this._colorEncoderState=null}render(t){return"pickingFBO"in t?this._drawPickingBuffer(t):super.render(t)}_drawPickingBuffer({layers:t,layerFilter:e,views:n,viewports:i,onViewportActive:r,pickingFBO:o,deviceRect:{x:s,y:a,width:A,height:l},cullRect:c,effects:u,pass:h="picking",pickZ:g,moduleParameters:d}){this.pickZ=g;const p=this._resetColorEncoder(g),f=[s,a,A,l],m=super.render({target:o,layers:t,layerFilter:e,views:n,viewports:i,onViewportActive:r,cullRect:c,effects:u?.filter((t=>t.useInPicking)),pass:h,isPicking:!0,moduleParameters:d,clearColor:[0,0,0,0],colorMask:15,scissorRect:f});this._colorEncoderState=null;return{decodePickingColor:p&&$M.bind(null,p),stats:m}}shouldDrawLayer(t){const{pickable:e,operation:n}=t.props;return e&&n.includes("draw")||n.includes("terrain")||n.includes("mask")}getModuleParameters(){return{picking:{isActive:1,isAttribute:this.pickZ},lightSources:{}}}getLayerParameters(t,e,n){const i={depthMask:!0,depthTest:!0,depthRange:[0,1],...t.props.parameters},{pickable:r,operation:o}=t.props;return!this._colorEncoderState||o.includes("terrain")?i.blend=!1:r&&o.includes("draw")&&(Object.assign(i,ZM),i.blend=!0,i.blendColor=function(t,e,n){const{byLayer:i,byAlpha:r}=t;let o,s=i.get(e);s?(s.viewports.push(n),o=s.a):(o=i.size+1,o<=255?(s={a:o,layer:e,viewports:[n]},i.set(e,s),r[o]=s):(ii.warn("Too many pickable layers, only picking the first 255")(),o=0));return[0,0,0,o/255]}(this._colorEncoderState,t,n)),i}_resetColorEncoder(t){return this._colorEncoderState=t?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function $M(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}class tk{constructor(t){this.device=t,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new WM(t),this.pickLayersPass=new XM(t),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(t){this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==t.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(t){if(!t.viewports.length)return;const e=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,n={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...t};n.effects&&this._preRender(n.effects,n);const i=this.lastPostProcessEffect?this.renderBuffers[0]:n.target;this.lastPostProcessEffect&&(n.clearColor=[0,0,0,0],n.clearCanvas=!0);const r=e.render({...n,target:i});n.effects&&this._postRender(n.effects,n),this.renderCount++,hr("deckRenderer.renderLayers",this,r,t)}needsRedraw(t={clearRedrawFlags:!1}){const e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}finalize(){const{renderBuffers:t}=this;for(const e of t)e.delete();t.length=0}_preRender(t,e){this.lastPostProcessEffect=null,e.preRenderStats=e.preRenderStats||{};for(const n of t)e.preRenderStats[n.id]=n.preRender(e),n.postRender&&(this.lastPostProcessEffect=n.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:t}=this,e=this.device.canvasContext.getDrawingBufferSize();0===t.length&&[0,1].map((e=>{const n=this.device.createTexture({sampler:{minFilter:"linear",magFilter:"linear"}});t.push(this.device.createFramebuffer({id:`deck-renderbuffer-${e}`,colorAttachments:[n]}))}));for(const n of t)n.resize(e)}_postRender(t,e){const{renderBuffers:n}=this,i={...e,inputBuffer:n[0],swapBuffer:n[1]};for(const r of t)if(r.postRender){i.target=r.id===this.lastPostProcessEffect?e.target:void 0;const t=r.postRender(i);i.inputBuffer=t,i.swapBuffer=t===n[0]?n[1]:n[0]}}}const ek={pickedColor:null,pickedObjectIndex:-1};function nk({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:i,deviceRadius:r,deviceRect:o}){const{x:s,y:a,width:A,height:l}=o;let c=r*r,u=-1,h=0;for(let e=0;e<l;e++){const r=e+a-i,o=r*r;if(o>c)h+=4*A;else for(let e=0;e<A;e++){if(t[h+3]-1>=0){const t=e+s-n,i=t*t+o;i<=c&&(c=i,u=h)}h+=4}}if(u>=0){const n=t.slice(u,u+4),i=e(n);if(i){const t=Math.floor(u/4/A),e=u/4-t*A;return{...i,pickedColor:n,pickedX:s+e,pickedY:a+t}}ii.error("Picked non-existent layer. Is picking buffer corrupt?")()}return ek}function ik({pickInfo:t,viewports:e,pixelRatio:n,x:i,y:r,z:o}){let s,a=e[0];if(e.length>1&&(a=function(t,e){for(let n=t.length-1;n>=0;n--){const i=t[n];if(i.containsPixel(e))return i}return t[0]}(t?.pickedViewports||e,{x:i,y:r})),a){const t=[i-a.x,r-a.y];void 0!==o&&(t[2]=o),s=a.unproject(t)}return{color:null,layer:null,viewport:a,index:-1,picked:!1,x:i,y:r,pixel:[i,r],coordinate:s,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function rk(t){const{pickInfo:e,lastPickedInfo:n,mode:i,layers:r}=t,{pickedColor:o,pickedLayer:s,pickedObjectIndex:a}=e,A=s?[s]:[];if("hover"===i){const t=n.index,e=n.layerId,i=s?s.props.id:null;if(i!==e||a!==t){if(i!==e){const t=r.find((t=>t.props.id===e));t&&A.unshift(t)}n.layerId=i,n.index=a,n.info=null}}const l=ik(t),c=new Map;return c.set(null,l),A.forEach((t=>{let e={...l};t===s&&(e.color=o,e.index=a,e.picked=!0),e=ok({layer:t,info:e,mode:i});const r=e.layer;t===s&&"hover"===i&&(n.info=e),c.set(r.id,e),"hover"===i&&r.updateAutoHighlight(e)})),c}function ok({layer:t,info:e,mode:n}){for(;t&&e;){const i=e.layer||null;e.sourceLayer=i,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:i}),t=t.parent}return e}class sk{constructor(t){this._pickable=!0,this.device=t,this.pickLayersPass=new XM(t),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(t){"layerFilter"in t&&(this.layerFilter=t.layerFilter),"_pickable"in t&&(this._pickable=t._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.destroy(),this.depthFBO&&this.depthFBO.destroy()}pickObject(t){return this._pickClosestObject(t)}pickObjects(t){return this._pickVisibleObjects(t)}getLastPickedObject({x:t,y:e,layers:n,viewports:i},r=this.lastPickedInfo.info){const o=r&&r.layer&&r.layer.id,s=r&&r.viewport&&r.viewport.id,a=o?n.find((t=>t.id===o)):null,A=s&&i.find((t=>t.id===s))||i[0],l=A&&A.unproject([t-A.x,e-A.y]),c={x:t,y:e,viewport:A,coordinate:l,layer:a};return{...r,...c}}_resizeBuffer(){if(!this.pickingFBO&&(this.pickingFBO=this.device.createFramebuffer({colorAttachments:["rgba8unorm"],depthStencilAttachment:"depth16unorm"}),this.device.isTextureFormatRenderable("rgba32float"))){const t=this.device.createFramebuffer({colorAttachments:["rgba32float"],depthStencilAttachment:"depth16unorm"});this.depthFBO=t}const{canvas:t}=this.device.getCanvasContext();this.pickingFBO?.resize({width:t.width,height:t.height}),this.depthFBO?.resize({width:t.width,height:t.height})}_getPickable(t){if(!1===this._pickable)return null;const e=t.filter((t=>this.pickLayersPass.shouldDrawLayer(t)&&!t.isComposite));return e.length?e:null}_pickClosestObject({layers:t,views:e,viewports:n,x:i,y:r,radius:o=0,depth:s=1,mode:a="query",unproject3D:A,onViewportActive:l,effects:c}){const u=this.device.canvasContext.cssToDeviceRatio(),h=this._getPickable(t);if(!h||0===n.length)return{result:[],emptyInfo:ik({viewports:n,x:i,y:r,pixelRatio:u})};this._resizeBuffer();const g=this.device.canvasContext.cssToDevicePixels([i,r],!0),d=[g.x+Math.floor(g.width/2),g.y+Math.floor(g.height/2)],p=Math.round(o*u),{width:f,height:m}=this.pickingFBO,I=this._getPickingRect({deviceX:d[0],deviceY:d[1],deviceRadius:p,deviceWidth:f,deviceHeight:m}),y={x:i-o,y:r-o,width:2*o+1,height:2*o+1};let C;const E=[],_=new Set;for(let t=0;t<s;t++){let o,g;if(I){o=nk({...this._drawAndSample({layers:h,views:e,viewports:n,onViewportActive:l,deviceRect:I,cullRect:y,effects:c,pass:`picking:${a}`}),deviceX:d[0],deviceY:d[1],deviceRadius:p,deviceRect:I})}else o={pickedColor:null,pickedObjectIndex:-1};if(o.pickedLayer&&A&&this.depthFBO){const{pickedColors:t}=this._drawAndSample({layers:[o.pickedLayer],views:e,viewports:n,onViewportActive:l,deviceRect:{x:o.pickedX,y:o.pickedY,width:1,height:1},cullRect:y,effects:c,pass:`picking:${a}:z`},!0);t[3]&&(g=t[0])}o.pickedLayer&&t+1<s&&(_.add(o.pickedLayer),o.pickedLayer.disablePickingIndex(o.pickedObjectIndex)),C=rk({pickInfo:o,lastPickedInfo:this.lastPickedInfo,mode:a,layers:h,viewports:n,x:i,y:r,z:g,pixelRatio:u});for(const t of C.values())t.layer&&E.push(t);if(!o.pickedColor)break}for(const t of _)t.restorePickingColors();return{result:E,emptyInfo:C.get(null)}}_pickVisibleObjects({layers:t,views:e,viewports:n,x:i,y:r,width:o=1,height:s=1,mode:a="query",maxObjects:A=null,onViewportActive:l,effects:c}){const u=this._getPickable(t);if(!u||0===n.length)return[];this._resizeBuffer();const h=this.device.canvasContext.cssToDeviceRatio(),g=this.device.canvasContext.cssToDevicePixels([i,r],!0),d=g.x,p=g.y+g.height,f=this.device.canvasContext.cssToDevicePixels([i+o,r+s],!0),m=f.x+f.width,I=f.y,y={x:d,y:I,width:m-d,height:p-I},C=function({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t)for(let i=0;i<t.length;i+=4)if(t[i+3]-1>=0){const r=t.slice(i,i+4),o=r.join(",");if(!n.has(o)){const t=e(r);t?n.set(o,{...t,color:r}):ii.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(n.values())}(this._drawAndSample({layers:u,views:e,viewports:n,onViewportActive:l,deviceRect:y,cullRect:{x:i,y:r,width:o,height:s},effects:c,pass:`picking:${a}`})),E=new Map,_=[],v=Number.isFinite(A);for(let t=0;t<C.length&&!(v&&_.length>=A);t++){const e=C[t];let n={color:e.pickedColor,layer:null,index:e.pickedObjectIndex,picked:!0,x:i,y:r,pixelRatio:h};n=ok({layer:e.pickedLayer,info:n,mode:a});const o=n.layer.id;E.has(o)||E.set(o,new Set);const s=E.get(o),A=n.object??n.index;s.has(A)||(s.add(A),_.push(n))}return _}_drawAndSample({layers:t,views:e,viewports:n,onViewportActive:i,deviceRect:r,cullRect:o,effects:s,pass:a},A=!1){const l=A?this.depthFBO:this.pickingFBO,c={layers:t,layerFilter:this.layerFilter,views:e,viewports:n,onViewportActive:i,pickingFBO:l,deviceRect:r,cullRect:o,effects:s,pass:a,pickZ:A,preRenderStats:{}};for(const t of s)t.useInPicking&&(c.preRenderStats[t.id]=t.preRender(c));const{decodePickingColor:u}=this.pickLayersPass.render(c),{x:h,y:g,width:d,height:p}=r,f=new(A?Float32Array:Uint8Array)(d*p*4);return this.device.readPixelsToArrayWebGL(l,{sourceX:h,sourceY:g,sourceWidth:d,sourceHeight:p,target:f}),{pickedColors:f,decodePickingColor:u}}_getPickingRect({deviceX:t,deviceY:e,deviceRadius:n,deviceWidth:i,deviceHeight:r}){const o=Math.max(0,t-n),s=Math.max(0,e-n),a=Math.min(i,t+n+1)-o,A=Math.min(r,e+n+1)-s;return a<=0||A<=0?null:{x:o,y:s,width:a,height:A}}}const ak={"top-left":{top:0,left:0},"top-right":{top:0,right:0},"bottom-left":{bottom:0,left:0},"bottom-right":{bottom:0,right:0},fill:{top:0,left:0,bottom:0,right:0}},Ak="top-left",lk="__root";class ck{constructor({deck:t,parentElement:e}){this.defaultWidgets=[],this.widgets=[],this.resolvedWidgets=[],this.containers={},this.lastViewports={},this.deck=t,this.parentElement=e}getWidgets(){return this.resolvedWidgets}setProps(t){t.widgets&&!Dl(t.widgets,this.widgets,1)&&this._setWidgets(t.widgets)}finalize(){for(const t of this.getWidgets())this._remove(t);this.defaultWidgets.length=0,this.resolvedWidgets.length=0;for(const t in this.containers)this.containers[t].remove()}addDefault(t){this.defaultWidgets.find((e=>e.id===t.id))||(this._add(t),this.defaultWidgets.push(t),this._setWidgets(this.widgets))}_setWidgets(t){const e={};for(const t of this.resolvedWidgets)e[t.id]=t;this.resolvedWidgets.length=0;for(const t of this.defaultWidgets)e[t.id]=null,this.resolvedWidgets.push(t);for(let n of t){const t=e[n.id];t?t.viewId!==n.viewId||t.placement!==n.placement?(this._remove(t),this._add(n)):n!==t&&(t.setProps(n.props),n=t):this._add(n),e[n.id]=null,this.resolvedWidgets.push(n)}for(const t in e){const n=e[t];n&&this._remove(n)}this.widgets=t}_add(t){const{viewId:e=null,placement:n=Ak}=t,i=t.onAdd({deck:this.deck,viewId:e});i&&this._getContainer(e,n).append(i),t._element=i}_remove(t){t.onRemove(),t._element&&t._element.remove(),t._element=void 0}_getContainer(t,e){const n=t||lk;let i=this.containers[n];i||(i=document.createElement("div"),i.style.pointerEvents="none",i.style.position="absolute",i.style.overflow="hidden",this.parentElement?.append(i),this.containers[n]=i);let r=i.querySelector(`.${e}`);return r||(r=document.createElement("div"),r.className=e,r.style.position="absolute",r.style.zIndex="2",Object.assign(r.style,ak[e]),i.append(r)),r}_updateContainers(){const t=this.deck.width,e=this.deck.height;for(const n in this.containers){const i=this.lastViewports[n]||null,r=n===lk||i,o=this.containers[n];r?(o.style.display="block",o.style.left=`${i?i.x:0}px`,o.style.top=`${i?i.y:0}px`,o.style.width=`${i?i.width:t}px`,o.style.height=`${i?i.height:e}px`):o.style.display="none"}}onRedraw({viewports:t,layers:e}){const n=t.reduce(((t,e)=>(t[e.id]=e,t)),{}),{lastViewports:i}=this;for(const r of this.getWidgets()){const{viewId:o}=r;if(o){const t=n[o];t&&(r.onViewportChange&&!t.equals(i[o])&&r.onViewportChange(t),r.onRedraw?.({viewports:[t],layers:e}))}else{if(r.onViewportChange)for(const e of t)e.equals(i[e.id])||r.onViewportChange(e);r.onRedraw?.({viewports:t,layers:e})}}this.lastViewports=n,this._updateContainers()}onHover(t,e){for(const n of this.getWidgets()){const{viewId:i}=n;i&&i!==t.viewport?.id||n.onHover?.(t,e)}}onEvent(t,e){const n=ai[e.type];if(n)for(const i of this.getWidgets()){const{viewId:r}=i;r&&r!==t.viewport?.id||i[n.handler]?.(t,e)}}}const uk={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class hk{constructor(){this.id="default-tooltip",this.placement="fill",this.props={},this.isVisible=!1}onAdd({deck:t}){const e=document.createElement("div");return e.className="deck-tooltip",Object.assign(e.style,uk),this.deck=t,this.element=e,e}onRemove(){this.deck=void 0,this.element=void 0}setProps(){}onViewportChange(t){this.isVisible&&t.id===this.lastViewport?.id&&t!==this.lastViewport&&this.setTooltip(null)}onHover(t){const{deck:e}=this,n=e&&e.props.getTooltip;if(!n)return;const i=n(t);this.lastViewport=t.viewport,this.setTooltip(i,t.x,t.y)}setTooltip(t,e,n){const i=this.element;if(i){if("string"==typeof t)i.innerText=t;else{if(!t)return this.isVisible=!1,void(i.style.display="none");t.text&&(i.innerText=t.text),t.html&&(i.innerHTML=t.html),t.className&&(i.className=t.className)}this.isVisible=!0,i.style.display="block",i.style.transform=`translate(${e}px, ${n}px)`,t&&"object"==typeof t&&"style"in t&&Object.assign(i.style,t.style)}}}const gk=globalThis.loaders?.parseImageNode,dk="undefined"!=typeof Image,pk="undefined"!=typeof ImageBitmap,fk=Boolean(gk),mk=!!Ec||fk;function Ik(t){const e=Ck(t);if(!e)throw new Error("Not an image");return e}function yk(t){switch(Ik(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function Ck(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&t instanceof Image?"image":t&&"object"==typeof t&&t.data&&t.width&&t.height?"data":null}const Ek=/^data:image\/svg\+xml/,_k=/\.svg((\?|#).*)?$/;function vk(t){return t&&(Ek.test(t)||_k.test(t))}function Bk(t,e){if(vk(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function wk(t,e,n){const i=function(t,e){if(vk(e)){let e=(new TextDecoder).decode(t);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(e=unescape(encodeURIComponent(e)))}catch(t){throw new Error(t.message)}return`data:image/svg+xml;base64,${btoa(e)}`}return Bk(t,e)}(t,n),r=self.URL||self.webkitURL,o="string"!=typeof i&&r.createObjectURL(i);try{return await async function(t,e){const n=new Image;if(n.src=t,e.image&&e.image.decode&&n.decode)return await n.decode(),n;return await new Promise(((t,e)=>{try{n.onload=()=>t(n),n.onerror=t=>{const n=t instanceof Error?t.message:"error";e(new Error(n))}}catch(t){e(t)}}))}(o||i,e)}finally{o&&r.revokeObjectURL(o)}}const bk={};let Qk=!0;async function xk(t,e,n){let i;if(vk(n)){i=await wk(t,e,n)}else i=Bk(t,n);const r=e&&e.imagebitmap;return await async function(t,e=null){!function(t){for(const e in t||bk)return!1;return!0}(e)&&Qk||(e=null);if(e)try{return await createImageBitmap(t,e)}catch(t){console.warn(t),Qk=!1}return await createImageBitmap(t)}(i,r)}function Dk(t){return function(t,e,n=0){const i=(r=e,[...r].map((t=>t.charCodeAt(0))));var r;for(let e=0;e<i.length;++e)if(i[e]!==t[e+n])return!1;return!0}(t,"ftyp",4)&&96&t[8]?function(t){switch(function(t,e,n){return String.fromCharCode(...t.slice(e,n))}(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}(t):null}const Sk=!1,Mk=!0;function kk(t){const e=Rk(t);return function(t){const e=Rk(t),n=e.byteLength>=24&&2303741511===e.getUint32(0,Sk);if(!n)return null;return{mimeType:"image/png",width:e.getUint32(16,Sk),height:e.getUint32(20,Sk)}}(e)||function(t){const e=Rk(t),n=e.byteLength>=3&&65496===e.getUint16(0,Sk)&&255===e.getUint8(2);if(!n)return null;const{tableMarkers:i,sofMarkers:r}=function(){const t=new Set([65499,65476,65484,65501,65534]);for(let e=65504;e<65520;++e)t.add(e);const e=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:t,sofMarkers:e}}();let o=2;for(;o+9<e.byteLength;){const t=e.getUint16(o,Sk);if(r.has(t))return{mimeType:"image/jpeg",height:e.getUint16(o+5,Sk),width:e.getUint16(o+7,Sk)};if(!i.has(t))return null;o+=2,o+=e.getUint16(o,Sk)}return null}(e)||function(t){const e=Rk(t),n=e.byteLength>=10&&1195984440===e.getUint32(0,Sk);if(!n)return null;return{mimeType:"image/gif",width:e.getUint16(6,Mk),height:e.getUint16(8,Mk)}}(e)||function(t){const e=Rk(t),n=e.byteLength>=14&&16973===e.getUint16(0,Sk)&&e.getUint32(2,Mk)===e.byteLength;if(!n)return null;return{mimeType:"image/bmp",width:e.getUint32(18,Mk),height:e.getUint32(22,Mk)}}(e)||function(t){const e=new Uint8Array(t instanceof DataView?t.buffer:t),n=Dk(e);if(!n)return null;return{mimeType:n.mimeType,width:0,height:0}}(e)}function Rk(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}const Nk={dataType:null,batchType:null,id:"image",module:"images",name:"Images",version:"4.2.1",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:async function(t,e,n){const i=((e=e||{}).image||{}).type||"auto",{url:r}=n||{},o=function(t){switch(t){case"auto":case"data":return function(){if(pk)return"imagebitmap";if(dk)return"image";if(mk)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function(t){switch(t){case"auto":return pk||dk||mk;case"imagebitmap":return pk;case"image":return dk;case"data":return mk;default:throw new Error(`@loaders.gl/images: image ${t} not supported in this environment`)}}(t),t}}(i);let s;switch(o){case"imagebitmap":s=await xk(t,e,r);break;case"image":s=await wk(t,e,r);break;case"data":s=await async function(t){const{mimeType:e}=kk(t)||{},n=globalThis.loaders?.parseImageNode;return ec(n),await n(t,e)}(t);break;default:ec(!1)}return"data"===i&&(s=yk(s)),s},tests:[t=>Boolean(kk(new DataView(t)))],options:{image:{type:"auto",decode:!0}}};const Pk={dataType:null,batchType:null,id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function(t){const e=t[0],n=t[t.length-1];return"{"===e&&"}"===n||"["===e&&"]"===n},parseTextSync:JSON.parse};const Tk=function(){const t="9.0.27",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error(`deck.gl - multiple versions detected: ${e} vs ${t}`);return e||(ii.log(1,`deck.gl ${t}`)(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:ii,_registerLoggers:ur},function(t){const e=gu();t=Array.isArray(t)?t:[t];for(const n of t){const t=ic(n);e.find((e=>t===e))||e.unshift(t)}}([Pk,[Nk,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}();const Lk=new class{stats=new Map;getStats(t){return this.get(t)}get(t){return this.stats.has(t)||this.stats.set(t,new ZS({id:t})),this.stats.get(t)}};const Fk=function(){const t="9.0.25";if(globalThis.luma&&globalThis.luma.VERSION!==t)throw new Error(`luma.gl - multiple VERSIONs detected: ${globalThis.luma.VERSION} vs ${t}`);return globalThis.luma||(Ln()&&br.log(1,`${t} - set luma.log.level=1 (or higher) to trace rendering`)(),globalThis.luma=globalThis.luma||{VERSION:t,version:t,log:br,stats:Lk}),t}(),Ok=["bc1","bc2","bc3","bc4","bc5","bc6","bc7","etc1","etc2","eac","atc","astc","pvrtc"],Gk=/^(rg?b?a?)([0-9]*)([a-z]*)(-srgb)?(-webgl|-unsized)?$/;function Uk(t){const e=Gk.exec(t);if(e){const[,t,n,i,r,o]=e;if(t){const e=Rr(`${i}${n}`);return{format:t,components:t.length,srgb:"-srgb"===r,unsized:"-unsized"===o,webgl:"-webgl"===o,...e}}}return function(t){const e=jk[t];if(!e)throw new Error(`Unknown format ${t}`);return{format:e.format||"",components:e.components||e.format?.length||1,byteLength:e.bpp||1,srgb:!1,unsized:!1}}(t)}const jk={"rgba4unorm-webgl":{format:"rgba",bpp:2},"rgb565unorm-webgl":{format:"rgb",bpp:2},"rgb5a1unorm-webgl":{format:"rgba",bbp:2},rgb9e5ufloat:{format:"rgb",bbp:4},rg11b10ufloat:{format:"rgb",bbp:4},rgb10a2unorm:{format:"rgba",bbp:4},"rgb10a2uint-webgl":{format:"rgba",bbp:4},stencil8:{components:1,bpp:1,a:"stencil"},depth16unorm:{components:1,bpp:2,a:"depth"},depth24plus:{components:1,bpp:3,a:"depth"},depth32float:{components:1,bpp:4,a:"depth"},"depth24plus-stencil8":{components:2,bpp:4,a:"depth-stencil"},"depth24unorm-stencil8":{components:2,bpp:4,a:"depth-stencil"},"depth32float-stencil8":{components:2,bpp:4,a:"depth-stencil"}};class Yk{}class Kk{features;disabledFeatures;constructor(t=[],e){this.features=new Set(t),this.disabledFeatures=e||{}}*[Symbol.iterator](){yield*this.features}has(t){return!this.disabledFeatures[t]&&this.features.has(t)}}class zk{static defaultProps={id:null,canvas:null,container:null,manageState:!0,width:800,height:600,requestMaxLimits:!0,debug:Boolean(br.get("debug")),spector:Boolean(br.get("spector")||br.get("spectorjs")),break:[],initalizeFeatures:!0,disabledFeatures:{"compilation-status-async-webgl":!0},gl:null,onError:t=>br.error(t.message)};get[Symbol.toStringTag](){return"Device"}static VERSION=Fk;constructor(t){this.props={...zk.defaultProps,...t},this.id=this.props.id||Sn(this[Symbol.toStringTag].toLowerCase())}id;props;userData={};statsManager=Lk;_lumaData={};isTextureFormatCompressed(t){return e=t,Ok.some((t=>e.startsWith(t)));var e}loseDevice(){return!1}getCanvasContext(){if(!this.canvasContext)throw new Error("Device has no CanvasContext");return this.canvasContext}createTexture(t){return(t instanceof Promise||"string"==typeof t)&&(t={data:t}),this._createTexture(t)}createCommandEncoder(t={}){throw new Error("not implemented")}readPixelsToArrayWebGL(t,e){throw new Error("not implemented")}readPixelsToBufferWebGL(t,e){throw new Error("not implemented")}setParametersWebGL(t){throw new Error("not implemented")}getParametersWebGL(t){throw new Error("not implemented")}withParametersWebGL(t,e){throw new Error("not implemented")}clearWebGL(t){throw new Error("not implemented")}resetWebGL(){throw new Error("not implemented")}timestamp=0;incrementTimestamp(){return this.timestamp++}onError(t){this.props.onError(t)}_getBufferProps(t){(t instanceof ArrayBuffer||ArrayBuffer.isView(t))&&(t={data:t});const e={...t};return(t.usage||0)&Rn.INDEX&&!t.indexType&&(t.data instanceof Uint32Array?e.indexType="uint32":t.data instanceof Uint16Array?e.indexType="uint16":br.warn("indices buffer content must be of integer type")()),e}}const Jk=new Map;class qk{static defaultProps={...zk.defaultProps,type:"best-available",devices:void 0};static stats=Lk;static log=br;static registerDevices(t){for(const e of t)gr(e.type&&e.isSupported&&e.create),Jk.set(e.type,e)}static getAvailableDevices(){return Array.from(Jk).map((t=>t.type))}static getSupportedDevices(){return Array.from(Jk).filter((t=>t.isSupported())).map((t=>t.type))}static setDefaultDeviceProps(t){Object.assign(zk.defaultProps,t)}static async attachDevice(t){const e=Hk(t.devices)||Jk;if(t.handle instanceof WebGL2RenderingContext){const n=e.get("webgl");if(n)return await n.attach(t.handle)}if(null===t.handle){const t=e.get("unknown");if(t)return await t.attach(null)}throw new Error("Failed to attach device. Ensure `@luma.gl/webgl` and/or `@luma.gl/webgpu` modules are imported.")}static async createDevice(t={}){(t={...qk.defaultProps,...t}).gl&&(t.type="webgl");const e=Hk(t.devices)||Jk;let n,i;switch(t.type){case"webgpu":if(n=e.get("webgpu"),n)return await n.create(t);break;case"webgl":if(i=e.get("webgl"),i)return await i.create(t);break;case"unknown":const r=e.get("unknown");if(r)return await r.create(t);break;case"best-available":if(n=e.get("webgpu"),n?.isSupported?.())return await n.create(t);if(i=e.get("webgl"),i?.isSupported?.())return await i.create(t)}throw new Error("No matching device found. Ensure `@luma.gl/webgl` and/or `@luma.gl/webgpu` modules are imported.")}static enforceWebGL2(t=!0){const e=HTMLCanvasElement.prototype;if(!t&&e.originalGetContext)return e.getContext=e.originalGetContext,void(e.originalGetContext=void 0);e.originalGetContext=e.getContext,e.getContext=function(t,e){return"webgl"===t||"experimental-webgl"===t?this.originalGetContext("webgl2",e):this.originalGetContext(t,e)}}}function Hk(t){if(!t||0===t?.length)return null;const e=new Map;for(const n of t)e.set(n.type,n);return e}const Vk=Ln()&&"undefined"!=typeof document,Wk=()=>Vk&&"complete"===document.readyState,Zk={canvas:null,width:800,height:600,useDevicePixels:!0,autoResize:!0,container:null,visible:!0,colorSpace:"srgb",alphaMode:"opaque"};class Xk{id;props;canvas;htmlCanvas;offscreenCanvas;type;width=1;height=1;resizeObserver;_canvasSizeInfo={clientWidth:0,clientHeight:0,devicePixelRatio:1};static get isPageLoaded(){return Wk()}static pageLoaded=function(){if(Wk()||"undefined"==typeof window)return Promise.resolve();return new Promise((t=>{window.addEventListener("load",(()=>t()))}))}();constructor(t){if(this.props={...Zk,...t},t=this.props,!Ln())return this.id="node-canvas-context",this.type="node",this.width=this.props.width,this.height=this.props.height,void(this.canvas=null);if(t.canvas)"string"==typeof t.canvas?this.canvas=function(t){const e=document.getElementById(t);if(!e&&!Wk())throw new Error(`Accessing '${t}' before page was loaded`);if(!(e instanceof HTMLCanvasElement))throw new Error("Object is not a canvas element");return e}(t.canvas):this.canvas=t.canvas;else{const e=function(t){const{width:e,height:n}=t,i=document.createElement("canvas");return i.id="lumagl-auto-created-canvas",i.width=e||1,i.height=n||1,i.style.width=Number.isFinite(e)?`${e}px`:"100%",i.style.height=Number.isFinite(n)?`${n}px`:"100%",i}(t),n=function(t){if("string"==typeof t){const e=document.getElementById(t);if(!e&&!Wk())throw new Error(`Accessing '${t}' before page was loaded`);if(!e)throw new Error(`${t} is not an HTML element`);return e}if(t)return t;return document.body}(t?.container||null);n.insertBefore(e,n.firstChild),this.canvas=e,t?.visible||(this.canvas.style.visibility="hidden")}this.canvas instanceof HTMLCanvasElement?(this.id=this.canvas.id,this.type="html-canvas",this.htmlCanvas=this.canvas):(this.id="offscreen-canvas",this.type="offscreen-canvas",this.offscreenCanvas=this.canvas),this.canvas instanceof HTMLCanvasElement&&t.autoResize&&(this.resizeObserver=new ResizeObserver((t=>{for(const e of t)e.target===this.canvas&&this.update()})),this.resizeObserver.observe(this.canvas))}getDevicePixelRatio(t){if("undefined"!=typeof OffscreenCanvas&&this.canvas instanceof OffscreenCanvas)return 1;if(!(t=void 0===t?this.props.useDevicePixels:t)||t<=0)return 1;if(!0===t){return"undefined"!=typeof window&&window.devicePixelRatio||1}return t}getPixelSize(){switch(this.type){case"node":return[this.width,this.height];case"offscreen-canvas":return[this.canvas.width,this.canvas.height];case"html-canvas":const t=this.getDevicePixelRatio(),e=this.canvas;return e.parentElement?[e.clientWidth*t,e.clientHeight*t]:[this.canvas.width,this.canvas.height];default:throw new Error(this.type)}}getAspect(){const[t,e]=this.getPixelSize();return t/e}cssToDeviceRatio(){try{const[t]=this.getDrawingBufferSize(),{clientWidth:e}=this._canvasSizeInfo;return e?t/e:1}catch{return 1}}cssToDevicePixels(t,e=!0){const n=this.cssToDeviceRatio(),[i,r]=this.getDrawingBufferSize();return function(t,e,n,i,r){const o=t,s=$k(o[0],e,n);let a=tR(o[1],e,i,r),A=$k(o[0]+1,e,n);const l=A===n-1?A:A-1;let c;A=tR(o[1]+1,e,i,r),r?(A=0===A?A:A+1,c=a,a=A):c=A===i-1?A:A-1;return{x:s,y:a,width:Math.max(l-s+1,1),height:Math.max(c-a+1,1)}}(t,n,i,r,e)}setDevicePixelRatio(t,e={}){if(!this.htmlCanvas)return;let n="width"in e?e.width:this.htmlCanvas.clientWidth,i="height"in e?e.height:this.htmlCanvas.clientHeight;n&&i||(br.log(1,"Canvas clientWidth/clientHeight is 0")(),t=1,n=this.htmlCanvas.width||1,i=this.htmlCanvas.height||1);const r=this._canvasSizeInfo;if(r.clientWidth!==n||r.clientHeight!==i||r.devicePixelRatio!==t){let e=t;const r=Math.floor(n*e),o=Math.floor(i*e);this.htmlCanvas.width=r,this.htmlCanvas.height=o;const[s,a]=this.getDrawingBufferSize();s===r&&a===o||(e=Math.min(s/n,a/i),this.htmlCanvas.width=Math.floor(n*e),this.htmlCanvas.height=Math.floor(i*e),br.warn("Device pixel ratio clamped")()),this._canvasSizeInfo.clientWidth=n,this._canvasSizeInfo.clientHeight=i,this._canvasSizeInfo.devicePixelRatio=t}}getDrawingBufferSize(){const t=this.device.gl;if(!t)throw new Error("canvas size");return[t.drawingBufferWidth,t.drawingBufferHeight]}_setAutoCreatedCanvasId(t){"lumagl-auto-created-canvas"===this.htmlCanvas?.id&&(this.htmlCanvas.id=t)}}function $k(t,e,n){return Math.min(Math.round(t*e),n-1)}function tR(t,e,n,i){return i?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const eR={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,35725:null,36006:null,36007:null,34229:null,34964:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32926:!1,32928:!1,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],36389:null,36662:null,36663:null,35053:null,35055:null,35723:4352,36010:null,35977:!1,3333:4,3317:4,37440:!1,37441:!1,37443:37444,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},nR=(t,e,n)=>e?t.enable(n):t.disable(n),iR=(t,e,n)=>t.hint(n,e),rR=(t,e,n)=>t.pixelStorei(n,e),oR=(t,e,n)=>{const i=36006===n?36009:36008;return t.bindFramebuffer(i,e)},sR=(t,e,n)=>{const i={34964:34962,36662:36662,36663:36663,35053:35051,35055:35052}[n];t.bindBuffer(i,e)};function aR(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}const AR={3042:nR,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:nR,2885:(t,e)=>t.cullFace(e),2929:nR,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:nR,35723:iR,35725:(t,e)=>t.useProgram(e),36007:(t,e)=>t.bindRenderbuffer(36161,e),36389:(t,e)=>t.bindTransformFeedback?.(36386,e),34229:(t,e)=>t.bindVertexArray(e),36006:oR,36010:oR,34964:sR,36662:sR,36663:sR,35053:sR,35055:sR,2886:(t,e)=>t.frontFace(e),33170:iR,2849:(t,e)=>t.lineWidth(e),32823:nR,32824:"polygonOffset",10752:"polygonOffset",35977:nR,32926:nR,32928:nR,32938:"sampleCoverage",32939:"sampleCoverage",3089:nR,3088:(t,e)=>t.scissor(...e),2960:nR,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),34383:nR,10754:nR,12288:nR,12289:nR,12290:nR,12291:nR,12292:nR,12293:nR,12294:nR,12295:nR,3333:rR,3317:rR,37440:rR,37441:rR,37443:rR,3330:rR,3332:rR,3331:rR,3314:rR,32878:rR,3316:rR,3315:rR,32877:rR,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{const n="number"==typeof e?[e,e]:e;t.blendEquationSeparate(...n)},blendFunc:(t,e)=>{const n=2===e?.length?[...e,...e]:e;t.blendFuncSeparate(...n)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=aR(e)?e:[e,e];const[n,i]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,i)},stencilFunc:(t,e)=>{e=aR(e)&&3===e.length?[...e,...e]:e;const[n,i,r,o,s,a]=e;t.stencilFuncSeparate(1028,n,i,r),t.stencilFuncSeparate(1029,o,s,a)},stencilOp:(t,e)=>{e=aR(e)&&3===e.length?[...e,...e]:e;const[n,i,r,o,s,a]=e;t.stencilOpSeparate(1028,n,i,r),t.stencilOpSeparate(1029,o,s,a)},viewport:(t,e)=>t.viewport(...e)};function lR(t,e,n){return void 0!==e[t]?e[t]:n[t]}const cR={blendEquation:(t,e,n)=>t.blendEquationSeparate(lR(32777,e,n),lR(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(lR(32969,e,n),lR(32968,e,n),lR(32971,e,n),lR(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(lR(32824,e,n),lR(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(lR(32938,e,n),lR(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,lR(2962,e,n),lR(2967,e,n),lR(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,lR(34816,e,n),lR(36003,e,n),lR(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,lR(2964,e,n),lR(2965,e,n),lR(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,lR(34817,e,n),lR(34818,e,n),lR(34819,e,n))},uR={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),useProgram:(t,e)=>t({35725:e}),bindRenderbuffer:(t,e,n)=>t({36007:n}),bindTransformFeedback:(t,e,n)=>t({36389:n}),bindVertexArray:(t,e)=>t({34229:e}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},bindBuffer:(t,e,n)=>{const i={34962:[34964],36662:[36662],36663:[36663],35051:[35053],35052:[35055]}[e];return i?t({[i]:n}):{valueChanged:!0}},blendColor:(t,e,n,i,r)=>t({32773:new Float32Array([e,n,i,r])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,i,r)=>t({32969:e,32968:n,32971:i,32970:r}),clearColor:(t,e,n,i,r)=>t({3106:new Float32Array([e,n,i,r])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,i,r)=>t({3107:[e,n,i,r]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,i,r)=>t({3088:new Int32Array([e,n,i,r])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[1028===e?2968:36005]:n}),stencilFunc:(t,e,n,i)=>t({2962:e,2967:n,2963:i,34816:e,36003:n,36004:i}),stencilFuncSeparate:(t,e,n,i,r)=>t({[1028===e?2962:34816]:n,[1028===e?2967:36003]:i,[1028===e?2963:36004]:r}),stencilOp:(t,e,n,i)=>t({2964:e,2965:n,2966:i,34817:e,34818:n,34819:i}),stencilOpSeparate:(t,e,n,i,r)=>t({[1028===e?2964:34817]:n,[1028===e?2965:34818]:i,[1028===e?2966:34819]:r}),viewport:(t,e,n,i,r)=>t({2978:[e,n,i,r]})},hR=(t,e)=>t.isEnabled(e),gR={3042:hR,2884:hR,2929:hR,3024:hR,32823:hR,32926:hR,32928:hR,3089:hR,2960:hR,35977:hR},dR=new Set([34016,36388,36387,35983,35368,34965,35739,35738,3074,34853,34854,34855,34856,34857,34858,34859,34860,34861,34862,34863,34864,34865,34866,34867,34868,35097,32873,35869,32874,34068]);function pR(t,e){if(function(t){for(const e in t)return!1;return!0}(e))return;const n={};for(const i in e){const r=Number(i),o=AR[i];o&&("string"==typeof o?n[o]=!0:o(t,e[i],r))}const i=t.state&&t.state.cache;if(i)for(const r in n){(0,cR[r])(t,e,i)}}function fR(t,e=eR){if("number"==typeof e){const n=e,i=gR[n];return i?i(t,n):t.getParameter(n)}const n=Array.isArray(e)?e:Object.keys(e),i={};for(const e of n){const n=gR[e];i[e]=n?n(t,Number(e)):t.getParameter(Number(e))}return i}function mR(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),i=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&i&&t.length===e.length){for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}return!1}class IR{gl;program=null;stateStack=[];enable=!0;cache;log;constructor(t,{copyState:e=!1,log:n=()=>{}}={}){this.gl=t,this.cache=e?fR(t):Object.assign({},eR),this.log=n,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(t={}){this.stateStack.push({})}pop(){gr(this.stateStack.length>0);const t=this.stateStack[this.stateStack.length-1];pR(this.gl,t),this.stateStack.pop()}_updateCache(t){let e,n=!1;const i=this.stateStack.length>0?this.stateStack[this.stateStack.length-1]:null;for(const r in t){gr(void 0!==r);const o=t[r],s=this.cache[r];mR(o,s)||(n=!0,e=s,i&&!(r in i)&&(i[r]=s),this.cache[r]=o)}return{valueChanged:n,oldValue:e}}}function yR(t){return t.state}function CR(t,e){const{enable:n=!0,copyState:i}=e;if(gr(void 0!==i),!t.state){t.state=new IR(t,{copyState:i}),function(t){const e=t.useProgram.bind(t);t.useProgram=function(n){const i=yR(t);i.program!==n&&(e(n),i.program=n)}}(t);for(const e in uR){BR(t,e,uR[e])}vR(t,"getParameter"),vR(t,"isEnabled")}return yR(t).enable=n,t}function ER(t){let e=yR(t);e||(CR(t,{copyState:!1}),e=yR(t)),e.push()}function _R(t){const e=yR(t);gr(e),e.pop()}function vR(t,e){const n=t[e].bind(t);t[e]=function(e){if(void 0===e||dR.has(e))return n(e);const i=yR(t);return e in i.cache||(i.cache[e]=n(e)),i.enable?i.cache[e]:n(e)},Object.defineProperty(t[e],"name",{value:`${e}-from-cache`,configurable:!1})}function BR(t,e,n){if(!t[e])return;const i=t[e].bind(t);t[e]=function(...e){const r=yR(t),{valueChanged:o,oldValue:s}=n(r._updateCache,...e);return o&&i(...e),s},Object.defineProperty(t[e],"name",{value:`${e}-to-cache`,configurable:!1})}const wR={powerPreference:"high-performance",onContextLost:()=>console.error("WebGL context lost"),onContextRestored:()=>console.info("WebGL context restored")};function bR(t,e,n){return void 0===n[e]&&(n[e]=t.getExtension(e)||null),n[e]}function QR(t,e){const n=t.getParameter(7936),i=t.getParameter(7937);bR(t,"WEBGL_debug_renderer_info",e);const r=e.WEBGL_debug_renderer_info,o=t.getParameter(r?r.UNMASKED_VENDOR_WEBGL:7936)||n,s=t.getParameter(r?r.UNMASKED_RENDERER_WEBGL:7937)||i,a=t.getParameter(7938),A=xR(o,s),l=function(t,e){if(/Metal/i.exec(t)||/Metal/i.exec(e))return"metal";if(/ANGLE/i.exec(t)||/ANGLE/i.exec(e))return"opengl";return"unknown"}(o,s),c=function(t,e){if(/SwiftShader/i.exec(t)||/SwiftShader/i.exec(e))return"cpu";switch(xR(t,e)){case"intel":return"integrated";case"software":return"cpu";case"unknown":return"unknown";default:return"discrete"}}(o,s);return{type:"webgl",gpu:A,gpuType:c,gpuBackend:l,vendor:o,renderer:s,version:a,shadingLanguage:"glsl",shadingLanguageVersion:300}}function xR(t,e){return/NVIDIA/i.exec(t)||/NVIDIA/i.exec(e)?"nvidia":/INTEL/i.exec(t)||/INTEL/i.exec(e)?"intel":/Apple/i.exec(t)||/Apple/i.exec(e)?"apple":/AMD/i.exec(t)||/AMD/i.exec(e)||/ATI/i.exec(t)||/ATI/i.exec(e)?"amd":/SwiftShader/i.exec(t)||/SwiftShader/i.exec(e)?"software":"unknown"}function DR(t){switch(t){case"uint8":case"unorm8":return 5121;case"sint8":case"snorm8":return 5120;case"uint16":case"unorm16":return 5123;case"sint16":case"snorm16":return 5122;case"uint32":return 5125;case"sint32":return 5124;case"float16":return 5131;case"float32":return 5126}throw new Error(String(t))}const SR="texture-compression-bc",MR="texture-compression-astc",kR="texture-compression-etc2",RR="texture-compression-pvrtc-webgl",NR="texture-compression-atc-webgl",PR="float32-renderable-webgl",TR="float16-renderable-webgl",LR="snorm8-renderable-webgl",FR="norm16-renderable-webgl",OR="snorm16-renderable-webgl",GR="float32-filterable",UR="float16-filterable-webgl",jR="WEBGL_compressed_texture_s3tc",YR="WEBGL_compressed_texture_s3tc_srgb",KR="EXT_texture_compression_rgtc",zR="EXT_texture_compression_bptc",JR="EXT_texture_norm16",qR="EXT_render_snorm",HR={"float32-renderable-webgl":["EXT_color_buffer_float"],"float16-renderable-webgl":["EXT_color_buffer_half_float"],"rgb9e5ufloat_renderable-webgl":["WEBGL_render_shared_exponent"],"snorm8-renderable-webgl":[qR],"norm16-renderable-webgl":[JR],"snorm16-renderable-webgl":[JR,qR],"float32-filterable":["OES_texture_float_linear"],"float16-filterable-webgl":["OES_texture_half_float_linear"],"texture-filterable-anisotropic-webgl":["EXT_texture_filter_anisotropic"],"texture-blend-float-webgl":["EXT_float_blend"],"texture-compression-bc":[jR,YR,KR,zR],"texture-compression-bc5-webgl":[KR],"texture-compression-bc7-webgl":[zR],"texture-compression-etc2":["WEBGL_compressed_texture_etc"],"texture-compression-astc":["WEBGL_compressed_texture_astc"],"texture-compression-etc1-webgl":["WEBGL_compressed_texture_etc1"],"texture-compression-pvrtc-webgl":["WEBGL_compressed_texture_pvrtc"],"texture-compression-atc-webgl":["WEBGL_compressed_texture_atc"]};function VR(t,e,n){return(HR[e]||[]).every((e=>bR(t,e,n)))}const WR={"rgb8unorm-unsized":{gl:6407,b:4,c:2,bpp:4,dataFormat:6407,types:[5121,33635]},"rgba8unorm-unsized":{gl:6408,b:4,c:2,bpp:4,dataFormat:6408,types:[5121,32819,32820]},r8unorm:{gl:33321,b:1,c:1,rb:!0},r8snorm:{gl:36756,b:1,c:1,render:LR},r8uint:{gl:33330,b:1,c:1,rb:!0},r8sint:{gl:33329,b:1,c:1,rb:!0},rg8unorm:{gl:33323,b:2,c:2,rb:!0},rg8snorm:{gl:36757,b:2,c:2,render:LR},rg8uint:{gl:33336,b:2,c:2,rb:!0},rg8sint:{gl:33335,b:2,c:2,rb:!0},r16uint:{gl:33332,b:2,c:1,rb:!0},r16sint:{gl:33331,b:2,c:1,rb:!0},r16float:{gl:33325,b:2,c:1,render:TR,filter:"float16-filterable-webgl",rb:!0},"r16unorm-webgl":{gl:33322,b:2,c:1,f:FR,rb:!0},"r16snorm-webgl":{gl:36760,b:2,c:1,f:OR},"rgba4unorm-webgl":{gl:32854,b:2,c:4,wgpu:!1,rb:!0},"rgb565unorm-webgl":{gl:36194,b:2,c:4,wgpu:!1,rb:!0},"rgb5a1unorm-webgl":{gl:32855,b:2,c:4,wgpu:!1,rb:!0},"rgb8unorm-webgl":{gl:32849,b:3,c:3,wgpu:!1},"rgb8snorm-webgl":{gl:36758,b:3,c:3,wgpu:!1},rgba8unorm:{gl:32856,b:4,c:2,bpp:4},"rgba8unorm-srgb":{gl:35907,b:4,c:4,bpp:4},rgba8snorm:{gl:36759,b:4,c:4,render:LR},rgba8uint:{gl:36220,b:4,c:4,bpp:4},rgba8sint:{gl:36238,b:4,c:4,bpp:4},bgra8unorm:{b:4,c:4},"bgra8unorm-srgb":{b:4,c:4},rg16uint:{gl:33338,b:4,c:1,bpp:4},rg16sint:{gl:33337,b:4,c:2,bpp:4},rg16float:{gl:33327,bpp:4,b:4,c:2,render:TR,filter:UR,rb:!0},"rg16unorm-webgl":{gl:33324,b:2,c:2,render:FR},"rg16snorm-webgl":{gl:36761,b:2,c:2,render:OR},r32uint:{gl:33334,b:4,c:1,bpp:4,rb:!0},r32sint:{gl:33333,b:4,c:1,bpp:4,rb:!0},r32float:{gl:33326,bpp:4,b:4,c:1,render:PR,filter:GR},rgb9e5ufloat:{gl:35901,b:4,c:3,p:1,render:"rgb9e5ufloat_renderable-webgl"},rg11b10ufloat:{gl:35898,b:4,c:3,p:1,render:PR,rb:!0},rgb10a2unorm:{gl:32857,b:4,c:4,p:1,rb:!0},"rgb10a2uint-webgl":{b:4,c:4,gl:36975,p:1,wgpu:!1,bpp:4,rb:!0},"rgb16unorm-webgl":{gl:32852,b:2,c:3,f:FR},"rgb16snorm-webgl":{gl:36762,b:2,c:3,f:FR},rg32uint:{gl:33340,b:8,c:2,rb:!0},rg32sint:{gl:33339,b:8,c:2,rb:!0},rg32float:{gl:33328,b:8,c:2,render:PR,filter:GR,rb:!0},rgba16uint:{gl:36214,b:8,c:4,rb:!0},rgba16sint:{gl:36232,b:8,c:4,rb:!0},rgba16float:{gl:34842,b:8,c:4,render:TR,filter:UR},"rgba16unorm-webgl":{gl:32859,b:2,c:4,render:FR,rb:!0},"rgba16snorm-webgl":{gl:36763,b:2,c:4,render:OR},"rgb32float-webgl":{gl:34837,render:PR,filter:GR,gl2ext:"EXT_color_buffer_float",dataFormat:6407,types:[5126]},rgba32uint:{gl:36208,b:16,c:4,rb:!0},rgba32sint:{gl:36226,b:16,c:4,rb:!0},rgba32float:{gl:34836,b:16,c:4,render:PR,filter:GR,rb:!0},stencil8:{gl:36168,b:1,c:1,attachment:36128,rb:!0},depth16unorm:{gl:33189,b:2,c:1,attachment:36096,dataFormat:6402,types:[5123],rb:!0},depth24plus:{gl:33190,b:3,c:1,attachment:36096,dataFormat:6402,types:[5125]},depth32float:{gl:36012,b:4,c:1,attachment:36096,dataFormat:6402,types:[5126],rb:!0},"depth24plus-stencil8":{gl:35056,b:4,c:2,p:1,attachment:33306,rb:!0,depthTexture:!0,dataFormat:34041,types:[34042]},"depth24unorm-stencil8":{gl:35056,b:4,c:2,p:1,attachment:33306,dataFormat:34041,types:[34042],rb:!0},"depth32float-stencil8":{gl:36013,b:5,c:2,p:1,attachment:33306,dataFormat:34041,types:[36269],rb:!0},"bc1-rgb-unorm-webgl":{gl:33776,x:jR,f:SR},"bc1-rgb-unorm-srgb-webgl":{gl:35916,x:YR,f:SR},"bc1-rgba-unorm":{gl:33777,x:jR,f:SR},"bc1-rgba-unorm-srgb":{gl:35916,x:YR,f:SR},"bc2-rgba-unorm":{gl:33778,x:jR,f:SR},"bc2-rgba-unorm-srgb":{gl:35918,x:YR,f:SR},"bc3-rgba-unorm":{gl:33779,x:jR,f:SR},"bc3-rgba-unorm-srgb":{gl:35919,x:YR,f:SR},"bc4-r-unorm":{gl:36283,x:KR,f:SR},"bc4-r-snorm":{gl:36284,x:KR,f:SR},"bc5-rg-unorm":{gl:36285,x:KR,f:SR},"bc5-rg-snorm":{gl:36286,x:KR,f:SR},"bc6h-rgb-ufloat":{gl:36495,x:zR,f:SR},"bc6h-rgb-float":{gl:36494,x:zR,f:SR},"bc7-rgba-unorm":{gl:36492,x:zR,f:SR},"bc7-rgba-unorm-srgb":{gl:36493,x:zR,f:SR},"etc2-rgb8unorm":{gl:37492,f:kR},"etc2-rgb8unorm-srgb":{gl:37494,f:kR},"etc2-rgb8a1unorm":{gl:37496,f:kR},"etc2-rgb8a1unorm-srgb":{gl:37497,f:kR},"etc2-rgba8unorm":{gl:37493,f:kR},"etc2-rgba8unorm-srgb":{gl:37495,f:kR},"eac-r11unorm":{gl:37488,f:kR},"eac-r11snorm":{gl:37489,f:kR},"eac-rg11unorm":{gl:37490,f:kR},"eac-rg11snorm":{gl:37491,f:kR},"astc-4x4-unorm":{gl:37808,f:MR},"astc-4x4-unorm-srgb":{gl:37840,f:MR},"astc-5x4-unorm":{gl:37809,f:MR},"astc-5x4-unorm-srgb":{gl:37841,f:MR},"astc-5x5-unorm":{gl:37810,f:MR},"astc-5x5-unorm-srgb":{gl:37842,f:MR},"astc-6x5-unorm":{gl:37811,f:MR},"astc-6x5-unorm-srgb":{gl:37843,f:MR},"astc-6x6-unorm":{gl:37812,f:MR},"astc-6x6-unorm-srgb":{gl:37844,f:MR},"astc-8x5-unorm":{gl:37813,f:MR},"astc-8x5-unorm-srgb":{gl:37845,f:MR},"astc-8x6-unorm":{gl:37814,f:MR},"astc-8x6-unorm-srgb":{gl:37846,f:MR},"astc-8x8-unorm":{gl:37815,f:MR},"astc-8x8-unorm-srgb":{gl:37847,f:MR},"astc-10x5-unorm":{gl:37819,f:MR},"astc-10x5-unorm-srgb":{gl:37851,f:MR},"astc-10x6-unorm":{gl:37817,f:MR},"astc-10x6-unorm-srgb":{gl:37849,f:MR},"astc-10x8-unorm":{gl:37818,f:MR},"astc-10x8-unorm-srgb":{gl:37850,f:MR},"astc-10x10-unorm":{gl:37819,f:MR},"astc-10x10-unorm-srgb":{gl:37851,f:MR},"astc-12x10-unorm":{gl:37820,f:MR},"astc-12x10-unorm-srgb":{gl:37852,f:MR},"astc-12x12-unorm":{gl:37821,f:MR},"astc-12x12-unorm-srgb":{gl:37853,f:MR},"pvrtc-rgb4unorm-webgl":{gl:35840,f:RR},"pvrtc-rgba4unorm-webgl":{gl:35842,f:RR},"pvrtc-rbg2unorm-webgl":{gl:35841,f:RR},"pvrtc-rgba2unorm-webgl":{gl:35843,f:RR},"etc1-rbg-unorm-webgl":{gl:36196,f:"texture-compression-etc1-webgl"},"atc-rgb-unorm-webgl":{gl:35986,f:NR},"atc-rgba-unorm-webgl":{gl:35986,f:NR},"atc-rgbai-unorm-webgl":{gl:34798,f:NR}},ZR={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},XR={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};function $R(t,e,n){const i=WR[e];if(!i)return!1;if(void 0===i.gl)return!1;const r=i.x||i.gl2ext;return!r||Boolean(bR(t,r,n))}function tN(t){const e=WR[t],n=e?.gl;if(void 0===n)throw new Error(`Unsupported texture format ${t}`);return n}function eN(t){const e=WR[t],n=tN(t),i=Uk(t);return{format:n,dataFormat:e?.dataFormat||iN(i.format,i.integer,i.normalized,n),type:i.dataType?DR(i.dataType):e?.types?.[0]||5121,compressed:i.compressed}}function nN(t){const e=eN(t);return(ZR[e.dataFormat]||4)*(XR[e.type]||1)}function iN(t,e,n,i){if(6408===i||6407===i)return i;switch(t){case"r":return e&&!n?36244:6403;case"rg":return e&&!n?33320:33319;case"rgb":return e&&!n?36248:6407;case"rgba":return e&&!n?36249:6408;default:return 6408}}const rN={"depth-clip-control":"EXT_depth_clamp","timer-query-webgl":"EXT_disjoint_timer_query_webgl2","compilation-status-async-webgl":"KHR_parallel_shader_compile","polygon-mode-webgl":"WEBGL_polygon_mode","provoking-vertex-webgl":"WEBGL_provoking_vertex","shader-clip-cull-distance-webgl":"WEBGL_clip_cull_distance","shader-noperspective-interpolation-webgl":"NV_shader_noperspective_interpolation","shader-conservative-depth-webgl":"EXT_conservative_depth"};class oN extends Kk{gl;extensions;testedFeatures=new Set;constructor(t,e,n){super([],n),this.gl=t,this.extensions=e,bR(t,"EXT_color_buffer_float",e)}*[Symbol.iterator](){const t=this.getFeatures();for(const e of t)this.has(e)&&(yield e);return[]}has(t){return!this.disabledFeatures[t]&&(this.testedFeatures.has(t)||(this.testedFeatures.add(t),function(t){return t in HR}(t)&&VR(this.gl,t,this.extensions)&&this.features.add(t),this.getWebGLFeature(t)&&this.features.add(t)),this.features.has(t))}initializeFeatures(){const t=this.getFeatures().filter((t=>"polygon-mode-webgl"!==t));for(const e of t)this.has(e)}getFeatures(){return[...Object.keys(rN),...Object.keys(HR)]}getWebGLFeature(t){const e=rN[t];return"string"==typeof e?Boolean(bR(this.gl,e,this.extensions)):Boolean(e)}}class sN extends Yk{get maxTextureDimension1D(){return 0}get maxTextureDimension2D(){return this.getParameter(3379)}get maxTextureDimension3D(){return this.getParameter(32883)}get maxTextureArrayLayers(){return this.getParameter(35071)}get maxBindGroups(){return 0}get maxDynamicUniformBuffersPerPipelineLayout(){return 0}get maxDynamicStorageBuffersPerPipelineLayout(){return 0}get maxSampledTexturesPerShaderStage(){return this.getParameter(35660)}get maxSamplersPerShaderStage(){return this.getParameter(35661)}get maxStorageBuffersPerShaderStage(){return 0}get maxStorageTexturesPerShaderStage(){return 0}get maxUniformBuffersPerShaderStage(){return this.getParameter(35375)}get maxUniformBufferBindingSize(){return this.getParameter(35376)}get maxStorageBufferBindingSize(){return 0}get minUniformBufferOffsetAlignment(){return this.getParameter(35380)}get minStorageBufferOffsetAlignment(){return 0}get maxVertexBuffers(){return 16}get maxVertexAttributes(){return this.getParameter(34921)}get maxVertexBufferArrayStride(){return 2048}get maxInterStageShaderComponents(){return this.getParameter(35659)}get maxComputeWorkgroupStorageSize(){return 0}get maxComputeInvocationsPerWorkgroup(){return 0}get maxComputeWorkgroupSizeX(){return 0}get maxComputeWorkgroupSizeY(){return 0}get maxComputeWorkgroupSizeZ(){return 0}get maxComputeWorkgroupsPerDimension(){return 0}gl;limits={};constructor(t){super(),this.gl=t}getParameter(t){return void 0===this.limits[t]&&(this.limits[t]=this.gl.getParameter(t)),this.limits[t]}}class aN extends kn{static defaultProps={...kn.defaultProps,width:1,height:1,colorAttachments:[],depthStencilAttachment:null};get[Symbol.toStringTag](){return"Framebuffer"}width;height;colorAttachments=[];depthStencilAttachment=null;constructor(t,e={}){super(t,e,aN.defaultProps),this.width=this.props.width,this.height=this.props.height}resize(t){let e=!t;if(t){const[n,i]=Array.isArray(t)?t:[t.width,t.height];e=e||i!==this.height||n!==this.width,this.width=n,this.height=i}e&&(br.log(2,`Resizing framebuffer ${this.id} to ${this.width}x${this.height}`)(),this.resizeAttachments(this.width,this.height))}autoCreateAttachmentTextures(){if(0===this.props.colorAttachments.length&&!this.props.depthStencilAttachment)throw new Error("Framebuffer has noattachments");this.colorAttachments=this.props.colorAttachments.map((t=>{if("string"==typeof t){const e=this.createColorTexture(t);return this.attachResource(e),e.view}return t instanceof fr?t.view:t}));const t=this.props.depthStencilAttachment;if(t)if("string"==typeof t){const e=this.createDepthStencilTexture(t);this.attachResource(e),this.depthStencilAttachment=e.view}else this.depthStencilAttachment=t instanceof fr?t.view:t}createColorTexture(t){return this.device.createTexture({id:"color-attachment",usage:fr.RENDER_ATTACHMENT,format:t,width:this.width,height:this.height})}createDepthStencilTexture(t){return this.device.createTexture({id:"depth-stencil-attachment",usage:fr.RENDER_ATTACHMENT,format:t,width:this.width,height:this.height})}resizeAttachments(t,e){for(let n=0;n<this.colorAttachments.length;++n)if(this.colorAttachments[n]){const i=this.device._createTexture({...this.colorAttachments[n].props,width:t,height:e});this.destroyAttachedResource(this.colorAttachments[n]),this.colorAttachments[n]=i.view,this.attachResource(i.view)}if(this.depthStencilAttachment){const n=this.device._createTexture({...this.depthStencilAttachment.props,width:t,height:e});this.destroyAttachedResource(this.depthStencilAttachment),this.depthStencilAttachment=n.view,this.attachResource(n)}}}let AN="";async function lN(t,e){return await new Promise(((n,i)=>{try{const r=new Image;r.onload=()=>n(r),r.onerror=()=>i(new Error(`Could not load image ${t}.`)),r.crossOrigin=e?.crossOrigin||"anonymous",r.src=t.startsWith("http")?t:AN+t}catch(t){i(t)}}))}async function cN(t,e){const n=document.getElementsByTagName("head")[0];if(!n)throw new Error("loadScript");const i=document.createElement("script");return i.setAttribute("type","text/javascript"),i.setAttribute("src",t),e&&(i.id=e),new Promise(((e,r)=>{i.onload=e,i.onerror=e=>r(new Error(`Unable to load script '${t}': ${e}`)),n.appendChild(i)}))}function uN(t,e,n){if(function(t){for(const e in t)return!1;return!0}(e))return n(t);const{nocatch:i=!0}=e;let r;if(ER(t),pR(t,e),i)r=n(t),_R(t);else try{r=n(t)}finally{_R(t)}return r}function hN(t,e){const n=t,{gl:i}=n;if(e.cullMode)switch(e.cullMode){case"none":i.disable(2884);break;case"front":i.enable(2884),i.cullFace(1028);break;case"back":i.enable(2884),i.cullFace(1029)}if(e.frontFace&&i.frontFace(mN("frontFace",e.frontFace,{ccw:2305,cw:2304})),e.unclippedDepth&&t.features.has("depth-clip-control")&&i.enable(34383),void 0!==e.depthBias&&(i.enable(32823),i.polygonOffset(e.depthBias,e.depthBiasSlopeScale||0)),e.provokingVertex&&t.features.has("provoking-vertex-webgl")){const t=n.getExtension("WEBGL_provoking_vertex").WEBGL_provoking_vertex,i=mN("provokingVertex",e.provokingVertex,{first:36429,last:36430});t?.provokingVertexWEBGL(i)}if((e.polygonMode||e.polygonOffsetLine)&&t.features.has("polygon-mode-webgl")){if(e.polygonMode){const t=n.getExtension("WEBGL_polygon_mode").WEBGL_polygon_mode,i=mN("polygonMode",e.polygonMode,{fill:6914,line:6913});t?.polygonModeWEBGL(1028,i),t?.polygonModeWEBGL(1029,i)}e.polygonOffsetLine&&i.enable(10754)}if(t.features.has("shader-clip-cull-distance-webgl")&&(e.clipDistance0&&i.enable(12288),e.clipDistance1&&i.enable(12289),e.clipDistance2&&i.enable(12290),e.clipDistance3&&i.enable(12291),e.clipDistance4&&i.enable(12292),e.clipDistance5&&i.enable(12293),e.clipDistance6&&i.enable(12294),e.clipDistance7&&i.enable(12295)),void 0!==e.depthWriteEnabled&&i.depthMask(e.depthWriteEnabled),e.depthCompare&&("always"!==e.depthCompare?i.enable(2929):i.disable(2929),i.depthFunc(gN("depthCompare",e.depthCompare))),e.stencilWriteMask){const t=e.stencilWriteMask;i.stencilMaskSeparate(1028,t),i.stencilMaskSeparate(1029,t)}if(e.stencilReadMask&&br.warn("stencilReadMask not supported under WebGL"),e.stencilCompare){const t=e.stencilReadMask||4294967295,n=gN("depthCompare",e.stencilCompare);"always"!==e.stencilCompare?i.enable(2960):i.disable(2960),i.stencilFuncSeparate(1028,n,0,t),i.stencilFuncSeparate(1029,n,0,t)}if(e.stencilPassOperation&&e.stencilFailOperation&&e.stencilDepthFailOperation){const t=dN("stencilPassOperation",e.stencilPassOperation),n=dN("stencilFailOperation",e.stencilFailOperation),r=dN("stencilDepthFailOperation",e.stencilDepthFailOperation);i.stencilOpSeparate(1028,n,r,t),i.stencilOpSeparate(1029,n,r,t)}if(e.blendColorOperation||e.blendAlphaOperation){i.enable(3042);const t=pN("blendColorOperation",e.blendColorOperation||"add"),n=pN("blendAlphaOperation",e.blendAlphaOperation||"add");i.blendEquationSeparate(t,n);const r=fN("blendColorSrcFactor",e.blendColorSrcFactor||"one"),o=fN("blendColorDstFactor",e.blendColorDstFactor||"zero"),s=fN("blendAlphaSrcFactor",e.blendAlphaSrcFactor||"one"),a=fN("blendAlphaDstFactor",e.blendAlphaDstFactor||"zero");i.blendFuncSeparate(r,o,s,a)}}function gN(t,e){return mN(t,e,{never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519})}function dN(t,e){return mN(t,e,{keep:7680,zero:0,replace:7681,invert:5386,"increment-clamp":7682,"decrement-clamp":7683,"increment-wrap":34055,"decrement-wrap":34056})}function pN(t,e){return mN(t,e,{add:32774,subtract:32778,"reverse-subtract":32779,min:32775,max:32776})}function fN(t,e){return mN(t,e,{one:1,zero:0,"src-color":768,"one-minus-src-color":769,"dst-color":774,"one-minus-dst-color":775,"src-alpha":770,"one-minus-src-alpha":771,"dst-alpha":772,"one-minus-dst-alpha":773,"src-alpha-saturated":776,"constant-color":32769,"one-minus-constant-color":32770,"constant-alpha":32771,"one-minus-constant-alpha":32772})}function mN(t,e,n){if(!(e in n))throw new Error(function(t,e){return`Illegal parameter ${e} for ${t}`}(t,e));return n[e]}function IN(t){const e={};return t.addressModeU&&(e[10242]=yN(t.addressModeU)),t.addressModeV&&(e[10243]=yN(t.addressModeV)),t.addressModeW&&(e[32882]=yN(t.addressModeW)),t.magFilter&&(e[10240]=CN(t.magFilter)),(t.minFilter||t.mipmapFilter)&&(e[10241]=function(t,e){if(!e)return CN(t);switch(t){case"nearest":return"nearest"===e?9984:9986;case"linear":return"nearest"===e?9985:9987}}(t.minFilter||"linear",t.mipmapFilter)),void 0!==t.lodMinClamp&&(e[33082]=t.lodMinClamp),void 0!==t.lodMaxClamp&&(e[33083]=t.lodMaxClamp),"comparison-sampler"===t.type&&(e[34892]=34894),t.compare&&(e[34893]=gN("compare",t.compare)),t.maxAnisotropy&&(e[34046]=t.maxAnisotropy),e}function yN(t){switch(t){case"clamp-to-edge":return 33071;case"repeat":return 10497;case"mirror-repeat":return 33648}}function CN(t){switch(t){case"nearest":return 9728;case"linear":return 9729}}class EN extends Rn{device;gl;handle;glTarget;glUsage;glIndexType=5123;byteLength;bytesUsed;constructor(t,e={}){super(t,e),this.device=t,this.gl=this.device.gl;const n="object"==typeof e?e.handle:void 0;this.handle=n||this.gl.createBuffer(),t.setSpectorMetadata(this.handle,{...this.props,data:typeof this.props.data}),this.glTarget=function(t){if(t&Rn.INDEX)return 34963;if(t&Rn.VERTEX)return 34962;if(t&Rn.UNIFORM)return 35345;return 34962}(this.props.usage),this.glUsage=function(t){if(t&Rn.INDEX)return 35044;if(t&Rn.VERTEX)return 35044;if(t&Rn.UNIFORM)return 35048;return 35044}(this.props.usage),this.glIndexType="uint32"===this.props.indexType?5125:5123,e.data?this._initWithData(e.data,e.byteOffset,e.byteLength):this._initWithByteLength(e.byteLength||0)}_initWithData(t,e=0,n=t.byteLength+e){const i=this.glTarget;this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,this.glUsage),this.gl.bufferSubData(i,e,t),this.gl.bindBuffer(i,null),this.bytesUsed=n,this.byteLength=n,this._setDebugData(t,e,n),this.trackAllocatedMemory(n)}_initWithByteLength(t){gr(t>=0);let e=t;0===t&&(e=new Float32Array(0));const n=this.glTarget;return this.gl.bindBuffer(n,this.handle),this.gl.bufferData(n,e,this.glUsage),this.gl.bindBuffer(n,null),this.bytesUsed=t,this.byteLength=t,this._setDebugData(null,0,t),this.trackAllocatedMemory(t),this}destroy(){!this.destroyed&&this.handle&&(this.removeStats(),this.trackDeallocatedMemory(),this.gl.deleteBuffer(this.handle),this.destroyed=!0,this.handle=null)}write(t,e=0){const n=36663;this.gl.bindBuffer(n,this.handle),this.gl.bufferSubData(n,e,t),this.gl.bindBuffer(n,null),this._setDebugData(t,e,t.byteLength)}async readAsync(t=0,e){return this.readSyncWebGL(t,e)}readSyncWebGL(t=0,e){e=e??this.byteLength-t;const n=new Uint8Array(e);return this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,t,n,0,e),this.gl.bindBuffer(36662,null),this._setDebugData(n,t,e),n}}class _N extends mr{device;handle;parameters;constructor(t,e){super(t,e),this.device=t,this.parameters=IN(e),this.handle=this.handle||this.device.gl.createSampler(),this._setSamplerParameters(this.parameters)}destroy(){this.handle&&(this.device.gl.deleteSampler(this.handle),this.handle=void 0)}toString(){return`Sampler(${this.id},${JSON.stringify(this.props)})`}_setSamplerParameters(t){for(const[e,n]of Object.entries(t)){const t=Number(e);switch(t){case 33082:case 33083:this.device.gl.samplerParameterf(this.handle,t,n);break;default:this.device.gl.samplerParameteri(this.handle,t,n)}}}}class vN extends pr{device;gl;handle;texture;constructor(t,e){super(t,{...fr.defaultProps,...e}),this.device=t,this.gl=this.device.gl,this.handle=null,this.texture=e.texture}}const BN={parameters:{},pixelStore:{},pixels:null,border:0,dataFormat:void 0,textureUnit:void 0,target:void 0};class wN extends fr{static FACES=[34069,34070,34071,34072,34073,34074];MAX_ATTRIBUTES;device;gl;handle;sampler=void 0;view=void 0;glFormat=void 0;type=void 0;dataFormat=void 0;mipmaps=void 0;target;textureUnit=void 0;loaded=!1;_video;constructor(t,e){super(t,{...BN,format:"rgba8unorm",...e}),this.device=t,this.gl=this.device.gl,this.handle=this.props.handle||this.gl.createTexture(),this.device.setSpectorMetadata(this.handle,{...this.props,data:typeof this.props.data}),this.glFormat=6408,this.target=function(t){switch(t.dimension){case"2d":return 3553;case"cube":return 34067;case"2d-array":return 35866;case"3d":return 32879;default:throw new Error(t.dimension)}}(this.props),this.loaded=!1,"string"==typeof this.props?.data&&Object.assign(this.props,{data:lN(this.props.data)}),this.initialize(this.props),Object.seal(this)}destroy(){this.handle&&(this.gl.deleteTexture(this.handle),this.removeStats(),this.trackDeallocatedMemory("Texture"),this.destroyed=!0)}toString(){return`Texture(${this.id},${this.width}x${this.height})`}createView(t){return new vN(this.device,{...t,texture:this})}initialize(t={}){if("cube"===this.props.dimension)return this.initializeCube(t);let e=t.data;if(e instanceof Promise)return e.then((e=>this.initialize(Object.assign({},t,{pixels:e,data:e})))),this;const n="undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement;if(n&&e.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,e.addEventListener("loadeddata",(()=>this.initialize(t))),this;const{parameters:i={}}=t,{pixels:r=null,pixelStore:o={},textureUnit:s,mipmaps:a=!0}=t;e||(e=r);let{width:A,height:l,dataFormat:c,type:u,compressed:h=!1}=t;const{depth:g=0}=t,d=tN(t.format);return({width:A,height:l,compressed:h,dataFormat:c,type:u}=this._deduceParameters({format:t.format,type:u,dataFormat:c,compressed:h,data:e,width:A,height:l})),this.width=A,this.height=l,this.glFormat=d,this.type=u,this.dataFormat=c,this.textureUnit=s,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),this.mipmaps=a,this.setImageData({data:e,width:A,height:l,depth:g,format:t.format,type:u,dataFormat:c,parameters:o,compressed:h}),this.setSampler(t.sampler),this._setSamplerParameters(i),this.view=this.createView({...this.props,mipLevelCount:1,arrayLayerCount:1}),a&&this.device.isTextureFormatFilterable(t.format)&&this.generateMipmap(),n&&(this._video={video:e,parameters:i,lastTime:e.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?e.currentTime:-1}),this}initializeCube(t){const{mipmaps:e=!0,parameters:n={}}=t;return this.setCubeMapImageData(t).then((()=>{this.loaded=!0,e&&this.generateMipmap(t),this.setSampler(t.sampler),this._setSamplerParameters(n)})),this}setSampler(t={}){let e;t instanceof _N?(this.sampler=t,e=t.props):(this.sampler=new _N(this.device,t),e=t);const n=IN(e);return this._setSamplerParameters(n),this}resize(t){const{height:e,width:n,mipmaps:i=!1}=t;return n!==this.width||e!==this.height?this.initialize({width:n,height:e,format:this.format,type:this.type,dataFormat:this.dataFormat,mipmaps:i}):this}update(){if(this._video){const{video:t,parameters:e,lastTime:n}=this._video;if(n===t.currentTime||t.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:t,parameters:e}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=t.currentTime}}generateMipmap(t={}){return this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),uN(this.gl,t,(()=>{this.gl.generateMipmap(this.target)})),this.gl.bindTexture(this.target,null),this}setImageData(t){if("3d"===this.props.dimension||"2d-array"===this.props.dimension)return this.setImageData3D(t);this.trackDeallocatedMemory("Texture");const{target:e=this.target,pixels:n=null,level:i=0,glFormat:r=this.glFormat,offset:o=0,parameters:s={}}=t;let{data:a=null,type:A=this.type,width:l=this.width,height:c=this.height,dataFormat:u=this.dataFormat,compressed:h=!1}=t;a||(a=n),({type:A,dataFormat:u,compressed:h,width:l,height:c}=this._deduceParameters({format:this.props.format,type:A,dataFormat:u,compressed:h,data:a,width:l,height:c}));const{gl:g}=this;g.bindTexture(this.target,this.handle);let d=null;if(({data:a,dataType:d}=this._getDataType({data:a,compressed:h})),uN(this.gl,s,(()=>{switch(d){case"null":case"browser-object":g.texImage2D(e,i,r,l,c,0,u,A,a);break;case"typed-array":g.texImage2D(e,i,r,l,c,0,u,A,a,o);break;case"buffer":this.device.gl.bindBuffer(35052,a.handle||a),this.device.gl.texImage2D(e,i,r,l,c,0,u,A,o),this.device.gl.bindBuffer(35052,null);break;case"compressed":for(const[t,n]of a.entries())g.compressedTexImage2D(e,t,n.format,n.width,n.height,0,n.data);break;default:gr(!1,"Unknown image data type")}})),a&&a.byteLength)this.trackAllocatedMemory(a.byteLength,"Texture");else{const t=nN(this.props.format);this.trackAllocatedMemory(this.width*this.height*t,"Texture")}return this.loaded=!0,this}setSubImageData({target:t=this.target,pixels:e=null,data:n=null,x:i=0,y:r=0,width:o=this.width,height:s=this.height,level:a=0,glFormat:A=this.glFormat,type:l=this.type,dataFormat:c=this.dataFormat,compressed:u=!1,offset:h=0,parameters:g={}}){if(({type:l,dataFormat:c,compressed:u,width:o,height:s}=this._deduceParameters({format:this.props.format,type:l,dataFormat:c,compressed:u,data:n,width:o,height:s})),gr(1===this.depth,"texSubImage not supported for 3D textures"),n||(n=e),n&&n.data){const t=n;n=t.data,o=t.shape[0],s=t.shape[1]}n instanceof EN&&(n=n.handle),this.gl.bindTexture(this.target,this.handle),uN(this.gl,g,(()=>{u?this.gl.compressedTexSubImage2D(t,a,i,r,o,s,A,n):null===n?this.gl.texSubImage2D(t,a,i,r,o,s,c,l,null):ArrayBuffer.isView(n)?this.gl.texSubImage2D(t,a,i,r,o,s,c,l,n,h):"undefined"!=typeof WebGLBuffer&&n instanceof WebGLBuffer?(this.device.gl.bindBuffer(35052,n),this.device.gl.texSubImage2D(t,a,i,r,o,s,c,l,h),this.device.gl.bindBuffer(35052,null)):this.device.gl.texSubImage2D(t,a,i,r,o,s,c,l,n)})),this.gl.bindTexture(this.target,null)}copyFramebuffer(t={}){return br.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(t=this.textureUnit){const{gl:e}=this;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,this.handle),t}unbind(t=this.textureUnit){const{gl:e}=this;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,null),t}_getDataType({data:t,compressed:e=!1}){return e?{data:t,dataType:"compressed"}:null===t?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof EN?{data:t.handle,dataType:"buffer"}:"undefined"!=typeof WebGLBuffer&&t instanceof WebGLBuffer?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}_deduceParameters(t){const{format:e,data:n}=t;let{width:i,height:r,dataFormat:o,type:s,compressed:a}=t;const A=eN(e);return o=o||A.dataFormat,s=s||A.type,a=a||A.compressed,({width:i,height:r}=this._deduceImageSize(n,i,r)),{dataFormat:o,type:s,compressed:a,width:i,height:r,format:e,data:n}}_deduceImageSize(t,e,n){let i;return i="undefined"!=typeof ImageData&&t instanceof ImageData?{width:t.width,height:t.height}:"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement?{width:t.naturalWidth,height:t.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?{width:t.width,height:t.height}:"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:t?{width:e,height:n}:{width:e>=0?e:1,height:n>=0?n:1},gr(i,"Could not deduced texture size"),gr(void 0===e||i.width===e,"Deduced texture width does not match supplied width"),gr(void 0===n||i.height===n,"Deduced texture height does not match supplied height"),i}async setCubeMapImageData(t){const{gl:e}=this,{width:n,height:i,pixels:r,data:o,format:s=6408,type:a=5121}=t,A=r||o,l=await Promise.all(wN.FACES.map((t=>{const e=A[t];return Promise.all(Array.isArray(e)?e:[e])})));this.bind(),wN.FACES.forEach(((t,r)=>{l[r].length>1&&!1!==this.props.mipmaps&&br.warn(`${this.id} has mipmap and multiple LODs.`)(),l[r].forEach(((r,o)=>{n&&i?e.texImage2D(t,o,s,n,i,0,s,a,r):e.texImage2D(t,o,s,s,a,r)}))})),this.unbind()}setImageDataForFace(t){const{face:e,width:n,height:i,pixels:r,data:o,format:s=6408,type:a=5121}=t,{gl:A}=this,l=r||o;return this.bind(),l instanceof Promise?l.then((n=>this.setImageDataForFace(Object.assign({},t,{face:e,data:n,pixels:n})))):this.width||this.height?A.texImage2D(e,0,s,n,i,0,s,a,l):A.texImage2D(e,0,s,s,a,l),this}setImageData3D(t){const{level:e=0,dataFormat:n,format:i,type:r,width:o,height:s,depth:a=1,offset:A=0,data:l,parameters:c={}}=t;this.trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle);const u=eN(i);if(uN(this.gl,c,(()=>{ArrayBuffer.isView(l)&&this.gl.texImage3D(this.target,e,u.format,o,s,a,0,u.dataFormat,u.type,l),l instanceof EN&&(this.gl.bindBuffer(35052,l.handle),this.gl.texImage3D(this.target,e,n,o,s,a,0,i,r,A))})),l&&l.byteLength)this.trackAllocatedMemory(l.byteLength,"Texture");else{const t=nN(this.props.format);this.trackAllocatedMemory(this.width*this.height*this.depth*t,"Texture")}return this.loaded=!0,this}_setSamplerParameters(t){if(!Mn(t)){!function(t){br.log(1,"texture sampler parameters",t)()}(t),this.gl.bindTexture(this.target,this.handle);for(const[e,n]of Object.entries(t)){const t=Number(e),i=n;switch(t){case 33082:case 33083:this.gl.texParameterf(this.target,t,i);break;default:this.gl.texParameteri(this.target,t,i)}}this.gl.bindTexture(this.target,null)}}}class bN extends aN{device;gl;handle;get texture(){return this.colorAttachments[0]}constructor(t,e){super(t,e);const n=null===e.handle;if(this.device=t,this.gl=t.gl,this.handle=this.props.handle||n?this.props.handle:this.gl.createFramebuffer(),!n){t.setSpectorMetadata(this.handle,{id:this.props.id,props:this.props}),this.autoCreateAttachmentTextures();const n=this.gl.bindFramebuffer(36160,this.handle);for(let t=0;t<this.colorAttachments.length;++t){const e=this.colorAttachments[t],n=36064+t;e&&this._attachOne(n,e)}if(this.depthStencilAttachment&&this._attachOne(function(t){const e=WR[t];if(!e?.attachment)throw new Error(`${t} is not a depth stencil format`);return e.attachment}(this.depthStencilAttachment.props.format),this.depthStencilAttachment),!1!==e.check){const t=this.gl.checkFramebufferStatus(36160);if(36053!==t)throw new Error(`Framebuffer ${function(t){switch(t){case 36053:return"success";case 36054:return"Mismatched attachments";case 36055:return"No attachments";case 36057:return"Height/width mismatch";case 36061:return"Unsupported or split attachments";case 36182:return"Samples mismatch";default:return`${t}`}}(t)}`)}this.gl.bindFramebuffer(36160,n)}}destroy(){super.destroy(),this.destroyed||null===this.handle||this.gl.deleteFramebuffer(this.handle)}createDepthStencilTexture(t){return new wN(this.device,{id:`${this.id}-depth-stencil`,format:t,width:this.width,height:this.height,mipmaps:!1})}resizeAttachments(t,e){if(null===this.handle)return this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===t&&(t=this.gl.drawingBufferWidth),void 0===e&&(e=this.gl.drawingBufferHeight);for(const n of this.colorAttachments)n.texture.resize({width:t,height:e});return this.depthStencilAttachment&&this.depthStencilAttachment.texture.resize({width:t,height:e}),this}_attachOne(t,e){if(Array.isArray(e)){const[n,i=0,r=0]=e;return this._attachTexture(t,n,i,r),n}if(e instanceof wN)return this._attachTexture(t,e,0,0),e;if(e instanceof vN){const n=e;return this._attachTexture(t,n.texture,n.props.baseMipLevel,n.props.baseArrayLayer),e.texture}throw new Error("attach")}_attachTexture(t,e,n,i){const{gl:r}=this.device;switch(r.bindTexture(e.target,e.handle),e.target){case 35866:case 32879:r.framebufferTextureLayer(36160,t,e.target,i,n);break;case 34067:const o=function(t){return t<34069?t+34069:t}(n);r.framebufferTexture2D(36160,t,o,e.handle,i);break;case 3553:r.framebufferTexture2D(36160,t,3553,e.handle,i);break;default:gr(!1,"Illegal texture type")}r.bindTexture(e.target,null)}}class QN extends Xk{device;presentationSize;_framebuffer=null;constructor(t,e){super(e),this.device=t,this.presentationSize=[-1,-1],this._setAutoCreatedCanvasId(`${this.device.id}-canvas`),this.update()}getCurrentFramebuffer(){return this.update(),this._framebuffer=this._framebuffer||new bN(this.device,{handle:null}),this._framebuffer}update(){const t=this.getPixelSize();(t[0]!==this.presentationSize[0]||t[1]!==this.presentationSize[1])&&(this.presentationSize=t,this.resize())}resize(t){if(this.device.gl)if(this.canvas){const e=this.getDevicePixelRatio(t?.useDevicePixels);this.setDevicePixelRatio(e,t)}else;}commit(){}}const xN={spector:br.get("spector")||br.get("spectorjs")};let DN=null,SN=!1;function MN(t){return t.luma=t.luma||{},t.luma}function kN(t,e={}){return t?e.debug?function(t,e){if(!globalThis.WebGLDebugUtils)return br.warn("webgl-debug not loaded")(),t;const n=MN(t);if(n.debugContext)return n.debugContext;globalThis.WebGLDebugUtils.init({...Dg,...t});const i=globalThis.WebGLDebugUtils.makeDebugContext(t,NN.bind(null,e),PN.bind(null,e));for(const t in Dg)t in i||"number"!=typeof Dg[t]||(i[t]=Dg[t]);class r{}Object.setPrototypeOf(i,Object.getPrototypeOf(t)),Object.setPrototypeOf(r,i);const o=Object.create(r);return n.realContext=t,n.debugContext=o,o.debug=!0,o}(t,e):function(t){const e=MN(t);return e.realContext?e.realContext:t}(t):null}function RN(t,e){e=Array.from(e).map((t=>void 0===t?"undefined":t));let n=globalThis.WebGLDebugUtils.glFunctionArgsToString(t,e);return n=`${n.slice(0,100)}${n.length>100?"...":""}`,`gl.${t}(${n})`}function NN(t,e,n,i){i=Array.from(i).map((t=>void 0===t?"undefined":t));const r=`${globalThis.WebGLDebugUtils.glEnumToString(e)} in gl.${n}(${globalThis.WebGLDebugUtils.glFunctionArgsToString(n,i)})`;if(br.error(r)(),t.throwOnError)throw new Error(r)}function PN(t,e,n){let i="";if(br.level>=1&&(i=RN(e,n),br.log(1,i)()),t.break&&t.break.length>0){i=i||RN(e,n);t.break.every((t=>-1!==i.indexOf(t)))}for(const r of n)if(void 0===r){if(i=i||RN(e,n),t.throwOnError)throw new Error(`Undefined argument: ${i}`);br.error(`Undefined argument: ${i}`)()}}function TN(t){const e=t.toLowerCase();return["warning","error","info"].includes(e)?e:"info"}class LN extends ra{device;handle;constructor(t,e){switch(super(t,e),this.device=t,this.props.stage){case"vertex":this.handle=this.props.handle||this.device.gl.createShader(35633);break;case"fragment":this.handle=this.props.handle||this.device.gl.createShader(35632);break;default:throw new Error(this.props.stage)}this._compile(this.source)}destroy(){this.handle&&(this.removeStats(),this.device.gl.deleteShader(this.handle),this.destroyed=!0)}async getCompilationInfo(){return await this._waitForCompilationComplete(),this.getCompilationInfoSync()}getCompilationInfoSync(){return function(t){const e=t.split(/\r?\n/),n=[];for(const t of e){if(t.length<=1)continue;const e=t.split(":");if(2===e.length){const[t,i]=e;n.push({message:i.trim(),type:TN(t),lineNum:0,linePos:0});continue}const[i,r,o,...s]=e;let a=parseInt(o,10);isNaN(a)&&(a=0);let A=parseInt(r,10);isNaN(A)&&(A=0),n.push({message:s.join(":").trim(),type:TN(i),lineNum:a,linePos:A})}return n}(this.device.gl.getShaderInfoLog(this.handle))}getTranslatedSource(){const t=this.device.getExtension("WEBGL_debug_shaders").WEBGL_debug_shaders;return t?.getTranslatedShaderSource(this.handle)}async _compile(t){t=(t=>t.startsWith("#version ")?t:`#version 100\n${t}`)(t);const{gl:e}=this.device;if(e.shaderSource(this.handle,t),e.compileShader(this.handle),0!==br.level){if(this.device.features.has("compilation-status-async-webgl"))br.once(1,"Shader compilation is asynchronous")(),await this._waitForCompilationComplete(),br.info(2,`Shader ${this.id} - async compilation complete: ${this.compilationStatus}`)(),this._getCompilationStatus(),this.debugShader();else if(this._getCompilationStatus(),this.debugShader(),"error"===this.compilationStatus)throw new Error(`GLSL compilation errors in ${this.props.stage} shader ${this.props.id}`)}else this.compilationStatus="pending"}async _waitForCompilationComplete(){const t=async t=>await new Promise((e=>setTimeout(e,t)));if(!this.device.features.has("compilation-status-async-webgl"))return void await t(10);const{gl:e}=this.device;for(;;){if(e.getShaderParameter(this.handle,37297))return;await t(10)}}_getCompilationStatus(){this.compilationStatus=this.device.gl.getShaderParameter(this.handle,35713)?"success":"error"}}class FN extends kn{static defaultProps={...kn.defaultProps,framebuffer:null,parameters:void 0,clearColor:[0,0,0,0],clearDepth:1,clearStencil:0,depthReadOnly:!1,stencilReadOnly:!1,discard:!1,occlusionQuerySet:void 0,timestampQuerySet:void 0,beginTimestampIndex:void 0,endTimestampIndex:void 0};get[Symbol.toStringTag](){return"RenderPass"}constructor(t,e){super(t,e,FN.defaultProps)}}const ON=6144,GN=[1,2,4,8];class UN extends FN{device;glParameters;constructor(t,e){super(t,e),this.device=t,ER(this.device.gl),this.setParameters(this.props.parameters),this.clear()}end(){_R(this.device.gl)}pushDebugGroup(t){}popDebugGroup(){}insertDebugMarker(t){}setParameters(t={}){const e={...this.glParameters};this.props.framebuffer&&(e.framebuffer=this.props.framebuffer),this.props.depthReadOnly&&(e.depthMask=!this.props.depthReadOnly),e.stencilMask=this.props.stencilReadOnly?0:1,e[35977]=this.props.discard,t.viewport&&(t.viewport.length>=6?(e.viewport=t.viewport.slice(0,4),e.depthRange=[t.viewport[4],t.viewport[5]]):e.viewport=t.viewport),t.scissorRect&&(e.scissorTest=!0,e.scissor=t.scissorRect),t.blendConstant&&(e.blendColor=t.blendConstant),t.stencilReference&&(console.warn("RenderPassParameters.stencilReference not yet implemented in WebGL"),t[2967]=t.stencilReference),t.colorMask&&(e.colorMask=GN.map((e=>Boolean(e&t.colorMask)))),this.glParameters=e,pR(this.device.gl,e)}beginOcclusionQuery(t){const e=this.props.occlusionQuerySet;e?.beginOcclusionQuery()}endOcclusionQuery(){const t=this.props.occlusionQuerySet;t?.endOcclusionQuery()}clear(){const t={...this.glParameters};let e=0;!1!==this.props.clearColor&&(e|=16384,t.clearColor=this.props.clearColor),!1!==this.props.clearDepth&&(e|=256,t.clearDepth=this.props.clearDepth),!1!==this.props.clearStencil&&(e|=1024,t.clearStencil=this.props.clearStencil),0!==e&&uN(this.device.gl,t,(()=>{this.device.gl.clear(e)}))}clearColorBuffer(t=0,e=[0,0,0,0]){uN(this.device.gl,{framebuffer:this.props.framebuffer},(()=>{switch(e.constructor){case Int32Array:this.device.gl.clearBufferiv(ON,t,e);break;case Uint32Array:this.device.gl.clearBufferuiv(ON,t,e);break;case Float32Array:default:this.device.gl.clearBufferfv(ON,t,e)}}))}}const jN="Failed to deduce GL constant from typed array";function YN(t,e){const{clamped:n=!0}=e||{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return n?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}const KN={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},zN={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class JN{offset;stride;type;size;divisor;normalized;integer;buffer;index;static getBytesPerElement(t){return YN(t.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(t){gr(t.size);return YN(t.type||5126).BYTES_PER_ELEMENT*t.size}static resolve(...t){return new JN(...[KN,...t])}constructor(...t){t.forEach((t=>this._assign(t))),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return JN.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return JN.getBytesPerVertex(this)}_assign(t={}){return void 0!==(t=function(t,e,n){const{removedProps:i={},deprecatedProps:r={},replacedProps:o={}}=n;for(const n in i)if(n in e){const e=i[n]?`${t}.${i[n]}`:"N/A";br.removed(`${t}.${n}`,e)()}for(const n in r)if(n in e){const e=r[n];br.deprecated(`${t}.${n}`,`${t}.${e}`)()}let s=null;for(const[n,i]of Object.entries(o))n in e&&(br.deprecated(`${t}.${n}`,`${t}.${i}`)(),s=s||Object.assign({},e),s[i]=e[n],delete s[n]);return s||e}("Accessor",t,zN)).type&&(this.type=t.type,5124!==t.type&&5125!==t.type||(this.integer=!0)),void 0!==t.size&&(this.size=t.size),void 0!==t.offset&&(this.offset=t.offset),void 0!==t.stride&&(this.stride=t.stride),void 0!==t.normalize&&(this.normalized=t.normalize),void 0!==t.normalized&&(this.normalized=t.normalized),void 0!==t.integer&&(this.integer=t.integer),void 0!==t.divisor&&(this.divisor=t.divisor),void 0!==t.buffer&&(this.buffer=t.buffer),void 0!==t.index&&("boolean"==typeof t.index?this.index=t.index?1:0:this.index=t.index),void 0!==t.instanced&&(this.divisor=t.instanced?1:0),void 0!==t.isInstanced&&(this.divisor=t.isInstanced?1:0),void 0===this.offset&&delete this.offset,void 0===this.stride&&delete this.stride,void 0===this.type&&delete this.type,void 0===this.size&&delete this.size,void 0===this.divisor&&delete this.divisor,void 0===this.normalized&&delete this.normalized,void 0===this.integer&&delete this.integer,void 0===this.buffer&&delete this.buffer,void 0===this.index&&delete this.index,this}}function qN(t){return HN.includes(t)}const HN=[35678,35680,35679,35682,36289,36292,36293,36298,36299,36300,36303,36306,36307,36308,36311],VN={5126:[5126,1,"float","f32","float32"],35664:[5126,2,"vec2","vec2<f32>","float32x2"],35665:[5126,3,"vec3","vec3<f32>","float32x3"],35666:[5126,4,"vec4","vec4<f32>","float32x4"],5124:[5124,1,"int","i32","sint32"],35667:[5124,2,"ivec2","vec2<i32>","sint32x2"],35668:[5124,3,"ivec3","vec3<i32>","sint32x3"],35669:[5124,4,"ivec4","vec4<i32>","sint32x4"],5125:[5125,1,"uint","u32","uint32"],36294:[5125,2,"uvec2","vec2<u32>","uint32x2"],36295:[5125,3,"uvec3","vec3<u32>","uint32x3"],36296:[5125,4,"uvec4","vec4<u32>","uint32x4"],35670:[5126,1,"bool","f32","float32"],35671:[5126,2,"bvec2","vec2<f32>","float32x2"],35672:[5126,3,"bvec3","vec3<f32>","float32x3"],35673:[5126,4,"bvec4","vec4<f32>","float32x4"],35674:[5126,8,"mat2","mat2x2<f32>"],35685:[5126,8,"mat2x3","mat2x3<f32>"],35686:[5126,8,"mat2x4","mat2x4<f32>"],35687:[5126,12,"mat3x2","mat3x2<f32>"],35675:[5126,12,"mat3","mat3x3<f32>"],35688:[5126,12,"mat3x4","mat3x4<f32>"],35689:[5126,16,"mat4x2","mat4x2<f32>"],35690:[5126,16,"mat4x3","mat4x3<f32>"],35676:[5126,16,"mat4","mat4x4<f32>"]};function WN(t){const e=VN[t];if(!e)throw new Error("uniform");const[n,i,,r]=e;return{format:r,components:i,glType:n}}function ZN(t){const e=VN[t];if(!e)throw new Error("attribute");const[,n,,i,r]=e;return{attributeType:i,vertexFormat:r,components:n}}function XN(t,e){const n={attributes:[],bindings:[]};n.attributes=function(t,e){const n=[],i=t.getProgramParameter(e,35721);for(let r=0;r<i;r++){const i=t.getActiveAttrib(e,r);if(!i)throw new Error("activeInfo");const{name:o,type:s}=i,a=t.getAttribLocation(e,o);if(a>=0){const{attributeType:t}=ZN(s),e=/instance/i.test(o)?"instance":"vertex";n.push({name:o,location:a,stepMode:e,type:t})}}return n.sort(((t,e)=>t.location-e.location)),n}(t,e);const i=function(t,e){const n=(n,i)=>t.getActiveUniformBlockParameter(e,n,i),i=[],r=t.getProgramParameter(e,35382);for(let o=0;o<r;o++){const r={name:t.getActiveUniformBlockName(e,o)||"",location:n(o,35391),byteLength:n(o,35392),vertex:n(o,35396),fragment:n(o,35398),uniformCount:n(o,35394),uniforms:[]},s=n(o,35395)||[],a=t.getActiveUniforms(e,s,35383),A=t.getActiveUniforms(e,s,35384),l=t.getActiveUniforms(e,s,35387),c=t.getActiveUniforms(e,s,35388);for(let n=0;n<r.uniformCount;++n){const i=t.getActiveUniform(e,s[n]);if(!i)throw new Error("activeInfo");r.uniforms.push({name:i.name,format:WN(a[n]).format,type:a[n],arrayLength:A[n],byteOffset:l[n],byteStride:c[n]})}i.push(r)}return i.sort(((t,e)=>t.location-e.location)),i}(t,e);for(const t of i){const e=t.uniforms.map((t=>({name:t.name,format:t.format,byteOffset:t.byteOffset,byteStride:t.byteStride,arrayLength:t.arrayLength})));n.bindings.push({type:"uniform",name:t.name,location:t.location,visibility:(t.vertex?1:0)&(t.fragment?2:0),minBindingSize:t.byteLength,uniforms:e})}const r=function(t,e){const n=[],i=t.getProgramParameter(e,35718);for(let r=0;r<i;r++){const i=t.getActiveUniform(e,r);if(!i)throw new Error("activeInfo");const{name:o,size:s,type:a}=i,{name:A,isArray:l}=eP(o);let c=t.getUniformLocation(e,A);const u={location:c,name:A,size:s,type:a,isArray:l};if(n.push(u),u.size>1)for(let i=0;i<u.size;i++){const r=`${A}[${i}]`;c=t.getUniformLocation(e,r);const o={...u,name:r,location:c};n.push(o)}}return n}(t,e);let o=0;for(const t of r)if(qN(t.type)){const{viewDimension:e,sampleType:i}=tP(t.type);n.bindings.push({type:"texture",name:t.name,location:o,viewDimension:e,sampleType:i}),t.textureUnit=o,o+=1}r.length&&(n.uniforms=r);const s=function(t,e){const n=[],i=t.getProgramParameter(e,35971);for(let r=0;r<i;r++){const i=t.getTransformFeedbackVarying(e,r);if(!i)throw new Error("activeInfo");const{name:o,type:s,size:a}=i,{glType:A,components:l}=WN(s),c={location:r,name:o,accessor:new JN({type:A,size:a*l})};n.push(c)}return n.sort(((t,e)=>t.location-e.location)),n}(t,e);return s?.length&&(n.varyings=s),n}const $N={35678:["2d","float"],35680:["cube","float"],35679:["3d","float"],35682:["3d","depth"],36289:["2d-array","float"],36292:["2d-array","depth"],36293:["cube","float"],36298:["2d","sint"],36299:["3d","sint"],36300:["cube","sint"],36303:["2d-array","uint"],36306:["2d","uint"],36307:["3d","uint"],36308:["cube","uint"],36311:["2d-array","uint"]};function tP(t){const e=$N[t];if(!e)throw new Error("sampler");const[n,i]=e;return{viewDimension:n,sampleType:i}}function eP(t){if("]"!==t[t.length-1])return{name:t,length:1,isArray:!1};const e=/([^[]*)(\[[0-9]+\])?/.exec(t);if(!e||e.length<2)throw new Error(`Failed to parse GLSL uniform name ${t}`);return{name:e[1],length:e[2]?1:0,isArray:Boolean(e[2])}}function nP(t,e,n,i){const r=t;let o=i;!0===o&&(o=1),!1===o&&(o=0);const s="number"==typeof o?[o]:o;switch(n){case 35678:case 35680:case 35679:case 35682:case 36289:case 36292:case 36293:case 36298:case 36299:case 36300:case 36303:case 36306:case 36307:case 36308:case 36311:if("number"!=typeof i)throw new Error("samplers must be set to integers");return t.uniform1i(e,i);case 5126:return t.uniform1fv(e,s);case 35664:return t.uniform2fv(e,s);case 35665:return t.uniform3fv(e,s);case 35666:return t.uniform4fv(e,s);case 5124:case 35670:return t.uniform1iv(e,s);case 35667:case 35671:return t.uniform2iv(e,s);case 35668:case 35672:return t.uniform3iv(e,s);case 35669:case 35673:return t.uniform4iv(e,s);case 5125:return r.uniform1uiv(e,s,1);case 36294:return r.uniform2uiv(e,s,2);case 36295:return r.uniform3uiv(e,s,3);case 36296:return r.uniform4uiv(e,s,4);case 35674:return t.uniformMatrix2fv(e,!1,s);case 35675:return t.uniformMatrix3fv(e,!1,s);case 35676:return t.uniformMatrix4fv(e,!1,s);case 35685:return r.uniformMatrix2x3fv(e,!1,s);case 35686:return r.uniformMatrix2x4fv(e,!1,s);case 35687:return r.uniformMatrix3x2fv(e,!1,s);case 35688:return r.uniformMatrix3x4fv(e,!1,s);case 35689:return r.uniformMatrix4x2fv(e,!1,s);case 35690:return r.uniformMatrix4x3fv(e,!1,s)}throw new Error("Illegal uniform")}class iP extends Ir{device;handle;vs;fs;introspectedLayout;uniforms={};bindings={};varyings=null;_uniformCount=0;_uniformSetters={};constructor(t,e){super(t,e),this.device=t,this.handle=this.props.handle||this.device.gl.createProgram(),this.device.setSpectorMetadata(this.handle,{id:this.props.id}),this.vs=e.vs,this.fs=e.fs;const{varyings:n,bufferMode:i=35981}=e;switch(n&&n.length>0&&(this.varyings=n,this.device.gl.transformFeedbackVaryings(this.handle,n,i)),this._linkShaders(),br.time(1,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.introspectedLayout=XN(this.device.gl,this.handle),br.timeEnd(1,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.shaderLayout=function(t,e){const n={...t,attributes:t.attributes.map((t=>({...t})))};for(const t of e?.attributes||[]){const e=n.attributes.find((e=>e.name===t.name));e?(e.type=t.type||e.type,e.stepMode=t.stepMode||e.stepMode):br.warn(`shader layout attribute ${t.name} not present in shader`)}return n}(this.introspectedLayout,e.shaderLayout),this.props.topology){case"triangle-fan-webgl":case"line-loop-webgl":br.warn(`Primitive topology ${this.props.topology} is deprecated and will be removed in v9.1`)}}destroy(){this.handle&&(this.device.gl.deleteProgram(this.handle),this.destroyed=!0)}setBindings(t,e){for(const[n,i]of Object.entries(t)){const t=this.shaderLayout.bindings.find((t=>t.name===n))||this.shaderLayout.bindings.find((t=>t.name===`${n}Uniforms`));if(t){switch(i||br.warn(`Unsetting binding "${n}" in render pipeline "${this.id}"`)(),t.type){case"uniform":if(!(i instanceof EN||i.buffer instanceof EN))throw new Error("buffer value");break;case"texture":if(!(i instanceof vN||i instanceof wN||i instanceof bN))throw new Error("texture value");break;case"sampler":br.warn(`Ignoring sampler ${n}`)();break;default:throw new Error(t.type)}this.bindings[n]=i}else{const t=this.shaderLayout.bindings.map((t=>`"${t.name}"`)).join(", ");e?.disableWarnings||br.warn(`Unknown binding "${n}" in render pipeline "${this.id}", expected one of ${t}`)()}}}draw(t){const{renderPass:e,parameters:n=this.props.parameters,topology:i=this.props.topology,vertexArray:r,vertexCount:o,instanceCount:s,isInstanced:a=!1,firstVertex:A=0,transformFeedback:l}=t,c=function(t){switch(t){case"point-list":return 0;case"line-list":return 1;case"line-strip":return 3;case"line-loop-webgl":return 2;case"triangle-list":return 4;case"triangle-strip":return 5;case"triangle-fan-webgl":return 6;default:throw new Error(t)}}(i),u=Boolean(r.indexBuffer),h=r.indexBuffer?.glIndexType;if("success"!==this.linkStatus)return br.info(2,`RenderPipeline:${this.id}.draw() aborted - waiting for shader linking`)(),!1;if(!this._areTexturesRenderable()||0===o)return br.info(2,`RenderPipeline:${this.id}.draw() aborted - textures not yet loaded`)(),!1;if(0===o)return br.info(2,`RenderPipeline:${this.id}.draw() aborted - no vertices to draw`)(),!0;this.device.gl.useProgram(this.handle),r.bindBeforeRender(e),l&&l.begin(this.props.topology),this._applyBindings(),this._applyUniforms();const g=e;return function(t,e,n,i){if(Mn(e))return i(t);const r=t;ER(r.gl);try{return hN(t,e),pR(r.gl,n),i(t)}finally{_R(r.gl)}}(this.device,n,g.glParameters,(()=>{u&&a?this.device.gl.drawElementsInstanced(c,o||0,h,A,s||0):u?this.device.gl.drawElements(c,o||0,h,A):a?this.device.gl.drawArraysInstanced(c,A,o||0,s||0):this.device.gl.drawArrays(c,A,o||0),l&&l.end()})),r.unbindAfterRender(e),!0}setUniformsWebGL(t){const{bindings:e}=Sr(t);Object.keys(e).forEach((t=>{br.warn(`Unsupported value "${JSON.stringify(e[t])}" used in setUniforms() for key ${t}. Use setBindings() instead?`)()})),Object.assign(this.uniforms,t)}async _linkShaders(){const{gl:t}=this.device;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),br.time(4,`linkProgram for ${this.id}`)(),t.linkProgram(this.handle),br.timeEnd(4,`linkProgram for ${this.id}`)(),br.level,!this.device.features.has("compilation-status-async-webgl")){const t=this._getLinkStatus();return void this._reportLinkStatus(t)}br.once(1,"RenderPipeline linking is asynchronous")(),await this._waitForLinkComplete(),br.info(2,`RenderPipeline ${this.id} - async linking complete: ${this.linkStatus}`)();const e=this._getLinkStatus();this._reportLinkStatus(e)}_reportLinkStatus(t){if("success"!==t){if("error"===this.vs.compilationStatus)throw this.vs.debugShader(),new Error(`Error during compilation of shader ${this.vs.id}`);if("error"===this.fs?.compilationStatus)throw this.fs.debugShader(),new Error(`Error during compilation of shader ${this.fs.id}`);throw new Error(`Error during ${t}: ${this.device.gl.getProgramInfoLog(this.handle)}`)}}_getLinkStatus(){const{gl:t}=this.device;if(!t.getProgramParameter(this.handle,35714))return this.linkStatus="error","linking";t.validateProgram(this.handle);return t.getProgramParameter(this.handle,35715)?(this.linkStatus="success","success"):(this.linkStatus="error","validation")}async _waitForLinkComplete(){const t=async t=>await new Promise((e=>setTimeout(e,t)));if(!this.device.features.has("compilation-status-async-webgl"))return void await t(10);const{gl:e}=this.device;for(;;){if(e.getProgramParameter(this.handle,37297))return;await t(10)}}_areTexturesRenderable(){let t=!0;for(const[,e]of Object.entries(this.bindings))e instanceof wN&&(e.update(),t=t&&e.loaded);return t}_applyBindings(){if("success"!==this.linkStatus)return;const{gl:t}=this.device;t.useProgram(this.handle);let e=0,n=0;for(const i of this.shaderLayout.bindings){const r=this.bindings[i.name]||this.bindings[i.name.replace(/Uniforms$/,"")];if(!r)throw new Error(`No value for binding ${i.name} in ${this.id}`);switch(i.type){case"uniform":const{name:o}=i,s=t.getUniformBlockIndex(this.handle,o);if(4294967295===s)throw new Error(`Invalid uniform block name ${o}`);t.uniformBlockBinding(this.handle,n,s),r instanceof EN?t.bindBufferBase(35345,n,r.handle):t.bindBufferRange(35345,n,r.buffer.handle,r.offset||0,r.size||r.buffer.byteLength-r.offset),n+=1;break;case"texture":if(!(r instanceof vN||r instanceof wN||r instanceof bN))throw new Error("texture");let a;if(r instanceof vN)a=r.texture;else if(r instanceof wN)a=r;else{if(!(r instanceof bN&&r.colorAttachments[0]instanceof vN))throw new Error("No texture");br.warn("Passing framebuffer in texture binding may be deprecated. Use fbo.colorAttachments[0] instead")(),a=r.colorAttachments[0].texture}t.activeTexture(33984+e),t.bindTexture(a.target,a.handle),e+=1;break;case"sampler":break;case"storage":case"read-only-storage":throw new Error(`binding type '${i.type}' not supported in WebGL`)}}}_applyUniforms(){for(const t of this.shaderLayout.uniforms||[]){const{name:e,location:n,type:i,textureUnit:r}=t,o=this.uniforms[e]??r;void 0!==o&&nP(this.device.gl,n,i,o)}}}class rP extends kn{static defaultProps={...kn.defaultProps,measureExecutionTime:void 0};get[Symbol.toStringTag](){return"CommandEncoder"}constructor(t,e){super(t,e,rP.defaultProps)}}class oP extends kn{static defaultProps={...kn.defaultProps};get[Symbol.toStringTag](){return"CommandBuffer"}constructor(t,e){super(t,e,oP.defaultProps)}}class sP extends oP{device;commands=[];constructor(t){super(t,{}),this.device=t}submitCommands(t=this.commands){for(const e of t)switch(e.name){case"copy-buffer-to-buffer":aP(this.device,e.options);break;case"copy-buffer-to-texture":AP(this.device,e.options);break;case"copy-texture-to-buffer":lP(this.device,e.options);break;case"copy-texture-to-texture":cP(this.device,e.options)}}}function aP(t,e){const n=e.source,i=e.destination;t.gl.bindBuffer(36662,n.handle),t.gl.bindBuffer(36663,i.handle),t.gl.copyBufferSubData(36662,36663,e.sourceOffset??0,e.destinationOffset??0,e.size),t.gl.bindBuffer(36662,null),t.gl.bindBuffer(36663,null)}function AP(t,e){throw new Error("Not implemented")}function lP(t,e){const{source:n,mipLevel:i=0,aspect:r="all",width:o=e.source.width,height:s=e.source.height,depthOrArrayLayers:a=0,origin:A=[0,0],destination:l,byteOffset:c=0,bytesPerRow:u,rowsPerImage:h}=e;if("all"!==r)throw new Error("not supported");if(0!==i||0!==a||u||h)throw new Error("not implemented");const{framebuffer:g,destroyFramebuffer:d}=uP(n);let p;try{const e=l,n=o||g.width,i=s||g.height,r=eN(g.texture.props.format),a=r.dataFormat,u=r.type;t.gl.bindBuffer(35051,e.handle),p=t.gl.bindFramebuffer(36160,g.handle),t.gl.readPixels(A[0],A[1],n,i,a,u,c)}finally{t.gl.bindBuffer(35051,null),void 0!==p&&t.gl.bindFramebuffer(36160,p),d&&g.destroy()}}function cP(t,e){const{source:n,destinationMipLevel:i=0,origin:r=[0,0],destinationOrigin:o=[0,0],destination:s}=e;let{width:a=e.destination.width,height:A=e.destination.height}=e;const{framebuffer:l,destroyFramebuffer:c}=uP(n),[u,h]=r,[g,d,p]=o,f=t.gl.bindFramebuffer(36160,l.handle);let m,I=null;if(!(s instanceof wN))throw new Error("invalid destination");switch(I=s,a=Number.isFinite(a)?a:I.width,A=Number.isFinite(A)?A:I.height,I.bind(0),m=I.target,m){case 3553:case 34067:t.gl.copyTexSubImage2D(m,i,g,d,u,h,a,A);break;case 35866:case 32879:t.gl.copyTexSubImage3D(m,i,g,d,p,u,h,a,A)}I&&I.unbind(),t.gl.bindFramebuffer(36160,f),c&&l.destroy()}function uP(t){if(t instanceof fr){const{width:e,height:n,id:i}=t;return{framebuffer:t.device.createFramebuffer({id:`framebuffer-for-${i}`,width:e,height:n,colorAttachments:[t]}),destroyFramebuffer:!0}}return{framebuffer:t,destroyFramebuffer:!1}}class hP extends rP{device;commandBuffer;constructor(t,e){super(t,e),this.device=t,this.commandBuffer=new sP(t)}destroy(){}finish(){this.commandBuffer.submitCommands()}copyBufferToBuffer(t){this.commandBuffer.commands.push({name:"copy-buffer-to-buffer",options:t})}copyBufferToTexture(t){this.commandBuffer.commands.push({name:"copy-buffer-to-texture",options:t})}copyTextureToBuffer(t){this.commandBuffer.commands.push({name:"copy-texture-to-buffer",options:t})}copyTextureToTexture(t){this.commandBuffer.commands.push({name:"copy-texture-to-texture",options:t})}pushDebugGroup(t){}popDebugGroup(){}insertDebugMarker(t){}resolveQuerySet(t,e,n){}}class gP extends kn{static defaultProps={...kn.defaultProps,renderPipeline:null};get[Symbol.toStringTag](){return"VertexArray"}maxVertexAttributes;attributeInfos;indexBuffer=null;attributes;constructor(t,e){super(t,e,gP.defaultProps),this.maxVertexAttributes=t.limits.maxVertexAttributes,this.attributes=new Array(this.maxVertexAttributes).fill(null),this.attributeInfos=function(t,e,n=16){const i=Lr(t,e),r=new Array(n).fill(null);for(const t of Object.values(i))r[t.location]=t;return r}(e.renderPipeline.shaderLayout,e.renderPipeline.bufferLayout,this.maxVertexAttributes)}setConstantWebGL(t,e){throw new Error("constant attributes not supported")}}class dP extends gP{get[Symbol.toStringTag](){return"VertexArray"}device;handle;buffer=null;bufferValue=null;static isConstantAttributeZeroSupported(t){return"Chrome"==(e||Ln()?Pn(e)?"Electron":(e||Jn.userAgent||"").indexOf("Edge")>-1?"Edge":globalThis.chrome?"Chrome":globalThis.safari?"Safari":globalThis.mozInnerScreenX?"Firefox":"Unknown":"Node");var e}constructor(t,e){super(t,e),this.device=t,this.handle=this.device.gl.createVertexArray()}destroy(){super.destroy(),this.buffer&&this.buffer?.destroy(),this.handle&&(this.device.gl.deleteVertexArray(this.handle),this.handle=void 0)}setIndexBuffer(t){const e=t;if(e&&34963!==e.glTarget)throw new Error("Use .setBuffer()");this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34963,e?e.handle:null),this.indexBuffer=e,this.device.gl.bindVertexArray(null)}setBuffer(t,e){const n=e;if(34963===n.glTarget)throw new Error("Use .setIndexBuffer()");const{size:i,type:r,stride:o,offset:s,normalized:a,integer:A,divisor:l}=this._getAccessor(t);this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34962,n.handle),A?this.device.gl.vertexAttribIPointer(t,i,r,o,s):this.device.gl.vertexAttribPointer(t,i,r,a,o,s),this.device.gl.bindBuffer(34962,null),this.device.gl.enableVertexAttribArray(t),this.device.gl.vertexAttribDivisor(t,l||0),this.attributes[t]=n,this.device.gl.bindVertexArray(null)}setConstantWebGL(t,e){this._enable(t,!1),this.attributes[t]=e}bindBeforeRender(){this.device.gl.bindVertexArray(this.handle),this._applyConstantAttributes()}unbindAfterRender(){this.device.gl.bindVertexArray(null)}_applyConstantAttributes(){for(let t=0;t<this.maxVertexAttributes;++t){const e=this.attributes[t];ArrayBuffer.isView(e)&&this.device.setConstantAttributeWebGL(t,e)}}_getAccessor(t){const e=this.attributeInfos[t];if(!e)throw new Error(`Unknown attribute location ${t}`);const n=DR(e.bufferDataType);return{size:e.bufferComponents,type:n,stride:e.byteStride,offset:e.byteOffset,normalized:e.normalized,integer:e.integer,divisor:"instance"===e.stepMode?1:0}}_enable(t,e=!0){const n=dP.isConstantAttributeZeroSupported(this.device);(e||(n||0!==t))&&(t=Number(t),this.device.gl.bindVertexArray(this.handle),e?this.device.gl.enableVertexAttribArray(t):this.device.gl.disableVertexAttribArray(t),this.device.gl.bindVertexArray(null))}getConstantBuffer(t,e){const n=function(t){if(Array.isArray(t))return new Float32Array(t);return t}(e),i=n.byteLength*t,r=n.length*t;if(this.buffer&&i!==this.buffer.byteLength)throw new Error(`Buffer size is immutable, byte length ${i} !== ${this.buffer.byteLength}.`);let o=!this.buffer;if(this.buffer=this.buffer||this.device.createBuffer({byteLength:i}),o=o||!function(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}(n,this.bufferValue),o){const t=function(t,e){return new t(wr(t.BYTES_PER_ELEMENT*e),0,e)}(e.constructor,r);!function(t){const{target:e,source:n,start:i=0,count:r=1}=t,o=n.length,s=r*o;let a=0;for(let t=i;a<o;a++)e[t++]=n[a];for(;a<s;)a<s-a?(e.copyWithin(i+a,i,i+a),a*=2):(e.copyWithin(i+a,i,i+s-a),a=s);t.target}({target:t,source:n,start:0,count:r}),this.buffer.write(t),this.bufferValue=e}return this.buffer}}class pP extends kn{static defaultProps={...kn.defaultProps,layout:void 0,buffers:{}};get[Symbol.toStringTag](){return"TransformFeedback"}constructor(t,e){super(t,e,pP.defaultProps)}}class fP extends pP{device;gl;handle;layout;buffers={};unusedBuffers={};bindOnUse=!0;_bound=!1;constructor(t,e){super(t,e),this.device=t,this.gl=t.gl,this.handle=this.props.handle||this.gl.createTransformFeedback(),this.layout=this.props.layout,e.buffers&&this.setBuffers(e.buffers),Object.seal(this)}destroy(){this.gl.deleteTransformFeedback(this.handle),super.destroy()}begin(t="point-list"){this.gl.bindTransformFeedback(36386,this.handle),this.bindOnUse&&this._bindBuffers(),this.gl.beginTransformFeedback(function(t){switch(t){case"point-list":return 0;case"line-list":case"line-strip":case"line-loop-webgl":return 1;case"triangle-list":case"triangle-strip":case"triangle-fan-webgl":return 4;default:throw new Error(t)}}(t))}end(){this.gl.endTransformFeedback(),this.bindOnUse&&this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null)}setBuffers(t){this.buffers={},this.unusedBuffers={},this.bind((()=>{for(const e in t)this.setBuffer(e,t[e])}))}setBuffer(t,e){const n=this._getVaryingIndex(t),{buffer:i,byteLength:r,byteOffset:o}=this._getBufferRange(e);if(n<0)return this.unusedBuffers[t]=i,void br.warn(`${this.id} unusedBuffers varying buffer ${t}`)();this.buffers[n]={buffer:i,byteLength:r,byteOffset:o},this.bindOnUse||this._bindBuffer(n,i,o,r)}getBuffer(t){if(mP(t))return this.buffers[t]||null;const e=this._getVaryingIndex(t);return e>=0?this.buffers[e]:null}bind(t=this.handle){if("function"!=typeof t)return this.gl.bindTransformFeedback(36386,t),this;let e;return this._bound?e=t():(this.gl.bindTransformFeedback(36386,this.handle),this._bound=!0,e=t(),this._bound=!1,this.gl.bindTransformFeedback(36386,null)),e}unbind(){this.bind(null)}_getBufferRange(t){if(t instanceof EN)return{buffer:t,byteOffset:0,byteLength:t.byteLength};const{buffer:e,byteOffset:n=0,byteLength:i=t.buffer.byteLength}=t;return{buffer:e,byteOffset:n,byteLength:i}}_getVaryingIndex(t){if(mP(t))return Number(t);for(const e of this.layout.varyings)if(t===e.name)return e.location;return-1}_bindBuffers(){for(const t in this.buffers){const{buffer:e,byteLength:n,byteOffset:i}=this._getBufferRange(this.buffers[t]);this._bindBuffer(Number(t),e,i,n)}}_unbindBuffers(){for(const t in this.buffers)this.gl.bindBufferBase(35982,Number(t),null)}_bindBuffer(t,e,n=0,i){const r=e&&e.handle;r&&void 0!==i?this.gl.bindBufferRange(35982,t,r,n,i):this.gl.bindBufferBase(35982,t,r)}}function mP(t){return"number"==typeof t?Number.isInteger(t):/^\d+$/.test(t)}class IP extends kn{static defaultProps={...kn.defaultProps,type:void 0,count:void 0};get[Symbol.toStringTag](){return"QuerySet"}constructor(t,e){super(t,e,IP.defaultProps)}}class yP extends IP{device;handle;target=null;_queryPending=!1;_pollingPromise=null;get[Symbol.toStringTag](){return"Query"}constructor(t,e){if(super(t,e),this.device=t,e.count>1)throw new Error("WebGL QuerySet can only have one value");this.handle=this.device.gl.createQuery(),Object.seal(this)}destroy(){this.device.gl.deleteQuery(this.handle)}beginTimestampQuery(){return this._begin(35007)}endTimestampQuery(){this._end()}beginOcclusionQuery(t){return this._begin(t?.conservative?36202:35887)}endOcclusionQuery(){this._end()}beginTransformFeedbackQuery(){return this._begin(35976)}endTransformFeedbackQuery(){this._end()}async resolveQuery(){return[await this.pollQuery()]}_begin(t){this._queryPending||(this.target=t,this.device.gl.beginQuery(this.target,this.handle))}_end(){this._queryPending||this.target&&(this.device.gl.endQuery(this.target),this.target=null,this._queryPending=!0)}isResultAvailable(){if(!this._queryPending)return!1;const t=this.device.gl.getQueryParameter(this.handle,34919);return t&&(this._queryPending=!1),t}isTimerDisjoint(){return this.device.gl.getParameter(36795)}getResult(){return this.device.gl.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}pollQuery(t=Number.POSITIVE_INFINITY){if(this._pollingPromise)return this._pollingPromise;let e=0;return this._pollingPromise=new Promise(((n,i)=>{const r=()=>{this.isResultAvailable()?(n(this.getResult()),this._pollingPromise=null):e++>t?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(r)};requestAnimationFrame(r)})),this._pollingPromise}}function CP(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return gr(!1),0}}function EP(t,e){const{sourceX:n=0,sourceY:i=0,sourceFormat:r=6408,sourceAttachment:o=36064}=e||{};let{target:s=null,sourceWidth:a,sourceHeight:A,sourceType:l}=e||{};const{framebuffer:c,deleteFramebuffer:u}=vP(t);gr(c);const{gl:h,handle:g}=c;a=a||c.width,A=A||c.height;const d=o-36064;l=l||c.colorAttachments[d]?.texture?.type||5121,s=function(t,e,n,i,r){if(t)return t;e=e||5121;const o=YN(e,{clamped:!1}),s=CP(n);return new o(i*r*s)}(s,l,r,a,A),l=l||function(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(jN)}}(s);const p=h.bindFramebuffer(36160,g);return h.readPixels(n,i,a,A,r,l,s),h.bindFramebuffer(36160,p||null),u&&c.destroy(),s}function _P(t,e){const{target:n,sourceX:i=0,sourceY:r=0,sourceFormat:o=6408,targetByteOffset:s=0}=e||{};let{sourceWidth:a,sourceHeight:A,sourceType:l}=e||{};const{framebuffer:c,deleteFramebuffer:u}=vP(t);gr(c),a=a||c.width,A=A||c.height;const h=c;l=l||5121;let g=n;if(!g){const t=CP(o),e=function(t){switch(t){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return gr(!1),0}}(l),n=s+a*A*t*e;g=h.device.createBuffer({byteLength:n})}const d=t.device.createCommandEncoder();return d.copyTextureToBuffer({source:t,width:a,height:A,origin:[i,r],destination:g,byteOffset:s}),d.destroy(),u&&c.destroy(),g}function vP(t){return t instanceof aN?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:BP(t),deleteFramebuffer:!0}}function BP(t,e){const{device:n,width:i,height:r,id:o}=t;return n.createFramebuffer({...e,id:`framebuffer-for-${o}`,width:i,height:r,colorAttachments:[t]})}const wP="clear: bad arguments";class bP extends zk{static type="webgl";type="webgl";handle;features;limits;info;canvasContext;lost;_resolveContextLost;static isSupported(){return"undefined"!=typeof WebGL2RenderingContext}static attach(t){if(t instanceof bP)return t;if(t?.device instanceof zk)return t.device;if(!function(t){if("undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext)return!0;return Boolean(t&&Number.isFinite(t._version))}(t))throw new Error("Invalid WebGL2RenderingContext");return new bP({gl:t})}static async create(t={}){br.groupCollapsed(1,"WebGLDevice created")();const e=[];t.debug&&e.push(async function(){Ln()&&!globalThis.WebGLDebugUtils&&(globalThis.global=globalThis.global||globalThis,globalThis.global.module={},await cN("https://unpkg.com/webgl-debug@2.0.1/index.js"))}()),t.spector&&e.push(async function(){if(!globalThis.SPECTOR)try{await cN("https://cdn.jsdelivr.net/npm/spectorjs@0.9.30/dist/spector.bundle.js")}catch(t){br.warn(String(t))}}()),"string"==typeof t.canvas&&e.push(Xk.pageLoaded);const n=await Promise.allSettled(e);for(const t of n)"rejected"===t.status&&br.error(`Failed to initialize debug libraries ${t.reason}`)();if(br.probe(2,"DOM is loaded")(),t.gl?.device)return br.warn("reattaching existing device")(),bP.attach(t.gl);const i=new bP(t),r=`Created ${i.type}${i.debug?" debug":""} context: ${i.info.vendor}, ${i.info.renderer} for canvas: ${i.canvasContext.id}`;return br.probe(1,r)(),br.table(1,i.info)(),br.groupEnd(1)(),i}constructor(t){super({...t,id:t.id||Sn("webgl-device")});const e=t.gl?.device;if(e)throw new Error(`WebGL context already attached to device ${e.id}`);const n=t.gl?.canvas||t.canvas;this.canvasContext=new QN(this,{...t,canvas:n}),this.lost=new Promise((t=>{this._resolveContextLost=t}));let i=t.gl||null;if(i||=function(t,e){e={...wR,...e};let n=null;const i=t=>n=t.statusMessage||n;t.addEventListener("webglcontextcreationerror",i,!1);let r=null;if(r||=t.getContext("webgl2",e),t.removeEventListener("webglcontextcreationerror",i,!1),!r)throw new Error(`Failed to create WebGL context: ${n||"Unknown error"}`);if(e.onContextLost){const{onContextLost:n}=e;t.addEventListener("webglcontextlost",(t=>n(t)),!1)}if(e.onContextRestored){const{onContextRestored:n}=e;t.addEventListener("webglcontextrestored",(t=>n(t)),!1)}return r}(this.canvasContext.canvas,{...t,onContextLost:t=>this._resolveContextLost?.({reason:"destroyed",message:"Entered sleep mode, or too many apps or browser tabs are using the GPU."})}),!i)throw new Error("WebGL context creation failed");this.handle=i,this.gl=i,this.gl.device=this,this.gl._version=2,t.spector&&(this.spectorJS=function(t){if(t={...xN,...t},!t?.spector)return null;if(!DN&&globalThis.SPECTOR&&(br.probe(1,"SPECTOR found and initialized")(),DN=new globalThis.SPECTOR.Spector,globalThis.luma&&(globalThis.luma.spector=DN)),!DN)return null;if(SN||(SN=!0,DN.spyCanvases(),DN?.onCaptureStarted.add((t=>br.info("Spector capture started:",t)())),DN?.onCapture.add((t=>{br.info("Spector capture complete:",t)(),DN?.getResultUI(),DN?.resultView.display(),DN?.resultView.addCapture(t)}))),t?.canvas){if("string"==typeof t.spector&&t.spector!==t.canvas.id)return DN;DN?.startCapture(t?.canvas,500),new Promise((t=>setTimeout(t,2e3))).then((t=>{br.info("Spector capture stopped after 2 seconds")(),DN?.stopCapture()}))}return DN}({...this.props,canvas:this.handle.canvas})),this.info=QR(this.gl,this._extensions),this.limits=new sN(this.gl),this.features=new oN(this.gl,this._extensions,this.props.disabledFeatures),this.props.initalizeFeatures&&this.features.initializeFeatures(),this.canvasContext.resize();const{enable:r=!0,copyState:o=!1}=t;CR(this.gl,{enable:r,copyState:o,log:(...t)=>br.log(1,...t)()}),t.debug&&(this.gl=kN(this.gl,{...t,throwOnError:!0}),this.debug=!0,br.level=Math.max(br.level,1),br.warn("WebGL debug mode activated. Performance reduced.")())}destroy(){}get isLost(){return this.gl.isContextLost()}getSize(){return[this.gl.drawingBufferWidth,this.gl.drawingBufferHeight]}isTextureFormatSupported(t){return $R(this.gl,t,this._extensions)}isTextureFormatFilterable(t){return function(t,e,n){if(!$R(t,e,n))return!1;if(e.startsWith("depth")||e.startsWith("stencil"))return!1;try{if(Uk(e).signed)return!1}catch{return!1}return e.endsWith("32float")?Boolean(bR(t,"OES_texture_float_linear, extensions",n)):!e.endsWith("16float")||Boolean(bR(t,"OES_texture_half_float_linear, extensions",n))}(this.gl,t,this._extensions)}isTextureFormatRenderable(t){return function(t,e,n){return!!$R(t,e,n)&&"number"!=typeof e}(this.gl,t,this._extensions)}createCanvasContext(t){throw new Error("WebGL only supports a single canvas")}createBuffer(t){const e=this._getBufferProps(t);return new EN(this,e)}_createTexture(t){return new wN(this,t)}createExternalTexture(t){throw new Error("createExternalTexture() not implemented")}createSampler(t){return new _N(this,t)}createShader(t){return new LN(this,t)}createFramebuffer(t){return new bN(this,t)}createVertexArray(t){return new dP(this,t)}createTransformFeedback(t){return new fP(this,t)}createQuerySet(t){return new yP(this,t)}createRenderPipeline(t){return new iP(this,t)}beginRenderPass(t){return new UN(this,t)}createComputePipeline(t){throw new Error("ComputePipeline not supported in WebGL")}beginComputePass(t){throw new Error("ComputePass not supported in WebGL")}renderPass=null;createCommandEncoder(t){return new hP(this,t)}submit(){this.renderPass?.end(),this.renderPass=null}readPixelsToArrayWebGL(t,e){return EP(t,e)}readPixelsToBufferWebGL(t,e){return _P(t,e)}setParametersWebGL(t){pR(this.gl,t)}getParametersWebGL(t){return fR(this.gl,t)}withParametersWebGL(t,e){return uN(this.gl,t,e)}clearWebGL(t){!function(t,e){const{framebuffer:n=null,color:i=null,depth:r=null,stencil:o=null}=e||{},s={};n&&(s.framebuffer=n);let a=0;i&&(a|=16384,!0!==i&&(s.clearColor=i)),r&&(a|=256,!0!==r&&(s.clearDepth=r)),o&&(a|=1024,!0!==r&&(s.clearStencil=r)),gr(0!==a,wP);const A=t.gl;uN(A,s,(()=>{A.clear(a)}))}(this,t)}resetWebGL(){br.warn("WebGLDevice.resetWebGL is deprecated, use only for debugging")(),pR(this.gl,eR)}gl;debug=!1;_canvasSizeInfo={clientWidth:0,clientHeight:0,devicePixelRatio:1};_extensions={};_polyfilled=!1;spectorJS;loseDevice(){let t=!1;const e=this.getExtension("WEBGL_lose_context").WEBGL_lose_context;return e&&(t=!0,e.loseContext()),this._resolveContextLost?.({reason:"destroyed",message:"Application triggered context loss"}),t}pushState(){ER(this.gl)}popState(){_R(this.gl)}setSpectorMetadata(t,e){t.__SPECTOR_Metadata=e}getGLKey(t,e){e=e||this.gl2||this.gl;const n=Number(t);for(const t in e)if(e[t]===n)return`GL.${t}`;return String(t)}_constants;setConstantAttributeWebGL(t,e){const n=this.limits.maxVertexAttributes;this._constants=this._constants||new Array(n).fill(null);const i=this._constants[t];switch(i&&function(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}(i,e)&&br.info(1,`setConstantAttributeWebGL(${t}) could have been skipped, value unchanged`)(),this._constants[t]=e,e.constructor){case Float32Array:!function(t,e,n){switch(n.length){case 1:t.gl.vertexAttrib1fv(e,n);break;case 2:t.gl.vertexAttrib2fv(e,n);break;case 3:t.gl.vertexAttrib3fv(e,n);break;case 4:t.gl.vertexAttrib4fv(e,n);break;default:gr(!1)}}(this,t,e);break;case Int32Array:!function(t,e,n){t.gl.vertexAttribI4iv(e,n)}(this,t,e);break;case Uint32Array:!function(t,e,n){t.gl.vertexAttribI4uiv(e,n)}(this,t,e);break;default:gr(!1)}}getExtension(t){return bR(this.gl,t,this._extensions),this._extensions}}let QP=0;const xP={device:null,onAddHTML:()=>"",onInitialize:async()=>null,onRender:()=>{},onFinalize:()=>{},onError:t=>console.error(t),stats:qk.stats.get("animation-loop-"+QP++),useDevicePixels:!0,autoResizeViewport:!1,autoResizeDrawingBuffer:!1};class DP{device=null;canvas=null;props;animationProps=null;timeline=null;stats;cpuTime;gpuTime;frameRate;display;needsRedraw="initialized";_initialized=!1;_running=!1;_animationFrameId=null;_nextFramePromise=null;_resolveNextFrame=null;_cpuStartTime=0;constructor(t){if(this.props={...xP,...t},!(t=this.props).device)throw new Error("No device provided");const{useDevicePixels:e=!0}=this.props;this.stats=t.stats||new ZS({id:"animation-loop-stats"}),this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this.setProps({autoResizeViewport:t.autoResizeViewport,autoResizeDrawingBuffer:t.autoResizeDrawingBuffer,useDevicePixels:e}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}destroy(){this.stop(),this._setDisplay(null)}delete(){this.destroy()}setNeedsRedraw(t){return this.needsRedraw=this.needsRedraw||t,this}setProps(t){return"autoResizeViewport"in t&&(this.props.autoResizeViewport=t.autoResizeViewport||!1),"autoResizeDrawingBuffer"in t&&(this.props.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer||!1),"useDevicePixels"in t&&(this.props.useDevicePixels=t.useDevicePixels||!1),this}async start(){if(this._running)return this;this._running=!0;try{let t;return this._initialized||(this._initialized=!0,await this._initDevice(),this._initialize(),await this.props.onInitialize(this._getAnimationProps())),this._running?(!1!==t&&(this._cancelAnimationFrame(),this._requestAnimationFrame()),this):null}catch(t){const e=t instanceof Error?t:new Error("Unknown error");throw this.props.onError(e),e}}stop(){return this._running&&(this.animationProps&&this.props.onFinalize(this.animationProps),this._cancelAnimationFrame(),this._nextFramePromise=null,this._resolveNextFrame=null,this._running=!1),this}redraw(){return this.device?.isLost||(this._beginFrameTimers(),this._setupFrame(),this._updateAnimationProps(),this._renderFrame(this._getAnimationProps()),this._clearNeedsRedraw(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endFrameTimers()),this}attachTimeline(t){return this.timeline=t,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise((t=>{this._resolveNextFrame=t}))),this._nextFramePromise}async toDataURL(){if(this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.canvas instanceof HTMLCanvasElement)return this.canvas.toDataURL();throw new Error("OffscreenCanvas")}_initialize(){this._startEventHandling(),this._initializeAnimationProps(),this._updateAnimationProps(),this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_setDisplay(t){this.display&&(this.display.destroy(),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}_requestAnimationFrame(){var t;this._running&&(this._animationFrameId=(t=this._animationFrame.bind(this),"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)))}_cancelAnimationFrame(){var t;null!==this._animationFrameId&&(t=this._animationFrameId,"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t),this._animationFrameId=null)}_animationFrame(){this._running&&(this.redraw(),this._requestAnimationFrame())}_renderFrame(t){this.display?this.display._renderFrame(t):(this.props.onRender(this._getAnimationProps()),this.device.submit())}_clearNeedsRedraw(){this.needsRedraw=!1}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_initializeAnimationProps(){if(!this.device)throw new Error("loop");this.animationProps={animationLoop:this,device:this.device,canvas:this.device?.canvasContext?.canvas,timeline:this.timeline,useDevicePixels:this.props.useDevicePixels,needsRedraw:!1,width:1,height:1,aspect:1,time:0,startTime:Date.now(),engineTime:0,tick:0,tock:0,_mousePosition:null}}_getAnimationProps(){if(!this.animationProps)throw new Error("animationProps");return this.animationProps}_updateAnimationProps(){if(!this.animationProps)return;const{width:t,height:e,aspect:n}=this._getSizeAndAspect();t===this.animationProps.width&&e===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=e,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime}async _initDevice(){if(this.device=await this.props.device,!this.device)throw new Error("No device provided");this.canvas=this.device.canvasContext?.canvas||null}_createInfoDiv(){if(this.canvas&&this.props.onAddHTML){const t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";const e=document.createElement("div");e.style.position="absolute",e.style.left="10px",e.style.bottom="10px",e.style.width="300px",e.style.background="white",this.canvas instanceof HTMLCanvasElement&&t.appendChild(this.canvas),t.appendChild(e);const n=this.props.onAddHTML(e);n&&(e.innerHTML=n)}}_getSizeAndAspect(){if(!this.device)return{width:1,height:1,aspect:1};const[t,e]=this.device?.canvasContext?.getPixelSize()||[1,1];let n=1;const i=this.device?.canvasContext?.canvas;return i&&i.clientHeight?n=i.clientWidth/i.clientHeight:t>0&&e>0&&(n=t/e),{width:t,height:e,aspect:n}}_resizeViewport(){this.props.autoResizeViewport&&this.device.gl&&this.device.gl.viewport(0,0,this.device.gl.drawingBufferWidth,this.device.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.props.autoResizeDrawingBuffer&&this.device?.canvasContext?.resize({useDevicePixels:this.props.useDevicePixels})}_beginFrameTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this.cpuTime.timeStart()}_endFrameTimers(){this.cpuTime.timeEnd()}_startEventHandling(){this.canvas&&(this.canvas.addEventListener("mousemove",this._onMousemove.bind(this)),this.canvas.addEventListener("mouseleave",this._onMouseleave.bind(this)))}_onMousemove(t){t instanceof MouseEvent&&(this._getAnimationProps()._mousePosition=[t.offsetX,t.offsetY])}_onMouseleave(t){this._getAnimationProps()._mousePosition=null}}var SP=g(2332);const MP={mousedown:1,mousemove:2,mouseup:4};!function(t){const e=t.prototype.handler;t.prototype.handler=function(t){const n=this.store;t.button>0&&"pointerdown"===t.type&&(function(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}(n,(e=>e.pointerId===t.pointerId))||n.push(t)),e.call(this,t)}}(SP.PointerEventInput),SP.MouseInput.prototype.handler=function(t){let e=MP[t.type];1&e&&t.button>=0&&(this.pressed=!0),2&e&&0===t.buttons&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))};const kP=SP.Manager,RP=SP;class NP{constructor(t,e,n){this.element=t,this.callback=e,this.options={enable:!0,...n}}}const PP=RP?[[RP.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[RP.Rotate,{enable:!1}],[RP.Pinch,{enable:!1}],[RP.Swipe,{enable:!1}],[RP.Pan,{threshold:0,enable:!1}],[RP.Press,{enable:!1}],[RP.Tap,{event:"doubletap",taps:2,enable:!1}],[RP.Tap,{event:"anytap",enable:!1}],[RP.Tap,{enable:!1}]]:null,TP={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},LP={doubletap:["tap"]},FP={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},OP={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},GP={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},UP={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},jP="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",YP="undefined"!=typeof window?window:g.g;void 0!==g.g?g.g:window,"undefined"!=typeof document&&document;let KP=!1;try{const t={get passive(){return KP=!0,!0}};YP.addEventListener("test",null,t),YP.removeEventListener("test",null)}catch(t){KP=!1}const zP=-1!==jP.indexOf("firefox"),{WHEEL_EVENTS:JP}=OP,qP="wheel",HP=4.000244140625;class VP extends NP{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{if(!this.options.enable)return;let e=t.deltaY;YP.WheelEvent&&(zP&&t.deltaMode===YP.WheelEvent.DOM_DELTA_PIXEL&&(e/=YP.devicePixelRatio),t.deltaMode===YP.WheelEvent.DOM_DELTA_LINE&&(e*=40)),0!==e&&e%HP==0&&(e=Math.floor(e/HP)),t.shiftKey&&e&&(e*=.25),this.callback({type:qP,center:{x:t.clientX,y:t.clientY},delta:-e,srcEvent:t,pointerType:"mouse",target:t.target})},this.events=(this.options.events||[]).concat(JP),this.events.forEach((e=>t.addEventListener(e,this.handleEvent,!!KP&&{passive:!1})))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===qP&&(this.options.enable=e)}}const{MOUSE_EVENTS:WP}=OP,ZP="pointermove",XP="pointerover",$P="pointerout",tT="pointerenter",eT="pointerleave";class nT extends NP{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{this.handleOverEvent(t),this.handleOutEvent(t),this.handleEnterEvent(t),this.handleLeaveEvent(t),this.handleMoveEvent(t)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat(WP),this.events.forEach((e=>t.addEventListener(e,this.handleEvent)))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===ZP&&(this.enableMoveEvent=e),t===XP&&(this.enableOverEvent=e),t===$P&&(this.enableOutEvent=e),t===tT&&(this.enableEnterEvent=e),t===eT&&(this.enableLeaveEvent=e)}handleOverEvent(t){this.enableOverEvent&&"mouseover"===t.type&&this._emit(XP,t)}handleOutEvent(t){this.enableOutEvent&&"mouseout"===t.type&&this._emit($P,t)}handleEnterEvent(t){this.enableEnterEvent&&"mouseenter"===t.type&&this._emit(tT,t)}handleLeaveEvent(t){this.enableLeaveEvent&&"mouseleave"===t.type&&this._emit(eT,t)}handleMoveEvent(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":0===t.buttons&&(this.pressed=!1),this.pressed||this._emit(ZP,t);break;case"mouseup":this.pressed=!1}}_emit(t,e){this.callback({type:t,center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}const{KEY_EVENTS:iT}=OP,rT="keydown",oT="keyup";class sT extends NP{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{const e=t.target||t.srcElement;"INPUT"===e.tagName&&"text"===e.type||"TEXTAREA"===e.tagName||(this.enableDownEvent&&"keydown"===t.type&&this.callback({type:rT,srcEvent:t,key:t.key,target:t.target}),this.enableUpEvent&&"keyup"===t.type&&this.callback({type:oT,srcEvent:t,key:t.key,target:t.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(iT),t.tabIndex=this.options.tabIndex||0,t.style.outline="none",this.events.forEach((e=>t.addEventListener(e,this.handleEvent)))}destroy(){this.events.forEach((t=>this.element.removeEventListener(t,this.handleEvent)))}enableEventType(t,e){t===rT&&(this.enableDownEvent=e),t===oT&&(this.enableUpEvent=e)}}const aT="contextmenu";class AT extends NP{constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{this.options.enable&&this.callback({type:aT,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})},t.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(t,e){t===aT&&(this.options.enable=e)}}const lT={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function cT(t){const e=lT[t.srcEvent.type];if(!e)return null;const{buttons:n,button:i}=t.srcEvent;let r=!1,o=!1,s=!1;return 2===e?(r=Boolean(1&n),o=Boolean(4&n),s=Boolean(2&n)):(r=0===i,o=1===i,s=2===i),{leftButton:r,middleButton:o,rightButton:s}}function uT(t,e){const n=t.center;if(!n)return null;const i=e.getBoundingClientRect(),r=i.width/e.offsetWidth||1,o=i.height/e.offsetHeight||1;return{center:n,offsetCenter:{x:(n.x-i.left-e.clientLeft)/r,y:(n.y-i.top-e.clientTop)/o}}}const hT={srcElement:"root",priority:0};class gT{constructor(t){this.handleEvent=t=>{if(this.isEmpty())return;const e=this._normalizeEvent(t);let n=t.srcEvent.target;for(;n&&n!==e.rootElement;){if(this._emit(e,n),e.handled)return;n=n.parentNode}this._emit(e,"root")},this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(t,e,n,i=!1,r=!1){const{handlers:o,handlersByElement:s}=this;let a=hT;"string"==typeof n||n&&n.addEventListener?a={...hT,srcElement:n}:n&&(a={...hT,...n});let A=s.get(a.srcElement);A||(A=[],s.set(a.srcElement,A));const l={type:t,handler:e,srcElement:a.srcElement,priority:a.priority};i&&(l.once=!0),r&&(l.passive=!0),o.push(l),this._active=this._active||!l.passive;let c=A.length-1;for(;c>=0&&!(A[c].priority>=l.priority);)c--;A.splice(c+1,0,l)}remove(t,e){const{handlers:n,handlersByElement:i}=this;for(let r=n.length-1;r>=0;r--){const o=n[r];if(o.type===t&&o.handler===e){n.splice(r,1);const t=i.get(o.srcElement);t.splice(t.indexOf(o),1),0===t.length&&i.delete(o.srcElement)}}this._active=n.some((t=>!t.passive))}_emit(t,e){const n=this.handlersByElement.get(e);if(n){let e=!1;const i=()=>{t.handled=!0},r=()=>{t.handled=!0,e=!0},o=[];for(let s=0;s<n.length;s++){const{type:a,handler:A,once:l}=n[s];if(A({...t,type:a,stopPropagation:i,stopImmediatePropagation:r}),l&&o.push(n[s]),e)break}for(let t=0;t<o.length;t++){const{type:e,handler:n}=o[t];this.remove(e,n)}}}_normalizeEvent(t){const e=this.eventManager.getElement();return{...t,...cT(t),...uT(t,e),preventDefault:()=>{t.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:e}}}const dT={events:null,recognizers:null,recognizerOptions:{},Manager:kP,touchAction:"none",tabIndex:0};class pT{constructor(t=null,e){this._onBasicInput=t=>{const{srcEvent:e}=t,n=FP[e.type];n&&this.manager.emit(n,t)},this._onOtherEvent=t=>{this.manager.emit(t.type,t)},this.options={...dT,...e},this.events=new Map,this.setElement(t);const{events:n}=this.options;n&&this.on(n)}getElement(){return this.element}setElement(t){if(this.element&&this.destroy(),this.element=t,!t)return;const{options:e}=this,n=e.Manager;this.manager=new n(t,{touchAction:e.touchAction,recognizers:e.recognizers||PP}).on("hammer.input",this._onBasicInput),e.recognizers||Object.keys(TP).forEach((t=>{const e=this.manager.get(t);e&&TP[t].forEach((t=>{e.recognizeWith(t)}))}));for(const t in e.recognizerOptions){const n=this.manager.get(t);if(n){const i=e.recognizerOptions[t];delete i.enable,n.set(i)}}this.wheelInput=new VP(t,this._onOtherEvent,{enable:!1}),this.moveInput=new nT(t,this._onOtherEvent,{enable:!1}),this.keyInput=new sT(t,this._onOtherEvent,{enable:!1,tabIndex:e.tabIndex}),this.contextmenuInput=new AT(t,this._onOtherEvent,{enable:!1});for(const[t,e]of this.events)e.isEmpty()||(this._toggleRecognizer(e.recognizerName,!0),this.manager.on(t,e.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(t,e,n){this._addEventHandler(t,e,n,!1)}once(t,e,n){this._addEventHandler(t,e,n,!0)}watch(t,e,n){this._addEventHandler(t,e,n,!1,!0)}off(t,e){this._removeEventHandler(t,e)}_toggleRecognizer(t,e){const{manager:n}=this;if(!n)return;const i=n.get(t);if(i&&i.options.enable!==e){i.set({enable:e});const r=LP[t];r&&!this.options.recognizers&&r.forEach((r=>{const o=n.get(r);e?(o.requireFailure(t),i.dropRequireFailure(r)):o.dropRequireFailure(t)}))}this.wheelInput.enableEventType(t,e),this.moveInput.enableEventType(t,e),this.keyInput.enableEventType(t,e),this.contextmenuInput.enableEventType(t,e)}_addEventHandler(t,e,n,i,r){if("string"!=typeof t){n=e;for(const e in t)this._addEventHandler(e,t[e],n,i,r);return}const{manager:o,events:s}=this,a=UP[t]||t;let A=s.get(a);A||(A=new gT(this),s.set(a,A),A.recognizerName=GP[a]||a,o&&o.on(a,A.handleEvent)),A.add(t,e,n,i,r),A.isEmpty()||this._toggleRecognizer(A.recognizerName,!0)}_removeEventHandler(t,e){if("string"!=typeof t){for(const e in t)this._removeEventHandler(e,t[e]);return}const{events:n}=this,i=UP[t]||t,r=n.get(i);if(r&&(r.remove(t,e),r.isEmpty())){const{recognizerName:t}=r;let e=!1;for(const i of n.values())if(i.recognizerName===t&&!i.isEmpty()){e=!0;break}e||this._toggleRecognizer(t,!1)}}}function fT(){}const mT={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,parameters:{},parent:null,device:null,deviceProps:{type:"webgl"},gl:null,glOptions:{},canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,widgets:[],onDeviceInitialized:fT,onWebGLInitialized:fT,onResize:fT,onViewStateChange:fT,onInteractionStateChange:fT,onBeforeRender:fT,onAfterRender:fT,onLoad:fT,onError:t=>ii.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:({isDragging:t})=>t?"grabbing":"grab",getTooltip:null,debug:!1,drawPickingColors:!1};class IT{static{this.defaultProps=mT}static{this.VERSION=Tk}constructor(t){this.width=0,this.height=0,this.userData={},this.device=null,this.canvas=null,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this.eventManager=null,this.widgetManager=null,this.tooltip=null,this.animationLoop=null,this.cursorState={isHovering:!1,isDragging:!1},this.stats=new ZS({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this._lastPointerDownInfo=null,this._onPointerMove=t=>{const{_pickRequest:e}=this;if("pointerleave"===t.type)e.x=-1,e.y=-1,e.radius=0;else{if(t.leftButton||t.rightButton)return;{const n=t.offsetCenter;if(!n)return;e.x=n.x,e.y=n.y,e.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:e.x,y:e.y}),e.event=t},this._onEvent=t=>{const e=ai[t.type],n=t.offsetCenter;if(!e||!n||!this.layerManager)return;const i=this.layerManager.getLayers(),r=this.deckPicker.getLastPickedObject({x:n.x,y:n.y,layers:i,viewports:this.getViewports(n)},this._lastPointerDownInfo),{layer:o}=r,s=o&&(o[e.handler]||o.props[e.handler]),a=this.props[e.handler];let A=!1;s&&(A=s.call(o,r,t)),A||(a?.(r,t),this.widgetManager.onEvent(r,t))},this._onPointerDown=t=>{const e=t.offsetCenter,n=this._pick("pickObject","pickObject Time",{x:e.x,y:e.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=n.result[0]||n.emptyInfo},this.props={...mT,...t},(t=this.props).viewState&&t.initialViewState&&ii.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),this.viewState=this.props.initialViewState,t.device?this.device=t.device:t.gl&&(t.gl instanceof WebGLRenderingContext&&ii.error("WebGL1 context not supported.")(),this.device=bP.attach(t.gl));let e=this.device;e||(qk.registerDevices([bP]),e=qk.createDevice({...t.deviceProps,canvas:this._createCanvas(t)})),this.animationLoop=this._createAnimationLoop(e,t),this.setProps(t),t._typedArrayManagerProps&&di.setOptions(t._typedArrayManagerProps),this.animationLoop.start()}finalize(){this.animationLoop?.stop(),this.animationLoop?.destroy(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager?.finalize(),this.layerManager=null,this.viewManager?.finalize(),this.viewManager=null,this.effectManager?.finalize(),this.effectManager=null,this.deckRenderer?.finalize(),this.deckRenderer=null,this.deckPicker?.finalize(),this.deckPicker=null,this.eventManager?.destroy(),this.eventManager=null,this.widgetManager?.finalize(),this.widgetManager=null,this.props.canvas||this.props.device||this.props.gl||!this.canvas||(this.canvas.parentElement?.removeChild(this.canvas),this.canvas=null)}setProps(t){this.stats.get("setProps Time").timeStart(),"onLayerHover"in t&&ii.removed("onLayerHover","onHover")(),"onLayerClick"in t&&ii.removed("onLayerClick","onClick")(),t.initialViewState&&!Dl(this.props.initialViewState,t.initialViewState,3)&&(this.viewState=t.initialViewState),Object.assign(this.props,t),this._setCanvasSize(this.props);const e=Object.create(this.props);Object.assign(e,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop?.setProps(e),this.layerManager&&(this.viewManager.setProps(e),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(e),this.effectManager.setProps(e),this.deckRenderer.setProps(e),this.deckPicker.setProps(e),this.widgetManager.setProps(e)),this.stats.get("setProps Time").timeEnd()}needsRedraw(t={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);const n=this.viewManager.needsRedraw(t),i=this.layerManager.needsRedraw(t),r=this.effectManager.needsRedraw(t),o=this.deckRenderer.needsRedraw(t);return e=e||n||i||r||o,e}redraw(t){if(!this.layerManager)return;let e=this.needsRedraw({clearRedrawFlags:!0});e=t||e,e&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(e):this._drawLayers(e))}get isInitialized(){return null!==this.viewManager}getViews(){return Hi(this.viewManager),this.viewManager.views}getViewports(t){return Hi(this.viewManager),this.viewManager.getViewports(t)}getCanvas(){return this.canvas}pickObject(t){const e=this._pick("pickObject","pickObject Time",t).result;return e.length?e[0]:null}pickMultipleObjects(t){return t.depth=t.depth||10,this._pick("pickObject","pickMultipleObjects Time",t).result}pickObjects(t){return this._pick("pickObjects","pickObjects Time",t)}_addResources(t,e=!1){for(const n in t)this.layerManager.resourceManager.add({resourceId:n,data:t[n],forceUpdate:e})}_removeResources(t){for(const e of t)this.layerManager.resourceManager.remove(e)}_addDefaultEffect(t){this.effectManager.addDefaultEffect(t)}_addDefaultShaderModule(t){this.layerManager.addDefaultShaderModule(t)}_removeDefaultShaderModule(t){this.layerManager?.removeDefaultShaderModule(t)}_pick(t,e,n){Hi(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(e).timeStart();const r=this.deckPicker[t]({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...n});return i.get(e).timeEnd(),r}_createCanvas(t){let e=t.canvas;if("string"==typeof e&&(e=document.getElementById(e),Hi(e)),!e){e=document.createElement("canvas"),e.id=t.id||"deckgl-overlay";(t.parent||document.body).appendChild(e)}return Object.assign(e.style,t.style),e}_setCanvasSize(t){if(!this.canvas)return;const{width:e,height:n}=t;if(e||0===e){const t=Number.isFinite(e)?`${e}px`:e;this.canvas.style.width=t}if(n||0===n){const e=Number.isFinite(n)?`${n}px`:n;this.canvas.style.position=t.style?.position||"absolute",this.canvas.style.height=e}}_updateCanvasSize(){const{canvas:t}=this;if(!t)return;const e=t.clientWidth??t.width,n=t.clientHeight??t.height;e===this.width&&n===this.height||(this.width=e,this.height=n,this.viewManager?.setProps({width:e,height:n}),this.layerManager?.activateViewport(this.getViewports()[0]),this.props.onResize({width:e,height:n}))}_createAnimationLoop(t,e){const{gl:n,onError:i,useDevicePixels:r}=e;return new DP({device:t,useDevicePixels:r,autoResizeDrawingBuffer:!n,autoResizeViewport:!1,onInitialize:t=>this._setDevice(t.device),onRender:this._onRenderFrame.bind(this),onError:i})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){const{views:t}=this.props,e=Array.isArray(t)?t:t?[t]:[new xM({id:"default-view"})];return e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:t}=this.props;this.animationLoop&&t&&t(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:t}=this;if(t.event){const{result:e,emptyInfo:n}=this._pick("pickObject","pickObject Time",t);this.cursorState.isHovering=e.length>0;let i=n,r=!1;for(const n of e)i=n,r=n.layer?.onHover(n,t.event)||r;r||(this.props.onHover?.(i,t.event),this.widgetManager.onHover(i,t.event)),t.event=null}}_updateCursor(){const t=this.props.parent||this.canvas;t&&(t.style.cursor=this.props.getCursor(this.cursorState))}_setDevice(t){if(this.device=t,!this.animationLoop)return;this.canvas||(this.canvas=this.device.canvasContext?.canvas),this.device.setParametersWebGL({blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onDeviceInitialized(this.device),this.device instanceof bP&&this.props.onWebGLInitialized(this.device.gl);const e=new KS;e.play(),this.animationLoop.attachTimeline(e),this.eventManager=new pT(this.props.parent||this.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const t in ai)this.eventManager.on(t,this._onEvent);this.viewManager=new eM({timeline:e,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const n=this.viewManager.getViewports()[0];this.layerManager=new tM(this.device,{deck:this,stats:this.stats,viewport:n,timeline:e}),this.effectManager=new VM({deck:this,device:this.device}),this.deckRenderer=new tk(this.device),this.deckPicker=new sk(this.device),this.widgetManager=new ck({deck:this,parentElement:this.canvas?.parentElement}),this.widgetManager.addDefault(new hk),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(t,e){const{device:n,gl:i}=this.layerManager.context;this.props.onBeforeRender({device:n,gl:i});const r={target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...e};this.deckRenderer?.renderLayers(r),"screen"===r.pass&&this.widgetManager.onRedraw({viewports:r.viewports,layers:r.layers}),this.props.onAfterRender({device:n,gl:i})}_onRenderFrame(){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),ii.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(t){const e=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState={...this.viewState,[t.viewId]:e},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(t){this.cursorState.isDragging=t.isDragging||!1,this.props.onInteractionStateChange(t)}_getFrameStats(){const{stats:t}=this;t.get("frameRate").timeEnd(),t.get("frameRate").timeStart();const e=this.animationLoop.stats;t.get("GPU Time").addTime(e.get("GPU Time").lastTiming),t.get("CPU Time").addTime(e.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:t,stats:e}=this;t.fps=e.get("frameRate").getHz(),t.setPropsTime=e.get("setProps Time").time,t.updateAttributesTime=e.get("Update Attributes").time,t.framesRedrawn=e.get("Redraw Count").count,t.pickTime=e.get("pickObject Time").time+e.get("pickMultipleObjects Time").time+e.get("pickObjects Time").time,t.pickCount=e.get("Pick Count").count,t.gpuTime=e.get("GPU Time").time,t.cpuTime=e.get("CPU Time").time,t.gpuTimePerFrame=e.get("GPU Time").getAverageTime(),t.cpuTimePerFrame=e.get("CPU Time").getAverageTime();const n=qk.stats.get("Memory Usage");t.bufferMemory=n.get("Buffer Memory").count,t.textureMemory=n.get("Texture Memory").count,t.renderbufferMemory=n.get("Renderbuffer Memory").count,t.gpuMemory=n.get("GPU Memory").count}}const yT="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;function CT(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}const ET={position:"absolute",zIndex:-1};function _T(t,e){if("function"==typeof t)return t(e);if(Array.isArray(t))return t.map((t=>_T(t,e)));if(vT(t)){if(n=t,n.props?.mapStyle)return e.style=ET,(0,r.cloneElement)(t,e);if(function(t){const e=t.type;return e&&e.deckGLViewProps}(t))return(0,r.cloneElement)(t,e)}var n;return t}function vT(t){return t&&"object"==typeof t&&"type"in t||!1}function BT(t){if("function"==typeof t)return(0,r.createElement)(oM,{},t);if(Array.isArray(t))return t.map(BT);if(vT(t)){if(t.type===r.Fragment)return BT(t.props.children);if(CT(t.type,oM))return t}return t}const wT={mixBlendMode:null};function bT(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}const QT=r.forwardRef((function(t,e){const[n,i]=(0,r.useState)(0),o=(0,r.useRef)({control:null,version:n,forceUpdate:()=>i((t=>t+1))}),s=o.current,a=(0,r.useRef)(null),A=(0,r.useRef)(null),l=(0,r.useMemo)((()=>function({children:t,layers:e=[],views:n=null}){const i=[],o=[],s={};return r.Children.forEach(BT(t),(t=>{if(vT(t)){const e=t.type;if(CT(e,Su)){const n=function(t,e){const n={},i=t.defaultProps||{};for(const t in e)i[t]!==e[t]&&(n[t]=e[t]);return new t(n)}(e,t.props);o.push(n)}else i.push(t);if(CT(e,oM)&&e!==oM&&t.props.id){const n=new e(t.props);s[n.id]=n}}else t&&i.push(t)})),Object.keys(s).length>0&&(Array.isArray(n)?n.forEach((t=>{s[t.id]=t})):n&&(s[n.id]=n),n=Object.values(s)),{layers:e=o.length>0?[...o,...e]:e,children:i,views:n}}(t)),[t.layers,t.views,t.children]);let c=!0;const u=e=>c&&t.viewState?(s.viewStateUpdateRequested=e,null):(s.viewStateUpdateRequested=null,t.onViewStateChange?.(e)),h=e=>{c?s.interactionStateUpdateRequested=e:(s.interactionStateUpdateRequested=null,t.onInteractionStateChange?.(e))},g=(0,r.useMemo)((()=>{const e={...t,style:null,width:"100%",height:"100%",parent:a.current,canvas:A.current,layers:l.layers,views:l.views,onViewStateChange:u,onInteractionStateChange:h};return delete e._customRender,s.deck&&s.deck.setProps(e),e}),[t]);(0,r.useEffect)((()=>{const e=t.Deck||IT;return s.deck=function(t,e,n){const i=new e({...n,_customRender:e=>{t.redrawReason=e;const n=i.getViewports();t.lastRenderedViewports!==n?t.forceUpdate():bT(t)}});return i}(s,e,{...g,parent:a.current,canvas:A.current}),()=>s.deck?.finalize()}),[]),yT((()=>{bT(s);const{viewStateUpdateRequested:t,interactionStateUpdateRequested:e}=s;t&&u(t),e&&h(e)})),(0,r.useImperativeHandle)(e,(()=>function(t){return{get deck(){return t.deck},pickObject:e=>t.deck.pickObject(e),pickMultipleObjects:e=>t.deck.pickMultipleObjects(e),pickObjects:e=>t.deck.pickObjects(e)}}(s)),[]);const d=s.deck&&s.deck.isInitialized?s.deck.getViewports():void 0,{ContextProvider:p,width:f="100%",height:m="100%",id:I,style:y}=t,{containerStyle:C,canvasStyle:E}=(0,r.useMemo)((()=>function({width:t,height:e,style:n}){const i={position:"absolute",zIndex:0,left:0,top:0,width:t,height:e},r={left:0,top:0};if(n)for(const t in n)t in wT?r[t]=n[t]:i[t]=n[t];return{containerStyle:i,canvasStyle:r}}({width:f,height:m,style:y})),[f,m,y]);if(!s.viewStateUpdateRequested&&s.lastRenderedViewports===d||s.version!==n){s.lastRenderedViewports=d,s.version=n;const t=function({children:t,deck:e,ContextProvider:n}){const{viewManager:i}=e||{};if(!i||!i.views.length)return[];const o={},s=i.views[0].id;for(const e of t){let t=s,n=e;vT(e)&&CT(e.type,oM)&&(t=e.props.id||s,n=e.props.children);const r=i.getViewport(t),a=i.getViewState(t);if(r){a.padding=r.padding;const{x:e,y:i,width:s,height:A}=r;n=_T(n,{x:e,y:i,width:s,height:A,viewport:r,viewState:a}),o[t]||(o[t]={viewport:r,children:[]}),o[t].children.push(n)}}return Object.keys(o).map((t=>{const{viewport:i,children:s}=o[t],{x:a,y:A,width:l,height:c}=i,u={position:"absolute",left:a,top:A,width:l,height:c},h=`view-${t}`,g=(0,r.createElement)("div",{key:h,id:h,style:u},...s);if(n){const o={viewport:i,container:e.canvas.offsetParent,eventManager:e.eventManager,onViewStateChange:n=>{n.viewId=t,e._onViewStateChange(n)}};return(0,r.createElement)(n,{key:h,value:o},g)}return g}))}({children:l.children,deck:s.deck,ContextProvider:p}),e=(0,r.createElement)("canvas",{key:"canvas",id:I||"deckgl-overlay",ref:A,style:E});s.control=(0,r.createElement)("div",{id:`${I||"deckgl"}-wrapper`,ref:a,style:C},[e,t])}return c=!1,s.control})),xT=QT,DT=r.createContext(null);function ST(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!ST(t[n],e[n]))return!1;return!0}if(Array.isArray(e))return!1;if("object"==typeof t&&"object"==typeof e){const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(const i of n){if(!e.hasOwnProperty(i))return!1;if(!ST(t[i],e[i]))return!1}return!0}return!1}function MT(t,e){if(!t.getProjection)return;const n=t.getProjection();ST(n,e.getProjection())||e.setProjection(n)}function kT(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function RT(t,e){const n=e.viewState||e;let i=!1;if("longitude"in n&&"latitude"in n){const e=t.center;t.center=new e.constructor(n.longitude,n.latitude),i=i||e!==t.center}if("zoom"in n){const e=t.zoom;t.zoom=n.zoom,i=i||e!==t.zoom}if("bearing"in n){const e=t.bearing;t.bearing=n.bearing,i=i||e!==t.bearing}if("pitch"in n){const e=t.pitch;t.pitch=n.pitch,i=i||e!==t.pitch}return n.padding&&!t.isPaddingEqual(n.padding)&&(i=!0,t.padding=n.padding),i}const NT=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function PT(t){if(!t)return null;if("string"==typeof t)return t;if("toJS"in t&&(t=t.toJS()),!t.layers)return t;const e={};for(const n of t.layers)e[n.id]=n;const n=t.layers.map((t=>{let n=null;"interactive"in t&&(n=Object.assign({},t),delete n.interactive);const i=e[t.ref];if(i){n=n||Object.assign({},t),delete n.ref;for(const t of NT)t in i&&(n[t]=i[t])}return n||t}));return{...t,layers:n}}var TT=g(8538);const LT={version:8,sources:{},layers:[]},FT={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},OT={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},GT={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},UT=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],jT=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class YT{constructor(t,e,n){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=t=>{const e=this.props[GT[t.type]];e?e(t):"error"===t.type&&console.error(t.error)},this._onPointerEvent=t=>{"mousemove"!==t.type&&"mouseout"!==t.type||this._updateHover(t);const e=this.props[FT[t.type]];e&&(this.props.interactiveLayerIds&&"mouseover"!==t.type&&"mouseout"!==t.type&&(t.features=this._hoveredFeatures||this._queryRenderedFeatures(t.point)),e(t),delete t.features)},this._onCameraEvent=t=>{if(!this._internalUpdate){const e=this.props[OT[t.type]];e&&e(t)}t.type in this._deferredEvents&&(this._deferredEvents[t.type]=!1)},this._MapClass=t,this.props=e,this._initialize(n)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const e=this.props;this.props=t;const n=this._updateSettings(t,e);n&&this._createShadowTransform(this._map);const i=this._updateSize(t),r=this._updateViewState(t,!0);this._updateStyle(t,e),this._updateStyleComponents(t,e),this._updateHandlers(t,e),(n||i||r&&!this._map.isMoving())&&this.redraw()}static reuse(t,e){const n=YT.savedMaps.pop();if(!n)return null;const i=n.map,r=i.getContainer();for(e.className=r.className;r.childNodes.length>0;)e.appendChild(r.childNodes[0]);i._container=e;const o=i._resizeObserver;o&&(o.disconnect(),o.observe(e)),n.setProps({...t,styleDiffing:!1}),i.resize();const{initialViewState:s}=t;return s&&(s.bounds?i.fitBounds(s.bounds,{...s.fitBoundsOptions,duration:0}):n._updateViewState(s,!1)),i.isStyleLoaded()?i.fire("load"):i.once("styledata",(()=>i.fire("load"))),i._update(),n}_initialize(t){const{props:e}=this,{mapStyle:n=LT}=e,i={...e,...e.initialViewState,accessToken:e.mapboxAccessToken||KT()||null,container:t,style:PT(n)},r=i.initialViewState||i.viewState||i;if(Object.assign(i,{center:[r.longitude||0,r.latitude||0],zoom:r.zoom||0,pitch:r.pitch||0,bearing:r.bearing||0}),e.gl){const t=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=t,e.gl)}const o=new this._MapClass(i);r.padding&&o.setPadding(r.padding),e.cursor&&(o.getCanvas().style.cursor=e.cursor),this._createShadowTransform(o);const s=o._render;o._render=t=>{this._inRender=!0,s.call(o,t),this._inRender=!1};const a=o._renderTaskQueue.run;o._renderTaskQueue.run=t=>{a.call(o._renderTaskQueue,t),this._onBeforeRepaint()},o.on("render",(()=>this._onAfterRepaint()));const A=o.fire;o.fire=this._fireEvent.bind(this,A),o.on("resize",(()=>{this._renderTransform.resize(o.transform.width,o.transform.height)})),o.on("styledata",(()=>{this._updateStyleComponents(this.props,{}),MT(o.transform,this._renderTransform)})),o.on("sourcedata",(()=>this._updateStyleComponents(this.props,{})));for(const t in FT)o.on(t,this._onPointerEvent);for(const t in OT)o.on(t,this._onCameraEvent);for(const t in GT)o.on(t,this._onEvent);this._map=o}recycle(){const t=this.map.getContainer().querySelector("[mapboxgl-children]");null==t||t.remove(),YT.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const e=function(t){const e=t.clone();return e.pixelsToGLUnits=t.pixelsToGLUnits,e}(t.transform);t.painter.transform=e,this._renderTransform=e}_updateSize(t){const{viewState:e}=t;if(e){const t=this._map;if(e.width!==t.transform.width||e.height!==t.transform.height)return t.resize(),!0}return!1}_updateViewState(t,e){if(this._internalUpdate)return!1;const n=this._map,i=this._renderTransform,{zoom:r,pitch:o,bearing:s}=i,a=n.isMoving();a&&(i.cameraElevationReference="sea");const A=RT(i,{...kT(n.transform),...t});if(a&&(i.cameraElevationReference="ground"),A&&e){const t=this._deferredEvents;t.move=!0,t.zoom||(t.zoom=r!==i.zoom),t.rotate||(t.rotate=s!==i.bearing),t.pitch||(t.pitch=o!==i.pitch)}return a||RT(n.transform,t),A}_updateSettings(t,e){const n=this._map;let i=!1;for(const r of UT)if(r in t&&!ST(t[r],e[r])){i=!0;const e=n[`set${r[0].toUpperCase()}${r.slice(1)}`];null==e||e.call(n,t[r])}return i}_updateStyle(t,e){if(t.cursor!==e.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==e.mapStyle){const{mapStyle:e=LT,styleDiffing:n=!0}=t,i={diff:n};return"localIdeographFontFamily"in t&&(i.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(PT(e),i),!0}return!1}_updateStyleComponents(t,e){const n=this._map;let i=!1;return n.isStyleLoaded()&&("light"in t&&n.setLight&&!ST(t.light,e.light)&&(i=!0,n.setLight(t.light)),"fog"in t&&n.setFog&&!ST(t.fog,e.fog)&&(i=!0,n.setFog(t.fog)),"terrain"in t&&n.setTerrain&&!ST(t.terrain,e.terrain)&&(t.terrain&&!n.getSource(t.terrain.source)||(i=!0,n.setTerrain(t.terrain)))),i}_updateHandlers(t,e){var n,i;const r=this._map;let o=!1;for(const s of jT){const a=null===(n=t[s])||void 0===n||n;ST(a,null===(i=e[s])||void 0===i||i)||(o=!0,a?r[s].enable(a):r[s].disable())}return o}_queryRenderedFeatures(t){const e=this._map,n=e.transform,{interactiveLayerIds:i=[]}=this.props;try{return e.transform=this._renderTransform,e.queryRenderedFeatures(t,{layers:i.filter(e.getLayer.bind(e))})}catch(t){return[]}finally{e.transform=n}}_updateHover(t){var e;const{props:n}=this;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){const n=t.type,i=(null===(e=this._hoveredFeatures)||void 0===e?void 0:e.length)>0,r=this._queryRenderedFeatures(t.point),o=r.length>0;!o&&i&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=r,o&&!i&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=n}else this._hoveredFeatures=null}_fireEvent(t,e,n){const i=this._map,r=i.transform,o="string"==typeof e?e:e.type;return"move"===o&&this._updateViewState(this.props,!1),o in OT&&("object"==typeof e&&(e.viewState=kT(r)),this._map.isMoving())?(i.transform=this._renderTransform,t.call(i,e,n),i.transform=r,i):(t.call(i,e,n),i)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const e in this._deferredEvents)this._deferredEvents[e]&&t.fire(e);this._internalUpdate=!1;const e=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{MT(this._renderTransform,e),t.transform=e}}}function KT(){let t=null;if("undefined"!=typeof location){const e=/access_token=([^&\/]*)/.exec(location.search);t=e&&e[1]}try{t=t||TT.env.MapboxAccessToken}catch(t){}try{t=t||TT.env.REACT_APP_MAPBOX_ACCESS_TOKEN}catch(t){}return t}YT.savedMaps=[];const zT=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function JT(t){if(!t)return null;const e=t.map,n={getMap:()=>e,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:n=>{const i=e.transform;e.transform=t.transform;const r=e.project(n);return e.transform=i,r},unproject:n=>{const i=e.transform;e.transform=t.transform;const r=e.unproject(n);return e.transform=i,r},queryTerrainElevation:(n,i)=>{const r=e.transform;e.transform=t.transform;const o=e.queryTerrainElevation(n,i);return e.transform=r,o},queryRenderedFeatures:(n,i)=>{const r=e.transform;e.transform=t.transform;const o=e.queryRenderedFeatures(n,i);return e.transform=r,o}};for(const t of function(t){const e=new Set;let n=t;for(;n;){for(const i of Object.getOwnPropertyNames(n))"_"!==i[0]&&"function"==typeof t[i]&&"fire"!==i&&"setEventedParent"!==i&&e.add(i);n=Object.getPrototypeOf(n)}return Array.from(e)}(e))t in n||zT.includes(t)||(n[t]=e[t].bind(e));return n}const qT="undefined"!=typeof document?r.useLayoutEffect:r.useEffect,HT=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];const VT=r.createContext(null);function WT(t,e,n){const i=(0,r.useContext)(DT),[o,s]=(0,r.useState)(null),a=(0,r.useRef)(),{current:A}=(0,r.useRef)({mapLib:null,map:null});(0,r.useEffect)((()=>{const e=t.mapLib;let r,o=!0;return Promise.resolve(e||n).then((e=>{if(!o)return;if(!e)throw new Error("Invalid mapLib");const n="Map"in e?e:e.default;if(!n.Map)throw new Error("Invalid mapLib");if(function(t,e){for(const n of HT)n in e&&(t[n]=e[n]);const{RTLTextPlugin:n="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=e;n&&t.getRTLTextPluginStatus&&"unavailable"===t.getRTLTextPluginStatus()&&t.setRTLTextPlugin(n,(t=>{t&&console.error(t)}),!0)}(n,t),n.supported&&!n.supported(t))throw new Error("Map is not supported by this browser");t.reuseMaps&&(r=YT.reuse(t,a.current)),r||(r=new YT(n.Map,t,a.current)),A.map=JT(r),A.mapLib=n,s(r),null==i||i.onMapMount(A.map,t.id)})).catch((e=>{const{onError:n}=t;n?n({type:"error",target:null,originalEvent:null,error:e}):console.error(e)})),()=>{o=!1,r&&(null==i||i.onMapUnmount(t.id),t.reuseMaps?r.recycle():r.destroy())}}),[]),qT((()=>{o&&o.setProps(t)})),(0,r.useImperativeHandle)(e,(()=>A.map),[o]);const l=(0,r.useMemo)((()=>({position:"relative",width:"100%",height:"100%",...t.style})),[t.style]);return r.createElement("div",{id:t.id,ref:a,style:l},o&&r.createElement(VT.Provider,{value:A},r.createElement("div",{"mapboxgl-children":"",style:{height:"100%"}},t.children)))}const ZT=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function XT(t,e){if(!t||!e)return;const n=t.style;for(const t in e){const i=e[t];Number.isFinite(i)&&!ZT.test(t)?n[t]=`${i}px`:n[t]=i}}(0,r.memo)((0,r.forwardRef)((function(t,e){const{map:n,mapLib:i}=(0,r.useContext)(VT),o=(0,r.useRef)({props:t});o.current.props=t;const s=(0,r.useMemo)((()=>{let e=!1;r.Children.forEach(t.children,(t=>{t&&(e=!0)}));const n={...t,element:e?document.createElement("div"):null},a=new i.Marker(n);return a.setLngLat([t.longitude,t.latitude]),a.getElement().addEventListener("click",(t=>{var e,n;null===(n=(e=o.current.props).onClick)||void 0===n||n.call(e,{type:"click",target:a,originalEvent:t})})),a.on("dragstart",(t=>{var e,n;const i=t;i.lngLat=s.getLngLat(),null===(n=(e=o.current.props).onDragStart)||void 0===n||n.call(e,i)})),a.on("drag",(t=>{var e,n;const i=t;i.lngLat=s.getLngLat(),null===(n=(e=o.current.props).onDrag)||void 0===n||n.call(e,i)})),a.on("dragend",(t=>{var e,n;const i=t;i.lngLat=s.getLngLat(),null===(n=(e=o.current.props).onDragEnd)||void 0===n||n.call(e,i)})),a}),[]);(0,r.useEffect)((()=>(s.addTo(n.getMap()),()=>{s.remove()})),[]);const{longitude:a,latitude:A,offset:l,style:c,draggable:u=!1,popup:h=null,rotation:g=0,rotationAlignment:d="auto",pitchAlignment:p="auto"}=t;return(0,r.useEffect)((()=>{XT(s.getElement(),c)}),[c]),(0,r.useImperativeHandle)(e,(()=>s),[]),s.getLngLat().lng===a&&s.getLngLat().lat===A||s.setLngLat([a,A]),l&&!function(t,e){const n=Array.isArray(t)?t[0]:t?t.x:0,i=Array.isArray(t)?t[1]:t?t.y:0,r=Array.isArray(e)?e[0]:e?e.x:0,o=Array.isArray(e)?e[1]:e?e.y:0;return n===r&&i===o}(s.getOffset(),l)&&s.setOffset(l),s.isDraggable()!==u&&s.setDraggable(u),s.getRotation()!==g&&s.setRotation(g),s.getRotationAlignment()!==d&&s.setRotationAlignment(d),s.getPitchAlignment()!==p&&s.setPitchAlignment(p),s.getPopup()!==h&&s.setPopup(h),(0,nE.createPortal)(t.children,s.getElement())})));function $T(t){return new Set(t?t.trim().split(/\s+/):[])}(0,r.memo)((0,r.forwardRef)((function(t,e){const{map:n,mapLib:i}=(0,r.useContext)(VT),o=(0,r.useMemo)((()=>document.createElement("div")),[]),s=(0,r.useRef)({props:t});s.current.props=t;const a=(0,r.useMemo)((()=>{const e={...t},n=new i.Popup(e);return n.setLngLat([t.longitude,t.latitude]),n.once("open",(t=>{var e,n;null===(n=(e=s.current.props).onOpen)||void 0===n||n.call(e,t)})),n}),[]);if((0,r.useEffect)((()=>{const t=t=>{var e,n;null===(n=(e=s.current.props).onClose)||void 0===n||n.call(e,t)};return a.on("close",t),a.setDOMContent(o).addTo(n.getMap()),()=>{a.off("close",t),a.isOpen()&&a.remove()}}),[]),(0,r.useEffect)((()=>{XT(a.getElement(),t.style)}),[t.style]),(0,r.useImperativeHandle)(e,(()=>a),[]),a.isOpen()&&(a.getLngLat().lng===t.longitude&&a.getLngLat().lat===t.latitude||a.setLngLat([t.longitude,t.latitude]),t.offset&&!ST(a.options.offset,t.offset)&&a.setOffset(t.offset),a.options.anchor===t.anchor&&a.options.maxWidth===t.maxWidth||(a.options.anchor=t.anchor,a.setMaxWidth(t.maxWidth)),a.options.className!==t.className)){const e=$T(a.options.className),n=$T(t.className);for(const t of e)n.has(t)||a.removeClassName(t);for(const t of n)e.has(t)||a.addClassName(t);a.options.className=t.className}return(0,nE.createPortal)(t.children,o)})));const tL=function(t,e,n,i){const o=(0,r.useContext)(VT),s=(0,r.useMemo)((()=>t(o)),[]);return(0,r.useEffect)((()=>{const t=i||n||e,r="function"==typeof e&&"function"==typeof n?e:null,a="function"==typeof n?n:"function"==typeof e?e:null,{map:A}=o;return A.hasControl(s)||(A.addControl(s,null==t?void 0:t.position),r&&r(o)),()=>{a&&a(o),A.hasControl(s)&&A.removeControl(s)}}),[]),s};const eL=(0,r.memo)((function(t){const e=tL((({mapLib:e})=>new e.AttributionControl(t)),{position:t.position});return(0,r.useEffect)((()=>{XT(e._container,t.style)}),[t.style]),null}));(0,r.memo)((function(t){const e=tL((({mapLib:e})=>new e.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)})),{position:t.position});return(0,r.useEffect)((()=>{XT(e._controlContainer,t.style)}),[t.style]),null}));(0,r.memo)((0,r.forwardRef)((function(t,e){const n=(0,r.useRef)({props:t}),i=tL((({mapLib:e})=>{const i=new e.GeolocateControl(t),r=i._setupUI;return i._setupUI=t=>{i._container.hasChildNodes()||r(t)},i.on("geolocate",(t=>{var e,i;null===(i=(e=n.current.props).onGeolocate)||void 0===i||i.call(e,t)})),i.on("error",(t=>{var e,i;null===(i=(e=n.current.props).onError)||void 0===i||i.call(e,t)})),i.on("outofmaxbounds",(t=>{var e,i;null===(i=(e=n.current.props).onOutOfMaxBounds)||void 0===i||i.call(e,t)})),i.on("trackuserlocationstart",(t=>{var e,i;null===(i=(e=n.current.props).onTrackUserLocationStart)||void 0===i||i.call(e,t)})),i.on("trackuserlocationend",(t=>{var e,i;null===(i=(e=n.current.props).onTrackUserLocationEnd)||void 0===i||i.call(e,t)})),i}),{position:t.position});return n.current.props=t,(0,r.useImperativeHandle)(e,(()=>i),[]),(0,r.useEffect)((()=>{XT(i._container,t.style)}),[t.style]),null})));(0,r.memo)((function(t){const e=tL((({mapLib:e})=>new e.NavigationControl(t)),{position:t.position});return(0,r.useEffect)((()=>{XT(e._container,t.style)}),[t.style]),null}));(0,r.memo)((function(t){const e=tL((({mapLib:e})=>new e.ScaleControl(t)),{position:t.position}),n=(0,r.useRef)(t),i=n.current;n.current=t;const{style:o}=t;return void 0!==t.maxWidth&&t.maxWidth!==i.maxWidth&&(e.options.maxWidth=t.maxWidth),void 0!==t.unit&&t.unit!==i.unit&&e.setUnit(t.unit),(0,r.useEffect)((()=>{XT(e._container,o)}),[o]),null}));const nL=Promise.resolve().then(g.t.bind(g,6505,23)),iL=r.forwardRef((function(t,e){return WT(t,e,nL)})),rL=eL,oL=iL,sL="\nuniform bool filter_useSoftMargin;\nuniform bool filter_enabled;\nuniform bool filter_transformSize;\nuniform ivec4 filter_categoryBitMask;\n#ifdef DATAFILTER_TYPE\nuniform DATAFILTER_TYPE filter_min;\nuniform DATAFILTER_TYPE filter_softMin;\nuniform DATAFILTER_TYPE filter_softMax;\nuniform DATAFILTER_TYPE filter_max;\nin DATAFILTER_TYPE filterValues;\n#ifdef DATAFILTER_DOUBLE\nin DATAFILTER_TYPE filterValues64Low;\nuniform DATAFILTER_TYPE filter_min64High;\nuniform DATAFILTER_TYPE filter_max64High;\n#endif\n#endif\n#ifdef DATACATEGORY_TYPE\nin DATACATEGORY_TYPE filterCategoryValues;\n#endif\nout float dataFilter_value;\nfloat dataFilter_reduceValue(float value) {\nreturn value;\n}\nfloat dataFilter_reduceValue(vec2 value) {\nreturn min(value.x, value.y);\n}\nfloat dataFilter_reduceValue(vec3 value) {\nreturn min(min(value.x, value.y), value.z);\n}\nfloat dataFilter_reduceValue(vec4 value) {\nreturn min(min(value.x, value.y), min(value.z, value.w));\n}\n#ifdef DATAFILTER_TYPE\nvoid dataFilter_setValue(DATAFILTER_TYPE valueFromMin, DATAFILTER_TYPE valueFromMax) {\nif (filter_useSoftMargin) {\nDATAFILTER_TYPE leftInRange = mix(\nsmoothstep(filter_min, filter_softMin, valueFromMin),\nstep(filter_min, valueFromMin),\nstep(filter_softMin, filter_min)\n);\nDATAFILTER_TYPE rightInRange = mix(\n1.0 - smoothstep(filter_softMax, filter_max, valueFromMax),\nstep(valueFromMax, filter_max),\nstep(filter_max, filter_softMax)\n);\ndataFilter_value = dataFilter_reduceValue(leftInRange * rightInRange);\n} else {\ndataFilter_value = dataFilter_reduceValue(\nstep(filter_min, valueFromMin) * step(valueFromMax, filter_max)\n);\n}\n}\n#endif\n#ifdef DATACATEGORY_TYPE\nvoid dataFilter_setCategoryValue(DATACATEGORY_TYPE category) {\n#if DATACATEGORY_CHANNELS == 1\nint dataFilter_masks = filter_categoryBitMask[int(category / 32.0)];\n#elif DATACATEGORY_CHANNELS == 2\nivec2 dataFilter_masks = ivec2(\nfilter_categoryBitMask[int(category.x / 32.0)],\nfilter_categoryBitMask[int(category.y / 32.0) + 2]\n);\n#elif DATACATEGORY_CHANNELS == 3\nivec3 dataFilter_masks = filter_categoryBitMask.xyz;\n#else\nivec4 dataFilter_masks = filter_categoryBitMask;\n#endif\nDATACATEGORY_TYPE dataFilter_bits = DATACATEGORY_TYPE(dataFilter_masks) / pow(DATACATEGORY_TYPE(2.0), mod(category, 32.0));\ndataFilter_bits = mod(floor(dataFilter_bits), 2.0);\n#if DATACATEGORY_CHANNELS == 1\nif(dataFilter_bits == 0.0) dataFilter_value = 0.0;\n#else\nif(any(equal(dataFilter_bits, DATACATEGORY_TYPE(0.0)))) dataFilter_value = 0.0;\n#endif\n}\n#endif\n",aL="\nuniform bool filter_transformColor;\nin float dataFilter_value;\n";function AL(t){if(!t||!("extensions"in t))return{};const{filterRange:e=[-1,1],filterEnabled:n=!0,filterTransformSize:i=!0,filterTransformColor:r=!0}=t,o=t.filterSoftRange||e;return{...Number.isFinite(e[0])?{filter_min:e[0],filter_softMin:o[0],filter_softMax:o[1],filter_max:e[1]}:{filter_min:e.map((t=>t[0])),filter_softMin:o.map((t=>t[0])),filter_softMax:o.map((t=>t[1])),filter_max:e.map((t=>t[1]))},filter_enabled:n,filter_useSoftMargin:Boolean(t.filterSoftRange),filter_transformSize:n&&i,filter_transformColor:n&&r}}const lL={"vs:#main-start":"\ndataFilter_value = 1.0;\nif (filter_enabled) {\n#ifdef DATAFILTER_TYPE\n#ifdef DATAFILTER_DOUBLE\ndataFilter_setValue(\nfilterValues - filter_min64High + filterValues64Low,\nfilterValues - filter_max64High + filterValues64Low\n);\n#else\ndataFilter_setValue(filterValues, filterValues);\n#endif\n#endif\n#ifdef DATACATEGORY_TYPE\ndataFilter_setCategoryValue(filterCategoryValues);\n#endif\n}\n","vs:#main-end":"\nif (dataFilter_value == 0.0) {\ngl_Position = vec4(0.);\n}\n","vs:DECKGL_FILTER_SIZE":"\nif (filter_transformSize) {\nsize = size * dataFilter_value;\n}\n","fs:DECKGL_FILTER_COLOR":"\nif (dataFilter_value == 0.0) discard;\nif (filter_transformColor) {\ncolor.a *= dataFilter_value;\n}\n"},cL={name:"data-filter",vs:sL,fs:aL,inject:lL,getUniforms:AL},uL={name:"data-filter-fp64",vs:sL,fs:aL,inject:lL,getUniforms:function(t){if(!t||!("extensions"in t))return{};const e=AL(t);if(Number.isFinite(e.filter_min)){const t=Math.fround(e.filter_min);e.filter_min-=t,e.filter_softMin-=t,e.filter_min64High=t;const n=Math.fround(e.filter_max);e.filter_max-=n,e.filter_softMax-=n,e.filter_max64High=n}else{const t=e.filter_min.map(Math.fround);e.filter_min=e.filter_min.map(((e,n)=>e-t[n])),e.filter_softMin=e.filter_softMin.map(((e,n)=>e-t[n])),e.filter_min64High=t;const n=e.filter_max.map(Math.fround);e.filter_max=e.filter_max.map(((t,e)=>t-n[e])),e.filter_softMax=e.filter_softMax.map(((t,e)=>t-n[e])),e.filter_max64High=n}return e}},hL=["float32-renderable-webgl","texture-blend-float-webgl"];const gL={blend:!0,blendFunc:[1,1,1,1],blendEquation:[32774,32774],depthTest:!1},dL={getFilterValue:{type:"accessor",value:0},getFilterCategory:{type:"accessor",value:0},onFilteredItemsChange:{type:"function",value:null,optional:!0},filterEnabled:!0,filterRange:[-1,1],filterSoftRange:null,filterCategories:[0],filterTransformSize:!0,filterTransformColor:!0},pL={categorySize:0,filterSize:1,fp64:!1,countItems:!1},fL={1:"float",2:"vec2",3:"vec3",4:"vec4"};class mL extends sf{static{this.defaultProps=dL}static{this.extensionName="DataFilterExtension"}constructor(t={}){super({...pL,...t})}getShaders(t){const{categorySize:e,filterSize:n,fp64:i}=t.opts,r={};return e&&(r.DATACATEGORY_TYPE=fL[e],r.DATACATEGORY_CHANNELS=e),n&&(r.DATAFILTER_TYPE=fL[n],r.DATAFILTER_DOUBLE=Boolean(i)),{modules:[i?uL:cL],defines:r}}initializeState(t,e){const n=this.getAttributeManager(),{categorySize:i,filterSize:r,fp64:o}=e.opts;n&&(r&&n.add({filterValues:{size:r,type:o?"float64":"float32",stepMode:"dynamic",accessor:"getFilterValue"}}),i&&n.add({filterCategoryValues:{size:i,stepMode:"dynamic",accessor:"getFilterCategory",transform:1===i?t=>e._getCategoryKey.call(this,t,0):t=>t.map(((t,n)=>e._getCategoryKey.call(this,t,n)))}}));const{device:s}=this.context;if(n&&e.opts.countItems){const t=function(t){return hL.every((e=>t.features.has(e)))}(s);n.add({filterIndices:{size:t?1:2,vertexOffset:1,type:"unorm8",accessor:(e,{index:n})=>{const i=e&&e.__source?e.__source.index:n;return t?(i+1)%255:[(i+1)%255,Math.floor(i/255)%255]},shaderAttributes:{filterPrevIndices:{vertexOffset:0},filterIndices:{vertexOffset:1}}}});const i=function(t,e){return e?t.createFramebuffer({width:1,height:1,colorAttachments:[t.createTexture({format:"rgba32float",type:5126,mipmaps:!1})]}):t.createFramebuffer({width:256,height:64,colorAttachments:[t.createTexture({format:"rgba8unorm",type:5126,mipmaps:!1})]})}(s,t),r=function(t,e,n){return e.defines.NON_INSTANCED_MODEL=1,n&&(e.defines.FLOAT_TARGET=1),new la(t,{id:"data-filter-aggregation-model",vertexCount:1,isInstanced:!1,drawMode:0,vs:"#version 300 es\n#define SHADER_NAME data-filter-vertex-shader\n\n#ifdef FLOAT_TARGET\n  in float filterIndices;\n  in float filterPrevIndices;\n#else\n  in vec2 filterIndices;\n  in vec2 filterPrevIndices;\n#endif\n\nout vec4 vColor;\nconst float component = 1.0 / 255.0;\n\nvoid main() {\n  #ifdef FLOAT_TARGET\n    dataFilter_value *= float(filterIndices != filterPrevIndices);\n    gl_Position = vec4(0.0, 0.0, 0.0, 1.0);\n    vColor = vec4(0.0, 0.0, 0.0, 1.0);\n  #else\n    // Float texture is not supported: pack result into 4 channels x 256 px x 64px\n    dataFilter_value *= float(filterIndices.x != filterPrevIndices.x);\n    float col = filterIndices.x;\n    float row = filterIndices.y * 4.0;\n    float channel = floor(row);\n    row = fract(row);\n    vColor = component * vec4(bvec4(channel == 0.0, channel == 1.0, channel == 2.0, channel == 3.0));\n    gl_Position = vec4(col * 2.0 - 1.0, row * 2.0 - 1.0, 0.0, 1.0);\n  #endif\n  gl_PointSize = 1.0;\n}\n",fs:"#version 300 es\n#define SHADER_NAME data-filter-fragment-shader\nprecision highp float;\n\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main() {\n  if (dataFilter_value < 0.5) {\n    discard;\n  }\n  fragColor = vColor;\n}\n",...e})}(s,e.getShaders.call(this,e),t);this.setState({filterFBO:i,filterModel:r})}}updateState({props:t,oldProps:e,changeFlags:n},i){const r=this.getAttributeManager(),{categorySize:o}=i.opts;if(this.state.filterModel){const n=r.attributes.filterValues?.needsUpdate()||r.attributes.filterCategoryValues?.needsUpdate()||t.filterEnabled!==e.filterEnabled||t.filterRange!==e.filterRange||t.filterSoftRange!==e.filterSoftRange||t.filterCategories!==e.filterCategories;n&&this.setState({filterNeedsUpdate:n})}if(r?.attributes.filterCategoryValues){(r.attributes.filterCategoryValues.needsUpdate()||!Dl(t.filterCategories,e.filterCategories,2))&&this.setState({categoryBitMask:null});n.dataChanged&&(this.setState({categoryMap:Array(o).fill(0).map((()=>({})))}),r.attributes.filterCategoryValues.setNeedsUpdate("categoryMap"))}}draw(t,e){const n=this.state.filterFBO,i=this.state.filterModel,r=this.state.filterNeedsUpdate,{onFilteredItemsChange:o}=this.props;if(this.state.categoryBitMask||e._updateCategoryBitMask.call(this,t,e),t.uniforms.filter_categoryBitMask=this.state.categoryBitMask,r&&o&&i){const{attributes:{filterValues:e,filterCategoryValues:r,filterIndices:s}}=this.getAttributeManager();i.setVertexCount(this.getNumInstances()),this.context.device.clearWebGL({framebuffer:n,color:[0,0,0,0]}),i.updateModuleSettings(t.moduleParameters),i.setAttributes({...e?.getValue(),...r?.getValue(),...s?.getValue()}),i.setUniforms(t.uniforms),i.device.withParametersWebGL({framebuffer:n,...gL,viewport:[0,0,n.width,n.height]},(()=>{i.draw(this.context.renderPass)}));const a=i.device.readPixelsToArrayWebGL(n);let A=0;for(let t=0;t<a.length;t++)A+=a[t];o({id:this.id,count:A}),this.state.filterNeedsUpdate=!1}}finalizeState(){const t=this.state.filterFBO,e=this.state.filterModel;t?.destroy(),e?.destroy()}_updateCategoryBitMask(t,e){const{categorySize:n}=e.opts;if(!n)return;const{filterCategories:i}=this.props,r=new Uint32Array([0,0,0,0]),o=1===n?[i]:i,s=1===n?128:2===n?64:32;for(let t=0;t<o.length;t++){const n=o[t];for(const i of n){const n=e._getCategoryKey.call(this,i,t);if(n<s){r[t*(s/32)+Math.floor(n/32)]+=Math.pow(2,n%32)}else ii.warn(`Exceeded maximum number of categories (${s})`)()}}this.state.categoryBitMask=r}_getCategoryKey(t,e){const n=this.state.categoryMap[e];return t in n||(n[t]=Object.keys(n).length),n[t]}}const IL=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class yL{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[e,n]=new Uint8Array(t,0,2);if(219!==e)throw new Error("Data does not appear to be in a KDBush format.");const i=n>>4;if(1!==i)throw new Error(`Got v${i} data when expected v1.`);const r=IL[15&n];if(!r)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(t,2,1),[s]=new Uint32Array(t,4,1);return new yL(s,o,r,t)}constructor(t,e=64,n=Float64Array,i){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+e,2),65535),this.ArrayType=n,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const r=IL.indexOf(this.ArrayType),o=2*t*this.ArrayType.BYTES_PER_ELEMENT,s=t*this.IndexArrayType.BYTES_PER_ELEMENT,a=(8-s%8)%8;if(r<0)throw new Error(`Unexpected typed array class: ${n}.`);i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+s+a,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+o+s+a),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+s+a,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+r]),new Uint16Array(this.data,2,1)[0]=e,new Uint32Array(this.data,4,1)[0]=t)}add(t,e){const n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=t,this.coords[this._pos++]=e,n}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return CL(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,e,n,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:o,nodeSize:s}=this,a=[0,r.length-1,0],A=[];for(;a.length;){const l=a.pop()||0,c=a.pop()||0,u=a.pop()||0;if(c-u<=s){for(let s=u;s<=c;s++){const a=o[2*s],l=o[2*s+1];a>=t&&a<=n&&l>=e&&l<=i&&A.push(r[s])}continue}const h=u+c>>1,g=o[2*h],d=o[2*h+1];g>=t&&g<=n&&d>=e&&d<=i&&A.push(r[h]),(0===l?t<=g:e<=d)&&(a.push(u),a.push(h-1),a.push(1-l)),(0===l?n>=g:i>=d)&&(a.push(h+1),a.push(c),a.push(1-l))}return A}within(t,e,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:r,nodeSize:o}=this,s=[0,i.length-1,0],a=[],A=n*n;for(;s.length;){const l=s.pop()||0,c=s.pop()||0,u=s.pop()||0;if(c-u<=o){for(let n=u;n<=c;n++)BL(r[2*n],r[2*n+1],t,e)<=A&&a.push(i[n]);continue}const h=u+c>>1,g=r[2*h],d=r[2*h+1];BL(g,d,t,e)<=A&&a.push(i[h]),(0===l?t-n<=g:e-n<=d)&&(s.push(u),s.push(h-1),s.push(1-l)),(0===l?t+n>=g:e+n>=d)&&(s.push(h+1),s.push(c),s.push(1-l))}return a}}function CL(t,e,n,i,r,o){if(r-i<=n)return;const s=i+r>>1;EL(t,e,s,i,r,o),CL(t,e,n,i,s-1,1-o),CL(t,e,n,s+1,r,1-o)}function EL(t,e,n,i,r,o){for(;r>i;){if(r-i>600){const s=r-i+1,a=n-i+1,A=Math.log(s),l=.5*Math.exp(2*A/3),c=.5*Math.sqrt(A*l*(s-l)/s)*(a-s/2<0?-1:1);EL(t,e,n,Math.max(i,Math.floor(n-a*l/s+c)),Math.min(r,Math.floor(n+(s-a)*l/s+c)),o)}const s=e[2*n+o];let a=i,A=r;for(_L(t,e,i,n),e[2*r+o]>s&&_L(t,e,i,r);a<A;){for(_L(t,e,a,A),a++,A--;e[2*a+o]<s;)a++;for(;e[2*A+o]>s;)A--}e[2*i+o]===s?_L(t,e,i,A):(A++,_L(t,e,A,r)),A<=n&&(i=A+1),n<=A&&(r=A-1)}}function _L(t,e,n,i){vL(t,n,i),vL(e,2*n,2*i),vL(e,2*n+1,2*i+1)}function vL(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function BL(t,e,n,i){const r=t-n,o=e-i;return r*r+o*o}const wL={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},bL=Math.fround||(QL=new Float32Array(1),t=>(QL[0]=+t,QL[0]));var QL;const xL=3,DL=5,SL=6;class ML{constructor(t){this.options=Object.assign(Object.create(wL),t),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(t){const{log:e,minZoom:n,maxZoom:i}=this.options;e&&console.time("total time");const r=`prepare ${t.length} points`;e&&console.time(r),this.points=t;const o=[];for(let e=0;e<t.length;e++){const n=t[e];if(!n.geometry)continue;const[i,r]=n.geometry.coordinates,s=bL(NL(i)),a=bL(PL(r));o.push(s,a,1/0,e,-1,1),this.options.reduce&&o.push(0)}let s=this.trees[i+1]=this._createTree(o);e&&console.timeEnd(r);for(let t=i;t>=n;t--){const n=+Date.now();s=this.trees[t]=this._createTree(this._cluster(s,t)),e&&console.log("z%d: %d clusters in %dms",t,s.numItems,+Date.now()-n)}return e&&console.timeEnd("total time"),this}getClusters(t,e){let n=((t[0]+180)%360+360)%360-180;const i=Math.max(-90,Math.min(90,t[1]));let r=180===t[2]?180:((t[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,r=180;else if(n>r){const t=this.getClusters([n,i,180,o],e),s=this.getClusters([-180,i,r,o],e);return t.concat(s)}const s=this.trees[this._limitZoom(e)],a=s.range(NL(n),PL(o),NL(r),PL(i)),A=s.data,l=[];for(const t of a){const e=this.stride*t;l.push(A[e+DL]>1?kL(A,e,this.clusterProps):this.points[A[e+xL]])}return l}getChildren(t){const e=this._getOriginId(t),n=this._getOriginZoom(t),i="No cluster with the specified id.",r=this.trees[n];if(!r)throw new Error(i);const o=r.data;if(e*this.stride>=o.length)throw new Error(i);const s=this.options.radius/(this.options.extent*Math.pow(2,n-1)),a=o[e*this.stride],A=o[e*this.stride+1],l=r.within(a,A,s),c=[];for(const e of l){const n=e*this.stride;o[n+4]===t&&c.push(o[n+DL]>1?kL(o,n,this.clusterProps):this.points[o[n+xL]])}if(0===c.length)throw new Error(i);return c}getLeaves(t,e,n){e=e||10,n=n||0;const i=[];return this._appendLeaves(i,t,e,n,0),i}getTile(t,e,n){const i=this.trees[this._limitZoom(t)],r=Math.pow(2,t),{extent:o,radius:s}=this.options,a=s/o,A=(n-a)/r,l=(n+1+a)/r,c={features:[]};return this._addTileFeatures(i.range((e-a)/r,A,(e+1+a)/r,l),i.data,e,n,r,c),0===e&&this._addTileFeatures(i.range(1-a/r,A,1,l),i.data,r,n,r,c),e===r-1&&this._addTileFeatures(i.range(0,A,a/r,l),i.data,-1,n,r,c),c.features.length?c:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){const n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e}_appendLeaves(t,e,n,i,r){const o=this.getChildren(e);for(const e of o){const o=e.properties;if(o&&o.cluster?r+o.point_count<=i?r+=o.point_count:r=this._appendLeaves(t,o.cluster_id,n,i,r):r<i?r++:t.push(e),t.length===n)break}return r}_createTree(t){const e=new yL(t.length/this.stride|0,this.options.nodeSize,Float32Array);for(let n=0;n<t.length;n+=this.stride)e.add(t[n],t[n+1]);return e.finish(),e.data=t,e}_addTileFeatures(t,e,n,i,r,o){for(const s of t){const t=s*this.stride,a=e[t+DL]>1;let A,l,c;if(a)A=RL(e,t,this.clusterProps),l=e[t],c=e[t+1];else{const n=this.points[e[t+xL]];A=n.properties;const[i,r]=n.geometry.coordinates;l=NL(i),c=PL(r)}const u={type:1,geometry:[[Math.round(this.options.extent*(l*r-n)),Math.round(this.options.extent*(c*r-i))]],tags:A};let h;h=a||this.options.generateId?e[t+xL]:this.points[e[t+xL]].id,void 0!==h&&(u.id=h),o.features.push(u)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,e){const{radius:n,extent:i,reduce:r,minPoints:o}=this.options,s=n/(i*Math.pow(2,e)),a=t.data,A=[],l=this.stride;for(let n=0;n<a.length;n+=l){if(a[n+2]<=e)continue;a[n+2]=e;const i=a[n],c=a[n+1],u=t.within(a[n],a[n+1],s),h=a[n+DL];let g=h;for(const t of u){const n=t*l;a[n+2]>e&&(g+=a[n+DL])}if(g>h&&g>=o){let t,o=i*h,s=c*h,d=-1;const p=(n/l<<5)+(e+1)+this.points.length;for(const i of u){const A=i*l;if(a[A+2]<=e)continue;a[A+2]=e;const c=a[A+DL];o+=a[A]*c,s+=a[A+1]*c,a[A+4]=p,r&&(t||(t=this._map(a,n,!0),d=this.clusterProps.length,this.clusterProps.push(t)),r(t,this._map(a,A)))}a[n+4]=p,A.push(o/g,s/g,1/0,p,-1,g),r&&A.push(d)}else{for(let t=0;t<l;t++)A.push(a[n+t]);if(g>1)for(const t of u){const n=t*l;if(!(a[n+2]<=e)){a[n+2]=e;for(let t=0;t<l;t++)A.push(a[n+t])}}}}return A}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e,n){if(t[e+DL]>1){const i=this.clusterProps[t[e+SL]];return n?Object.assign({},i):i}const i=this.points[t[e+xL]].properties,r=this.options.map(i);return n&&r===i?Object.assign({},r):r}}function kL(t,e,n){return{type:"Feature",id:t[e+xL],properties:RL(t,e,n),geometry:{type:"Point",coordinates:[TL(t[e]),LL(t[e+1])]}}}function RL(t,e,n){const i=t[e+DL],r=i>=1e4?`${Math.round(i/1e3)}k`:i>=1e3?Math.round(i/100)/10+"k":i,o=t[e+SL],s=-1===o?{}:Object.assign({},n[o]);return Object.assign(s,{cluster:!0,cluster_id:t[e+xL],point_count:i,point_count_abbreviated:r})}function NL(t){return t/360+.5}function PL(t){const e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function TL(t){return 360*(t-.5)}function LL(t){const e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}var FL=g(5114),OL=g.n(FL);function GL(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class UL extends Mu{shouldUpdateState({changeFlags:t}){return t.somethingChanged}updateState({props:t,oldProps:e,changeFlags:n}){const i=n.dataChanged||t.sizeScale!==e.sizeScale||t.maxZoom!==e.maxZoom;if(i){var r;this.categories=[],null===(r=this.legendItems)||void 0===r||r.forEach((t=>{t.disabled||this.categories.push(t.label)}));const e=new ML({maxZoom:t.maxZoom,radius:t.sizeScale*Math.sqrt(2),reduce:s.HY,map:t=>(0,s.Lz)(t,this.thresholds,this.legendItems,this.categories,this.time)});e.load(t.data),this.setState({index:e})}const o=Math.floor(this.context.viewport.zoom+1);(i||o!==this.state.z)&&this.setState({data:this.state.index.getClusters([-180,-85,180,85],o),z:o})}getPickingInfo({info:t,mode:e}){const n=t.object;if(n){var i;const t=n.properties,{cluster_id:e}=t,r=null===(i=this.hoverCluster)||void 0===i?void 0:i.properties;if(e!==(null==r?void 0:r.cluster_id)){const t=this.state.index.getClusterExpansionZoom(e),i=function(t,e){const n=[];return function t(i){const r=e.getChildren(i);if(r.length){const e=r.map((t=>t.properties.cluster_id)).filter((t=>t));n.push(...e),e.forEach((e=>t(e)))}}(t),n}(e,this.state.index),r=this.state.index.getLeaves(e,"infinity").map((t=>t.geometry.coordinates)),o=OL()(r);void 0!==t&&(n.properties.expZoom=t),Array.isArray(o)&&(n.properties.hullCoords=o),(null==i?void 0:i.length)&&(n.properties.ignoredCluster_ids=i),this.hoverCluster=n,this.setHoverCluster(n)}}return t}renderLayers(){var t,e,n;const{data:i}=this.state,r=null===(e=this.hoverCluster)||void 0===e||null===(t=e.properties)||void 0===t?void 0:t.ignoredCluster_ids;var o;return new ih(this.getSubLayerProps({visible:this.visible,id:HC.Points,data:i,updateTriggers:{getIcon:this.time},getFilterValue:t=>t.properties.cluster?(null==r?void 0:r.length)&&r.includes(t.properties.cluster_id)?0:1:0,filterRange:[1,1],selectedFeatureIndexes:null!==(o=null===(n=this.getSelectedFeIndexes)||void 0===n?void 0:n.get(HC.Points))&&void 0!==o?o:[],getPosition:t=>t.geometry.coordinates,getIcon:t=>{if(t.properties.cluster){const{cluster_id:e,statistics:n,st:i,thrCounts:r,annotStateCounts:o,total:s,stTotal:a,point_count_abbreviated:A}=t.properties,l={};if(r)for(const t in r){const e=DE(this.thresholds,t),n=r[t];if(e&&n>0){const t=e.color,i=e.label;l[t]={count:n,label:i}}}const c=this.legendItems.length!==this.categories.length;if(s>1)return{url:rE(oE({colorCounts:l,countAbbr:A,isFiltered:c,annotStateCounts:o,allTotal:s,allStTotal:a})),width:90,height:90}}return{url:rE('<svg xmlns="http://www.w3.org/2000/svg" width="1" height="1">  \n</svg>'),width:1,height:1,id:"blank"}},iconSizeScale:1,getSize:45,iconSizeUnits:"pixels",parameters:{depthTest:!1},extensions:[new mL({filterSize:1})],pickable:this.pickable,autoHighlight:!1}))}constructor(t){super(t),GL(this,"selectedIp",void 0),GL(this,"pickable",void 0),GL(this,"getSelectedFeIndexes",void 0),GL(this,"time",void 0),GL(this,"cluster_id",void 0),GL(this,"id",void 0),GL(this,"legendItems",void 0),GL(this,"categories",void 0),GL(this,"hoverCluster",void 0),GL(this,"visible",void 0),GL(this,"thresholds",void 0),GL(this,"graph",void 0),GL(this,"setHoverCluster",void 0),GL(this,"setHoverInfo",void 0),this.id=t.id,this.selectedIp=t.getSelectedIp,this.pickable=t.pickable,this.legendItems=t.legendItems.slice(),this.legendItems.push({color:bf.color,label:bf.label,yAxis:1,disabled:!1}),this.time=t.time,this.hoverCluster=t.hoverCluster,this.thresholds=t.thresholds,this.setHoverCluster=t.setHoverCluster,this.setHoverInfo=t.setHoverInfo;const e=PE(t.getVisLayers,"clusters"),n=null==e?void 0:e.getVisible,i=null==e?void 0:e.getIndeterminate;this.visible=n&&!i,this.graph=t.graph}}function jL(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}const YL=OS((t=>{var e,{selectHandler:n,wait:i=300,value:r="",placeholder:s="Search",isMainLocSearch:a=!1}=t;jL(t,["selectHandler","wait","value","placeholder","isMainLocSearch"]);const A=(0,HE.useStyles2)(KL),{pointStore:l,viewStore:c,graph:u}=x1(),{getSelectedIp:h}=l,{getNodes:g}=u;var d;const p=null===(e=(null!==(d=null==g?void 0:g.map((t=>t.getPropertyValue("feature"))))&&void 0!==d?d:[]).filter((t=>t)))||void 0===e?void 0:e.map((t=>{const e=null==t?void 0:t.properties.locName,n=[Lx].filter((t=>null==t?void 0:t.length)).reduce(((t,e)=>t.concat(e)),[]),i=(n&&n.length?n:[]).map((e=>t.properties[e])).join(" "),r=kE(null==t?void 0:t.geometry);return{label:`${e} ${i}`,value:e,color:t.properties.iconColor,coord:r}})),f=`Search: ${null==p?void 0:p.length}`,m=a?h:r;return o().createElement(HE.Select,{className:A.select,virtualized:!0,options:p,isSearchable:!0,value:""!==m?m:null,placeholder:f,onChange:t=>{n(t.value,null,!0,!0)}})})),KL=t=>({select:tv.css`
  isolation: isolate;    
  z-index: 2147483647;
      & * {
          z-index: 2147483647; /* or 10 if you want to explicitly set it */
      }
  `});function zL(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JL(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}const qL=t=>{var{children:e}=t,n=JL(t,["children"]);return o().createElement("label",null,o().createElement(HE.Checkbox,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){zL(t,e,n[e])}))}return t}({style:{padding:0}},n)),e)};function HL(t,e,n,i,r,o,s){try{var a=t[o](s),A=a.value}catch(t){return void n(t)}a.done?e(A):Promise.resolve(A).then(i,r)}function VL(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const WL=OS((({setIsShowCenter:t,time:e,timeZone:n,options:i,rId:r})=>{const s=(0,HE.useStyles2)(ZL),{pointStore:a,viewStore:A,replaceVariables:l,graph:c,VisLayers:u}=x1(),{setViewState:h,getClusterMaxZoom:g,setClusterMaxZoom:d}=A,{setSelectedIp:p,setTooltipObject:f,setSelIds:m,getMode:I,setMode:y}=a,{getVisLayers:C,setVisRefresh:E}=u,{getNodeMap:_,getNodes:v,findNode:B,isDefDir:w,switchDirection:b}=c,Q=PE(C,"primary"),x=i&&i.isEditable,D=_,S=function(){var e=function(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function s(t){HL(o,i,r,s,a,"next",t)}function a(t){HL(o,i,r,s,a,"throw",t)}s(void 0)}))}}((function*(e,n,i=!0,r=!0,o){var s;e&&i?p(e,null):e&&!r||null==o||p(null,[o]);const a=null==D||null===(s=D[e])||void 0===s?void 0:s.getPropertyValue("feature");if(r&&(a||n)){const e=kE(null==a?void 0:a.geometry);(n||e)&&(0,nE.flushSync)((()=>{var i,r,o;const s={longitude:n?n[0]:e[0],latitude:n?n[1]:e[1],transitionDuration:250,maxPitch:42.75,zoom:null!==(o=null!==(r=h1&&(null==h1?void 0:h1.zoom)-1)&&void 0!==r?r:null==c1||null===(i=c1.transform)||void 0===i?void 0:i.zoom)&&void 0!==o?o:18};h(s),t(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){VL(t,e,n[e])}))}return t}({},s))}))}}));return function(t,n){return e.apply(this,arguments)}}(),M=[];for(let t=18;t>=2;t--)M.push({label:t.toString(),value:t});const k=PE(C,"nodes"),R=(PE(C,"clusters"),(null==k?void 0:k.getVisible)&&!(null==k?void 0:k.getIndeterminate));return o().createElement("div",{className:s.myMenu},o().createElement(HE.InlineFieldRow,{className:s.inlineRow},o().createElement(HE.InlineField,null,o().createElement(YL,{isMainLocSearch:!0,selectHandler:S})),o().createElement(HE.InlineField,{className:s.field},o().createElement(HE.Tooltip,{content:"cluster max zoom"},o().createElement("div",null,o().createElement(HE.Select,{onChange:t=>{t.value&&d(t.value)},value:g,options:M})))),o().createElement(HE.InlineField,{className:s.field},o().createElement(HE.Tooltip,{content:"swap tar-src"},o().createElement("div",null,o().createElement(HE.Switch,{value:!w,title:"path reverse",onChange:()=>{f({}),m([]),b()}})))),x&&o().createElement(HE.InlineField,{className:s.field},o().createElement(HE.Tooltip,{content:"drag nodes & edges"},o().createElement("div",null,o().createElement(qL,{disabled:!(null==Q?void 0:Q.getVisible)||!x,checked:"modify"===I&&R,title:"edit",onChange:()=>{const t="modify"===I?"view":"modify";"modify"===t&&((t,e,n,i="primary",r)=>{var o;const s=t,a=(null==s?void 0:s.find)&&(null===(o=s.find((t=>t.group===i)))||void 0===o?void 0:o.children),A=void 0!==r?a[r]:null==a?void 0:a.find((t=>t.type===e||t.title===e));A&&A.setVisible(void 0!==n?n:!A.getVisible)})(C,"stat2",!1),y(t)}},"modify"))))),o().createElement(HE.InlineFieldRow,null,o().createElement("br",null)))})),ZL=t=>({inlineRow:tv.css`
      display: flex;
      align-items: center;
      pointer-events: all;
    `,myMenu:tv.css`
      color: grey;
      font-size: 0.9em;
      position: absolute;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      z-index: 2;
      top: ${t.spacing(1)};
      left: ${t.spacing(1)};
      width: auto;
      // min-width: 15%;
      background: none;
      pointer-events: none;

      > div,button, ul, input, p  {
        margin-top: 3px;
      }
    `,drawerBtn:tv.css`
      pointer-events: all;
    `,field:tv.css`
      margin-top: ${t.spacing(.1)};
      margin-right: ${t.spacing(1.5)};
    `});function XL(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $L(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function tF(t,e){return"object"==typeof t&&null!==t?o().createElement("ul",null,Object.entries(t).map((([n,i],r)=>o().createElement(o().Fragment,null,e&&"labels"===n?i&&Object.entries(i).map((([t,e],r)=>o().createElement("span",{key:`${n}-${r}`},`${t}: ${e}`,r!==Object.keys(i).length-1?", ":""))):Array.isArray(i)?i.map(((t,e)=>o().createElement("span",{key:e},`${e}: ${t}`,e!==i.length-1?", ":""))):o().createElement("span",null,`${n}: ${i}`),r!==Object.keys(t).length-1?", ":""))),o().createElement("br",null)," "):t}const eF=({parent:t,props:e,getSelectedIp:n,isDefDir:i})=>o().createElement(HE.IconButton,{key:"setVars",variant:"primary",name:"graph-bar",size:"sm",tooltip:"set vars",tooltipPlacement:"left",onClick:()=>{!function({parent:t,props:e,getSelectedIp:n,isDefDir:i}){const[r,o]=i?[n,t]:[t,n];WE.locationService.partial({"var-target":null!=r?r:"","var-source":null!=o?o:""},!0)}({parent:t,props:e,getSelectedIp:n,isDefDir:i})}});function nF({object:t,displayProps:n,findNode:i,findEdge:r,time:s,timeZone:a,pinned:A=!1,getSelectedIp:l="",setSelectedIp:c,isDefDir:u,setTooltipObject:h}){var g,d,p,f,m;const I=null!==(m=null!==(f=null==t?void 0:t.properties)&&void 0!==f?f:t)&&void 0!==m?m:{},y=I.locName;let C=n;const E=Array.isArray(C)?C.reduce(((t,e)=>(I.hasOwnProperty(e)&&(Array.isArray(I[e])?t[e]=I[e].map((t=>t)):t[e]=I[e]),t)),{}):I;let _;if(E.hasOwnProperty("all_annots")){const t=vE(E.all_annots,s),n=[];(null==t?void 0:t.length)&&(null==t||t.forEach((t=>{if(!t)return;const{labels:i,newState:r,timeEnd:o}=t,{grafana_folder:s}=i,a=$L(i,["grafana_folder"]),A=t.timeEnd,l={};A&&(l.timeF=(0,e.dateTime)(A).format("YYYY-MM-DD HH:mm:ss"));const c=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){XL(t,e,n[e])}))}return t}({labels:a,newState:r,timeEnd:o},l);n.push(c)})),_=n),delete E.all_annots}const v=y&&i(y),B=null==v||null===(g=v.getConnectedEdges().filter((t=>(u?t.getTargetNodeId():t.getSourceNodeId())===y)))||void 0===g?void 0:g.filter((t=>!(null==t?void 0:t.getPropertyValue("is_fake"))));var w;const b=null!==(w=null==B?void 0:B.map((t=>{const e=t.getPropertyValue("parPath");return{parPath:u?e:null==e?void 0:e.slice().reverse(),lineId:t.getPropertyValue("lineId")}})))&&void 0!==w?w:[],Q=I.locName&&r(u?I.locName+"-"+(null===(d=I.parPath)||void 0===d?void 0:d.at(-1)):(null===(p=I.parPath)||void 0===p?void 0:p.at(-1))+"-"+I.locName),x=null==Q?void 0:Q.getPropertyValue("trespass"),D=I.parPath,S=Array.isArray(I.parPath)&&D.length?[null==D?void 0:D.at(-1)]:null==b?void 0:b.map((t=>t.parPath.at(-1))),M=null==S?void 0:S.map(((t,e)=>o().createElement("li",{key:""+e},A&&o().createElement(eF,{parent:t,props:I,getSelectedIp:l,isDefDir:u}),u?"src: ":"tar: ",o().createElement("a",{onClick:()=>{var t;return c(l,[null===(t=b[e])||void 0===t?void 0:t.lineId])}},t)))),k=x&&Object.keys(x),R=null==k?void 0:k.map(((t,e)=>o().createElement("li",{key:e.toString()},o().createElement("a",{onClick:()=>c(t,[x[t]])},t))));return o().createElement(o().Fragment,null,o().createElement("ul",null,I.locName&&o().createElement("li",{key:"locName"},A&&o().createElement(o().Fragment,null,o().createElement(HE.IconButton,{key:"closeHint",variant:"destructive",name:"x",size:"sm",tooltip:"close",tooltipPlacement:"left",onClick:()=>{h({})}}),!(null==M?void 0:M.length)&&o().createElement(eF,{props:I,getSelectedIp:l,isDefDir:u})),u?"tar: ":"src: ",o().createElement("a",{onClick:()=>c(l,null)},I.locName)),M,!!(null==R?void 0:R.length)&&`bundle(${R.length}):`,!!(null==R?void 0:R.length)&&R,Object.entries(E).map((([t,e])=>o().createElement("li",{key:t},`${t}: ${tF(e,!1)}`))),(null==_?void 0:_.length)&&o().createElement(o().Fragment,null,o().createElement("li",{key:"ans"},_.map(((t,e)=>o().createElement("li",{key:e},tF(t,!0))))))))}const iF=({info:t,time:e,timeZone:n,isClosed:i=!1,dataLayers:r,thresholds:s})=>{var a,A;const l=(0,HE.useStyles2)(rF),{pointStore:c,graph:u}=x1(),{getMode:h,getTooltipObject:g,getSelectedIp:d,setSelectedIp:p,setTooltipObject:f}=c,{findNode:m,findEdge:I,isDefDir:y}=u;if(!t||!Object.entries(t).length)return null;const{x:C=-3e3,y:E=-3e3,object:_,properties:v}=t;if(!_){var B,w;if(i)return null;const{x:s=-3e3,y:a=-3e3,object:A}=g;var b,Q;const c=null!==(Q=null!==(b=null==_?void 0:_.properties)&&void 0!==b?b:_)&&void 0!==Q?Q:{},u=void 0!==(null==c?void 0:c.lOrder)?null==c?void 0:c.lOrder:null===(w=t.layer)||void 0===w||null===(B=w.props)||void 0===B?void 0:B.order,h=r.length&&void 0!==u&&r[u],C=null==h?void 0:h.isShowTooltip,E=null==h?void 0:h.displayProperties,v=["ack","msg","all_annots","liveStat"],x=C&&E&&(null==E?void 0:E.length)?[...E,"ack","msg","all_annots","liveStat"]:v;return o().createElement("div",{className:l.turnOnEvents,style:{left:s,top:a}},nF({object:A,displayProps:x,findNode:m,findEdge:I,time:e,timeZone:n,pinned:!0,getSelectedIp:d,setSelectedIp:p,isDefDir:y,setTooltipObject:f}))}if((null==_||null===(a=_.properties)||void 0===a?void 0:a.cluster)||(null==v?void 0:v.cluster)){var x;if(i)return null;let t,e;var D;({thrCounts:t,annotStateCounts:e}=null!==(D=null==_?void 0:_.properties)&&void 0!==D?D:v);const n={};if(t)for(const e in t){const i=DE(s,e),r=t[e];if(i&&r>0){const t=i.color,e=i.label;n[t]={count:r,label:e}}}if(n&&(null===(x=Object.values(n))||void 0===x?void 0:x.length)){const t=Object.entries(n).map((([t,e],n)=>o().createElement(o().Fragment,{key:t},n>0&&o().createElement("br",null),"object"==typeof e&&null!==e&&"label"in e&&"count"in e?o().createElement("span",{style:{color:t,fontWeight:"bold"}},`${e.label?e.label:t}: ${e.count}`):null))),i=[];[Ef,_f,vf].forEach((t=>{if((null==e?void 0:e[t])&&Object.keys(null==e?void 0:e[t]).length){const n=e[t];i.push([t,n])}}));const r=i.map((([t,e],n)=>o().createElement(o().Fragment,{key:t},n>0&&o().createElement("br",null),o().createElement("span",{style:{color:t,fontWeight:"bold"}},`${e.label?e.label:t}: ${e.count}`))));return t.length?o().createElement("div",{className:l.tooltip,style:{left:C,top:E}},o().createElement("div",null,t),0!==(null==r?void 0:r.length)&&o().createElement("div",null,o().createElement("br",null),o().createElement("span",null,"States: "),o().createElement("br",null),r)):null}}var S,M,k;if("modify"===h&&(null===(S=_.properties)||void 0===S?void 0:S.guideType))return null;const R=null!==(k=null!==(M=null==_?void 0:_.properties)&&void 0!==M?M:_)&&void 0!==k?k:{},N=null===(A=t.layer)||void 0===A?void 0:A.props,P=void 0!==(null==R?void 0:R.lOrder)?null==R?void 0:R.lOrder:null==N?void 0:N.order,T=r.length&&void 0!==P&&r[P];var L;const F=null!==(L=null==T?void 0:T.isShowTooltip)&&void 0!==L?L:null==N?void 0:N.isShowTooltip;if(!F)return null;var O;const G=null!==(O=null==T?void 0:T.displayProperties)&&void 0!==O?O:null==N?void 0:N.displayProperties,U=(null==T||T.locField,null==T||T.parField,F&&G&&(null==G?void 0:G.length)?[...G,"ack","msg","all_annots","liveStat"]:["ack","msg","all_annots","liveStat"]);return o().createElement("div",{className:l.tooltip,style:{left:C,top:E}},nF({object:_,displayProps:U,findNode:m,findEdge:I,time:e,timeZone:n,pinned:!1,setTooltipObject:f,isDefDir:y,getSelectedIp:d,setSelectedIp:p}))},rF=t=>({tooltip:tv.css`
      position: absolute;     
      pointer-events: none;      
      text-align: left;
      user-select: text;
      cursor: text;      
      font-size: 1em;
      border-radius: 5px;
      border: ${t.isDark?"none":"solid #c7c3c3"};
      background: ${t.isDark?t.colors.background.primary:"#EAEAEA"}; 
      color: ${t.colors.getContrastText(t.colors.background.canvas)}; 
      min-width: 25px;
      max-width: 400px;
      //overflow-y: hidden;
      margin: 5px;
      padding: 8px;
      z-index: 3;
      opacity: 0.95;
      ul {
      list-style-type: none }
    `,turnOnEvents:tv.css`
            position: absolute;                      
            text-align: left;
            user-select: text;
            cursor: text;
            font-size: 1em;
            border-radius: 5px;
            border: ${t.isDark?"none":"solid #c7c3c3"};
            background: ${t.isDark?t.colors.background.primary:"#EAEAEA"};
            color: ${t.colors.getContrastText(t.colors.background.canvas)};
            min-width: 25px;
            max-width: 400px;
            //overflow-y: hidden;
            margin: 5px;
            padding: 8px;
            z-index: 10;
            opacity: 0.95;
            ul {
                list-style-type: none }    
        pointer-events: all`}),oF=[0,0,0,255],sF={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,_normalize:!0,_windingOrder:"CW",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,getPolygon:{type:"accessor",value:t=>t.polygon},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:oF},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0};class aF extends Mu{static{this.layerName="PolygonLayer"}static{this.defaultProps=sF}initializeState(){this.state={paths:[],pathsDiff:null},this.props.getLineDashArray&&ii.removed("getLineDashArray","PathStyleExtension")()}updateState({changeFlags:t}){const e=t.dataChanged||t.updateTriggersChanged&&(t.updateTriggersChanged.all||t.updateTriggersChanged.getPolygon);if(e&&Array.isArray(t.dataChanged)){const e=this.state.paths.slice(),n=t.dataChanged.map((t=>Gg({data:e,getIndex:t=>t.__source.index,dataRange:t,replace:this._getPaths(t)})));this.setState({paths:e,pathsDiff:n})}else e&&this.setState({paths:this._getPaths(),pathsDiff:null})}_getPaths(t={}){const{data:e,getPolygon:n,positionFormat:i,_normalize:r}=this.props,o=[],s="XY"===i?2:3,{startRow:a,endRow:A}=t,{iterable:l,objectInfo:c}=Zi(e,a,A);for(const t of l){c.index++;let e=n(t,c);r&&(e=Vg(e,s));const{holeIndices:i}=e,a=e.positions||e;if(i)for(let e=0;e<=i.length;e++){const n=a.slice(i[e-1]||0,i[e]||a.length);o.push(this.getSubLayerRow({path:n},t,c.index))}else o.push(this.getSubLayerRow({path:a},t,c.index))}return o}renderLayers(){const{data:t,_dataDiff:e,stroked:n,filled:i,extruded:r,wireframe:o,_normalize:s,_windingOrder:a,elevationScale:A,transitions:l,positionFormat:c}=this.props,{lineWidthUnits:u,lineWidthScale:h,lineWidthMinPixels:g,lineWidthMaxPixels:d,lineJointRounded:p,lineMiterLimit:f,lineDashJustified:m}=this.props,{getFillColor:I,getLineColor:y,getLineWidth:C,getLineDashArray:E,getElevation:_,getPolygon:v,updateTriggers:B,material:w}=this.props,{paths:b,pathsDiff:Q}=this.state,x=this.getSubLayerClass("fill",sd),D=this.getSubLayerClass("stroke",xg),S=this.shouldRenderSubLayer("fill",b)&&new x({_dataDiff:e,extruded:r,elevationScale:A,filled:i,wireframe:o,_normalize:s,_windingOrder:a,getElevation:_,getFillColor:I,getLineColor:r&&o?y:oF,material:w,transitions:l},this.getSubLayerProps({id:"fill",updateTriggers:B&&{getPolygon:B.getPolygon,getElevation:B.getElevation,getFillColor:B.getFillColor,lineColors:r&&o,getLineColor:B.getLineColor}}),{data:t,positionFormat:c,getPolygon:v}),M=!r&&n&&this.shouldRenderSubLayer("stroke",b)&&new D({_dataDiff:Q&&(()=>Q),widthUnits:u,widthScale:h,widthMinPixels:g,widthMaxPixels:d,jointRounded:p,miterLimit:f,dashJustified:m,_pathType:"loop",transitions:l&&{getWidth:l.getLineWidth,getColor:l.getLineColor,getPath:l.getPolygon},getColor:this.getSubLayerAccessor(y),getWidth:this.getSubLayerAccessor(C),getDashArray:this.getSubLayerAccessor(E)},this.getSubLayerProps({id:"stroke",updateTriggers:B&&{getWidth:B.getLineWidth,getColor:B.getLineColor,getDashArray:B.getLineDashArray}}),{data:b,positionFormat:c,getPath:t=>t.path});return[!r&&S,M,r&&S]}}const AF={marker:{x:0,y:0,width:128,height:128,mask:!0}},lF=t=>{const{data:e,getSelectedFeIndexes:n,highlightColor:i,onHover:r,iconMapping:o=AF,colType:s=HC.Polygons,getTooltipObject:a,setHoverInfo:A,hoverCluster:l,hoverInfo:c,setHoverCluster:u,setTooltipObject:h,theme2:g,isStatic:d,getVisLayers:p,thresholds:f,index:m,order:I}=t,y=void 0!==m&&PE(p,"doesnMatter",HC.Polygons,m),C=null==y?void 0:y.getVisible,E=null==y?void 0:y.getIndeterminate;var _;return new aF({visible:s===HC.Hull||C&&!E,highlightColor:i,pickable:!0,autoHighlight:s!==HC.Hull,id:d?s+"-"+d:s===HC.Hull?s:s+m,order:I,iconMapping:o,data:e,onHover:t=>{if(s!==HC.Hull)return r(t);if((null==a?void 0:a.object)&&Object.keys(null==a?void 0:a.object).length)return;if(!t.object)return void A({});const e=null==l?void 0:l.properties;if(e){const{cluster:n,thrCounts:i,annotStateCounts:r}=e;t.properties={cluster:n,thrCounts:i,annotStateCounts:r,isHull:!0}}(0,nE.flushSync)((()=>{A(t)}))},onClick:()=>{A({}),u(null),h({})},selectedFeatureIndexes:null!==(_=null==n?void 0:n[HC.Polygons])&&void 0!==_?_:[],getPolygon:t=>s===HC.Hull?t:t.geometry.coordinates,getIcon:()=>"marker",filled:!0,stroked:s!==HC.Hull,getFillColor:t=>{var e,n;if(s===HC.Hull)return bE(g.isDark?"rgb(255, 215, 0, 0.15)":"rgb(66, 164, 245, 0.2)");const{thrId:i,defaultColor:r}=t.properties,o=DE(f,i,r),{color:a}=o,A=null===(n=t.properties)||void 0===n||null===(e=n.style)||void 0===e?void 0:e.opacity,l=bE(a);return A&&(l[3]=Math.round(255*A)),l},extruded:!0,getElevation:t=>{var e,n;return null!==(n=null===(e=t.properties)||void 0===e?void 0:e.height)&&void 0!==n?n:0},getLineColor:t=>{const{thrId:e,defaultColor:n}=t.properties,i=DE(f,e,n),{color:r}=i;return bE(r)},getLineWidth:t=>{const{thrId:e,defaultColor:n}=t.properties;return DE(f,e,n).lineWidth}})};var cF=g(5731);const uF=()=>{var t,e,n;const i=(0,HE.useStyles2)(hF),{pointStore:r,viewStore:s}=x1(),{getSelCoord:a}=r;function A(t){const e=document.getElementById(t);if(e){const t=document.createRange();t.selectNode(e);const n=window.getSelection();null==n||n.removeAllRanges(),null==n||n.addRange(t)}}const l=(null==a||null===(t=a.coordinates)||void 0===t?void 0:t.length)?a:{coordinates:[" "," "],type:"Point"};return o().createElement("div",{className:i.posTracker},o().createElement("div",null,o().createElement("span",{onDoubleClick:()=>A("coordinates")},o().createElement(cF.CopyToClipboard,{text:JSON.stringify(a)},o().createElement(HE.Icon,{name:"copy",size:"xs",title:"Copy GeoJSON"})),"",o().createElement("span",{id:"coordinates"},"[",o().createElement("span",{onClick:()=>A("lon")},o().createElement("span",{id:"lon"},null===(e=l.coordinates)||void 0===e?void 0:e[0])),",",o().createElement("span",{onClick:()=>A("lat")},o().createElement("span",{id:"lat"},null==l||null===(n=l.coordinates)||void 0===n?void 0:n[1])),"]"),"lon,lat")))},hF=t=>({posTracker:tv.css`
        //margin-bottom: 5px;        
        margin-right: ${t.spacing(1)};
          //position: absolute;
          z-index: 1;
          //bottom: ${t.spacing(.3)};
      font-size: x-small;
      // color: ${t.colors.getContrastText(t.colors.background.primary)};
      
        `});function gF(t,e,n,i,r,o,s){try{var a=t[o](s),A=a.value}catch(t){return void n(t)}a.done?e(A):Promise.resolve(A).then(i,r)}function dF(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function s(t){gF(o,i,r,s,a,"next",t)}function a(t){gF(o,i,r,s,a,"throw",t)}s(void 0)}))}}function pF(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fF(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}const mF=({parField:t})=>{const e=(0,HE.useStyles2)(IF),{pointStore:n,graph:i}=x1(),{getNodeMap:r,getEdges:s,findNode:a}=i,A=s;const l=function(){var t=dF((function*(t){if((null==A?void 0:A.length)>0){const e=[],n=["edgeField","locName","style","sources","geojson","longitude","latitude","threshold","colType","isShowTooltip","displayProps"];null==A||A.forEach((i=>{var r;const o=i.getId().split("-")[0],s=null===(r=a(o))||void 0===r?void 0:r.getPropertyValue("feature");if(!(null==s?void 0:s.properties))return;const A=s.properties,{locName:l,edgeField:c}=A,u=fF(A,["locName","edgeField"]),h=Object.entries(u).filter((([t,e])=>!n.includes(t))),g=s.geometry.coordinates,d=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){pF(t,e,n[e])}))}return t}({},Object.fromEntries(h)),p=i.getPropertyValue("lineExtraProps");var f;p&&(p&&(null===(f=Object.keys(p))||void 0===f||f.forEach((t=>{const e=p[t];null!=e&&(d[t]=e)}))));const m=i.getPropertyValue("parPath");m&&t&&(d[t]=JSON.stringify(m));const I={action:"syncNodes",coords:g,filteredRest:d};I&&e.push(I)})),e.length>0&&(yield O1(e))}}));return function(e){return t.apply(this,arguments)}}();return o().createElement(HE.Button,{className:e.syncBtn,name:"arrow-from-right",fill:"outline",size:"sm",title:"export all to .csv",onClick:()=>l(t)},"export-CSV")},IF=t=>({syncBtn:tv.css`
          pointer-events: all;
          position: fixed;
          bottom: 50px;
          right: ${t.spacing(1)};
          z-index:1;
        `});var yF=g(5706),CF={};CF.styleTagTransform=ES(),CF.setAttributes=mS(),CF.insert=pS().bind(null,"head"),CF.domAPI=gS(),CF.insertStyleElement=yS();uS()(yF.A,CF);yF.A&&yF.A.locals&&yF.A.locals;var EF=g(6505),_F=g.n(EF),vF="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function BF(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wF=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var i in n)bF.call(n,i)&&(t[i]=n[i])}return t},bF=Object.prototype.hasOwnProperty;var QF,xF=BF(wF),DF={exports:{}};QF=DF,function(){var t={};QF.exports=t,t.simpleFilter=function(e,n){return n.filter((function(n){return t.test(e,n)}))},t.test=function(e,n){return null!==t.match(e,n)},t.match=function(t,e,n){n=n||{};var i,r=0,o=[],s=e.length,a=0,A=0,l=n.pre||"",c=n.post||"",u=n.caseSensitive&&e||e.toLowerCase();t=n.caseSensitive&&t||t.toLowerCase();for(var h=0;h<s;h++)i=e[h],u[h]===t[r]?(i=l+i+c,r+=1,A+=1+A):A=0,a+=A,o[o.length]=i;return r===t.length?(a=u===t?1/0:a,{rendered:o.join(""),score:a}):null},t.filter=function(e,n,i){return n&&0!==n.length?"string"!=typeof e?n:(i=i||{},n.reduce((function(n,r,o,s){var a=r;i.extract&&(a=i.extract(r));var A=t.match(e,a,i);return null!=A&&(n[n.length]={string:A.rendered,score:A.score,index:o,original:r}),n}),[]).sort((function(t,e){var n=e.score-t.score;return n||t.index-e.index}))):[]}}();var SF=DF.exports,MF=function(t){return this.component=t,this.items=[],this.active=t.options.noInitialSelection?-1:0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,t.el.parentNode.insertBefore(this.wrapper,t.el.nextSibling),this};MF.prototype.show=function(){this.element.style.display="block"},MF.prototype.hide=function(){this.element.style.display="none"},MF.prototype.add=function(t){this.items.push(t)},MF.prototype.clear=function(){this.items=[],this.active=this.component.options.noInitialSelection?-1:0},MF.prototype.isEmpty=function(){return!this.items.length},MF.prototype.isVisible=function(){return"block"===this.element.style.display},MF.prototype.draw=function(){if(this.element.innerHTML="",0!==this.items.length){for(var t=0;t<this.items.length;t++)this.drawItem(this.items[t],this.active===t);this.show()}else this.hide()},MF.prototype.drawItem=function(t,e){var n=document.createElement("li"),i=document.createElement("a");e&&(n.className+=" active"),i.innerHTML=t.string,n.appendChild(i),this.element.appendChild(n),n.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),n.addEventListener("mouseup",function(){this.handleMouseUp.call(this,t)}.bind(this))},MF.prototype.handleMouseUp=function(t){this.selectingListItem=!1,this.component.value(t.original),this.clear(),this.draw()},MF.prototype.move=function(t){this.active=t,this.draw()},MF.prototype.previous=function(){this.move(this.active<=0?this.items.length-1:this.active-1)},MF.prototype.next=function(){this.move(this.active>=this.items.length-1?0:this.active+1)},MF.prototype.drawError=function(t){var e=document.createElement("li");e.innerHTML=t,this.element.appendChild(e),this.show()};var kF=wF,RF=SF,NF=MF,PF=function(t,e,n){return n=n||{},this.options=kF({minLength:2,limit:5,filter:!0,hideOnBlur:!0,noInitialSelection:!0},n),this.el=t,this.data=e||[],this.list=new NF(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(t){this.handleKeyUp(t.keyCode,t)}.bind(this),!1),this.el.addEventListener("keydown",function(t){this.handleKeyDown(t)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(t){this.handlePaste(t)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};PF.prototype.handleKeyUp=function(t,e){40!==t&&38!==t&&27!==t&&9!==t&&(13!==t?this.handleInputChange(this.el.value):this.list.items[this.list.active]&&(this.list.handleMouseUp(this.list.items[this.list.active]),e.stopPropagation()))},PF.prototype.handleKeyDown=function(t){switch(t.keyCode){case 13:this.list.active>=0&&(this.list.selectingListItem=!0);break;case 9:this.list.isEmpty()||(this.list.isVisible()&&t.preventDefault(),this.value(this.list.active>=0?this.list.items[this.list.active].original:null),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next()}},PF.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},PF.prototype.handlePaste=function(t){if(t.clipboardData)this.handleInputChange(t.clipboardData.getData("Text"));else{var e=this;setTimeout((function(){e.handleInputChange(t.target.value)}),100)}},PF.prototype.handleInputChange=function(t){this.query=this.normalize(t),this.list.clear(),this.query.length<this.options.minLength?this.list.draw():this.getCandidates(function(t){for(var e=0;e<t.length&&(this.list.add(t[e]),e!==this.options.limit-1);e++);this.list.draw()}.bind(this))},PF.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},PF.prototype.update=function(t){this.data=t,this.handleKeyUp()},PF.prototype.clear=function(){this.data=[],this.list.clear()},PF.prototype.normalize=function(t){return t=t.toLowerCase()},PF.prototype.match=function(t,e){return t.indexOf(e)>-1},PF.prototype.value=function(t){if(this.selected=t,this.el.value=this.getItemValue(t||{place_name:this.query}),document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!1),this.el.dispatchEvent(e)}else this.el.fireEvent("onchange")},PF.prototype.getCandidates=function(t){var e,n={pre:"<strong>",post:"</strong>",extract:function(t){return this.getItemValue(t)}.bind(this)};e=this.options.filter?(e=RF.filter(this.query,this.data,n)).map(function(t){return{original:t.original,string:this.render(t.original,t.string)}}.bind(this)):this.data.map(function(t){return{original:t,string:this.render(t)}}.bind(this)),t(e)},PF.prototype.getItemValue=function(t){return t},PF.prototype.render=function(t,e){if(e)return e;for(var n=t.original?this.getItemValue(t.original):this.getItemValue(t),i=this.normalize(n),r=i.lastIndexOf(this.query);r>-1;){var o=r+this.query.length;n=n.slice(0,r)+"<strong>"+n.slice(r,o)+"</strong>"+n.slice(o),r=i.slice(0,r).lastIndexOf(this.query)}return n},PF.prototype.renderError=function(t){this.list.drawError(t)};var TF=PF,LF=TF;"undefined"!=typeof window&&(window.Suggestions=TF);var FF=BF(LF),OF={exports:{}};!function(t){!function(e,n,i){t.exports?t.exports=i():e.subtag=i()}(vF,0,(function(){var t="",e=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function n(t){return t.match(e)||[]}function i(e){return{language:(e=n(e))[1]||t,extlang:e[2]||t,script:e[3]||t,region:e[4]||t}}function r(t,e,n){Object.defineProperty(t,e,{value:n,enumerable:!0})}function o(e,o,s){function a(i){return n(i)[e]||t}r(a,"pattern",o),r(i,s,a)}return o(1,/^[a-zA-Z]{2,3}$/,"language"),o(2,/^[a-zA-Z]{3}$/,"extlang"),o(3,/^[a-zA-Z]{4}$/,"script"),o(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),r(i,"split",(function(t){return n(t).filter((function(t,e){return t&&e}))})),i}))}(OF);var GF=BF(OF.exports),UF=NaN,jF="[object Symbol]",YF=/^\s+|\s+$/g,KF=/^[-+]0x[0-9a-f]+$/i,zF=/^0b[01]+$/i,JF=/^0o[0-7]+$/i,qF=parseInt,HF="object"==typeof vF&&vF&&vF.Object===Object&&vF,VF="object"==typeof self&&self&&self.Object===Object&&self,WF=HF||VF||Function("return this")(),ZF=Object.prototype.toString,XF=Math.max,$F=Math.min,tO=function(){return WF.Date.now()};function eO(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function nO(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&ZF.call(t)==jF}(t))return UF;if(eO(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=eO(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(YF,"");var n=zF.test(t);return n||JF.test(t)?qF(t.slice(2),n?2:8):KF.test(t)?UF:+t}var iO,rO=function(t,e,n){var i,r,o,s,a,A,l=0,c=!1,u=!1,h=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function g(e){var n=i,o=r;return i=r=void 0,l=e,s=t.apply(o,n)}function d(t){var n=t-A;return void 0===A||n>=e||n<0||u&&t-l>=o}function p(){var t=tO();if(d(t))return f(t);a=setTimeout(p,function(t){var n=e-(t-A);return u?$F(n,o-(t-l)):n}(t))}function f(t){return a=void 0,h&&i?g(t):(i=r=void 0,s)}function m(){var t=tO(),n=d(t);if(i=arguments,r=this,A=t,n){if(void 0===a)return function(t){return l=t,a=setTimeout(p,e),c?g(t):s}(A);if(u)return a=setTimeout(p,e),g(A)}return void 0===a&&(a=setTimeout(p,e)),s}return e=nO(e)||0,eO(n)&&(c=!!n.leading,o=(u="maxWait"in n)?XF(nO(n.maxWait)||0,e):o,h="trailing"in n?!!n.trailing:h),m.cancel=function(){void 0!==a&&clearTimeout(a),l=0,i=A=r=a=void 0},m.flush=function(){return void 0===a?s:f(tO())},m},oO=BF(rO),sO={exports:{}},aO="object"==typeof Reflect?Reflect:null,AO=aO&&"function"==typeof aO.apply?aO.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};iO=aO&&"function"==typeof aO.ownKeys?aO.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var lO=Number.isNaN||function(t){return t!=t};function cO(){cO.init.call(this)}sO.exports=cO,sO.exports.once=function(t,e){return new Promise((function(n,i){function r(n){t.removeListener(e,o),i(n)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",r),n([].slice.call(arguments))}CO(t,e,o,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&CO(t,"error",e,n)}(t,r,{once:!0})}))},cO.EventEmitter=cO,cO.prototype._events=void 0,cO.prototype._eventsCount=0,cO.prototype._maxListeners=void 0;var uO=10;function hO(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function gO(t){return void 0===t._maxListeners?cO.defaultMaxListeners:t._maxListeners}function dO(t,e,n,i){var r,o,s;if(hO(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]),void 0===s)s=o[e]=n,++t._eventsCount;else if("function"==typeof s?s=o[e]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),(r=gO(t))>0&&s.length>r&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=s.length,function(t){console&&console.warn&&console.warn(t)}(a)}return t}function pO(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function fO(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=pO.bind(i);return r.listener=n,i.wrapFn=r,r}function mO(t,e,n){var i=t._events;if(void 0===i)return[];var r=i[e];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(r):yO(r,r.length)}function IO(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function yO(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function CO(t,e,n,i){if("function"==typeof t.on)i.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function r(o){i.once&&t.removeEventListener(e,r),n(o)}))}}Object.defineProperty(cO,"defaultMaxListeners",{enumerable:!0,get:function(){return uO},set:function(t){if("number"!=typeof t||t<0||lO(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");uO=t}}),cO.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},cO.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||lO(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},cO.prototype.getMaxListeners=function(){return gO(this)},cO.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var a=r[t];if(void 0===a)return!1;if("function"==typeof a)AO(a,this,e);else{var A=a.length,l=yO(a,A);for(n=0;n<A;++n)AO(l[n],this,e)}return!0},cO.prototype.addListener=function(t,e){return dO(this,t,e,!1)},cO.prototype.on=cO.prototype.addListener,cO.prototype.prependListener=function(t,e){return dO(this,t,e,!0)},cO.prototype.once=function(t,e){return hO(e),this.on(t,fO(this,t,e)),this},cO.prototype.prependOnceListener=function(t,e){return hO(e),this.prependListener(t,fO(this,t,e)),this},cO.prototype.removeListener=function(t,e){var n,i,r,o,s;if(hO(e),void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){s=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,r),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,s||e)}return this},cO.prototype.off=cO.prototype.removeListener,cO.prototype.removeAllListeners=function(t){var e,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},cO.prototype.listeners=function(t){return mO(this,t,!0)},cO.prototype.rawListeners=function(t){return mO(this,t,!1)},cO.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):IO.call(t,e)},cO.prototype.listenerCount=IO,cO.prototype.eventNames=function(){return this._eventsCount>0?iO(this._events):[]};var EO=sO.exports;const _O={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}},vO={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"",ja:"",lv:"Meklt",pt:"Procurar",sr:"",zh:"",cs:"Vyhledvn",hu:"Keress",ka:"",nb:"Ske",sk:"Vyhadvanie",th:"",fi:"Hae",is:"Leita",ko:"",pl:"Szukaj",sl:"Iskanje",fa:"",ru:""};class BO{constructor(t,e){this.options={zoom:16,flyTo:!0,trackProximity:!0,showResultsWhileTyping:!1,minLength:2,reverseGeocode:!1,limit:5,enableEventLogging:!0,marker:!0,popup:!1,maplibregl:void 0,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,getItemValue:t=>void 0!==t.text?t.text:t.place_name,render:function(t){if(!t.geometry){const e=t.text,n=e.toLowerCase().indexOf(this.query.toLowerCase()),i=this.query.length;return'<div class="maplibregl-ctrl-geocoder--suggestion"><svg class="maplibregl-ctrl-geocoder--suggestion-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22.8702 20.1258H21.4248L20.9125 19.6318C22.7055 17.546 23.785 14.8382 23.785 11.8925C23.785 5.32419 18.4608 0 11.8925 0C5.32419 0 0 5.32419 0 11.8925C0 18.4608 5.32419 23.785 11.8925 23.785C14.8382 23.785 17.546 22.7055 19.6318 20.9125L20.1258 21.4248V22.8702L29.2739 32L32 29.2739L22.8702 20.1258ZM11.8925 20.1258C7.33676 20.1258 3.65923 16.4483 3.65923 11.8925C3.65923 7.33676 7.33676 3.65923 11.8925 3.65923C16.4483 3.65923 20.1258 7.33676 20.1258 11.8925C20.1258 16.4483 16.4483 20.1258 11.8925 20.1258Z" fill="#687078"/></svg><div class="maplibregl-ctrl-geocoder--suggestion-info"><div class="maplibregl-ctrl-geocoder--suggestion-title">'+e.substring(0,n)+'<span class="maplibregl-ctrl-geocoder--suggestion-match">'+e.substring(n,n+i)+"</span>"+e.substring(n+i)+"</div></div></div>"}const e=t.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--result"><svg class="maplibregl-ctrl-geocoder--result-icon" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36571 0 0 5.38676 0 12.0471C0 21.0824 12 32 12 32C12 32 24 21.0824 24 12.0471C24 5.38676 18.6343 0 12 0ZM12 16.3496C9.63428 16.3496 7.71429 14.4221 7.71429 12.0471C7.71429 9.67207 9.63428 7.74454 12 7.74454C14.3657 7.74454 16.2857 9.67207 16.2857 12.0471C16.2857 14.4221 14.3657 16.3496 12 16.3496Z" fill="#687078"/></svg><div><div class="maplibregl-ctrl-geocoder--result-title">'+e[0]+'</div><div class="maplibregl-ctrl-geocoder--result-address">'+e.splice(1,e.length).join(",")+"</div></div></div>"},popupRender:t=>{const e=t.place_name.split(",");return'<div class="maplibregl-ctrl-geocoder--suggestion popup-suggestion"><div class="maplibregl-ctrl-geocoder--suggestion-title popup-suggestion-title">'+e[0]+'</div><div class="maplibregl-ctrl-geocoder--suggestion-address popup-suggestion-address">'+e.splice(1,e.length).join(",")+"</div></div>"},showResultMarkers:!0,debounceSearch:200},this._eventEmitter=new EO.EventEmitter,this.options=xF({},this.options,e),this.fresh=!0,this.lastSelected=null,this.geocoderApi=t}addTo(t){function e(t,e){if(!document.body.contains(e))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const n=t.onAdd();e.appendChild(n)}if(t instanceof HTMLElement)e(this,t);else if("string"==typeof t){const n=document.querySelectorAll(t);if(0===n.length)throw new Error("Element "+t+"not found.");if(n.length>1)throw new Error("Geocoder can only be added to a single html element");e(this,n[0])}else{if(!("addControl"in t))throw new Error("Error: addTo must be a maplibre-gl-js map, an html element, or a CSS selector query for a single html element");t.addControl(this)}}onAdd(t){if(t&&"string"!=typeof t&&(this._map=t),this.setLanguage(),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);const e=this.container=document.createElement("div");e.className="maplibregl-ctrl-geocoder maplibregl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl";const n=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="maplibregl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",oO(this._onKeyDown,this.options.debounceSearch)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton);const i=document.createElement("div");i.classList.add("maplibregl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("type","button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="maplibregl-ctrl-geocoder--button";const r=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(r),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),i.appendChild(this._clearEl),i.appendChild(this._loadingEl),e.appendChild(n),e.appendChild(this._inputEl),e.appendChild(i),this._typeahead=new FF(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit,noInitialSelection:!0}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this.resultMarkers=[],this._handleMarker=this._handleMarker.bind(this),this._handleResultMarkers=this._handleResultMarkers.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._maplibregl=this.options.maplibregl,!this._maplibregl&&this.options.marker&&(console.error("No maplibregl detected in options. Map markers are disabled. Please set options.maplibregl."),this.options.marker=!1)),e}createIcon(t,e){const n=document.createElementNS("http://www.w3.org/2000/svg","svg");if(n.setAttribute("class","maplibregl-ctrl-geocoder--icon maplibregl-ctrl-geocoder--icon-"+t),n.setAttribute("viewBox","0 0 18 18"),n.setAttribute("xml:space","preserve"),n.setAttribute("width","18"),n.setAttribute("height","18"),"innerHTML"in n)n.innerHTML=e;else{const t=document.createElement("div");t.innerHTML="<svg>"+e.valueOf().toString()+"</svg>";const i=t.firstChild.firstChild;n.appendChild(i)}return n}onRemove(){return this.container.remove(),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this}_onPaste(t){const e=(t.clipboardData||window.clipboardData).getData("text");e.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(e)}_onKeyDown(t){const e=27,n=9;if(t.keyCode===e&&this.options.clearAndBlurOnEsc)return this._clear(t),this._inputEl.blur();const i=t.target&&t.target.shadowRoot?t.target.shadowRoot.activeElement:t.target;if(!(i?i.value:""))return this.fresh=!0,t.keyCode!==n&&this.clear(t),this._clearEl.style.display="none";if(!t.metaKey&&-1===[n,e,37,39,38,40].indexOf(t.keyCode)){if(13===t.keyCode){if(this.options.showResultsWhileTyping)return void(null==this._typeahead.selected&&this.geocoderApi.getSuggestions?this._geocode(i.value,!0):null==this._typeahead.selected&&this.options.showResultMarkers&&this._fitBoundsForMarkers());this._typeahead.selected||this._geocode(i.value)}i.value.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(i.value)}}_showButton(){this._inputEl.value.length>0&&(this._clearEl.style.display="block")}_hideButton(){this._typeahead.selected&&(this._clearEl.style.display="none")}_onBlur(t){this.options.clearOnBlur&&this._clearOnBlur(t),this.options.collapsed&&this._collapse()}_onChange(){const t=this._typeahead.selected;if(t&&!t.geometry)t.placeId?this._geocode(t.placeId,!0,!0):this._geocode(t.text,!0);else if(t&&JSON.stringify(t)!==this.lastSelected){if(this._clearEl.style.display="none",this.options.flyTo){let e;if(this._removeResultMarkers(),t.properties&&_O[t.properties.short_code])e=xF({},this.options.flyTo),this._map&&this._map.fitBounds(_O[t.properties.short_code].bbox,e);else if(t.bbox){const n=t.bbox;e=xF({},this.options.flyTo),this._map&&this._map.fitBounds([[n[0],n[1]],[n[2],n[3]]],e)}else{const n={zoom:this.options.zoom};e=xF({},n,this.options.flyTo),t.center?e.center=t.center:t.geometry&&t.geometry.type&&"Point"===t.geometry.type&&t.geometry.coordinates&&(e.center=t.geometry.coordinates),this._map&&this._map.flyTo(e)}}this.options.marker&&this._maplibregl&&this._handleMarker(t),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(t),this._typeahead.selected=null,this._eventEmitter.emit("result",{result:t})}}_getConfigForRequest(){return["bbox","limit","proximity","countries","types","language","reverseMode"].reduce(((t,e)=>(this.options[e]&&(["countries","types","language"].indexOf(e)>-1?t[e]=this.options[e].split(/[\s,]+/):t[e]=this.options[e],"proximity"===e&&this.options[e]&&"number"==typeof this.options[e].longitude&&"number"==typeof this.options[e].latitude&&(t[e]=[this.options[e].longitude,this.options[e].latitude])),t)),{})}_geocode(t,e=!1,n=!1){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:t});let i,r=null,o=this._getConfigForRequest();if(this.options.localGeocoderOnly)i=Promise.resolve();else if(this.options.reverseGeocode&&/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/.test(t)){const e=t.split(/[\s(,)?]+/).map((t=>parseFloat(t))).reverse();o=xF(o,{query:e,limit:1}),"proximity"in o&&delete o.proximity,i=this.geocoderApi.reverseGeocode(o)}else o=xF(o,{query:t}),i=this.geocoderApi.getSuggestions?e?this.geocoderApi.searchByPlaceId&&n?this.geocoderApi.searchByPlaceId(o):this.geocoderApi.forwardGeocode(o):this.geocoderApi.getSuggestions(o):this.geocoderApi.forwardGeocode(o);let s=[];this.options.localGeocoder&&(s=this.options.localGeocoder(t),s||(s=[]));let a=Promise.resolve([]);return i.catch((t=>{r=t})).then((e=>{this._loadingEl.style.display="none";let n={};return n=e||{type:"FeatureCollection",features:[]},n.config=o,this.fresh&&(this.fresh=!1),n.features=n.features?s.concat(n.features):s,this.options.externalGeocoder?(a=this.options.externalGeocoder(t,n.features,o)||Promise.resolve([]),a.then((function(t){return n.features=n.features?t.concat(n.features):t,n}),(function(){return n}))):n})).then((t=>{if(r)throw r;this.options.filter&&t.features.length&&(t.features=t.features.filter(this.options.filter));let n=[];n=t.suggestions?t.suggestions:t.place?[t.place]:t.features,n.length?(this._clearEl.style.display="block",this._typeahead.update(n),(!this.options.showResultsWhileTyping||e)&&this.options.showResultMarkers&&(t.features.length>0||t.place)&&this._fitBoundsForMarkers(),this._eventEmitter.emit("results",t)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",t))})).catch((t=>{this._loadingEl.style.display="none",s.length&&this.options.localGeocoder||a.length&&this.options.externalGeocoder?(this._clearEl.style.display="block",this._typeahead.update(s)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:s}),this._eventEmitter.emit("error",{error:t})})),i}_clear(t){t&&t.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this._removeResultMarkers(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0}clear(t){this._clear(t),this._inputEl.focus()}_clearOnBlur(t){t.relatedTarget&&this._clear(t)}_onQueryResult(t){const e=t;if(!e.features.length)return;const n=e.features[0];this._typeahead.selected=n,this._inputEl.value=n.place_name,this._onChange()}_updateProximity(){if(this._map)if(this._map.getZoom()>9){const t=this._map.getCenter().wrap();this.setProximity({longitude:t.lng,latitude:t.lat})}else this.setProximity(null)}_collapse(){this._inputEl.value||this._inputEl===document.activeElement||this.container.classList.add("maplibregl-ctrl-geocoder--collapsed")}_unCollapse(){this.container.classList.remove("maplibregl-ctrl-geocoder--collapsed")}query(t){return this._geocode(t).then(this._onQueryResult),this}_renderError(){this._renderMessage("<div class='maplibre-gl-geocoder--error'>There was an error reaching the server</div>")}_renderNoResults(){this._renderMessage("<div class='maplibre-gl-geocoder--error maplibre-gl-geocoder--no-results'>No results found</div>")}_renderMessage(t){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(t)}_getPlaceholderText(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){const t=this.options.language.split(",")[0],e=GF.language(t),n=vO[e];if(n)return n}return"Search"}_fitBoundsForMarkers(){if(this._typeahead.data.length<1)return;const t=this._typeahead.data.filter((function(t){return"string"!=typeof t})).slice(0,this.options.limit);if(this._clearEl.style.display="none",this.options.flyTo&&this._maplibregl&&this._map){const e=xF({},{padding:100},this.options.flyTo),n=new this._maplibregl.LngLatBounds;t.forEach((function(t){n.extend(t.geometry.coordinates)})),this._map.fitBounds(n,e)}return t.length>0&&this._maplibregl&&this._handleResultMarkers(t),this}setInput(t){return this._inputEl.value=t,this._typeahead.selected=null,this._typeahead.clear(),t.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(t),this}setProximity(t){return this.options.proximity=t,this}getProximity(){return this.options.proximity}setRenderFunction(t){return t&&"function"==typeof t&&(this._typeahead.render=t),this}getRenderFunction(){return this._typeahead.render}setLanguage(t){return this.options.language=t||this.options.language||navigator.language,this}getLanguage(){return this.options.language}getZoom(){return this.options.zoom}setZoom(t){return this.options.zoom=t,this}getFlyTo(){return this.options.flyTo}setFlyTo(t){return this.options.flyTo=t,this}getPlaceholder(){return this.options.placeholder}setPlaceholder(t){return this.placeholder=t||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this}getBbox(){return this.options.bbox}setBbox(t){return this.options.bbox=t,this}getCountries(){return this.options.countries}setCountries(t){return this.options.countries=t,this}getTypes(){return this.options.types}setTypes(t){return this.options.types=t,this}getMinLength(){return this.options.minLength}setMinLength(t){return this.options.minLength=t,this._typeahead&&(this._typeahead.options.minLength=t),this}getLimit(){return this.options.limit}setLimit(t){return this.options.limit=t,this._typeahead&&(this._typeahead.options.limit=t),this}getFilter(){return this.options.filter}setFilter(t){return this.options.filter=t,this}setGeocoderApi(t){return this.geocoderApi=t,this}getGeocoderApi(){return this.geocoderApi}_handleMarker(t){if(!this._map)return;this._removeMarker();const e=xF({},{color:"#4668F2"},this.options.marker);let n;if(this.mapMarker=new this._maplibregl.Marker(e),this.options.popup){const e=xF({},{},this.options.popup);n=new this._maplibregl.Popup(e).setHTML(this.options.popupRender(t))}return t.center?(this.mapMarker.setLngLat(t.center).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(n)):t.geometry&&t.geometry.type&&"Point"===t.geometry.type&&t.geometry.coordinates&&(this.mapMarker.setLngLat(t.geometry.coordinates).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(n)),this}_removeMarker(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)}_handleResultMarkers(t){if(!this._map)return;this._removeResultMarkers();let e=xF({},{color:"#4668F2"},this.options.showResultMarkers);for(const n of t){let t;if(this.options.showResultMarkers){this.options.showResultMarkers&&this.options.showResultMarkers.element&&(t=this.options.showResultMarkers.element.cloneNode(!0),e=xF(e,{element:t}));const i=new this._maplibregl.Marker(xF({},e,{element:t}));let r;if(this.options.popup){const t=xF({},{},this.options.popup);r=new this._maplibregl.Popup(t).setHTML(this.options.popupRender(n))}n.center?(i.setLngLat(n.center).addTo(this._map),this.options.popup&&i.setPopup(r)):n.geometry&&n.geometry.type&&"Point"===n.geometry.type&&n.geometry.coordinates&&(i.setLngLat(n.geometry.coordinates).addTo(this._map),this.options.popup&&i.setPopup(r)),this.resultMarkers.push(i)}}return this}_removeResultMarkers(){this.resultMarkers&&this.resultMarkers.length>0&&(this.resultMarkers.forEach((function(t){t.remove()})),this.resultMarkers=[])}on(t,e){return this._eventEmitter.on(t,e),this}off(t,e){return this._eventEmitter.removeListener(t,e),this}}function wO(t,e,n,i,r,o,s){try{var a=t[o](s),A=a.value}catch(t){return void n(t)}a.done?e(A):Promise.resolve(A).then(i,r)}function bO(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function s(t){wO(o,i,r,s,a,"next",t)}function a(t){wO(o,i,r,s,a,"throw",t)}s(void 0)}))}}function QO(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const xO=o().memo((({setViewState:t,setSelCoord:e,geocoderRef:n,yMapsApiKey:i})=>{const o=i,s={forwardGeocode:function(){var t=bO((function*(t){var e,n,i,r,s;console.log("config1",t);const a=t.query,A=yield fetch(`https://geocode-maps.yandex.ru/1.x/?apikey=${o}&geocode=${a}&lang=en_UK&format=json`).catch((t=>{console.log("my err",t)})),l=yield null==A?void 0:A.json();console.log("ya geoobjects",null==l||null===(n=l.response)||void 0===n||null===(e=n.GeoObjectCollection)||void 0===e?void 0:e.featureMember[0]);const c={type:"FeatureCollection",features:null==l||null===(s=l.response)||void 0===s||null===(r=s.GeoObjectCollection)||void 0===r||null===(i=r.featureMember)||void 0===i?void 0:i.map(((t,e)=>{var n,i;return{type:"Feature",geometry:{type:"Point",coordinates:null===(n=t.GeoObject.Point.pos.split(" "))||void 0===n?void 0:n.map(Number)},place_name:t.GeoObject.name,place_type:["place"],relevance:1,text:t.GeoObject.name,id:t.GeoObject.name+(Math.random()+1),properties:{},center:null===(i=t.GeoObject.Point.pos.split(" "))||void 0===i?void 0:i.map(Number)}}))};return console.log("carmen features",c.features),c}));return function(e){return t.apply(this,arguments)}}(),reverseGeocode:function(){var t=bO((function*(t){}));return function(e){return t.apply(this,arguments)}}(),getSuggestions:function(){var t=bO((function*(t){var e,n,i;const r=t.query,s=yield fetch(`https://geocode-maps.yandex.ru/1.x/?apikey=${o}&geocode=${r}&lang=en_US&format=json`).catch((t=>{console.log("my err",t)})),a=yield null==s?void 0:s.json(),A={type:"FeatureCollection",features:null==a||null===(i=a.response)||void 0===i||null===(n=i.GeoObjectCollection)||void 0===n||null===(e=n.featureMember)||void 0===e?void 0:e.map(((t,e)=>{var n,i;return{type:"Feature",id:t.GeoObject.name+(Math.random()+1),geometry:{type:"Point",coordinates:null===(n=t.GeoObject.Point.pos.split(" "))||void 0===n?void 0:n.map(Number)},text:t.GeoObject.name+" "+t.GeoObject.description,place_name:t.GeoObject.name+" "+t.GeoObject.description,place_type:["place"],relevance:1,properties:{},center:null===(i=t.GeoObject.Point.pos.split(" "))||void 0===i?void 0:i.map(Number)}}))};return console.log("carmen features",A.features),A}));return function(e){return t.apply(this,arguments)}}(),getSuggestions1:function(){var t=bO((function*(t){const e=yield fetch("https://api.maptiler.com/geocoding/"+encodeURIComponent(t.query)+".json?key=gZx3gkwqa9aBXw49KK8x"),n=(yield e.json()).features;return console.log("sugg features",n),{suggestions:n}}));return function(e){return t.apply(this,arguments)}}(),searchByPlaceId:function(){var t=bO((function*(t){}));return function(e){return t.apply(this,arguments)}}()},a=(0,r.useMemo)((()=>new BO(s,{maplibregl:_F(),showResultsWhileTyping:!0,collapsed:!0})),[]);return(0,r.useEffect)((()=>{var e;const n=document.getElementById("geocoder-container");n&&0===(null===(e=n.childNodes)||void 0===e?void 0:e.length)&&a.addTo("#geocoder-container"),a.on("result",(e=>{const{result:n}=e;if(!n.geometry)return;const i=n.geometry.coordinates.map((t=>parseFloat(t.toFixed(6)))),[r,o]=i,s={longitude:r,latitude:o,transitionDuration:250,zoom:18};(0,nE.flushSync)((()=>{t(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){QO(t,e,n[e])}))}return t}({},s))}))}))}),[a,t,e]),null}));function DO(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Ke(i.key),i)}}function SO(t,e,n){return e&&DO(t.prototype,e),n&&DO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function MO(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){if(t.constructor!==e.constructor)return!1;var n,i;if(Array.isArray(t)){if((n=t.length)!==e.length)return!1;for(i=n;0!=i--;)if(!MO(t[i],e[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();var r=Object.keys(t);if((n=r.length)!==Object.keys(e).length)return!1;for(i=n;0!=i--;)if(!Object.prototype.hasOwnProperty.call(e,r[i]))return!1;for(i=n;0!=i--;){var o=r[i];if(!MO(t[o],e[o]))return!1}return!0}return t!=t&&e!=e}function kO(t){return Object.assign({},t)}function RO(t,e=!1){if(!t)return t;if(!e&&Array.isArray(t))return t.sort(((t,e)=>"string"==typeof t&&"string"==typeof e?t.localeCompare(e):"object"==typeof t?1:-1)).map((t=>RO(t,e)));if("object"==typeof t&&!Array.isArray(t)){var n={};return Object.keys(t).sort(((t,e)=>t.localeCompare(e))).forEach((i=>{n[i]=RO(t[i],e)})),n}return t}var NO=function t(e){if(!e)return e;if(null===e||"object"!=typeof e)return e;if(Array.isArray(e)){for(var n=new Array(e.length),i=n.length;i--;)n[i]=t(e[i]);return n}var r={};for(var o in e)r[o]=t(e[o]);return r};function PO(t,e,n){return Object.defineProperty(t,e,{get:function(){return n}}),n}function TO(t){return t[t.length-1]}function LO(t){return Array.isArray(t)?t.slice(0):[t]}function FO(t){return Array.isArray(t)}function OO(t){return null!=t}function GO(t,e){var n=0,i=-1;for(var r of t){if(!e(r,i+=1))break;n+=1}return n}function UO(t,e){var n=e.length;if(0!==n){var i=t.length;t.length=i+e.length;for(var r=0;r<n;++r)t[i+r]=e[r]}}function jO(t){return jO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jO(t)}function YO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(YO=function(){return!!t})()}function KO(t){var e="function"==typeof Map?new Map:void 0;return KO=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(YO())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var r=new(t.bind.apply(t,i));return n&&tQ(r,n.prototype),r}(t,arguments,jO(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),tQ(n,t)},KO(t)}var zO={isDevMode:()=>!1,deepFreezeWhenDevMode:t=>t,tunnelErrorMessage:t=>"RxDB Error-Code "+t+".\n        Error messages are not included in RxDB core to reduce build size.\n        "};function JO(t,e,n){return"RxError ("+e+"):\n"+t+"\n"+function(t){var e="";return 0===Object.keys(t).length?e:(e+="Given parameters: {\n",e+=Object.keys(t).map((e=>{var n="[object Object]";try{n="errors"===e?t[e].map((t=>JSON.stringify(t,Object.getOwnPropertyNames(t)))):JSON.stringify(t[e],(function(t,e){return void 0===e?null:e}),2)}catch(t){}return e+":"+n})).join("\n"),e+="}")}(n)}var qO=function(t){function e(e,n,i={}){var r,o=JO(n,e,i);return(r=t.call(this,o)||this).code=e,r.message=o,r.url=VO(e),r.parameters=i,r.rxdb=!0,r}return eQ(e,t),e.prototype.toString=function(){return this.message},SO(e,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}])}(KO(Error)),HO=function(t){function e(e,n,i={}){var r,o=JO(n,e,i);return(r=t.call(this,o)||this).code=e,r.message=o,r.url=VO(e),r.parameters=i,r.rxdb=!0,r}return eQ(e,t),e.prototype.toString=function(){return this.message},SO(e,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}])}(KO(TypeError));function VO(t){return"https://rxdb.info/errors.html?console=errors#"+t}function WO(t){return"\n You can find out more about this error here: "+VO(t)+" "}function ZO(t,e){return new qO(t,zO.tunnelErrorMessage(t)+WO(t),e)}function XO(t,e){return new HO(t,zO.tunnelErrorMessage(t)+WO(t),e)}function $O(t){return!(!t||409!==t.status)&&t}var tG={409:"document write conflict",422:"schema validation error",510:"attachment data missing"};var eG={preAddRxPlugin:[],preCreateRxDatabase:[],createRxDatabase:[],preCreateRxCollection:[],createRxCollection:[],createRxState:[],postDestroyRxCollection:[],postRemoveRxCollection:[],preCreateRxSchema:[],createRxSchema:[],preCreateRxQuery:[],prePrepareQuery:[],createRxDocument:[],postCreateRxDocument:[],preCreateRxStorageInstance:[],preStorageWrite:[],preMigrateDocument:[],postMigrateDocument:[],preDestroyRxDatabase:[],postRemoveRxDatabase:[],postCleanup:[],preReplicationMasterWrite:[],preReplicationMasterWriteDocumentsHandle:[]};function nG(t,e){eG[t].length>0&&eG[t].forEach((t=>t(e)))}function iG(t,e){return Promise.all(eG[t].map((t=>t(e))))}var rG=/\./g,oG="abcdefghijklmnopqrstuvwxyz";function sG(t=10){for(var e="",n=0;n<t;n++)e+=oG.charAt(Math.floor(Math.random()*oG.length));return e}function aG(t){return(t+="").charAt(0).toUpperCase()+t.substr(1)}function AG(t){for(;"."===t.charAt(0);)t=t.substr(1);for(;"."===t.slice(-1);)t=t.slice(0,-1);return t}var lG=t=>{var e=typeof t;return null!==t&&("object"===e||"function"===e)},cG=new Set(["__proto__","prototype","constructor"]),uG=new Set("0123456789");function hG(t){var e=[],n="",i="start",r=!1;for(var o of t)switch(o){case"\\":if("index"===i)throw new Error("Invalid character in an index");if("indexEnd"===i)throw new Error("Invalid character after an index");r&&(n+=o),i="property",r=!r;break;case".":if("index"===i)throw new Error("Invalid character in an index");if("indexEnd"===i){i="property";break}if(r){r=!1,n+=o;break}if(cG.has(n))return[];e.push(n),n="",i="property";break;case"[":if("index"===i)throw new Error("Invalid character in an index");if("indexEnd"===i){i="index";break}if(r){r=!1,n+=o;break}if("property"===i){if(cG.has(n))return[];e.push(n),n=""}i="index";break;case"]":if("index"===i){e.push(Number.parseInt(n,10)),n="",i="indexEnd";break}if("indexEnd"===i)throw new Error("Invalid character after an index");default:if("index"===i&&!uG.has(o))throw new Error("Invalid character in an index");if("indexEnd"===i)throw new Error("Invalid character after an index");"start"===i&&(i="property"),r&&(r=!1,n+="\\"),n+=o}switch(r&&(n+="\\"),i){case"property":if(cG.has(n))return[];e.push(n);break;case"index":throw new Error("Index was not closed");case"start":e.push("")}return e}function gG(t,e){if("number"!=typeof e&&Array.isArray(t)){var n=Number.parseInt(e,10);return Number.isInteger(n)&&t[n]===t[e]}return!1}function dG(t,e){if(gG(t,e))throw new Error("Cannot use string index")}function pG(t,e,n){if(Array.isArray(e)&&(e=e.join(".")),!e.includes(".")&&!e.includes("["))return t[e];if(!lG(t)||"string"!=typeof e)return void 0===n?t:n;var i=hG(e);if(0===i.length)return n;for(var r=0;r<i.length;r++){var o=i[r];if(null==(t=gG(t,o)?r===i.length-1?void 0:null:t[o])){if(r!==i.length-1)return n;break}}return void 0===t?n:t}function fG(t,e,n){if(Array.isArray(e)&&(e=e.join(".")),!lG(t)||"string"!=typeof e)return t;for(var i=t,r=hG(e),o=0;o<r.length;o++){var s=r[o];dG(t,s),o===r.length-1?t[s]=n:lG(t[s])||(t[s]="number"==typeof r[o+1]?[]:{}),t=t[s]}return i}function mG(t,e){if(!t)throw e||(e=""),new Error("ensureNotFalsy() is falsy: "+e);return t}var IG={bufferSize:1,refCount:!0};var yG=1;function CG(){return{lwt:yG}}function EG(t,e){var n=e;return pG(t,n=AG(n="properties."+(n=n.replace(rG,".properties."))))}function _G(t){return"string"==typeof t?t:t.key}function vG(t,e){if("string"==typeof t.primaryKey)return e[t.primaryKey];var n=t.primaryKey;return n.fields.map((t=>{var n=pG(e,t);if(void 0===n)throw ZO("DOC18",{args:{field:t,documentData:e}});return n})).join(n.separator)}function BG(t){var e=_G((t=kO(t)).primaryKey);t.properties=kO(t.properties),t.additionalProperties=!1,Object.prototype.hasOwnProperty.call(t,"keyCompression")||(t.keyCompression=!1),t.indexes=t.indexes?t.indexes.slice(0):[],t.required=t.required?t.required.slice(0):[],t.encrypted=t.encrypted?t.encrypted.slice(0):[],t.properties._rev={type:"string",minLength:1},t.properties._attachments={type:"object"},t.properties._deleted={type:"boolean"},t.properties._meta=wG,t.required=t.required?t.required.slice(0):[],t.required.push("_deleted"),t.required.push("_rev"),t.required.push("_meta"),t.required.push("_attachments");var n=bG(t);UO(t.required,n),t.required=t.required.filter((t=>!t.includes("."))).filter(((t,e,n)=>n.indexOf(t)===e)),t.version=t.version||0;var i=t.indexes.map((t=>{var n=FO(t)?t.slice(0):[t];return n.includes(e)||n.push(e),"_deleted"!==n[0]&&n.unshift("_deleted"),n}));0===i.length&&i.push(function(t){return["_deleted",t]}(e)),i.push(["_meta.lwt",e]),t.internalIndexes&&t.internalIndexes.map((t=>{i.push(t)}));var r=new Set;return i.filter((t=>{var e=t.join(",");return!r.has(e)&&(r.add(e),!0)})),t.indexes=i,t}var wG={type:"object",properties:{lwt:{type:"number",minimum:yG,maximum:1e15,multipleOf:.01}},additionalProperties:!0,required:["lwt"]};function bG(t){var e=Object.keys(t.properties).filter((e=>t.properties[e].final)),n=_G(t.primaryKey);return e.push(n),"string"!=typeof t.primaryKey&&t.primaryKey.fields.forEach((t=>e.push(t))),e}var QG=function(){function t(t,e){this.jsonSchema=t,this.hashFunction=e,this.indexes=function(t){return(t.indexes||[]).map((t=>FO(t)?t:[t]))}(this.jsonSchema),this.primaryPath=_G(this.jsonSchema.primaryKey),this.finalFields=bG(this.jsonSchema)}var e=t.prototype;return e.validateChange=function(t,e){this.finalFields.forEach((n=>{if(!MO(t[n],e[n]))throw ZO("DOC9",{dataBefore:t,dataAfter:e,fieldName:n,schema:this.jsonSchema})}))},e.getDocumentPrototype=function(){var t={},e=EG(this.jsonSchema,"");return Object.keys(e).forEach((e=>{var n=e;t.__defineGetter__(e,(function(){if(this.get&&"function"==typeof this.get)return this.get(n)})),Object.defineProperty(t,e+"$",{get:function(){return this.get$(n)},enumerable:!1,configurable:!1}),Object.defineProperty(t,e+"$$",{get:function(){return this.get$$(n)},enumerable:!1,configurable:!1}),Object.defineProperty(t,e+"_",{get:function(){return this.populate(n)},enumerable:!1,configurable:!1})})),PO(this,"getDocumentPrototype",(()=>t)),t},e.getPrimaryOfDocumentData=function(t){return vG(this.jsonSchema,t)},SO(t,[{key:"version",get:function(){return this.jsonSchema.version}},{key:"defaultValues",get:function(){var t={};return Object.entries(this.jsonSchema.properties).filter((([,t])=>Object.prototype.hasOwnProperty.call(t,"default"))).forEach((([e,n])=>t[e]=n.default)),PO(this,"defaultValues",t)}},{key:"hash",get:function(){return PO(this,"hash",this.hashFunction(JSON.stringify(this.jsonSchema)))}}])}();function xG(t,e,n=!0){n&&nG("preCreateRxSchema",t);var i=BG(t);i=function(t){return RO(t,!0)}(i),zO.deepFreezeWhenDevMode(i);var r=new QG(i,e);return nG("createRxSchema",r),r}function DG(t){return"function"==typeof t}function SG(t){return function(e){if(function(t){return DG(null==t?void 0:t.lift)}(e))return e.lift((function(e){try{return t(e,this)}catch(t){this.error(t)}}));throw new TypeError("Unable to lift unknown Observable type")}}var MG=function(t,e){return MG=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},MG(t,e)};function kG(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}MG(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function RG(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{A(i.next(t))}catch(t){o(t)}}function a(t){try{A(i.throw(t))}catch(t){o(t)}}function A(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}A((i=i.apply(t,e||[])).next())}))}function NG(t,e){var n,i,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(A){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,A])}}}Object.create;function PG(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function TG(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function LG(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function FG(t){return this instanceof FG?(this.v=t,this):new FG(t)}function OG(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),o=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",(function(t){return function(e){return Promise.resolve(e).then(t,l)}})),i[Symbol.asyncIterator]=function(){return this},i;function s(t,e){r[t]&&(i[t]=function(e){return new Promise((function(n,i){o.push([t,e,n,i])>1||a(t,e)}))},e&&(i[t]=e(i[t])))}function a(t,e){try{!function(t){t.value instanceof FG?Promise.resolve(t.value.v).then(A,l):c(o[0][2],t)}(r[t](e))}catch(t){c(o[0][3],t)}}function A(t){a("next",t)}function l(t){a("throw",t)}function c(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function GG(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=PG(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(n){e[n]=t[n]&&function(e){return new Promise((function(i,r){(function(t,e,n,i){Promise.resolve(i).then((function(e){t({value:e,done:n})}),e)})(i,r,(e=t[n](e)).done,e.value)}))}}}Object.create;"function"==typeof SuppressedError&&SuppressedError;function UG(t){var e=t((function(t){Error.call(t),t.stack=(new Error).stack}));return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var jG=UG((function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}}));function YG(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var KG=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}var e;return t.prototype.unsubscribe=function(){var t,e,n,i,r;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var s=PG(o),a=s.next();!a.done;a=s.next()){a.value.remove(this)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}else o.remove(this);var A=this.initialTeardown;if(DG(A))try{A()}catch(t){r=t instanceof jG?t.errors:[t]}var l=this._finalizers;if(l){this._finalizers=null;try{for(var c=PG(l),u=c.next();!u.done;u=c.next()){var h=u.value;try{qG(h)}catch(t){r=null!=r?r:[],t instanceof jG?r=LG(LG([],TG(r)),TG(t.errors)):r.push(t)}}}catch(t){n={error:t}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}}if(r)throw new jG(r)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)qG(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}},t.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},t.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},t.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&YG(e,t)},t.prototype.remove=function(e){var n=this._finalizers;n&&YG(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}(),zG=KG.EMPTY;function JG(t){return t instanceof KG||t&&"closed"in t&&DG(t.remove)&&DG(t.add)&&DG(t.unsubscribe)}function qG(t){DG(t)?t():t.unsubscribe()}var HG={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},VG={setTimeout:function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r=VG.delegate;return(null==r?void 0:r.setTimeout)?r.setTimeout.apply(r,LG([t,e],TG(n))):setTimeout.apply(void 0,LG([t,e],TG(n)))},clearTimeout:function(t){var e=VG.delegate;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function WG(t){VG.setTimeout((function(){var e=HG.onUnhandledError;if(!e)throw t;e(t)}))}function ZG(){}var XG=$G("C",void 0,void 0);function $G(t,e,n){return{kind:t,value:e,error:n}}var tU=null;function eU(t){if(HG.useDeprecatedSynchronousErrorHandling){var e=!tU;if(e&&(tU={errorThrown:!1,error:null}),t(),e){var n=tU,i=n.errorThrown,r=n.error;if(tU=null,i)throw r}}else t()}var nU=function(t){function e(e){var n=t.call(this)||this;return n.isStopped=!1,e?(n.destination=e,JG(e)&&e.add(n)):n.destination=lU,n}return kG(e,t),e.create=function(t,e,n){return new sU(t,e,n)},e.prototype.next=function(t){this.isStopped?AU(function(t){return $G("N",t,void 0)}(t),this):this._next(t)},e.prototype.error=function(t){this.isStopped?AU($G("E",void 0,t),this):(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped?AU(XG,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(KG),iU=Function.prototype.bind;function rU(t,e){return iU.call(t,e)}var oU=function(){function t(t){this.partialObserver=t}return t.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(t){aU(t)}},t.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(t){aU(t)}else aU(t)},t.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(t){aU(t)}},t}(),sU=function(t){function e(e,n,i){var r,o,s=t.call(this)||this;DG(e)||!e?r={next:null!=e?e:void 0,error:null!=n?n:void 0,complete:null!=i?i:void 0}:s&&HG.useDeprecatedNextContext?((o=Object.create(e)).unsubscribe=function(){return s.unsubscribe()},r={next:e.next&&rU(e.next,o),error:e.error&&rU(e.error,o),complete:e.complete&&rU(e.complete,o)}):r=e;return s.destination=new oU(r),s}return kG(e,t),e}(nU);function aU(t){var e;HG.useDeprecatedSynchronousErrorHandling?(e=t,HG.useDeprecatedSynchronousErrorHandling&&tU&&(tU.errorThrown=!0,tU.error=e)):WG(t)}function AU(t,e){var n=HG.onStoppedNotification;n&&VG.setTimeout((function(){return n(t,e)}))}var lU={closed:!0,next:ZG,error:function(t){throw t},complete:ZG};function cU(t,e,n,i,r){return new uU(t,e,n,i,r)}var uU=function(t){function e(e,n,i,r,o,s){var a=t.call(this,e)||this;return a.onFinalize=o,a.shouldUnsubscribe=s,a._next=n?function(t){try{n(t)}catch(t){e.error(t)}}:t.prototype._next,a._error=r?function(t){try{r(t)}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._error,a._complete=i?function(){try{i()}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._complete,a}return kG(e,t),e.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;t.prototype.unsubscribe.call(this),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}},e}(nU);function hU(t,e){return SG((function(n,i){var r=0;n.subscribe(cU(i,(function(n){i.next(t.call(e,n,r++))})))}))}function gU(t,e){return SG((function(n,i){var r=0;n.subscribe(cU(i,(function(n){return t.call(e,n,r++)&&i.next(n)})))}))}var dU=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function pU(t){return DG(null==t?void 0:t.then)}var fU="function"==typeof Symbol&&Symbol.observable||"@@observable";function mU(t){return t}function IU(t){return 0===t.length?mU:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var yU=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var i,r=this,o=(i=t)&&i instanceof nU||function(t){return t&&DG(t.next)&&DG(t.error)&&DG(t.complete)}(i)&&JG(i)?t:new sU(t,e,n);return eU((function(){var t=r,e=t.operator,n=t.source;o.add(e?e.call(o,n):n?r._subscribe(o):r._trySubscribe(o))})),o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=CU(e))((function(e,i){var r=new sU({next:function(e){try{t(e)}catch(t){i(t),r.unsubscribe()}},error:i,complete:e});n.subscribe(r)}))},t.prototype._subscribe=function(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)},t.prototype[fU]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return IU(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=CU(t))((function(t,n){var i;e.subscribe((function(t){return i=t}),(function(t){return n(t)}),(function(){return t(i)}))}))},t.create=function(e){return new t(e)},t}();function CU(t){var e;return null!==(e=null!=t?t:HG.Promise)&&void 0!==e?e:Promise}function EU(t){return DG(t[fU])}function _U(t){return Symbol.asyncIterator&&DG(null==t?void 0:t[Symbol.asyncIterator])}function vU(t){return new TypeError("You provided "+(null!==t&&"object"==typeof t?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var BU="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function wU(t){return DG(null==t?void 0:t[BU])}function bU(t){return OG(this,arguments,(function(){var e,n,i;return NG(this,(function(r){switch(r.label){case 0:e=t.getReader(),r.label=1;case 1:r.trys.push([1,,9,10]),r.label=2;case 2:return[4,FG(e.read())];case 3:return n=r.sent(),i=n.value,n.done?[4,FG(void 0)]:[3,5];case 4:return[2,r.sent()];case 5:return[4,FG(i)];case 6:return[4,r.sent()];case 7:return r.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}}))}))}function QU(t){return DG(null==t?void 0:t.getReader)}function xU(t){if(t instanceof yU)return t;if(null!=t){if(EU(t))return i=t,new yU((function(t){var e=i[fU]();if(DG(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(dU(t))return function(t){return new yU((function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()}))}(t);if(pU(t))return n=t,new yU((function(t){n.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,WG)}));if(_U(t))return DU(t);if(wU(t))return e=t,new yU((function(t){var n,i;try{for(var r=PG(e),o=r.next();!o.done;o=r.next()){var s=o.value;if(t.next(s),t.closed)return}}catch(t){n={error:t}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}t.complete()}));if(QU(t))return DU(bU(t))}var e,n,i;throw vU(t)}function DU(t){return new yU((function(e){(function(t,e){var n,i,r,o;return RG(this,void 0,void 0,(function(){var s,a;return NG(this,(function(A){switch(A.label){case 0:A.trys.push([0,5,6,11]),n=GG(t),A.label=1;case 1:return[4,n.next()];case 2:if((i=A.sent()).done)return[3,4];if(s=i.value,e.next(s),e.closed)return[2];A.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=A.sent(),r={error:a},[3,11];case 6:return A.trys.push([6,,9,10]),i&&!i.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:A.sent(),A.label=8;case 8:return[3,10];case 9:if(r)throw r.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}}))}))})(t,e).catch((function(t){return e.error(t)}))}))}function SU(t,e,n,i,r){void 0===i&&(i=0),void 0===r&&(r=!1);var o=e.schedule((function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()}),i);if(t.add(o),!r)return o}function MU(t,e,n){return void 0===n&&(n=1/0),DG(e)?MU((function(n,i){return hU((function(t,r){return e(n,t,i,r)}))(xU(t(n,i)))}),n):("number"==typeof e&&(n=e),SG((function(e,i){return function(t,e,n,i,r,o,s,a){var A=[],l=0,c=0,u=!1,h=function(){!u||A.length||l||e.complete()},g=function(t){return l<i?d(t):A.push(t)},d=function(t){o&&e.next(t),l++;var a=!1;xU(n(t,c++)).subscribe(cU(e,(function(t){null==r||r(t),o?g(t):e.next(t)}),(function(){a=!0}),void 0,(function(){if(a)try{l--;for(var t=function(){var t=A.shift();s?SU(e,s,(function(){return d(t)})):d(t)};A.length&&l<i;)t();h()}catch(t){e.error(t)}})))};return t.subscribe(cU(e,g,(function(){u=!0,h()}))),function(){null==a||a()}}(e,i,t,n)})))}function kU(t){return void 0===t&&(t=1/0),MU(mU,t)}function RU(t){return t[t.length-1]}function NU(t){return(e=RU(t))&&DG(e.schedule)?t.pop():void 0;var e}function PU(t,e){return void 0===e&&(e=0),SG((function(n,i){n.subscribe(cU(i,(function(n){return SU(i,t,(function(){return i.next(n)}),e)}),(function(){return SU(i,t,(function(){return i.complete()}),e)}),(function(n){return SU(i,t,(function(){return i.error(n)}),e)})))}))}function TU(t,e){return void 0===e&&(e=0),SG((function(n,i){i.add(t.schedule((function(){return n.subscribe(i)}),e))}))}function LU(t,e){if(!t)throw new Error("Iterable cannot be null");return new yU((function(n){SU(n,e,(function(){var i=t[Symbol.asyncIterator]();SU(n,e,(function(){i.next().then((function(t){t.done?n.complete():n.next(t.value)}))}),0,!0)}))}))}function FU(t,e){if(null!=t){if(EU(t))return function(t,e){return xU(t).pipe(TU(e),PU(e))}(t,e);if(dU(t))return function(t,e){return new yU((function(n){var i=0;return e.schedule((function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())}))}))}(t,e);if(pU(t))return function(t,e){return xU(t).pipe(TU(e),PU(e))}(t,e);if(_U(t))return LU(t,e);if(wU(t))return function(t,e){return new yU((function(n){var i;return SU(n,e,(function(){i=t[BU](),SU(n,e,(function(){var t,e,r;try{e=(t=i.next()).value,r=t.done}catch(t){return void n.error(t)}r?n.complete():n.next(e)}),0,!0)})),function(){return DG(null==i?void 0:i.return)&&i.return()}}))}(t,e);if(QU(t))return function(t,e){return LU(bU(t),e)}(t,e)}throw vU(t)}function OU(t,e){return e?FU(t,e):xU(t)}function GU(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return kU(1)(OU(t,NU(t)))}function UU(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=NU(t);return SG((function(e,i){(n?GU(t,e,n):GU(t,e)).subscribe(i)}))}function jU(t,e){return void 0===e&&(e=mU),t=null!=t?t:YU,SG((function(n,i){var r,o=!0;n.subscribe(cU(i,(function(n){var s=e(n);!o&&t(r,s)||(o=!1,r=s,i.next(n))})))}))}function YU(t,e){return t===e}var KU=UG((function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),zU=function(t){function e(){var e=t.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return kG(e,t),e.prototype.lift=function(t){var e=new JU(this,this);return e.operator=t,e},e.prototype._throwIfClosed=function(){if(this.closed)throw new KU},e.prototype.next=function(t){var e=this;eU((function(){var n,i;if(e._throwIfClosed(),!e.isStopped){e.currentObservers||(e.currentObservers=Array.from(e.observers));try{for(var r=PG(e.currentObservers),o=r.next();!o.done;o=r.next()){o.value.next(t)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}}}))},e.prototype.error=function(t){var e=this;eU((function(){if(e._throwIfClosed(),!e.isStopped){e.hasError=e.isStopped=!0,e.thrownError=t;for(var n=e.observers;n.length;)n.shift().error(t)}}))},e.prototype.complete=function(){var t=this;eU((function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var e=t.observers;e.length;)e.shift().complete()}}))},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(e){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var e=this,n=this,i=n.hasError,r=n.isStopped,o=n.observers;return i||r?zG:(this.currentObservers=null,o.push(t),new KG((function(){e.currentObservers=null,YG(o,t)})))},e.prototype._checkFinalizedStatuses=function(t){var e=this,n=e.hasError,i=e.thrownError,r=e.isStopped;n?t.error(i):r&&t.complete()},e.prototype.asObservable=function(){var t=new yU;return t.source=this,t},e.create=function(t,e){return new JU(t,e)},e}(yU),JU=function(t){function e(e,n){var i=t.call(this)||this;return i.destination=e,i.source=n,i}return kG(e,t),e.prototype.next=function(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,t)},e.prototype.error=function(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,t)},e.prototype.complete=function(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)},e.prototype._subscribe=function(t){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==n?n:zG},e}(zU),qU={now:function(){return(qU.delegate||Date).now()},delegate:void 0},HU=function(t){function e(e,n,i){void 0===e&&(e=1/0),void 0===n&&(n=1/0),void 0===i&&(i=qU);var r=t.call(this)||this;return r._bufferSize=e,r._windowTime=n,r._timestampProvider=i,r._buffer=[],r._infiniteTimeWindow=!0,r._infiniteTimeWindow=n===1/0,r._bufferSize=Math.max(1,e),r._windowTime=Math.max(1,n),r}return kG(e,t),e.prototype.next=function(e){var n=this,i=n.isStopped,r=n._buffer,o=n._infiniteTimeWindow,s=n._timestampProvider,a=n._windowTime;i||(r.push(e),!o&&r.push(s.now()+a)),this._trimBuffer(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var e=this._innerSubscribe(t),n=this._infiniteTimeWindow,i=this._buffer.slice(),r=0;r<i.length&&!t.closed;r+=n?1:2)t.next(i[r]);return this._checkFinalizedStatuses(t),e},e.prototype._trimBuffer=function(){var t=this,e=t._bufferSize,n=t._timestampProvider,i=t._buffer,r=t._infiniteTimeWindow,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){for(var s=n.now(),a=0,A=1;A<i.length&&i[A]<=s;A+=2)a=A;a&&i.splice(0,a+1)}},e}(zU);function VU(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!0!==e){if(!1!==e){var r=new sU({next:function(){r.unsubscribe(),t()}});return xU(e.apply(void 0,LG([],TG(n)))).subscribe(r)}}else t()}function WU(t,e,n){var i,r,o,s,a=!1;return t&&"object"==typeof t?(i=t.bufferSize,s=void 0===i?1/0:i,r=t.windowTime,e=void 0===r?1/0:r,a=void 0!==(o=t.refCount)&&o,n=t.scheduler):s=null!=t?t:1/0,function(t){void 0===t&&(t={});var e=t.connector,n=void 0===e?function(){return new zU}:e,i=t.resetOnError,r=void 0===i||i,o=t.resetOnComplete,s=void 0===o||o,a=t.resetOnRefCountZero,A=void 0===a||a;return function(t){var e,i,o,a=0,l=!1,c=!1,u=function(){null==i||i.unsubscribe(),i=void 0},h=function(){u(),e=o=void 0,l=c=!1},g=function(){var t=e;h(),null==t||t.unsubscribe()};return SG((function(t,d){a++,c||l||u();var p=o=null!=o?o:n();d.add((function(){0!=--a||c||l||(i=VU(g,A))})),p.subscribe(d),!e&&a>0&&(e=new sU({next:function(t){return p.next(t)},error:function(t){c=!0,u(),i=VU(h,r,t),p.error(t)},complete:function(){l=!0,u(),i=VU(h,s),p.complete()}}),xU(t).subscribe(e))}))(t)}}({connector:function(){return new HU(s,e,n)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}function ZU(t){return t&&"function"==typeof t.then?t:Promise.resolve(t)}var XU=Promise.resolve(!0),$U=Promise.resolve(!1),tj=Promise.resolve(null),ej=Promise.resolve();function nj(t=1e4){return"function"==typeof requestIdleCallback?new Promise((e=>{requestIdleCallback((()=>e()),{timeout:t})})):function(t=0){return new Promise((e=>setTimeout(e,t)))}(0)}var ij=ej;function rj(t,e){var n=t.get(e);if(void 0===n)throw new Error("missing value from map "+e);return n}function oj(t,e,n,i){var r=t.get(e);return void 0===r?(r=n(),t.set(e,r)):i&&i(r),r}function sj(t){var e=t.split("-"),n="RxDB";return e.forEach((t=>{n+=aG(t)})),n+="Plugin",new Error("You are using a function which must be overwritten by a plugin.\n        You should either prevent the usage of this function or add the plugin via:\n            import { "+n+" } from 'rxdb/plugins/"+t+"';\n            addRxPlugin("+n+");\n        ")}function aj(t){return{name:t.name,message:t.message,rxdb:t.rxdb,parameters:t.parameters,extensions:t.extensions,code:t.code,url:t.url,stack:t.stack?t.stack.replace(/\n/g," \n "):void 0}}function Aj(t){return t.documentData?t.documentData:t.previousDocumentData}var lj=0;function cj(){var t=Date.now();(t+=.01)<=lj&&(t=lj+.01);var e=parseFloat(t.toFixed(2));return lj=e,e}function uj(t){for(var e="",n=0;n<t.length;n++){var i=t[n];if("-"===i)return parseInt(e,10);e+=i}throw new Error("malformatted revision: "+t)}function hj(t,e){return(e?uj(e._rev)+1:1)+"-"+t}var gj=g(1269);const dj=t=>{t.previousResults.unshift(t.changeEvent.doc),t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,t.changeEvent.doc)},pj=t=>{t.previousResults.push(t.changeEvent.doc),t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,t.changeEvent.doc)},fj=t=>{const e=t.previousResults.shift();t.keyDocumentMap&&e&&t.keyDocumentMap.delete(e[t.queryParams.primaryKey])},mj=t=>{const e=t.previousResults.pop();t.keyDocumentMap&&e&&t.keyDocumentMap.delete(e[t.queryParams.primaryKey])},Ij=t=>{t.keyDocumentMap&&t.keyDocumentMap.delete(t.changeEvent.id);const e=t.queryParams.primaryKey,n=t.previousResults;for(let i=0;i<n.length;i++){if(n[i][e]===t.changeEvent.id){n.splice(i,1);break}}},yj=t=>{const e=t.changeEvent.id,n=t.changeEvent.doc;if(t.keyDocumentMap){if(t.keyDocumentMap.has(e))return;t.keyDocumentMap.set(e,n)}else{const n=t.previousResults.find((n=>n[t.queryParams.primaryKey]===e));if(n)return}!function(t,e,n,i){var r,o=t.length,s=o-1,a=0;if(0===o)return t.push(e),0;for(;i<=s;)n(r=t[a=i+(s-i>>1)],e)<=0?i=a+1:s=a-1;n(r,e)<=0&&a++,t.splice(a,0,e)}(t.previousResults,n,t.queryParams.sortComparator,0)},Cj=["doNothing","insertFirst","insertLast","removeFirstItem","removeLastItem","removeFirstInsertLast","removeLastInsertFirst","removeFirstInsertFirst","removeLastInsertLast","removeExisting","replaceExisting","alwaysWrong","insertAtSortPosition","removeExistingAndInsertAtSortPosition","runFullQueryAgain","unknownAction"],Ej={doNothing:t=>{},insertFirst:dj,insertLast:pj,removeFirstItem:fj,removeLastItem:mj,removeFirstInsertLast:t=>{fj(t),pj(t)},removeLastInsertFirst:t=>{mj(t),dj(t)},removeFirstInsertFirst:t=>{fj(t),dj(t)},removeLastInsertLast:t=>{mj(t),pj(t)},removeExisting:Ij,replaceExisting:t=>{const e=t.changeEvent.doc,n=t.queryParams.primaryKey,i=t.previousResults;for(let r=0;r<i.length;r++){if(i[r][n]===t.changeEvent.id){i[r]=e,t.keyDocumentMap&&t.keyDocumentMap.set(t.changeEvent.id,e);break}}},alwaysWrong:t=>{const e={_id:"wrongHuman"+(new Date).getTime()};t.previousResults.length=0,t.previousResults.push(e),t.keyDocumentMap&&(t.keyDocumentMap.clear(),t.keyDocumentMap.set(e._id,e))},insertAtSortPosition:yj,removeExistingAndInsertAtSortPosition:t=>{Ij(t),yj(t)},runFullQueryAgain:t=>{throw new Error("Action runFullQueryAgain must be implemented by yourself")},unknownAction:t=>{throw new Error("Action unknownAction should never be called")}};function _j(t){return t?"1":"0"}!function(t=6){let e="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let i=0;i<t;i++)e+=n.charAt(Math.floor(62*Math.random()))}(4);function vj(t,e){const n=[];for(let i=0,r=t.length;i<r;i+=e)n.push(t.substring(i,i+e));return n}const Bj=40;function wj(t){return t.charCodeAt(0)-Bj}function bj(t){return t[t.length-1]}function Qj(t,e,n){if(Array.isArray(e)&&(e=e.join(".")),!function(t){const e=typeof t;return null!==t&&("object"===e||"function"===e)}(t)||"string"!=typeof e)return void 0===n?t:n;const i=e.split(".");if(0===i.length)return n;for(let e=0;e<i.length;e++){const r=i[e];if(null==(t=xj(t,r)?e===i.length-1?void 0:null:t[r])){if(e!==i.length-1)return n;break}}return void 0===t?n:t}function xj(t,e){if("number"!=typeof e&&Array.isArray(t)){const n=Number.parseInt(e,10);return Number.isInteger(n)&&t[n]===t[e]}return!1}const Dj=t=>!!t.queryParams.limit,Sj=t=>1===t.queryParams.limit,Mj=t=>!!(t.queryParams.skip&&t.queryParams.skip>0),kj=t=>"DELETE"===t.changeEvent.operation,Rj=t=>"INSERT"===t.changeEvent.operation,Nj=t=>"UPDATE"===t.changeEvent.operation,Pj=t=>Dj(t)&&t.previousResults.length>=t.queryParams.limit,Tj=t=>{const e=t.queryParams.sortFields,n=t.changeEvent.previous,i=t.changeEvent.doc;if(!i)return!1;if(!n)return!0;for(let t=0;t<e.length;t++){const r=e[t];if(Qj(n,r)!==Qj(i,r))return!0}return!1},Lj=t=>{const e=t.changeEvent.id;if(t.keyDocumentMap){return t.keyDocumentMap.has(e)}{const n=t.queryParams.primaryKey,i=t.previousResults;for(let t=0;t<i.length;t++){if(i[t][n]===e)return!0}return!1}},Fj=t=>{const e=t.previousResults[0];return!(!e||e[t.queryParams.primaryKey]!==t.changeEvent.id)},Oj=t=>{const e=bj(t.previousResults);return!(!e||e[t.queryParams.primaryKey]!==t.changeEvent.id)},Gj=t=>{const e=t.changeEvent.previous;if(!e)return!1;const n=t.previousResults[0];if(!n)return!1;if(n[t.queryParams.primaryKey]===t.changeEvent.id)return!0;return t.queryParams.sortComparator(e,n)<0},Uj=t=>{const e=t.changeEvent.previous;if(!e)return!1;const n=bj(t.previousResults);if(!n)return!1;if(n[t.queryParams.primaryKey]===t.changeEvent.id)return!0;return t.queryParams.sortComparator(e,n)>0},jj=t=>{const e=t.changeEvent.doc;if(!e)return!1;const n=t.previousResults[0];if(!n)return!1;if(n[t.queryParams.primaryKey]===t.changeEvent.id)return!0;return t.queryParams.sortComparator(e,n)<0},Yj=t=>{const e=t.changeEvent.doc;if(!e)return!1;const n=bj(t.previousResults);if(!n)return!1;if(n[t.queryParams.primaryKey]===t.changeEvent.id)return!0;return t.queryParams.sortComparator(e,n)>0},Kj=t=>{const e=t.changeEvent.previous;return!!e&&t.queryParams.queryMatcher(e)},zj=t=>{const e=t.changeEvent.doc;if(!e)return!1;return t.queryParams.queryMatcher(e)},Jj=t=>0===t.previousResults.length,qj={0:Rj,1:Nj,2:kj,3:Dj,4:Sj,5:Mj,6:Jj,7:Pj,8:Fj,9:Oj,10:Tj,11:Lj,12:Gj,13:Uj,14:jj,15:Yj,16:Kj,17:zj};let Hj;function Vj(){return Hj||(Hj=function(t){const e=new Map,n=2+2*parseInt(t.charAt(0)+t.charAt(1),10),i=vj(t.substring(2,n),2);for(let t=0;t<i.length;t++){const n=i[t],r=n.charAt(0),o=wj(n.charAt(1));e.set(r,o)}const r=vj(t.substring(n,t.length-3),4);for(let t=0;t<r.length;t++){const n=r[t],i=n.charAt(0),o=n.charAt(1),s=n.charAt(2),a=wj(n.charAt(3));if(!e.has(o))throw new Error("missing node with id "+o);if(!e.has(s))throw new Error("missing node with id "+s);const A={l:a,0:e.get(o),1:e.get(s)};e.set(i,A)}const o=t.slice(-3),s=o.charAt(0),a=o.charAt(1);return{l:wj(o.charAt(2)),0:e.get(s),1:e.get(a)}}("14a1b,c+d2e5f0g/h.i4j*k-l)m(n6oeh6pnm6qen6ril6snh6tin6ubo9vce9wmh9xns9yne9zmi9{cm9|ad9}cp9~aq9ae9bf9bq9cg9ck9cn9nd9np9nq9nf9ng9nm9nk9mr9ms9mt9mj9mk9ml9mn9mc8{8}888mn88m8m4z4w4z44444m4v7yn77~777n777m77m7m7m5m5m55m555m55m5m552|2u2222x222|222222n2n222n2/an/bn/cn///////////,cn,,,,,,,ac0bc00000000000m-m-----------3333(((++++11*m*.")),Hj}const Wj=t=>function(t,e,n){let i=t,r=t.l;for(;;){if(i=i[_j(e[r](n))],"number"==typeof i||"string"==typeof i)return i;r=i.l}}(Vj(),qj,t);function Zj(t){const e=Wj(t);return Cj[e]}var Xj=String.fromCharCode(65535),$j=Number.MIN_SAFE_INTEGER;function tY(t,e){var n=e.selector,i=t.indexes?t.indexes.slice(0):[];e.index&&(i=[e.index]);var r=!!e.sort.find((t=>"desc"===Object.values(t)[0])),o=new Set;Object.keys(n).forEach((e=>{var i=EG(t,e);i&&"boolean"===i.type&&Object.prototype.hasOwnProperty.call(n[e],"$eq")&&o.add(e)}));var s,a=e.sort.map((t=>Object.keys(t)[0])).filter((t=>!o.has(t))).join(","),A=-1;if(i.forEach((t=>{var i=!0,l=!0,c=t.map((t=>{var e=n[t],r=e?Object.keys(e):[],o={};e&&r.length?r.forEach((t=>{if(eY.has(t)){var n=function(t,e){switch(t){case"$eq":return{startKey:e,endKey:e,inclusiveEnd:!0,inclusiveStart:!0};case"$lte":return{endKey:e,inclusiveEnd:!0};case"$gte":return{startKey:e,inclusiveStart:!0};case"$lt":return{endKey:e,inclusiveEnd:!1};case"$gt":return{startKey:e,inclusiveStart:!1};default:throw new Error("SNH")}}(t,e[t]);o=Object.assign(o,n)}})):o={startKey:l?$j:Xj,endKey:i?Xj:$j,inclusiveStart:!0,inclusiveEnd:!0};return void 0===o.startKey&&(o.startKey=$j),void 0===o.endKey&&(o.endKey=Xj),void 0===o.inclusiveStart&&(o.inclusiveStart=!0),void 0===o.inclusiveEnd&&(o.inclusiveEnd=!0),l&&!o.inclusiveStart&&(l=!1),i&&!o.inclusiveEnd&&(i=!1),o})),u=c.map((t=>t.startKey)),h=c.map((t=>t.endKey)),g={index:t,startKeys:u,endKeys:h,inclusiveEnd:i,inclusiveStart:l,sortSatisfiedByIndex:!r&&a===t.filter((t=>!o.has(t))).join(","),selectorSatisfiedByIndex:rY(t,e.selector,u,h)},d=function(t,e,n){var i=0,r=t=>{t>0&&(i+=t)},o=10,s=GO(n.startKeys,(t=>t!==$j&&t!==Xj));r(s*o);var a=GO(n.startKeys,(t=>t!==Xj&&t!==$j));r(a*o);var A=GO(n.startKeys,((t,e)=>t===n.endKeys[e]));r(A*o*1.5);var l=n.sortSatisfiedByIndex?5:0;return r(l),i}(0,0,g);(d>=A||e.index)&&(A=d,s=g)})),!s)throw ZO("SNH",{query:e});return s}var eY=new Set(["$eq","$gt","$gte","$lt","$lte"]),nY=new Set(["$eq","$gt","$gte"]),iY=new Set(["$eq","$lt","$lte"]);function rY(t,e,n,i){var r=Object.entries(e).find((([e,n])=>!t.includes(e)||Object.entries(n).find((([t,e])=>!eY.has(t)))));if(r)return!1;if(e.$and||e.$or)return!1;var o=[],s=new Set;for(var[a,A]of Object.entries(e)){if(!t.includes(a))return!1;var l=Object.keys(A).filter((t=>nY.has(t)));if(l.length>1)return!1;var c=l[0];if(c&&s.add(a),"$eq"!==c){if(o.length>0)return!1;o.push(c)}}var u=[],h=new Set;for(var[g,d]of Object.entries(e)){if(!t.includes(g))return!1;var p=Object.keys(d).filter((t=>iY.has(t)));if(p.length>1)return!1;var f=p[0];if(f&&h.add(g),"$eq"!==f){if(u.length>0)return!1;u.push(f)}}var m=0;for(var I of t){for(var y of[s,h]){if(!y.has(I)&&y.size>0)return!1;y.delete(I)}if(n[m]!==i[m]&&s.size>0&&h.size>0)return!1;m++}return!0}class oY extends Error{}const sY=Number.MAX_SAFE_INTEGER,aY=Number.MIN_SAFE_INTEGER,AY=Symbol("missing"),lY=Object.freeze(new Error("mingo: cycle detected while processing object/array")),cY=/^\[object ([a-zA-Z0-9]+)\]$/,uY=t=>{const e=KY(t);let n=0,i=e.length;for(;i;)n=(n<<5)-n^e.charCodeAt(--i);return n>>>0},hY=new Set(["null","undefined","boolean","number","string","date","regexp"]),gY={null:0,undefined:0,number:1,string:2,object:3,array:4,boolean:5,date:6,regexp:7,function:8},dY=(t,e)=>{t===AY&&(t=void 0),e===AY&&(e=void 0);const[n,i]=[t,e].map((t=>gY[fY(t).toLowerCase()]));return n!==i?n-i:1===n||2===n||6===n?t<e?-1:t>e?1:0:jY(t,e)?0:t<e?-1:t>e?1:0};function pY(t,e){if(!t)throw new oY(e)}const fY=t=>cY.exec(Object.prototype.toString.call(t))[1],mY=t=>"boolean"==typeof t,IY=t=>"string"==typeof t,yY=t=>!isNaN(t)&&"number"==typeof t,CY=Array.isArray,EY=t=>{if(!t)return!1;const e=Object.getPrototypeOf(t);return(e===Object.prototype||null===e)&&"[object Object]"===Object.prototype.toString.call(t)},_Y=t=>t===Object(t),vY=t=>t instanceof Date,BY=t=>t instanceof RegExp,wY=t=>"function"==typeof t,bY=t=>null==t,QY=(t,e)=>t.includes(e),xY=(t,e)=>!QY(t,e),DY=t=>bY(t)||IY(t)&&!t||t instanceof Array&&0===t.length||EY(t)&&0===Object.keys(t).length,SY=t=>t===AY,MY=t=>t instanceof Array?t:[t],kY=(t,e)=>!!t&&Object.prototype.hasOwnProperty.call(t,e),RY=t=>"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView(t),NY=[vY,BY,RY],PY=(t,e)=>{if(bY(t))return t;if(e.has(t))throw lY;const n=t.constructor;if(NY.some((e=>e(t))))return new n(t);try{if(e.add(t),CY(t))return t.map((t=>PY(t,e)));if(EY(t)){const n={};for(const i in t)n[i]=PY(t[i],e);return n}}finally{e.delete(t)}return t},TY=t=>PY(t,new Set),LY=(t,e)=>EY(t)&&EY(e)||CY(t)&&CY(e);function FY(t,e,n){if(n=n||{flatten:!1},SY(t)||bY(t))return e;if(SY(e)||bY(e))return t;if(!LY(t,e)){if(n.skipValidation)return e||t;throw Error("mismatched types. must both be array or object")}if(n.skipValidation=!0,CY(t)){const i=t,r=e;if(n.flatten){let t=0,o=0;for(;t<i.length&&o<r.length;)i[t]=FY(i[t++],r[o++],n);for(;o<r.length;)i.push(e[o++])}else HY(i,r)}else for(const i in e)t[i]=FY(t[i],e[i],n);return t}function OY(t,e=uY){const n=new Map;return t.forEach(((i,r)=>{const o=zY(i,e);n.has(o)?n.get(o).some((e=>jY(t[e],i)))||n.get(o).push(r):n.set(o,[r])})),n}function GY(t,e=uY){if(t.some((t=>0==t.length)))return[];if(1===t.length)return Array.from(t);const n=function(t,e,n=dY){if(DY(t))return t;const i=new Array,r=new Array;for(let n=0;n<t.length;n++){const o=t[n],s=e(o,n);bY(s)?r.push(o):i.push([s,o])}return i.sort(((t,e)=>n(t[0],e[0]))),HY(r,i.map((t=>t[1])))}(t.map(((t,e)=>[e,t.length])),(t=>t[1])),i=t[n[0][0]],r=OY(i,e),o=new Map,s=new Array;return r.forEach(((e,r)=>{const a=e.map((t=>i[t])),A=a.map((t=>0)),l=a.map((t=>[n[0][0],0]));let c=!1;for(let e=1;e<t.length;e++){const[i,s]=n[e],u=t[i];if(o.has(e)||o.set(e,OY(u)),o.get(e).has(r)){const t=o.get(e).get(r).map((t=>u[t]));c=a.map(((n,s)=>t.some(((t,a)=>{const c=A[s];return jY(n,t)&&(A[s]++,i<l[s][0]&&(l[s]=[i,o.get(e).get(r)[a]])),c<A[s]})))).some(Boolean)}if(!c)return}c&&HY(s,A.map(((e,n)=>e===t.length-1?[a[n],l[n]]:AY)).filter((t=>t!==AY)))})),s.sort(((t,e)=>{const[n,[i,r]]=t,[o,[s,a]]=e,A=dY(i,s);return 0!==A?A:dY(r,a)})).map((t=>t[0]))}function UY(t,e=0){const n=new Array;return function t(e,i){for(let r=0,o=e.length;r<o;r++)CY(e[r])&&(i>0||i<0)?t(e[r],Math.max(-1,i-1)):n.push(e[r])}(t,e),n}function jY(t,e){if(t===e||Object.is(t,e))return!0;const n=!!t&&t.constructor||t;if(null===t||null===e||void 0===t||void 0===e||n!==e.constructor||n===Function)return!1;if(n===Array||n===Object){const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;if(new Set([...n,...i]).size!=n.length)return!1;for(const i of n)if(!jY(t[i],e[i]))return!1;return!0}const i=Object.getPrototypeOf(t);return(RY(t)||i!==Object.prototype&&i!==Array.prototype&&Object.prototype.hasOwnProperty.call(i,"toString"))&&t.toString()===e.toString()}const YY=(t,e)=>{if(null===t)return"null";if(void 0===t)return"undefined";const n=t.constructor;switch(n){case RegExp:case Number:case Boolean:case Function:case Symbol:return t.toString();case String:return JSON.stringify(t);case Date:return t.toISOString()}if(RY(t))return n.name+"["+t.toString()+"]";if(e.has(t))throw lY;try{if(e.add(t),CY(t))return"["+t.map((t=>YY(t,e))).join(",")+"]";if(n===Object)return"{"+Object.keys(t).sort().map((n=>n+":"+YY(t[n],e))).join(",")+"}";const i=Object.getPrototypeOf(t);if(i!==Object.prototype&&i!==Array.prototype&&Object.prototype.hasOwnProperty.call(i,"toString"))return n.name+"("+JSON.stringify(t.toString())+")";const[r,o]=(t=>{let[e,n]=[Object.getPrototypeOf(t),Object.getOwnPropertyNames(t)],i=e;for(;!n.length&&e!==Object.prototype&&e!==Array.prototype;)i=e,n=Object.getOwnPropertyNames(e),e=Object.getPrototypeOf(e);const r={};return n.forEach((e=>r[e]=t[e])),[r,i]})(t);return n.name+YY(r,e)}finally{e.delete(t)}},KY=t=>YY(t,new Set);function zY(t,e){return e=e||uY,bY(t)?null:e(t).toString()}function JY(t,e,n=uY){if(t.length<1)return new Map;const i=new Map,r=new Map;for(let o=0;o<t.length;o++){const s=t[o],a=e(s,o),A=zY(a,n);if(null===A)r.has(null)?r.get(null).push(s):r.set(null,[s]);else{const t=i.has(A)?i.get(A).find((t=>jY(t,a))):null;bY(t)?(r.set(a,[s]),i.has(A)?i.get(A).push(a):i.set(A,[a])):r.get(t).push(s)}}return r}const qY=5e4;function HY(t,...e){return t instanceof Array?e.reduce(((t,e)=>{let n=Math.ceil(e.length/qY),i=0;for(;n-- >0;)Array.prototype.push.apply(t,e.slice(i,i+qY)),i+=qY;return t}),t):e.filter(_Y).reduce(((t,e)=>(Object.assign(t,e),t)),t)}function VY(t,e){return _Y(t)?t[e]:void 0}function WY(t,e,n){let i=0;const r=hY.has(fY(t).toLowerCase())?t:function t(e,n){let r=e;for(let e=0;e<n.length;e++){const o=n[e];if(null===/^\d+$/.exec(o)&&r instanceof Array){if(0===e&&i>0)break;i+=1;const o=n.slice(e);r=r.reduce(((e,n)=>{const i=t(n,o);return void 0!==i&&e.push(i),e}),[]);break}if(r=VY(r,o),void 0===r)break}return r}(t,e.split("."));return r instanceof Array&&n?.unwrapArray?function(t,e){if(e<1)return t;for(;e--&&1===t.length;)t=t[0];return t}(r,i):r}function ZY(t,e,n){const i=e.split("."),r=i[0],o=i.slice(1).join("."),s=null!==/^\d+$/.exec(r),a=i.length>1;let A,l;if(t instanceof Array)if(s)A=VY(t,Number(r)),a&&(A=ZY(A,o,n)),A=[A];else{A=[];for(const i of t)l=ZY(i,e,n),n?.preserveMissing?(void 0===l&&(l=AY),A.push(l)):void 0!==l&&A.push(l)}else{if(l=VY(t,r),a&&(l=ZY(l,o,n)),void 0===l)return;A=n?.preserveKeys?{...t}:{},A[r]=l}return A}function XY(t){if(t instanceof Array)for(let e=t.length-1;e>=0;e--)t[e]===AY?t.splice(e,1):XY(t[e]);else if(EY(t))for(const e in t)kY(t,e)&&XY(t[e])}const $Y=/^\d+$/;function tK(t,e,n,i){const r=e.split("."),o=r[0],s=r.slice(1).join(".");if(1===r.length)(EY(t)||CY(t)&&$Y.test(o))&&n(t,o);else{i?.buildGraph&&bY(t[o])&&(t[o]={});const e=t[o];if(!e)return;const a=!!(r.length>1&&$Y.test(r[1]));e instanceof Array&&i?.descendArray&&!a?e.forEach((t=>tK(t,s,n,i))):tK(e,s,n,i)}}function eK(t,e,n){tK(t,e,((t,e)=>{t[e]=wY(n)?n(t[e]):n}),{buildGraph:!0})}function nK(t,e,n){tK(t,e,((t,e)=>{if(t instanceof Array){if(/^\d+$/.test(e))t.splice(parseInt(e),1);else if(n&&n.descendArray)for(const n of t)EY(n)&&delete n[e]}else EY(t)&&delete t[e]}),n)}const iK=/^\$[a-zA-Z0-9_]+$/;function rK(t){return iK.test(t)}function oK(t){if(hY.has(fY(t).toLowerCase()))return BY(t)?{$regex:t}:{$eq:t};if(_Y(t)){const e=t;if(!Object.keys(e).some(rK))return{$eq:t};if(kY(t,"$regex")){const e={...t};return e.$regex=new RegExp(t.$regex,t.$options),delete e.$options,e}}return t}var sK=(t=>(t.CLONE_ALL="CLONE_ALL",t.CLONE_INPUT="CLONE_INPUT",t.CLONE_OUTPUT="CLONE_OUTPUT",t.CLONE_OFF="CLONE_OFF",t))(sK||{});class aK{constructor(t,e,n,i=Date.now()){this._opts=t,this._root=e,this._local=n,this.timestamp=i,this.update(e,n)}static init(t,e,n){return t instanceof aK?new aK(t._opts,bY(t.root)?e:t.root,Object.assign({},t.local,n)):new aK(t,e,n)}update(t,e){return this._root=t,this._local=e?Object.assign({},e,{variables:Object.assign({},this._local?.variables,e?.variables)}):e,this}getOptions(){return Object.freeze({...this._opts,context:cK.from(this._opts.context)})}get root(){return this._root}get local(){return this._local}get idKey(){return this._opts.idKey}get collation(){return this._opts?.collation}get processingMode(){return this._opts?.processingMode||"CLONE_OFF"}get useStrictMode(){return this._opts?.useStrictMode}get scriptEnabled(){return this._opts?.scriptEnabled}get useGlobalContext(){return this._opts?.useGlobalContext}get hashFunction(){return this._opts?.hashFunction}get collectionResolver(){return this._opts?.collectionResolver}get jsonSchemaValidator(){return this._opts?.jsonSchemaValidator}get variables(){return this._opts?.variables}get context(){return this._opts?.context}}function AK(t){return t instanceof aK?t.getOptions():Object.freeze({idKey:"_id",scriptEnabled:!0,useStrictMode:!0,useGlobalContext:!0,processingMode:"CLONE_OFF",...t,context:t?.context?cK.from(t?.context):cK.init({})})}var lK=(t=>(t.ACCUMULATOR="accumulator",t.EXPRESSION="expression",t.PIPELINE="pipeline",t.PROJECTION="projection",t.QUERY="query",t.WINDOW="window",t))(lK||{});class cK{constructor(t){this.operators={accumulator:{},expression:{},pipeline:{},projection:{},query:{},window:{}};for(const[e,n]of Object.entries(t))this.addOperators(e,n)}static init(t={}){return new cK(t)}static from(t){return new cK(t.operators)}addOperators(t,e){for(const[n,i]of Object.entries(e))this.getOperator(t,n)||(this.operators[t][n]=i);return this}addAccumulatorOps(t){return this.addOperators("accumulator",t)}addExpressionOps(t){return this.addOperators("expression",t)}addQueryOps(t){return this.addOperators("query",t)}addPipelineOps(t){return this.addOperators("pipeline",t)}addProjectionOps(t){return this.addOperators("projection",t)}addWindowOps(t){return this.addOperators("window",t)}getOperator(t,e){return t in this.operators&&this.operators[t][e]||null}}const uK=cK.init();function hK(t,e){for(const[n,i]of Object.entries(e)){pY(wY(i)&&rK(n),`'${n}' is not a valid operator`);const e=gK(t,n,null);pY(!e||i===e,`${n} already exists for '${t}' operators. Cannot change operator function once registered.`)}switch(t){case"accumulator":uK.addAccumulatorOps(e);break;case"expression":uK.addExpressionOps(e);break;case"pipeline":uK.addPipelineOps(e);break;case"projection":uK.addProjectionOps(e);break;case"query":uK.addQueryOps(e);break;case"window":uK.addWindowOps(e)}}function gK(t,e,n){const{context:i,useGlobalContext:r}=n||{},o=i?i.getOperator(t,e):null;return!o&&r?uK.getOperator(t,e):o}const dK={$$ROOT:(t,e,n)=>n.root,$$CURRENT:(t,e,n)=>t,$$REMOVE(t,e,n){},$$NOW:(t,e,n)=>new Date(n.timestamp)},pK={$$KEEP:(t,e,n)=>t,$$PRUNE(t,e,n){},$$DESCEND(t,e,n){if(!kY(e,"$cond"))return t;let i;for(const[r,o]of Object.entries(t))if(_Y(o)){if(o instanceof Array){const t=[];for(let i of o)EY(i)&&(i=mK(i,e,n.update(i))),bY(i)||t.push(i);i=t}else i=mK(o,e,n.update(o));bY(i)?delete t[r]:t[r]=i}return t}};function fK(t,e,n,i){const r=aK.init(i,t);if(rK(n=n||"")){const o=gK("expression",n,i);if(o)return o(t,e,r);const s=gK("accumulator",n,i);if(s)return t instanceof Array||(t=fK(t,e,null,r),e=null),pY(t instanceof Array,`'${n}' target must be an array.`),s(t,e,r.update(null,r.local));throw new oY(`operator '${n}' is not registered`)}if(IY(e)&&e.length>0&&"$"===e[0]){if(kY(pK,e))return e;let n=r.root;const i=e.split(".");if(kY(dK,i[0]))n=dK[i[0]](t,null,r),e=e.slice(i[0].length+1);else if("$$"===i[0].slice(0,2)){n=Object.assign({},r.variables,{this:t},r.local?.variables);const o=i[0].slice(2);pY(kY(n,o),`Use of undefined variable: ${o}`),e=e.slice(2)}else e=e.slice(1);return""===e?n:WY(n,e)}if(CY(e))return e.map((e=>fK(t,e,null,r)));if(EY(e)){const n={};for(const[o,s]of Object.entries(e))if(n[o]=fK(t,s,o,r),["expression","accumulator"].some((t=>!!gK(t,o,i))))return pY(1===Object.keys(e).length,"Invalid aggregation expression '"+JSON.stringify(e)+"'"),n[o];return n}return e}function mK(t,e,n){const i=fK(t,e,null,n);return kY(pK,i)?pK[i](t,e,n):i}function IK(t){return t instanceof EK?t:new EK(t)}function yK(t,e){const n=t.slice(e+1);t.splice(e),Array.prototype.push.apply(t,n)}const CK=new Error;class EK{constructor(t){let e;if(this.iteratees=[],this.yieldedValues=[],this.isDone=!1,t instanceof Function&&(t={next:t}),function(t){return!!t&&"object"==typeof t&&t?.next instanceof Function}(t)){const n=t;e=()=>{const t=n.next();if(t.done)throw CK;return t.value}}else if(t instanceof Array){const n=t,i=n.length;let r=0;e=()=>{if(r<i)return n[r++];throw CK}}else if(!(t instanceof Function))throw new oY("Lazy must be initialized with an array, generator, or function.");this.getNext=function(t,e,n){let i=!1,r=-1,o=0;return function(s){try{t:for(;!i;){let a=t();r++;let A=-1;const l=e.length;let c=!1;for(;++A<l;){const t=e[A];switch(t.action){case 0:a=t.func(a,r);break;case 1:if(!t.func(a,r))continue t;break;case 2:--t.count,t.count||(c=!0);break;case 3:--t.count,t.count||yK(e,A);continue t;default:break t}}if(i=c,!s)return{value:a,done:!1};n[o++]=a}}catch(t){if(t!==CK)throw t}return i=!0,{done:i}}}(e,this.iteratees,this.yieldedValues)}push(t,e){return"function"==typeof e?this.iteratees.push({action:t,func:e}):"number"==typeof e&&this.iteratees.push({action:t,count:e}),this}next(){return this.getNext()}map(t){return this.push(0,t)}filter(t){return this.push(1,t)}take(t){return t>0?this.push(2,t):this}drop(t){return t>0?this.push(3,t):this}transform(t){const e=this;let n;return IK((()=>(n||(n=IK(t(e.value()))),n.next())))}value(){return this.isDone||(this.isDone=this.getNext(!0).done),this.yieldedValues}each(t){for(;;){const e=this.next();if(e.done)break;if(!1===t(e.value))return!1}return!0}reduce(t,e){let n=this.next();for(void 0!==e||n.done||(e=n.value,n=this.next());!n.done;)e=t(e,n.value),n=this.next();return e}size(){return this.reduce(((t,e)=>++t),0)}[Symbol.iterator](){return this}}class _K{constructor(t,e){this.pipeline=t,this.options=AK(e)}stream(t){let e=IK(t);const n=this.options.processingMode;n!=sK.CLONE_ALL&&n!=sK.CLONE_INPUT||e.map(TY);const i=new Array;if(!DY(this.pipeline))for(const t of this.pipeline){const n=Object.keys(t),r=n[0],o=gK(lK.PIPELINE,r,this.options);pY(1===n.length&&!!o,`invalid pipeline operator ${r}`),i.push(r),e=o(e,t[r],this.options)}return(n==sK.CLONE_OUTPUT||n==sK.CLONE_ALL&&GY([["$group","$unwind"],i]).length)&&e.map(TY),e}run(t){return this.stream(t).value()}}class vK{constructor(t,e,n,i){this.source=t,this.predicate=e,this.projection=n,this.options=i,this.operators=[],this.result=null,this.buffer=[]}fetch(){return this.result||(EY(this.projection)&&this.operators.push({$project:this.projection}),this.result=IK(this.source).filter(this.predicate),this.operators.length>0&&(this.result=new _K(this.operators,this.options).stream(this.result))),this.result}fetchAll(){const t=IK([...this.buffer]);return this.buffer=[],function(...t){let e=0;return IK((()=>{for(;e<t.length;){const n=t[e].next();if(!n.done)return n;e++}return{done:!0}}))}(t,this.fetch())}all(){return this.fetchAll().value()}count(){return this.all().length}skip(t){return this.operators.push({$skip:t}),this}limit(t){return this.operators.push({$limit:t}),this}sort(t){return this.operators.push({$sort:t}),this}collation(t){return this.options={...this.options,collation:t},this}next(){if(this.buffer.length>0)return this.buffer.pop();const t=this.fetch().next();return t.done?void 0:t.value}hasNext(){if(this.buffer.length>0)return!0;const t=this.fetch().next();return!t.done&&(this.buffer.push(t.value),!0)}map(t){return this.all().map(t)}forEach(t){this.all().forEach(t)}[Symbol.iterator](){return this.fetchAll()}}class BK{constructor(t,e){this.condition=t,this.options=AK(e),this.compiled=[],this.compile()}compile(){pY(EY(this.condition),`query criteria must be an object: ${JSON.stringify(this.condition)}`);const t={};for(const[e,n]of Object.entries(this.condition)){if("$where"===e)Object.assign(t,{field:e,expr:n});else if(QY(["$and","$or","$nor","$expr","$jsonSchema"],e))this.processOperator(e,e,n);else{pY(!rK(e),`unknown top level operator: ${e}`);for(const[t,i]of Object.entries(oK(n)))this.processOperator(e,t,i)}t.field&&this.processOperator(t.field,t.field,t.expr)}}processOperator(t,e,n){const i=gK(lK.QUERY,e,this.options);if(!i)throw new oY(`unknown query operator ${e}`);const r=i(t,n,this.options);this.compiled.push(r)}test(t){for(let e=0,n=this.compiled.length;e<n;e++)if(!this.compiled[e](t))return!1;return!0}find(t,e){return new vK(t,(t=>this.test(t)),e||{},this.options)}remove(t){return t.reduce(((t,e)=>(this.test(e)||t.push(e),t)),[])}}const wK=(t,e,n)=>{if(DY(e)||!EY(e))return t;let i=dY;const r=n.collation;return EY(r)&&IY(r.locale)&&(i=function(t){const e={sensitivity:bK[t.strength||3],caseFirst:"off"===t.caseFirst?"false":t.caseFirst||"false",numeric:t.numericOrdering||!1,ignorePunctuation:"shifted"===t.alternate};!0===(t.caseLevel||!1)&&("base"===e.sensitivity&&(e.sensitivity="case"),"accent"===e.sensitivity&&(e.sensitivity="variant"));const n=new Intl.Collator(t.locale,e);return(t,e)=>{if(!IY(t)||!IY(e))return dY(t,e);const i=n.compare(t,e);return i<0?-1:i>0?1:0}}(r)),t.transform((t=>{const r=Object.keys(e);for(const o of r.reverse()){const r=JY(t,(t=>WY(t,o)),n.hashFunction),s=Array.from(r.keys()).sort(i);-1===e[o]&&s.reverse(),t=[],s.reduce(((t,e)=>HY(t,r.get(e))),t)}return t}))},bK={1:"base",2:"accent",3:"variant"};function QK(t){const e=(e,n,i)=>{const r={unwrapArray:!0},o=Math.max(1,e.split(".").length-1);return s=>{const a=WY(s,e,r);return t(a,n,{...i,depth:o})}};return e.op="query",e}function xK(t){return(e,n,i)=>{const r=fK(e,n,null,i);return t(...r)}}function DK(t,e,n){if(jY(t,e))return!0;if(bY(t)&&bY(e))return!0;if(t instanceof Array){const i=jY.bind(null,e);return t.some(i)||UY(t,n?.depth).some(i)}return!1}function SK(t,e,n){return!DK(t,e,n)}function MK(t,e,n){return bY(t)?e.some((t=>null===t)):GY([MY(t),e],n?.hashFunction).length>0}function kK(t,e,n){return!MK(t,e,n)}function RK(t,e,n){return KK(t,e,((t,e)=>dY(t,e)<0))}function NK(t,e,n){return KK(t,e,((t,e)=>dY(t,e)<=0))}function PK(t,e,n){return KK(t,e,((t,e)=>dY(t,e)>0))}function TK(t,e,n){return KK(t,e,((t,e)=>dY(t,e)>=0))}function LK(t){return rK(t)&&-1===["$and","$or","$nor"].indexOf(t)}function FK(t,e,n){if(CY(t)&&!DY(t)){let i=t=>t,r=e;Object.keys(e).every(LK)&&(r={temp:e},i=t=>({temp:t}));const o=new BK(r,n);for(let e=0,n=t.length;e<n;e++)if(o.test(i(t[e])))return!0}return!1}const OK=t=>null===t,GK=t=>yY(t)&&t>=-2147483648&&t<=2147483647&&-1===t.toString().indexOf("."),UK=t=>yY(t)&&t>=aY&&t<=sY&&-1===t.toString().indexOf("."),jK={array:CY,bool:mY,boolean:mY,date:vY,decimal:yY,double:yY,int:GK,long:UK,number:yY,null:OK,object:EY,regex:BY,regexp:BY,string:IY,undefined:bY,function:t=>{throw new oY("unsupported type key `function`.")},1:yY,2:IY,3:EY,4:CY,6:bY,8:mY,9:vY,10:OK,11:BY,16:GK,18:UK,19:yY};function YK(t,e,n){const i=jK[e];return!!i&&i(t)}function KK(t,e,n){return MY(t).some((t=>fY(t)===fY(e)&&n(t,e)))}xK(kK);const zK=(t,e)=>(n,i,r)=>{pY(CY(i),`${t}: expression must be an array.`);const o=fK(n,i,null,r);return o.some(bY)?null:(pY(o.every(yY),`${t}: expression must evalue to array of numbers.`),e(o))};zK("$bitAnd",(t=>t.reduce(((t,e)=>t&e),-1))),zK("$bitOr",(t=>t.reduce(((t,e)=>t|e),0))),zK("$bitXor",(t=>t.reduce(((t,e)=>t^e),0))),xK(DK),xK(PK),xK(TK),xK(RK),xK(NK),xK(SK);const JK=(t,e)=>{const n={};return t.split("").forEach(((t,i)=>n[t]=e*(i+1))),n};JK("ABCDEFGHIKLM",1),JK("NOPQRSTUVWXY",-1);const qK={undefined:null,null:null,NaN:NaN,Infinity:new Error,"-Infinity":new Error};function HK(t,e=qK){const n=Object.assign({},qK,e),i=new Set(Object.keys(n));return(e,r,o)=>{const s=fK(e,r,null,o);if(i.has(`${s}`)){const e=n[`${s}`];if(e instanceof Error)throw new oY(`cannot apply $${t.name} to -inf, value must in (-inf,inf)`);return e}return t(s)}}HK(Math.acos,{Infinity:1/0,0:new Error}),HK(Math.acosh,{Infinity:1/0,0:new Error}),HK(Math.asin),HK(Math.asinh,{Infinity:1/0,"-Infinity":-1/0}),HK(Math.atan),HK(Math.atanh,{1:1/0,"-1":-1/0}),HK(Math.cos),HK(Math.cosh,{"-Infinity":1/0,Infinity:1/0});const VK=Math.PI/180,WK=(HK((t=>t*VK),{Infinity:1/0,"-Infinity":1/0}),180/Math.PI);HK((t=>t*WK),{Infinity:1/0,"-Infinity":-1/0}),HK(Math.sin),HK(Math.sinh,{"-Infinity":-1/0,Infinity:1/0}),HK(Math.tan);Error;const ZK=(t,e,n)=>{if(DY(e))return t;let i=Object.keys(e),r=!1;$K(e,n);const o=n.idKey;if(QY(i,o)){const t=e[o];0!==t&&!1!==t||(i=i.filter(xY.bind(null,[o])),r=0==i.length)}else i.push(o);const s=aK.init(n);return t.map((t=>XK(t,e,s.update(t),i,r)))};function XK(t,e,n,i,r){let o={},s=!1,a=!1;const A=[];r&&A.push(n.idKey);for(const r of i){let i;const l=e[r];if(r!==n.idKey&&QY([0,!1],l)&&(a=!0),r===n.idKey&&DY(l))i=t[r];else if(IY(l))i=fK(t,l,r,n);else if(QY([1,!0],l));else if(l instanceof Array)i=l.map((e=>{const i=fK(t,e,null,n);return bY(i)?null:i}));else{if(!EY(l)){A.push(r);continue}{const e=l,o=Object.keys(l),a=1==o.length?o[0]:"",A=gK(lK.PROJECTION,a,n);if(A)"$slice"===a?MY(e[a]).every(yY)?(i=A(t,e[a],r,n),s=!0):i=fK(t,e,r,n):i=A(t,e[a],r,n);else if(rK(a))i=fK(t,e[a],a,n);else if(kY(t,r)){$K(e,n);let s=t[r];s instanceof Array?i=s.map((t=>XK(t,e,n,o,!1))):(s=EY(s)?s:t,i=XK(s,e,n,o,!1))}else i=fK(t,l,null,n)}}const c=ZY(t,r,{preserveMissing:!0});void 0!==c&&FY(o,c,{flatten:!0}),xY([0,1,!1,!0],l)&&(void 0===i?nK(o,r,{descendArray:!0}):eK(o,r,i))}if(XY(o),(s||a||r)&&(o=HY({},t,o),A.length>0))for(const t of A)nK(o,t,{descendArray:!0});return o}function $K(t,e){const n=[!1,!1];for(const[i,r]of Object.entries(t)){if(i===e?.idKey)return;0===r||!1===r?n[0]=!0:1!==r&&!0!==r||(n[1]=!0),pY(!(n[0]&&n[1]),"Projection cannot have a mix of inclusion and exclusion.")}}const tz=(t,e,n)=>{pY(CY(e),"Invalid expression: $and expects value to be an Array.");const i=e.map((t=>new BK(t,n)));return t=>i.every((e=>e.test(t)))},ez=(t,e,n)=>{pY(CY(e),"Invalid expression. $or expects value to be an Array");const i=e.map((t=>new BK(t,n)));return t=>i.some((e=>e.test(t)))},nz=(t,e,n)=>{pY(CY(e),"Invalid expression. $nor expects value to be an array.");const i=ez("$or",e,n);return t=>!i(t)},iz=(t,e,n)=>{const i={};i[t]=oK(e);const r=new BK(i,n);return t=>!r.test(t)},rz=QK(DK),oz=QK(PK),sz=QK(TK),az=QK(MK),Az=QK(RK),lz=QK(NK),cz=QK(SK),uz=QK(kK);const hz=QK((function(t,e,n){return MY(t).some((t=>2===e.length&&t%e[0]===e[1]))})),gz=QK((function(t,e,n){const i=MY(t),r=t=>IY(t)&&((t,e=!0)=>!!t||e&&""===t)(e.exec(t),n?.useStrictMode);return i.some(r)||UY(i,1).some(r)}));QK((function(t,e,n){if(!(CY(t)&&CY(e)&&t.length&&e.length))return!1;let i=!0;for(const r of e){if(!i)break;i=EY(r)&&QY(Object.keys(r),"$elemMatch")?FK(t,r.$elemMatch,n):r instanceof RegExp?t.some((t=>"string"==typeof t&&r.test(t))):t.some((t=>jY(r,t)))}return i}));const dz=QK(FK),pz=QK((function(t,e,n){return Array.isArray(t)&&t.length===e})),fz=QK((function(t,e,n){return(!1===e||0===e)&&void 0===t||(!0===e||1===e)&&void 0!==t})),mz=QK((function(t,e,n){return Array.isArray(e)?e.findIndex((e=>YK(t,e)))>=0:YK(t,e)}));var Iz=!1;function yz(t,e){var n=_G(t.primaryKey);e=kO(e);var i=NO(e);if("number"!=typeof i.skip&&(i.skip=0),i.selector?(i.selector=i.selector,Object.entries(i.selector).forEach((([t,e])=>{"object"==typeof e&&null!==e||(i.selector[t]={$eq:e})}))):i.selector={},i.index){var r=LO(i.index);r.includes(n)||r.push(n),i.index=r}if(i.sort){var o=i.sort.find((t=>{return e=t,Object.keys(e)[0]===n;var e}));o||(i.sort=i.sort.slice(0),i.sort.push({[n]:"asc"}))}else if(i.index)i.sort=i.index.map((t=>({[t]:"asc"})));else{if(t.indexes){var s=new Set;Object.entries(i.selector).forEach((([t,e])=>{("object"!=typeof e||null===e||!!Object.keys(e).find((t=>eY.has(t))))&&s.add(t)}));var a,A=-1;t.indexes.forEach((t=>{var e=FO(t)?t:[t],n=e.findIndex((t=>!s.has(t)));n>0&&n>A&&(A=n,a=e)})),a&&(i.sort=a.map((t=>({[t]:"asc"}))))}i.sort||(i.sort=[{[n]:"asc"}])}return i}function Cz(t,e){if(!e.sort)throw ZO("SNH",{query:e});var n=[];e.sort.forEach((t=>{var e,i,r,o=Object.keys(t)[0],s=Object.values(t)[0];n.push({key:o,direction:s,getValueFn:(e=o,i=e.split("."),r=i.length,1===r?t=>t[e]:t=>{for(var e=t,n=0;n<r;++n)if(void 0===(e=e[i[n]]))return e;return e})})}));return(t,e)=>{for(var i=0;i<n.length;++i){var r=n[i],o=r.getValueFn(t),s=r.getValueFn(e);if(o!==s)return"asc"===r.direction?dY(o,s):dY(s,o)}}}function Ez(t,e){if(!e.sort)throw ZO("SNH",{query:e});var n,i=(n=e.selector,Iz||(hK(lK.PIPELINE,{$sort:wK,$project:ZK}),hK(lK.QUERY,{$and:tz,$eq:rz,$elemMatch:dz,$exists:fz,$gt:oz,$gte:sz,$in:az,$lt:Az,$lte:lz,$ne:cz,$nin:uz,$mod:hz,$nor:nz,$not:iz,$or:ez,$regex:gz,$size:pz,$type:mz}),Iz=!0),new BK(n));return t=>i.test(t)}async function _z(t,e){var n=await t.exec();return n?Array.isArray(n)?Promise.all(n.map((t=>e(t)))):await e(n):null}function vz(t,e){return e.sort&&0!==e.sort.length?e.sort.map((t=>Object.keys(t)[0])):[t]}var Bz=new WeakMap;function wz(t,e){if(!t.collection.database.eventReduce)return{runFullQueryAgain:!0};var n=function(t){return oj(Bz,t,(()=>{var e=t.collection,n=yz(e.storageInstance.schema,NO(t.mangoQuery)),i=e.schema.primaryPath,r=Cz(e.schema.jsonSchema,n),o=Ez(e.schema.jsonSchema,n);return{primaryKey:t.collection.schema.primaryPath,skip:n.skip,limit:n.limit,sortFields:vz(i,n),sortComparator:(e,n)=>{var i={docA:e,docB:n,rxQuery:t};return r(i.docA,i.docB)},queryMatcher:e=>o({doc:e,rxQuery:t}.doc)}}))}(t),i=mG(t._result).docsData.slice(0),r=mG(t._result).docsDataMap,o=!1,s=e.map((t=>function(t){switch(t.operation){case"INSERT":return{operation:t.operation,id:t.documentId,doc:t.documentData,previous:null};case"UPDATE":return{operation:t.operation,id:t.documentId,doc:zO.deepFreezeWhenDevMode(t.documentData),previous:t.previousDocumentData?t.previousDocumentData:"UNKNOWN"};case"DELETE":return{operation:t.operation,id:t.documentId,doc:null,previous:t.previousDocumentData}}}(t))).filter(OO).find((t=>{var e=Zj({queryParams:n,changeEvent:t,previousResults:i,keyDocumentMap:r});return"runFullQueryAgain"===e||("doNothing"!==e?(o=!0,function(t,e,n,i,r){(0,Ej[t])({queryParams:e,changeEvent:n,previousResults:i,keyDocumentMap:r})}(e,n,t,i,r),!1):void 0)}));return s?{runFullQueryAgain:!0}:{runFullQueryAgain:!1,changed:o,newResults:i}}var bz=function(){function t(){this._map=new Map}return t.prototype.getByQuery=function(t){var e=t.toString();return oj(this._map,e,(()=>t))},t}();function Qz(t,e){e.uncached=!0;var n=e.toString();t._map.delete(n)}function xz(t){return t.refCount$.observers.length}var Dz,Sz,Mz=(Dz=100,Sz=3e4,(t,e)=>{if(!(e._map.size<Dz)){var n=cj()-Sz,i=[],r=Array.from(e._map.values());for(var o of r)xz(o)>0||(0===o._lastEnsureEqual&&o._creationTime<n?Qz(e,o):i.push(o));var s=i.length-Dz;if(!(s<=0)){var a=i.sort(((t,e)=>t._lastEnsureEqual-e._lastEnsureEqual));a.slice(0,s).forEach((t=>Qz(e,t)))}}}),kz=new WeakSet;function Rz(t){kz.has(t)||(kz.add(t),new Promise((t=>setTimeout(t,0))).then((()=>{return t=200,ij=ij.then((()=>nj(t)));var t})).then((()=>{t.destroyed||t.cacheReplacementPolicy(t,t._queryCache),kz.delete(t)})))}var Nz=function(){function t(t,e,n){this.cacheItemByDocId=new Map,this.tasks=new Set,this.registry="function"==typeof FinalizationRegistry?new FinalizationRegistry((t=>{var e=t.docId,n=this.cacheItemByDocId.get(e);n&&(n[0].delete(t.revisionHeight),0===n[0].size&&this.cacheItemByDocId.delete(e))})):void 0,this.primaryPath=t,this.changes$=e,this.documentCreator=n,e.subscribe((t=>{this.tasks.add((()=>{for(var e=this.cacheItemByDocId,n=0;n<t.length;n++){var i=t[n],r=e.get(i.documentId);if(r){var o=i.documentData;o||(o=i.previousDocumentData),r[1]=o}}})),this.tasks.size<=1&&nj().then((()=>{this.processTasks()}))}))}var e=t.prototype;return e.processTasks=function(){0!==this.tasks.size&&(Array.from(this.tasks).forEach((t=>t())),this.tasks.clear())},e.getLatestDocumentData=function(t){return this.processTasks(),rj(this.cacheItemByDocId,t)[1]},e.getLatestDocumentDataIfExists=function(t){this.processTasks();var e=this.cacheItemByDocId.get(t);if(e)return e[1]},SO(t,[{key:"getCachedRxDocuments",get:function(){return PO(this,"getCachedRxDocuments",Pz(this))}},{key:"getCachedRxDocument",get:function(){var t=Pz(this);return PO(this,"getCachedRxDocument",(e=>t([e])[0]))}}])}();function Pz(t){var e=t.primaryPath,n=t.cacheItemByDocId,i=t.registry,r=zO.deepFreezeWhenDevMode,o=t.documentCreator;return s=>{for(var a=new Array(s.length),A=[],l=0;l<s.length;l++){var c=s[l],u=c[e],h=uj(c._rev),g=void 0,d=void 0,p=n.get(u);p?d=(g=p[0]).get(h):(p=[g=new Map,c],n.set(u,p));var f=d?d.deref():void 0;f||(c=r(c),f=o(c),g.set(h,Lz(f)),i&&A.push(f)),a[l]=f}return A.length>0&&i&&(t.tasks.add((()=>{for(var t=0;t<A.length;t++){var e=A[t];i.register(e,{docId:e.primary,revisionHeight:uj(e.revision)})}})),t.tasks.size<=1&&nj().then((()=>{t.processTasks()}))),a}}function Tz(t,e){return(0,t.getCachedRxDocuments)(e)}var Lz="function"==typeof WeakRef?function(t){return new WeakRef(t)}:function(t){return{deref:()=>t}};var Fz=function(){function t(t,e,n){this.time=cj(),this.query=t,this.count=n,this.documents=Tz(this.query.collection._docCache,e)}return t.prototype.getValue=function(t){var e=this.query.op;if("count"===e)return this.count;if("findOne"===e){var n=0===this.documents.length?null:this.documents[0];if(!n&&t)throw ZO("QU10",{collection:this.query.collection.name,query:this.query.mangoQuery,op:e});return n}return"findByIds"===e?this.docsMap:this.documents.slice(0)},SO(t,[{key:"docsData",get:function(){return PO(this,"docsData",this.documents.map((t=>t._data)))}},{key:"docsDataMap",get:function(){var t=new Map;return this.documents.forEach((e=>{t.set(e.primary,e._data)})),PO(this,"docsDataMap",t)}},{key:"docsMap",get:function(){for(var t=new Map,e=this.documents,n=0;n<e.length;n++){var i=e[n];t.set(i.primary,i)}return PO(this,"docsMap",t)}}])}(),Oz=0,Gz=function(){function t(t,e,n,i={}){this.id=++Oz,this._execOverDatabaseCount=0,this._creationTime=cj(),this._lastEnsureEqual=0,this.uncached=!1,this.refCount$=new gj.BehaviorSubject(null),this._result=null,this._latestChangeEvent=-1,this._lastExecStart=0,this._lastExecEnd=0,this._ensureEqualQueue=$U,this.op=t,this.mangoQuery=e,this.collection=n,this.other=i,e||(this.mangoQuery={selector:{}}),this.isFindOneByIdQuery=function(t,e){if(!e.skip&&e.selector&&1===Object.keys(e.selector).length&&e.selector[t]){var n=e.selector[t];if("string"==typeof n)return n;if(1===Object.keys(n).length&&"string"==typeof n.$eq)return n.$eq;if(1===Object.keys(n).length&&Array.isArray(n.$eq)&&!n.$eq.find((t=>"string"!=typeof t)))return n.$eq}return!1}(this.collection.schema.primaryPath,e)}var e=t.prototype;return e._setResultData=function(t){if("number"!=typeof t){t instanceof Map&&(t=Array.from(t.values()));var e=new Fz(this,t,t.length);this._result=e}else this._result=new Fz(this,[],t)},e._execOverDatabase=async function(){if(this._execOverDatabaseCount=this._execOverDatabaseCount+1,this._lastExecStart=cj(),"count"===this.op){var t=this.getPreparedQuery(),e=await this.collection.storageInstance.count(t);if("slow"!==e.mode||this.collection.database.allowSlowCount)return e.count;throw ZO("QU14",{collection:this.collection,queryObj:this.mangoQuery})}if("findByIds"===this.op){var n=mG(this.mangoQuery.selector)[this.collection.schema.primaryPath].$in,i=new Map,r=[];if(n.forEach((t=>{var e=this.collection._docCache.getLatestDocumentDataIfExists(t);if(e){if(!e._deleted){var n=this.collection._docCache.getCachedRxDocument(e);i.set(t,n)}}else r.push(t)})),r.length>0)(await this.collection.storageInstance.findDocumentsById(r,!1)).forEach((t=>{var e=this.collection._docCache.getCachedRxDocument(t);i.set(e.primary,e)}));return i}var o=async function(t){var e=[],n=t.collection;if(t.isFindOneByIdQuery)if(Array.isArray(t.isFindOneByIdQuery)){var i=t.isFindOneByIdQuery;if(i=i.filter((n=>{var i=t.collection._docCache.getLatestDocumentDataIfExists(n);return!i||(i._deleted||e.push(i),!1)})),i.length>0){var r=await n.storageInstance.findDocumentsById(i,!1);UO(e,r)}}else{var o=t.isFindOneByIdQuery,s=t.collection._docCache.getLatestDocumentDataIfExists(o);if(!s){var a=await n.storageInstance.findDocumentsById([o],!1);a[0]&&(s=a[0])}s&&!s._deleted&&e.push(s)}else{var A=t.getPreparedQuery(),l=await n.storageInstance.query(A);e=l.documents}return e}(this);return o.then((t=>(this._lastExecEnd=cj(),t)))},e.exec=async function(t){if(t&&"findOne"!==this.op)throw ZO("QU9",{collection:this.collection.name,query:this.mangoQuery,op:this.op});return await Yz(this),mG(this._result).getValue(t)},e.toString=function(){var t=RO({op:this.op,query:this.mangoQuery,other:this.other},!0),e=JSON.stringify(t);return this.toString=()=>e,e},e.getPreparedQuery=function(){var t={rxQuery:this,mangoQuery:yz(this.collection.schema.jsonSchema,this.mangoQuery)};t.mangoQuery.selector._deleted={$eq:!1},t.mangoQuery.index&&t.mangoQuery.index.unshift("_deleted"),nG("prePrepareQuery",t);var e=Kz(this.collection.schema.jsonSchema,t.mangoQuery);return this.getPreparedQuery=()=>e,e},e.doesDocumentDataMatch=function(t){return!t._deleted&&this.queryMatcher(t)},e.remove=function(){return this.exec().then((t=>Array.isArray(t)?Promise.all(t.map((t=>t.remove()))):t.remove()))},e.incrementalRemove=function(){return _z(this.asRxQuery,(t=>t.incrementalRemove()))},e.update=function(t){throw sj("update")},e.patch=function(t){return _z(this.asRxQuery,(e=>e.patch(t)))},e.incrementalPatch=function(t){return _z(this.asRxQuery,(e=>e.incrementalPatch(t)))},e.modify=function(t){return _z(this.asRxQuery,(e=>e.modify(t)))},e.incrementalModify=function(t){return _z(this.asRxQuery,(e=>e.incrementalModify(t)))},e.where=function(t){throw sj("query-builder")},e.sort=function(t){throw sj("query-builder")},e.skip=function(t){throw sj("query-builder")},e.limit=function(t){throw sj("query-builder")},SO(t,[{key:"$",get:function(){if(!this._$){var t=this.collection.$.pipe(gU((t=>!t.isLocal)),UU(null),MU((()=>Yz(this))),hU((()=>this._result)),WU(IG),jU(((t,e)=>!(!t||t.time!==mG(e).time))),gU((t=>!!t)),hU((t=>mG(t).getValue())));this._$=(0,gj.merge)(t,this.refCount$.pipe(gU((()=>!1))))}return this._$}},{key:"$$",get:function(){return this.collection.database.getReactivityFactory().fromObservable(this.$,void 0,this.collection.database)}},{key:"queryMatcher",get:function(){this.collection.schema.jsonSchema;return PO(this,"queryMatcher",Ez(0,yz(this.collection.schema.jsonSchema,this.mangoQuery)))}},{key:"asRxQuery",get:function(){return this}}])}();function Uz(t,e,n,i){nG("preCreateRxQuery",{op:t,queryObj:e,collection:n,other:i});var r,o=new Gz(t,e,n,i);return o=(r=o).collection._queryCache.getByQuery(r),Rz(n),o}function jz(t){var e=t.asRxQuery.collection._changeEventBuffer.getCounter();return t._latestChangeEvent>=e}async function Yz(t){return t.collection.awaitBeforeReads.size>0&&await Promise.all(Array.from(t.collection.awaitBeforeReads).map((t=>t()))),!t.collection.database.destroyed&&!jz(t)&&(t._ensureEqualQueue=t._ensureEqualQueue.then((()=>function(t){if(t._lastEnsureEqual=cj(),t.collection.database.destroyed||jz(t))return $U;var e=!1,n=!1;-1===t._latestChangeEvent&&(n=!0);if(!n){var i=t.asRxQuery.collection._changeEventBuffer.getFrom(t._latestChangeEvent+1);if(null===i)n=!0;else{t._latestChangeEvent=t.asRxQuery.collection._changeEventBuffer.getCounter();var r=t.asRxQuery.collection._changeEventBuffer.reduceByLastOfDoc(i);if("count"===t.op){var o=mG(t._result).count,s=o;r.forEach((e=>{var n=e.previousDocumentData&&t.doesDocumentDataMatch(e.previousDocumentData),i=t.doesDocumentDataMatch(e.documentData);!n&&i&&s++,n&&!i&&s--})),s!==o&&(e=!0,t._setResultData(s))}else{var a=wz(t,r);a.runFullQueryAgain?n=!0:a.changed&&(e=!0,t._setResultData(a.newResults))}}}if(n)return t._execOverDatabase().then((n=>(t._latestChangeEvent=t.collection._changeEventBuffer.getCounter(),"number"==typeof n?(t._result&&n===t._result.count||(e=!0,t._setResultData(n)),e):(t._result&&function(t,e,n){if(e.length!==n.length)return!1;for(var i=0,r=e.length;i<r;){var o=e[i],s=n[i];if(i++,o._rev!==s._rev||o[t]!==s[t])return!1}return!0}(t.collection.schema.primaryPath,n,t._result.docsData)||(e=!0,t._setResultData(n)),e))));return Promise.resolve(e)}(t))),t._ensureEqualQueue)}function Kz(t,e){if(!e.sort)throw ZO("SNH",{query:e});return{query:e,queryPlan:tY(t,e)}}var zz="_rxdb_internal";async function Jz(t,e){var n=(await t.findDocumentsById([e],!1))[0];return n||void 0}async function qz(t,e,n){var i=await t.bulkWrite([e],n);if(i.error.length>0)throw i.error[0];return iJ(_G(t.schema.primaryKey),[e],i)[0]}function Hz(t){return Object.assign({},...t)}function Vz(t,e,n,i){if(i)throw 409===i.status?ZO("CONFLICT",{collection:t.name,id:e,writeError:i,data:n}):422===i.status?ZO("VD2",{collection:t.name,id:e,writeError:i,data:n}):i}function Wz(t){return{previous:t.previous,document:Zz(t.document)}}function Zz(t){if(!t._attachments||0===Object.keys(t._attachments).length)return t;var e=kO(t);return e._attachments={},Object.entries(t._attachments).forEach((([t,n])=>{var i,r,o;e._attachments[t]=(o=(i=n).data)?{length:(r=o,atob(r).length),digest:i.digest,type:i.type}:i})),e}function Xz(t){return Object.assign({},t,{_meta:kO(t._meta)})}var $z=new WeakMap;function tJ(t,e,n){zO.deepFreezeWhenDevMode(n);var i=_G(e.schema.primaryKey),r={originalStorageInstance:e,schema:e.schema,internals:e.internals,collectionName:e.collectionName,databaseName:e.databaseName,options:e.options,bulkWrite(n,r){for(var o=t.token,s=new Array(n.length),a=cj(),A=0;A<n.length;A++){var l=n[A],c=Xz(l.document);c._meta.lwt=a;var u=l.previous;c._rev=hj(o,u),s[A]={document:c,previous:u}}return nG("preStorageWrite",{storageInstance:this.originalStorageInstance,rows:s}),t.lockedRun((()=>e.bulkWrite(s,r))).then((n=>{var o={error:[]},a=iJ(i,s,n);$z.set(o,a);var A=0===n.error.length?[]:n.error.filter((t=>!(409!==t.status||t.writeRow.previous||t.writeRow.document._deleted||!mG(t.documentInDb)._deleted)||(o.error.push(t),!1)));if(A.length>0){var l=A.map((e=>({previous:e.documentInDb,document:Object.assign({},e.writeRow.document,{_rev:hj(t.token,e.documentInDb)})})));return t.lockedRun((()=>e.bulkWrite(l,r))).then((t=>{UO(o.error,t.error);var e=iJ(i,l,t);return UO(a,e),o}))}return o}))},query:n=>t.lockedRun((()=>e.query(n))),count:n=>t.lockedRun((()=>e.count(n))),findDocumentsById:(n,i)=>t.lockedRun((()=>e.findDocumentsById(n,i))),getAttachmentData:(n,i,r)=>t.lockedRun((()=>e.getAttachmentData(n,i,r))),getChangedDocumentsSince:e.getChangedDocumentsSince?(n,i)=>t.lockedRun((()=>e.getChangedDocumentsSince(mG(n),i))):void 0,cleanup:n=>t.lockedRun((()=>e.cleanup(n))),remove:()=>(t.storageInstances.delete(r),t.lockedRun((()=>e.remove()))),close:()=>(t.storageInstances.delete(r),t.lockedRun((()=>e.close()))),changeStream:()=>e.changeStream(),conflictResultionTasks:()=>e.conflictResultionTasks(),resolveConflictResultionTask(t){if(t.output.isEqual)return e.resolveConflictResultionTask(t);var n=kO(Object.assign({},t.output.documentData,{_meta:CG(),_rev:"",_attachments:{}}));return delete n._meta,delete n._rev,delete n._attachments,e.resolveConflictResultionTask({id:t.id,output:{isEqual:!1,documentData:n}})}};return t.storageInstances.add(r),r}function eJ(t){return!!(t.encrypted&&t.encrypted.length>0||t.attachments&&t.attachments.encrypted)}async function nJ(t,e,n){if(t.getChangedDocumentsSince)return t.getChangedDocumentsSince(e,n);var i=_G(t.schema.primaryKey),r=Kz(t.schema,function(t,e,n){var i=_G(t.schema.primaryKey),r=n?n.lwt:yG,o=n?n.id:"";return yz(t.schema,{selector:{$or:[{"_meta.lwt":{$gt:r}},{"_meta.lwt":{$eq:r},[i]:{$gt:n?o:""}}],"_meta.lwt":{$gte:r}},sort:[{"_meta.lwt":"asc"},{[i]:"asc"}],skip:0,limit:e})}(t,e,n)),o=(await t.query(r)).documents,s=TO(o);return{documents:o,checkpoint:s?{id:s[i],lwt:s._meta.lwt}:n||{id:"",lwt:0}}}function iJ(t,e,n){var i=$z.get(n);if(i)return i;var r=[];if(n.error.length>0){for(var o=new Set,s=0;s<n.error.length;s++){var a=n.error[s];o.add(a.documentId)}for(var A=0;A<e.length;A++){var l=e[A].document;o.has(l[t])||r.push(Zz(l))}}else{r.length=e.length-n.error.length;for(var c=0;c<e.length;c++){var u=e[c].document;r[c]=Zz(u)}}return r}var rJ=function(){function t(t,e,n,i){this.queueByDocId=new Map,this.isRunning=!1,this.storageInstance=t,this.primaryPath=e,this.preWrite=n,this.postWrite=i}var e=t.prototype;return e.addWrite=function(t,e){var n=t[this.primaryPath],i=oj(this.queueByDocId,n,(()=>[]));return new Promise(((n,r)=>{var o={lastKnownDocumentState:t,modifier:e,resolve:n,reject:r};mG(i).push(o),this.triggerRun()}))},e.triggerRun=async function(){if(!0!==this.isRunning&&0!==this.queueByDocId.size){this.isRunning=!0;var t=[],e=this.queueByDocId;this.queueByDocId=new Map,await Promise.all(Array.from(e.entries()).map((async([e,n])=>{var i,r,o,s=(i=n.map((t=>t.lastKnownDocumentState)),r=i[0],o=uj(r._rev),i.forEach((t=>{var e=uj(t._rev);e>o&&(r=t,o=e)})),r),a=s;for(var A of n)try{a=await A.modifier(NO(a))}catch(t){A.reject(t),A.reject=()=>{},A.resolve=()=>{}}try{await this.preWrite(a,s)}catch(t){return void n.forEach((e=>e.reject(t)))}t.push({previous:s,document:a})})));var n=t.length>0?await this.storageInstance.bulkWrite(t,"incremental-write"):{error:[]};return await Promise.all(iJ(this.primaryPath,t,n).map((t=>{var n=t[this.primaryPath];this.postWrite(t),rj(e,n).forEach((e=>e.resolve(t)))}))),n.error.forEach((t=>{var n,i=t.documentId,r=rj(e,i),o=$O(t);if(o){var s=oj(this.queueByDocId,i,(()=>[]));r.reverse().forEach((t=>{t.lastKnownDocumentState=mG(o.documentInDb),mG(s).unshift(t)}))}else{var a=ZO("COL20",{name:tG[(n=t).status],document:n.documentId,writeError:n});r.forEach((t=>t.reject(a)))}})),this.isRunning=!1,this.triggerRun()}},t}();function oJ(t){return async e=>{var n=function(t){return Object.assign({},t,{_meta:void 0,_deleted:void 0,_rev:void 0})}(e);n._deleted=e._deleted;var i=await t(n),r=Object.assign({},i,{_meta:e._meta,_attachments:e._attachments,_rev:e._rev,_deleted:void 0!==i._deleted?i._deleted:e._deleted});return void 0===r._deleted&&(r._deleted=!1),r}}var sJ={get primaryPath(){if(this.isInstanceOfRxDocument)return this.collection.schema.primaryPath},get primary(){var t=this;if(t.isInstanceOfRxDocument)return t._data[t.primaryPath]},get revision(){if(this.isInstanceOfRxDocument)return this._data._rev},get deleted$(){if(this.isInstanceOfRxDocument)return this.$.pipe(hU((t=>t._data._deleted)))},get deleted$$(){var t=this;return t.collection.database.getReactivityFactory().fromObservable(t.deleted$,t.getLatest().deleted,t.collection.database)},get deleted(){if(this.isInstanceOfRxDocument)return this._data._deleted},getLatest(){var t=this.collection._docCache.getLatestDocumentData(this.primary);return this.collection._docCache.getCachedRxDocument(t)},get $(){return this.collection.$.pipe(gU((t=>!t.isLocal)),gU((t=>t.documentId===this.primary)),hU((t=>Aj(t))),UU(this.collection._docCache.getLatestDocumentData(this.primary)),jU(((t,e)=>t._rev===e._rev)),hU((t=>this.collection._docCache.getCachedRxDocument(t))),WU(IG))},get $$(){var t=this;return t.collection.database.getReactivityFactory().fromObservable(t.$,t.getLatest()._data,t.collection.database)},get$(t){if(zO.isDevMode()){if(t.includes(".item."))throw ZO("DOC1",{path:t});if(t===this.primaryPath)throw ZO("DOC2");if(this.collection.schema.finalFields.includes(t))throw ZO("DOC3",{path:t});if(!EG(this.collection.schema.jsonSchema,t))throw ZO("DOC4",{path:t})}return this.$.pipe(hU((e=>pG(e,t))),jU())},get$$(t){var e=this.get$(t);return this.collection.database.getReactivityFactory().fromObservable(e,this.getLatest().get(t),this.collection.database)},populate(t){var e=EG(this.collection.schema.jsonSchema,t),n=this.get(t);if(!n)return tj;if(!e)throw ZO("DOC5",{path:t});if(!e.ref)throw ZO("DOC6",{path:t,schemaObj:e});var i=this.collection.database.collections[e.ref];if(!i)throw ZO("DOC7",{ref:e.ref,path:t,schemaObj:e});return"array"===e.type?i.findByIds(n).exec().then((t=>{var e=t.values();return Array.from(e)})):i.findOne(n).exec()},get(t){return oj(this._propertyCache,t,(()=>{var e=pG(this._data,t);if("object"!=typeof e||null===e||Array.isArray(e))return zO.deepFreezeWhenDevMode(e);var n=this,i=new Proxy(kO(e),{get(e,i){if("string"!=typeof i)return e[i];var r=i.charAt(i.length-1);if(i.endsWith("$$")){var o=i.slice(0,-2);return n.get$$(AG(t+"."+o))}if("$"===r){var s=i.slice(0,-1);return n.get$(AG(t+"."+s))}if("_"===r){var a=i.slice(0,-1);return n.populate(AG(t+"."+a))}return n.get(AG(t+"."+i))}});return i}))},toJSON(t=!1){if(t)return zO.deepFreezeWhenDevMode(this._data);var e=kO(this._data);return delete e._rev,delete e._attachments,delete e._deleted,delete e._meta,zO.deepFreezeWhenDevMode(e)},toMutableJSON(t=!1){return NO(this.toJSON(t))},update(t){throw sj("update")},incrementalUpdate(t){throw sj("update")},updateCRDT(t){throw sj("crdt")},putAttachment(){throw sj("attachments")},getAttachment(){throw sj("attachments")},allAttachments(){throw sj("attachments")},get allAttachments$(){throw sj("attachments")},async modify(t,e){var n=this._data,i=await oJ(t)(n);return this._saveData(i,n)},incrementalModify(t,e){return this.collection.incrementalWriteQueue.addWrite(this._data,oJ(t)).then((t=>this.collection._docCache.getCachedRxDocument(t)))},patch(t){var e=this._data,n=NO(e);return Object.entries(t).forEach((([t,e])=>{n[t]=e})),this._saveData(n,e)},incrementalPatch(t){return this.incrementalModify((e=>(Object.entries(t).forEach((([t,n])=>{e[t]=n})),e)))},async _saveData(t,e){if(t=kO(t),this._data._deleted)throw ZO("DOC11",{id:this.primary,document:this});await AJ(this.collection,t,e);var n=[{previous:e,document:t}],i=await this.collection.storageInstance.bulkWrite(n,"rx-document-save-data"),r=i.error[0];return Vz(this.collection,this.primary,t,r),await this.collection._runHooks("post","save",t,this),this.collection._docCache.getCachedRxDocument(iJ(this.collection.schema.primaryPath,n,i)[0])},remove(){var t=this.collection;if(this.deleted)return Promise.reject(ZO("DOC13",{document:this,id:this.primary}));var e,n=kO(this._data);return t._runHooks("pre","remove",n,this).then((async()=>{n._deleted=!0;var e=[{previous:this._data,document:n}],i=await t.storageInstance.bulkWrite(e,"rx-document-remove"),r=i.error[0];return Vz(t,this.primary,n,r),iJ(this.collection.schema.primaryPath,e,i)[0]})).then((t=>(e=t,this.collection._runHooks("post","remove",n,this)))).then((()=>this.collection._docCache.getCachedRxDocument(e)))},incrementalRemove(){return this.incrementalModify((async t=>(await this.collection._runHooks("pre","remove",t,this),t._deleted=!0,t))).then((async t=>(await this.collection._runHooks("post","remove",t._data,t),t)))},destroy(){throw ZO("DOC14")}};function aJ(t=sJ){var e=function(t,e){this.collection=t,this._data=e,this._propertyCache=new Map,this.isInstanceOfRxDocument=!0};return e.prototype=t,e}function AJ(t,e,n){return e._meta=Object.assign({},n._meta,e._meta),zO.isDevMode()&&t.schema.validateChange(n,e),t._runHooks("pre","save",e,n)}var lJ="collection",cJ="storage-token",uJ="rx-migration-status",hJ=BG({version:0,title:"RxInternalDocument",primaryKey:{key:"id",fields:["context","key"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:200},key:{type:"string"},context:{type:"string",enum:[lJ,cJ,uJ,"OTHER"]},data:{type:"object",additionalProperties:!0}},indexes:[],required:["key","context","data"],additionalProperties:!1,sharding:{shards:1,mode:"collection"}});function gJ(t,e){return vG(hJ,{key:t,context:e})}async function dJ(t){var e=Kz(t.schema,{selector:{context:lJ,_deleted:{$eq:!1}},sort:[{id:"asc"}],skip:0});return(await t.query(e)).documents}var pJ="storageToken",fJ=gJ(pJ,cJ);async function mJ(t,e,n){if(t.schema.version!==n.version)throw ZO("SNH",{schema:n,version:t.schema.version,name:t.name,collection:t,args:{storageCollectionName:e}});for(var i=gJ(IJ(t.name,t.schema.jsonSchema),lJ);;){var r=await Jz(t.database.internalStore,i),o=NO(mG(r));if(o.data.connectedStorages.find((t=>t.collectionName===e&&t.schema.version===n.version)))return;o.data.connectedStorages.push({collectionName:e,schema:n});try{await qz(t.database.internalStore,{previous:mG(r),document:o},"add-connected-storage-to-collection")}catch(t){if(!$O(t))throw t}}}function IJ(t,e){return t+"-"+e.version}function yJ(t,e){return e=function(t,e){for(var n=Object.keys(t.defaultValues),i=0;i<n.length;++i){var r=n[i];Object.prototype.hasOwnProperty.call(e,r)&&void 0!==e[r]||(e[r]=t.defaultValues[r])}return e}(t,e=kO(e)),"string"!=typeof t.jsonSchema.primaryKey&&(e=function(t,e,n){if("string"==typeof e.primaryKey)return n;var i=vG(e,n),r=n[t];if(r&&r!==i)throw ZO("DOC19",{args:{documentData:n,existingPrimary:r,newPrimary:i},schema:e});return n[t]=i,n}(t.primaryPath,t.jsonSchema,e)),e._meta=CG(),Object.prototype.hasOwnProperty.call(e,"_deleted")||(e._deleted=!1),Object.prototype.hasOwnProperty.call(e,"_attachments")||(e._attachments={}),Object.prototype.hasOwnProperty.call(e,"_rev")||(e._rev=""),e}async function CJ(t,e,n,i,r,o,s){var a=(await dJ(e)).filter((t=>t.data.name===r)),A=[];a.forEach((t=>{A.push({collectionName:t.data.name,schema:t.data.schema,isCollection:!0}),t.data.connectedStorages.forEach((t=>A.push({collectionName:t.collectionName,isCollection:!1,schema:t.schema})))}));var l=new Set;if(A=A.filter((t=>{var e=t.collectionName+"||"+t.schema.version;return!l.has(e)&&(l.add(e),!0)})),await Promise.all(A.map((async e=>{var s=await t.createStorageInstance({collectionName:e.collectionName,databaseInstanceToken:n,databaseName:i,multiInstance:!1,options:{},schema:e.schema,password:o,devMode:zO.isDevMode()});await s.remove(),e.isCollection&&await iG("postRemoveRxCollection",{storage:t,databaseName:i,collectionName:r})}))),s){var c=a.map((t=>{var e=Xz(t);return e._deleted=!0,e._meta.lwt=cj(),e._rev=hj(n,t),{previous:t,document:e}}));await e.bulkWrite(c,"rx-database-remove-collection-all")}}function EJ(t){if(t.destroyed)throw ZO("COL21",{collection:t.name,version:t.schema.version})}var _J=function(){function t(t){this.subs=[],this.counter=0,this.eventCounterMap=new WeakMap,this.buffer=[],this.limit=100,this.tasks=new Set,this.collection=t,this.subs.push(this.collection.database.eventBulks$.pipe(gU((t=>t.collectionName===this.collection.name)),gU((t=>!t.events[0].isLocal))).subscribe((t=>{this.tasks.add((()=>this._handleChangeEvents(t.events))),this.tasks.size<=1&&nj().then((()=>{this.processTasks()}))})))}var e=t.prototype;return e.processTasks=function(){0!==this.tasks.size&&(Array.from(this.tasks).forEach((t=>t())),this.tasks.clear())},e._handleChangeEvents=function(t){var e=this.counter;this.counter=this.counter+t.length,t.length>this.limit?this.buffer=t.slice(-1*t.length):(UO(this.buffer,t),this.buffer=this.buffer.slice(-1*this.limit));for(var n=e+1,i=this.eventCounterMap,r=0;r<t.length;r++){var o=t[r];i.set(o,n+r)}},e.getCounter=function(){return this.processTasks(),this.counter},e.getBuffer=function(){return this.processTasks(),this.buffer},e.getArrayIndexByPointer=function(t){this.processTasks();var e=this.buffer[0],n=this.eventCounterMap.get(e);return t<n?null:t-n},e.getFrom=function(t){this.processTasks();var e=[],n=this.getArrayIndexByPointer(t);if(null===n)return null;for(;;){var i=this.buffer[n];if(n++,!i)return e;e.push(i)}},e.runFrom=function(t,e){this.processTasks();var n=this.getFrom(t);if(null===n)throw new Error("out of bounds");n.forEach((t=>e(t)))},e.reduceByLastOfDoc=function(t){return this.processTasks(),t.slice(0)},e.destroy=function(){this.tasks.clear(),this.subs.forEach((t=>t.unsubscribe()))},t}();var vJ=new WeakMap;function BJ(t){var e=t.schema.getDocumentPrototype(),n=function(t){var e={};return Object.entries(t.methods).forEach((([t,n])=>{e[t]=n})),e}(t),i={};return[e,n,sJ].forEach((t=>{Object.getOwnPropertyNames(t).forEach((e=>{var n=Object.getOwnPropertyDescriptor(t,e),r=!0;(e.startsWith("_")||e.endsWith("_")||e.startsWith("$")||e.endsWith("$"))&&(r=!1),"function"==typeof n.value?Object.defineProperty(i,e,{get(){return n.value.bind(this)},enumerable:r,configurable:!1}):(n.enumerable=r,n.configurable=!1,n.writable&&(n.writable=!1),Object.defineProperty(i,e,n))}))})),i}function wJ(t,e,n){var i=function(t,e,n){var i=new t(e,n);return nG("createRxDocument",i),i}(e,t,zO.deepFreezeWhenDevMode(n));return t._runHooksSync("post","create",n,i),nG("postCreateRxDocument",i),i}var bJ=function(t,e){return MO(Zz(t.newDocumentState),Zz(t.realMasterState))?Promise.resolve({isEqual:!0}):Promise.resolve({isEqual:!1,documentData:t.realMasterState})};var QJ=["pre","post"],xJ=["insert","save","remove","create"],DJ=!1,SJ=function(){function t(t,e,n,i,r={},o={},s={},a={},A={},l=Mz,c={},u=bJ){this.storageInstance={},this.timeouts=new Set,this.incrementalWriteQueue={},this.awaitBeforeReads=new Set,this._incrementalUpsertQueues=new Map,this.synced=!1,this.hooks={},this._subs=[],this._docCache={},this._queryCache=new bz,this.$={},this.checkpoint$={},this._changeEventBuffer={},this.onDestroy=[],this.destroyed=!1,this.onRemove=[],this.database=t,this.name=e,this.schema=n,this.internalStorageInstance=i,this.instanceCreationOptions=r,this.migrationStrategies=o,this.methods=s,this.attachments=a,this.options=A,this.cacheReplacementPolicy=l,this.statics=c,this.conflictHandler=u,function(t){if(DJ)return;DJ=!0;var e=Object.getPrototypeOf(t);xJ.forEach((t=>{QJ.map((n=>{var i=n+aG(t);e[i]=function(e,i){return this.addHook(n,t,e,i)}}))}))}(this.asRxCollection)}var e=t.prototype;return e.prepare=async function(){this.storageInstance=tJ(this.database,this.internalStorageInstance,this.schema.jsonSchema),this.incrementalWriteQueue=new rJ(this.storageInstance,this.schema.primaryPath,((t,e)=>AJ(this,t,e)),(t=>this._runHooks("post","save",t)));var t,e,n=this.database.eventBulks$.pipe((0,gj.filter)((t=>t.collectionName===this.name)));this.$=n.pipe((0,gj.mergeMap)((t=>t.events))),this.checkpoint$=n.pipe((0,gj.map)((t=>t.checkpoint))),this._changeEventBuffer=(t=this.asRxCollection,new _J(t)),this._docCache=new Nz(this.schema.primaryPath,this.database.eventBulks$.pipe((0,gj.filter)((t=>t.collectionName===this.name&&!t.events[0].isLocal)),(0,gj.map)((t=>t.events))),(t=>{var n;return e||(n=this.asRxCollection,e=oj(vJ,n,(()=>aJ(BJ(n))))),wJ(this.asRxCollection,e,t)}));var i=this.database.internalStore.changeStream().pipe((0,gj.filter)((t=>{var e=this.name+"-"+this.schema.version;return!!t.events.find((t=>"collection"===t.documentData.context&&t.documentData.key===e&&"DELETE"===t.operation))}))).subscribe((async()=>{await this.destroy(),await Promise.all(this.onRemove.map((t=>t())))}));this._subs.push(i);var r=await this.database.storageToken,o=this.storageInstance.changeStream().subscribe((t=>{for(var e=new Array(t.events.length),n=t.events,i=this.name,o=zO.deepFreezeWhenDevMode,s=0;s<n.length;s++){var a=n[s];e[s]={documentId:a.documentId,collectionName:i,isLocal:!1,operation:a.operation,documentData:o(a.documentData),previousDocumentData:o(a.previousDocumentData)}}var A={id:t.id,internal:!1,collectionName:this.name,storageToken:r,events:e,databaseToken:this.database.token,checkpoint:t.checkpoint,context:t.context,endTime:t.endTime,startTime:t.startTime};this.database.$emit(A)}));return this._subs.push(o),this._subs.push(this.storageInstance.conflictResultionTasks().subscribe((t=>{this.conflictHandler(t.input,t.context).then((e=>{this.storageInstance.resolveConflictResultionTask({id:t.id,output:e})}))}))),ej},e.cleanup=function(t){throw EJ(this),sj("cleanup")},e.migrationNeeded=function(){throw sj("migration-schema")},e.getMigrationState=function(){throw sj("migration-schema")},e.startMigration=function(t=10){return EJ(this),this.getMigrationState().startMigration(t)},e.migratePromise=function(t=10){return this.getMigrationState().migratePromise(t)},e.insert=async function(t){EJ(this);var e=await this.bulkInsert([t]),n=e.error[0];return Vz(this,t[this.schema.primaryPath],t,n),mG(e.success[0])},e.bulkInsert=async function(t){if(EJ(this),0===t.length)return{success:[],error:[]};var e,n=this.schema.primaryPath;if(this.hasHooks("pre","insert"))e=await Promise.all(t.map((t=>{var e=yJ(this.schema,t);return this._runHooks("pre","insert",e).then((()=>({document:e})))})));else{e=new Array(t.length);for(var i=this.schema,r=0;r<t.length;r++){var o=yJ(i,t[r]);e[r]={document:o}}}var s,a=await this.storageInstance.bulkWrite(e,"rx-collection-bulk-insert"),A=this,l={get success(){if(!s){var t=iJ(A.schema.primaryPath,e,a);s=Tz(A._docCache,t)}return s},error:a.error};if(this.hasHooks("post","insert")){var c=new Map;e.forEach((t=>{var e=t.document;c.set(e[n],e)})),await Promise.all(l.success.map((t=>this._runHooks("post","insert",c.get(t.primary),t))))}return l},e.bulkRemove=async function(t){EJ(this);var e=this.schema.primaryPath;if(0===t.length)return{success:[],error:[]};var n=await this.findByIds(t).exec(),i=[],r=new Map;Array.from(n.values()).forEach((t=>{var e=t.toMutableJSON(!0);i.push(e),r.set(t.primary,e)})),await Promise.all(i.map((t=>{var e=t[this.schema.primaryPath];return this._runHooks("pre","remove",t,n.get(e))})));var o=i.map((t=>{var e=kO(t);return e._deleted=!0,{previous:t,document:e}})),s=await this.storageInstance.bulkWrite(o,"rx-collection-bulk-remove"),a=iJ(this.schema.primaryPath,o,s).map((t=>t[e]));return await Promise.all(a.map((t=>this._runHooks("post","remove",r.get(t),n.get(t))))),{success:a.map((t=>rj(n,t))),error:s.error}},e.bulkUpsert=async function(t){EJ(this);var e=[],n=new Map;t.forEach((t=>{var i=yJ(this.schema,t),r=i[this.schema.primaryPath];if(!r)throw ZO("COL3",{primaryPath:this.schema.primaryPath,data:i,schema:this.schema.jsonSchema});n.set(r,i),e.push(i)}));var i=await this.bulkInsert(e),r=i.success.slice(0),o=[];return await Promise.all(i.error.map((async t=>{if(409!==t.status)o.push(t);else{var e=t.documentId,i=rj(n,e),s=mG(t.documentInDb),a=this._docCache.getCachedRxDocuments([s])[0],A=await a.incrementalModify((()=>i));r.push(A)}}))),{error:o,success:r}},e.upsert=async function(t){EJ(this);var e=await this.bulkUpsert([t]);return Vz(this.asRxCollection,t[this.schema.primaryPath],t,e.error[0]),e.success[0]},e.incrementalUpsert=function(t){EJ(this);var e=yJ(this.schema,t),n=e[this.schema.primaryPath];if(!n)throw ZO("COL4",{data:t});var i=this._incrementalUpsertQueues.get(n);return i||(i=ej),i=i.then((()=>function(t,e,n){var i=t._docCache.getLatestDocumentDataIfExists(e);if(i)return Promise.resolve({doc:t._docCache.getCachedRxDocuments([i])[0],inserted:!1});return t.findOne(e).exec().then((e=>e?{doc:e,inserted:!1}:t.insert(n).then((t=>({doc:t,inserted:!0})))))}(this,n,e))).then((t=>t.inserted?t.doc:function(t,e){return t.incrementalModify((t=>e))}(t.doc,e))),this._incrementalUpsertQueues.set(n,i),i},e.find=function(t){if(EJ(this),"string"==typeof t)throw ZO("COL5",{queryObj:t});return t||(t={selector:{}}),Uz("find",t,this)},e.findOne=function(t){if(EJ(this),"number"==typeof t||Array.isArray(t))throw XO("COL6",{queryObj:t});var e;if("string"==typeof t)e=Uz("findOne",{selector:{[this.schema.primaryPath]:t},limit:1},this);else{if(t||(t={selector:{}}),t.limit)throw ZO("QU6");(t=kO(t)).limit=1,e=Uz("findOne",t,this)}return e},e.count=function(t){return EJ(this),t||(t={selector:{}}),Uz("count",t,this)},e.findByIds=function(t){return EJ(this),Uz("findByIds",{selector:{[this.schema.primaryPath]:{$in:t.slice(0)}}},this)},e.exportJSON=function(){throw sj("json-dump")},e.importJSON=function(t){throw sj("json-dump")},e.insertCRDT=function(t){throw sj("crdt")},e.addPipeline=function(t){throw sj("pipeline")},e.addHook=function(t,e,n,i=!1){if("function"!=typeof n)throw XO("COL7",{key:e,when:t});if(!QJ.includes(t))throw XO("COL8",{key:e,when:t});if(!xJ.includes(e))throw ZO("COL9",{key:e});if("post"===t&&"create"===e&&!0===i)throw ZO("COL10",{when:t,key:e,parallel:i});var r=n.bind(this),o=i?"parallel":"series";this.hooks[e]=this.hooks[e]||{},this.hooks[e][t]=this.hooks[e][t]||{series:[],parallel:[]},this.hooks[e][t][o].push(r)},e.getHooks=function(t,e){return this.hooks[e]&&this.hooks[e][t]?this.hooks[e][t]:{series:[],parallel:[]}},e.hasHooks=function(t,e){if(!this.hooks[e]||!this.hooks[e][t])return!1;var n=this.getHooks(t,e);return!!n&&(n.series.length>0||n.parallel.length>0)},e._runHooks=function(t,e,n,i){var r=this.getHooks(t,e);return r?function(t,e){return t.reduce(((t,e)=>t.then(e)),Promise.resolve(e))}(r.series.map((t=>()=>t(n,i)))).then((()=>Promise.all(r.parallel.map((t=>t(n,i)))))):ej},e._runHooksSync=function(t,e,n,i){if(this.hasHooks(t,e)){var r=this.getHooks(t,e);r&&r.series.forEach((t=>t(n,i)))}},e.promiseWait=function(t){return new Promise((e=>{var n=setTimeout((()=>{this.timeouts.delete(n),e()}),t);this.timeouts.add(n)}))},e.destroy=async function(){return this.destroyed?$U:(await Promise.all(this.onDestroy.map((t=>t()))),this.destroyed=!0,Array.from(this.timeouts).forEach((t=>clearTimeout(t))),this._changeEventBuffer&&this._changeEventBuffer.destroy(),this.database.requestIdlePromise().then((()=>this.storageInstance.close())).then((()=>(this._subs.forEach((t=>t.unsubscribe())),delete this.database.collections[this.name],iG("postDestroyRxCollection",this).then((()=>!0))))))},e.remove=async function(){await this.destroy(),await Promise.all(this.onRemove.map((t=>t()))),await CJ(this.database.storage,this.database.internalStore,this.database.token,this.database.name,this.name,this.database.password,this.database.hashFunction)},SO(t,[{key:"insert$",get:function(){return this.$.pipe((0,gj.filter)((t=>"INSERT"===t.operation)))}},{key:"update$",get:function(){return this.$.pipe((0,gj.filter)((t=>"UPDATE"===t.operation)))}},{key:"remove$",get:function(){return this.$.pipe((0,gj.filter)((t=>"DELETE"===t.operation)))}},{key:"asRxCollection",get:function(){return this}}])}();var MJ=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this._parallels=t||1,this._qC=0,this._iC=new Set,this._lHN=0,this._hPM=new Map,this._pHM=new Map};function kJ(t,e){if(e){if(e._timeoutObj&&clearTimeout(e._timeoutObj),t._pHM.has(e)){var n=t._pHM.get(e);t._hPM.delete(n),t._pHM.delete(e)}t._iC.delete(e)}}function RJ(t){t._tryIR||0===t._iC.size||(t._tryIR=!0,setTimeout((function(){t.isIdle()?setTimeout((function(){t.isIdle()?(!function(t){0!==t._iC.size&&(t._iC.values().next().value._manRes(),setTimeout((function(){return RJ(t)}),0))}(t),t._tryIR=!1):t._tryIR=!1}),0):t._tryIR=!1}),0))}MJ.prototype={isIdle:function(){return this._qC<this._parallels},lock:function(){this._qC++},unlock:function(){this._qC--,RJ(this)},wrapCall:function(t){var e,n=this;this.lock();try{e=t()}catch(t){throw this.unlock(),t}return e.then&&"function"==typeof e.then?e.then((function(t){return n.unlock(),t})).catch((function(t){throw n.unlock(),t})):(this.unlock(),e)},requestIdlePromise:function(t){var e,n=this;t=t||{};var i=new Promise((function(t){return e=t}));if(i._manRes=function(){kJ(n,i),e()},t.timeout){var r=setTimeout((function(){i._manRes()}),t.timeout);i._timeoutObj=r}return this._iC.add(i),RJ(this),i},cancelIdlePromise:function(t){kJ(this,t)},requestIdleCallback:function(t,e){var n=this._lHN++,i=this.requestIdlePromise(e);return this._hPM.set(n,i),this._pHM.set(i,n),i.then((function(){return t()})),n},cancelIdleCallback:function(t){var e=this._hPM.get(t);this.cancelIdlePromise(e)},clear:function(){var t=this;this._iC.forEach((function(e){return kJ(t,e)})),this._qC=0,this._iC.clear(),this._hPM=new Map,this._pHM=new Map}};var NJ="15.31.4";Object.freeze({ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1,excludeKeys:void 0,excludeValues:void 0,replacer:void 0});Object.freeze(["prototype","__proto__","constructor"]);const PJ="[native code] }";PJ.length;class TJ{constructor(t,e){t=this.words=t||[],this.sigBytes=void 0===e?4*t.length:e}toString(t){return(t||LJ).stringify(this)}concat(t){if(this.clamp(),this.sigBytes%4)for(let e=0;e<t.sigBytes;e++){const n=t.words[e>>>2]>>>24-e%4*8&255;this.words[this.sigBytes+e>>>2]|=n<<24-(this.sigBytes+e)%4*8}else for(let e=0;e<t.sigBytes;e+=4)this.words[this.sigBytes+e>>>2]=t.words[e>>>2];return this.sigBytes+=t.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new TJ([...this.words])}}const LJ={stringify(t){const e=[];for(let n=0;n<t.sigBytes;n++){const i=t.words[n>>>2]>>>24-n%4*8&255;e.push((i>>>4).toString(16),(15&i).toString(16))}return e.join("")}},FJ={parse(t){const e=t.length,n=[];for(let i=0;i<e;i++)n[i>>>2]|=(255&t.charCodeAt(i))<<24-i%4*8;return new TJ(n,e)}},OJ={parse:t=>FJ.parse(unescape(encodeURIComponent(t)))};class GJ{constructor(){this._data=new TJ,this._nDataBytes=0,this._minBufferSize=0,this.blockSize=16}reset(){this._data=new TJ,this._nDataBytes=0}_append(t){"string"==typeof t&&(t=OJ.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes}_doProcessBlock(t,e){}_process(t){let e,n=this._data.sigBytes/(4*this.blockSize);n=t?Math.ceil(n):Math.max((0|n)-this._minBufferSize,0);const i=n*this.blockSize,r=Math.min(4*i,this._data.sigBytes);if(i){for(let t=0;t<i;t+=this.blockSize)this._doProcessBlock(this._data.words,t);e=this._data.words.splice(0,i),this._data.sigBytes-=r}return new TJ(e,r)}}class UJ extends GJ{update(t){return this._append(t),this._process(),this}finalize(t){t&&this._append(t)}}const jJ=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],YJ=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],KJ=[];class zJ extends UJ{constructor(){super(...arguments),this._hash=new TJ([...jJ])}reset(){super.reset(),this._hash=new TJ([...jJ])}_doProcessBlock(t,e){const n=this._hash.words;let i=n[0],r=n[1],o=n[2],s=n[3],a=n[4],A=n[5],l=n[6],c=n[7];for(let n=0;n<64;n++){if(n<16)KJ[n]=0|t[e+n];else{const t=KJ[n-15],e=(t<<25|t>>>7)^(t<<14|t>>>18)^t>>>3,i=KJ[n-2],r=(i<<15|i>>>17)^(i<<13|i>>>19)^i>>>10;KJ[n]=e+KJ[n-7]+r+KJ[n-16]}const u=i&r^i&o^r&o,h=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),g=c+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&A^~a&l)+YJ[n]+KJ[n];c=l,l=A,A=a,a=s+g|0,s=o,o=r,r=i,i=g+(h+u)|0}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+A|0,n[6]=n[6]+l|0,n[7]=n[7]+c|0}finalize(t){super.finalize(t);const e=8*this._nDataBytes,n=8*this._data.sigBytes;return this._data.words[n>>>5]|=128<<24-n%32,this._data.words[14+(n+64>>>9<<4)]=Math.floor(e/4294967296),this._data.words[15+(n+64>>>9<<4)]=e,this._data.sigBytes=4*this._data.words.length,this._process(),this._hash}}var JJ="undefined"!=typeof crypto&&void 0!==crypto.subtle&&"function"==typeof crypto.subtle.digest?async function(t){var e=(new TextEncoder).encode(t),n=await crypto.subtle.digest("SHA-256",e),i=Array.prototype.map.call(new Uint8Array(n),(t=>("00"+t.toString(16)).slice(-2))).join("");return i}:function(t){return Promise.resolve(function(t){return(new zJ).finalize(t).toString()}(t))};class qJ{ttl;map=new Map;_to=!1;constructor(t){this.ttl=t}has(t){return this.map.has(t)}add(t){this.map.set(t,HJ()),this._to||(this._to=!0,setTimeout((()=>{this._to=!1,function(t){const e=HJ()-t.ttl,n=t.map[Symbol.iterator]();for(;;){const i=n.next().value;if(!i)return;const r=i[0];if(!(i[1]<e))return;t.map.delete(r)}}(this)}),0))}clear(){this.map.clear()}}function HJ(){return Date.now()}var VJ=new Set,WJ=function(){function t(t,e,n,i,r,o,s=!1,a={},A,l,c,u,h){this.idleQueue=new MJ,this.rxdbVersion=NJ,this.storageInstances=new Set,this._subs=[],this.startupErrors=[],this.onDestroy=[],this.destroyed=!1,this.collections={},this.states={},this.eventBulks$=new gj.Subject,this.observable$=this.eventBulks$.pipe(MU((t=>t.events))),this.storageToken=$U,this.storageTokenDocument=$U,this.emittedEventBulkIds=new qJ(6e4),this.name=t,this.token=e,this.storage=n,this.instanceCreationOptions=i,this.password=r,this.multiInstance=o,this.eventReduce=s,this.options=a,this.internalStore=A,this.hashFunction=l,this.cleanupPolicy=c,this.allowSlowCount=u,this.reactivity=h,"pseudoInstance"!==this.name&&(this.internalStore=tJ(this.asRxDatabase,A,hJ),this.storageTokenDocument=async function(t){var e=sG(10),n=t.password?await t.hashFunction(JSON.stringify(t.password)):void 0,i=[{document:{id:fJ,context:cJ,key:pJ,data:{rxdbVersion:t.rxdbVersion,token:e,instanceToken:t.token,passwordHash:n},_deleted:!1,_meta:CG(),_rev:"",_attachments:{}}}],r=await t.internalStore.bulkWrite(i,"internal-add-storage-token");if(!r.error[0])return iJ("id",i,r)[0];var o=mG(r.error[0]);if(o.isError&&$O(o)){var s=o;if(a=s.documentInDb.data.rxdbVersion,A=t.rxdbVersion,!a||A.includes("beta")&&A!==a||a.split(".")[0]!==A.split(".")[0])throw ZO("DM5",{args:{database:t.name,databaseStateVersion:s.documentInDb.data.rxdbVersion,codeVersion:t.rxdbVersion}});if(n&&n!==s.documentInDb.data.passwordHash)throw ZO("DB1",{passwordHash:n,existingPasswordHash:s.documentInDb.data.passwordHash});return mG(s.documentInDb)}var a,A;throw o}(this.asRxDatabase).catch((t=>this.startupErrors.push(t))),this.storageToken=this.storageTokenDocument.then((t=>t.data.token)).catch((t=>this.startupErrors.push(t))))}var e=t.prototype;return e.getReactivityFactory=function(){if(!this.reactivity)throw ZO("DB14",{database:this.name});return this.reactivity},e.$emit=function(t){this.emittedEventBulkIds.has(t.id)||(this.emittedEventBulkIds.add(t.id),this.eventBulks$.next(t))},e.removeCollectionDoc=async function(t,e){var n=await Jz(this.internalStore,gJ(IJ(t,e),lJ));if(!n)throw ZO("SNH",{name:t,schema:e});var i=Xz(n);i._deleted=!0,await this.internalStore.bulkWrite([{document:i,previous:n}],"rx-database-remove-collection")},e.addCollections=async function(t){var e={},n={},i=[],r={};await Promise.all(Object.entries(t).map((async([t,o])=>{var s=t,a=o.schema;e[s]=a;var A=xG(a,this.hashFunction);if(n[s]=A,this.collections[t])throw ZO("DB3",{name:t});var l=IJ(t,a),c={id:gJ(l,lJ),key:l,context:lJ,data:{name:s,schemaHash:await A.hash,schema:A.jsonSchema,version:A.version,connectedStorages:[]},_deleted:!1,_meta:CG(),_rev:"",_attachments:{}};i.push({document:c});var u=Object.assign({},o,{name:s,schema:A,database:this}),h=kO(o);h.database=this,h.name=t,nG("preCreateRxCollection",h),u.conflictHandler=h.conflictHandler,r[s]=u})));var o=await this.internalStore.bulkWrite(i,"rx-database-add-collection");await async function(t){if(await t.storageToken,t.startupErrors[0])throw t.startupErrors[0]}(this),await Promise.all(o.error.map((async t=>{if(409!==t.status)throw ZO("DB12",{database:this.name,writeError:t});var i=mG(t.documentInDb),r=i.data.name,o=n[r];if(i.data.schemaHash!==await o.hash)throw ZO("DB6",{database:this.name,collection:r,previousSchemaHash:i.data.schemaHash,schemaHash:await o.hash,previousSchema:i.data.schema,schema:mG(e[r])})})));var s={};return await Promise.all(Object.keys(t).map((async t=>{var e=r[t],n=await function({database:t,name:e,schema:n,instanceCreationOptions:i={},migrationStrategies:r={},autoMigrate:o=!0,statics:s={},methods:a={},attachments:A={},options:l={},localDocuments:c=!1,cacheReplacementPolicy:u=Mz,conflictHandler:h=bJ}){var g={databaseInstanceToken:t.token,databaseName:t.name,collectionName:e,schema:n.jsonSchema,options:i,multiInstance:t.multiInstance,password:t.password,devMode:zO.isDevMode()};return nG("preCreateRxStorageInstance",g),async function(t,e){return e.multiInstance=t.multiInstance,await t.storage.createStorageInstance(e)}(t,g).then((g=>{var d=new SJ(t,e,n,g,i,r,a,A,l,u,s,h);return d.prepare().then((()=>{Object.entries(s).forEach((([t,e])=>{Object.defineProperty(d,t,{get:()=>e.bind(d)})}));var t=ej;return o&&0!==d.schema.version&&(t=d.migratePromise()),t})).then((()=>(nG("createRxCollection",{collection:d,creator:{name:e,schema:n,storageInstance:g,instanceCreationOptions:i,migrationStrategies:r,methods:a,attachments:A,options:l,cacheReplacementPolicy:u,localDocuments:c,statics:s}}),d))).catch((t=>g.close().then((()=>Promise.reject(t)))))}))}(e);s[t]=n,this.collections[t]=n,this[t]||Object.defineProperty(this,t,{get:()=>this.collections[t]})}))),s},e.lockedRun=function(t){return this.idleQueue.wrapCall(t)},e.requestIdlePromise=function(){return this.idleQueue.requestIdlePromise()},e.exportJSON=function(t){throw sj("json-dump")},e.addState=function(t){throw sj("state")},e.importJSON=function(t){throw sj("json-dump")},e.backup=function(t){throw sj("backup")},e.leaderElector=function(){throw sj("leader-election")},e.isLeader=function(){throw sj("leader-election")},e.waitForLeadership=function(){throw sj("leader-election")},e.migrationStates=function(){throw sj("migration-schema")},e.destroy=async function(){return this.destroyed?$U:(this.destroyed=!0,await iG("preDestroyRxDatabase",this),this.eventBulks$.complete(),this._subs.map((t=>t.unsubscribe())),"pseudoInstance"===this.name?$U:this.requestIdlePromise().then((()=>Promise.all(this.onDestroy.map((t=>t()))))).then((()=>Promise.all(Object.keys(this.collections).map((t=>this.collections[t])).map((t=>t.destroy()))))).then((()=>this.internalStore.close())).then((()=>VJ.delete(this.storage.name+"|"+this.name))).then((()=>!0)))},e.remove=function(){return this.destroy().then((()=>async function(t,e,n){var i=sG(10),r=await ZJ(i,e,t,{},!1,n),o=await dJ(r),s=new Set;o.forEach((t=>s.add(t.data.name)));var a=Array.from(s);return await Promise.all(a.map((o=>CJ(e,r,i,t,o,n)))),await iG("postRemoveRxDatabase",{databaseName:t,storage:e}),await r.remove(),a}(this.name,this.storage,this.password)))},SO(t,[{key:"$",get:function(){return this.observable$}},{key:"asRxDatabase",get:function(){return this}}])}();async function ZJ(t,e,n,i,r,o){return await e.createStorageInstance({databaseInstanceToken:t,databaseName:n,collectionName:zz,schema:hJ,options:i,multiInstance:r,password:o,devMode:zO.isDevMode()})}function XJ({storage:t,instanceCreationOptions:e,name:n,password:i,multiInstance:r=!0,eventReduce:o=!0,ignoreDuplicate:s=!1,options:a={},cleanupPolicy:A,allowSlowCount:l=!1,localDocuments:c=!1,hashFunction:u=JJ,reactivity:h}){nG("preCreateRxDatabase",{storage:t,instanceCreationOptions:e,name:n,password:i,multiInstance:r,eventReduce:o,ignoreDuplicate:s,options:a,localDocuments:c}),s||function(t,e){var n=e.name+"|"+t;if(VJ.has(n))throw ZO("DB8",{name:t,storage:e.name,link:"https://rxdb.info/rx-database.html#ignoreduplicate"})}(n,t),VJ.add(t.name+"|"+n);var g=sG(10);return ZJ(g,t,n,e,r,i).catch((e=>{throw VJ.delete(t.name+"|"+n),e})).then((d=>{var p=new WJ(n,g,t,e,i,r,o,a,d,u,A,l,h);return iG("createRxDatabase",{database:p,creator:{storage:t,instanceCreationOptions:e,name:n,password:i,multiInstance:r,eventReduce:o,ignoreDuplicate:s,options:a,localDocuments:c}}).then((()=>p))}))}var $J={RxSchema:QG.prototype,RxDocument:sJ,RxQuery:Gz.prototype,RxCollection:SJ.prototype,RxDatabase:WJ.prototype},tq=new Set,eq=new Set;function nq(t){if(nG("preAddRxPlugin",{plugin:t,plugins:tq}),!tq.has(t)){if(eq.has(t.name))throw ZO("PL3",{name:t.name,plugin:t});if(tq.add(t),eq.add(t.name),!t.rxdb)throw XO("PL1",{plugin:t});t.init&&t.init(),t.prototypes&&Object.entries(t.prototypes).forEach((([t,e])=>e($J[t]))),t.overwritable&&Object.assign(zO,t.overwritable),t.hooks&&Object.entries(t.hooks).forEach((([t,e])=>{e.after&&eG[t].push(e.after),e.before&&eG[t].unshift(e.before)}))}}async function iq(t){var e=function(t){var e=t.version?t.version:0,n=0;return new Array(e).fill(0).map((()=>n++))}(t.collection.schema.jsonSchema).map((e=>t.collection.name+"-"+e)),n=await t.database.internalStore.findDocumentsById(e.map((t=>gJ(t,lJ))),!1);if(n.length>1)throw new Error("more than one old collection meta found");return n[0]}function rq(t,e,n){var i=kO(n._attachments),r=NO(n),o=r._meta;delete r._meta,r._attachments=i;for(var s=e+1,a=Promise.resolve(r),A=function(){var e=s;a=a.then((n=>function(t,e,n){return null===n?tj:ZU(t.migrationStrategies[e](n,t))}(t,e,n))),s++};s<=t.schema.version;)A();return a.then((t=>null===t?tj:(t._meta=o,t)))}async function oq(t){return 0===t.collection.schema.version?$U:!!await iq(t)}var sq=new WeakMap;function aq(t){return oj(sq,t,(()=>new gj.BehaviorSubject([])))}Promise.resolve(!1);var Aq=Promise.resolve(!0),lq=Promise.resolve();function cq(t,e){return t||(t=0),new Promise((function(n){return setTimeout((function(){return n(e)}),t)}))}function uq(){return Math.random().toString(36).substring(2)}var hq=0;function gq(){var t=1e3*Date.now();return t<=hq&&(t=hq+1),hq=t,t}var dq={create:function(t){var e={time:gq(),messagesCallback:null,bc:new BroadcastChannel(t),subFns:[]};return e.bc.onmessage=function(t){e.messagesCallback&&e.messagesCallback(t.data)},e},close:function(t){t.bc.close(),t.subFns=[]},onMessage:function(t,e){t.messagesCallback=e},postMessage:function(t,e){try{return t.bc.postMessage(e,!1),lq}catch(t){return Promise.reject(t)}},canBeUsed:function(){if("undefined"!=typeof globalThis&&globalThis.Deno&&globalThis.Deno.args)return!0;if("undefined"==typeof window&&"undefined"==typeof self||"function"!=typeof BroadcastChannel)return!1;if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0},type:"native",averageResponseTime:function(){return 150},microSeconds:gq};function pq(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=JSON.parse(JSON.stringify(t));return void 0===e.webWorkerSupport&&(e.webWorkerSupport=!0),e.idb||(e.idb={}),e.idb.ttl||(e.idb.ttl=45e3),e.idb.fallbackInterval||(e.idb.fallbackInterval=150),t.idb&&"function"==typeof t.idb.onclose&&(e.idb.onclose=t.idb.onclose),e.localstorage||(e.localstorage={}),e.localstorage.removeTimeout||(e.localstorage.removeTimeout=6e4),t.methods&&(e.methods=t.methods),e.node||(e.node={}),e.node.ttl||(e.node.ttl=12e4),e.node.maxParallelWrites||(e.node.maxParallelWrites=2048),void 0===e.node.useFastPath&&(e.node.useFastPath=!0),e}var fq="pubkey.broadcast-channel-0-",mq="messages",Iq={durability:"relaxed"};function yq(){if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof window){if(void 0!==window.mozIndexedDB)return window.mozIndexedDB;if(void 0!==window.webkitIndexedDB)return window.webkitIndexedDB;if(void 0!==window.msIndexedDB)return window.msIndexedDB}return!1}function Cq(t){t.commit&&t.commit()}function Eq(t,e){var n=t.transaction(mq,"readonly",Iq),i=n.objectStore(mq),r=[],o=IDBKeyRange.bound(e+1,1/0);if(i.getAll){var s=i.getAll(o);return new Promise((function(t,e){s.onerror=function(t){return e(t)},s.onsuccess=function(e){t(e.target.result)}}))}return new Promise((function(t,s){var a=function(){try{return o=IDBKeyRange.bound(e+1,1/0),i.openCursor(o)}catch(t){return i.openCursor()}}();a.onerror=function(t){return s(t)},a.onsuccess=function(i){var o=i.target.result;o?o.value.id<e+1?o.continue(e+1):(r.push(o.value),o.continue()):(Cq(n),t(r))}}))}function _q(t){return function(t,e){var n=Date.now()-e,i=t.transaction(mq,"readonly",Iq),r=i.objectStore(mq),o=[];return new Promise((function(t){r.openCursor().onsuccess=function(e){var r=e.target.result;if(r){var s=r.value;s.time<n?(o.push(s),r.continue()):(Cq(i),t(o))}else t(o)}}))}(t.db,t.options.idb.ttl).then((function(e){return function(t,e){if(t.closed)return Promise.resolve([]);var n=t.db.transaction(mq,"readwrite",Iq).objectStore(mq);return Promise.all(e.map((function(t){var e=n.delete(t);return new Promise((function(t){e.onsuccess=function(){return t()}}))})))}(t,e.map((function(t){return t.id})))}))}function vq(t){t.closed||Bq(t).then((function(){return cq(t.options.idb.fallbackInterval)})).then((function(){return vq(t)}))}function Bq(t){return t.closed?lq:t.messagesCallback?Eq(t.db,t.lastCursorId).then((function(e){var n=e.filter((function(t){return!!t})).map((function(e){return e.id>t.lastCursorId&&(t.lastCursorId=e.id),e})).filter((function(e){return function(t,e){return!(t.uuid===e.uuid||e.eMIs.has(t.id)||t.data.time<e.messagesCallbackTime)}(e,t)})).sort((function(t,e){return t.time-e.time}));return n.forEach((function(e){t.messagesCallback&&(t.eMIs.add(e.id),t.messagesCallback(e.data))})),lq})):lq}var wq={create:function(t,e){return e=pq(e),function(t){var e=yq(),n=fq+t,i=e.open(n);return i.onupgradeneeded=function(t){t.target.result.createObjectStore(mq,{keyPath:"id",autoIncrement:!0})},new Promise((function(t,e){i.onerror=function(t){return e(t)},i.onsuccess=function(){t(i.result)}}))}(t).then((function(n){var i={closed:!1,lastCursorId:0,channelName:t,options:e,uuid:uq(),eMIs:new qJ(2*e.idb.ttl),writeBlockPromise:lq,messagesCallback:null,readQueuePromises:[],db:n};return n.onclose=function(){i.closed=!0,e.idb.onclose&&e.idb.onclose()},vq(i),i}))},close:function(t){t.closed=!0,t.db.close()},onMessage:function(t,e,n){t.messagesCallbackTime=n,t.messagesCallback=e,Bq(t)},postMessage:function(t,e){return t.writeBlockPromise=t.writeBlockPromise.then((function(){return function(t,e,n){var i={uuid:e,time:Date.now(),data:n},r=t.transaction([mq],"readwrite",Iq);return new Promise((function(t,e){r.oncomplete=function(){return t()},r.onerror=function(t){return e(t)},r.objectStore(mq).add(i),Cq(r)}))}(t.db,t.uuid,e)})).then((function(){0===function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}(0,10)&&_q(t)})),t.writeBlockPromise},canBeUsed:function(){return!!yq()},type:"idb",averageResponseTime:function(t){return 2*t.idb.fallbackInterval},microSeconds:gq},bq="pubkey.broadcastChannel-";function Qq(){var t;if("undefined"==typeof window)return null;try{t=window.localStorage,t=window["ie8-eventlistener/storage"]||window.localStorage}catch(t){}return t}function xq(t){return bq+t}function Dq(){var t=Qq();if(!t)return!1;try{var e="__broadcastchannel_check";t.setItem(e,"works"),t.removeItem(e)}catch(t){return!1}return!0}var Sq={create:function(t,e){if(e=pq(e),!Dq())throw new Error("BroadcastChannel: localstorage cannot be used");var n=uq(),i=new qJ(e.localstorage.removeTimeout),r={channelName:t,uuid:n,eMIs:i};return r.listener=function(t,e){var n=xq(t),i=function(t){t.key===n&&e(JSON.parse(t.newValue))};return window.addEventListener("storage",i),i}(t,(function(t){r.messagesCallback&&t.uuid!==n&&t.token&&!i.has(t.token)&&(t.data.time&&t.data.time<r.messagesCallbackTime||(i.add(t.token),r.messagesCallback(t.data)))})),r},close:function(t){var e;e=t.listener,window.removeEventListener("storage",e)},onMessage:function(t,e,n){t.messagesCallbackTime=n,t.messagesCallback=e},postMessage:function(t,e){return new Promise((function(n){cq().then((function(){var i=xq(t.channelName),r={token:uq(),time:Date.now(),data:e,uuid:t.uuid},o=JSON.stringify(r);Qq().setItem(i,o);var s=document.createEvent("Event");s.initEvent("storage",!0,!0),s.key=i,s.newValue=o,window.dispatchEvent(s),n()}))}))},canBeUsed:Dq,type:"localstorage",averageResponseTime:function(){var t=navigator.userAgent.toLowerCase();return t.includes("safari")&&!t.includes("chrome")?240:120},microSeconds:gq},Mq=gq,kq=new Set;var Rq={create:function(t){var e={time:Mq(),name:t,messagesCallback:null};return kq.add(e),e},close:function(t){kq.delete(t)},onMessage:function(t,e){t.messagesCallback=e},postMessage:function(t,e){return new Promise((function(n){return setTimeout((function(){Array.from(kq).forEach((function(n){n.name===t.name&&n!==t&&n.messagesCallback&&n.time<e.time&&n.messagesCallback(e)})),n()}),5)}))},canBeUsed:function(){return!0},type:"simulate",averageResponseTime:function(){return 5},microSeconds:Mq},Nq=[dq,wq,Sq];var Pq,Tq=new Set,Lq=0,Fq=function(t,e){var n,i,r;this.id=Lq++,Tq.add(this),this.name=t,Pq&&(e=Pq),this.options=pq(e),this.method=function(t){var e=[].concat(t.methods,Nq).filter(Boolean);if(t.type){if("simulate"===t.type)return Rq;var n=e.find((function(e){return e.type===t.type}));if(n)return n;throw new Error("method-type "+t.type+" not found")}t.webWorkerSupport||(e=e.filter((function(t){return"idb"!==t.type})));var i=e.find((function(t){return t.canBeUsed()}));if(i)return i;throw new Error("No usable method found in "+JSON.stringify(Nq.map((function(t){return t.type}))))}(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,i=(n=this).method.create(n.name,n.options),(r=i)&&"function"==typeof r.then?(n._prepP=i,i.then((function(t){n._state=t}))):n._state=i};function Oq(t,e,n){var i={time:t.method.microSeconds(),type:e,data:n};return(t._prepP?t._prepP:lq).then((function(){var e=t.method.postMessage(t._state,i);return t._uMP.add(e),e.catch().then((function(){return t._uMP.delete(e)})),e}))}function Gq(t){return t._addEL.message.length>0||t._addEL.internal.length>0}function Uq(t,e,n){t._addEL[e].push(n),function(t){if(!t._iL&&Gq(t)){var e=function(e){t._addEL[e.type].forEach((function(t){e.time>=t.time&&t.fn(e.data)}))},n=t.method.microSeconds();t._prepP?t._prepP.then((function(){t._iL=!0,t.method.onMessage(t._state,e,n)})):(t._iL=!0,t.method.onMessage(t._state,e,n))}}(t)}function jq(t,e,n){t._addEL[e]=t._addEL[e].filter((function(t){return t!==n})),function(t){if(t._iL&&!Gq(t)){t._iL=!1;var e=t.method.microSeconds();t.method.onMessage(t._state,null,e)}}(t)}Fq._pubkey=!0,Fq.prototype={postMessage:function(t){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(t));return Oq(this,"message",t)},postInternal:function(t){return Oq(this,"internal",t)},set onmessage(t){var e={time:this.method.microSeconds(),fn:t};jq(this,"message",this._onML),t&&"function"==typeof t?(this._onML=e,Uq(this,"message",e)):this._onML=null},addEventListener:function(t,e){Uq(this,t,{time:this.method.microSeconds(),fn:e})},removeEventListener:function(t,e){jq(this,t,this._addEL[t].find((function(t){return t.fn===e})))},close:function(){var t=this;if(!this.closed){Tq.delete(this),this.closed=!0;var e=this._prepP?this._prepP:lq;return this._onML=null,this._addEL.message=[],e.then((function(){return Promise.all(Array.from(t._uMP))})).then((function(){return Promise.all(t._befC.map((function(t){return t()})))})).then((function(){return t.method.close(t._state)}))}},get type(){return this.method.type},get isClosed(){return this.closed}};var Yq=g(8538);var Kq=g(8538),zq="[object process]"===Object.prototype.toString.call(void 0!==Kq?Kq:0)?function(t){Yq.on("exit",(function(){return t()})),Yq.on("beforeExit",(function(){return t().then((function(){return Yq.exit()}))})),Yq.on("SIGINT",(function(){return t().then((function(){return Yq.exit()}))})),Yq.on("uncaughtException",(function(e){return t().then((function(){console.trace(e),Yq.exit(101)}))}))}:function(t){if("function"==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){var e=self.close.bind(self);self.close=function(){return t(),e()}}else{if("function"!=typeof window.addEventListener)return;window.addEventListener("beforeunload",(function(){t()}),!0),window.addEventListener("unload",(function(){t()}),!0)}},Jq=new Set,qq=!1;function Hq(t){if(qq||(qq=!0,zq(Vq)),"function"!=typeof t)throw new Error("Listener is no function");return Jq.add(t),{remove:function(){return Jq.delete(t)},run:function(){return Jq.delete(t),t()}}}function Vq(){var t=[];return Jq.forEach((function(e){t.push(e()),Jq.delete(e)})),Promise.all(t)}function Wq(t,e){var n={context:"leader",action:e,token:t.token};return t.broadcastChannel.postInternal(n)}function Zq(t){t.isLeader=!0,t._hasLeader=!0;var e=Hq((function(){return t.die()}));t._unl.push(e);var n=function(e){"leader"===e.context&&"apply"===e.action&&Wq(t,"tell"),"leader"!==e.context||"tell"!==e.action||t._dpLC||(t._dpLC=!0,t._dpL(),Wq(t,"tell"))};return t.broadcastChannel.addEventListener("internal",n),t._lstns.push(n),Wq(t,"tell")}var Xq=function(t,e){var n=this;this.broadcastChannel=t,t._befC.push((function(){return n.die()})),this._options=e,this.isLeader=!1,this.isDead=!1,this.token=uq(),this._lstns=[],this._unl=[],this._dpL=function(){},this._dpLC=!1,this._wKMC={},this.lN="pubkey-bc||"+t.method.type+"||"+t.name};Xq.prototype={hasLeader:function(){var t=this;return navigator.locks.query().then((function(e){var n=e.held?e.held.filter((function(e){return e.name===t.lN})):[];return!!(n&&n.length>0)}))},awaitLeadership:function(){var t=this;if(!this._wLMP){this._wKMC.c=new AbortController;var e=new Promise((function(e,n){t._wKMC.res=e,t._wKMC.rej=n}));this._wLMP=new Promise((function(n){navigator.locks.request(t.lN,{signal:t._wKMC.c.signal},(function(){return t._wKMC.c=void 0,Zq(t),n(),e})).catch((function(){}))}))}return this._wLMP},set onduplicate(t){},die:function(){var t=this;return this._lstns.forEach((function(e){return t.broadcastChannel.removeEventListener("internal",e)})),this._lstns=[],this._unl.forEach((function(t){return t.remove()})),this._unl=[],this.isLeader&&(this.isLeader=!1),this.isDead=!0,this._wKMC.res&&this._wKMC.res(),this._wKMC.c&&this._wKMC.c.abort("LeaderElectionWebLock.die() called"),Wq(this,"death")}};var $q=function(t,e){var n=this;this.broadcastChannel=t,this._options=e,this.isLeader=!1,this._hasLeader=!1,this.isDead=!1,this.token=uq(),this._aplQ=lq,this._aplQC=0,this._unl=[],this._lstns=[],this._dpL=function(){},this._dpLC=!1;var i=function(t){"leader"===t.context&&("death"===t.action&&(n._hasLeader=!1),"tell"===t.action&&(n._hasLeader=!0))};this.broadcastChannel.addEventListener("internal",i),this._lstns.push(i)};function tH(t,e){if(t._leaderElector)throw new Error("BroadcastChannel already has a leader-elector");e=function(t,e){return t||(t={}),(t=JSON.parse(JSON.stringify(t))).fallbackInterval||(t.fallbackInterval=3e3),t.responseTime||(t.responseTime=e.method.averageResponseTime(e.options)),t}(e,t);var n="undefined"!=typeof navigator&&void 0!==navigator.locks&&"function"==typeof navigator.locks.request?new Xq(t,e):new $q(t,e);return t._befC.push((function(){return n.die()})),t._leaderElector=n,n}$q.prototype={hasLeader:function(){return Promise.resolve(this._hasLeader)},applyOnce:function(t){var e=this;if(this.isLeader)return cq(0,!0);if(this.isDead)return cq(0,!1);if(this._aplQC>1)return this._aplQ;return this._aplQC=this._aplQC+1,this._aplQ=this._aplQ.then((function(){return function(){if(e.isLeader)return Aq;var n,i=!1,r=new Promise((function(t){n=function(){i=!0,t()}})),o=function(t){"leader"===t.context&&t.token!=e.token&&("apply"===t.action&&t.token>e.token&&n(),"tell"===t.action&&(n(),e._hasLeader=!0))};e.broadcastChannel.addEventListener("internal",o);var s=t?4*e._options.responseTime:e._options.responseTime;return Wq(e,"apply").then((function(){return Promise.race([cq(s),r.then((function(){return Promise.reject(new Error)}))])})).then((function(){return Wq(e,"apply")})).then((function(){return Promise.race([cq(s),r.then((function(){return Promise.reject(new Error)}))])})).catch((function(){})).then((function(){return e.broadcastChannel.removeEventListener("internal",o),!i&&Zq(e).then((function(){return!0}))}))}()})).then((function(){e._aplQC=e._aplQC-1})),this._aplQ.then((function(){return e.isLeader}))},awaitLeadership:function(){return this._aLP||(this._aLP=function(t){if(t.isLeader)return lq;return new Promise((function(e){var n=!1;function i(){n||(n=!0,t.broadcastChannel.removeEventListener("internal",r),e(!0))}t.applyOnce().then((function(){t.isLeader&&i()})),function e(){return cq(t._options.fallbackInterval).then((function(){if(!t.isDead&&!n)return t.isLeader?void i():t.applyOnce(!0).then((function(){t.isLeader?i():e()}))}))}();var r=function(e){"leader"===e.context&&"death"===e.action&&(t._hasLeader=!1,t.applyOnce().then((function(){t.isLeader&&i()})))};t.broadcastChannel.addEventListener("internal",r),t._lstns.push(r)}))}(this)),this._aLP},set onduplicate(t){this._dpL=t},die:function(){var t=this;return this._lstns.forEach((function(e){return t.broadcastChannel.removeEventListener("internal",e)})),this._lstns=[],this._unl.forEach((function(t){return t.remove()})),this._unl=[],this.isLeader&&(this._hasLeader=!1,this.isLeader=!1),this.isDead=!0,Wq(this,"death")}};var eH="RxReplicationProtocolMetaData";function nH(t,e){var n,i=mG(EG(n=t,_G(n.primaryKey)).maxLength),r={title:eH,primaryKey:{key:"id",fields:["itemId","isCheckpoint"],separator:"|"},type:"object",version:t.version,additionalProperties:!1,properties:{id:{type:"string",minLength:1,maxLength:i+2},isCheckpoint:{type:"string",enum:["0","1"],minLength:1,maxLength:1},itemId:{type:"string",maxLength:i>4?i:4},checkpointData:{type:"object",additionalProperties:!0},docData:{type:"object",properties:t.properties},isResolvedConflict:{type:"string"}},keyCompression:t.keyCompression,required:["id","isCheckpoint","itemId"]};return e&&(r.encrypted=["docData"]),BG(r)}function iH(t,e){return t.input.metaInstance.findDocumentsById(e.map((e=>vG(t.input.metaInstance.schema,{itemId:e,isCheckpoint:"0"}))),!0).then((t=>{var e={};return Object.values(t).forEach((t=>{e[t.itemId]={docData:t.docData,metaDocument:t}})),e}))}async function rH(t,e,n,i){var r=e[t.primaryPath],o=n?Xz(n):{id:"",isCheckpoint:"0",itemId:r,docData:e,_attachments:{},_deleted:!1,_rev:"",_meta:{lwt:0}};return o.docData=e,i&&(o.isResolvedConflict=i),o._meta.lwt=cj(),o.id=vG(t.input.metaInstance.schema,o),o._rev=hj(await t.checkpointKey,n),{previous:n,document:o}}async function oH(t,e){var n=vG(t.input.metaInstance.schema,{isCheckpoint:"1",itemId:e}),i=(await t.input.metaInstance.findDocumentsById([n],!1))[0];return t.lastCheckpointDoc[e]=i,i?i.checkpointData:void 0}async function sH(t,e,n){t.checkpointQueue=t.checkpointQueue.then((async()=>{var i=t.lastCheckpointDoc[e];if(n&&!t.events.canceled.getValue()&&(!i||JSON.stringify(i.checkpointData)!==JSON.stringify(n))){var r={id:"",isCheckpoint:"1",itemId:e,_deleted:!1,_attachments:{},checkpointData:n,_meta:CG(),_rev:""};for(r.id=vG(t.input.metaInstance.schema,r);!t.events.canceled.getValue();){if(i&&(r.checkpointData=Hz([i.checkpointData,r.checkpointData])),r._meta.lwt=cj(),r._rev=hj(await t.checkpointKey,i),t.events.canceled.getValue())return;var o=[{previous:i,document:r}],s=await t.input.metaInstance.bulkWrite(o,"replication-set-checkpoint"),a=iJ(t.primaryPath,o,s)[0];if(a)return void(t.lastCheckpointDoc[e]=a);var A=s.error[0];if(409!==A.status)throw A;i=mG(A.documentInDb),r._rev=hj(await t.checkpointKey,i)}}})),await t.checkpointQueue}function aH(t,e,n,i,r){var o=Object.assign({},i,{_attachments:e&&i._attachments?i._attachments:{},_meta:n?i._meta:Object.assign({},r?r._meta:{},{lwt:cj()}),_rev:n?i._rev:""});return o._rev||(o._rev=hj(t,r)),o}function AH(t,e,n){var i=kO(t);return e||delete i._attachments,n||(delete i._meta,delete i._rev),i}function lH(t,e){return t.hasAttachments?e.map((t=>{var e=NO(t.document);return e.docData=Zz(e.docData),{document:e,previous:t.previous}})):e}function cH(t){for(;;){if(!t.underlyingPersistentStorage)return t;t=t.underlyingPersistentStorage}}async function uH(t){t.input.initialCheckpoint&&t.input.initialCheckpoint.downstream&&(await oH(t,"down")||await sH(t,"down",t.input.initialCheckpoint.downstream));var e=await t.input.hashFunction(t.input.identifier),n=t.input.replicationHandler,i=0,r=[];function o(e){t.stats.down.addNewTask=t.stats.down.addNewTask+1;var o={time:i++,task:e};r.push(o),t.streamQueue.down=t.streamQueue.down.then((()=>{for(var e=[];r.length>0;){t.events.active.down.next(!0);var o=mG(r.shift());if(!(o.time<a)){if("RESYNC"===o.task){if(0===e.length){e.push(o.task);break}break}e.push(o.task)}}if(0!==e.length)return"RESYNC"===e[0]?async function(){if(t.stats.down.downstreamResyncOnce=t.stats.down.downstreamResyncOnce+1,t.events.canceled.getValue())return;t.checkpointQueue=t.checkpointQueue.then((()=>oH(t,"down")));var e=await t.checkpointQueue,r=[];for(;!t.events.canceled.getValue();){a=i++;var o=await n.masterChangesSince(e,t.input.pullBatchSize);if(0===o.documents.length)break;if(e=Hz([e,o.checkpoint]),r.push(c(o.documents,e)),o.documents.length<t.input.pullBatchSize)break}await Promise.all(r)}():function(e){t.stats.down.downstreamProcessChanges=t.stats.down.downstreamProcessChanges+1;var n=[],i=null;return e.forEach((t=>{if("RESYNC"===t)throw new Error("SNH");UO(n,t.documents),i=Hz([i,t.checkpoint])})),c(n,mG(i))}(e)})).then((()=>{t.events.active.down.next(!1),t.firstSyncDone.down.getValue()||t.events.canceled.getValue()||t.firstSyncDone.down.next(!0)}))}if(o("RESYNC"),!t.events.canceled.getValue()){var s=n.masterChangeStream$.pipe((0,gj.mergeMap)((async e=>(await(0,gj.firstValueFrom)(t.events.active.up.pipe((0,gj.filter)((t=>!t)))),e)))).subscribe((e=>{t.stats.down.masterChangeStreamEmit=t.stats.down.masterChangeStreamEmit+1,o(e)}));(0,gj.firstValueFrom)(t.events.canceled.pipe((0,gj.filter)((t=>!!t)))).then((()=>s.unsubscribe()))}var a=-1;var A=ej,l={docs:{}};function c(n,i){var r=t.primaryPath;return t.stats.down.persistFromMaster=t.stats.down.persistFromMaster+1,n.forEach((t=>{var e=t[r];l.docs[e]=t})),l.checkpoint=i,A=A.then((()=>{var n=l.docs;l.docs={};var i=l.checkpoint,o=Object.keys(n);if(t.events.canceled.getValue()||0===o.length)return ej;var s=[],a={},A={},c=[];return Promise.all([t.input.forkInstance.findDocumentsById(o,!0),iH(t,o)]).then((([i,l])=>{var u=new Map;return i.forEach((t=>u.set(t[r],t))),Promise.all(o.map((async i=>{var r=u.get(i),o=r?AH(r,t.hasAttachments,!1):void 0,h=n[i],g=l[i];g&&r&&g.metaDocument.isResolvedConflict===r._rev&&await t.streamQueue.up;var d=!(!g||!o)&&await t.input.conflictHandler({realMasterState:g.docData,newDocumentState:o},"downstream-check-if-equal-0").then((t=>t.isEqual));if(!d&&g&&g.docData._rev&&r&&r._meta[t.input.identifier]&&uj(r._rev)===r._meta[t.input.identifier]&&(d=!0),r&&g&&!1===d||r&&!g)return ej;var p=!!o&&await t.input.conflictHandler({realMasterState:h,newDocumentState:o},"downstream-check-if-equal-1").then((t=>t.isEqual));if(o&&p)return g&&!1!==d||c.push(await rH(t,o,g?g.metaDocument:void 0)),ej;var f=Object.assign({},h,r?{_meta:kO(r._meta),_attachments:t.hasAttachments&&h._attachments?h._attachments:{},_rev:""}:{_meta:{lwt:cj()},_rev:"",_attachments:t.hasAttachments&&h._attachments?h._attachments:{}});if(h._rev){var m=r?uj(r._rev)+1:1;f._meta[t.input.identifier]=m,t.input.keepMeta&&(f._rev=h._rev)}t.input.keepMeta&&h._meta&&(f._meta=h._meta);var I={previous:r,document:f};I.document._rev=I.document._rev?I.document._rev:hj(e,I.previous),s.push(I),a[i]=I,A[i]=await rH(t,h,g?g.metaDocument:void 0)})))})).then((async()=>{if(s.length>0)return t.input.forkInstance.bulkWrite(s,await t.downstreamBulkWriteFlag).then((e=>{iJ(t.primaryPath,s,e).forEach((e=>{var n=e[r];t.events.processed.down.next(a[n]),c.push(A[n])})),e.error.forEach((e=>{409!==e.status&&t.events.error.next(ZO("RC_PULL",{writeError:e}))}))}))})).then((()=>{if(c.length>0)return t.input.metaInstance.bulkWrite(lH(t,c),"replication-down-write-meta").then((e=>{e.error.forEach((e=>{t.events.error.next(ZO("RC_PULL",{id:e.documentId,writeError:e}))}))}))})).then((()=>{sH(t,"down",i)}))})).catch((e=>t.events.error.next(e)))}}async function hH(t,e,n,i){if(!n._attachments||i&&!i._attachments)throw new Error("_attachments missing");var r=n[t],o=new Set(i&&i._attachments?Object.keys(i._attachments):[]);return await Promise.all(Object.entries(n._attachments).map((async([t,n])=>{if((!o.has(t)||i&&mG(i._attachments)[t].digest!==n.digest)&&!n.data){var s=await e.getAttachmentData(r,t,n.digest);n.data=s}}))),n}async function gH(t){t.input.initialCheckpoint&&t.input.initialCheckpoint.upstream&&(await oH(t,"up")||await sH(t,"up",t.input.initialCheckpoint.upstream));var e=t.input.replicationHandler;t.streamQueue.up=t.streamQueue.up.then((()=>A().then((()=>{l()}))));var n=0,i=-1,r=[],o=$U,s={docs:{}},a=t.input.forkInstance.changeStream().subscribe((async e=>{if(e.context!==await t.downstreamBulkWriteFlag)return t.stats.up.forkChangeStreamEmit=t.stats.up.forkChangeStreamEmit+1,r.push({task:e,time:n++}),t.events.active.up.getValue()||t.events.active.up.next(!0),t.input.waitBeforePersist?t.input.waitBeforePersist().then((()=>l())):l()}));async function A(){if(t.stats.up.upstreamInitialSync=t.stats.up.upstreamInitialSync+1,!t.events.canceled.getValue()){t.checkpointQueue=t.checkpointQueue.then((()=>oH(t,"up")));for(var e=await t.checkpointQueue,r=new Set,o=async function(){i=n++,r.size>3&&await Promise.race(Array.from(r));var o=await nJ(t.input.forkInstance,t.input.pushBatchSize,e);if(0===o.documents.length)return 1;e=Hz([e,o.checkpoint]);var s=c(o.documents,mG(e));r.add(s),s.catch().then((()=>r.delete(s)))};!t.events.canceled.getValue()&&!await o(););(await Promise.all(r)).find((t=>!!t))?await A():t.firstSyncDone.up.getValue()||t.events.canceled.getValue()||t.firstSyncDone.up.next(!0)}}function l(){t.events.canceled.getValue()||0===r.length?t.events.active.up.next(!1):(t.stats.up.processTasks=t.stats.up.processTasks+1,t.events.active.up.next(!0),t.streamQueue.up=t.streamQueue.up.then((()=>{for(var e=[],n={};r.length>0;){var o=mG(r.shift());o.time<i||(UO(e,o.task.events.map((t=>t.documentData))),n=Hz([n,o.task.checkpoint]))}return(0===e.length?$U:c(e,n)).then((()=>{0===r.length?t.events.active.up.next(!1):l()}))})))}function c(n,i){return t.stats.up.persistToMaster=t.stats.up.persistToMaster+1,n.forEach((e=>{var n=e[t.primaryPath];s.docs[n]=e})),s.checkpoint=i,o=o.then((async()=>{if(t.events.canceled.getValue())return!1;var n=s.docs;s.docs={};var i=s.checkpoint,r=Object.keys(n);if(0===r.length)return!1;var o=await iH(t,r),a={},A=[],l={},c={};if(await Promise.all(r.map((async e=>{var i=n[e];c[e]=i;var r=AH(i,t.hasAttachments,!!t.input.keepMeta),s=o[e];s&&s.metaDocument.isResolvedConflict!==i._rev&&(await t.input.conflictHandler({realMasterState:s.docData,newDocumentState:r},"upstream-check-if-equal")).isEqual||s&&s.docData._rev&&uj(i._rev)===i._meta[t.input.identifier]||(A.push(e),a[e]={assumedMasterState:s?s.docData:void 0,newDocumentState:r},l[e]=await rH(t,r,s?s.metaDocument:void 0))}))),0===A.length)return!1;var u=Object.values(a),h=new Set,g={},d=function(t,e){t=t.slice(0);for(var n=[];t.length;){var i=t.splice(0,e);n.push(i)}return n}(u,t.input.pushBatchSize);await Promise.all(d.map((async n=>{t.hasAttachments&&await Promise.all(n.map((async e=>{e.newDocumentState=await hH(t.primaryPath,t.input.forkInstance,NO(e.newDocumentState),e.assumedMasterState)}))),(await e.masterWrite(n)).forEach((e=>{var n=e[t.primaryPath];h.add(n),g[n]=e}))})));var p=[];if(A.forEach((e=>{h.has(e)||(t.events.processed.up.next(a[e]),p.push(l[e]))})),t.events.canceled.getValue())return!1;p.length>0&&await t.input.metaInstance.bulkWrite(lH(t,p),"replication-up-write-meta");var f=!1;if(h.size>0){t.stats.up.persistToMasterHadConflicts=t.stats.up.persistToMasterHadConflicts+1;var m=[],I={};if(await Promise.all(Object.entries(g).map((([e,n])=>{var i=a[e],r={newDocumentState:i.newDocumentState,assumedMasterState:i.assumedMasterState,realMasterState:n};return async function(t,e,n){var i=t.input.conflictHandler,r=await i(e,"replication-resolve-conflict");if(!r.isEqual){var o=Object.assign({},r.documentData,{_meta:kO(n._meta),_rev:"",_attachments:kO(n._attachments)});return o._meta.lwt=cj(),o._rev=hj(await t.checkpointKey,n),{resolvedDoc:o,output:r}}}(t,r,c[e]).then((async i=>{if(i){t.events.resolvedConflicts.next({input:r,output:i.output}),m.push({previous:c[e],document:i.resolvedDoc});var s=o[e];I[e]=await rH(t,mG(n),s?s.metaDocument:void 0,i.resolvedDoc._rev)}}))}))),m.length>0){f=!0,t.stats.up.persistToMasterConflictWrites=t.stats.up.persistToMasterConflictWrites+1;var y=await t.input.forkInstance.bulkWrite(m,"replication-up-write-conflict"),C=[];iJ(t.primaryPath,m,y).forEach((e=>{var n=e[t.primaryPath];C.push(I[n])})),C.length>0&&await t.input.metaInstance.bulkWrite(lH(t,C),"replication-up-write-conflict-meta")}}return sH(t,"up",i),f})).catch((e=>(t.events.error.next(e),!1))),o}(0,gj.firstValueFrom)(t.events.canceled.pipe((0,gj.filter)((t=>!!t)))).then((()=>a.unsubscribe()))}function dH(t){(t=kO(t)).forkInstance=cH(t.forkInstance),t.metaInstance=cH(t.metaInstance);var e=async function(t){return"rx_storage_replication_"+await t.hashFunction([t.identifier,t.forkInstance.databaseName,t.forkInstance.collectionName].join("||"))}(t),n={primaryPath:_G(t.forkInstance.schema.primaryKey),hasAttachments:!!t.forkInstance.schema.attachments,input:t,checkpointKey:e,downstreamBulkWriteFlag:e.then((t=>"replication-downstream-"+t)),events:{canceled:new gj.BehaviorSubject(!1),active:{down:new gj.BehaviorSubject(!0),up:new gj.BehaviorSubject(!0)},processed:{down:new gj.Subject,up:new gj.Subject},resolvedConflicts:new gj.Subject,error:new gj.Subject},stats:{down:{addNewTask:0,downstreamProcessChanges:0,downstreamResyncOnce:0,masterChangeStreamEmit:0,persistFromMaster:0},up:{forkChangeStreamEmit:0,persistToMaster:0,persistToMasterConflictWrites:0,persistToMasterHadConflicts:0,processTasks:0,upstreamInitialSync:0}},firstSyncDone:{down:new gj.BehaviorSubject(!1),up:new gj.BehaviorSubject(!1)},streamQueue:{down:ej,up:ej},checkpointQueue:ej,lastCheckpointDoc:{}};return uH(n),gH(n),n}function pH(t){return(0,gj.firstValueFrom)((0,gj.combineLatest)([t.firstSyncDone.down.pipe((0,gj.filter)((t=>!!t))),t.firstSyncDone.up.pipe((0,gj.filter)((t=>!!t)))])).then((()=>{}))}function fH(t){return Promise.all([t.streamQueue.up,t.streamQueue.down,t.checkpointQueue])}async function mH(t){t.events.canceled.next(!0),t.events.active.up.complete(),t.events.active.down.complete(),t.events.processed.up.complete(),t.events.processed.down.complete(),t.events.resolvedConflicts.complete(),t.events.canceled.complete(),await t.checkpointQueue}var IH=function(){function t(t,e,n=[t.name,"v",t.schema.version].join("-")){var i,r,o,s,a,A,l;this.started=!1,this.updateStatusHandlers=[],this.updateStatusQueue=XU,this.collection=t,this.migrationStrategies=e,this.statusDocKey=n,this.database=t.database,this.oldCollectionMeta=iq(this),this.mustMigrate=oq(this),this.statusDocId=gJ(this.statusDocKey,uJ),r=aq((i=this).database),(o=r.getValue().slice(0)).push(i),r.next(o),this.$=(s=this.database.internalStore,a=this.statusDocId,A=Jz(s,a),l=s.changeStream().pipe((0,gj.map)((t=>t.events.find((t=>t.documentId===a)))),(0,gj.filter)((t=>!!t)),(0,gj.map)((t=>Promise.resolve(mG(t).documentData))),(0,gj.startWith)(A),(0,gj.switchMap)((t=>t)),(0,gj.filter)((t=>!!t))),l).pipe((0,gj.filter)((t=>!!t)),(0,gj.map)((t=>mG(t).data)),(0,gj.shareReplay)(IG))}var e=t.prototype;return e.getStatus=function(){return(0,gj.firstValueFrom)(this.$)},e.startMigration=async function(t=200){if(await this.mustMigrate){if(this.started)throw ZO("DM1");this.started=!0;var e=void 0;if(this.database.multiInstance){var n=tH(e=new Fq(["rx-migration-state",this.database.name,this.collection.name,this.collection.schema.version].join("|")));await n.awaitLeadership()}var i=await this.oldCollectionMeta,r=await this.database.storage.createStorageInstance({databaseName:this.database.name,collectionName:this.collection.name,databaseInstanceToken:this.database.token,multiInstance:this.database.multiInstance,options:{},schema:i.data.schema,password:this.database.password,devMode:zO.isDevMode()}),o=await this.getConnectedStorageInstances(),s=await this.countAllDoucments([r].concat(o.map((t=>t.oldStorage))));await this.updateStatus((t=>(t.count.total=s,t)));try{await Promise.all(o.map((async e=>{await mJ(this.collection,e.newStorage.collectionName,e.newStorage.schema),await this.migrateStorage(e.oldStorage,e.newStorage,t),await e.newStorage.close()}))),await this.migrateStorage(r,this.collection.storageInstance.originalStorageInstance,t)}catch(t){return await r.close(),void await this.updateStatus((e=>(e.status="ERROR",e.error=aj(t),e)))}await qz(this.database.internalStore,{previous:i,document:Object.assign({},i,{_deleted:!0})},"rx-migration-remove-collection-meta"),await this.updateStatus((t=>(t.status="DONE",t))),e&&await e.close()}},e.updateStatus=function(t){return this.updateStatusHandlers.push(t),this.updateStatusQueue=this.updateStatusQueue.then((async()=>{if(0!==this.updateStatusHandlers.length){var t=this.updateStatusHandlers;for(this.updateStatusHandlers=[];;){var e=await Jz(this.database.internalStore,this.statusDocId),n=NO(e);e||(n={id:this.statusDocId,key:this.statusDocKey,context:uJ,data:{collectionName:this.collection.name,status:"RUNNING",count:{total:0,handled:0,percent:0}},_deleted:!1,_meta:CG(),_rev:"",_attachments:{}});var i=mG(n).data;for(var r of t)i=r(i);if(i.count.percent=Math.round(i.count.handled/i.count.total*100),n&&e&&MO(n.data,e.data))break;try{await qz(this.database.internalStore,{previous:e,document:mG(n)},uJ);break}catch(t){if(!$O(t))throw t}}}})),this.updateStatusQueue},e.migrateStorage=async function(t,e,n){var i=await this.database.storage.createStorageInstance({databaseName:this.database.name,collectionName:"rx-migration-state-meta-"+this.collection.name+"-"+this.collection.schema.version,databaseInstanceToken:this.database.token,multiInstance:this.database.multiInstance,options:{},schema:nH(t.schema,eJ(t.schema)),password:this.database.password,devMode:zO.isDevMode()}),r=function(t,e,n,i=!1){var r=!!(t=cH(t)).schema.attachments,o=_G(t.schema.primaryKey);return{masterChangeStream$:t.changeStream().pipe((0,gj.mergeMap)((async e=>({checkpoint:e.checkpoint,documents:await Promise.all(e.events.map((async e=>{var n=AH(e.documentData,r,i);return r&&(n=await hH(o,t,NO(n),void 0)),n})))})))),masterChangesSince:(e,n)=>nJ(t,n,e).then((async n=>({checkpoint:n.documents.length>0?n.checkpoint:e,documents:await Promise.all(n.documents.map((async e=>{var n=AH(e,r,i);return r&&(n=await hH(o,t,NO(n),void 0)),n})))}))),async masterWrite(s){var a={};s.forEach((t=>{var e=t.newDocumentState[o];a[e]=t}));var A=Object.keys(a),l=await t.findDocumentsById(A,!0),c=new Map;l.forEach((t=>c.set(t[o],t)));var u=[],h=[];return await Promise.all(Object.entries(a).map((async([t,o])=>{var s=c.get(t);s?s&&!o.assumedMasterState?u.push(AH(s,r,i)):!0===(await e({realMasterState:AH(s,r,i),newDocumentState:mG(o.assumedMasterState)},"rxStorageInstanceToReplicationHandler-masterWrite")).isEqual?h.push({previous:s,document:aH(n,r,i,o.newDocumentState,s)}):u.push(AH(s,r,i)):h.push({document:aH(n,r,i,o.newDocumentState)})}))),h.length>0&&(await t.bulkWrite(h,"replication-master-write")).error.forEach((t=>{if(409!==t.status)throw new Error("non conflict error");u.push(AH(mG(t.documentInDb),r,i))})),u}}}(e,bJ,this.database.token,!0),o=dH({keepMeta:!0,identifier:["rx-migration-state",this.collection.name,t.schema.version,this.collection.schema.version].join("-"),replicationHandler:{masterChangesSince:()=>Promise.resolve({checkpoint:null,documents:[]}),masterWrite:async n=>(n=(n=await Promise.all(n.map((async n=>{var i=n.newDocumentState;if(e.schema.title===eH&&(i=n.newDocumentState.docData,"1"===n.newDocumentState.isCheckpoint))return{assumedMasterState:void 0,newDocumentState:n.newDocumentState};var r=await rq(this.collection,t.schema.version,i);return{assumedMasterState:void 0,newDocumentState:e.schema.title===eH?Object.assign({},n.newDocumentState,{docData:r}):r}})))).filter((t=>!!t.newDocumentState)),await r.masterWrite(n)),masterChangeStream$:(new gj.Subject).asObservable()},forkInstance:t,metaInstance:i,pushBatchSize:n,pullBatchSize:0,conflictHandler:bJ,hashFunction:this.database.hashFunction}),s=!1;if(o.events.error.subscribe((t=>s=t)),o.events.processed.up.subscribe((()=>{this.updateStatus((t=>(t.count.handled=t.count.handled+1,t)))})),await pH(o),await mH(o),await this.updateStatusQueue,s)throw await i.close(),s;await Promise.all([t.remove(),i.remove()])},e.countAllDoucments=async function(t){var e=0;return await Promise.all(t.map((async t=>{var n=Kz(t.schema,yz(t.schema,{selector:{}})),i=await t.count(n);e+=i.count}))),e},e.getConnectedStorageInstances=async function(){var t=await this.oldCollectionMeta,e=[];return await Promise.all(await Promise.all(t.data.connectedStorages.map((async t=>{if(t.schema.title!==eH)throw new Error("unknown migration handling for schema");var n=nH(NO(this.collection.schema.jsonSchema),eJ(t.schema));n.version=this.collection.schema.version;var[i,r]=await Promise.all([this.database.storage.createStorageInstance({databaseInstanceToken:this.database.token,databaseName:this.database.name,devMode:zO.isDevMode(),multiInstance:this.database.multiInstance,options:{},schema:t.schema,password:this.database.password,collectionName:t.collectionName}),this.database.storage.createStorageInstance({databaseInstanceToken:this.database.token,databaseName:this.database.name,devMode:zO.isDevMode(),multiInstance:this.database.multiInstance,options:{},schema:n,password:this.database.password,collectionName:t.collectionName})]);e.push({oldStorage:i,newStorage:r})})))),e},e.migratePromise=async function(t){if(this.startMigration(t),!await this.mustMigrate)return{status:"DONE",collectionName:this.collection.name,count:{handled:0,percent:0,total:0}};var e=await Promise.race([(0,gj.firstValueFrom)(this.$.pipe((0,gj.filter)((t=>"DONE"===t.status)))),(0,gj.firstValueFrom)(this.$.pipe((0,gj.filter)((t=>"ERROR"===t.status))))]);if("ERROR"===e.status)throw ZO("DM4",{collection:this.collection.name,error:e.error});return e},t}(),yH=function(t){function e(e,n,i){var r;return(r=t.call(this,null,n)||this).id=e,r.parent=i,r}return eQ(e,t),e}(aJ()),CH={get isLocal(){return!0},get allAttachments$(){throw ZO("LD1",{document:this})},get primaryPath(){return"id"},get primary(){return this.id},get $(){var t=rj(wH,this.parent);return this.parent.$.pipe((0,gj.filter)((t=>t.documentId===this.primary)),(0,gj.filter)((t=>t.isLocal)),(0,gj.map)((t=>Aj(t))),(0,gj.startWith)(t.docCache.getLatestDocumentData(this.primary)),(0,gj.distinctUntilChanged)(((t,e)=>t._rev===e._rev)),(0,gj.map)((e=>t.docCache.getCachedRxDocument(e))),(0,gj.shareReplay)(IG))},get $$(){var t=this,e=vH(t);return e.getReactivityFactory().fromObservable(t.$,t.getLatest()._data,e)},get deleted$$(){var t=this,e=vH(t);return e.getReactivityFactory().fromObservable(t.deleted$,t.getLatest().deleted,e)},getLatest(){var t=rj(wH,this.parent),e=t.docCache.getLatestDocumentData(this.primary);return t.docCache.getCachedRxDocument(e)},get(t){if(t="data."+t,this._data){if("string"!=typeof t)throw XO("LD2",{objPath:t});var e=pG(this._data,t);return e=zO.deepFreezeWhenDevMode(e)}},get$(t){if(t="data."+t,zO.isDevMode()){if(t.includes(".item."))throw ZO("LD3",{objPath:t});if(t===this.primaryPath)throw ZO("LD4")}return this.$.pipe((0,gj.map)((t=>t._data)),(0,gj.map)((e=>pG(e,t))),(0,gj.distinctUntilChanged)())},get$$(t){var e=vH(this);return e.getReactivityFactory().fromObservable(this.get$(t),this.getLatest().get(t),e)},async incrementalModify(t){var e=await QH(this.parent);return e.incrementalWriteQueue.addWrite(this._data,(async e=>(e.data=await t(e.data,this),e))).then((t=>e.docCache.getCachedRxDocument(t)))},incrementalPatch(t){return this.incrementalModify((e=>(Object.entries(t).forEach((([t,n])=>{e[t]=n})),e)))},async _saveData(t){var e=await QH(this.parent),n=this._data;t.id=this.id;var i=[{previous:n,document:t}];return e.storageInstance.bulkWrite(i,"local-document-save-data").then((e=>{if(e.error[0])throw e.error[0];var n=iJ(this.collection.schema.primaryPath,i,e)[0];(t=kO(t))._rev=n._rev}))},async remove(){var t=await QH(this.parent),e=kO(this._data);return e._deleted=!0,qz(t.storageInstance,{previous:this._data,document:e},"local-document-remove").then((e=>t.docCache.getCachedRxDocument(e)))}},EH=!1,_H=()=>{if(!EH){EH=!0;var t=sJ;Object.getOwnPropertyNames(t).forEach((e=>{if(!Object.getOwnPropertyDescriptor(CH,e)){var n=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(CH,e,n)}}));["populate","update","putAttachment","getAttachment","allAttachments"].forEach((t=>CH[t]=(t=>()=>{throw ZO("LD6",{functionName:t})})(t)))}};function vH(t){var e=t.parent;return e instanceof WJ?e:e.database}var BH=new WeakMap,wH=new WeakMap;function bH(t){var e=t.database?t.database:t,n=t.database?t.name:"",i=(async()=>{var i=await xH(e.token,e.storage,e.name,n,e.instanceCreationOptions,e.multiInstance);i=tJ(e,i,kH);var r=new Nz("id",e.eventBulks$.pipe((0,gj.filter)((t=>{var e=!1;return(""===n&&!t.collectionName||""!==n&&t.collectionName===n)&&(e=!0),e&&t.events[0].isLocal})),(0,gj.map)((t=>t.events))),(e=>function(t,e){_H();var n=new yH(t.id,t,e);return Object.setPrototypeOf(n,CH),n.prototype=CH,n}(e,t))),o=new rJ(i,"id",(()=>{}),(()=>{})),s=await e.storageToken,a=i.changeStream().subscribe((n=>{for(var i=new Array(n.events.length),r=n.events,o=t.database?t.name:void 0,a=0;a<r.length;a++){var A=r[a];i[a]={documentId:A.documentId,collectionName:o,isLocal:!0,operation:A.operation,documentData:zO.deepFreezeWhenDevMode(A.documentData),previousDocumentData:zO.deepFreezeWhenDevMode(A.previousDocumentData)}}var l={id:n.id,internal:!1,collectionName:t.database?t.name:void 0,storageToken:s,events:i,databaseToken:e.token,checkpoint:n.checkpoint,context:n.context,endTime:n.endTime,startTime:n.startTime};e.$emit(l)}));t._subs.push(a);var A={database:e,parent:t,storageInstance:i,docCache:r,incrementalWriteQueue:o};return wH.set(t,A),A})();BH.set(t,i)}function QH(t){var e=BH.get(t);if(!e){var n=t.database?t.database:t,i=t.database?t.name:"";throw ZO("LD8",{database:n.name,collection:i})}return e}function xH(t,e,n,i,r,o){return e.createStorageInstance({databaseInstanceToken:t,databaseName:n,collectionName:MH(i),schema:kH,options:r,multiInstance:o,devMode:zO.isDevMode()})}function DH(t){var e=BH.get(t);if(e)return BH.delete(t),e.then((t=>t.storageInstance.close()))}async function SH(t,e,n){var i=sG(10),r=await xH(i,t,e,n,{},!1);await r.remove()}function MH(t){return"plugin-local-documents-"+t}var kH=BG({title:"RxLocalDocument",version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:128},data:{type:"object",additionalProperties:!0}},required:["id","data"]});async function RH(t,e){var n=await QH(this),i={id:t,data:e,_deleted:!1,_meta:CG(),_rev:"",_attachments:{}};return qz(n.storageInstance,{document:i},"local-document-insert").then((t=>n.docCache.getCachedRxDocument(t)))}function NH(t,e){return this.getLocal(t).then((n=>n?n.incrementalModify((()=>e)):this.insertLocal(t,e)))}async function PH(t){var e=await QH(this),n=e.docCache,i=n.getLatestDocumentDataIfExists(t);return i?Promise.resolve(n.getCachedRxDocument(i)):Jz(e.storageInstance,t).then((t=>t?e.docCache.getCachedRxDocument(t):null))}function TH(t){return this.$.pipe((0,gj.startWith)(null),(0,gj.mergeMap)((async e=>e?{changeEvent:e}:{doc:await this.getLocal(t)})),(0,gj.mergeMap)((async e=>{if(e.changeEvent){var n=e.changeEvent;return n.isLocal&&n.documentId===t?{use:!0,doc:await this.getLocal(t)}:{use:!1}}return{use:!0,doc:e.doc}})),(0,gj.filter)((t=>t.use)),(0,gj.map)((t=>t.doc)))}var LH={name:"local-documents",rxdb:!0,prototypes:{RxCollection:t=>{t.insertLocal=RH,t.upsertLocal=NH,t.getLocal=PH,t.getLocal$=TH},RxDatabase:t=>{t.insertLocal=RH,t.upsertLocal=NH,t.getLocal=PH,t.getLocal$=TH}},hooks:{createRxDatabase:{before:t=>{t.creator.localDocuments&&bH(t.database)}},createRxCollection:{before:t=>{t.creator.localDocuments&&bH(t.collection)}},preDestroyRxDatabase:{after:t=>DH(t)},postDestroyRxCollection:{after:t=>DH(t)},postRemoveRxDatabase:{after:t=>SH(t.storage,t.databaseName,"")},postRemoveRxCollection:{after:t=>SH(t.storage,t.databaseName,t.collectionName)}},overwritable:{}},FH=new WeakMap,OH={name:"migration-schema",rxdb:!0,init(){nq(LH)},hooks:{preDestroyRxDatabase:{after:function(t){var e=sq.get(t);e&&e.complete()}}},prototypes:{RxDatabase:t=>{t.migrationStates=function(){return aq(this).pipe((0,gj.shareReplay)(IG))}},RxCollection:t=>{t.getMigrationState=function(){return oj(FH,this,(()=>new IH(this.asRxCollection,this.migrationStrategies)))},t.migrationNeeded=function(){return 0===this.schema.version?$U:oq(this.getMigrationState())}}}},GH=g(8900);const UH=Symbol.for("Dexie"),jH=globalThis[UH]||(globalThis[UH]=GH);if(GH.semVer!==jH.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${GH.semVer} and ${jH.semVer}`);const{liveQuery:YH,mergeRanges:KH,rangesOverlap:zH,RangeSet:JH,cmp:qH,Entity:HH,PropModSymbol:VH,PropModification:WH,replacePrefix:ZH,add:XH,remove:$H}=jH;var tV="docs",eV="changes",nV="attachments",iV="dexie",rV=new Map,oV=new Map;var sV="__";function aV(t){var e=t.split(".");if(e.length>1)return e.map((t=>aV(t))).join(".");if(t.startsWith("|")){var n=t.substring(1);return sV+n}return t}function AV(t){var e=t.split(".");return e.length>1?e.map((t=>AV(t))).join("."):t.startsWith(sV)?"|"+t.substring(sV.length):t}function lV(t,e){if(!e)return e;var n=kO(e);return n=uV(n),t.forEach((t=>{var i=pG(e,t)?"1":"0",r=aV(t);fG(n,r,i)})),n}function cV(t,e){return e?(e=hV(e=kO(e)),t.forEach((t=>{var n=pG(e,t);fG(e,t,"1"===n)})),e):e}function uV(t){if(!t||"string"==typeof t||"number"==typeof t||"boolean"==typeof t)return t;if(Array.isArray(t))return t.map((t=>uV(t)));if("object"==typeof t){var e={};return Object.entries(t).forEach((([t,n])=>{"object"==typeof n&&(n=uV(n)),e[aV(t)]=n})),e}}function hV(t){if(!t||"string"==typeof t||"number"==typeof t||"boolean"==typeof t)return t;if(Array.isArray(t))return t.map((t=>hV(t)));if("object"==typeof t){var e={};return Object.entries(t).forEach((([n,i])=>{("object"==typeof i||Array.isArray(t))&&(i=hV(i)),e[AV(n)]=i})),e}}function gV(t){var e=[],n=_G(t.primaryKey);e.push([n]),e.push(["_deleted",n]),t.indexes&&t.indexes.forEach((t=>{var n=LO(t);e.push(n)})),e.push(["_meta.lwt",n]),e.push(["_meta.lwt"]),e=e.map((t=>t.map((t=>aV(t)))));var i=e.map((t=>1===t.length?t[0]:"["+t.join("+")+"]"));return(i=i.filter(((t,e,n)=>n.indexOf(t)===e))).join(", ")}async function dV(t,e){var n=await t;return(await n.dexieTable.bulkGet(e)).map((t=>cV(n.booleanIndexes,t)))}function pV(t,e){return t+"||"+e}function fV(t){var e=new Set,n=[];return t.indexes?(t.indexes.forEach((i=>{LO(i).forEach((i=>{e.has(i)||(e.add(i),"boolean"===EG(t,i).type&&n.push(i))}))})),n.push("_deleted"),n.filter((function(t,e,n){return n.indexOf(t)===e}))):n}var mV={};function IV(t){return t===$j?-1/0:t}function yV(t,e,n){return t.includes(e)?n===Xj||!0===n?"1":"0":n}function CV(t,e,n){if(!n){if("undefined"==typeof window)throw new Error("IDBKeyRange missing");n=window.IDBKeyRange}var i=e.startKeys.map(((n,i)=>{var r=e.index[i];return yV(t,r,n)})).map(IV),r=e.endKeys.map(((n,i)=>{var r=e.index[i];return yV(t,r,n)})).map(IV);return n.bound(i,r,!e.inclusiveStart,!e.inclusiveEnd)}async function EV(t,e){var n=await t.internals,i=e.query,r=i.skip?i.skip:0,o=r+(i.limit?i.limit:1/0),s=e.queryPlan,a=!1;s.selectorSatisfiedByIndex||(a=Ez(t.schema,e.query));var A=CV(n.booleanIndexes,s,n.dexieDb._options.IDBKeyRange),l=s.index,c=[];if(await n.dexieDb.transaction("r",n.dexieTable,(async t=>{var e,i=t.idbtrans.objectStore(tV);e="["+l.map((t=>aV(t))).join("+")+"]";var r=i.index(e).openCursor(A);await new Promise((t=>{r.onsuccess=function(e){var i=e.target.result;if(i){var r=cV(n.booleanIndexes,i.value);a&&!a(r)||c.push(r),s.sortSatisfiedByIndex&&c.length===o?t():i.continue()}else t()}}))})),!s.sortSatisfiedByIndex){var u=Cz(t.schema,e.query);c=c.sort(u)}return{documents:c=c.slice(r,o)}}var _V=Array.isArray;function vV(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=NU(t),i=function(t,e){return"number"==typeof RU(t)?t.pop():e}(t,1/0);return t=function(t){return 1===t.length&&_V(t[0])?t[0]:t}(t),SG((function(e,r){kU(i)(OU(LG([e],TG(t)),n)).subscribe(r)}))}var BV=new Map;function wV(t,e,n,i){var r=BV.get(e);return r||(r={bc:new Fq(["RxDB:",t,n].join("|")),refs:new Set},BV.set(e,r)),r.refs.add(i),r.bc}function bV(t,e){var n=BV.get(t);if(n)return n.refs.delete(e),0===n.refs.size?(BV.delete(t),n.bc.close()):void 0}function QV(t,e,n,i){if(e.multiInstance){var r=i||wV(t,e.databaseInstanceToken,n.databaseName,n),o=new gj.Subject,s=n=>{n.storageName===t&&n.databaseName===e.databaseName&&n.collectionName===e.collectionName&&n.version===e.schema.version&&o.next(n.eventBulk)};r.addEventListener("message",s);var a=n.changeStream(),A=!1,l=a.subscribe((n=>{A||r.postMessage({storageName:t,databaseName:e.databaseName,collectionName:e.collectionName,version:e.schema.version,eventBulk:n})}));n.changeStream=function(){return o.asObservable().pipe(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return vV.apply(void 0,LG([],TG(t)))}(a))};var c=n.close.bind(n);n.close=async function(){return A=!0,l.unsubscribe(),r.removeEventListener("message",s),i||await bV(e.databaseInstanceToken,n),c()};var u=n.remove.bind(n);n.remove=async function(){return A=!0,l.unsubscribe(),r.removeEventListener("message",s),i||await bV(e.databaseInstanceToken,n),u()}}}var xV=cj(),DV=!1,SV=function(){function t(t,e,n,i,r,o,s,a){this.changes$=new gj.Subject,this.instanceId=xV++,this.storage=t,this.databaseName=e,this.collectionName=n,this.schema=i,this.internals=r,this.options=o,this.settings=s,this.devMode=a,this.primaryPath=_G(this.schema.primaryKey)}var e=t.prototype;return e.bulkWrite=async function(t,e){kV(this),DV||mV.premium&&"string"==typeof mV.premium&&"6da4936d1425ff3a5c44c02342c6daf791d266be3ae8479b8ec59e261df41b93"===await JJ(mV.premium)||console.warn(["-------------- RxDB Open Core RxStorage -------------------------------","You are using the free Dexie.js based RxStorage implementation from RxDB https://rxdb.info/rx-storage-dexie.html?console=dexie ","While this is a great option, we want to let you know that there are faster storage solutions available in our premium plugins.","For professional users and production environments, we highly recommend considering these premium options to enhance performance and reliability."," https://rxdb.info/premium?console=dexie ","If you already purchased premium access you can disable this log by calling the setPremiumFlag() function from rxdb-premium/plugins/shared.","---------------------------------------------------------------------"].join("\n")),DV=!0,t.forEach((t=>{if(!t.document._rev||t.previous&&!t.previous._rev)throw ZO("SNH",{args:{row:t}})}));var n=await this.internals,i={error:[]};this.devMode&&(t=t.map((t=>{var e=Xz(t.document);return{previous:t.previous,document:e}})));var r,o=t.map((t=>t.document[this.primaryPath]));if(await n.dexieDb.transaction("rw",n.dexieTable,n.dexieAttachmentsTable,(async()=>{var s=new Map;(await dV(this.internals,o)).forEach((t=>{var e=t;return e&&s.set(e[this.primaryPath],e),e})),r=function(t,e,n,i,r,o,s){for(var a,A=!!t.schema.attachments,l=[],c=[],u=[],h={id:sG(10),events:[],checkpoint:null,context:r,startTime:cj(),endTime:0},g=h.events,d=[],p=[],f=[],m=n.size>0,I=i.length,y=function(){var t,r=i[C],h=r.document,I=r.previous,y=h[e],E=h._deleted,_=I&&I._deleted,v=void 0;if(m&&(v=n.get(y)),v){var B=v._rev;if(!I||I&&B!==I._rev){var w={isError:!0,status:409,documentId:y,writeRow:r,documentInDb:v};return u.push(w),1}var b=A?Wz(r):r;A&&(E?I&&Object.keys(I._attachments).forEach((t=>{p.push({documentId:y,attachmentId:t,digest:mG(I)._attachments[t].digest})})):(Object.entries(h._attachments).find((([e,n])=>((I?I._attachments[e]:void 0)||n.data||(t={documentId:y,documentInDb:v,isError:!0,status:510,writeRow:r,attachmentId:e}),!0))),t||Object.entries(h._attachments).forEach((([t,e])=>{var n=I?I._attachments[t]:void 0;if(n){var i=b.document._attachments[t].digest;e.data&&n.digest!==i&&f.push({documentId:y,attachmentId:t,attachmentData:e,digest:e.digest})}else d.push({documentId:y,attachmentId:t,attachmentData:e,digest:e.digest})})))),t?u.push(t):(A?(c.push(Wz(b)),s&&s(h)):(c.push(b),s&&s(h)),a=b);var Q=null,x=null,D=null;if(_&&!E)D="INSERT",Q=A?Zz(h):h;else if(!I||_||E){if(!E)throw ZO("SNH",{args:{writeRow:r}});D="DELETE",Q=mG(h),x=I}else D="UPDATE",Q=A?Zz(h):h,x=I;var S={documentId:y,documentData:Q,previousDocumentData:x,operation:D};g.push(S)}else{var M=!!E;if(A&&Object.entries(h._attachments).forEach((([e,n])=>{n.data?d.push({documentId:y,attachmentId:e,attachmentData:n,digest:n.digest}):(t={documentId:y,isError:!0,status:510,writeRow:r,attachmentId:e},u.push(t))})),t||(A?(l.push(Wz(r)),o&&o(h)):(l.push(r),o&&o(h)),a=r),!M){var k={documentId:y,operation:"INSERT",documentData:A?Zz(h):h,previousDocumentData:A&&I?Zz(I):I};g.push(k)}}},C=0;C<I;C++)y();return{bulkInsertDocs:l,bulkUpdateDocs:c,newestRow:a,errors:u,eventBulk:h,attachmentsAdd:d,attachmentsRemove:p,attachmentsUpdate:f}}(this,this.primaryPath,s,t,e),i.error=r.errors;var a=[];r.bulkInsertDocs.forEach((t=>{a.push(t.document)})),r.bulkUpdateDocs.forEach((t=>{a.push(t.document)})),a=a.map((t=>lV(n.booleanIndexes,t))),a.length>0&&await n.dexieTable.bulkPut(a);var A=[];r.attachmentsAdd.forEach((t=>{A.push({id:pV(t.documentId,t.attachmentId),data:t.attachmentData.data})})),r.attachmentsUpdate.forEach((t=>{A.push({id:pV(t.documentId,t.attachmentId),data:t.attachmentData.data})})),await n.dexieAttachmentsTable.bulkPut(A),await n.dexieAttachmentsTable.bulkDelete(r.attachmentsRemove.map((t=>pV(t.documentId,t.attachmentId))))})),(r=mG(r)).eventBulk.events.length>0){var s=mG(r.newestRow).document;r.eventBulk.checkpoint={id:s[this.primaryPath],lwt:s._meta.lwt},r.eventBulk.endTime=cj(),this.changes$.next(r.eventBulk)}return i},e.findDocumentsById=async function(t,e){kV(this);var n=await this.internals,i=[];return await n.dexieDb.transaction("r",n.dexieTable,(async()=>{(await dV(this.internals,t)).forEach((t=>{!t||t._deleted&&!e||i.push(t)}))})),i},e.query=function(t){return kV(this),EV(this,t)},e.count=async function(t){if(t.queryPlan.selectorSatisfiedByIndex){var e=await async function(t,e){var n=await t.internals,i=e.queryPlan,r=i.index,o=CV(n.booleanIndexes,i,n.dexieDb._options.IDBKeyRange),s=-1;return await n.dexieDb.transaction("r",n.dexieTable,(async t=>{var e,n=t.idbtrans.objectStore(tV);e="["+r.map((t=>aV(t))).join("+")+"]";var i=n.index(e).count(o);s=await new Promise(((t,e)=>{i.onsuccess=function(){t(i.result)},i.onerror=t=>e(t)}))})),s}(this,t);return{count:e,mode:"fast"}}return{count:(await EV(this,t)).documents.length,mode:"slow"}},e.changeStream=function(){return kV(this),this.changes$.asObservable()},e.cleanup=async function(t){kV(this);var e=await this.internals;return await e.dexieDb.transaction("rw",e.dexieTable,(async()=>{var n=cj()-t,i=await e.dexieTable.where("_meta.lwt").below(n).toArray(),r=[];i.forEach((t=>{"1"===t._deleted&&r.push(t[this.primaryPath])})),await e.dexieTable.bulkDelete(r)})),!0},e.getAttachmentData=async function(t,e,n){kV(this);var i=await this.internals,r=pV(t,e);return await i.dexieDb.transaction("r",i.dexieAttachmentsTable,(async()=>{var n=await i.dexieAttachmentsTable.get(r);if(n)return n.data;throw new Error("attachment missing documentId: "+t+" attachmentId: "+e)}))},e.remove=async function(){kV(this);var t=await this.internals;return await t.dexieTable.clear(),this.close()},e.close=function(){return this.closed||(this.closed=(async()=>{this.changes$.complete(),await async function(t){var e=await t,n=oV.get(t)-1;0===n?(e.dexieDb.close(),oV.delete(t)):oV.set(t,n)}(this.internals)})()),this.closed},e.conflictResultionTasks=function(){return new gj.Subject},e.resolveConflictResultionTask=async function(t){},t}();async function MV(t,e,n){var i=function(t,e,n,i){var r="rxdb-dexie-"+t+"--"+i.version+"--"+e,o=oj(rV,r,(()=>{var t=(async()=>{var t=kO(n);t.autoOpen=!1;var e=new jH(r,t),o={[tV]:gV(i),[eV]:"++sequence, id",[nV]:"id"};return e.version(1).stores(o),await e.open(),{dexieDb:e,dexieTable:e[tV],dexieAttachmentsTable:e[nV],booleanIndexes:fV(i)}})();return rV.set(r,o),oV.set(o,0),t}));return o}(e.databaseName,e.collectionName,n,e.schema),r=new SV(t,e.databaseName,e.collectionName,e.schema,i,e.options,n,e.devMode);return await QV(iV,e,r),Promise.resolve(r)}function kV(t){if(t.closed)throw new Error("RxStorageInstanceDexie is closed "+t.databaseName+"-"+t.collectionName)}var RV=function(){function t(t){this.name=iV,this.rxdbVersion=NJ,this.settings=t}return t.prototype.createStorageInstance=function(t){return function(t){if(t.schema.keyCompression)throw ZO("UT5",{args:{params:t}});if(eJ(t.schema))throw ZO("UT6",{args:{params:t}});if(t.schema.attachments&&t.schema.attachments.compression)throw ZO("UT7",{args:{params:t}})}(t),MV(this,t,this.settings)},t}();var NV=["__proto__","constructor","prototype"];function PV(t,e){Object.keys(e).forEach((n=>{NV.includes(n)||(void 0===t[n]?t[n]=e[n]:TV(e[n])?PV(t[n],e[n]):t[n]=e[n])}))}function TV(t){return"[object Object]"===t.toString()}var LV=function(){function t(t,e){if(this.options={},this._conditions={},this._fields={},this._path=e,t){var n=this;t.selector&&n.find(t.selector),t.limit&&n.limit(t.limit),t.skip&&n.skip(t.skip),t.sort&&t.sort.forEach((t=>n.sort(t)))}}var e=t.prototype;return e.where=function(t,e){if(!arguments.length)return this;var n=typeof arguments[0];if("string"===n)return this._path=arguments[0],2===arguments.length&&(this._conditions[this._path]=arguments[1]),this;if("object"===n&&!Array.isArray(arguments[0]))return this.merge(arguments[0]);throw XO("MQ1",{path:arguments[0]})},e.equals=function(t){this._ensurePath("equals");var e=this._path;return this._conditions[e]=t,this},e.eq=function(t){this._ensurePath("eq");var e=this._path;return this._conditions[e]=t,this},e.or=function(t){var e=this._conditions.$or||(this._conditions.$or=[]);return Array.isArray(t)||(t=[t]),e.push.apply(e,t),this},e.nor=function(t){var e=this._conditions.$nor||(this._conditions.$nor=[]);return Array.isArray(t)||(t=[t]),e.push.apply(e,t),this},e.and=function(t){var e=this._conditions.$and||(this._conditions.$and=[]);return Array.isArray(t)||(t=[t]),e.push.apply(e,t),this},e.mod=function(t,e){var n,i;return 1===arguments.length?(this._ensurePath("mod"),n=arguments[0],i=this._path):2!==arguments.length||Array.isArray(arguments[1])?3===arguments.length?(n=arguments.slice(1),i=arguments[0]):(n=arguments[1],i=arguments[0]):(this._ensurePath("mod"),n=arguments.slice(),i=this._path),(this._conditions[i]||(this._conditions[i]={})).$mod=n,this},e.exists=function(t,e){var n,i;return 0===arguments.length?(this._ensurePath("exists"),n=this._path,i=!0):1===arguments.length?"boolean"==typeof arguments[0]?(this._ensurePath("exists"),n=this._path,i=arguments[0]):(n=arguments[0],i=!0):2===arguments.length&&(n=arguments[0],i=arguments[1]),(this._conditions[n]||(this._conditions[n]={})).$exists=i,this},e.elemMatch=function(e,n){if(null===arguments[0])throw XO("MQ2");var i,r,o;if("function"==typeof arguments[0])this._ensurePath("elemMatch"),r=this._path,i=arguments[0];else if(TV(arguments[0]))this._ensurePath("elemMatch"),r=this._path,o=arguments[0];else if("function"==typeof arguments[1])r=arguments[0],i=arguments[1];else{if(!arguments[1]||!TV(arguments[1]))throw XO("MQ2");r=arguments[0],o=arguments[1]}return i&&(i(o=new t),o=o._conditions),(this._conditions[r]||(this._conditions[r]={})).$elemMatch=o,this},e.sort=function(t){if(!t)return this;var e,n=typeof t;if(Array.isArray(t)){e=t.length;for(var i=0;i<t.length;++i)UV(this.options,t[i][0],t[i][1]);return this}if(1===arguments.length&&"string"===n){e=(t=t.split(/\s+/)).length;for(var r=0;r<e;++r){var o=t[r];if(o){var s="-"===o[0]?-1:1;-1===s&&(o=o.substring(1)),GV(this.options,o,s)}}return this}if(TV(t))return Object.keys(t).forEach((e=>GV(this.options,e,t[e]))),this;throw XO("MQ3",{args:arguments})},e.merge=function(e){if(!e)return this;if(!jV(e))throw XO("MQ4",{source:e});return e instanceof t?(e._conditions&&PV(this._conditions,e._conditions),e._fields&&(this._fields||(this._fields={}),PV(this._fields,e._fields)),e.options&&(this.options||(this.options={}),PV(this.options,e.options)),e._distinct&&(this._distinct=e._distinct),this):(PV(this._conditions,e),this)},e.find=function(t){return jV(t)&&this.merge(t),this},e._ensurePath=function(t){if(!this._path)throw ZO("MQ5",{method:t})},e.toJSON=function(){var t={selector:this._conditions};return this.options.skip&&(t.skip=this.options.skip),this.options.limit&&(t.limit=this.options.limit),this.options.sort&&(t.sort=function(t){return Object.entries(t).map((([t,e])=>{var n=1===e?"asc":"desc";return{[t]:n}}))}(this.options.sort)),{query:t,path:this._path}},t}();var FV=["limit","skip","maxScan","batchSize","comment"];FV.forEach((function(t){LV.prototype[t]=function(e){return this.options[t]=e,this}}));var OV=["gt","gte","lt","lte","ne","in","nin","all","regex","size"];function GV(t,e,n){if(Array.isArray(t.sort))throw XO("MQ6",{opts:t,field:e,value:n});if(n&&n.$meta){(t.sort||(t.sort={}))[e]={$meta:n.$meta}}else{var i=String(n||1).toLowerCase();if(!/^(?:ascending|asc|descending|desc|1|-1)$/.test(i))throw Array.isArray(n)&&(n="["+n+"]"),XO("MQ7",{field:e,value:n});var r=t.sort||(t.sort={}),o=n.toString().replace("asc","1").replace("ascending","1").replace("desc","-1").replace("descending","-1");r[e]=parseInt(o,10)}}function UV(t,e,n){if(t.sort=t.sort||[],!Array.isArray(t.sort))throw XO("MQ8",{opts:t,field:e,value:n});t.sort.push([e,n])}function jV(t){return t instanceof LV||TV(t)}OV.forEach((function(t){LV.prototype[t]=function(){var e,n;1===arguments.length?(this._ensurePath(t),n=arguments[0],e=this._path):(n=arguments[1],e=arguments[0]);var i=null===this._conditions[e]||"object"==typeof this._conditions[e]?this._conditions[e]:this._conditions[e]={};if("regex"===t){if(n instanceof RegExp)throw ZO("QU16",{field:e,query:this._conditions});"string"==typeof n?i["$"+t]=n:(i["$"+t]=n.$regex,n.$options&&(i.$options=n.$options))}else i["$"+t]=n;return this}}));var YV="queryBuilderPath";function KV(t,e,n){var i=function(t,e){return new LV(t,e)}(NO(t.mangoQuery),t.other[YV]);i[e](n);var r=i.toJSON();return Uz(t.op,r.query,t.collection,{...t.other,[YV]:r.path})}function zV(t,e){t[e]=function(t){if(zO.isDevMode()&&"findByIds"===this.op)throw ZO("QU17",{collection:this.collection.name,query:this.mangoQuery});return KV(this,e,t)}}var JV={name:"query-builder",rxdb:!0,prototypes:{RxQuery(t){["where","equals","eq","or","nor","and","mod","exists","elemMatch","sort"].forEach((e=>{zV(t,e)})),FV.forEach((e=>{zV(t,e)})),OV.forEach((e=>{zV(t,e)}))}}},qV=new WeakMap,HV=new WeakMap;function VV(t){return oj(HV,t,(()=>tH(t)))}function WV(){var t=wV(this.storage.name,this.token,this.name,this),e=this.destroy.bind(this);this.destroy=function(){return bV(this.token,this),e()};var n=VV(t);return n||(n=VV(t),qV.set(this,n)),this.leaderElector=()=>n,n}function ZV(){return!this.multiInstance||this.leaderElector().isLeader}function XV(){return this.multiInstance?this.leaderElector().awaitLeadership().then((()=>!0)):XU}var $V={RxDatabase:t=>{t.leaderElector=WV,t.isLeader=ZV,t.waitForLeadership=XV}},tW={name:"leader-election",rxdb:!0,prototypes:$V,hooks:{preDestroyRxDatabase:{after:function(t){var e=qV.get(t);e&&e.die()}}}};const eW={title:"edge schema",description:"describes a path from target to source",version:2,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:21},parPath:{type:"array"},isEph:{type:"boolean"},updatedAt:{type:"number"}},required:["id","parPath","updatedAt"]},nW={title:"id schema",description:"describes node name-id relation",version:1,primaryKey:"name",type:"object",properties:{name:{type:"string",maxLength:50},tsId:{type:"string"},updatedAt:{type:"number"}},required:["name","tsId","updatedAt"]};var iW=t=>Promise.resolve(t);function rW(t,e){if("_deleted"===t)return e;var n=!!(e=kO(e))._deleted;return e[t]=n,delete e._deleted,e}function oW(t,e,n){return n.map((n=>{var i=kO(n);if("_deleted"!==e){var r=!!i[e];i._deleted=r,delete i[e]}else i._deleted=!!i._deleted;return i[t.schema.primaryPath]=vG(t.schema.jsonSchema,i),i}))}function sW(t,e){if("undefined"==typeof window||"object"!=typeof window||void 0===window.addEventListener||navigator.onLine)return t.promiseWait(e);var n,i=new Promise((t=>{n=()=>{window.removeEventListener("online",n),t()},window.addEventListener("online",n)}));return Promise.race([i,t.promiseWait(e)]).then((()=>{window.removeEventListener("online",n)}))}var aW=new WeakMap,AW=function(){function t(t,e,n,i,r,o,s,a){this.subs=[],this.subjects={received:new gj.Subject,sent:new gj.Subject,error:new gj.Subject,canceled:new gj.BehaviorSubject(!1),active:new gj.BehaviorSubject(!1)},this.received$=this.subjects.received.asObservable(),this.sent$=this.subjects.sent.asObservable(),this.error$=this.subjects.error.asObservable(),this.canceled$=this.subjects.canceled.asObservable(),this.active$=this.subjects.active.asObservable(),this.onCancel=[],this.callOnStart=void 0,this.remoteEvents$=new gj.Subject,this.replicationIdentifier=t,this.collection=e,this.deletedField=n,this.pull=i,this.push=r,this.live=o,this.retryTime=s,this.autoStart=a,this.metaInfoPromise=(async()=>({collectionName:"rx-replication-meta-"+await e.database.hashFunction([this.collection.name,this.replicationIdentifier].join("-")),schema:nH(this.collection.schema.jsonSchema,eJ(this.collection.schema.jsonSchema))}))(),oj(aW,e,(()=>[])).push(this),this.collection.onDestroy.push((()=>this.cancel())),Object.keys(this.subjects).forEach((t=>{Object.defineProperty(this,t+"$",{get:function(){return this.subjects[t].asObservable()}})}));var A=new Promise((t=>{this.callOnStart=t}));this.startPromise=A}var e=t.prototype;return e.start=async function(){if(!this.isStopped()){var t=this.pull&&this.pull.modifier?this.pull.modifier:iW,e=this.push&&this.push.modifier?this.push.modifier:iW,n=this.collection.database,i=await this.metaInfoPromise,[r]=await Promise.all([this.collection.database.storage.createStorageInstance({databaseName:n.name,collectionName:i.collectionName,databaseInstanceToken:n.token,multiInstance:n.multiInstance,options:{},schema:i.schema,password:n.password,devMode:zO.isDevMode()}),mJ(this.collection,i.collectionName,i.schema)]);this.metaInstance=r,this.internalReplicationState=dH({pushBatchSize:this.push&&this.push.batchSize?this.push.batchSize:100,pullBatchSize:this.pull&&this.pull.batchSize?this.pull.batchSize:100,initialCheckpoint:{upstream:this.push?this.push.initialCheckpoint:void 0,downstream:this.pull?this.pull.initialCheckpoint:void 0},forkInstance:this.collection.storageInstance,metaInstance:this.metaInstance,hashFunction:n.hashFunction,identifier:"rxdbreplication"+this.replicationIdentifier,conflictHandler:this.collection.conflictHandler,replicationHandler:{masterChangeStream$:this.remoteEvents$.asObservable().pipe((0,gj.filter)((t=>!!this.pull)),(0,gj.mergeMap)((async e=>{if("RESYNC"===e)return e;var n=kO(e);return n.documents=oW(this.collection,this.deletedField,n.documents),n.documents=await Promise.all(n.documents.map((e=>t(e)))),n}))),masterChangesSince:async(e,n)=>{if(!this.pull)return{checkpoint:null,documents:[]};for(var i=!1,r={};!i&&!this.isStopped();)try{r=await this.pull.handler(e,n),i=!0}catch(t){var o=ZO("RC_PULL",{checkpoint:e,errors:LO(t).map((t=>aj(t))),direction:"pull"});this.subjects.error.next(o),await sW(this.collection,mG(this.retryTime))}if(this.isStopped())return{checkpoint:null,documents:[]};var s=kO(r);return s.documents=oW(this.collection,this.deletedField,s.documents),s.documents=await Promise.all(s.documents.map((e=>t(e)))),s},masterWrite:async t=>{if(!this.push)return[];var n=!1;await iG("preReplicationMasterWrite",{rows:t,collection:this.collection});var i=(await Promise.all(t.map((async t=>(t.newDocumentState=await e(t.newDocumentState),null===t.newDocumentState?null:(t.assumedMasterState&&(t.assumedMasterState=await e(t.assumedMasterState)),"_deleted"!==this.deletedField&&(t.newDocumentState=rW(this.deletedField,t.newDocumentState),t.assumedMasterState&&(t.assumedMasterState=rW(this.deletedField,t.assumedMasterState))),t)))))).filter(OO),r=null;for(0===i.length&&(n=!0,r=[]);!n&&!this.isStopped();)try{if(r=await this.push.handler(i),!Array.isArray(r))throw ZO("RC_PUSH_NO_AR",{pushRows:t,direction:"push",args:{result:r}});n=!0}catch(e){var o=e.rxdb?e:ZO("RC_PUSH",{pushRows:t,errors:LO(e).map((t=>aj(t))),direction:"push"});this.subjects.error.next(o),await sW(this.collection,mG(this.retryTime))}return this.isStopped()?[]:(await iG("preReplicationMasterWriteDocumentsHandle",{result:r,collection:this.collection}),oW(this.collection,this.deletedField,mG(r)))}}}),this.subs.push(this.internalReplicationState.events.error.subscribe((t=>{this.subjects.error.next(t)})),this.internalReplicationState.events.processed.down.subscribe((t=>this.subjects.received.next(t.document))),this.internalReplicationState.events.processed.up.subscribe((t=>{this.subjects.sent.next(t.newDocumentState)})),(0,gj.combineLatest)([this.internalReplicationState.events.active.down,this.internalReplicationState.events.active.up]).subscribe((([t,e])=>{var n=t||e;this.subjects.active.next(n)}))),this.pull&&this.pull.stream$&&this.live&&this.subs.push(this.pull.stream$.subscribe({next:t=>{this.remoteEvents$.next(t)},error:t=>{this.subjects.error.next(t)}})),this.live||(await pH(this.internalReplicationState),await fH(this.internalReplicationState),await this.cancel()),this.callOnStart()}},e.isStopped=function(){return!!this.subjects.canceled.getValue()},e.awaitInitialReplication=async function(){return await this.startPromise,pH(mG(this.internalReplicationState))},e.awaitInSync=async function(){await this.startPromise,await pH(mG(this.internalReplicationState));for(var t=2;t>0;)t--,await this.collection.database.requestIdlePromise(),await fH(mG(this.internalReplicationState));return!0},e.reSync=function(){this.remoteEvents$.next("RESYNC")},e.emitEvent=function(t){this.remoteEvents$.next(t)},e.cancel=async function(){if(this.isStopped())return $U;var t=this.onCancel.map((t=>ZU(t())));return this.internalReplicationState&&await mH(this.internalReplicationState),this.metaInstance&&t.push(mG(this.internalReplicationState).checkpointQueue.then((()=>mG(this.metaInstance).close()))),this.subs.forEach((t=>t.unsubscribe())),this.subjects.canceled.next(!0),this.subjects.active.complete(),this.subjects.canceled.complete(),this.subjects.error.complete(),this.subjects.received.complete(),this.subjects.sent.complete(),Promise.all(t)},e.remove=async function(){await mG(this.metaInstance).remove();var t=await this.metaInfoPromise;await this.cancel(),await async function(t,e,n){if(t.schema.version!==n.version)throw ZO("SNH",{schema:n,version:t.schema.version,name:t.name,collection:t,args:{storageCollectionName:e}});for(var i=gJ(IJ(t.name,t.schema.jsonSchema),lJ);;){var r=await Jz(t.database.internalStore,i),o=NO(mG(r));if(!o.data.connectedStorages.find((t=>t.collectionName===e&&t.schema.version===n.version)))return;o.data.connectedStorages=o.data.connectedStorages.filter((t=>t.collectionName!==e));try{await qz(t.database.internalStore,{previous:mG(r),document:o},"remove-connected-storage-from-collection")}catch(t){if(!$O(t))throw t}}}(this.collection,t.collectionName,t.schema)},t}();function lW({replicationIdentifier:t,collection:e,deletedField:n="_deleted",pull:i,push:r,live:o=!0,retryTime:s=5e3,waitForLeadership:a=!0,autoStart:A=!0}){if(nq(tW),!i&&!r)throw ZO("UT3",{collection:e.name,args:{replicationIdentifier:t}});var l=new AW(t,e,n,i,r,o,s,A);return function(t,e){var n=t&&e.collection.database.multiInstance,i=n?e.collection.database.waitForLeadership():XU;i.then((()=>{e.isStopped()||e.autoStart&&e.start()}))}(a,l),l}function cW(t,e,n,i,r,o,s){try{var a=t[o](s),A=a.value}catch(t){return void n(t)}a.done?e(A):Promise.resolve(A).then(i,r)}function uW(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function s(t){cW(o,i,r,s,a,"next",t)}function a(t){cW(o,i,r,s,a,"throw",t)}s(void 0)}))}}nq(OH),nq(tW),nq(JV);let hW=null;const gW=function(){var t=uW((function*(t){var n;console.log("mode: production");let i=function(t={}){return new RV(t)}();if(!t||t.length<3)return;window.location.hash="room-"+t;yield JJ(t);const r=yield XJ({name:t,storage:i,cleanupPolicy:{minimumDeletedTime:26784e5,minimumCollectionAge:6e4,runEach:3e5,awaitReplicationsInSync:!0,waitForLeadership:!0}}),o=function(){var t=uW((function*(t){return MO(t.newDocumentState,t.realMasterState)?{isEqual:!0}:{isEqual:!1,documentData:t.newDocumentState.updatedAt>t.realMasterState.updatedAt?t.newDocumentState:t.realMasterState}}));return function(e){return t.apply(this,arguments)}}();window.db=r,r.waitForLeadership().then((()=>{document.title=" "+document.title})),yield r.addCollections({ids:{schema:nW,conflictHandler:o,migrationStrategies:{1:function(t){return null}}},edges:{schema:eW,conflictHandler:o,migrationStrategies:{1:function(t){return t},2:function(t){return t}}}}).catch((t=>(console.log("my migr err",t),r)));const s=(0,WE.getBackendSrv)().fetch({url:"/api/plugins/vaduga-mapgl-app/resources/ping"}),a=(yield(0,gj.lastValueFrom)(s)).data;console.log("Ping: ",a);const A=Date.now().toString(),l=Number(A.slice(0,10)),c=(null==a?void 0:a.expiresAt)?parseInt(null==a?void 0:a.expiresAt,10):null;null==a||a.featLimit;if(!c||l>c){return(0,WE.getAppEvents)().publish({type:e.AppEvents.alertWarning.name,payload:[""+(l>c?`License token expired ${null==a?void 0:a.expiresAtFmt}`:"License token invalid")]}),r}const u=window.location;u.protocol,u.host;return null===(n=Object.values(r.collections))||void 0===n||n.map((t=>t.name)).map((t=>{lW({collection:r[t],live:!1,pull:{batchSize:100,handler:(e,n)=>uW((function*(){let n;const i=e?e.updatedAt:0;switch(t){case"ids":n=yield j1(i).catch((e=>console.log(`failed to get ${t}:`+e))),n.length;break;case"edges":n=yield Y1(i).catch((e=>console.log(`failed to get ${t}:`+e))),n.length}return console.log(`${t} from remote:`,n,TO(n)),console.log("checkpoit",e),{documents:n,checkpoint:0===n.length?e:{id:"ids"===t?TO(n).name:TO(n).id,updatedAt:TO(n).updatedAt+1}}}))()},push:{batchSize:100,handler:e=>uW((function*(){const n=e.map((t=>t.newDocumentState));switch(t){case"ids":return n.length&&(yield K1(n),console.log("ids push docs",n)),[];case"edges":return n.length&&(yield z1(n),console.log("edges push docs",n)),[]}}))()},autoStart:!0}).error$.subscribe((t=>{console.log("Got replication error:"),console.dir(t)}))})),r}));return function(e){return t.apply(this,arguments)}}(),dW=function(){var t=uW((function*(t,e){return hW?e&&(db=yield hW,yield db.destroy().catch((t=>console.error("Error closing RxDB:",t))),hW=gW(t)):hW=gW(t),hW}));return function(e,n){return t.apply(this,arguments)}}();function pW(t,e,n,i,r,o,s){try{var a=t[o](s),A=a.value}catch(t){return void n(t)}a.done?e(A):Promise.resolve(A).then(i,r)}function fW(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function s(t){pW(o,i,r,s,a,"next",t)}function a(t){pW(o,i,r,s,a,"throw",t)}s(void 0)}))}}function mW(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IW(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){mW(t,e,n[e])}))}return t}function yW(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}const CW=function(){var t=fW((function*({roomID:t,reset:e}){return yield dW(t,e)}));return function(e){return t.apply(this,arguments)}}();function EW(t){return _W.apply(this,arguments)}function _W(){return _W=fW((function*({edges:t,graph:e,theme:n,commentsData:i,nameToScoreMap:r,scoreToNameMap:o,eCount:a,vCount:A}){null==t||t.forEach((t=>{const{id:l,parPath:c,isEph:u}=t,h=null==l?void 0:l.split("-"),g=h[0]===h[1],d=h[0],p=o.get(d);if(g&&2===c.length&&c.every((t=>"number"==typeof t))){if(p){const t={rxPtId:d,coords:c};r.set(p,t)}}else{const t=e.findNode(p),r=c.map((t=>Array.isArray(t)?t:o.get(t))).filter((t=>t));r.length&&t&&(0,s.Ye)({graph:e,parPath:r,lineExtraProps:null,commentsData:i,theme:n,isEdit:!0,isEph:u,vCount:A,eCount:a})}}));let l=0;const c=e.getNodes;if(null==c?void 0:c.length)for(let t=0;t<c.length;t++){var u;const e=c[t],n=e.getPropertyValue("feature");if(!n)continue;const{locName:i}=n.properties,o=n.geometry,s=r.get(i);let a,A,h,g;void 0!==s&&({rxPtId:a,coords:A,ack:h,msg:g}=s);const d={threshold:yW(IW({},null===(u=n.properties)||void 0===u?void 0:u.threshold),{ack:h,msg:g})},p=yW(IW({},n),{id:l,properties:IW({},n.properties,d&&Object.entries(d).reduce(((t,[e,n])=>void 0!==n?yW(IW({},t),{[e]:n}):t),{}))}),f={type:"Point",coordinates:null!=A?A:o.coordinates};A&&(p.restoreCoords=o.coordinates.slice()),p.geometry=f,a&&e.setDataProperty("rxPtId",a),e.setDataProperty("feature",p),l++}})),_W.apply(this,arguments)}const vW=({time:t})=>{const n=(0,HE.useStyles2)(BW),i=(0,e.dateTime)(t).format("YYYY-MM-DD HH:mm:ss");return o().createElement("div",{className:n.stateTime},"annots time: ",i)},BW=t=>({stateTime:tv.css`
        margin-bottom: 0px;
        margin-right: ${t.spacing(1)};
        z-index: 1;               
      font-size: x-small;
      //bottom: 5px;
      //right: 1%;
      //transform: translateX(100%);
    `});var wW=g(5213),bW=g(1750),QW=g(1023),xW=g(7372);const DW=r.createContext({});var SW=g(9009),MW=g(6733);function kW(t){return(0,MW.Ay)("MuiList",t)}(0,SW.A)("MuiList",["root","padding","dense","subheader"]);var RW=g(2540);const NW=["children","className","component","dense","disablePadding","subheader"],PW=(0,wW.Ay)("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})((({ownerState:t})=>(0,bv.A)({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0}))),TW=r.forwardRef((function(t,e){const n=(0,xW.b)({props:t,name:"MuiList"}),{children:i,className:o,component:s="ul",dense:a=!1,disablePadding:A=!1,subheader:l}=n,c=(0,Qv.A)(n,NW),u=r.useMemo((()=>({dense:a})),[a]),h=(0,bv.A)({},n,{component:s,dense:a,disablePadding:A}),g=(t=>{const{classes:e,disablePadding:n,dense:i,subheader:r}=t,o={root:["root",!n&&"padding",i&&"dense",r&&"subheader"]};return(0,QW.A)(o,kW,e)})(h);return(0,RW.jsx)(DW.Provider,{value:u,children:(0,RW.jsxs)(PW,(0,bv.A)({as:s,className:(0,bW.A)(g.root,o),ref:e,ownerState:h},c,{children:[l,i]}))})})),LW=TW;var FW=g(495);function OW(t){return(0,MW.Ay)("MuiDivider",t)}(0,SW.A)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const GW=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],UW=(0,wW.Ay)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.absolute&&e.absolute,e[n.variant],n.light&&e.light,"vertical"===n.orientation&&e.vertical,n.flexItem&&e.flexItem,n.children&&e.withChildren,n.children&&"vertical"===n.orientation&&e.withChildrenVertical,"right"===n.textAlign&&"vertical"!==n.orientation&&e.textAlignRight,"left"===n.textAlign&&"vertical"!==n.orientation&&e.textAlignLeft]}})((({theme:t,ownerState:e})=>(0,bv.A)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin"},e.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},e.light&&{borderColor:t.vars?`rgba(${t.vars.palette.dividerChannel} / 0.08)`:(0,FW.X4)(t.palette.divider,.08)},"inset"===e.variant&&{marginLeft:72},"middle"===e.variant&&"horizontal"===e.orientation&&{marginLeft:t.spacing(2),marginRight:t.spacing(2)},"middle"===e.variant&&"vertical"===e.orientation&&{marginTop:t.spacing(1),marginBottom:t.spacing(1)},"vertical"===e.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},e.flexItem&&{alignSelf:"stretch",height:"auto"})),(({ownerState:t})=>(0,bv.A)({},t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}})),(({theme:t,ownerState:e})=>(0,bv.A)({},e.children&&"vertical"!==e.orientation&&{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(t.vars||t).palette.divider}`,borderTopStyle:"inherit"}})),(({theme:t,ownerState:e})=>(0,bv.A)({},e.children&&"vertical"===e.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(t.vars||t).palette.divider}`,borderLeftStyle:"inherit"}})),(({ownerState:t})=>(0,bv.A)({},"right"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===t.textAlign&&"vertical"!==t.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}}))),jW=(0,wW.Ay)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.wrapper,"vertical"===n.orientation&&e.wrapperVertical]}})((({theme:t,ownerState:e})=>(0,bv.A)({display:"inline-block",paddingLeft:`calc(${t.spacing(1)} * 1.2)`,paddingRight:`calc(${t.spacing(1)} * 1.2)`},"vertical"===e.orientation&&{paddingTop:`calc(${t.spacing(1)} * 1.2)`,paddingBottom:`calc(${t.spacing(1)} * 1.2)`}))),YW=r.forwardRef((function(t,e){const n=(0,xW.b)({props:t,name:"MuiDivider"}),{absolute:i=!1,children:r,className:o,component:s=(r?"div":"hr"),flexItem:a=!1,light:A=!1,orientation:l="horizontal",role:c=("hr"!==s?"separator":void 0),textAlign:u="center",variant:h="fullWidth"}=n,g=(0,Qv.A)(n,GW),d=(0,bv.A)({},n,{absolute:i,component:s,flexItem:a,light:A,orientation:l,role:c,textAlign:u,variant:h}),p=(t=>{const{absolute:e,children:n,classes:i,flexItem:r,light:o,orientation:s,textAlign:a,variant:A}=t,l={root:["root",e&&"absolute",A,o&&"light","vertical"===s&&"vertical",r&&"flexItem",n&&"withChildren",n&&"vertical"===s&&"withChildrenVertical","right"===a&&"vertical"!==s&&"textAlignRight","left"===a&&"vertical"!==s&&"textAlignLeft"],wrapper:["wrapper","vertical"===s&&"wrapperVertical"]};return(0,QW.A)(l,OW,i)})(d);return(0,RW.jsx)(UW,(0,bv.A)({as:s,className:(0,bW.A)(p.root,o),role:c,ref:e,ownerState:d},g,{children:r?(0,RW.jsx)(jW,{className:p.wrapper,ownerState:d,children:r}):null}))}));YW.muiSkipListHighlight=!0;const KW=YW;const zW=r.createContext(null);var JW=[];var qW="data-rc-order",HW="data-rc-priority",VW="rc-util-key",WW=new Map;function ZW(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mark;return t?t.startsWith("data-")?t:"data-".concat(t):VW}function XW(t){return t.attachTo?t.attachTo:document.querySelector("head")||document.body}function $W(t){return Array.from((WW.get(t)||t).children).filter((function(t){return"STYLE"===t.tagName}))}function tZ(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!uv())return null;var n=e.csp,i=e.prepend,r=e.priority,o=void 0===r?0:r,s=function(t){return"queue"===t?"prependQueue":t?"prepend":"append"}(i),a="prependQueue"===s,A=document.createElement("style");A.setAttribute(qW,s),a&&o&&A.setAttribute(HW,"".concat(o)),null!=n&&n.nonce&&(A.nonce=null==n?void 0:n.nonce),A.innerHTML=t;var l=XW(e),c=l.firstChild;if(i){if(a){var u=(e.styles||$W(l)).filter((function(t){if(!["prepend","prependQueue"].includes(t.getAttribute(qW)))return!1;var e=Number(t.getAttribute(HW)||0);return o>=e}));if(u.length)return l.insertBefore(A,u[u.length-1].nextSibling),A}l.insertBefore(A,c)}else l.appendChild(A);return A}function eZ(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=XW(e);return(e.styles||$W(n)).find((function(n){return n.getAttribute(ZW(e))===t}))}function nZ(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=eZ(t,e);n&&XW(e).removeChild(n)}function iZ(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=XW(n),r=$W(i),o=iv(iv({},n),{},{styles:r});!function(t,e){var n=WW.get(t);if(!n||!function(t,e){if(!t)return!1;if(t.contains)return t.contains(e);for(var n=e;n;){if(n===t)return!0;n=n.parentNode}return!1}(document,n)){var i=tZ("",e),r=i.parentNode;WW.set(t,r),t.removeChild(i)}}(i,o);var s=eZ(e,o);if(s){var a,A,l;if(null!==(a=o.csp)&&void 0!==a&&a.nonce&&s.nonce!==(null===(A=o.csp)||void 0===A?void 0:A.nonce))s.nonce=null===(l=o.csp)||void 0===l?void 0:l.nonce;return s.innerHTML!==t&&(s.innerHTML=t),s}var c=tZ(t,o);return c.setAttribute(ZW(o),e),c}function rZ(t){var e="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),n=document.createElement("div");n.id=e;var i,r,o=n.style;if(o.position="absolute",o.left="0",o.top="0",o.width="100px",o.height="100px",o.overflow="scroll",t){var s=getComputedStyle(t);o.scrollbarColor=s.scrollbarColor,o.scrollbarWidth=s.scrollbarWidth;var a=getComputedStyle(t,"::-webkit-scrollbar"),A=parseInt(a.width,10),l=parseInt(a.height,10);try{var c=A?"width: ".concat(a.width,";"):"",u=l?"height: ".concat(a.height,";"):"";iZ("\n#".concat(e,"::-webkit-scrollbar {\n").concat(c,"\n").concat(u,"\n}"),e)}catch(t){console.error(t),i=A,r=l}}document.body.appendChild(n);var h=t&&i&&!isNaN(i)?i:n.offsetWidth-n.clientWidth,g=t&&r&&!isNaN(r)?r:n.offsetHeight-n.clientHeight;return document.body.removeChild(n),nZ(e),{width:h,height:g}}var oZ="rc-util-locker-".concat(Date.now()),sZ=0;function aZ(t){var e=!!t,n=av(r.useState((function(){return sZ+=1,"".concat(oZ,"_").concat(sZ)})),1)[0];pv((function(){if(e){var t=(r=document.body,"undefined"!=typeof document&&r&&r instanceof Element?rZ(r):{width:0,height:0}).width,i=document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth;iZ("\nhtml body {\n  overflow-y: hidden;\n  ".concat(i?"width: calc(100% - ".concat(t,"px);"):"","\n}"),n)}else nZ(n);var r;return function(){nZ(n)}}),[e,n])}var AZ=!1;var lZ=function(t){return!1!==t&&(uv()&&t?"string"==typeof t?document.querySelector(t):"function"==typeof t?t():t:null)},cZ=r.forwardRef((function(t,e){var n=t.open,i=t.autoLock,o=t.getContainer,s=(t.debug,t.autoDestroy),a=void 0===s||s,A=t.children,l=av(r.useState(n),2),c=l[0],u=l[1],h=c||n;r.useEffect((function(){(a||n)&&u(n)}),[n,a]);var g=av(r.useState((function(){return lZ(o)})),2),d=g[0],p=g[1];r.useEffect((function(){var t=lZ(o);p(null!=t?t:null)}));var f=function(t){var e=av(r.useState((function(){return uv()?document.createElement("div"):null})),1)[0],n=r.useRef(!1),i=r.useContext(zW),o=av(r.useState(JW),2),s=o[0],a=o[1],A=i||(n.current?void 0:function(t){a((function(e){return[t].concat(sv(e))}))});function l(){e.parentElement||document.body.appendChild(e),n.current=!0}function c(){var t;null===(t=e.parentElement)||void 0===t||t.removeChild(e),n.current=!1}return pv((function(){return t?i?i(l):l():c(),c}),[t]),pv((function(){s.length&&(s.forEach((function(t){return t()})),a(JW))}),[s]),[e,A]}(h&&!d),m=av(f,2),I=m[0],y=m[1],C=null!=d?d:I;aZ(i&&n&&uv()&&(C===I||C===document.body));var E=null;A&&Zv(A)&&e&&(E=A.ref);var _=Wv(E,e);if(!h||!uv()||void 0===d)return null;var v,B=!1===C||("boolean"==typeof v&&(AZ=v),AZ),w=A;return e&&(w=r.cloneElement(A,{ref:_})),r.createElement(zW.Provider,{value:y},B?w:(0,nE.createPortal)(w,C))}));const uZ=cZ;var hZ=r.createContext(null),gZ=r.createContext({});const dZ=hZ;function pZ(t){return t instanceof HTMLElement||t instanceof SVGElement}function fZ(t){var e,n=function(t){return t&&"object"===Ye(t)&&pZ(t.nativeElement)?t.nativeElement:pZ(t)?t:null}(t);return n||(t instanceof o().Component?null===(e=iE().findDOMNode)||void 0===e?void 0:e.call(iE(),t):null)}var mZ=r.createContext({});function IZ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yZ(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tQ(t,e)}function CZ(t){var e=YO();return function(){var n,i=jO(t);if(e){var r=jO(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"==Ye(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return $b(t)}(this,n)}}const EZ=function(t){yZ(n,t);var e=CZ(n);function n(){return IZ(this,n),e.apply(this,arguments)}return SO(n,[{key:"render",value:function(){return this.props.children}}]),n}(r.Component);var _Z="none",vZ="appear",BZ="enter",wZ="leave",bZ="none",QZ="prepare",xZ="start",DZ="active",SZ="end",MZ="prepared";function kZ(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit".concat(t)]="webkit".concat(e),n["Moz".concat(t)]="moz".concat(e),n["ms".concat(t)]="MS".concat(e),n["O".concat(t)]="o".concat(e.toLowerCase()),n}var RZ,NZ,PZ,TZ=(RZ=uv(),NZ="undefined"!=typeof window?window:{},PZ={animationend:kZ("Animation","AnimationEnd"),transitionend:kZ("Transition","TransitionEnd")},RZ&&("AnimationEvent"in NZ||delete PZ.animationend.animation,"TransitionEvent"in NZ||delete PZ.transitionend.transition),PZ),LZ={};if(uv()){var FZ=document.createElement("div");LZ=FZ.style}var OZ={};function GZ(t){if(OZ[t])return OZ[t];var e=TZ[t];if(e)for(var n=Object.keys(e),i=n.length,r=0;r<i;r+=1){var o=n[r];if(Object.prototype.hasOwnProperty.call(e,o)&&o in LZ)return OZ[t]=e[o],OZ[t]}return""}var UZ=GZ("animationend"),jZ=GZ("transitionend"),YZ=!(!UZ||!jZ),KZ=UZ||"animationend",zZ=jZ||"transitionend";function JZ(t,e){return t?"object"===Ye(t)?t[e.replace(/-\w/g,(function(t){return t[1].toUpperCase()}))]:"".concat(t,"-").concat(e):null}const qZ=function(t){var e=(0,r.useRef)();function n(e){e&&(e.removeEventListener(zZ,t),e.removeEventListener(KZ,t))}return r.useEffect((function(){return function(){n(e.current)}}),[]),[function(i){e.current&&e.current!==i&&n(e.current),i&&i!==e.current&&(i.addEventListener(zZ,t),i.addEventListener(KZ,t),e.current=i)},n]};const HZ=uv()?r.useLayoutEffect:r.useEffect;var VZ=function(t){return+setTimeout(t,16)},WZ=function(t){return clearTimeout(t)};"undefined"!=typeof window&&"requestAnimationFrame"in window&&(VZ=function(t){return window.requestAnimationFrame(t)},WZ=function(t){return window.cancelAnimationFrame(t)});var ZZ=0,XZ=new Map;function $Z(t){XZ.delete(t)}var tX=function(t){var e=ZZ+=1;return function n(i){if(0===i)$Z(e),t();else{var r=VZ((function(){n(i-1)}));XZ.set(e,r)}}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),e};tX.cancel=function(t){var e=XZ.get(t);return $Z(t),WZ(e)};const eX=tX;var nX=[QZ,xZ,DZ,SZ],iX=[QZ,MZ],rX=!1,oX=!0;function sX(t){return t===DZ||t===SZ}const aX=function(t,e,n){var i=av(fv(bZ),2),o=i[0],s=i[1],a=function(){var t=r.useRef(null);function e(){eX.cancel(t.current)}return r.useEffect((function(){return function(){e()}}),[]),[function n(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;e();var o=eX((function(){r<=1?i({isCanceled:function(){return o!==t.current}}):n(i,r-1)}));t.current=o},e]}(),A=av(a,2),l=A[0],c=A[1];var u=e?iX:nX;return HZ((function(){if(o!==bZ&&o!==SZ){var t=u.indexOf(o),e=u[t+1],i=n(o);i===rX?s(e,!0):e&&l((function(t){function n(){t.isCanceled()||s(e,!0)}!0===i?n():Promise.resolve(i).then(n)}))}}),[t,o]),r.useEffect((function(){return function(){c()}}),[]),[function(){s(QZ,!0)},o]};function AX(t,e,n,i){var o,s,a,A,l=i.motionEnter,c=void 0===l||l,u=i.motionAppear,h=void 0===u||u,g=i.motionLeave,d=void 0===g||g,p=i.motionDeadline,f=i.motionLeaveImmediately,m=i.onAppearPrepare,I=i.onEnterPrepare,y=i.onLeavePrepare,C=i.onAppearStart,E=i.onEnterStart,_=i.onLeaveStart,v=i.onAppearActive,B=i.onEnterActive,w=i.onLeaveActive,b=i.onAppearEnd,Q=i.onEnterEnd,x=i.onLeaveEnd,D=i.onVisibleChanged,S=av(fv(),2),M=S[0],k=S[1],R=(o=_Z,s=r.useReducer((function(t){return t+1}),0),a=av(s,2)[1],A=r.useRef(o),[cv((function(){return A.current})),cv((function(t){A.current="function"==typeof t?t(A.current):t,a()}))]),N=av(R,2),P=N[0],T=N[1],L=av(fv(null),2),F=L[0],O=L[1],G=P(),U=(0,r.useRef)(!1),j=(0,r.useRef)(null);function Y(){return n()}var K=(0,r.useRef)(!1);function z(){T(_Z),O(null,!0)}var J=cv((function(t){var e=P();if(e!==_Z){var n=Y();if(!t||t.deadline||t.target===n){var i,r=K.current;e===vZ&&r?i=null==b?void 0:b(n,t):e===BZ&&r?i=null==Q?void 0:Q(n,t):e===wZ&&r&&(i=null==x?void 0:x(n,t)),r&&!1!==i&&z()}}})),q=av(qZ(J),1)[0],H=function(t){switch(t){case vZ:return ze(ze(ze({},QZ,m),xZ,C),DZ,v);case BZ:return ze(ze(ze({},QZ,I),xZ,E),DZ,B);case wZ:return ze(ze(ze({},QZ,y),xZ,_),DZ,w);default:return{}}},V=r.useMemo((function(){return H(G)}),[G]),W=av(aX(G,!t,(function(t){if(t===QZ){var e=V[QZ];return e?e(Y()):rX}var n;X in V&&O((null===(n=V[X])||void 0===n?void 0:n.call(V,Y(),null))||null);return X===DZ&&G!==_Z&&(q(Y()),p>0&&(clearTimeout(j.current),j.current=setTimeout((function(){J({deadline:!0})}),p))),X===MZ&&z(),oX})),2),Z=W[0],X=W[1],$=sX(X);K.current=$,HZ((function(){k(e);var n,i=U.current;U.current=!0,!i&&e&&h&&(n=vZ),i&&e&&c&&(n=BZ),(i&&!e&&d||!i&&f&&!e&&d)&&(n=wZ);var r=H(n);n&&(t||r[QZ])?(T(n),Z()):T(_Z)}),[e]),(0,r.useEffect)((function(){(G===vZ&&!h||G===BZ&&!c||G===wZ&&!d)&&T(_Z)}),[h,c,d]),(0,r.useEffect)((function(){return function(){U.current=!1,clearTimeout(j.current)}}),[]);var tt=r.useRef(!1);(0,r.useEffect)((function(){M&&(tt.current=!0),void 0!==M&&G===_Z&&((tt.current||M)&&(null==D||D(M)),tt.current=!0)}),[M,G]);var et=F;return V[QZ]&&X===xZ&&(et=iv({transition:"none"},et)),[G,X,et,null!=M?M:e]}const lX=function(t){var e=t;"object"===Ye(t)&&(e=t.transitionSupport);var n=r.forwardRef((function(t,n){var i=t.visible,o=void 0===i||i,s=t.removeOnLeave,a=void 0===s||s,A=t.forceRender,l=t.children,c=t.motionName,u=t.leavedClassName,h=t.eventProps,g=function(t,n){return!(!t.motionName||!e||!1===n)}(t,r.useContext(mZ).motion),d=(0,r.useRef)(),p=(0,r.useRef)();var f=av(AX(g,o,(function(){try{return d.current instanceof HTMLElement?d.current:fZ(p.current)}catch(t){return null}}),t),4),m=f[0],I=f[1],y=f[2],C=f[3],E=r.useRef(C);C&&(E.current=!0);var _,v=r.useCallback((function(t){d.current=t,Hv(n,t)}),[n]),B=iv(iv({},h),{},{visible:o});if(l)if(m===_Z)_=C?l(iv({},B),v):!a&&E.current&&u?l(iv(iv({},B),{},{className:u}),v):A||!a&&!u?l(iv(iv({},B),{},{style:{display:"none"}}),v):null;else{var w;I===QZ?w="prepare":sX(I)?w="active":I===xZ&&(w="start");var b=JZ(c,"".concat(m,"-").concat(w));_=l(iv(iv({},B),{},{className:lv()(JZ(c,m),ze(ze({},b,b&&w),c,"string"==typeof c)),style:y}),v)}else _=null;r.isValidElement(_)&&Zv(_)&&(_.ref||(_=r.cloneElement(_,{ref:v})));return r.createElement(EZ,{ref:p},_)}));return n.displayName="CSSMotion",n}(YZ);var cX="add",uX="keep",hX="remove",gX="removed";function dX(t){var e;return iv(iv({},e=t&&"object"===Ye(t)&&"key"in t?t:{key:t}),{},{key:String(e.key)})}function pX(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(dX)}var fX=["component","children","onVisibleChanged","onAllRemoved"],mX=["status"],IX=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];!function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lX,e=function(e){yZ(i,e);var n=CZ(i);function i(){var t;IZ(this,i);for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return ze($b(t=n.call.apply(n,[this].concat(r))),"state",{keyEntities:[]}),ze($b(t),"removeKey",(function(e){var n=t.state.keyEntities.map((function(t){return t.key!==e?t:iv(iv({},t),{},{status:gX})}));return t.setState({keyEntities:n}),n.filter((function(t){return t.status!==gX})).length})),t}return SO(i,[{key:"render",value:function(){var e=this,n=this.state.keyEntities,i=this.props,o=i.component,s=i.children,a=i.onVisibleChanged,A=i.onAllRemoved,l=xv(i,fX),c=o||r.Fragment,u={};return IX.forEach((function(t){u[t]=l[t],delete l[t]})),delete l.keys,r.createElement(c,l,n.map((function(n,i){var o=n.status,l=xv(n,mX),c=o===cX||o===uX;return r.createElement(t,(0,bv.A)({},u,{key:l.key,visible:c,eventProps:l,onVisibleChanged:function(t){(null==a||a(t,{key:l.key}),t)||0===e.removeKey(l.key)&&A&&A()}}),(function(t,e){return s(iv(iv({},t),{},{index:i}),e)}))})))}}],[{key:"getDerivedStateFromProps",value:function(t,e){var n=t.keys,i=e.keyEntities,r=pX(n),o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],i=0,r=e.length,o=pX(t),s=pX(e);o.forEach((function(t){for(var e=!1,o=i;o<r;o+=1){var a=s[o];if(a.key===t.key){i<o&&(n=n.concat(s.slice(i,o).map((function(t){return iv(iv({},t),{},{status:cX})}))),i=o),n.push(iv(iv({},a),{},{status:uX})),i+=1,e=!0;break}}e||n.push(iv(iv({},t),{},{status:hX}))})),i<r&&(n=n.concat(s.slice(i).map((function(t){return iv(iv({},t),{},{status:cX})}))));var a={};return n.forEach((function(t){var e=t.key;a[e]=(a[e]||0)+1})),Object.keys(a).filter((function(t){return a[t]>1})).forEach((function(t){(n=n.filter((function(e){var n=e.key,i=e.status;return n!==t||i!==hX}))).forEach((function(e){e.key===t&&(e.status=uX)}))})),n}(i,r);return{keyEntities:o.filter((function(t){var e=i.find((function(e){var n=e.key;return t.key===n}));return!e||e.status!==gX||t.status!==hX}))}}}]),i}(r.Component);ze(e,"defaultProps",{component:"div"})}(YZ);const yX=lX;var CX="".concat("accept acceptCharset accessKey action allowFullScreen allowTransparency\n    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge\n    charSet checked classID className colSpan cols content contentEditable contextMenu\n    controls coords crossOrigin data dateTime default defer dir disabled download draggable\n    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder\n    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity\n    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media\n    mediaGroup method min minLength multiple muted name noValidate nonce open\n    optimum pattern placeholder poster preload radioGroup readOnly rel required\n    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected\n    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style\n    summary tabIndex target title type useMap value width wmode wrap"," ").concat("onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown\n    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick\n    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown\n    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel\n    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough\n    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata\n    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError").split(/[\s\n]+/),EX="aria-",_X="data-";function vX(t,e){return 0===t.indexOf(e)}function BX(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=!1===n?{aria:!0,data:!0,attr:!0}:!0===n?{aria:!0}:iv({},n);var i={};return Object.keys(t).forEach((function(n){(e.aria&&("role"===n||vX(n,EX))||e.data&&vX(n,_X)||e.attr&&CX.includes(n))&&(i[n]=t[n])})),i}var wX=["prefixCls","className","containerRef"];const bX=function(t){var e=t.prefixCls,n=t.className,i=t.containerRef,o=xv(t,wX),s=r.useContext(gZ).panel,a=Wv(s,i);return r.createElement("div",(0,bv.A)({className:lv()("".concat(e,"-content"),n),role:"dialog",ref:a},BX(t,{aria:!0}),{"aria-modal":"true"},o))};function QX(t){return"string"==typeof t&&String(Number(t))===t?(Bv(!1,"Invalid value type of `width` or `height` which should be number type instead."),Number(t)):t}var xX={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"};function DX(t,e){var n,i,o,s=t.prefixCls,a=t.open,A=t.placement,l=t.inline,c=t.push,u=t.forceRender,h=t.autoFocus,g=t.keyboard,d=t.classNames,p=t.rootClassName,f=t.rootStyle,m=t.zIndex,I=t.className,y=t.id,C=t.style,E=t.motion,_=t.width,v=t.height,B=t.children,w=t.mask,b=t.maskClosable,Q=t.maskMotion,x=t.maskClassName,D=t.maskStyle,S=t.afterOpenChange,M=t.onClose,k=t.onMouseEnter,R=t.onMouseOver,N=t.onMouseLeave,P=t.onClick,T=t.onKeyDown,L=t.onKeyUp,F=t.styles,O=t.drawerRender,G=r.useRef(),U=r.useRef(),j=r.useRef();r.useImperativeHandle(e,(function(){return G.current}));r.useEffect((function(){var t;a&&h&&(null===(t=G.current)||void 0===t||t.focus({preventScroll:!0}))}),[a]);var Y=av(r.useState(!1),2),K=Y[0],z=Y[1],J=r.useContext(dZ),q=null!==(n=null!==(i=null===(o="boolean"==typeof c?c?{}:{distance:0}:c||{})||void 0===o?void 0:o.distance)&&void 0!==i?i:null==J?void 0:J.pushDistance)&&void 0!==n?n:180,H=r.useMemo((function(){return{pushDistance:q,push:function(){z(!0)},pull:function(){z(!1)}}}),[q]);r.useEffect((function(){var t,e;a?null==J||null===(t=J.push)||void 0===t||t.call(J):null==J||null===(e=J.pull)||void 0===e||e.call(J)}),[a]),r.useEffect((function(){return function(){var t;null==J||null===(t=J.pull)||void 0===t||t.call(J)}}),[]);var V=w&&r.createElement(yX,(0,bv.A)({key:"mask"},Q,{visible:a}),(function(t,e){var n=t.className,i=t.style;return r.createElement("div",{className:lv()("".concat(s,"-mask"),n,null==d?void 0:d.mask,x),style:iv(iv(iv({},i),D),null==F?void 0:F.mask),onClick:b&&a?M:void 0,ref:e})})),W="function"==typeof E?E(A):E,Z={};if(K&&q)switch(A){case"top":Z.transform="translateY(".concat(q,"px)");break;case"bottom":Z.transform="translateY(".concat(-q,"px)");break;case"left":Z.transform="translateX(".concat(q,"px)");break;default:Z.transform="translateX(".concat(-q,"px)")}"left"===A||"right"===A?Z.width=QX(_):Z.height=QX(v);var X={onMouseEnter:k,onMouseOver:R,onMouseLeave:N,onClick:P,onKeyDown:T,onKeyUp:L},$=r.createElement(yX,(0,bv.A)({key:"panel"},W,{visible:a,forceRender:u,onVisibleChanged:function(t){null==S||S(t)},removeOnLeave:!1,leavedClassName:"".concat(s,"-content-wrapper-hidden")}),(function(e,n){var i=e.className,o=e.style,a=r.createElement(bX,(0,bv.A)({id:y,containerRef:n,prefixCls:s,className:lv()(I,null==d?void 0:d.content),style:iv(iv({},C),null==F?void 0:F.content)},BX(t,{aria:!0}),X),B);return r.createElement("div",(0,bv.A)({className:lv()("".concat(s,"-content-wrapper"),null==d?void 0:d.wrapper,i),style:iv(iv(iv({},Z),o),null==F?void 0:F.wrapper)},BX(t,{data:!0})),O?O(a):a)})),tt=iv({},f);return m&&(tt.zIndex=m),r.createElement(dZ.Provider,{value:H},r.createElement("div",{className:lv()(s,"".concat(s,"-").concat(A),p,ze(ze({},"".concat(s,"-open"),a),"".concat(s,"-inline"),l)),style:tt,tabIndex:-1,ref:G,onKeyDown:function(t){var e=t.keyCode,n=t.shiftKey;switch(e){case Rv.TAB:var i;if(e===Rv.TAB)if(n||document.activeElement!==j.current){if(n&&document.activeElement===U.current){var r;null===(r=j.current)||void 0===r||r.focus({preventScroll:!0})}}else null===(i=U.current)||void 0===i||i.focus({preventScroll:!0});break;case Rv.ESC:M&&g&&(t.stopPropagation(),M(t))}}},V,r.createElement("div",{tabIndex:0,ref:U,style:xX,"aria-hidden":"true","data-sentinel":"start"}),$,r.createElement("div",{tabIndex:0,ref:j,style:xX,"aria-hidden":"true","data-sentinel":"end"})))}const SX=r.forwardRef(DX);const MX=function(t){var e=t.open,n=void 0!==e&&e,i=t.prefixCls,o=void 0===i?"rc-drawer":i,s=t.placement,a=void 0===s?"right":s,A=t.autoFocus,l=void 0===A||A,c=t.keyboard,u=void 0===c||c,h=t.width,g=void 0===h?378:h,d=t.mask,p=void 0===d||d,f=t.maskClosable,m=void 0===f||f,I=t.getContainer,y=t.forceRender,C=t.afterOpenChange,E=t.destroyOnClose,_=t.onMouseEnter,v=t.onMouseOver,B=t.onMouseLeave,w=t.onClick,b=t.onKeyDown,Q=t.onKeyUp,x=t.panelRef,D=av(r.useState(!1),2),S=D[0],M=D[1];var k=av(r.useState(!1),2),R=k[0],N=k[1];pv((function(){N(!0)}),[]);var P=!!R&&n,T=r.useRef(),L=r.useRef();pv((function(){P&&(L.current=document.activeElement)}),[P]);var F=r.useMemo((function(){return{panel:x}}),[x]);if(!y&&!S&&!P&&E)return null;var O={onMouseEnter:_,onMouseOver:v,onMouseLeave:B,onClick:w,onKeyDown:b,onKeyUp:Q},G=iv(iv({},t),{},{open:P,prefixCls:o,placement:a,autoFocus:l,keyboard:u,width:g,mask:p,maskClosable:m,inline:!1===I,afterOpenChange:function(t){var e,n;(M(t),null==C||C(t),t||!L.current||null!==(e=T.current)&&void 0!==e&&e.contains(L.current))||(null===(n=L.current)||void 0===n||n.focus({preventScroll:!0}))},ref:T},O);return r.createElement(gZ.Provider,{value:F},r.createElement(uZ,{open:P||y||S,autoDestroy:!1,getContainer:I,autoLock:p&&(P||S)},r.createElement(SX,G)))},kX=MX,RX={RadioButton:{container:"data-testid radio-button"},Breadcrumbs:{breadcrumb:t=>`data-testid ${t} breadcrumb`},TimePicker:{openButton:"data-testid TimePicker Open Button",overlayContent:"data-testid TimePicker Overlay Content",fromField:"data-testid Time Range from field",toField:"data-testid Time Range to field",applyTimeRange:"data-testid TimePicker submit button",copyTimeRange:"data-testid TimePicker copy button",pasteTimeRange:"data-testid TimePicker paste button",calendar:{label:"data-testid Time Range calendar",openButton:"data-testid Open time range calendar",closeButton:"data-testid Close time range Calendar"},absoluteTimeRangeTitle:"data-testid-absolute-time-range-narrow"},DataSourcePermissions:{form:()=>'form[name="addPermission"]',roleType:"Role to add new permission to",rolePicker:"Built-in role picker",permissionLevel:"Permission Level"},DateTimePicker:{input:"data-testid date-time-input"},DataSource:{TestData:{QueryTab:{scenarioSelectContainer:"Test Data Query scenario select container",scenarioSelect:"Test Data Query scenario select",max:"TestData max",min:"TestData min",noise:"TestData noise",seriesCount:"TestData series count",spread:"TestData spread",startValue:"TestData start value",drop:"TestData drop values"}},DataSourceHttpSettings:{urlInput:"data-testid Datasource HTTP settings url"},Jaeger:{traceIDInput:"Trace ID"},Prometheus:{configPage:{connectionSettings:"Data source connection URL",manageAlerts:"prometheus-alerts-manager",scrapeInterval:"data-testid scrape interval",queryTimeout:"data-testid query timeout",defaultEditor:"data-testid default editor",disableMetricLookup:"disable-metric-lookup",prometheusType:"data-testid prometheus type",prometheusVersion:"data-testid prometheus version",cacheLevel:"data-testid cache level",incrementalQuerying:"prometheus-incremental-querying",queryOverlapWindow:"data-testid query overlap window",disableRecordingRules:"disable-recording-rules",customQueryParameters:"data-testid custom query parameters",httpMethod:"data-testid http method",exemplarsAddButton:"data-testid Add exemplar config button",internalLinkSwitch:"data-testid Internal link switch",codeModeMetricNamesSuggestionLimit:"data-testid code mode metric names suggestion limit"},queryEditor:{explain:"data-testid prometheus explain switch wrapper",editorToggle:"data-testid QueryEditorModeToggle",options:"data-testid prometheus options",legend:"data-testid prometheus legend wrapper",format:"data-testid prometheus format",step:"prometheus-step",type:"data-testid prometheus type",exemplars:"prometheus-exemplars",builder:{metricSelect:"data-testid metric select",hints:"data-testid prometheus hints",metricsExplorer:"data-testid metrics explorer",queryAdvisor:"data-testid query advisor"},code:{queryField:"data-testid prometheus query field",metricsCountInfo:"data-testid metrics count disclaimer",metricsBrowser:{openButton:"data-testid open metrics browser",selectMetric:"data-testid select a metric",metricList:"data-testid metric list",labelNamesFilter:"data-testid label names filter",labelValuesFilter:"data-testid label values filter",useQuery:"data-testid use query",useAsRateQuery:"data-testid use as rate query",validateSelector:"data-testid validate selector",clear:"data-testid clear"}}},exemplarMarker:"data-testid Exemplar marker",variableQueryEditor:{queryType:"data-testid query type",labelnames:{metricRegex:"data-testid label names metric regex"},labelValues:{labelSelect:"data-testid label values label select"},metricNames:{metricRegex:"data-testid metric names metric regex"},varQueryResult:"data-testid variable query result",seriesQuery:"data-testid prometheus series query",classicQuery:"data-testid prometheus classic query"},annotations:{minStep:"prometheus-annotation-min-step",title:"data-testid prometheus annotation title",tags:"data-testid prometheus annotation tags",text:"data-testid prometheus annotation text",seriesValueAsTimestamp:"data-testid prometheus annotation series value as timestamp"}}},Menu:{MenuComponent:t=>`${t} menu`,MenuGroup:t=>`${t} menu group`,MenuItem:t=>`${t} menu item`,SubMenu:{container:"data-testid SubMenu container",icon:"data-testid SubMenu icon"}},Panels:{Panel:{title:t=>`data-testid Panel header ${t}`,content:"data-testid panel content",headerItems:t=>`data-testid Panel header item ${t}`,menuItems:t=>`data-testid Panel menu item ${t}`,menu:t=>`data-testid Panel menu ${t}`,containerByTitle:t=>`${t} panel`,headerCornerInfo:t=>`Panel header ${t}`,status:t=>`data-testid Panel status ${t}`,loadingBar:()=>"Panel loading bar",HoverWidget:{container:"data-testid hover-header-container",dragIcon:"data-testid drag-icon"},PanelDataErrorMessage:"data-testid Panel data error message"},Visualization:{Graph:{container:"Graph container",VisualizationTab:{legendSection:"Legend section"},Legend:{legendItemAlias:t=>`gpl alias ${t}`,showLegendSwitch:"gpl show legend"},xAxis:{labels:()=>"div.flot-x-axis > div.flot-tick-label"}},BarGauge:{value:"Bar gauge value",valueV2:"data-testid Bar gauge value"},PieChart:{svgSlice:"data testid Pie Chart Slice"},Text:{container:()=>".markdown-html"},Table:{header:"table header",footer:"table-footer",body:"data-testid table body"}}},VizLegend:{seriesName:t=>`data-testid VizLegend series ${t}`},Drawer:{General:{title:t=>`Drawer title ${t}`,expand:"Drawer expand",contract:"Drawer contract",close:"data-testid Drawer close",rcContentWrapper:()=>".rc-drawer-content-wrapper",subtitle:"data-testid drawer subtitle"},DashboardSaveDrawer:{saveButton:"data-testid Save dashboard drawer button",saveAsButton:"data-testid Save as dashboard drawer button",saveAsTitleInput:"Save dashboard title field"}},PanelEditor:{General:{content:"data-testid Panel editor content"},OptionsPane:{content:"data-testid Panel editor option pane content",select:"Panel editor option pane select",fieldLabel:t=>`${t} field property editor`,fieldInput:t=>`data-testid Panel editor option pane field input ${t}`},DataPane:{content:"data-testid Panel editor data pane content"},applyButton:"data-testid Apply changes and go back to dashboard",toggleVizPicker:"data-testid toggle-viz-picker",toggleVizOptions:"data-testid toggle-viz-options",toggleTableView:"data-testid toggle-table-view",showZoomField:"Map controls Show zoom control field property editor",showAttributionField:"Map controls Show attribution field property editor",showScaleField:"Map controls Show scale field property editor",showMeasureField:"Map controls Show measure tools field property editor",showDebugField:"Map controls Show debug field property editor",measureButton:"show measure tools"},PanelInspector:{Data:{content:"Panel inspector Data content"},Stats:{content:"Panel inspector Stats content"},Json:{content:"data-testid Panel inspector Json content"},Query:{content:"Panel inspector Query content",refreshButton:"Panel inspector Query refresh button",jsonObjectKeys:()=>".json-formatter-key"}},Tab:{title:t=>`Tab ${t}`,active:()=>'[class*="-activeTabStyle"]'},RefreshPicker:{runButton:"RefreshPicker run button",intervalButton:"RefreshPicker interval button",runButtonV2:"data-testid RefreshPicker run button",intervalButtonV2:"data-testid RefreshPicker interval button"},QueryTab:{content:"Query editor tab content",queryInspectorButton:"Query inspector button",queryHistoryButton:"data-testid query-history-button",addQuery:"data-testid query-tab-add-query",queryGroupTopSection:"data-testid query group top section",addExpression:"data-testid query-tab-add-expression"},QueryHistory:{queryText:"Query text"},QueryEditorRows:{rows:"Query editor row"},QueryEditorRow:{actionButton:t=>`data-testid ${t}`,title:t=>`Query editor row title ${t}`,container:t=>`Query editor row ${t}`},AlertTab:{content:"data-testid Alert editor tab content"},AlertRules:{groupToggle:"data-testid group-collapse-toggle",toggle:"data-testid collapse-toggle",expandedContent:"data-testid expanded-content",previewButton:"data-testid alert-rule preview-button",ruleNameField:"data-testid alert-rule name-field",newFolderButton:"data-testid alert-rule new-folder-button",newFolderNameField:"data-testid alert-rule name-folder-name-field",newFolderNameCreateButton:"data-testid alert-rule name-folder-name-create-button",newEvaluationGroupButton:"data-testid alert-rule new-evaluation-group-button",newEvaluationGroupName:"data-testid alert-rule new-evaluation-group-name",newEvaluationGroupInterval:"data-testid alert-rule new-evaluation-group-interval",newEvaluationGroupCreate:"data-testid alert-rule new-evaluation-group-create-button"},Alert:{alert:t=>`Alert ${t}`,alertV2:t=>`data-testid Alert ${t}`},TransformTab:{content:"data-testid Transform editor tab content",newTransform:t=>`data-testid New transform ${t}`,transformationEditor:t=>`data-testid Transformation editor ${t}`,transformationEditorDebugger:t=>`data-testid Transformation editor debugger ${t}`},Transforms:{card:t=>`data-testid New transform ${t}`,disableTransformationButton:"data-testid Disable transformation button",Reduce:{modeLabel:"data-testid Transform mode label",calculationsLabel:"data-testid Transform calculations label"},SpatialOperations:{actionLabel:"root Action field property editor",locationLabel:"root Location Mode field property editor",location:{autoOption:"Auto location option",coords:{option:"Coords location option",latitudeFieldLabel:"root Latitude field field property editor",longitudeFieldLabel:"root Longitude field field property editor"},geohash:{option:"Geohash location option",geohashFieldLabel:"root Geohash field field property editor"},lookup:{option:"Lookup location option",lookupFieldLabel:"root Lookup field field property editor",gazetteerFieldLabel:"root Gazetteer field property editor"}}},searchInput:"data-testid search transformations",noTransformationsMessage:"data-testid no transformations message",addTransformationButton:"data-testid add transformation button",removeAllTransformationsButton:"data-testid remove all transformations button"},NavBar:{Configuration:{button:"Configuration"},Toggle:{button:"data-testid Toggle menu"},Reporting:{button:"Reporting"}},NavMenu:{Menu:"data-testid navigation mega-menu",item:"data-testid Nav menu item"},NavToolbar:{container:"data-testid Nav toolbar",shareDashboard:"data-testid Share dashboard",markAsFavorite:"data-testid Mark as favorite",editDashboard:{editButton:"data-testid Edit dashboard button",saveButton:"data-testid Save dashboard button",exitButton:"data-testid Exit edit mode button",settingsButton:"data-testid Dashboard settings",addRowButton:"data-testid Add row button",addLibraryPanelButton:"data-testid Add a panel from the panel library button",addVisualizationButton:"data-testid Add new visualization menu item",pastePanelButton:"data-testid Paste panel button",discardChangesButton:"data-testid Discard changes button",discardLibraryPanelButton:"data-testid Discard library panel button",unlinkLibraryPanelButton:"data-testid Unlink library panel button",saveLibraryPanelButton:"data-testid Save library panel button",backToDashboardButton:"data-testid Back to dashboard button"}},PageToolbar:{container:()=>".page-toolbar",item:t=>`${t}`,itemButton:t=>`data-testid ${t}`},QueryEditorToolbarItem:{button:t=>`QueryEditor toolbar item button ${t}`},BackButton:{backArrow:"data-testid Go Back"},OptionsGroup:{group:t=>t?`data-testid Options group ${t}`:"data-testid Options group",toggle:t=>t?`data-testid Options group ${t} toggle`:"data-testid Options group toggle"},PluginVisualization:{item:t=>`Plugin visualization item ${t}`,current:()=>'[class*="-currentVisualizationItem"]'},Select:{option:"data-testid Select option",input:()=>'input[id*="time-options-input"]',singleValue:()=>'div[class*="-singleValue"]'},FieldConfigEditor:{content:"Field config editor content"},OverridesConfigEditor:{content:"Field overrides editor content"},FolderPicker:{container:"Folder picker select container",containerV2:"data-testid Folder picker select container",input:"data-testid folder-picker-input"},ReadonlyFolderPicker:{container:"data-testid Readonly folder picker select container"},DataSourcePicker:{container:"data-testid Data source picker select container",input:()=>'input[id="data-source-picker"]',inputV2:"data-testid Select a data source",dataSourceList:"data-testid Data source list dropdown",advancedModal:{dataSourceList:"data-testid Data source list",builtInDataSourceList:"data-testid Built in data source list"}},TimeZonePicker:{container:"Time zone picker select container",containerV2:"data-testid Time zone picker select container",changeTimeSettingsButton:"data-testid Time zone picker Change time settings button"},WeekStartPicker:{container:"Choose starting day of the week",containerV2:"data-testid Choose starting day of the week",placeholder:"Choose starting day of the week"},TraceViewer:{spanBar:"data-testid SpanBar--wrapper"},QueryField:{container:"data-testid Query field"},QueryBuilder:{queryPatterns:"data-testid Query patterns",labelSelect:"data-testid Select label",inputSelect:"data-testid Select label-input",valueSelect:"data-testid Select value",matchOperatorSelect:"data-testid Select match operator"},ValuePicker:{button:t=>`data-testid Value picker button ${t}`,select:t=>`data-testid Value picker select ${t}`},Search:{section:"Search section",sectionV2:"data-testid Search section",items:"Search items",itemsV2:"data-testid Search items",cards:"data-testid Search cards",collapseFolder:t=>`data-testid Collapse folder ${t}`,expandFolder:t=>`data-testid Expand folder ${t}`,dashboardItem:t=>`${RX.Search.dashboardItems} ${t}`,dashboardCard:t=>`data-testid Search card ${t}`,folderHeader:t=>`data-testid Folder header ${t}`,folderContent:t=>`data-testid Folder content ${t}`,dashboardItems:"data-testid Dashboard search item"},DashboardLinks:{container:"data-testid Dashboard link container",dropDown:"data-testid Dashboard link dropdown",link:"data-testid Dashboard link"},LoadingIndicator:{icon:"data-testid Loading indicator"},CallToActionCard:{button:t=>`Call to action button ${t}`,buttonV2:t=>`data-testid Call to action button ${t}`},DataLinksContextMenu:{singleLink:"data-testid Data link"},CodeEditor:{container:"data-testid Code editor container"},ReactMonacoEditor:{editorLazy:"data-testid ReactMonacoEditor editorLazy"},DashboardImportPage:{textarea:"data-testid-import-dashboard-textarea",submit:"data-testid-load-dashboard"},ImportDashboardForm:{name:"data-testid-import-dashboard-title",submit:"data-testid-import-dashboard-submit"},PanelAlertTabContent:{content:"data-testid Unified alert editor tab content"},VisualizationPreview:{card:t=>`data-testid suggestion-${t}`},ColorSwatch:{name:"data-testid-colorswatch"},DashboardRow:{title:t=>`data-testid dashboard-row-title-${t}`},UserProfile:{profileSaveButton:"data-testid-user-profile-save",preferencesSaveButton:"data-testid-shared-prefs-save",orgsTable:"data-testid-user-orgs-table",sessionsTable:"data-testid-user-sessions-table",extensionPointTabs:"data-testid-extension-point-tabs",extensionPointTab:t=>`data-testid-extension-point-tab-${t}`},FileUpload:{inputField:"data-testid-file-upload-input-field",fileNameSpan:"data-testid-file-upload-file-name"},DebugOverlay:{wrapper:"debug-overlay"},OrgRolePicker:{input:"Role"},AnalyticsToolbarButton:{button:"Dashboard insights"},Variables:{variableOption:"data-testid variable-option"},Annotations:{annotationsTypeInput:"data-testid annotations-type-input",annotationsChoosePanelInput:"data-testid choose-panels-input",editor:{testButton:"data-testid annotations-test-button",resultContainer:"data-testid annotations-query-result-container"}},Tooltip:{container:"data-testid tooltip"},ReturnToPrevious:{buttonGroup:"data-testid dismissable button group",backButton:"data-testid back",dismissButton:"data-testid dismiss"},SQLQueryEditor:{selectColumn:"data-testid select-column",selectAggregation:"data-testid select-aggregation",selectAlias:"data-testid select-alias",filterConjunction:"data-testid filter-conjunction",filterField:"data-testid filter-field",filterOperator:"data-testid filter-operator",headerTableSelector:"data-testid header-table-selector",headerFilterSwitch:"data-testid header-filter-switch",headerGroupSwitch:"data-testid header-group-switch",headerOrderSwitch:"data-testid header-order-switch",headerPreviewSwitch:"data-testid header-preview-switch"}},NX={Login:{url:"/login",username:"data-testid Username input field",password:"data-testid Password input field",submit:"data-testid Login button",skip:"data-testid Skip change password button"},Home:{url:"/"},DataSource:{name:"data-testid Data source settings page name input field",delete:"Data source settings page Delete button",readOnly:"data-testid Data source settings page read only message",saveAndTest:"data-testid Data source settings page Save and Test button",alert:"data-testid Data source settings page Alert"},DataSources:{url:"/datasources",dataSources:t=>`Data source list item ${t}`},EditDataSource:{url:t=>`/datasources/edit/${t}`,settings:"Datasource settings page basic settings"},AddDataSource:{url:"/datasources/new",dataSourcePlugins:t=>`Data source plugin item ${t}`,dataSourcePluginsV2:t=>`Add new data source ${t}`},ConfirmModal:{delete:"data-testid Confirm Modal Danger Button"},AddDashboard:{url:"/dashboard/new",itemButton:t=>`data-testid ${t}`,addNewPanel:"data-testid Add new panel",addNewRow:"data-testid Add new row",addNewPanelLibrary:"data-testid Add new panel from panel library"},Dashboard:{url:t=>`/d/${t}`,DashNav:{nav:"Dashboard navigation",navV2:"data-testid Dashboard navigation",publicDashboardTag:"data-testid public dashboard tag",shareButton:"data-testid share-button",scrollContainer:"data-testid Dashboard canvas scroll container",newShareButton:{container:"data-testid new share button",shareLink:"data-testid new share link-button",arrowMenu:"data-testid new share button arrow menu",menu:{container:"data-testid new share button menu",shareInternally:"data-testid new share button share internally"}},playlistControls:{prev:"data-testid playlist previous dashboard button",stop:"data-testid playlist stop dashboard button",next:"data-testid playlist next dashboard button"}},Controls:"data-testid dashboard controls",SubMenu:{submenu:"Dashboard submenu",submenuItem:"data-testid template variable",submenuItemLabels:t=>`data-testid Dashboard template variables submenu Label ${t}`,submenuItemValueDropDownValueLinkTexts:t=>`data-testid Dashboard template variables Variable Value DropDown value link text ${t}`,submenuItemValueDropDownDropDown:"Variable options",submenuItemValueDropDownOptionTexts:t=>`data-testid Dashboard template variables Variable Value DropDown option text ${t}`,Annotations:{annotationsWrapper:"data-testid annotation-wrapper",annotationLabel:t=>`data-testid Dashboard annotations submenu Label ${t}`,annotationToggle:t=>`data-testid Dashboard annotations submenu Toggle ${t}`}},Settings:{Actions:{close:"data-testid dashboard-settings-close"},General:{deleteDashBoard:"data-testid Dashboard settings page delete dashboard button",sectionItems:t=>`Dashboard settings section item ${t}`,saveDashBoard:"Dashboard settings aside actions Save button",saveAsDashBoard:"Dashboard settings aside actions Save As button",timezone:"Time zone picker select container",title:"Tab General"},Annotations:{List:{addAnnotationCTA:RX.CallToActionCard.button("Add annotation query"),addAnnotationCTAV2:RX.CallToActionCard.buttonV2("Add annotation query"),annotations:"data-testid list-annotations"},Settings:{name:"data-testid Annotations settings name input"},NewAnnotation:{panelFilterSelect:"data-testid annotations-panel-filter",showInLabel:"data-testid show-in-label",previewInDashboard:"data-testid annotations-preview",delete:"data-testid annotations-delete",apply:"data-testid annotations-apply",enable:"data-testid annotation-enable",hide:"data-testid annotation-hide"}},Variables:{List:{addVariableCTA:RX.CallToActionCard.button("Add variable"),addVariableCTAV2:RX.CallToActionCard.buttonV2("Add variable"),newButton:"Variable editor New variable button",table:"Variable editor Table",tableRowNameFields:t=>`Variable editor Table Name field ${t}`,tableRowDefinitionFields:t=>`Variable editor Table Definition field ${t}`,tableRowArrowUpButtons:t=>`Variable editor Table ArrowUp button ${t}`,tableRowArrowDownButtons:t=>`Variable editor Table ArrowDown button ${t}`,tableRowDuplicateButtons:t=>`Variable editor Table Duplicate button ${t}`,tableRowRemoveButtons:t=>`Variable editor Table Remove button ${t}`},Edit:{General:{headerLink:"Variable editor Header link",modeLabelNew:"Variable editor Header mode New",modeLabelEdit:"Variable editor Header mode Edit",generalNameInput:"Variable editor Form Name field",generalNameInputV2:"data-testid Variable editor Form Name field",generalTypeSelect:"Variable editor Form Type select",generalTypeSelectV2:"data-testid Variable editor Form Type select",generalLabelInput:"Variable editor Form Label field",generalLabelInputV2:"data-testid Variable editor Form Label field",generalHideSelect:"Variable editor Form Hide select",generalHideSelectV2:"data-testid Variable editor Form Hide select",selectionOptionsMultiSwitch:"data-testid Variable editor Form Multi switch",selectionOptionsIncludeAllSwitch:"data-testid Variable editor Form IncludeAll switch",selectionOptionsCustomAllInput:"data-testid Variable editor Form IncludeAll field",previewOfValuesOption:"data-testid Variable editor Preview of Values option",submitButton:"data-testid Variable editor Run Query button",applyButton:"data-testid Variable editor Apply button"},QueryVariable:{queryOptionsDataSourceSelect:RX.DataSourcePicker.inputV2,queryOptionsRefreshSelect:"Variable editor Form Query Refresh select",queryOptionsRefreshSelectV2:"data-testid Variable editor Form Query Refresh select",queryOptionsRegExInput:"Variable editor Form Query RegEx field",queryOptionsRegExInputV2:"data-testid Variable editor Form Query RegEx field",queryOptionsSortSelect:"Variable editor Form Query Sort select",queryOptionsSortSelectV2:"data-testid Variable editor Form Query Sort select",queryOptionsQueryInput:"data-testid Variable editor Form Default Variable Query Editor textarea",valueGroupsTagsEnabledSwitch:"Variable editor Form Query UseTags switch",valueGroupsTagsTagsQueryInput:"Variable editor Form Query TagsQuery field",valueGroupsTagsTagsValuesQueryInput:"Variable editor Form Query TagsValuesQuery field"},ConstantVariable:{constantOptionsQueryInput:"Variable editor Form Constant Query field",constantOptionsQueryInputV2:"data-testid Variable editor Form Constant Query field"},DatasourceVariable:{datasourceSelect:"data-testid datasource variable datasource type"},TextBoxVariable:{textBoxOptionsQueryInput:"Variable editor Form TextBox Query field",textBoxOptionsQueryInputV2:"data-testid Variable editor Form TextBox Query field"},CustomVariable:{customValueInput:"data-testid custom-variable-input"},IntervalVariable:{intervalsValueInput:"data-testid interval variable intervals input",autoEnabledCheckbox:"data-testid interval variable auto value checkbox",stepCountIntervalSelect:"data-testid interval variable step count input",minIntervalInput:"data-testid interval variable mininum interval input"},GroupByVariable:{dataSourceSelect:RX.DataSourcePicker.inputV2,infoText:"data-testid group by variable info text",modeToggle:"data-testid group by variable mode toggle"},AdHocFiltersVariable:{datasourceSelect:RX.DataSourcePicker.inputV2,infoText:"data-testid ad-hoc filters variable info text",modeToggle:"data-testid ad-hoc filters variable mode toggle"}}}},Annotations:{marker:"data-testid annotation-marker"},Rows:{Repeated:{ConfigSection:{warningMessage:"data-testid Repeated rows warning message"}}}},Dashboards:{url:"/dashboards",dashboards:t=>`Dashboard search item ${t}`},SaveDashboardAsModal:{newName:"Save dashboard title field",save:"Save dashboard button"},SaveDashboardModal:{save:"Dashboard settings Save Dashboard Modal Save button",saveVariables:"Dashboard settings Save Dashboard Modal Save variables checkbox",saveTimerange:"Dashboard settings Save Dashboard Modal Save timerange checkbox",saveRefresh:"Dashboard settings Save Dashboard Modal Save refresh checkbox"},SharePanelModal:{linkToRenderedImage:"Link to rendered image"},ShareDashboardModal:{PublicDashboard:{Tab:"Tab Public dashboard",WillBePublicCheckbox:"data-testid public dashboard will be public checkbox",LimitedDSCheckbox:"data-testid public dashboard limited datasources checkbox",CostIncreaseCheckbox:"data-testid public dashboard cost may increase checkbox",PauseSwitch:"data-testid public dashboard pause switch",EnableAnnotationsSwitch:"data-testid public dashboard on off switch for annotations",CreateButton:"data-testid public dashboard create button",DeleteButton:"data-testid public dashboard delete button",CopyUrlInput:"data-testid public dashboard copy url input",CopyUrlButton:"data-testid public dashboard copy url button",SettingsDropdown:"data-testid public dashboard settings dropdown",TemplateVariablesWarningAlert:"data-testid public dashboard disabled template variables alert",UnsupportedDataSourcesWarningAlert:"data-testid public dashboard unsupported data sources alert",NoUpsertPermissionsWarningAlert:"data-testid public dashboard no upsert permissions alert",EnableTimeRangeSwitch:"data-testid public dashboard on off switch for time range",EmailSharingConfiguration:{Container:"data-testid email sharing config container",ShareType:"data-testid public dashboard share type",EmailSharingInput:"data-testid public dashboard email sharing input",EmailSharingInviteButton:"data-testid public dashboard email sharing invite button",EmailSharingList:"data-testid public dashboard email sharing list",DeleteEmail:"data-testid public dashboard delete email button",ReshareLink:"data-testid public dashboard reshare link button"}},PublicDashboardScene:{Tab:"Tab Public Dashboard"},SnapshotScene:{url:t=>`/dashboard/snapshot/${t}`,Tab:"Tab Snapshot",PublishSnapshot:"data-testid publish snapshot button",CopyUrlButton:"data-testid snapshot copy url button",CopyUrlInput:"data-testid snapshot copy url input"}},PublicDashboard:{page:"public-dashboard-page",NotAvailable:{container:"public-dashboard-not-available",title:"public-dashboard-title",pausedDescription:"public-dashboard-paused-description"},footer:"public-dashboard-footer"},PublicDashboardScene:{loadingPage:"public-dashboard-scene-loading-page",page:"public-dashboard-scene-page",controls:"public-dashboard-controls"},RequestViewAccess:{form:"request-view-access-form",recipientInput:"request-view-access-recipient-input",submitButton:"request-view-access-submit-button"},PublicDashboardConfirmAccess:{submitButton:"data-testid confirm-access-submit-button"},Explore:{url:"/explore",General:{container:"data-testid Explore",graph:"Explore Graph",table:"Explore Table",scrollView:"data-testid explorer scroll view"},QueryHistory:{container:"data-testid QueryHistory"}},SoloPanel:{url:t=>`/d-solo/${t}`},PluginsList:{page:"Plugins list page",list:"Plugins list",listItem:"Plugins list item",signatureErrorNotice:"data-testid Unsigned plugins notice"},PluginPage:{page:"Plugin page",signatureInfo:"data-testid Plugin signature info",disabledInfo:"data-testid Plugin disabled info"},PlaylistForm:{name:"Playlist name",interval:"Playlist interval",itemDelete:"data-testid playlist-form-delete-item"},BrowseDashboards:{table:{body:"data-testid browse-dashboards-table",row:t=>`data-testid browse dashboards row ${t}`,checkbox:t=>`data-testid ${t} checkbox`},NewFolderForm:{form:"data-testid new folder form",nameInput:"data-testid new-folder-name-input",createButton:"data-testid new-folder-create-button"}},Search:{url:"/?search=openn",FolderView:{url:"/?search=open&layout=folders"}},PublicDashboards:{ListItem:{linkButton:"public-dashboard-link-button",configButton:"public-dashboard-configuration-button",trashcanButton:"public-dashboard-remove-button",pauseSwitch:"data-testid public dashboard pause switch"}},UserListPage:{tabs:{allUsers:"data-testid all-users-tab",orgUsers:"data-testid org-users-tab",anonUserDevices:"data-testid anon-user-devices-tab",publicDashboardsUsers:"data-testid public-dashboards-users-tab",users:"data-testid users-tab"},org:{url:"/org/users"},admin:{url:"/admin/users"},publicDashboards:{container:"data-testid public-dashboards-users-list"},UserListAdminPage:{container:"data-testid user-list-admin-page"},UsersListPage:{container:"data-testid users-list-page"},UserAnonListPage:{container:"data-testid user-anon-list-page"},UsersListPublicDashboardsPage:{container:"data-testid users-list-public-dashboards-page",DashboardsListModal:{listItem:t=>`data-testid dashboards-list-item-${t}`}}},ProfilePage:{url:"/profile"}},PX={pages:NX,components:RX},TX=(t,e)=>{const n=e||"middle",i=t.colors.emphasize(t.colors.background.secondary,.15),r=t.colors.primary.border,o=t.spacing(2);let s="50%",a="50%";switch(n){case"start":s="0%",a="0%";break;case"end":s="100%",a="100%"}const A=(0,tv.css)({position:"relative","&:before":{content:'""',position:"absolute",transition:t.transitions.create("border-color"),zIndex:1},"&:after":{background:i,content:'""',position:"absolute",transition:t.transitions.create("background"),transform:"translate(-50%, -50%)",borderRadius:t.shape.radius.pill,zIndex:1},"&:hover":{"&:before":{borderColor:r},"&:after":{background:r}}});return{dragHandleVertical:(0,tv.cx)(A,(0,tv.css)({cursor:"col-resize",width:o,"&:before":{borderRight:"1px solid transparent",height:"100%",left:s,transform:"translateX(-50%)"},"&:after":{left:s,top:"50%",height:200,width:4}})),dragHandleHorizontal:(0,tv.cx)(A,(0,tv.css)({height:o,cursor:"row-resize","&:before":{borderTop:"1px solid transparent",top:a,transform:"translateY(-50%)",width:"100%"},"&:after":{left:"50%",top:a,height:4,width:200}}))}};function LX(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FX(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){LX(t,e,n[e])}))}return t}function OX(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}function GX({children:t,onClose:e,closeOnMaskClick:n=!0,scrollableContent:i=!0,title:s,subtitle:a,width:A,size:l="md",tabs:c}){const[u,h,g]=function(){const[t,e]=(0,r.useState)(void 0),n=(0,r.useCallback)((t=>{e(UX(t.clientX))}),[]),i=(0,r.useCallback)((t=>{const n=t.touches[0];e(UX(n.clientX))}),[]),o=(0,r.useCallback)((t=>{document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",o)}),[n]),s=(0,r.useCallback)((t=>{document.removeEventListener("touchmove",i),document.removeEventListener("touchend",s)}),[i]);function a(t){t.stopPropagation(),t.preventDefault(),document.addEventListener("mousemove",n),document.addEventListener("mouseup",o)}function A(t){t.stopPropagation(),t.preventDefault(),document.addEventListener("touchmove",i),document.addEventListener("touchend",s)}return[t,a,A]}(),d=(0,HE.useStyles2)(jX),p=(0,HE.useStyles2)(KX,"sm",null!=u?u:A),f=(0,HE.useStyles2)(TX),m=o().useRef(null),{dialogProps:I,titleProps:y}=ab({},m),{overlayProps:C}=Tb({isDismissable:!1,isOpen:!0,onClose:e},m);(0,r.useEffect)((()=>{if(document.body)return document.body.classList.add("body-drawer-open"),()=>{document.body.classList.remove("body-drawer-open")}}),[]);const E=(0,tv.cx)(d.drawer,p),_=o().createElement("div",{className:d.content},t);return o().createElement(kX,{open:!0,mask:!1,onClose:e,placement:"right",getContainer:".main-view",className:d.drawerContent,rootClassName:E,width:"",motion:{motionAppear:!0,motionName:d.drawerMotion}},o().createElement("div",OX(FX({"aria-label":"string"==typeof s?PX.components.Drawer.General.title(s):PX.components.Drawer.General.title("no title"),className:d.container},C,I),{ref:m}),o().createElement("div",{className:(0,tv.cx)(f.dragHandleVertical,d.resizer),onMouseDown:h,onTouchStart:g}),"string"==typeof s&&o().createElement("div",{className:(0,tv.cx)(d.header,Boolean(c)&&d.headerWithTabs)},o().createElement("div",{className:d.actions},o().createElement(HE.IconButton,{name:"times",variant:"secondary",onClick:e,"data-testid":PX.components.Drawer.General.close,tooltip:"Close"})),o().createElement("div",{className:d.titleWrapper},o().createElement(HE.Text,FX({element:"h3"},y),s),a&&o().createElement("div",{className:d.subtitle,"data-testid":PX.components.Drawer.General.subtitle},a),c&&o().createElement("div",{className:d.tabsWrapper},c))),"string"!=typeof s&&s,i?o().createElement(HE.CustomScrollbar,null,_):_))}function UX(t){let e=document.body.offsetWidth-(t-document.body.offsetLeft);return`${Math.min(e/document.body.clientWidth*100,98).toFixed(2)}vw`}const jX=t=>({container:(0,tv.css)({display:"flex",flexDirection:"column",height:"100%",flex:"1 1 0",minHeight:"100%",position:"relative"}),drawer:(0,tv.css)({".main-view &":{top:80},".main-view--search-bar-hidden &":{top:40},".main-view--chrome-hidden &":{top:0},".rc-drawer-content-wrapper":{boxShadow:t.shadows.z3}}),drawerContent:(0,tv.css)({backgroundColor:`${t.colors.background.primary} !important`,display:"flex",overflow:"unset",flexDirection:"column"}),drawerMotion:(0,tv.css)({"&-appear":{transform:"translateX(100%)",transition:"none !important","&-active":{transition:`${t.transitions.create("transform")} !important`,transform:"translateX(0)"}}}),mask:(0,tv.css)({backgroundColor:"transparent",position:"fixed","&:before":{backgroundColor:`${t.components.overlay.background} !important`,backdropFilter:"blur(1px)",bottom:0,content:'""',left:0,position:"fixed",right:0,".main-view &":{top:80},".main-view--search-bar-hidden &":{top:40},".main-view--chrome-hidden &":{top:0}}}),maskMotion:(0,tv.css)({"&-appear":{opacity:0,"&-active":{opacity:1,transition:t.transitions.create("opacity")}}}),header:(0,tv.css)({label:"drawer-header",flexGrow:0,padding:t.spacing(2,2,3),borderBottom:`1px solid ${t.colors.border.weak}`}),headerWithTabs:(0,tv.css)({borderBottom:"none"}),actions:(0,tv.css)({position:"absolute",right:t.spacing(1),top:t.spacing(1)}),titleWrapper:(0,tv.css)({label:"drawer-title",overflowWrap:"break-word"}),subtitle:(0,tv.css)({label:"drawer-subtitle",color:t.colors.text.secondary,paddingTop:t.spacing(1)}),content:(0,tv.css)({padding:t.spacing(2),height:"100%",flexGrow:1}),tabsWrapper:(0,tv.css)({label:"drawer-tabs",paddingLeft:t.spacing(2),margin:t.spacing(1,-1,-3,-3)}),resizer:(0,tv.css)({top:0,left:t.spacing(-1),bottom:0,position:"absolute",zIndex:t.zIndex.modal})}),YX={sm:{width:"25vw",minWidth:384},md:{width:"50vw",minWidth:568},lg:{width:"75vw",minWidth:744}};function KX(t,e="sm",n){let i=null!=n?n:YX[e].width,r=YX[e].minWidth;return(0,tv.css)({".rc-drawer-content-wrapper":{label:`drawer-content-wrapper-${e}`,width:i,minWidth:r,overflow:"unset",[t.breakpoints.down("md")]:{width:`calc(100% - ${t.spacing(2)}) !important`,minWidth:0}}})}var zX=g(6504),JX=g(4317),qX=g(5519);const HX=o().createContext(null);function VX(t,e){var n=Object.create(null);return t&&r.Children.map(t,(function(t){return t})).forEach((function(t){n[t.key]=function(t){return e&&(0,r.isValidElement)(t)?e(t):t}(t)})),n}function WX(t,e,n){return null!=n[e]?n[e]:t.props[e]}function ZX(t,e,n){var i=VX(t.children),o=function(t,e){function n(n){return n in e?e[n]:t[n]}t=t||{},e=e||{};var i,r=Object.create(null),o=[];for(var s in t)s in e?o.length&&(r[s]=o,o=[]):o.push(s);var a={};for(var A in e){if(r[A])for(i=0;i<r[A].length;i++){var l=r[A][i];a[r[A][i]]=n(l)}a[A]=n(A)}for(i=0;i<o.length;i++)a[o[i]]=n(o[i]);return a}(e,i);return Object.keys(o).forEach((function(s){var a=o[s];if((0,r.isValidElement)(a)){var A=s in e,l=s in i,c=e[s],u=(0,r.isValidElement)(c)&&!c.props.in;!l||A&&!u?l||!A||u?l&&A&&(0,r.isValidElement)(c)&&(o[s]=(0,r.cloneElement)(a,{onExited:n.bind(null,a),in:c.props.in,exit:WX(a,"exit",t),enter:WX(a,"enter",t)})):o[s]=(0,r.cloneElement)(a,{in:!1}):o[s]=(0,r.cloneElement)(a,{onExited:n.bind(null,a),in:!0,exit:WX(a,"exit",t),enter:WX(a,"enter",t)})}})),o}var XX=Object.values||function(t){return Object.keys(t).map((function(e){return t[e]}))},$X=function(t){function e(e,n){var i,r=(i=t.call(this,e,n)||this).handleExited.bind($b(i));return i.state={contextValue:{isMounting:!0},handleExited:r,firstRender:!0},i}eQ(e,t);var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(t,e){var n,i,o=e.children,s=e.handleExited;return{children:e.firstRender?(n=t,i=s,VX(n.children,(function(t){return(0,r.cloneElement)(t,{onExited:i.bind(null,t),in:!0,appear:WX(t,"appear",n),enter:WX(t,"enter",n),exit:WX(t,"exit",n)})}))):ZX(t,o,s),firstRender:!1}},n.handleExited=function(t,e){var n=VX(this.props.children);t.key in n||(t.props.onExited&&t.props.onExited(e),this.mounted&&this.setState((function(e){var n=(0,bv.A)({},e.children);return delete n[t.key],{children:n}})))},n.render=function(){var t=this.props,e=t.component,n=t.childFactory,i=(0,Qv.A)(t,["component","childFactory"]),r=this.state.contextValue,s=XX(this.state.children).map(n);return delete i.appear,delete i.enter,delete i.exit,null===e?o().createElement(HX.Provider,{value:r},s):o().createElement(HX.Provider,{value:r},o().createElement(e,i,s))},e}(o().Component);$X.propTypes={},$X.defaultProps={component:"div",childFactory:function(t){return t}};const t$=$X;var e$=g(8016);const n$=function(t){const{className:e,classes:n,pulsate:i=!1,rippleX:o,rippleY:s,rippleSize:a,in:A,onExited:l,timeout:c}=t,[u,h]=r.useState(!1),g=(0,bW.A)(e,n.ripple,n.rippleVisible,i&&n.ripplePulsate),d={width:a,height:a,top:-a/2+s,left:-a/2+o},p=(0,bW.A)(n.child,u&&n.childLeaving,i&&n.childPulsate);return A||u||h(!0),r.useEffect((()=>{if(!A&&null!=l){const t=setTimeout(l,c);return()=>{clearTimeout(t)}}}),[l,A,c]),(0,RW.jsx)("span",{className:g,style:d,children:(0,RW.jsx)("span",{className:p})})};const i$=(0,SW.A)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),r$=["center","classes","className"];let o$,s$,a$,A$,l$=t=>t;const c$=(0,ev.keyframes)(o$||(o$=l$`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),u$=(0,ev.keyframes)(s$||(s$=l$`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),h$=(0,ev.keyframes)(a$||(a$=l$`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),g$=(0,wW.Ay)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),d$=(0,wW.Ay)(n$,{name:"MuiTouchRipple",slot:"Ripple"})(A$||(A$=l$`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),i$.rippleVisible,c$,550,(({theme:t})=>t.transitions.easing.easeInOut),i$.ripplePulsate,(({theme:t})=>t.transitions.duration.shorter),i$.child,i$.childLeaving,u$,550,(({theme:t})=>t.transitions.easing.easeInOut),i$.childPulsate,h$,(({theme:t})=>t.transitions.easing.easeInOut)),p$=r.forwardRef((function(t,e){const n=(0,xW.b)({props:t,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:s}=n,a=(0,Qv.A)(n,r$),[A,l]=r.useState([]),c=r.useRef(0),u=r.useRef(null);r.useEffect((()=>{u.current&&(u.current(),u.current=null)}),[A]);const h=r.useRef(!1),g=(0,e$.A)(),d=r.useRef(null),p=r.useRef(null),f=r.useCallback((t=>{const{pulsate:e,rippleX:n,rippleY:i,rippleSize:r,cb:s}=t;l((t=>[...t,(0,RW.jsx)(d$,{classes:{ripple:(0,bW.A)(o.ripple,i$.ripple),rippleVisible:(0,bW.A)(o.rippleVisible,i$.rippleVisible),ripplePulsate:(0,bW.A)(o.ripplePulsate,i$.ripplePulsate),child:(0,bW.A)(o.child,i$.child),childLeaving:(0,bW.A)(o.childLeaving,i$.childLeaving),childPulsate:(0,bW.A)(o.childPulsate,i$.childPulsate)},timeout:550,pulsate:e,rippleX:n,rippleY:i,rippleSize:r},c.current)])),c.current+=1,u.current=s}),[o]),m=r.useCallback(((t={},e={},n=()=>{})=>{const{pulsate:r=!1,center:o=i||e.pulsate,fakeElement:s=!1}=e;if("mousedown"===(null==t?void 0:t.type)&&h.current)return void(h.current=!1);"touchstart"===(null==t?void 0:t.type)&&(h.current=!0);const a=s?null:p.current,A=a?a.getBoundingClientRect():{width:0,height:0,left:0,top:0};let l,c,u;if(o||void 0===t||0===t.clientX&&0===t.clientY||!t.clientX&&!t.touches)l=Math.round(A.width/2),c=Math.round(A.height/2);else{const{clientX:e,clientY:n}=t.touches&&t.touches.length>0?t.touches[0]:t;l=Math.round(e-A.left),c=Math.round(n-A.top)}if(o)u=Math.sqrt((2*A.width**2+A.height**2)/3),u%2==0&&(u+=1);else{const t=2*Math.max(Math.abs((a?a.clientWidth:0)-l),l)+2,e=2*Math.max(Math.abs((a?a.clientHeight:0)-c),c)+2;u=Math.sqrt(t**2+e**2)}null!=t&&t.touches?null===d.current&&(d.current=()=>{f({pulsate:r,rippleX:l,rippleY:c,rippleSize:u,cb:n})},g.start(80,(()=>{d.current&&(d.current(),d.current=null)}))):f({pulsate:r,rippleX:l,rippleY:c,rippleSize:u,cb:n})}),[i,f,g]),I=r.useCallback((()=>{m({},{pulsate:!0})}),[m]),y=r.useCallback(((t,e)=>{if(g.clear(),"touchend"===(null==t?void 0:t.type)&&d.current)return d.current(),d.current=null,void g.start(0,(()=>{y(t,e)}));d.current=null,l((t=>t.length>0?t.slice(1):t)),u.current=e}),[g]);return r.useImperativeHandle(e,(()=>({pulsate:I,start:m,stop:y})),[I,m,y]),(0,RW.jsx)(g$,(0,bv.A)({className:(0,bW.A)(i$.root,o.root,s),ref:p},a,{children:(0,RW.jsx)(t$,{component:null,exit:!0,children:A})}))})),f$=p$;function m$(t){return(0,MW.Ay)("MuiButtonBase",t)}const I$=(0,SW.A)("MuiButtonBase",["root","disabled","focusVisible"]),y$=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],C$=(0,wW.Ay)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${I$.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),E$=r.forwardRef((function(t,e){const n=(0,xW.b)({props:t,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:s,className:a,component:A="button",disabled:l=!1,disableRipple:c=!1,disableTouchRipple:u=!1,focusRipple:h=!1,LinkComponent:g="a",onBlur:d,onClick:p,onContextMenu:f,onDragLeave:m,onFocus:I,onFocusVisible:y,onKeyDown:C,onKeyUp:E,onMouseDown:_,onMouseLeave:v,onMouseUp:B,onTouchEnd:w,onTouchMove:b,onTouchStart:Q,tabIndex:x=0,TouchRippleProps:D,touchRippleRef:S,type:M}=n,k=(0,Qv.A)(n,y$),R=r.useRef(null),N=r.useRef(null),P=(0,zX.A)(N,S),{isFocusVisibleRef:T,onFocus:L,onBlur:F,ref:O}=(0,qX.A)(),[G,U]=r.useState(!1);l&&G&&U(!1),r.useImperativeHandle(i,(()=>({focusVisible:()=>{U(!0),R.current.focus()}})),[]);const[j,Y]=r.useState(!1);r.useEffect((()=>{Y(!0)}),[]);const K=j&&!c&&!l;function z(t,e,n=u){return(0,JX.A)((i=>{e&&e(i);return!n&&N.current&&N.current[t](i),!0}))}r.useEffect((()=>{G&&h&&!c&&j&&N.current.pulsate()}),[c,h,G,j]);const J=z("start",_),q=z("stop",f),H=z("stop",m),V=z("stop",B),W=z("stop",(t=>{G&&t.preventDefault(),v&&v(t)})),Z=z("start",Q),X=z("stop",w),$=z("stop",b),tt=z("stop",(t=>{F(t),!1===T.current&&U(!1),d&&d(t)}),!1),et=(0,JX.A)((t=>{R.current||(R.current=t.currentTarget),L(t),!0===T.current&&(U(!0),y&&y(t)),I&&I(t)})),nt=()=>{const t=R.current;return A&&"button"!==A&&!("A"===t.tagName&&t.href)},it=r.useRef(!1),rt=(0,JX.A)((t=>{h&&!it.current&&G&&N.current&&" "===t.key&&(it.current=!0,N.current.stop(t,(()=>{N.current.start(t)}))),t.target===t.currentTarget&&nt()&&" "===t.key&&t.preventDefault(),C&&C(t),t.target===t.currentTarget&&nt()&&"Enter"===t.key&&!l&&(t.preventDefault(),p&&p(t))})),ot=(0,JX.A)((t=>{h&&" "===t.key&&N.current&&G&&!t.defaultPrevented&&(it.current=!1,N.current.stop(t,(()=>{N.current.pulsate(t)}))),E&&E(t),p&&t.target===t.currentTarget&&nt()&&" "===t.key&&!t.defaultPrevented&&p(t)}));let st=A;"button"===st&&(k.href||k.to)&&(st=g);const at={};"button"===st?(at.type=void 0===M?"button":M,at.disabled=l):(k.href||k.to||(at.role="button"),l&&(at["aria-disabled"]=l));const At=(0,zX.A)(e,O,R);const lt=(0,bv.A)({},n,{centerRipple:o,component:A,disabled:l,disableRipple:c,disableTouchRipple:u,focusRipple:h,tabIndex:x,focusVisible:G}),ct=(t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:i,classes:r}=t,o={root:["root",e&&"disabled",n&&"focusVisible"]},s=(0,QW.A)(o,m$,r);return n&&i&&(s.root+=` ${i}`),s})(lt);return(0,RW.jsxs)(C$,(0,bv.A)({as:st,className:(0,bW.A)(ct.root,a),ownerState:lt,onBlur:tt,onClick:p,onContextMenu:q,onFocus:et,onKeyDown:rt,onKeyUp:ot,onMouseDown:J,onMouseLeave:W,onMouseUp:V,onDragLeave:H,onTouchEnd:X,onTouchMove:$,onTouchStart:Z,ref:At,tabIndex:l?-1:x,type:M},at,k,{children:[s,K?(0,RW.jsx)(f$,(0,bv.A)({ref:P,center:o},D)):null]}))})),_$=E$;var v$=g(4726);function B$(t){return(0,MW.Ay)("MuiIconButton",t)}const w$=(0,SW.A)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),b$=["edge","children","className","color","disabled","disableFocusRipple","size"],Q$=(0,wW.Ay)(_$,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,"default"!==n.color&&e[`color${(0,v$.A)(n.color)}`],n.edge&&e[`edge${(0,v$.A)(n.edge)}`],e[`size${(0,v$.A)(n.size)}`]]}})((({theme:t,ownerState:e})=>(0,bv.A)({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,FW.X4)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===e.edge&&{marginLeft:"small"===e.size?-3:-12},"end"===e.edge&&{marginRight:"small"===e.size?-3:-12})),(({theme:t,ownerState:e})=>{var n;const i=null==(n=(t.vars||t).palette)?void 0:n[e.color];return(0,bv.A)({},"inherit"===e.color&&{color:"inherit"},"inherit"!==e.color&&"default"!==e.color&&(0,bv.A)({color:null==i?void 0:i.main},!e.disableRipple&&{"&:hover":(0,bv.A)({},i&&{backgroundColor:t.vars?`rgba(${i.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,FW.X4)(i.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===e.size&&{padding:5,fontSize:t.typography.pxToRem(18)},"large"===e.size&&{padding:12,fontSize:t.typography.pxToRem(28)},{[`&.${w$.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}})})),x$=r.forwardRef((function(t,e){const n=(0,xW.b)({props:t,name:"MuiIconButton"}),{edge:i=!1,children:r,className:o,color:s="default",disabled:a=!1,disableFocusRipple:A=!1,size:l="medium"}=n,c=(0,Qv.A)(n,b$),u=(0,bv.A)({},n,{edge:i,color:s,disabled:a,disableFocusRipple:A,size:l}),h=(t=>{const{classes:e,disabled:n,color:i,edge:r,size:o}=t,s={root:["root",n&&"disabled","default"!==i&&`color${(0,v$.A)(i)}`,r&&`edge${(0,v$.A)(r)}`,`size${(0,v$.A)(o)}`]};return(0,QW.A)(s,B$,e)})(u);return(0,RW.jsx)(Q$,(0,bv.A)({className:(0,bW.A)(h.root,o),centerRipple:!0,focusRipple:!A,disabled:a,ref:e},c,{ownerState:u,children:r}))})),D$=x$;var S$=g(6450),M$=g(4398);const k$=function(t){return"string"==typeof t};var R$=g(6421),N$=g(4382);function P$(t){return(0,MW.Ay)("MuiListItem",t)}const T$=(0,SW.A)("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]);function L$(t){return(0,MW.Ay)("MuiListItemButton",t)}const F$=(0,SW.A)("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function O$(t){return(0,MW.Ay)("MuiListItemSecondaryAction",t)}(0,SW.A)("MuiListItemSecondaryAction",["root","disableGutters"]);const G$=["className"],U$=(0,wW.Ay)("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.disableGutters&&e.disableGutters]}})((({ownerState:t})=>(0,bv.A)({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},t.disableGutters&&{right:0}))),j$=r.forwardRef((function(t,e){const n=(0,xW.b)({props:t,name:"MuiListItemSecondaryAction"}),{className:i}=n,o=(0,Qv.A)(n,G$),s=r.useContext(DW),a=(0,bv.A)({},n,{disableGutters:s.disableGutters}),A=(t=>{const{disableGutters:e,classes:n}=t,i={root:["root",e&&"disableGutters"]};return(0,QW.A)(i,O$,n)})(a);return(0,RW.jsx)(U$,(0,bv.A)({className:(0,bW.A)(A.root,i),ownerState:a,ref:e},o))}));j$.muiName="ListItemSecondaryAction";const Y$=j$,K$=["className"],z$=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],J$=(0,wW.Ay)("div",{name:"MuiListItem",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,"flex-start"===n.alignItems&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters,!n.disablePadding&&e.padding,n.button&&e.button,n.hasSecondaryAction&&e.secondaryAction]}})((({theme:t,ownerState:e})=>(0,bv.A)({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!e.disablePadding&&(0,bv.A)({paddingTop:8,paddingBottom:8},e.dense&&{paddingTop:4,paddingBottom:4},!e.disableGutters&&{paddingLeft:16,paddingRight:16},!!e.secondaryAction&&{paddingRight:48}),!!e.secondaryAction&&{[`& > .${F$.root}`]:{paddingRight:48}},{[`&.${T$.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${T$.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,FW.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${T$.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,FW.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${T$.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},"flex-start"===e.alignItems&&{alignItems:"flex-start"},e.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},e.button&&{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${T$.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,FW.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,FW.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}}},e.hasSecondaryAction&&{paddingRight:48}))),q$=(0,wW.Ay)("li",{name:"MuiListItem",slot:"Container",overridesResolver:(t,e)=>e.container})({position:"relative"}),H$=r.forwardRef((function(t,e){const n=(0,xW.b)({props:t,name:"MuiListItem"}),{alignItems:i="center",autoFocus:o=!1,button:s=!1,children:a,className:A,component:l,components:c={},componentsProps:u={},ContainerComponent:h="li",ContainerProps:{className:g}={},dense:d=!1,disabled:p=!1,disableGutters:f=!1,disablePadding:m=!1,divider:I=!1,focusVisibleClassName:y,secondaryAction:C,selected:E=!1,slotProps:_={},slots:v={}}=n,B=(0,Qv.A)(n.ContainerProps,K$),w=(0,Qv.A)(n,z$),b=r.useContext(DW),Q=r.useMemo((()=>({dense:d||b.dense||!1,alignItems:i,disableGutters:f})),[i,b.dense,d,f]),x=r.useRef(null);(0,N$.A)((()=>{o&&x.current&&x.current.focus()}),[o]);const D=r.Children.toArray(a),S=D.length&&(0,R$.A)(D[D.length-1],["ListItemSecondaryAction"]),M=(0,bv.A)({},n,{alignItems:i,autoFocus:o,button:s,dense:Q.dense,disabled:p,disableGutters:f,disablePadding:m,divider:I,hasSecondaryAction:S,selected:E}),k=(t=>{const{alignItems:e,button:n,classes:i,dense:r,disabled:o,disableGutters:s,disablePadding:a,divider:A,hasSecondaryAction:l,selected:c}=t,u={root:["root",r&&"dense",!s&&"gutters",!a&&"padding",A&&"divider",o&&"disabled",n&&"button","flex-start"===e&&"alignItemsFlexStart",l&&"secondaryAction",c&&"selected"],container:["container"]};return(0,QW.A)(u,P$,i)})(M),R=(0,zX.A)(x,e),N=v.root||c.Root||J$,P=_.root||u.root||{},T=(0,bv.A)({className:(0,bW.A)(k.root,P.className,A),disabled:p},w);let L=l||"li";return s&&(T.component=l||"div",T.focusVisibleClassName=(0,bW.A)(T$.focusVisible,y),L=_$),S?(L=T.component||l?L:"div","li"===h&&("li"===L?L="div":"li"===T.component&&(T.component="div")),(0,RW.jsx)(DW.Provider,{value:Q,children:(0,RW.jsxs)(q$,(0,bv.A)({as:h,className:(0,bW.A)(k.container,g),ref:R,ownerState:M},B,{children:[(0,RW.jsx)(N,(0,bv.A)({},P,!k$(N)&&{as:L,ownerState:(0,bv.A)({},M,P.ownerState)},T,{children:D})),D.pop()]}))})):(0,RW.jsx)(DW.Provider,{value:Q,children:(0,RW.jsxs)(N,(0,bv.A)({},P,{as:L,ref:R},!k$(N)&&{ownerState:(0,bv.A)({},M,P.ownerState)},T,{children:[D,C&&(0,RW.jsx)(Y$,{children:C})]}))})})),V$=H$;var W$=g(3403);const Z$=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],X$=(0,wW.Ay)(_$,{shouldForwardProp:t=>(0,W$.A)(t)||"classes"===t,name:"MuiListItemButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,"flex-start"===n.alignItems&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters]}})((({theme:t,ownerState:e})=>(0,bv.A)({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${F$.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,FW.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${F$.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,FW.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${F$.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,FW.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,FW.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${F$.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${F$.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},e.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},"flex-start"===e.alignItems&&{alignItems:"flex-start"},!e.disableGutters&&{paddingLeft:16,paddingRight:16},e.dense&&{paddingTop:4,paddingBottom:4}))),$$=r.forwardRef((function(t,e){const n=(0,xW.b)({props:t,name:"MuiListItemButton"}),{alignItems:i="center",autoFocus:o=!1,component:s="div",children:a,dense:A=!1,disableGutters:l=!1,divider:c=!1,focusVisibleClassName:u,selected:h=!1,className:g}=n,d=(0,Qv.A)(n,Z$),p=r.useContext(DW),f=r.useMemo((()=>({dense:A||p.dense||!1,alignItems:i,disableGutters:l})),[i,p.dense,A,l]),m=r.useRef(null);(0,N$.A)((()=>{o&&m.current&&m.current.focus()}),[o]);const I=(0,bv.A)({},n,{alignItems:i,dense:f.dense,disableGutters:l,divider:c,selected:h}),y=(t=>{const{alignItems:e,classes:n,dense:i,disabled:r,disableGutters:o,divider:s,selected:a}=t,A={root:["root",i&&"dense",!o&&"gutters",s&&"divider",r&&"disabled","flex-start"===e&&"alignItemsFlexStart",a&&"selected"]},l=(0,QW.A)(A,L$,n);return(0,bv.A)({},n,l)})(I),C=(0,zX.A)(m,e);return(0,RW.jsx)(DW.Provider,{value:f,children:(0,RW.jsx)(X$,(0,bv.A)({ref:C,href:d.href||d.to,component:(d.href||d.to)&&"div"===s?"button":s,focusVisibleClassName:(0,bW.A)(y.focusVisible,u),ownerState:I,className:(0,bW.A)(y.root,g)},d,{classes:y,children:a}))})})),t0=$$;function e0(t){return(0,MW.Ay)("MuiListItemIcon",t)}(0,SW.A)("MuiListItemIcon",["root","alignItemsFlexStart"]);const n0=["className"],i0=(0,wW.Ay)("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,"flex-start"===n.alignItems&&e.alignItemsFlexStart]}})((({theme:t,ownerState:e})=>(0,bv.A)({minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex"},"flex-start"===e.alignItems&&{marginTop:8}))),r0=r.forwardRef((function(t,e){const n=(0,xW.b)({props:t,name:"MuiListItemIcon"}),{className:i}=n,o=(0,Qv.A)(n,n0),s=r.useContext(DW),a=(0,bv.A)({},n,{alignItems:s.alignItems}),A=(t=>{const{alignItems:e,classes:n}=t,i={root:["root","flex-start"===e&&"alignItemsFlexStart"]};return(0,QW.A)(i,e0,n)})(a);return(0,RW.jsx)(i0,(0,bv.A)({className:(0,bW.A)(A.root,i),ownerState:a,ref:e},o))})),o0=r0;var s0=g(523);function a0(t){return(0,MW.Ay)("MuiTypography",t)}(0,SW.A)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const A0=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],l0=(0,wW.Ay)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],"inherit"!==n.align&&e[`align${(0,v$.A)(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})((({theme:t,ownerState:e})=>(0,bv.A)({margin:0},"inherit"===e.variant&&{font:"inherit"},"inherit"!==e.variant&&t.typography[e.variant],"inherit"!==e.align&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16}))),c0={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},u0={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},h0=r.forwardRef((function(t,e){const n=(0,xW.b)({props:t,name:"MuiTypography"}),i=(t=>u0[t]||t)(n.color),r=(0,s0.A)((0,bv.A)({},n,{color:i})),{align:o="inherit",className:s,component:a,gutterBottom:A=!1,noWrap:l=!1,paragraph:c=!1,variant:u="body1",variantMapping:h=c0}=r,g=(0,Qv.A)(r,A0),d=(0,bv.A)({},r,{align:o,color:i,className:s,component:a,gutterBottom:A,noWrap:l,paragraph:c,variant:u,variantMapping:h}),p=a||(c?"p":h[u]||c0[u])||"span",f=(t=>{const{align:e,gutterBottom:n,noWrap:i,paragraph:r,variant:o,classes:s}=t,a={root:["root",o,"inherit"!==t.align&&`align${(0,v$.A)(e)}`,n&&"gutterBottom",i&&"noWrap",r&&"paragraph"]};return(0,QW.A)(a,a0,s)})(d);return(0,RW.jsx)(l0,(0,bv.A)({as:p,ref:e,ownerState:d,className:(0,bW.A)(f.root,s)},g))})),g0=h0;function d0(t){return(0,MW.Ay)("MuiListItemText",t)}const p0=(0,SW.A)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),f0=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],m0=(0,wW.Ay)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${p0.primary}`]:e.primary},{[`& .${p0.secondary}`]:e.secondary},e.root,n.inset&&e.inset,n.primary&&n.secondary&&e.multiline,n.dense&&e.dense]}})((({ownerState:t})=>(0,bv.A)({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},t.primary&&t.secondary&&{marginTop:6,marginBottom:6},t.inset&&{paddingLeft:56}))),I0=r.forwardRef((function(t,e){const n=(0,xW.b)({props:t,name:"MuiListItemText"}),{children:i,className:o,disableTypography:s=!1,inset:a=!1,primary:A,primaryTypographyProps:l,secondary:c,secondaryTypographyProps:u}=n,h=(0,Qv.A)(n,f0),{dense:g}=r.useContext(DW);let d=null!=A?A:i,p=c;const f=(0,bv.A)({},n,{disableTypography:s,inset:a,primary:!!d,secondary:!!p,dense:g}),m=(t=>{const{classes:e,inset:n,primary:i,secondary:r,dense:o}=t,s={root:["root",n&&"inset",o&&"dense",i&&r&&"multiline"],primary:["primary"],secondary:["secondary"]};return(0,QW.A)(s,d0,e)})(f);return null==d||d.type===g0||s||(d=(0,RW.jsx)(g0,(0,bv.A)({variant:g?"body2":"body1",className:m.primary,component:null!=l&&l.variant?void 0:"span",display:"block"},l,{children:d}))),null==p||p.type===g0||s||(p=(0,RW.jsx)(g0,(0,bv.A)({variant:"body2",className:m.secondary,color:"text.secondary",display:"block"},u,{children:p}))),(0,RW.jsxs)(m0,(0,bv.A)({className:(0,bW.A)(m.root,o),ownerState:f,ref:e},h,{children:[d,p]}))}));function y0(t){return(0,MW.Ay)("MuiFab",t)}const C0=(0,SW.A)("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),E0=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],_0=(0,wW.Ay)(_$,{name:"MuiFab",slot:"Root",shouldForwardProp:t=>(0,W$.A)(t)||"classes"===t,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`size${(0,v$.A)(n.size)}`],"inherit"===n.color&&e.colorInherit,e[(0,v$.A)(n.size)],e[n.color]]}})((({theme:t,ownerState:e})=>{var n,i;return(0,bv.A)({},t.typography.button,{minHeight:36,transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(t.vars||t).zIndex.fab,boxShadow:(t.vars||t).shadows[6],"&:active":{boxShadow:(t.vars||t).shadows[12]},color:t.vars?t.vars.palette.text.primary:null==(n=(i=t.palette).getContrastText)?void 0:n.call(i,t.palette.grey[300]),backgroundColor:(t.vars||t).palette.grey[300],"&:hover":{backgroundColor:(t.vars||t).palette.grey.A100,"@media (hover: none)":{backgroundColor:(t.vars||t).palette.grey[300]},textDecoration:"none"},[`&.${C0.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]}},"small"===e.size&&{width:40,height:40},"medium"===e.size&&{width:48,height:48},"extended"===e.variant&&{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},"extended"===e.variant&&"small"===e.size&&{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"extended"===e.variant&&"medium"===e.size&&{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40},"inherit"===e.color&&{color:"inherit"})}),(({theme:t,ownerState:e})=>(0,bv.A)({},"inherit"!==e.color&&"default"!==e.color&&null!=(t.vars||t).palette[e.color]&&{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main,"&:hover":{backgroundColor:(t.vars||t).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e.color].main}}})),(({theme:t})=>({[`&.${C0.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}))),v0=r.forwardRef((function(t,e){const n=(0,xW.b)({props:t,name:"MuiFab"}),{children:i,className:r,color:o="default",component:s="button",disabled:a=!1,disableFocusRipple:A=!1,focusVisibleClassName:l,size:c="large",variant:u="circular"}=n,h=(0,Qv.A)(n,E0),g=(0,bv.A)({},n,{color:o,component:s,disabled:a,disableFocusRipple:A,size:c,variant:u}),d=(t=>{const{color:e,variant:n,classes:i,size:r}=t,o={root:["root",n,`size${(0,v$.A)(r)}`,"inherit"===e?"colorInherit":e]},s=(0,QW.A)(o,y0,i);return(0,bv.A)({},i,s)})(g);return(0,RW.jsx)(_0,(0,bv.A)({className:(0,bW.A)(d.root,r),component:s,disabled:a,focusRipple:!A,focusVisibleClassName:(0,bW.A)(d.focusVisible,l),ownerState:g,ref:e},h,{classes:d,children:i}))})),B0=v0;function w0(t,e,n,i,r,o,s){try{var a=t[o](s),A=a.value}catch(t){return void n(t)}a.done?e(A):Promise.resolve(A).then(i,r)}const b0=({setLineFeatures:t,setIsShowCenter:e,setIconFeatures:n,selFeature:i,isDefDir:o,findNode:s,index:a,source:A,setSnapOpenIdx:l,nodeMap:c,rId:u})=>{const{parPath:h,displayParPath:g}=A,d=[...h],p=(null==d?void 0:d.length)-1===a,f=o?a:g.length-1-a;return r.createElement(YL,{value:"",placeholder:p?"Copy path to new "+(o?"source":"target"):"Attach to node/connector...",selectHandler:function(){var r=function(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function s(t){w0(o,i,r,s,a,"next",t)}function a(t){w0(o,i,r,s,a,"throw",t)}s(void 0)}))}}((function*(r){if(i.properties.locName===r)return;d.splice(f,1,r),n(null),t(null),e(!1),l(-1);const o=yield dW(u);o&&V1({db:o,findNode:s,newFeatureParPath:d,isEph:p})}));return function(t){return r.apply(this,arguments)}}()})};function Q0(t,e,n,i,r,o,s){try{var a=t[o](s),A=a.value}catch(t){return void n(t)}a.done?e(A):Promise.resolve(A).then(i,r)}const x0=({coords:t,comInfo:e,tar:n,src:i,commentOpenIdx:o,rId:s})=>{const{pointStore:a,graph:A}=x1(),l=(0,HE.useTheme2)(),{getComments:c,setCommentOpenIdx:u,setComment:h}=a,{getNodeMap:g,findNode:d,isDefDir:p}=A;let f,m;if(n&&i&&e){var I,y,C;const t=null==c||null===(C=c[p?"sources":"targets"])||void 0===C||null===(y=C[n])||void 0===y||null===(I=y[i])||void 0===I?void 0:I.get(o);f=null==t?void 0:t.text,m=null==t?void 0:t.iconColor}return r.createElement(HE.InlineFieldRow,null,r.createElement(HE.InlineLabel,{width:4},r.createElement(HE.ColorPicker,{color:null!=m?m:"rgb(78, 194, 252)",onChange:n=>{const i=l.visualization.getColorByName(n),r={text:f,iconColor:i};Array.isArray(t)&&D0({getNodeMap:g,comInfo:e,findNode:d,comment:r,rId:s})},enableNamedColors:!0})),r.createElement(HE.InlineField,null,r.createElement(HE.AutoSizeInput,{defaultValue:f,onCommitChange:n=>{const i={iconColor:m,text:n.currentTarget.value};Array.isArray(t)&&D0({getNodeMap:g,comInfo:e,findNode:d,comment:i,rId:s}),u(-1)},placeholder:"comment"})))},D0=function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function s(t){Q0(o,i,r,s,a,"next",t)}function a(t){Q0(o,i,r,s,a,"throw",t)}s(void 0)}))}}((function*({getNodeMap:t,findNode:e,comInfo:n,comment:i,rId:r}){var o;const{parPath:s,orderId:a,isDefDir:A}=n,l=null==s?void 0:s.slice(),c=null==l||null===(o=l[a])||void 0===o?void 0:o.slice();if(Array.isArray(c)){const{text:t,iconColor:e}=i;t?(c[2]=0,c[3]=t):c.splice(2),e&&(c[4]=t?e:void 0),l[a]=c}const u=yield dW(r);u&&V1({db:u,findNode:e,newFeatureParPath:l})}));return function(e){return t.apply(this,arguments)}}();function S0(t,e,n,i,r,o,s){try{var a=t[o](s),A=a.value}catch(t){return void n(t)}a.done?e(A):Promise.resolve(A).then(i,r)}function M0(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function s(t){S0(o,i,r,s,a,"next",t)}function a(t){S0(o,i,r,s,a,"throw",t)}s(void 0)}))}}const k0=({setLineFeatures:t,setIconFeatures:e,addCoordsHandler:n,delCoordsHandler:i,source:o,index:s,snapOpenIdx:a,setSnapOpenIdx:A,coord:l,rId:c})=>{const{pointStore:u,viewStore:h,graph:g}=x1(),{setCommentOpenIdx:d,getCommentOpenIdx:p,getEditable:f,getComments:m,setComment:I,getSelFeature:y,getSelectedIp:C,setSelectedIp:E,setSelIds:_,getSelIds:v}=u,{getNodeMap:B,findNode:w,isDefDir:b}=g,{parPath:Q,displayParPath:x}=o,D=x.length-1===s,S="string"!=typeof l||x.length-1===s,M=b?s:x.length-1-s;return r.createElement(r.Fragment,null,p!==M&&a!==s?r.createElement(o0,null,(1===Q.length?0===s:s>0)&&r.createElement(HE.IconButton,{key:"setSnap",disabled:!f,variant:S?"primary":"destructive",name:D?"gf-interpolation-linear":"gf-glue",size:"sm",tooltip:a===s?"Cancel":S?D?"Copy path to new "+(b?"source":"target"):"Attach to node":"Detach",onClick:M0((function*(){if(a===s)return void A(-1);const n=[...Q];if("string"!=typeof l||D||!y)Array.isArray(n)&&(s>=1||1===Q.length)&&s<=n.length-1&&A(s);else{var i;const n=[...Q],r=(null==y||y.rxPtId,n.at(-1),null==B||null===(i=B[l])||void 0===i?void 0:i.getPropertyValue("feature")),o=null==r?void 0:r.geometry,s=null==o?void 0:o.coordinates;s&&n.splice(M,1,s),(0,nE.flushSync)((()=>{e(null),t(null),A(-1)}));const a=yield dW(c);a&&V1({db:a,findNode:w,newFeatureParPath:n})}}))}),Array.isArray(l)&&r.createElement(HE.IconButton,{key:"setComment",disabled:!f,variant:"primary",name:"comment-alt-message",size:"md",tooltip:p===M?"Cancel edit":"Comment",onClick:()=>{Array.isArray(l)&&d(p===M?-1:M)}}),0!==s&&(s!==Q.length-1||!o.parPath)&&r.createElement(HE.IconButton,{key:"rmCoord",disabled:!f,variant:"destructive",name:"x",size:"md",tooltip:"Remove item",onClick:()=>{i(M)}}),s!==Q.length-1&&r.createElement(HE.IconButton,{key:"addCoord",disabled:!f,variant:"primary",name:"plus",size:"md",tooltip:"Add coords",onClick:()=>{n(M)}})):r.createElement(o0,null,r.createElement(HE.IconButton,{key:"rmCancel",variant:"destructive",name:"x",size:"md",tooltip:"Cancel",onClick:()=>{d(-1),A(-1)}})))};function R0(t,e,n,i,r,o,s){try{var a=t[o](s),A=a.value}catch(t){return void n(t)}a.done?e(A):Promise.resolve(A).then(i,r)}function N0(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function s(t){R0(o,i,r,s,a,"next",t)}function a(t){R0(o,i,r,s,a,"throw",t)}s(void 0)}))}}function P0(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T0(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){P0(t,e,n[e])}))}return t}function L0(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}const F0=OS((({rId:t,setIsShowCenter:e,setIconFeatures:n,setLineFeatures:i})=>{var o,s;const{pointStore:a,viewStore:A,options:l,graph:c}=x1(),u=l&&l.isEditable,{setRefreshAll:h,commentOpenIdx:g,setCommentOpenIdx:d,getComments:p,getMode:f,setComment:m,getisDrawerOpen:I,setDrawerOpen:y,getSelFeature:C,getSelectedIp:E,setSelectedIp:_,setSelIds:v,getSelIds:B}=a,{setViewState:w}=A,{getNodeMap:b,findNode:Q,triggerUpdate:x,isDefDir:D}=c,[S,M]=(0,r.useState)(-1),[k,R]=(0,r.useState)(!1),[N,P]=(0,r.useState)(),T=b,L=function(){var t=N0((function*(t,n,i=!0,r=!0,o){var s;t&&i?_(t,null):t&&!r||null==o||_(null,[o]);const a=null==T||null===(s=T[t])||void 0===s?void 0:s.getPropertyValue("feature");if(r&&(a||n)){const t=kE(null==a?void 0:a.geometry);(n||t)&&(0,nE.flushSync)((()=>{var r,o,s;const a={longitude:n?n[0]:t[0],latitude:n?n[1]:t[1],transitionDuration:250,maxPitch:42.75,zoom:null!==(s=null!==(o=h1&&(null==h1?void 0:h1.zoom)-1)&&void 0!==o?o:null==c1||null===(r=c1.transform)||void 0===r?void 0:r.zoom)&&void 0!==s?s:18};w(a),e(("modify"!==f||!i)&&T0({},a))}))}}));return function(e,n){return t.apply(this,arguments)}}(),F=function(){var r=N0((function*(r){const o=null==C?void 0:C.properties.locName;if(!C||o===r)return;const s=D?[o,r]:[r,o];(0,nE.flushSync)((()=>{e(!1),n(null),i(null)}));const a=yield dW(t);a&&V1({db:a,findNode:Q,newFeatureParPath:s,isEph:!0}),R(!1)}));return function(t){return r.apply(this,arguments)}}(),O=function(){var r=N0((function*(r){if(!C)return;if(!Z)return;const o=X;if(!o)return;const s=mE(null==o?void 0:o.at(r),T),a=mE(null==o?void 0:o.at(D?r+1:r-1),T),A=(c=a,[((l=s)[0]+c[0])/2,(l[1]+c[1])/2].map((t=>parseFloat(t.toFixed(6)))));var l,c;null==o||o.splice(D?r+1:r,0,A),(0,nE.flushSync)((()=>{e(!1),n(null),i(null)}));const u=yield dW(t);u&&V1({db:u,findNode:Q,newFeatureParPath:o})}));return function(t){return r.apply(this,arguments)}}(),G=function(){var r=N0((function*(r){if(!C)return;if(!Z)return;const o=X&&[...X];if(!o)return;null==o||o.splice(r,1),(0,nE.flushSync)((()=>{e(!1),n(null),i(null)}));const s=yield dW(t);s&&V1({db:s,findNode:Q,newFeatureParPath:o})}));return function(t){return r.apply(this,arguments)}}(),U=function(){var r=N0((function*(r,o){var s;if(!C||!j||!o)return;const a=null===(s=o.parPath)||void 0===s?void 0:s.at(-1);(0,nE.flushSync)((()=>{e(!1),n(null),i(null)}));const A=yield dW(t);if(A){const t="point"===r&&a?[a,a]:o.parPath;t&&(console.log("del newParPath",t),yield H1({db:A,findNode:Q,newFeatureParPath:t,actionType:r}),h())}}));return function(t,e){return r.apply(this,arguments)}}(),j=E,Y=null==T?void 0:T[j],K=null==Y?void 0:Y.getPropertyValue("feature"),z=null==K?void 0:K.geometry,J=null==z?void 0:z.coordinates,q=null==T||null===(o=T[j])||void 0===o?void 0:o.getPropertyValue("tarCoords"),H=null==Y?void 0:Y.getConnectedEdges().filter((t=>(D?t.getTargetNodeId():t.getSourceNodeId())===j));var V;const W=null!==(V=null==H||null===(s=H.filter((t=>!(null==t?void 0:t.getPropertyValue("is_fake")))))||void 0===s?void 0:s.map((t=>{const e=t.getPropertyValue("parPath"),n=t.getPropertyValue("rPath");return{parPath:e,displayParPath:D?e:null==e?void 0:e.slice().reverse(),lineId:t.getPropertyValue("lineId"),isEph:t.getPropertyValue("isEph"),rPath:n}})))&&void 0!==V?V:[],Z=null==W?void 0:W.find((t=>1===B.length&&(null==t?void 0:t.lineId)===B[0])),X=null==Z?void 0:Z.parPath,$=null==Z?void 0:Z.displayParPath,tt=(null==$?void 0:$.length)&&function(t,e){return t.map((t=>mE(t.item,e))).filter((t=>t))}($.map((t=>({item:t}))),T),et=null==$?void 0:$.at(-1),[nt,it]=[j,et],rt=j&&!function(t,e,n){const i=Math.pow(10,-n);return Math.abs(t-e)<i}(null==q?void 0:q[0],null==J?void 0:J[0],5),ot=I&&E||!E?{display:"none"}:{},st=[...j?[{parPath:[j],displayParPath:[j],lineId:null}]:[],...W],at={setLineFeatures:i,setIconFeatures:n,setIsShowCenter:e,getSelectedIp:E,selFeature:C,nodeMap:T,source:Z,setSnapOpenIdx:M,rId:t},At={setStateComment:P,commentOpenIdx:g,tar:nt,src:it},lt=D?"crosshair":"sitemap",ct=D?"target":"source",ut=D?"sitemap":"crosshair",ht=D?"source":"target";return r.createElement(r.Fragment,null,r.createElement(O0,{size:"small",color:"primary","aria-label":"editor",sx:T0({pointerEvents:"all",zIndex:2,mt:"3%",mr:"5%"},ot)},r.createElement(D$,{color:"inherit","aria-label":"open drawer",onClick:()=>{y(!I)},edge:!1},I?r.createElement(M$.A,{sx:{paddingLeft:"5px"}}):r.createElement(S$.A,null))),I&&j&&r.createElement(GX,{size:"sm",onClose:()=>{}},r.createElement(HE.IconButton,{"aria-label":"chevron-hide",key:"chevron-hover",variant:"primary",name:"angle-left",size:"xl",onClick:()=>{d(-1),M(-1),y(!1)}}),r.createElement(LW,null,st.map(((t,e)=>{var n;if(!(null==t||null===(n=t.parPath)||void 0===n?void 0:n.length))return null;const{displayParPath:i,lineId:o}=t,s=null==i?void 0:i.at(-1),a=r.createElement(HE.IconButton,{key:"locItemIcon",variant:"primary",name:0===e?lt:ut,size:"md",tooltip:0===e?ct:ht,onClick:t=>{t.stopPropagation(),L(s,null,0===e,!0,o)}});return r.createElement(r.Fragment,null,r.createElement(V$,{key:e,disablePadding:!0},r.createElement(t0,{selected:st.length>2&&1===B.length&&t.lineId===B[0],onClick:()=>L(0===e?s:null,null,0===e,!1,o)},r.createElement(o0,null,a),r.createElement(I0,{primary:r.createElement("div",{style:{userSelect:"text"}},s)}),(0===e&&rt||(t=>{const e=null==W?void 0:W.find((e=>{const n=null==e?void 0:e.displayParPath;return(null==n?void 0:n.at(-1))===t}));return!!(null==e?void 0:e.isEph)||!!(null==e?void 0:e.rPath)})(s))&&r.createElement(HE.IconButton,{disabled:!u,key:"deleteParent",variant:"destructive",name:"trash-alt",size:"md",tooltip:0===e?"Restore position from datasource":"Restore path from datasource",onClick:n=>{n.stopPropagation(),U(0===e?"point":"path",t)}}))),0===e&&r.createElement(KW,null))})),r.createElement(V$,{disablePadding:!0},r.createElement(t0,null,r.createElement(o0,null,r.createElement(HE.IconButton,{key:"addTarOrSource",disabled:!u,variant:"primary",name:k?"minus":"plus",size:"md",tooltip:k?"Cancel":D?"Add source":"Add target",onClick:()=>{R((t=>!t))}})),k&&r.createElement(YL,{value:"",placeholder:D?"New source":"New target",selectHandler:t=>F(t)})))),r.createElement(LW,null,r.createElement(KW,null),null==$?void 0:$.map(((t,e)=>{const n=D?e:$.length-1-e;let i,o;if(nt&&it){var s,a,A;[nt,it,n].join("|");const t=null==p||null===(A=p[D?"sources":"targets"])||void 0===A||null===(a=A[nt])||void 0===a||null===(s=a[it])||void 0===s?void 0:s.get(n);o=null==t?void 0:t.text,i={orderId:n,isDefDir:D,parPath:X}}const l=null==tt?void 0:tt[e];return r.createElement(V$,{key:e,disablePadding:!0},r.createElement(t0,{onClick:()=>{L("string"==typeof t?t:null,"string"==typeof t?null:t,!1,!0)}},S===e?r.createElement(b0,L0(T0({},at),{index:e,findNode:Q,isDefDir:D,yMapMutable:h1})):g===n?r.createElement(x0,L0(T0({},at,At),{coords:l,orderId:n,comInfo:i,comment:N})):r.createElement(I0,{primary:r.createElement("div",{style:{userSelect:"text"}},r.createElement("span",{style:{userSelect:"none"}},e+1+". "," "),Array.isArray(t)?`[${t.slice(0,2).join(", ")}]`:t,o&&r.createElement(r.Fragment,null," ",r.createElement(HE.Tooltip,{content:o},r.createElement(HE.IconButton,{key:"cmnt-hover",variant:"primary",name:"comment-alt",size:"sm",tooltip:o,onClick:()=>{Array.isArray(t)&&u&&d(g===n?-1:n)}}))))})),r.createElement(k0,L0(T0({},at,At),{setComment:m,getComments:p,addCoordsHandler:O,delCoordsHandler:G,text:null==N?void 0:N.text,index:e,snapOpenIdx:S,coord:t})))})))))})),O0=(0,wW.Ay)(B0)({transform:"scale(0.8)",position:"absolute",zIndex:1,top:0,left:0,right:"0",margin:"0 auto"});function G0(t,e,n,i,r,o,s){try{var a=t[o](s),A=a.value}catch(t){return void n(t)}a.done?e(A):Promise.resolve(A).then(i,r)}function U0(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function s(t){G0(o,i,r,s,a,"next",t)}function a(t){G0(o,i,r,s,a,"throw",t)}s(void 0)}))}}function j0(){return(j0=U0((function*(t,e){const n=document.createElement("script");n.id="ymaps3-script",n.src=`https://api-maps.yandex.ru/3.0/?apikey=${t}&lang=en_EN`,n.async=!0,n.onload=()=>e(!0),document.body.append(n)}))).apply(this,arguments)}function Y0(){return(Y0=U0((function*(){const[t]=yield Promise.all([ymaps3.import("@yandex/ymaps3-reactify"),ymaps3.ready]),e=t.reactify.bindTo(o(),iE()),n=yield ymaps3.import("@yandex/ymaps3-controls@0.0.1"),i=yield ymaps3.import("@yandex/ymaps3-markers@0.0.1");return{YMap:e.module(ymaps3).YMap,YMapDefaultSchemeLayer:e.module(ymaps3).YMapDefaultSchemeLayer,YMapControls:e.module(ymaps3).YMapControls,YMapDefaultFeaturesLayer:e.module(ymaps3).YMapDefaultFeaturesLayer,YMapZoomControl:e.module(n).YMapZoomControl,YMapDefaultMarker:e.module(i).YMapDefaultMarker,YMapMarker:e.module(ymaps3).YMapMarker,YMapFeature:e.module(ymaps3).YMapFeature,YMapListener:e.module(ymaps3).YMapListener}}))).apply(this,arguments)}function K0(t,e,n,i,r,o,s){try{var a=t[o](s),A=a.value}catch(t){return void n(t)}a.done?e(A):Promise.resolve(A).then(i,r)}const z0=(0,r.createContext)({modules:null,mapRef:null});function J0({children:t,isYaMaps:e}){const[n,i]=(0,r.useState)(null),s=(0,r.useRef)(null);return(0,r.useEffect)((()=>{let t;function n(){return n=function(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function s(t){K0(o,i,r,s,a,"next",t)}function a(t){K0(o,i,r,s,a,"throw",t)}s(void 0)}))}}((function*(){if(e&&(console.log("load loop"),void 0!==window.ymaps3)){clearInterval(t);const e=yield function(){return Y0.apply(this,arguments)}();i(e)}})),n.apply(this,arguments)}return t=setInterval((function(){return n.apply(this,arguments)}),50),()=>{clearInterval(t)}}),[]),o().createElement(z0.Provider,{value:{modules:n,mapRef:s}},t)}function q0(t,e,n,i,r,o,s){try{var a=t[o](s),A=a.value}catch(t){return void n(t)}a.done?e(A):Promise.resolve(A).then(i,r)}function H0(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function s(t){q0(o,i,r,s,a,"next",t)}function a(t){q0(o,i,r,s,a,"throw",t)}s(void 0)}))}}function V0(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function W0(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){V0(t,e,n[e])}))}return t}function Z0(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}const X0=OS((({setHoverInfo:t,setIsShowCenter:e,time:n,timeZone:i,rId:s,dataLayers:a})=>{const A=(0,HE.useStyles2)($0),l=(0,r.useRef)(null),{pointStore:c,viewStore:u,graph:h,options:g}=x1(),d=g.globalThresholdsConfig,{getLog:p,setLog:f,setSelectedIp:m}=c,{setViewState:I}=u,{getNodeMap:y,findNode:C,getNodes:E}=h,_=p.map(((n,i)=>{var r;const s=n.updatedAt?new Date(n.updatedAt):null,l=s?s.toLocaleString("en-US",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}):null,c=null==y?void 0:y[null==n?void 0:n.locName],u=null==c?void 0:c.getPropertyValue("feature"),h=null==u?void 0:u.properties,g=void 0!==(null==h?void 0:h.lOrder)?null==h?void 0:h.lOrder:void 0,p=a.length&&void 0!==g&&a[g];if(!(null==p?void 0:p.isShowTooltip))return null;var f;const C=null!==(f=null==p?void 0:p.displayProperties)&&void 0!==f?f:[],E=Bx((null==u?void 0:u.properties)||n,n.metric,d),_=d&&void 0!==E?d[E].color:Cf;return o().createElement("li",{key:i,className:(0,tv.cx)(A.item,tv.css`
                color: ${_};               
             `),onMouseOver:e=>{const i=e.target.getBoundingClientRect(),r=i.left-160,o=i.top/1.5,s=u?{x:r,y:o,cluster:!1,object:{cluster:!1,properties:W0(Z0(W0({},h),{displayProps:[...C,"ack","msg"]}),n._data)},objects:[]}:{x:r,y:o,cluster:!1,object:{cluster:!1,properties:W0({},n)},objects:[]};t(s)},onMouseLeave:()=>{t({})},onClick:H0((function*(){if(c){m(null==h?void 0:h.locName);const t=u.geometry,[n,i]=t.coordinates;null==h1||h1.update({location:{center:[n,i],zoom:19}});const r={longitude:n,latitude:i,zoom:18,transitionDuration:350,maxPitch:42.75};I(r),e(W0({},r))}}))},o().createElement("span",null,(null==n||null===(r=n.locName)||void 0===r?void 0:r.length)>15?`${null==n?void 0:n.locName.slice(0,13)}..`:null==n?void 0:n.locName," ",l))}));function v(){return v=H0((function*(){const t=window.location;t.protocol,t.host;var e;const n=null!==(e=null==E?void 0:E.map((t=>t.getPropertyValue("feature"))).filter((t=>{const e=t.properties.aggrType;return!e||e&&!qC.includes(e)})))&&void 0!==e?e:[],i=function(t,e){if(e<=0||e>t+1)return console.error("Invalid count of numbers requested."),[];const n=new Set;for(;n.size<e;){const e=Math.floor(Math.random()*(t+1));n.add(e)}return Array.from(n)}(null==n?void 0:n.length,10),r=[];i.forEach((t=>{var e,i;(null===(i=n[t])||void 0===i||null===(e=i.properties)||void 0===e?void 0:e.locName)&&r.push(n[t].properties.locName)}));const o=(0,WE.getBackendSrv)().fetch({url:"/api/api/sim",method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify(r)}),s=yield(0,gj.lastValueFrom)(o);console.log("sim events response:",s)})),v.apply(this,arguments)}return o().createElement(o().Fragment,null,o().createElement("div",{className:A.Log,ref:l},o().createElement("div",{className:A.Controls},o().createElement(HE.Button,{className:A.Button,fill:"outline",size:"sm",variant:"primary",icon:"plus",onClick:function(){return v.apply(this,arguments)}},"test live stat1"),o().createElement(HE.Button,{fill:"outline",size:"sm",variant:"primary",onClick:()=>f([])},"x")),o().createElement("ul",{className:A.LogList},_)))})),$0=t=>({Controls:tv.css`
    display: flex;`,Button:tv.css`
      pointer-events: all;
      width: 90%//${t.spacing(30)};      
    `,Log:tv.css`
      position: absolute;
      right: 5px;
      top: 30%;
      height: auto;
      width: auto;
      z-index: 2;
    `,LogHeader:tv.css`
      margin: 15px 0;
      text-align: center;      
    `,LogList:tv.css`
    direction: ltr;
    padding:5px;
    list-style-type: none;
    text-align: start;
    font-size: 0.7em;
    max-height: 30vh;    
    overflow-x: hidden;
    overflow-y: scroll;
     scrollbar-width: none; /* Firefox */
        ::-webkit-scrollbar {
            display: none;  /* Safari and Chrome */
        }   
    background: ${t.colors.background.secondary};
    color: ${t.colors.getContrastText(t.colors.background.secondary)};
    //background-color:rgb(59, 55, 55, 0.8);
    border-radius: 4px;  
    pointer-events: all;
    z-index: 1;
    `,item:tv.css`
      direction: ltr;    
      cursor: crosshair;
      &:hover {
        //background-color: ${t.colors.getContrastText(t.colors.background.secondary)};
        color: ${t.colors.getContrastText(t.colors.background.secondary)};
      }
      z-index: 2;
      
    `,scrollableElement:tv.css`
        overflow: auto;

        /* For WebKit browsers */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        /* For Firefox */
        scrollbar-width: thin;
        scrollbar-color: #888 #f1f1f1;
        
    `});var t1=g(8659),e1={};e1.styleTagTransform=ES(),e1.setAttributes=mS(),e1.insert=pS().bind(null,"head"),e1.domAPI=gS(),e1.insertStyleElement=yS();uS()(t1.A,e1);t1.A&&t1.A.locals&&t1.A.locals;const n1="layer-switcher-",i1=t=>{const{theme:e,label:n,className:i}=t,{VisLayers:s,pointStore:a}=x1(),{setRefreshAll:A}=a,{setVisRefresh:l,getVisLayers:c}=s,[u,h]=(0,r.useState)(!1),g=(0,r.useRef)(null),d=(0,r.useRef)(null),p="ol-control yo layer-switcher"+(i1.isTouchDevice_()?" touch":"");(0,r.useEffect)((()=>{u&&f()}),[u,c]);const f=()=>{const t=d.current;t&&i1.renderPanel(c,l,A,t,{groupSelectStyle:"group",reverse:!1})};return o().createElement("div",{ref:g,className:`${p} ${u?"shown":""} ${i}`},o().createElement("div",{className:"deck-widget-button switcher"},o().createElement("button",{title:u?"collapse":n,onClick:()=>{h(!u)},style:{backgroundColor:e.colors.background.primary,color:e.colors.getContrastText(e.colors.background.primary)}},u&&"")),u&&o().createElement("div",{ref:d,className:"panel",style:{background:e.colors.background.primary,color:e.colors.getContrastText(e.colors.background.primary),border:`4px solid ${e.colors.background.secondary}`}}))};i1.isTouchDevice_=()=>{try{return document.createEvent("TouchEvent"),!0}catch(t){return!1}},i1.renderPanel=(t,e,n,i,r)=>{const o=new Event("render");for(i.dispatchEvent(o),r=r||{};i.firstChild;)i.removeChild(i.firstChild);"children"===r.groupSelectStyle||"none"===r.groupSelectStyle?i1.setGroupVisibility(t):"group"===r.groupSelectStyle&&i1.setChildVisibility(t);const s=document.createElement("ul");i.appendChild(s),i1.renderLayers_(t,t,e,n,s,r,(function(o){i1.renderPanel(t,e,n,i,r)}));const a=new Event("rendercomplete");i.dispatchEvent(a)},i1.setGroupVisibility=t=>{t.forEach((function(t){var e;const n=null===(e=t.children)||void 0===e?void 0:e.map((function(t){return t.getVisible}));(null==n?void 0:n.every((function(t){return!0===t})))?(t.setVisible(!0),t.setIndeterminate(!1)):(null==n?void 0:n.every((function(t){return!1===t})))?(t.setVisible(!1),t.setIndeterminate(!1)):(t.setVisible(!0),t.setIndeterminate(!0))}))},i1.setChildVisibility=t=>{t.forEach((function(t){var e;const n=t.getVisible,i=t.getIndeterminate;null===(e=t.children)||void 0===e||e.forEach((function(t){t.setIndeterminate(!1),n&&!i||!t.getVisible||t.setIndeterminate(!0)}))}))},i1.renderLayer_=(t,e,n,i,r,o,s)=>{const a=document.createElement("li"),A=i.name,l=i1.uuid(),c=document.createElement("label");if(i.group&&i.children&&!i.combine){if(a.classList.add("group"),["close","open"].includes(i.fold)){a.classList.add(n1+"fold"),a.classList.add(n1+i.fold);const t=document.createElement("button");t.onclick=function(t){const e=t||window.event;i1.toggleFold_(i,a),e.preventDefault()},a.appendChild(t)}if("none"!=o.groupSelectStyle){const t=document.createElement("input");var u;t.type="checkbox",t.id=l,t.checked=i.getVisible,t.indeterminate=null!==(u=i.indeterminate)&&void 0!==u&&u,t.onchange=function(t){const a=t.target;i1.setVisible_(i,e,n,r,null==a?void 0:a.checked,o.groupSelectStyle),s(i)},a.appendChild(t),c.htmlFor=l}c.innerHTML=A,a.appendChild(c);const h=document.createElement("ul");a.appendChild(h);const g=i.children;i1.renderLayers_(g,t,e,n,h,o,s)}else{a.className="layer";const t=document.createElement("input");var h;t.type="checkbox",t.id=l,t.checked=i.getVisible,t.indeterminate=null!==(h=i.indeterminate)&&void 0!==h&&h,t.onchange=function(t){const a=t.target;i1.setVisible_(i,e,n,r,a.checked,o.groupSelectStyle),s(i)},a.appendChild(t),c.htmlFor=l,c.innerHTML=A,a.appendChild(c)}return a},i1.renderLayers_=(t,e,n,i,r,o,s)=>{let a=[...t];o.reverse&&a.reverse();for(let t,A=0;A<a.length;A++)t=a[A],t.name&&r.appendChild(i1.renderLayer_(e,n,i,t,A,o,s))},i1.setVisible_=(t,e,n,i,r,o)=>{var s;(t.setVisible(r),t.group===HC.Points?n():e(),t.group&&!t.combine&&"children"===o)&&(null===(s=t.children)||void 0===s||s.forEach(((t,i)=>{i1.setVisible_(t,e,n,i,r,o)})))},i1.uuid=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})),i1.toggleFold_=(t,e)=>{e.classList.remove(n1+t.fold),t.setFold("open"===t.fold?"close":"open"),e.classList.add(n1+t.fold)};const r1=i1;function o1(t,e,n,i,r,o,s){try{var a=t[o](s),A=a.value}catch(t){return void n(t)}a.done?e(A):Promise.resolve(A).then(i,r)}function s1(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function s(t){o1(o,i,r,s,a,"next",t)}function a(t){o1(o,i,r,s,a,"throw",t)}s(void 0)}))}}function a1(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A1(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){a1(t,e,n[e])}))}return t}function l1(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}let c1,u1,h1;const g1=OS((({options:i,data:s,width:a,height:A,eventBus:l})=>{var c,u,h,g,d,p,f,m;const{pointStore:I,viewStore:y,replaceVariables:C,graph:E,VisLayers:_}=x1(),{getNodeMap:v,getWasmIdsNodeMap:B,getLineSwitchMap:w,findNode:b,addNode:Q,removeNode:x,getEditableLines:D,findEdge:S,batchAddNodes:M,triggerUpdate:k,reset:R,isDefDir:N}=E;u1=i.globalThresholdsConfig;const P=i.svgIconsConfig,T=null===(c=i.common)||void 0===c?void 0:c.locLabelName,L=null===(u=i.common)||void 0===u?void 0:u.isShowLegend,F=null===(h=i.basemap)||void 0===h?void 0:h.apiKey,O=i.isGeocoder,G="mock",U=(0,HE.useStyles2)(d1),j=(0,HE.useTheme2)(),{getTooltipObject:Y,setSelCoord:K,setSelIds:z,setAllComments:J,setComment:q,getComments:H,getRefreshAll:V,setRefreshAll:W,setStatusUpdHost:Z,getSelectedIp:X,getSelFeature:$,getSelIds:tt,getMode:et,getUpdatedHost:nt,getSelectedFeIndexes:it,setSelectedIp:rt,setTooltipObject:ot,setLogTooltipObject:st,setEditable:at,getAllFeatures:At,setAllFeatures:lt,setCommentOpenIdx:ct,setDrawerOpen:ut}=I,{getVisLayers:ht,setVisLayers:gt,setVisRefresh:dt,getVisRefresh:pt}=_,ft=PE(ht,"stat2"),mt=!(null==ft?void 0:ft.getVisible)||(null==ft?void 0:ft.getVisible)&&(null==ft?void 0:ft.indeterminate),{getViewState:It,setViewState:yt,getClusterMaxZoom:Ct}=y,{modules:Et,mapRef:_t}=(0,r.useContext)(z0);h1=null==_t?void 0:_t.current;const vt=null===(d=i.basemap)||void 0===d||null===(g=d.config)||void 0===g?void 0:g.theme,Bt=vt===v_.Auto?j.isDark?"dark":"light":null,wt=Bt||vt,bt=(0,r.useRef)(null),Qt=(0,r.useRef)(null),xt=(0,r.useRef)(null),Dt=(0,r.useRef)(null),[St,Mt]=(0,r.useState)(Y),[kt,Rt]=(0,r.useState)(),[Nt,Pt]=(0,r.useState)([]),[Tt,Lt]=(0,r.useState)(),[Ft,Ot]=(0,r.useState)(!0),[Gt,Ut]=(0,r.useState)(),[jt,Yt]=(0,r.useState)(!0),[Kt,zt]=(0,r.useState)(It),[Jt,qt]=(0,r.useState)(),[Ht,Vt]=(0,r.useState)(),[Wt,Zt]=(0,r.useState)([]),[Xt,$t]=(0,r.useState)(),[te,ee]=(0,r.useState)(0),[ne,ie]=(0,r.useState)(),[re,oe]=(0,r.useState)(null),se=C("$__timezone"),[ae,Ae]=(0,r.useState)(1e3*s.timeRange.to.unix()),le=!!(null===(p=s.annotations)||void 0===p?void 0:p.length),ce=(0,r.useRef)(0),ue=(0,r.useRef)(0),he=(0,r.useMemo)((()=>{const t=[];return null==u1||u1.forEach(((e,n)=>t.push({color:e.color,label:e.label,yAxis:1,disabled:!1}))),t}),[]),[ge,de]=(0,r.useState)(he);(0,r.useEffect)((()=>{const t=function(){var t=s1((function*(){L1.subscribe((t=>{const e=Array.isArray(t)&&[t.at(-1)].map((t=>l1(A1({},t),{metric:/^\d+$/.test(t.metric)?Number(t.metric):t.metric})));e&&(null==e||e.forEach(((t,e)=>{(0,nE.flushSync)((()=>{ie(A1({},t))}))})))})),yield F1()}));return function(){return t.apply(this,arguments)}}();return t(),()=>{}}),[]),(0,r.useEffect)((()=>{if(s.timeRange){var t;Ae(1e3*s.timeRange.to.unix());const e="annotations & alerts query (built-in)";if(le&&(null==ge||null===(t=ge.at(-1))||void 0===t?void 0:t.label)!==e){const t={color:Ef,label:"annotations & alerts query (built-in)",yAxis:1,disabled:!1};de((e=>[...e,t]))}}}),[s]),(0,r.useEffect)((()=>{if(G){const t=function(){var t=s1((function*(){let t;Ht?(t=yield CW({roomID:G,reset:!0}),Vt(t)):(t=yield CW({roomID:G,reset:!1}),Vt(t))}));return function(){return t.apply(this,arguments)}}();t()}else Ht&&Vt(null),at(!1)}),[i]),(0,r.useEffect)((()=>{var t;if(!Ht||!te)return;const e=null==Ht||null===(t=Ht.edges)||void 0===t?void 0:t.find().where("updatedAt").gt(te).$.subscribe(function(){var t=s1((function*(t){if(!t.length)return;const e=t.at(0).updatedAt,n=A1({},H),[i,r]=yield J1(Ht,null);yield EW({edges:t,graph:E,theme:j,commentsData:n,nameToScoreMap:i,scoreToNameMap:r,vCount:ce,eCount:ue}),n&&Object.keys(n).length&&J(n),k(),ee(e),console.log("graph rxupdate",e)}));return function(e){return t.apply(this,arguments)}}());return()=>{null==e||e.unsubscribe()}}),[te,Ht]),(0,r.useEffect)((()=>{const t=l.subscribe(XC,(t=>{zt(void 0),pe({data:s,db:Ht})})),n=l.subscribe(ZC,(t=>{i.basemap.type!==t.payload.mapType&&(gD(i.basemap,Rt,j),zt(void 0),pe({data:s,db:Ht}))})),r=l.getStream(e.DataHoverEvent).pipe((0,gj.throttleTime)(50)).subscribe({next:t=>{var e,n,i;const r=null===(n=t.payload)||void 0===n||null===(e=n.point)||void 0===e?void 0:e.time;r&&!(null==ge||null===(i=ge.at(-1))||void 0===i?void 0:i.disabled)&&Ae(r)}}),o=l.getStream(tE).pipe((0,gj.throttleTime)(8)).subscribe({next:t=>{s&&s.series.length&&W()}}),a=l.subscribe(eE,(t=>{var e;if(null===(e=t.payload)||void 0===e?void 0:e.thresholds){var n,i;const e=[];null===(n=t.payload.thresholds)||void 0===n||n.forEach(((t,n)=>e.push({color:t.color,label:t.label,yAxis:1,disabled:!1})));const r="annotations & alerts query (built-in)";if(le&&(null==ge||null===(i=ge.at(-1))||void 0===i?void 0:i.label)!==r){const t={color:Ef,label:"annotations & alerts query (built-in)",yAxis:1,disabled:!1};e.push(t)}de(e)}}));return()=>{t.unsubscribe(),n.unsubscribe(),r.unsubscribe(),o.unsubscribe(),a.unsubscribe()}}),[l]),(0,r.useEffect)((()=>{ne&&(Z(ne),k())}),[ne]);const pe=function(){var e=s1((function*({data:e,db:r}){var o,s;const l={};for(const t in HC)Object.prototype.hasOwnProperty.call(HC,t)&&(l[HC[t]]=0);const c=[],u=[],h={targets:{},sources:{}},g=null==i?void 0:i.dataLayers;if(!(null==g?void 0:g.length))return;let d=[],p={};const f=g.filter((t=>t.type===HC.Points));if(f.length){const t=[];f.forEach(((e,n)=>{const i=PE(ht,e.name);t.push(new CE({group:HC.Points,name:e.name,visible:!i||i.visible,idx:n}))}));const e=PE(ht,"primary"),n=!e||e.visible;d=((t,e)=>{const n=t.length,i=[new CE({group:HC.Edges,name:"nodes",idx:n+1}),new CE({group:HC.Edges,name:"edges",idx:n+2}),new CE({group:HC.Clusters,name:"clusters",idx:n+3}),new CE({group:HC.SVG,name:"svg",idx:n+4}),new CE({group:HC.Text,name:"labels",idx:n+5}),new CE({group:HC.Comments,name:"comments",idx:n+6}),new CE({group:"option",name:"stat2",idx:n+7,visible:!1})];return[new CE({name:"primary",group:"primary",fold:"open",visible:e,children:[...t,...t.some((t=>t.visible))?i:[]]})]})(t,n)}const m=[...new Set(g.filter((t=>t.type!==HC.Points)).map((t=>t.type)))];p=(t=>{const e={};return t.forEach((t=>{e[t]=new CE({name:t,group:t,fold:"open"})})),e})(m),g.forEach((t=>{if(t.type!==HC.Points){const i=p[t.type];if(i){var e,n;const r=new CE({name:t.name,group:t.group,fold:"open",idx:null!==(n=null===(e=i.children)||void 0===e?void 0:e.length)&&void 0!==n?n:0,visible:"MyGeojson 2"!==t.name});i.children?i.children.push(r):i.children=[r]}}}));const I=[...d,...Object.values(p)];if(I.length){const t=C("$stat"),e=parseInt(t,10);if(1===e||2===e){const t=PE(I,"stat2");t&&(t.visible=2===e)}}E.isEmpty||(console.log("graph not empty, resetting to start adding nodes"),R()),ce.current=0,ue.current=0;for(let t=0;t<i.dataLayers.length;t++){const n=i.dataLayers[t],r=n.name;if(n.type===HC.Points){const t=PE(I,r,"primary");if(t&&!t.visible)continue}const o=hD.getIfExists(n.type);var y;const s=l1(A1({},n),{config:l1(A1({},n.config),{globalThresholdsConfig:u1,startId:null!==(y=l[n.type])&&void 0!==y?y:0,locNames:u,locLabelName:T,svgIconRules:P,commentsData:h,name:r,graph:E,vCount:ce,eCount:ue,lOrder:t})}),a=(null==o?void 0:o.pointsUp)?yield o.pointsUp(e,s,j):null,A=Array.isArray(a)?a:[],g={order:t,colType:n.type,features:A};l[g.colType]=l[g.colType]+g.features.length,c.push(g)}if(gt(I),!Kt){const e=(t=>{let e={id:t.id,longitude:0,latitude:0,zoom:1};const i=n.getIfExists(t.id);if(i){let n,A;var r,o,s,a;null==i.lat||4!==t.zoom?(n=[null!==(r=t.lon)&&void 0!==r?r:0,null!==(o=t.lat)&&void 0!==o?o:0],A=t.zoom):(n=[null!==(s=i.lon)&&void 0!==s?s:0,null!==(a=i.lat)&&void 0!==a?a:0],A=i.zoom),n&&(e.longitude=n[0],e.latitude=n[1]),A&&(e.zoom=A)}return e})(i.view);let r,o,s;e.id===t.Auto?({longitude:r,latitude:o,zoom:s}=dD(e,c,a,A)):({longitude:r,latitude:o,zoom:s}=e);void 0!==r&&void 0!==o?yt(A1({},{longitude:r,latitude:o,zoom:s,yZoom:s+1,maxPitch:42.75})):(Pt([]),zt(void 0)),gD(i.basemap,Rt,j)}const _=[],v=[]=[],B=[]=[];c.forEach((t=>{switch(t.colType){case HC.Points:null==t||t.features.length;break;case HC.Polygons:(null==t?void 0:t.features.length)&&_.push([t.features,t.order]);break;case HC.Path:(null==t?void 0:t.features.length)&&v.push([t.features,t.order]);break;case HC.GeoJson:(null==t?void 0:t.features.length)&&B.push([t.features,t.order])}}));const w={};[_,v,B].forEach(((t,e)=>{null!=t&&(w[["polygons","path","geojson"][e]]=t)})),E.triggerUpdate(),null==E||E.getNodes.forEach((t=>{if(!t.getPropertyValue("feature")){const n=t.getPropertyValue("wasmId");var e;if(console.log("rm node",t,n),E.removeNode(t.getId()),void 0!==n)null===(e=E.rustGraph)||void 0===e||e.rm_vertex(n)}}));const[b,Q]=yield J1(r,null),x=yield null==r||null===(o=r.edges)||void 0===o?void 0:o.find({selector:{},sort:[{updatedAt:"desc"}]}).exec();var D;const S=null!==(D=null==x||null===(s=x.at(0))||void 0===s?void 0:s.updatedAt)&&void 0!==D?D:1;x&&(yield EW({edges:x,graph:E,theme:j,commentsData:h,nameToScoreMap:b,scoreToNameMap:Q,vCount:ce,eCount:ue}),E.triggerUpdate()),ee(S),Object.keys(h).length&&J(h),lt(w);const M=X;M&&(rt(""),rt(M,tt.length?tt:null))}));return function(t){return e.apply(this,arguments)}}();(0,r.useEffect)((()=>{var t;const e=null==re||null===(t=re.properties)||void 0===t?void 0:t.hullCoords;if((null==e?void 0:e.length)>2){let t;e&&(t=lF(l1(A1({},Ie),{id:HC.Hull,colType:HC.Hull,data:[e]}))),(0,nE.flushSync)((()=>{Pt((e=>{let n=!1;const i=e.filter((t=>t)).map((e=>e.id===HC.Hull?(n=!0,t):e));if(!n){const e=[];return n||e.push(t),[...e,...i]}return i}))}))}}),[re]),(0,r.useEffect)((()=>{var t;if(console.log(" rId, localDb",G,null===(t=s.series)||void 0===t?void 0:t.length,null==Ht?void 0:Ht.rxdbVersion),s&&s.series.length){if(qt(void 0),Ce&&!Et)return;if(Ht)return void pe({data:s,db:Ht})}}),[V,Et,Ht,ge,s]),(0,r.useEffect)((()=>{s&&s.series.length&&E.isEmpty&&W()}),[a,A]);const fe=(0,r.useCallback)((()=>{var t;const e=xt;c1=(null===(t=e.current)||void 0===t?void 0:t.getMap)?e.current.getMap():null}),[]);(0,r.useEffect)((()=>{_t&&(h1=_t)}),[_t]);const me={setSelCoord:K,getNodeMap:v,getMode:et,isDefDir:N,setIsShowCenter:qt,setIsRenderNums:Ot,setTooltipObject:ot,setSelectedIp:rt,setLocalViewState:zt,setHoverCluster:oe,setHoverInfo:Mt,setLogTooltipObject:st,setCommentOpenIdx:ct,setDrawerOpen:ut},Ie={theme2:j,pickable:!0,autoHighlight:!0,highlightColor:bE(j.isDark?"rgb(255, 215, 0, 0.2)":"rgb(32, 82, 153, 0.2)"),onHover:Mt,setIconFeatures:Ut,setLineFeatures:Lt,lineFeatures:Tt,graph:E,getUpdatedHost:nt,getSelectedFeIndexes:it,getSelFeature:$,getNodeMap:v,isDefDir:N,findNode:b,findEdge:S,getNodes:E.getNodes,getMode:et,getSelectedIp:X,setSelectedIp:rt,db:Ht,time:ae,options:i,thresholds:u1,setTooltipObject:ot,getTooltipObject:Y,setHoverInfo:Mt,hoverCluster:re,hoverInfo:St,setHoverCluster:oe,legendItems:ge,setIsShowCenter:qt,getVisLayers:ht,setVisRefresh:dt,isRenderNums:Ft,getComments:H,setComment:q,setAllComments:J,commentFeatures:Wt,setCommentFeatures:Zt,setIsRenderNums:Ot,getLineSwitchMap:w,getSelIds:tt,isOffset:mt,stat2:ft,relatedLineIds:Xt,setRelatedLineIds:$t};(0,r.useEffect)((()=>{(0,nE.flushSync)((()=>{if(!It)return;const{longitude:t,latitude:e}=It;zt(A1({},It)),K({type:"Point",coordinates:[t,e]}),qt(A1({},It))}))}),[It]),(0,r.useEffect)((()=>{if(!(null==Gt?void 0:Gt.length)&&!(null==Tt?void 0:Tt.length))return;const t=qE({layerProps:Ie,iconFeatures:Gt,lineFeatures:Tt,commentFeatures:Wt,thresholds:u1,getNodeMap:v,skipExtLine:!0});(0,nE.flushSync)((()=>Pt((e=>function(t,e){{const n=[...t],i=n.findIndex((t=>"centerplot-layer"===(null==t?void 0:t.id)));return n[i]=null,e.forEach(((t,i)=>{const r=n.findIndex((e=>(null==e?void 0:e.id)===(null==t?void 0:t.id)));r>-1?n[r]=e[i]:n.push(e[i])})),n.filter((t=>null!=t))}}(e,t)))))}),[Tt,Gt]);const ye=()=>{var t,e,n,i,r;let o,s,a;const A=[];let l,c,u,h=[];if((null==re||null===(e=re.properties)||void 0===e||null===(t=e.hullCoords)||void 0===t?void 0:t.length)>2){var g;const t=null==re||null===(g=re.properties)||void 0===g?void 0:g.hullCoords;if(t){const e=lF(l1(A1({},Ie),{order:-1,colType:HC.Hull,isStatic:!0,data:[t]}));A.push(e)}}var d;At&&Object.keys(At)&&({polygons:l,path:c,geojson:u}=At),(null==l?void 0:l.length)>0&&l.forEach(((t,e)=>{const[n,i]=t;A.push(lF(l1(A1({},Ie),{index:e,order:i,data:n})))})),(null==c?void 0:c.length)>0&&c.forEach(((t,e)=>{const[n,i]=t;A.push(GE(l1(A1({},Ie),{index:e,order:i,data:n,type:"path"})))})),(null==u?void 0:u.length)>0&&u.forEach(((t,e)=>{const[n,i]=t,r={type:"FeatureCollection",features:n};A.push((t=>{const{data:e,getSelectedIp:n,onHover:i,highlightColor:r,index:o,order:s,thresholds:a,getVisLayers:A}=t,l=PE(A,"doesnMatter",HC.GeoJson,o),c=null==l?void 0:l.getVisible,u=null==l?void 0:l.getIndeterminate;return new yd({id:HC.GeoJson+o,order:s,visible:c&&!u,data:e,pickable:!0,onHover:i,autoHighlight:!0,highlightColor:r,stroked:!1,filled:!0,extruded:!0,getElevation:t=>{var e,n;return null!==(n=null===(e=t.properties)||void 0===e?void 0:e.height)&&void 0!==n?n:0},pointType:"circle",lineWidthMinPixels:2,getFillColor:t=>{var e,n;const{thrId:i,defaultColor:r}=t.properties,o=DE(a,i,r),{color:s}=o,A=null===(n=t.properties)||void 0===n||null===(e=n.style)||void 0===e?void 0:e.opacity,l=bE(s);return A&&(l[3]=Math.round(255*A)),l},getLineColor:t=>{const{thrId:e,defaultColor:n}=t.properties,i=DE(a,e,n),{color:r}=i;return bE(r)},getPointRadius:100,getLineWidth:t=>{const{thrId:e,defaultColor:n}=t.properties;return DE(a,e,n).lineWidth}})})(l1(A1({},Ie),{index:e,order:i,data:r})))}));const p=null!==(d=null==E||null===(n=E.getNodes)||void 0===n?void 0:n.map((t=>t.getPropertyValue("feature"))))&&void 0!==d?d:[];if(p&&p.length>0||A.length>0){const t=PE(ht,"stat2"),e=D,[n,i,r,s,l]=qE({layerProps:Ie,iconFeatures:p,lineFeatures:e,commentFeatures:Wt,thresholds:u1,getNodeMap:v});if((null==t?void 0:t.getVisible)&&!(null==t?void 0:t.getIndeterminate)){const t=e.map((t=>ME(t,u1,v)));o=(null==t?void 0:t.length)>0?UE({data:t.reduce(((t,e)=>e.to?t.concat(e.to):t),[]),dir:"to",type:"list1"}):null}a=new UL(l1(A1({},Ie),{getPosition:t=>t.coordinates,data:p,id:"icon-cluster",sizeScale:40,maxZoom:Ct}));const c="modify"===et?[n,i]:[i,n];h=[...A.sort(((t,e)=>{var n,i;return(null===(n=e.props)||void 0===n?void 0:n.order)-(null===(i=t.props)||void 0===i?void 0:i.order)})),...c,o],r&&(h.unshift(r),h.push(s),h.push(l))}let f=0;const m=[],I=(null==Wt||null===(i=Wt[N?"sources":"targets"])||void 0===i?void 0:i.length)?null==Wt?void 0:Wt[N?"sources":"targets"]:null==H?void 0:H[N?"sources":"targets"];I&&(null===(r=Object.keys(I))||void 0===r||r.forEach((t=>{var e;const n=I[t];null===(e=Object.keys(n))||void 0===e||e.forEach((e=>{const i=n[e];null==i||i.forEach((n=>{const{text:i,iconColor:r,coords:o,orderId:s,revOrderId:a}=n;i&&r&&o&&(m.push({type:"Feature",id:f,comId:[t,e,s].join("|"),geometry:{type:"Point",coordinates:o},properties:{text:i,sIdx:s,tIdx:a,tar:t,src:e,iconColor:r}}),f++)}))}))}))),Object.keys(m).length&&Zt(m),m&&(null==m?void 0:m.length)>0&&(s=YE(l1(A1({},Ie),{isShowTooltip:!0,displayProperties:["text","tar","src"],data:m})),h.push(s)),Jt&&$&&h.push((t=>{const{isShowCenter:e,theme:n}=t,{longitude:i,latitude:r}=e;if(i&&r)return new Ju({id:"centerplot-layer",data:[{coordinates:[i,r]}],pickable:!1,opacity:.2,stroked:!1,filled:!0,radiusScale:5,radiusMinPixels:1,radiusMaxPixels:18,lineWidthMinPixels:1,getPosition:t=>t.coordinates,getRadius:t=>Math.sqrt(t.exits),getFillColor:t=>bE(n.isDark?"rgb(255, 221, 87, 0.9)":"rgb(32, 82, 153, 0.8)"),getLineColor:t=>[0,0,0]})})({isShowCenter:Jt,theme:j})),h.push(a),(0,nE.flushSync)((()=>{Pt(h.filter((t=>null!=t)))}))};(0,r.useEffect)((()=>{rt(X)}),[N]),(0,r.useEffect)((()=>{var t,e,n;((null===(t=i.dataLayers)||void 0===t?void 0:t.some((t=>null==t?void 0:t.query)))||(null===(e=s.request)||void 0===e?void 0:e.targets))&&(null==s||null===(n=s.series)||void 0===n?void 0:n.length)&&ye()}),[Y,ae,N,Ct,tt,It,nt,et,H,At,X,pt]);const Ce="yamaps"===i.basemap.type,Ee=null===(m=i.dataLayers)||void 0===m||null===(f=m[0])||void 0===f?void 0:f.parField,_e=(0,r.useMemo)((()=>o().createElement(o().Fragment,null,jt&&o().createElement(mF,{parField:Ee}))),[At]),ve=(0,r.useMemo)((()=>o().createElement(r1,{theme:j,label:"layers",className:""})),[ht]),Be=(0,r.useMemo)((()=>o().createElement(WL,{setIsShowCenter:qt,options:i,time:ae,timeZone:se,data:s,rId:G})),[i,At,Ct]),we=(0,r.useCallback)(((t,e)=>{de((e=>null==e?void 0:e.map((e=>e!==t?e:l1(A1({},e),{disabled:!e.disabled})))))}),[]);let be,Qe;if(!kt&&!Ce||!Kt)return null;if(Ce&&!Et)return o().createElement("div",null,"Loading Ymaps...");Et&&({YMap:be,YMapDefaultSchemeLayer:Qe}=Et);const{longitude:xe,latitude:De,yZoom:Se,camera:Me={}}=Kt,ke={center:[xe,De],zoom:Se};var Re;return o().createElement("div",{className:U.container,ref:Qt},o().createElement(xT,{widgets:[new eS({id:"myfull",container:null!==(Re=Qt.current)&&void 0!==Re?Re:void 0,placement:"top-right",className:U.fullscreen}),new lS({id:"compass",placement:"top-right",className:U.compass})],ref:bt,style:{pointerEvents:"all",inset:"0px"},layers:Nt,initialViewState:kt?Kt:void 0,viewState:kt?void 0:Kt,onViewStateChange:kt?void 0:t=>{(0,nE.flushSync)((()=>{zt(A1({},t.viewState,(t=>({transitionDuration:10,transitionInterpolator:new If,yZoom:t.viewState.zoom+1,maxPitch:42.75,camera:{azimuth:-t.viewState.bearing*Math.PI/180,tilt:t.viewState.pitch*Math.PI/180*1.05}}))(t)))}))},controller:{dragMode:"pan",doubleClickZoom:!1,scrollZoom:{smooth:!1,speed:.005},inertia:!Ce&&"modify"!==et},onClick:(t,e)=>((t,e,n)=>{const{setSelCoord:i,getNodeMap:r,getMode:o,setIsShowCenter:s,setIsRenderNums:a,setTooltipObject:A,setSelectedIp:l,setLocalViewState:c,setHoverCluster:u,setHoverInfo:h,setLogTooltipObject:g,setCommentOpenIdx:d,setDrawerOpen:p,isDefDir:f}=n,m=t.coordinate;if(m){const[t,e]=m.map((t=>parseFloat(t.toFixed(6))));i({coordinates:[t,e],type:"Point"})}if(t.picked){const{properties:e,id:n,comId:i}=t.object;if(!e)return;const{locName:u,parPath:h}=e;if(i){const{tIdx:t,tar:n,sIdx:i}=e;return l(n),d(f?i:t),void p(!0)}if(u){var I,y;d(-1);const e=null===(I=t.sourceLayer)||void 0===I?void 0:I.id,i=(null==e?void 0:e.startsWith("edges"))?n:null,c=null==u?void 0:u.split(Qf)[0],h=null==r||null===(y=r[c])||void 0===y?void 0:y.getPropertyValue("feature"),g=null==h?void 0:h.geometry,p=null==h1?void 0:h1.zoom,f=null==c1?void 0:c1.getZoom();if(g&&"modify"!==o){const[t,e]=null==g?void 0:g.coordinates;s({longitude:t,latitude:e,zoom:p||f||18,maxPitch:42.75,bearing:0,pitch:0})}a(!0),A(t),l(u,i?[i]:null)}else if(!(null==e?void 0:e.isHull)){var C,E;const n=null===(E=t.object)||void 0===E||null===(C=E.geometry)||void 0===C?void 0:C.coordinates,i=e.expZoom;if(!n||!i)return;const[r,o]=n;c({longitude:r,latitude:o,zoom:i,yZoom:i+1,transitionDuration:250,maxPitch:42.75,rnd:Math.random()})}}else u(null),h({}),s(null),l(""),A({}),g({})})(t,0,me),getCursor:t=>t.isHovering?"pointer":"grab"},kt&&o().createElement(oL,{onLoad:fe,ref:xt,mapStyle:kt,attributionControl:!1},o().createElement(rL,{style:{zIndex:"2",position:"absolute",top:-20,right:j.spacing(5)}}))),o().createElement("div",{className:U.timeNcoords},!!le&&o().createElement(vW,{time:ae}),o().createElement(uF,null)),o().createElement("div",{className:U.geocoder,ref:Dt,id:"geocoder-container"}),O&&F&&o().createElement(xO,{yMapsApiKey:F,setViewState:yt,setSelCoord:K,geocoderRef:Dt}),!kt&&Et&&o().createElement("div",{className:U.yamap},o().createElement(be,{theme:wt,location:ke,camera:Me,mode:"vector",ref:_t,copyrightsPosition:"top right"},o().createElement(Qe,null))),o().createElement(iF,{time:ae,timeZone:se,info:St,dataLayers:i.dataLayers,thresholds:u1}),L&&o().createElement("div",{className:U.legend},o().createElement(HE.VizLegend,{displayMode:HE.LegendDisplayMode.List,placement:"bottom",items:ge,onLabelClick:we})),Be,i.updatesLog&&o().createElement(X0,{setIsShowCenter:qt,setHoverInfo:Mt,time:ae,timeZone:se,rId:G,dataLayers:i.dataLayers}),o().createElement(F0,{setIsShowCenter:qt,setIconFeatures:Ut,setLineFeatures:Lt,rId:G}),_e,ve)})),d1=t=>({page:tv.css`
        padding: ${t.spacing(3)};
        background-color: ${t.colors.background.secondary};
        display: flex;
        justify-content: center;
    `,container:tv.css`
        .maplibregl-ctrl-attrib-button {
            display: none;
        }
    `,yamap:tv.css`
        width: 100%;
        height: 100%;
        z-index: -1;
        position: absolute;
        isolation: isolate;
        inset: 0;
        overflow: hidden;
        pointer-events: none;
    `,geocoder:tv.css`
        display: flex;
        flex-direction: row-reverse;
        //width: 10%;
        position: absolute;
        right: ${t.spacing(1.7)};
        top: ${t.spacing(2)};
    `,textBox:tv.css`
        position: absolute;
        bottom: 0;
        left: 0;
        padding: 10px;
    `,fullscreen:tv.css`
        z-index: 2;
        position: absolute;
        top: ${t.spacing(5)};
        right: 0px;

        overflow: hidden;
        pointer-events: all;
    `,compass:tv.css`
        z-index: 2;
        position: absolute;
        top: ${t.spacing(10)};
        right: 0px;
        overflow: hidden;
        pointer-events: all;
    `,layerSwitcher:tv.css`
        z-index: 200;
        position: absolute;
        top: ${t.spacing(7)};
        left: 0;

        overflow: hidden;
        pointer-events: all;
    `,legend:tv.css`
        z-index: 2;
        position: absolute;
        bottom: 0; // ${t.spacing(3)};
            //left: ${t.spacing(10)};
        //max-width: 85%;
        padding-bottom: 5px;
        pointer-events: all;
        background: ${t.isDark?t.colors.background.secondary:"#EAEAEA"};
    `,timeNcoords:tv.css`
        position: absolute;
        z-index: 3;
        font-size: small;
        bottom: 5px;
        right: 1%;
    `});function p1(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f1(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){p1(t,e,n[e])}))}return t}function m1(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}function I1(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}const y1=class{get getMode(){return this.mode}get getEditable(){return this.editable}get getSelCoord(){return this.selCoord}get getSelIds(){return this.selIds}get getCommentOpenIdx(){return this.commentOpenIdx}get getRefreshAll(){return this.refreshAll}get getSelFeature(){var t,e;const n=null===(t=this.root.graph)||void 0===t?void 0:t.getNodeMap;return null==n||null===(e=n[this.selectedIp])||void 0===e?void 0:e.getPropertyValue("feature")}get getisDrawerOpen(){return this.isDrawerOpen}get getTooltipObject(){return this.tooltipObject}get getLogTooltipObject(){return this.logTooltipObject}get getSelectedFeIndexes(){if(!this.getSelFeature)return null;const{id:t,properties:e}=this.getSelFeature,{colType:n,locName:i}=e,r=this.selIds,o=new Map;return n&&void 0!==t&&(o.set(n,[t]),n===HC.Points&&(null==r?void 0:r.length)&&o.set(HC.Edges,r)),o}get getLog(){return this.log}get getUpdatedHost(){return this.updatedHost}get getComments(){return this.comments}get getAllFeatures(){return this.allFeatures}get getSelectedIp(){return this.selectedIp}constructor(t){var e;p1(this,"root",void 0),p1(this,"allFeatures",{}),p1(this,"refreshAll",{r:5}),p1(this,"comments",void 0),p1(this,"mode","view"),p1(this,"editable",!1),p1(this,"isDrawerOpen",!1),p1(this,"selectedIp",""),p1(this,"selIds",[]),p1(this,"commentOpenIdx",-1),p1(this,"selCoord",{coordinates:[],type:"Point"}),p1(this,"log",[]),p1(this,"updatedHost",null),p1(this,"tooltipObject",wf),p1(this,"logTooltipObject",wf),p1(this,"primaryLayers",void 0),p1(this,"secondaryLayers",void 0),p1(this,"setSelCoord",(t=>{this.selCoord=t})),p1(this,"setMode",(t=>{this.mode=t})),p1(this,"setEditable",(t=>{this.editable=t})),p1(this,"setRefreshAll",(()=>{this.refreshAll=f1({},this.refreshAll)})),p1(this,"setSelIds",(t=>{this.selIds=t})),p1(this,"setCommentOpenIdx",(t=>{this.commentOpenIdx=t})),p1(this,"setDrawerOpen",(t=>{this.isDrawerOpen=t})),p1(this,"setComment",(t=>{const{tar:e,src:n,text:i,orderId:r,coords:o,iconColor:s}=t;if(e&&n&&r){var a,A;const t=null===(A=this.comments)||void 0===A||null===(a=A[e])||void 0===a?void 0:a[n];if(!t)return;const l=t.get(r);if(!l)return;o&&(l.coords=o),i&&(l.text=i),s&&(l.iconColor=s)}})),p1(this,"setAllComments",(t=>{this.comments=t})),p1(this,"setTooltipObject",(t=>{var e;this.tooltipObject=m1(f1({},t),{cluster:!1,object:null!==(e=t.object)&&void 0!==e?e:{}})})),p1(this,"setLogTooltipObject",(t=>{var e;this.logTooltipObject=m1(f1({},t.object),{cluster:!1,object:null!==(e=t.object)&&void 0!==e?e:{}})})),p1(this,"setUpdatedHost",(t=>{this.updatedHost=t})),p1(this,"setSelectedIp",((t,e=null)=>{var n,i,r;if("string"==typeof t&&null!==t){var o;const e=null==t?void 0:t.split(Qf),n=null==e?void 0:e[0];this.selectedIp=null!=n?n:"";const i=null===(o=this.getSelFeature)||void 0===o?void 0:o.geometry;i&&this.setSelCoord(i)}if(!this.getSelFeature)return;const s=this.root.graph.isDefDir,a=null===(n=this.getSelFeature)||void 0===n?void 0:n.properties.locName,A=null===(i=this.root.graph)||void 0===i?void 0:i.findNode(a),l=null==A||null===(r=A.getConnectedEdges().filter((t=>(s?t.getTargetNodeId():t.getSourceNodeId())===a)))||void 0===r?void 0:r.filter((t=>!(null==t?void 0:t.getPropertyValue("is_fake"))));if(Array.isArray(l)&&l.length){const n=null!==e?e:t?l.map((t=>null==t?void 0:t.getPropertyValue("lineId"))).filter((t=>void 0!==t)):[];this.setSelIds(n)}else this.setSelIds([])})),p1(this,"setAllFeatures",(t=>{this.allFeatures=t})),p1(this,"setLog",(t=>{this.log=t,this.log.length>10&&this.log.splice(10)})),p1(this,"addLog",(t=>{this.log.unshift(t),this.log.length>100&&this.log.pop()})),p1(this,"setStatusUpdHost",(t=>{var{time:e,locName:n,metric:i}=t,r=I1(t,["time","locName","metric"]);this.addLog({updatedAt:e,locName:n,metric:i});const o=this.root.graph.getNodeMap,s=null==o?void 0:o[n],a=null==s?void 0:s.getPropertyValue("feature");if(a){const t=void 0!==i?i:a.properties.metric,e=Bx(a.properties,t,u1);r.geometry&&(a.geometry=f1({},r.geometry)),a.properties=f1(m1(f1({},a.properties,r),{liveStat:t}),void 0!==e?{thrId:e}:{})}this.setUpdatedHost(f1({},a))})),this.root=t,this.editable=null===(e=t.options)||void 0===e?void 0:e.isEditable,Hy(this)}};function C1(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const E1=class{get getClusterMaxZoom(){return this.clusterMaxZoom}get getMapProvider(){return this.mapProvider}get getViewState(){return this.viewState}constructor(t){C1(this,"root",void 0),C1(this,"mapProvider","OSM"),C1(this,"viewState",void 0),C1(this,"clusterMaxZoom",16),C1(this,"speed",3),C1(this,"setSpeed",(t=>{this.speed=t})),C1(this,"setViewState",(t=>{this.viewState=t})),C1(this,"setClusterMaxZoom",(t=>{this.clusterMaxZoom=t})),C1(this,"setMapProvider",(t=>{this.mapProvider=t})),this.root=t;const e=t.replaceVariables("$cluster_max_zoom"),n=parseInt(e,10);n>1&&n<19&&(this.clusterMaxZoom=n),Hy(this)}};function _1(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const v1=class{get getVisLayers(){this.forceRefresh;return this.visLayers}get getVisRefresh(){return this.forceRefresh}constructor(t){_1(this,"root",void 0),_1(this,"visLayers",[]),_1(this,"forceRefresh",5),_1(this,"setVisLayers",(t=>{this.visLayers=t})),_1(this,"setVisRefresh",(()=>{this.forceRefresh=Math.random()+1})),this.root=t,Hy(this,{getVisLayers:uI,getVisRefresh:uI,setVisRefresh:ly,setVisLayers:ly},{autoBind:!0})}};function B1(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const w1=class{constructor(t){B1(this,"pointStore",void 0),B1(this,"viewStore",void 0),B1(this,"graph",void 0),B1(this,"VisLayers",void 0),B1(this,"replaceVariables",void 0),B1(this,"options",void 0),B1(this,"theme2",void 0),this.replaceVariables=t.replaceVariables,this.options=t.options,this.theme2=t.theme2,this.pointStore=new y1(this),this.viewStore=new E1(this),this.graph=new s.TS(this),this.VisLayers=new v1(this)}};const b1=(0,r.createContext)(void 0),Q1=({children:t,props:e})=>{const n=new w1(e);return o().createElement(b1.Provider,{value:n},t)},x1=()=>{const t=(0,r.useContext)(b1);if(void 0===t)throw new Error("useRootStore must be used within RootStoreProvider");return t};var D1=g(2249),S1=g.n(D1);function M1(t,e,n,i,r,o,s){try{var a=t[o](s),A=a.value}catch(t){return void n(t)}a.done?e(A):Promise.resolve(A).then(i,r)}function k1(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function s(t){M1(o,i,r,s,a,"next",t)}function a(t){M1(o,i,r,s,a,"throw",t)}s(void 0)}))}}function R1(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function N1(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){R1(t,e,n[e])}))}return t}function P1(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}function T1(){return(T1=k1((function*(){const t=yield(0,WE.getDataSourceSrv)().get("grafana"),n=yield t.query({targets:[{queryType:"measurements",refId:"Aaa",channel:"stream/mystream/upd_metric"}],liveStreaming:!0,scopedVars:{__interval:{text:"1000s",value:"1000s"},__interval_ms:{text:"1000000",value:1e6}},timings:{dataProcessingTime:.09999996423721313}});if((0,gj.isObservable)(n))n.subscribe({next:t=>{var n;const i=(null==t||null===(n=t.data)||void 0===n?void 0:n[0])&&new e.DataFrameView(t.data[0]).toArray();L1.next(i)},error:t=>{console.error("Error:",t)},complete:()=>{console.log("Observable complete")}});else{(0,gj.of)(n).subscribe({next:t=>{var n;const i=(null==t||null===(n=t.data)||void 0===n?void 0:n[0])&&new e.DataFrameView(t.data[0]).toArray();console.log("Received value:",i)},error:t=>{console.error("Error:",t)},complete:()=>{console.log("Observable complete")}})}}))).apply(this,arguments)}const L1=new gj.BehaviorSubject({}),F1=function(){var t=k1((function*(){yield function(){return T1.apply(this,arguments)}()}));return function(){return t.apply(this,arguments)}}();const O1=t=>{const n=t.map((({filteredRest:t,coords:e})=>{if(!e)return null;const[n,i]=e,r=JSON.stringify({coordinates:[n,i],type:"Point"});return P1(N1({},t),{geojson:r,longitude:n,latitude:i})})).filter((t=>null!==t));!function(t,n,i){const r=(0,e.toCSV)([t],i),o=new Blob([String.fromCharCode(65279),r],{type:"text/csv;charset=utf-8"}),s=`${n}-data-${(0,e.dateTimeFormat)(new Date)}.csv`;S1()(o,s)}({name:"exp_dataframe",fields:Object.keys(n[0]).map((t=>({name:t,type:e.FieldType.string,config:{},values:n.map((e=>e[t]))}))),length:n.length},"mapgl")};function G1(t,e){return U1.apply(this,arguments)}function U1(){return(U1=k1((function*(t,e){console.log("post ",t,e);const n=(0,WE.getBackendSrv)().fetch({method:"POST",url:`/api/plugins/vaduga-mapgl-app/resources/${t}`,data:JSON.stringify(e)}),i=yield(0,gj.lastValueFrom)(n);console.log("fetch res",i);const r=i.data;return(null==r?void 0:r.length)?r:[]}))).apply(this,arguments)}const j1=function(){var t=k1((function*(t){return yield G1("pullIds",{minTimestamp:t})}));return function(e){return t.apply(this,arguments)}}(),Y1=function(){var t=k1((function*(t){return yield G1("pullEdges",{minTimestamp:t})}));return function(e){return t.apply(this,arguments)}}(),K1=function(){var t=k1((function*(t){return yield G1("pushIds",{newDocs:t})}));return function(e){return t.apply(this,arguments)}}(),z1=function(){var t=k1((function*(t){return yield G1("pushEdges",{newDocs:t})}));return function(e){return t.apply(this,arguments)}}(),J1=function(){var t=k1((function*(t,e){const n=new Map,i=new Map;if(!t)return[i,n];let r;if(Array.isArray(e)){var o;const n=e.filter((t=>"string"==typeof t));r=yield null===(o=t.ids)||void 0===o?void 0:o.findByIds(n).exec()}else if("string"==typeof e){var s;r=yield null===(s=t.ids)||void 0===s?void 0:s.find({selector:{name:e}}).exec()}else{var a;r=yield null===(a=t.ids)||void 0===a?void 0:a.find({selector:{}}).exec()}return((null==r?void 0:r.size)||(null==r?void 0:r.length))&&(null==r||r.forEach((t=>{const{name:e,tsId:r}=t;null!=r&&(i.set(e,{rxPtId:r}),n.set(r,e))}))),[i,n]}));return function(e,n){return t.apply(this,arguments)}}(),q1=function(){var t=k1((function*(t,e,n){const[i,r]=yield J1(t,e),o=[],s={};return[e.map((t=>{var e;if(Array.isArray(t))return t;const r=n(t),a=null==r?void 0:r.getPropertyValue("feature"),A=null==a||null===(e=a.properties)||void 0===e?void 0:e.locName,l=i.get(A);var c;let u=null!==(c=null==l?void 0:l.rxPtId)&&void 0!==c?c:s[t];if(!u){const e=(0,zC.getTsid)(),n=e.toBase62String();return s[t]=n,o.push({name:t,tsId:n,updatedAt:e.timestamp}),n}return u})).filter((t=>t)),o]}));return function(e,n,i){return t.apply(this,arguments)}}(),H1=function(){var t=k1((function*({db:t,newFeatureParPath:e,findNode:n,actionType:i}){if(!e.length)return;const[r,o]=yield q1(t,e,n),s=null==r?void 0:r.at(0),a=null==r?void 0:r.at(-1),[A,l]=[s,a];if(A&&l){if([A,l].some((t=>"string"!=typeof t)))return console.warn("point id-id edge not strings",A,l),null;const e=null==t?void 0:t.edges,n="path"===i?`${A}-${l}`:`${A}-${A}`,r=yield null==e?void 0:e.findOne({selector:{id:n}}).exec(),o=(new Date).getTime();return console.log("patch",o,r),yield null==r?void 0:r.incrementalPatch({updatedAt:o,_deleted:!0}),o}return null}));return function(e){return t.apply(this,arguments)}}(),V1=function(){var t=k1((function*({db:t,newFeatureParPath:e,findNode:n,isEph:i=!1}){const[r,o]=yield q1(t,e,n),s=r.at(0),a=r.at(-1),[A,l]=[s,a],c=r;if(A&&l&&c.length){var u;if([A,l].some((t=>"string"!=typeof t)))return void console.warn("edge locations not strings",A,l);const e=(new Date).getTime();if(o.length){var h;console.log("new ts records",o);yield null===(h=t.ids)||void 0===h?void 0:h.bulkUpsert(o)}const n={id:A+"-"+l,parPath:c.map((t=>Ly(t))),updatedAt:e};i&&(n.isEph=i),yield null==t||null===(u=t.edges)||void 0===u?void 0:u.incrementalUpsert(n)}}));return function(e){return t.apply(this,arguments)}}();var W1=g(1835),Z1={};Z1.styleTagTransform=ES(),Z1.setAttributes=mS(),Z1.insert=pS().bind(null,"head"),Z1.domAPI=gS(),Z1.insertStyleElement=yS();uS()(W1.A,Z1);W1.A&&W1.A.locals&&W1.A.locals;function X1(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $1(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){X1(t,e,n[e])}))}return t}function t2(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}const e2=({value:t,onChange:e,options:n})=>o().createElement(HE.Select,{width:"auto",allowCustomValue:!0,isLoading:!1,value:t,onChange:t=>{e(null==t?void 0:t.value)},options:n}),n2=t=>{(0,HE.useStyles2)(i2);if(t.context.data&&t.context.data.length>0){const n=t.context.data.flatMap((t=>t.fields)).map((t=>({label:t.name,value:t.name,type:t.type})));return o().createElement(o().Fragment,null,o().createElement(e2,{context:t.context,options:n,item:t.context.item,value:t.overrideField.name,onChange:i=>{"string"==typeof i&&(n.find((t=>t.value===i))||n.push({label:i,value:i,type:e.FieldType.string}),t.nameTypeSetter(t.index,i,n.find((t=>t.value===i)).type))}}),o().createElement(HE.AutoSizeInput,{minWidth:10,disabled:!t.overrideField.name,onCommitChange:e=>{t.valueSetter(t.index,e.currentTarget.value)},defaultValue:t.overrideField.value,placeholder:"val1,val2..."}),o().createElement(HE.IconButton,{disabled:t.disabled,key:"deleteThresholdField",variant:"destructive",name:"x",tooltip:"remove threshold Field",onClick:()=>t.remover(t.index)}))}return o().createElement(HE.Select,{onChange:()=>{},disabled:!0})},i2=t=>({inputPrefix:tv.css`
      display: flex;
      align-items: center;
    `,colorPicker:tv.css`
      padding: 0 ${t.spacing(1)};
    `}),r2=NE(.1,50,1,!0),o2=t=>{const n=(0,HE.useStyles2)(s2),[i,s]=(0,r.useState)((()=>{if(!t.threshold.overrides){return[]}const e=[];return Object.values(t.threshold.overrides).forEach(((t,n)=>{e[n]={overrideField:t,order:n,ID:Te()}})),e})),a=e=>{s(e);const n=[];e.forEach((t=>{n.push(t.overrideField)})),t.overrideSetter(t.index,n)},A=(t,e,n)=>{i[t].overrideField.name=e,i[t].overrideField.type=n,a([...i])},l=(t,e)=>{i[t].overrideField.value=e,a([...i])},c=t=>{const e=[...i];let n=0;for(let i=0;i<e.length;i++)if(e[i].order===t){n=i;break}e.splice(n,1);for(let t=0;t<e.length;t++)e[t].order=t;a([...e])},[u,h]=(0,r.useState)((t=>{r2.keys();return t})(t.threshold.lineWidth));return o().createElement(HE.Input,{title:"metric threshold value",disabled:t.disabled,type:"number",step:"1.0",key:t.ID,onChange:e=>t.valueSetter(t.index,Number(e.currentTarget.value)),value:t.threshold.value,prefix:o().createElement("div",{className:n.inputPrefix},o().createElement(HE.Tooltip,{content:"stat1 color"},o().createElement("div",{className:n.colorPicker},o().createElement(HE.ColorPicker,{color:t.threshold.color,onChange:e=>{t.colorSetter(t.index,e)},enableNamedColors:!0}))),o().createElement("div",null,o().createElement(HE.Select,{title:"line width",disabled:t.disabled,menuShouldPortal:!0,value:u,onChange:e=>{const n="string"==typeof e.value?parseFloat(e.value):e.value;n&&(h(e),t.lineWidthSetter(t.index,n))},options:"number"==typeof u?r2.concat([{value:u,label:u.toString()}]):r2,allowCustomValue:!0,width:"auto"}))),suffix:o().createElement(o().Fragment,null,o().createElement(HE.AutoSizeInput,{title:"color label",disabled:!1,onCommitChange:e=>{t.labelSetter(t.index,e.currentTarget.value)},defaultValue:t.threshold.label,placeholder:"label"}),i&&i.map(((e,n)=>o().createElement(n2,{disabled:t.disabled||!1,key:`threshold-field-index-${e.ID}`,ID:e.ID,overrideField:e.overrideField,nameTypeSetter:A,valueSetter:l,remover:c,index:n,context:t.context}))),o().createElement(HE.IconButton,{disabled:t.disabled,key:"addThresholdField",variant:"primary",name:"plus",tooltip:"add override",onClick:()=>{const t=i.length,n={overrideField:{name:"",value:"",type:e.FieldType.string},order:t,ID:Te()};a([...i,n])}}),o().createElement(HE.IconButton,{disabled:t.disabled,key:"deleteThreshold",variant:"destructive",name:"trash-alt",tooltip:"delete threshold",onClick:()=>t.remover(t.index)}))})},s2=t=>({inputPrefix:tv.css`
      display: flex;
      align-items: center;
    `,colorPicker:tv.css`
      padding: 0 ${t.spacing(1)} 0 0;
    `}),a2=t=>{const{context:e}=t,n=e.eventBus,i=(0,HE.useStyles2)(A2),[s,a]=(0,r.useState)((()=>{if(!t.thresholds){return[]}const e=[];return t.thresholds.forEach(((t,n)=>{e[n]={threshold:t,order:n,ID:Te()}})),e})),A=(0,HE.useTheme2)(),l=((0,HE.useTheme)(),e=>{a(e);const i=[];e.forEach((t=>{i.push(t.threshold)})),null==n||n.publish({type:"thresholdType",payload:{thresholds:i}}),t.setter(i)}),c=(t,e,n)=>{e&&(s[t].threshold.overrides=e,l([...s]))},u=(t,e)=>{s[t].threshold.value=Number(e);const n=[...s],i=(0,V_.orderBy)(n,["threshold.value"],["asc"]);l([...i])},h=(t,e)=>{let n=e;void 0!==A.visualization&&(n=A.visualization.getColorByName(e)),s[t].threshold.color=QE(n),l([...s])},g=(t,e)=>{s[t].threshold.lineWidth=e,l([...s])},d=(t,e)=>{s[t].threshold.label=e,l([...s])},p=t=>{const e=[...s];let n=0;for(let i=0;i<e.length;i++)if(e[i].order===t){n=i;break}e.splice(n,1);for(let t=0;t<e.length;t++)e[t].order=t;l([...e])};return o().createElement(o().Fragment,null,o().createElement(HE.Button,{className:i.addBtn,disabled:t.disabled,fill:"solid",variant:"primary",icon:"plus",onClick:()=>{const t={threshold:{overrides:[],color:"rgba(154, 205, 50)",lineWidth:1.5,label:"",value:0},order:s.length,ID:Te()};l([...s,t])}},"Add Threshold"),s&&s.map(((e,n)=>o().createElement(o2,{disabled:t.disabled||!1,key:`threshold-item-index-${e.ID}`,ID:e.ID,threshold:e.threshold,colorSetter:h,lineWidthSetter:g,valueSetter:u,labelSetter:d,overrideSetter:c,remover:p,index:n,context:t.context}))))},A2=t=>({addBtn:tv.css`
      margin-bottom: ${t.spacing(1)};;      
    `}),l2=({context:t,onChange:e})=>{const[n,i]=(0,r.useState)(t.options.globalThresholdsConfig);return o().createElement(o().Fragment,null,o().createElement(HE.Field,null,o().createElement(a2,{context:t,thresholds:n,setter:t=>{i(t),e(t)}})))};var c2=function(){};var u2="undefined"!=typeof window;const h2=function(t,e,n){if(!u2)return[e,c2,c2];if(!t)throw new Error("useLocalStorage key may not be falsy");var i=n?n.raw?function(t){return t}:n.deserializer:JSON.parse,o=(0,r.useRef)((function(t){try{var r=n?n.raw?String:n.serializer:JSON.stringify,o=localStorage.getItem(t);return null!==o?i(o):(e&&localStorage.setItem(t,r(e)),e)}catch(t){return e}})),s=(0,r.useState)((function(){return o.current(t)})),a=s[0],A=s[1];(0,r.useLayoutEffect)((function(){return A(o.current(t))}),[t]);var l=(0,r.useCallback)((function(e){try{var r="function"==typeof e?e(a):e;if(void 0===r)return;var o=void 0;o=n?n.raw?"string"==typeof r?r:JSON.stringify(r):n.serializer?n.serializer(r):JSON.stringify(r):JSON.stringify(r),localStorage.setItem(t,o),A(i(o))}catch(t){}}),[t,A]),c=(0,r.useCallback)((function(){try{localStorage.removeItem(t),A(void 0)}catch(t){}}),[t,A]);return[a,l,c]},g2=o().memo((({id:t,title:e,children:n,forceOpen:i,isOpenDefault:s,renderTitle:a,className:A,itemsCount:l,isNested:c=!1})=>{const u=!1!==s,[h,g]=h2(p2(t),{isExpanded:u});var d;const[p,f]=(0,r.useState)(null!==(d=null==h?void 0:h.isExpanded)&&void 0!==d?d:u),m=(0,HE.useStyles2)(d2);(0,r.useEffect)((()=>{!p&&i&&i>0&&f(!0)}),[i,p]);const I=(0,r.useCallback)((()=>{g({isExpanded:!p}),f(!p)}),[g,f,p]);a||(a=function(t){return t||void 0===l||0===l?e:o().createElement("span",null,e," ",o().createElement(HE.Counter,{value:l}))});const y=(0,tv.cx)({[m.box]:!0,[m.boxNestedExpanded]:c&&p},A,"options-group"),C=(0,tv.cx)(m.header,{[m.headerExpanded]:p,[m.headerNested]:c}),E=(0,tv.cx)(m.body,{[m.bodyNested]:c});return o().createElement("div",{className:y,"data-testid":"options-category","aria-label":PX.components.OptionsGroup.group(t)},o().createElement("div",{className:C,onClick:I,"aria-label":PX.components.OptionsGroup.toggle(t)},o().createElement("div",{className:(0,tv.cx)(m.toggle,"editor-options-group-toggle")},o().createElement(HE.Icon,{name:p?"angle-down":"angle-right"})),o().createElement("div",{className:m.title,role:"heading"},a(p))),p&&o().createElement("div",{className:E},n))}));g2.displayName="OptionsPaneCategory";const d2=t=>({box:tv.css`
      border-top: 1px solid ${t.colors.border.weak};
    `,boxNestedExpanded:tv.css`
      margin-bottom: ${t.spacing(2)};
    `,toggle:tv.css`
      color: ${t.colors.text.secondary};
      margin-right: ${t.spacing(1)};
    `,title:tv.css`
      flex-grow: 1;
      overflow: hidden;
    `,header:tv.css`
      display: flex;
      cursor: pointer;
      align-items: baseline;
      padding: ${t.spacing(1)};
      color: ${t.colors.text.primary};
      font-weight: ${t.typography.fontWeightMedium};

      &:hover {
        background: ${t.colors.emphasize(t.colors.background.primary,.03)};
      }
    `,headerExpanded:tv.css`
      color: ${t.colors.text.primary};
    `,headerNested:tv.css`
      padding: ${t.spacing(.5,0,.5,0)};
    `,body:tv.css`
      padding: ${t.spacing(1,2,1,4)};
    `,bodyNested:tv.css`
      position: relative;
      padding-right: 0;
      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 8px;
        width: 1px;
        height: 100%;
        background: ${t.colors.border.weak};
      }
    `}),p2=t=>`grafana.dashboard.editor.ui.optionGroup[${t}]`;function f2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class m2{addItem(t){return t.parent=this,this.items.push(t),this}addCategory(t){return t.props.isNested=!0,t.parent=this,this.categories.push(t),this}render(t){return this.props.customRender?this.props.customRender():o().createElement(g2,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){f2(t,e,n[e])}))}return t}({key:this.props.title},this.props),this.items.map((t=>t.render())),this.categories.map((t=>t.render())))}constructor(t){f2(this,"props",void 0),f2(this,"items",void 0),f2(this,"categories",void 0),f2(this,"parent",void 0),this.props=t,this.items=[],this.categories=[]}}function I2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y2(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){I2(t,e,n[e])}))}return t}function C2(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}function E2(t,e,n){const i=Array.isArray(e)?e:e.split("."),r=i.shift();if(r.endsWith("]")){const e=r.lastIndexOf("["),o=+r.substring(e+1,r.length-1),s=r.substring(0,e);let a=t[s];const A=Array.isArray(a)?[...a]:[];return i.length&&(a=A[o],null!=a&&"object"==typeof a||(a={}),n=E2(a,i,n)),A[o]=n,C2(y2({},t),{[s]:A})}if(!i.length)return C2(y2({},t),{[r]:n});let o=t[r];return null!=o&&"object"==typeof o||(o={}),C2(y2({},t),{[r]:E2(o,i,n)})}var _2=g(2341),v2=g.n(_2);function B2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class w2{getLabel(t){const{title:e,description:n}=this.props;if(!t)return this.parent.props.title===e?null:e;const i=[];return this.parent.parent&&i.push(this.highlightWord(this.parent.parent.props.title,t)),this.parent.props.title!==e&&i.push(this.highlightWord(this.parent.props.title,t)),o().createElement(HE.Label,{description:n&&this.highlightWord(n,t),category:i},this.highlightWord(e,t))}highlightWord(t,e){return o().createElement(v2(),{textToHighlight:t,searchWords:[e],highlightClassName:"search-fragment-highlight"})}render(t){const{title:e,description:n,render:i,showIf:r,skipField:s}=this.props,a=`${this.parent.props.id} ${e}`;return r&&!r()?null:s?i():o().createElement(HE.Field,{label:this.getLabel(t),description:n,key:a,"aria-label":PX.components.PanelEditor.OptionsPane.fieldLabel(a)},i())}constructor(t){B2(this,"props",void 0),B2(this,"parent",void 0),this.props=t}}function b2(t,e,n,i){for(const r of t){if(r.showIf&&!r.showIf(i.options,i.data))continue;const t=e(r.category),s=r.editor;t.addItem(new w2({title:r.name,description:r.description,render:function(){return o().createElement(s,{value:(0,V_.get)(i.options,r.path),onChange:t=>{n(r.path,t)},item:r,context:i})}}))}}function Q2(t,e,n,i,r,o,s){try{var a=t[o](s),A=a.value}catch(t){return void n(t)}a.done?e(A):Promise.resolve(A).then(i,r)}const x2=[{label:"Cities",description:"Lookup cities by name or three letter code",value:k_},{label:"Countries",description:"Lookup countries by name, two letter code, or three letter code",value:"public/gazetteer/countries.json"},{label:"USA States",description:"Lookup states by name or 2 ",value:"public/gazetteer/usa-states.json"}],D2=({value:t,onChange:e,context:n})=>{const i=(0,HE.useStyles2)(S2),[s,a]=(0,r.useState)();(0,r.useEffect)((()=>{function e(){return e=function(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function s(t){Q2(o,i,r,s,a,"next",t)}function a(t){Q2(o,i,r,s,a,"throw",t)}s(void 0)}))}}((function*(){const e=yield R_(t);a(e)})),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,a]);const{current:A,options:l}=(0,r.useMemo)((()=>{let t=[...x2],e=t.find((t=>t.value===(null==s?void 0:s.path)));return!e&&s&&(e={label:s.path,value:s.path},t.push(e)),{options:t,current:e}}),[s]);return o().createElement(o().Fragment,null,o().createElement(HE.Select,{menuShouldPortal:!0,value:A,options:l,onChange:t=>e(t.value),allowCustomValue:!0,formatCreateLabel:t=>`Load from URL: ${t}`}),s&&o().createElement(o().Fragment,null,s.error&&o().createElement(HE.Alert,{title:s.error,severity:"warning"}),s.count&&o().createElement("div",{className:i.keys},o().createElement("b",null,"(",s.count,")"),s.examples(10).map((t=>o().createElement("span",{key:t},t,",")))," ","&ellipsis;")))},S2=t=>({keys:tv.css`
      margin-top: 4px;
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;

      > span {
        margin-left: 4px;
      }
    `}),M2=({value:t,context:n,onChange:i,item:s})=>{const a=(0,r.useMemo)((()=>n.data.map((t=>({value:t.refId,label:`Query: ${t.refId} (size: ${t.length})`,description:t.fields.map((t=>(0,e.getFieldDisplayName)(t))).join(", ")})))),[n.data]),[A,l]=(0,r.useState)({refIds:[],value:void 0}),c=(0,r.useMemo)((()=>{var e;return null!==(e=a.find((e=>e.value===(null==t?void 0:t.options))))&&void 0!==e?e:((t,e,n)=>{if(!n)return;return t.find((t=>!e.some((e=>t===e))))||void 0})(a,A.refIds,A.value)}),[t,a,A]),u=(0,r.useCallback)((t=>{i((null==t?void 0:t.value)?{id:e.FrameMatcherID.byRefId,options:t.value}:void 0)}),[i]);return a===A.refIds&&(null==c?void 0:c.value)===A.value||l({refIds:a,value:null==c?void 0:c.value}),o().createElement(HE.Select,{options:a,onChange:u,isClearable:!0,placeholder:"Change filter",value:c})};function k2(t,e,n,i,r,o,s){try{var a=t[o](s),A=a.value}catch(t){return void n(t)}a.done?e(A):Promise.resolve(A).then(i,r)}const R2=function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function s(t){k2(o,i,r,s,a,"next",t)}function a(t){k2(o,i,r,s,a,"throw",t)}s(void 0)}))}}((function*(t){const n=[];if(t&&t.data&&t.data.length>0&&t.options&&t.options.query&&t.options.query.options){const i=t.data;for(let r=0;r<i.length;r++)if(i[r].refId&&i[r].refId===t.options.query.options){const i=t.data[r];for(const r of i.fields){const o=(0,e.getFieldDisplayName)(r,i,t.data),s=r.name;n.push({value:s,label:o})}}}else if(t&&t.data&&t.data.length>0&&t.data[0]){const i=t.data;for(let r=0;r<i.length;r++){const i=t.data[r];for(const r of i.fields){const o=(0,e.getFieldDisplayName)(r,i,t.data),s=r.name;n.push({value:s,label:o})}}}return n}));return function(e){return t.apply(this,arguments)}}();function N2(t,e,n,i,r,o,s){try{var a=t[o](s),A=a.value}catch(t){return void n(t)}a.done?e(A):Promise.resolve(A).then(i,r)}function P2(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function s(t){N2(o,i,r,s,a,"next",t)}function a(t){N2(o,i,r,s,a,"throw",t)}s(void 0)}))}}function T2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function L2(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){T2(t,e,n[e])}))}return t}function F2(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}const O2=({options:t,eventBus:n,onChange:i,data:s,filter:a})=>{const A=(0,r.useMemo)((()=>hD.selectOptions((null==t?void 0:t.type)?[t.type]:[cD.type],a)),[null==t?void 0:t.type,a]),l=(0,r.useCallback)(P2((function*(){if(!(null==t?void 0:t.geojsonurl))return[];const e=null==t?void 0:t.geojsonurl;if(!e)return;let n=yield fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).catch((t=>{console.log(t)}));if(!n)return[];let i=yield n.json();return Object.keys(i.features[0].properties).map((t=>({value:t,label:t})))})),[null==t?void 0:t.geojsonurl]),c=(0,r.useMemo)((()=>{const n=hD.getIfExists(null==t?void 0:t.type);if(!n||!(n.registerOptionsUI||n.showLocation||n.showOpacity||"yamaps"===n.id))return null;const i=new e.PanelOptionsEditorBuilder;return"yamaps"===n.id&&i.addTextInput({path:"apiKey",name:"API key",description:"API key for Yandex maps 3. Your domain name has to be listed as HTTP referer at Yandex Developer Dashboard.",settings:{}}),n.showLocation&&i.addTextInput({path:"name",name:"Layer name",settings:{}}).addTextInput({path:"geojsonurl",name:"GeoJson Url",description:"Url to a file with valid GeoJSON FeatureCollection object",settings:{},showIf:t=>t.type===HC.GeoJson}).addCustomEditor({id:"query",path:"query",name:"Data query",editor:M2,showIf:t=>t.type!==HC.GeoJson}).addRadio({path:"location.mode",name:"Location",description:"",defaultValue:O_.Auto,settings:{options:[{value:O_.Auto,label:"Auto"},{value:O_.Coords,label:"Coords"},{value:O_.Geojson,label:"Geojson"},{value:O_.Lookup,label:"Lookup"},{value:O_.Geohash,label:"Geohash"}]},showIf:t=>t.type!==HC.GeoJson}).addFieldNamePicker({path:"location.geojson",name:"Geojson field",showIf:t=>{var e;return(null===(e=t.location)||void 0===e?void 0:e.mode)===O_.Geojson}}).addFieldNamePicker({path:"location.longitude",name:"Longitude field",settings:{filter:t=>t.type===e.FieldType.number,noFieldsMessage:"No numeric fields found"},showIf:t=>{var e;return(null===(e=t.location)||void 0===e?void 0:e.mode)===O_.Coords}}).addFieldNamePicker({path:"location.latitude",name:"Latitude field",settings:{filter:t=>t.type===e.FieldType.number,noFieldsMessage:"No numeric fields found"},showIf:t=>{var e;return(null===(e=t.location)||void 0===e?void 0:e.mode)===O_.Coords}}).addFieldNamePicker({path:"location.geohash",name:"Geohash field",settings:{filter:t=>t.type===e.FieldType.string,noFieldsMessage:"No strings fields found"},showIf:t=>{var e;return(null===(e=t.location)||void 0===e?void 0:e.mode)===O_.Geohash}}).addFieldNamePicker({path:"location.lookup",name:"Lookup field",settings:{filter:t=>t.type===e.FieldType.string,noFieldsMessage:"No strings fields found"},showIf:t=>{var e;return(null===(e=t.location)||void 0===e?void 0:e.mode)===O_.Lookup}}).addCustomEditor({id:"gazetteer",path:"location.gazetteer",name:"Gazetteer",editor:D2,showIf:t=>{var e;return(null===(e=t.location)||void 0===e?void 0:e.mode)===O_.Lookup}}).addFieldNamePicker({path:"locField",name:"Target name field",settings:{filter:t=>t.type===e.FieldType.string,noFieldsMessage:"No string fields found"},showIf:t=>t.type!==HC.GeoJson}).addSelect({path:"geojsonLocName",name:"Location name GeoJson property",settings:{allowCustomValue:!0,options:[],placeholder:"GeoJson properties",getOptions:l},showIf:t=>t.type===HC.GeoJson,defaultValue:""}).addFieldNamePicker({path:"parField",name:"Source name / path to source field",description:"String or Array<String | [lon, lat]>",settings:{filter:t=>t.type===e.FieldType.string,noFieldsMessage:"No string fields found"},showIf:t=>t.type===HC.Points}).addFieldNamePicker({path:"edgeLabelField",name:"Edge label field",description:"text is visible in stat2 mode",settings:{noFieldsMessage:"No fields found"},showIf:t=>t.type===HC.Points}).addBooleanSwitch({path:"isShowBW",name:"Show secondary metric",description:"experimental: display tput/band ratio with hardcoded color thresholds",defaultValue:!1,showIf:t=>t.type===HC.Points}).addNumberInput({path:"bandNumber",name:"Bandwidth #",description:"default bandwidth in bits/sec (SI) (bps).",showIf:t=>t.isShowBW}).addFieldNamePicker({path:"bandField",name:"Bandwidth field",description:"bandwidth in bits/sec (SI) (bps).",settings:{filter:t=>t.type===e.FieldType.number,noFieldsMessage:"No fields found"},showIf:t=>t.isShowBW}).addFieldNamePicker({path:"throughputField",name:"Throughput field",description:"throughput in bits/sec (SI) (bps).",settings:{filter:t=>t.type===e.FieldType.number,noFieldsMessage:"No fields found"},showIf:t=>t.isShowBW}).addSelect({path:"geojsonMetricName",name:"Metric name GeoJson property",description:"select Metric GeoJson property with numeric values",settings:{allowCustomValue:!0,options:[],placeholder:"GeoJson properties",getOptions:l},showIf:t=>t.type===HC.GeoJson}).addBooleanSwitch({path:"isShowTooltip",name:"Show tooltip",description:"applies to current layer",defaultValue:!0}).addMultiSelect({path:"displayProperties",name:"Tooltip properties",description:"applies to current layer",settings:{allowCustomValue:!0,options:[],placeholder:"All Properties",getOptions:(null==t?void 0:t.type)===HC.GeoJson?l:null!=R2?R2:[]},showIf:t=>t.isShowTooltip,defaultValue:""}).addMultiSelect({path:"searchProperties",name:"Search by",description:"extra fields to search by (save & reload)",settings:{allowCustomValue:!1,options:[],placeholder:"Search by location name",getOptions:R2},showIf:t=>t.type===HC.Points,defaultValue:""}),n.registerOptionsUI&&n.registerOptionsUI(i),i}),[null==t?void 0:t.type,l]),u=(0,r.useMemo)((()=>{const e=hD.getIfExists(null==t?void 0:t.type);if(!c||!e)return null;const n=new m2({id:"Layer config",title:"Layer config"}),r={data:s,options:t},a=F2(L2({},t),{type:e.id,config:L2({},e.defaultOptions,null==t?void 0:t.config)});(!t||e.defaultOptions&&!t.config)&&i(a);return b2(c.getRegistry().list(),(t=>n),((t,e)=>{i(E2(a,t,e))}),r),o().createElement(o().Fragment,null,o().createElement("br",null),n.items.map((t=>t.render())))}),[c,i,s,t]);return o().createElement("div",null,o().createElement(HE.Select,{menuShouldPortal:!0,options:A.options,value:A.current,onChange:e=>{null==n||n.publish({type:"mapType",payload:{type:e}});const r=hD.getIfExists(e.value);r?i(F2(L2({},t),{type:r.id,config:L2({},r.defaultOptions)})):console.warn("layer does not exist",e)}}),u)};function G2(t){return!!t.isBaseMap&&(t.state!==e.PluginState.alpha||a_)}const U2=({value:t,onChange:e,context:n})=>WE.config.geomapDisableCustomBaseLayer?o().createElement("div",null,"The base layer is configured by the server admin."):o().createElement(O2,{options:t,eventBus:n.eventBus,data:n.data,onChange:e,filter:G2});function j2(t){return!t.isBaseMap&&(t.state!==e.PluginState.alpha||a_)}const Y2=({value:t,onChange:e,context:n})=>{const i=(0,HE.useStyles2)((t=>({collapsible:tv.css`
      margin-top: 5px;
      padding-left: 5px;    
      border-bottom: solid 0.001px;      
    `})));return o().createElement(o().Fragment,null,o().createElement("div",{className:"data-layer-add"},o().createElement(HE.ToolbarButton,{icon:"plus",tooltip:"add new layer",variant:"primary",key:"Add",onClick:()=>{let n=t?W_().cloneDeep(t):[];n.push(Tx),e(n)}},"Add Layer")),(t||[]).map(((r,s)=>o().createElement(o().Fragment,null,o().createElement(HE.CollapsableSection,{className:i.collapsible,label:r.name?r.name+" layer":"unnamed layer",isOpen:!1},o().createElement(O2,{options:r||void 0,data:n.data,onChange:n=>{let i=t?W_().cloneDeep(t):[];i[s]=n,e(i)},filter:j2}),o().createElement("div",{className:"data-layer-remove"},o().createElement(HE.ToolbarButton,{icon:"trash-alt",tooltip:"delete",variant:"destructive",key:"Delete",onClick:n=>{(n=>{let i=t?W_().cloneDeep(t):[];i.splice(n,1),e(i)})(s)}},"Delete")))))))};function K2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class z2 extends r.PureComponent{componentDidMount(){this.setState({text:isNaN(this.props.value)?"":`${this.props.value}`})}componentDidUpdate(t){if(this.props.value!==t.value){const t=isNaN(this.props.value)?"":`${this.props.value}`;t!==this.state.text&&this.setState({text:t})}}renderInput(){return o().createElement(HE.Input,{type:"number",ref:this.inputRef,min:this.props.min,max:this.props.max,step:this.props.step,autoFocus:this.props.autoFocus,value:this.state.text,onChange:this.onChange,onBlur:this.updateValue,onKeyPress:this.onKeyPress,placeholder:this.props.placeholder})}render(){const{inputCorrected:t}=this.state;if(t){let e="",{min:n,max:i}=this.props;return null==i?null!=n&&(e=`< ${n}`):e=null!=n?`${n} < > ${i}`:`> ${i}`,o().createElement(HE.Field,{invalid:t,error:`Out of range ${e}`,validationMessageHorizontalOverflow:!0,style:{direction:"rtl"}},this.renderInput())}return this.renderInput()}constructor(...t){super(...t),K2(this,"state",{text:"",inputCorrected:!1}),K2(this,"inputRef",o().createRef()),K2(this,"updateValue",(()=>{var t;let e;const n=null===(t=this.inputRef.current)||void 0===t?void 0:t.value;(null==n?void 0:n.length)&&(e=+n,isNaN(e))||(e!==this.props.value&&this.props.onChange(e),this.state.inputCorrected&&this.setState({inputCorrected:!1}))})),K2(this,"updateValueDebounced",(0,V_.debounce)(this.updateValue,500)),K2(this,"onChange",(t=>{let e,n=!1;const i=this.props.min,r=this.props.max,o=t.currentTarget.valueAsNumber;Number.isNaN(o)||(null!=i&&o<i?(e=i.toString(),n=!0):null!=r&&o>r?(e=r.toString(),n=!0):e=t.currentTarget.value),this.setState({text:e||"",inputCorrected:n}),this.updateValueDebounced()})),K2(this,"onKeyPress",(t=>{"Enter"===t.key&&this.updateValue()}))}}function J2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q2(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){J2(t,e,n[e])}))}return t}function H2(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}const V2=({value:e,onChange:i,context:s})=>{const a=(0,r.useCallback)((t=>{var e;null===(e=s.eventBus)||void 0===e||e.publish({type:"mapView",payload:"update",theme:""}),i(t)}),[i,s.eventBus]),A=(0,r.useMemo)((()=>{const t=[];return(null==e?void 0:e.id)?t.push(e.id):t.push(n.list()[0].id),n.selectOptions(t)}),[null==e?void 0:e.id]),l=(0,r.useCallback)((()=>{if(c1||h1){var n;const i=null!==(n=null==h1?void 0:h1.center)&&void 0!==n?n:c1.getCenter(),r=(null==h1?void 0:h1.zoom)?(null==h1?void 0:h1.zoom)-1:c1.getZoom();if(i&&r){const n=h1?null==i?void 0:i[0]:null==i?void 0:i.lng,o=h1?null==i?void 0:i[1]:null==i?void 0:i.lat;n&&o&&a(H2(q2({},e),{id:t.Coordinates,lon:+n.toFixed(6),lat:+o.toFixed(6),zoom:+r.toFixed(2)}))}}}),[e,a]),c=(0,r.useCallback)((i=>{const r=n.getIfExists(i.value);var o,s,A;r&&r.id!==t.Auto?a(H2(q2({},e),{id:r.id,lat:null!==(o=r.lat)&&void 0!==o?o:null==e?void 0:e.lat,lon:null!==(s=r.lon)&&void 0!==s?s:null==e?void 0:e.lon,zoom:null!==(A=r.zoom)&&void 0!==A?A:null==e?void 0:e.zoom})):r&&r.id===t.Auto&&a(H2(q2({},e),{id:r.id}))}),[e,a]);var u;return o().createElement(o().Fragment,null,o().createElement(HE.InlineFieldRow,null,o().createElement(HE.InlineField,{label:"View",labelWidth:10,grow:!0},o().createElement(HE.Select,{menuShouldPortal:!0,options:A.options,value:A.current,onChange:c}))),(null==e?void 0:e.id)===t.Coordinates&&o().createElement(o().Fragment,null,o().createElement(HE.InlineFieldRow,null,o().createElement(HE.InlineField,{label:"Latitude",labelWidth:10,grow:!0},o().createElement(z2,{value:e.lat,min:-90,max:90,step:.001,onChange:t=>{a(H2(q2({},e),{lat:t}))}}))),o().createElement(HE.InlineFieldRow,null,o().createElement(HE.InlineField,{label:"Longitude",labelWidth:10,grow:!0},o().createElement(z2,{value:e.lon,min:-180,max:180,step:.001,onChange:t=>{a(H2(q2({},e),{lon:t}))}})))),o().createElement(HE.InlineFieldRow,null,o().createElement(HE.InlineField,{label:"Zoom",labelWidth:10,grow:!0},o().createElement(z2,{value:null!==(u=null==e?void 0:e.zoom)&&void 0!==u?u:1,min:1,max:18,step:.01,onChange:t=>{a(H2(q2({},e),{zoom:t}))}}))),o().createElement(HE.InlineFieldRow,null,o().createElement(HE.Button,{variant:"secondary",size:"sm",fullWidth:!0,onClick:l},o().createElement("span",null,"Use current map settings"))))};function W2(t,e,n,i,r,o,s){try{var a=t[o](s),A=a.value}catch(t){return void n(t)}a.done?e(A):Promise.resolve(A).then(i,r)}function Z2(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function s(t){W2(o,i,r,s,a,"next",t)}function a(t){W2(o,i,r,s,a,"throw",t)}s(void 0)}))}}function X2(){return(X2=Z2((function*(){const t=window.indexedDB&&"function"==typeof window.indexedDB.databases?yield window.indexedDB.databases():null,e=null==t?void 0:t.filter((({name:t})=>null==t?void 0:t.startsWith("rxdb-")));return null==e?void 0:e.map((t=>{var e;const n=null==t||null===(e=t.name)||void 0===e?void 0:e.split("--").at(0);return{name:n,shortcut:null==n?void 0:n.replace("rxdb-dexie-","")}}))}))).apply(this,arguments)}const $2=({value:t,context:e,onChange:n,item:i})=>{const[s,a]=(0,r.useState)(),[A,l]=(0,r.useState)(),c=((0,r.useMemo)((()=>{const t=function(){var t=Z2((function*(){const t=yield function(){return X2.apply(this,arguments)}(),e=t?[...new Set(t.map((t=>t.shortcut)))].map((e=>{var n;return{value:e,label:e,description:`info: ${null==t||null===(n=t.find((t=>t.shortcut===e)))||void 0===n?void 0:n.name}`}})):[{value:"",label:"no values",description:"add new room"}],n=(0,WE.getBackendSrv)().fetch({url:"/api/plugins/vaduga-mapgl-app/resources/ping"}),i=(yield(0,gj.lastValueFrom)(n)).data;if(i){const{orgName:t,expiresAtFmt:e,expiresAt:n,domain:r,featLimit:o}=i;l({orgName:t,expiresAtFmt:e,expiresAt:n,domain:r,featLimit:o})}return a(e),e}));return function(){return t.apply(this,arguments)}}();t()}),[]),(0,r.useCallback)((t=>{n((null==t?void 0:t.value)?t.value:void 0)}),[n]),Date.now().toString()),u=Number(c.slice(0,10))>(null==A?void 0:A.expiresAt);return o().createElement(o().Fragment,null,"licensed for: ",(null==A?void 0:A.orgName)+" , ","domain: ",null==A?void 0:A.domain,o().createElement("p",{style:u?{color:"#d10a85"}:{}},"token expir",u?"ed":"es",": ",null==A?void 0:A.expiresAtFmt))},t3=({value:t,onChange:e,options:n})=>o().createElement(HE.Select,{width:20,isLoading:!1,value:t,onChange:t=>{e(null==t?void 0:t.value)},options:n}),e3=t=>{const e=(0,HE.useStyles2)(n3);if(t.context.data&&t.context.data.length>0){const n=t.context.data.flatMap((t=>t.fields)).map((t=>({label:t.name,value:t.name,type:t.type})));return o().createElement(o().Fragment,null,o().createElement(HE.InlineField,{shrink:!0,label:"override "+(t.index+1)},o().createElement(t3,{context:t.context,options:n,item:t.context.item,value:t.overrideField.name,onChange:e=>{"string"==typeof e&&t.nameTypeSetter(t.index,e,n.find((t=>t.value===e)).type)}})),o().createElement(HE.InlineField,{label:"values"},o().createElement(HE.AutoSizeInput,{minWidth:10,onCommitChange:e=>{t.valueSetter(t.index,e.currentTarget.value)},defaultValue:t.overrideField.value,placeholder:"val1,val2..."})),o().createElement(HE.InlineField,{className:e.rmButton},o().createElement(HE.IconButton,{disabled:t.disabled,key:"deleteThresholdField",variant:"destructive",name:"x",tooltip:"rm override field",onClick:()=>t.remover(t.index)})))}return o().createElement(HE.Select,{onChange:()=>{},disabled:!0})},n3=t=>({colorPicker:tv.css`
      padding: 0 ${t.spacing(1)};
    `,rmButton:tv.css`
          align-items: center;
        `}),i3=NE(10,150,5,!1),r3=(NE(-20,20,5,!1),(t,n)=>{const i=(0,HE.useStyles2)(o3),[s,a]=(0,r.useState)((()=>{if(!t.rule.overrides){return[]}const e=[];return Object.values(t.rule.overrides).forEach(((t,n)=>{e[n]={overrideField:t,order:n,ID:Te()}})),e})),A=(vQ.map((t=>({label:t,value:"cisco/"+t}))),BQ.map((t=>({label:t,value:"networking/"+t}))),wQ.map((t=>({label:t,value:"databases/"+t}))),e=>{a(e);const n=[];e.forEach((t=>{n.push(t.overrideField)})),t.overrideSetter(t.index,n)}),l=(t,e,n)=>{s[t].overrideField.name=e,s[t].overrideField.type=n,A([...s])},c=(t,e)=>{s[t].overrideField.value=e,A([...s])},u=t=>{const e=[...s];let n=0;for(let i=0;i<e.length;i++)if(e[i].order===t){n=i;break}e.splice(n,1);for(let t=0;t<e.length;t++)e[t].order=t;A([...e])},[h,g]=(0,r.useState)(t.rule.iconRuleLabel),[d,p]=(0,r.useState)(t.rule.iconSize),[f,m]=(0,r.useState)(t.rule.iconVOffset),[I,y]=(0,r.useState)(t.rule.iconName);return o().createElement(HE.InlineFieldRow,{className:i.inlineRow},o().createElement(HE.InlineField,{shrink:!0,label:"label"},o().createElement(HE.AutoSizeInput,{key:t.index,defaultValue:h,placeholder:"rule label",onCommitChange:e=>{const{value:n}=e.currentTarget;g(n),t.iconLabelSetter(t.index,n)}})),o().createElement(HE.InlineField,{label:"size"},o().createElement(HE.Select,{disabled:t.disabled,menuShouldPortal:!0,value:d,onChange:e=>{const n="string"==typeof e.value?parseFloat(e.value):e.value;n&&(p(e),t.iconSizeSetter(t.index,n))},options:"number"==typeof d?i3.concat([{value:d,label:d.toString()}]):i3,allowCustomValue:!0})),o().createElement(HE.InlineField,{shrink:!0,label:"offset",className:i.voffset},o().createElement(HE.Input,{disabled:t.disabled,type:"number",step:"1.0",key:t.index,defaultValue:f,onChange:e=>{const{value:n}=e.currentTarget,i="string"==typeof n?parseFloat(n):n;"number"==typeof i&&(m(i),t.iconVOffsetSetter(t.index,i))}})),s&&s.map(((e,n)=>o().createElement(e3,{disabled:t.disabled||!1,key:`rule-field-index-${e.ID}`,ID:e.ID,overrideField:e.overrideField,nameTypeSetter:l,valueSetter:c,remover:u,index:n,context:t.context}))),o().createElement(HE.InlineField,{shrink:!0,label:"icon name"},o().createElement(qQ,{value:{fixed:t.rule.iconName,mode:IB.Fixed},context:n,onChange:e=>{var n;e&&("custom_icon"===e.fixed?y(e.fixed):"string"==typeof(n=e.fixed)&&(t.iconNameSetter(t.index,n),y(n)))},item:{settings:{resourceType:EB.Icon,folderName:CB.Networking,placeholderText:"Select an icon",showSourceRadio:!1,maxFiles:2e3}}})),o().createElement(HE.InlineField,{className:i.addButton},o().createElement(HE.IconButton,{disabled:t.disabled,key:"addRuleField",variant:"primary",name:"plus",tooltip:"add override",onClick:()=>{const t=s.length,n={overrideField:{name:"",value:"",type:e.FieldType.string},order:t,ID:Te()};A([...s,n])}})))}),o3=t=>({ruleContainer:tv.css`
      display: flex;
      align-items: center;
      //flex: 1; // Use flex: 1 to distribute space equally among child elements
      justify-content: space-between;
    `,colorPicker:tv.css`
      padding: 0 ${t.spacing(1)};
    `,nodeSelect:tv.css`
      margin: 5px 0px;
    `,inlineField:tv.css`
      flex: 1 0 auto;
    `,inlineRow:tv.css`
      //display: flex;
      //align-items: center;
     margin-top: 10px;      
    `,voffset:tv.css`
      //display: inline-block; /* Ensures the field takes only the space it needs */
      width: 30%;
      flex-shrink: 1;
    `,addButton:tv.css`
      align-items: center;
    `}),s3=t=>{const[e,n]=(0,r.useState)((()=>{if(!t.rules){return[]}const e=[];return t.rules.forEach(((t,n)=>{e[n]={rule:t,order:n,ID:Te()}})),e})),i=(0,HE.useTheme2)(),s=e=>{n(e);const i=[];e.forEach((t=>{i.push(t.rule)})),t.setter(i)},a=(t,n,i)=>{n&&(e[t].rule.overrides=n,s([...e]))},A=(t,n)=>{let r=n;void 0!==i.visualization&&(r=i.visualization.getColorByName(n)),e[t].rule.svgColor=QE(r),s([...e])},l=(t,n)=>{e[t].rule.iconRuleLabel=n,s([...e])},c=(t,n)=>{e[t].rule.iconSize=n,s([...e])},u=t=>{e[t].rule.iconRuleCollapsed=!e[t].rule.iconRuleCollapsed,s([...e])},h=(t,n)=>{e[t].rule.iconVOffset=n,s([...e])},g=(t,n)=>{e[t].rule.iconName=n,s([...e])},d=t=>{const n=[...e];let i=0;for(let e=0;e<n.length;e++)if(n[e].order===t){i=e;break}n.splice(i,1);for(let t=0;t<n.length;t++)n[t].order=t;s([...n])};return o().createElement(o().Fragment,null,o().createElement(HE.Button,{disabled:t.disabled,fill:"solid",variant:"primary",icon:"plus",onClick:()=>{const t={rule:{overrides:[],iconRuleLabel:"new rule",iconRuleCollapsed:true,iconSize:20,iconVOffset:-5,iconName:""},order:e.length,ID:Te()};s([...e,t])}},"Add icon rule"),e&&e.map(((e,n)=>{var i;return o().createElement(HE.CollapsableSection,{key:n,isOpen:e.rule.iconRuleCollapsed,label:o().createElement("span",null,n+1," ",null!==(i=e.rule.iconRuleLabel)&&void 0!==i?i:"rule",o().createElement(o().Fragment,null,""),o().createElement(HE.IconButton,{disabled:t.disabled,key:"deleteRule",variant:"secondary",name:"trash-alt",tooltip:"delete icon rule",onClick:t=>{d(n),t.stopPropagation()}})),onToggle:()=>u(n)},o().createElement(r3,{disabled:t.disabled||!1,key:`rule-item-index-${e.ID}`,ID:e.ID,rule:e.rule,colorSetter:A,iconLabelSetter:l,iconSizeSetter:c,iconVOffsetSetter:h,iconNameSetter:g,overrideSetter:a,remover:d,index:n,context:t.context}))})))},a3=({context:t,onChange:e})=>{const[n,i]=(0,r.useState)(t.options.svgIconsConfig);return o().createElement(o().Fragment,null,o().createElement(HE.Field,null,o().createElement(s3,{context:t,rules:n,setter:t=>{i(t),e(t)}})))};function A3(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const l3=({value:t,onChange:n,context:i})=>{const s=t,a=i.data,A=(0,r.useMemo)((()=>{const t=new e.PanelOptionsEditorBuilder;return t.addTextInput({path:"locLabelName",name:"Location name label in alert annotation",settings:{}}),t}),[]),l=(0,r.useMemo)((()=>{if(!A)return null;const t=new m2({id:"Layer config",title:"Layer config"}),e={data:a,options:s},i=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){A3(t,e,n[e])}))}return t}({},{locLabelName:"instance"},s);s||n(i);return b2(A.getRegistry().list(),(e=>t),((t,e)=>{n(E2(i,t,e))}),e),o().createElement(o().Fragment,null,o().createElement("br",null),t.items.map((t=>t.render())))}),[A,n,a,s]);return o().createElement("div",null,l)},c3=new e.PanelPlugin((({options:t,data:e,width:n,height:i,replaceVariables:s,eventBus:a,onOptionsChange:A})=>{var l,c;(null==t?void 0:t.dataLayer)&&!(null==t?void 0:t.dataLayers)&&(t.dataLayers=[t.dataLayer],t.dataLayer=null);const u=(0,HE.useTheme2)(),[h,g]=(0,r.useState)(!1),d=document.getElementById("ymaps3-script"),p=!("yamaps"!==(null===(l=t.basemap)||void 0===l?void 0:l.type)||!(null===(c=t.basemap)||void 0===c?void 0:c.apiKey));var f,m;!p||h||void 0!==window.ymaps3||d||(null===(f=t.basemap)||void 0===f?void 0:f.apiKey)&&function(t,e){j0.apply(this,arguments)}(null===(m=t.basemap)||void 0===m?void 0:m.apiKey,g);const I=t2($1({},(0,HE.usePanelContext)()),{onToggleSeriesVisibility:void 0,onSeriesColorChange:(e,n)=>{var i;const r=$1({},t);null===(i=r.globalThresholdsConfig)||void 0===i||i.forEach((t=>{if(t.label===e){const e=u.visualization.getColorByName(n);e&&(t.color=QE(e))}})),null==a||a.publish({type:"thresholdType",payload:{thresholds:r.globalThresholdsConfig}}),A(r)}});return o().createElement(Q1,{props:{replaceVariables:s,options:t,theme2:u}},o().createElement(HE.PanelContextProvider,{value:I},o().createElement(J0,{isYaMaps:p},o().createElement(g1,{options:t,data:e,width:n,height:i,eventBus:a}))))})).setNoPadding().setPanelOptions((t=>{t.addCustomEditor({category:["Map view"],id:"view",path:"view",name:"Initial view",description:"This location will show when the panel first loads",editor:V2,defaultValue:i}),t.addCustomEditor({category:["Base layer"],id:"basemap",path:"basemap",name:"Base layer",editor:U2,defaultValue:cD}),t.addCustomEditor({category:["Data layers"],id:"dataLayers",path:"dataLayers",name:"Data layers",editor:Y2}),t.addCustomEditor({category:["Alerts & Annotations"],id:"common",path:"common",name:"Alerts & Annotations",editor:l3}).addCustomEditor({id:"roomSelector",path:"roomID",name:"Replication",editor:$2,defaultValue:"mapgl-data.db"}).addBooleanSwitch({path:"common.isShowLegend",name:"Show legend",defaultValue:!0}).addBooleanSwitch({path:"isEditable",name:"Editable",defaultValue:!1,showIf:t=>!["",void 0].includes(t.roomID)}).addBooleanSwitch({path:"updatesLog",name:"Log list",defaultValue:!1,showIf:()=>!1}).addBooleanSwitch({path:"isGeocoder",name:"Geocoder",description:"Turn off when multiple maps per dashboard",defaultValue:!1}),t.addCustomEditor({category:["Svg icons"],id:"svgIconsConfig",path:"svgIconsConfig",name:"Svg icons",editor:a3}),t.addCustomEditor({name:"Color and line-width thresholds",id:"globalThresholdsConfig",path:"globalThresholdsConfig",description:"for primary metric (stat1)",editor:l2,defaultValue:[],category:["Thresholds"]})})).setDataSupport({annotations:!0,alertStates:!0})})(),d})()));